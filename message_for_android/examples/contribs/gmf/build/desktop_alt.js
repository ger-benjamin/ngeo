
/*
 * Auto redirect to https to prevent CORS exceptions
 */
if (window.location.protocol == 'http:' &&
    window.location.port != '3000' &&
    window.location.host != 'localhost') {
  var restOfUrl = window.location.href.substr(5);
  /** @type {Location} */
  window.location = 'https:' + restOfUrl;
}

/*! jQuery v3.2.1 | (c) JS Foundation and other contributors | jquery.org/license */
!function(a,b){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(a,b){"use strict";var c=[],d=a.document,e=Object.getPrototypeOf,f=c.slice,g=c.concat,h=c.push,i=c.indexOf,j={},k=j.toString,l=j.hasOwnProperty,m=l.toString,n=m.call(Object),o={};function p(a,b){b=b||d;var c=b.createElement("script");c.text=a,b.head.appendChild(c).parentNode.removeChild(c)}var q="3.2.1",r=function(a,b){return new r.fn.init(a,b)},s=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,t=/^-ms-/,u=/-([a-z])/g,v=function(a,b){return b.toUpperCase()};r.fn=r.prototype={jquery:q,constructor:r,length:0,toArray:function(){return f.call(this)},get:function(a){return null==a?f.call(this):a<0?this[a+this.length]:this[a]},pushStack:function(a){var b=r.merge(this.constructor(),a);return b.prevObject=this,b},each:function(a){return r.each(this,a)},map:function(a){return this.pushStack(r.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(f.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(a<0?b:0);return this.pushStack(c>=0&&c<b?[this[c]]:[])},end:function(){return this.prevObject||this.constructor()},push:h,sort:c.sort,splice:c.splice},r.extend=r.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||r.isFunction(g)||(g={}),h===i&&(g=this,h--);h<i;h++)if(null!=(a=arguments[h]))for(b in a)c=g[b],d=a[b],g!==d&&(j&&d&&(r.isPlainObject(d)||(e=Array.isArray(d)))?(e?(e=!1,f=c&&Array.isArray(c)?c:[]):f=c&&r.isPlainObject(c)?c:{},g[b]=r.extend(j,f,d)):void 0!==d&&(g[b]=d));return g},r.extend({expando:"jQuery"+(q+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===r.type(a)},isWindow:function(a){return null!=a&&a===a.window},isNumeric:function(a){var b=r.type(a);return("number"===b||"string"===b)&&!isNaN(a-parseFloat(a))},isPlainObject:function(a){var b,c;return!(!a||"[object Object]"!==k.call(a))&&(!(b=e(a))||(c=l.call(b,"constructor")&&b.constructor,"function"==typeof c&&m.call(c)===n))},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?j[k.call(a)]||"object":typeof a},globalEval:function(a){p(a)},camelCase:function(a){return a.replace(t,"ms-").replace(u,v)},each:function(a,b){var c,d=0;if(w(a)){for(c=a.length;d<c;d++)if(b.call(a[d],d,a[d])===!1)break}else for(d in a)if(b.call(a[d],d,a[d])===!1)break;return a},trim:function(a){return null==a?"":(a+"").replace(s,"")},makeArray:function(a,b){var c=b||[];return null!=a&&(w(Object(a))?r.merge(c,"string"==typeof a?[a]:a):h.call(c,a)),c},inArray:function(a,b,c){return null==b?-1:i.call(b,a,c)},merge:function(a,b){for(var c=+b.length,d=0,e=a.length;d<c;d++)a[e++]=b[d];return a.length=e,a},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;f<g;f++)d=!b(a[f],f),d!==h&&e.push(a[f]);return e},map:function(a,b,c){var d,e,f=0,h=[];if(w(a))for(d=a.length;f<d;f++)e=b(a[f],f,c),null!=e&&h.push(e);else for(f in a)e=b(a[f],f,c),null!=e&&h.push(e);return g.apply([],h)},guid:1,proxy:function(a,b){var c,d,e;if("string"==typeof b&&(c=a[b],b=a,a=c),r.isFunction(a))return d=f.call(arguments,2),e=function(){return a.apply(b||this,d.concat(f.call(arguments)))},e.guid=a.guid=a.guid||r.guid++,e},now:Date.now,support:o}),"function"==typeof Symbol&&(r.fn[Symbol.iterator]=c[Symbol.iterator]),r.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(a,b){j["[object "+b+"]"]=b.toLowerCase()});function w(a){var b=!!a&&"length"in a&&a.length,c=r.type(a);return"function"!==c&&!r.isWindow(a)&&("array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a)}var x=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u="sizzle"+1*new Date,v=a.document,w=0,x=0,y=ha(),z=ha(),A=ha(),B=function(a,b){return a===b&&(l=!0),0},C={}.hasOwnProperty,D=[],E=D.pop,F=D.push,G=D.push,H=D.slice,I=function(a,b){for(var c=0,d=a.length;c<d;c++)if(a[c]===b)return c;return-1},J="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",K="[\\x20\\t\\r\\n\\f]",L="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",M="\\["+K+"*("+L+")(?:"+K+"*([*^$|!~]?=)"+K+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+L+"))|)"+K+"*\\]",N=":("+L+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+M+")*)|.*)\\)|)",O=new RegExp(K+"+","g"),P=new RegExp("^"+K+"+|((?:^|[^\\\\])(?:\\\\.)*)"+K+"+$","g"),Q=new RegExp("^"+K+"*,"+K+"*"),R=new RegExp("^"+K+"*([>+~]|"+K+")"+K+"*"),S=new RegExp("="+K+"*([^\\]'\"]*?)"+K+"*\\]","g"),T=new RegExp(N),U=new RegExp("^"+L+"$"),V={ID:new RegExp("^#("+L+")"),CLASS:new RegExp("^\\.("+L+")"),TAG:new RegExp("^("+L+"|[*])"),ATTR:new RegExp("^"+M),PSEUDO:new RegExp("^"+N),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+K+"*(even|odd|(([+-]|)(\\d*)n|)"+K+"*(?:([+-]|)"+K+"*(\\d+)|))"+K+"*\\)|)","i"),bool:new RegExp("^(?:"+J+")$","i"),needsContext:new RegExp("^"+K+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+K+"*((?:-\\d)?\\d*)"+K+"*\\)|)(?=[^-]|$)","i")},W=/^(?:input|select|textarea|button)$/i,X=/^h\d$/i,Y=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,$=/[+~]/,_=new RegExp("\\\\([\\da-f]{1,6}"+K+"?|("+K+")|.)","ig"),aa=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:d<0?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)},ba=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ca=function(a,b){return b?"\0"===a?"\ufffd":a.slice(0,-1)+"\\"+a.charCodeAt(a.length-1).toString(16)+" ":"\\"+a},da=function(){m()},ea=ta(function(a){return a.disabled===!0&&("form"in a||"label"in a)},{dir:"parentNode",next:"legend"});try{G.apply(D=H.call(v.childNodes),v.childNodes),D[v.childNodes.length].nodeType}catch(fa){G={apply:D.length?function(a,b){F.apply(a,H.call(b))}:function(a,b){var c=a.length,d=0;while(a[c++]=b[d++]);a.length=c-1}}}function ga(a,b,d,e){var f,h,j,k,l,o,r,s=b&&b.ownerDocument,w=b?b.nodeType:9;if(d=d||[],"string"!=typeof a||!a||1!==w&&9!==w&&11!==w)return d;if(!e&&((b?b.ownerDocument||b:v)!==n&&m(b),b=b||n,p)){if(11!==w&&(l=Z.exec(a)))if(f=l[1]){if(9===w){if(!(j=b.getElementById(f)))return d;if(j.id===f)return d.push(j),d}else if(s&&(j=s.getElementById(f))&&t(b,j)&&j.id===f)return d.push(j),d}else{if(l[2])return G.apply(d,b.getElementsByTagName(a)),d;if((f=l[3])&&c.getElementsByClassName&&b.getElementsByClassName)return G.apply(d,b.getElementsByClassName(f)),d}if(c.qsa&&!A[a+" "]&&(!q||!q.test(a))){if(1!==w)s=b,r=a;else if("object"!==b.nodeName.toLowerCase()){(k=b.getAttribute("id"))?k=k.replace(ba,ca):b.setAttribute("id",k=u),o=g(a),h=o.length;while(h--)o[h]="#"+k+" "+sa(o[h]);r=o.join(","),s=$.test(a)&&qa(b.parentNode)||b}if(r)try{return G.apply(d,s.querySelectorAll(r)),d}catch(x){}finally{k===u&&b.removeAttribute("id")}}}return i(a.replace(P,"$1"),b,d,e)}function ha(){var a=[];function b(c,e){return a.push(c+" ")>d.cacheLength&&delete b[a.shift()],b[c+" "]=e}return b}function ia(a){return a[u]=!0,a}function ja(a){var b=n.createElement("fieldset");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function ka(a,b){var c=a.split("|"),e=c.length;while(e--)d.attrHandle[c[e]]=b}function la(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&a.sourceIndex-b.sourceIndex;if(d)return d;if(c)while(c=c.nextSibling)if(c===b)return-1;return a?1:-1}function ma(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function na(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function oa(a){return function(b){return"form"in b?b.parentNode&&b.disabled===!1?"label"in b?"label"in b.parentNode?b.parentNode.disabled===a:b.disabled===a:b.isDisabled===a||b.isDisabled!==!a&&ea(b)===a:b.disabled===a:"label"in b&&b.disabled===a}}function pa(a){return ia(function(b){return b=+b,ia(function(c,d){var e,f=a([],c.length,b),g=f.length;while(g--)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function qa(a){return a&&"undefined"!=typeof a.getElementsByTagName&&a}c=ga.support={},f=ga.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return!!b&&"HTML"!==b.nodeName},m=ga.setDocument=function(a){var b,e,g=a?a.ownerDocument||a:v;return g!==n&&9===g.nodeType&&g.documentElement?(n=g,o=n.documentElement,p=!f(n),v!==n&&(e=n.defaultView)&&e.top!==e&&(e.addEventListener?e.addEventListener("unload",da,!1):e.attachEvent&&e.attachEvent("onunload",da)),c.attributes=ja(function(a){return a.className="i",!a.getAttribute("className")}),c.getElementsByTagName=ja(function(a){return a.appendChild(n.createComment("")),!a.getElementsByTagName("*").length}),c.getElementsByClassName=Y.test(n.getElementsByClassName),c.getById=ja(function(a){return o.appendChild(a).id=u,!n.getElementsByName||!n.getElementsByName(u).length}),c.getById?(d.filter.ID=function(a){var b=a.replace(_,aa);return function(a){return a.getAttribute("id")===b}},d.find.ID=function(a,b){if("undefined"!=typeof b.getElementById&&p){var c=b.getElementById(a);return c?[c]:[]}}):(d.filter.ID=function(a){var b=a.replace(_,aa);return function(a){var c="undefined"!=typeof a.getAttributeNode&&a.getAttributeNode("id");return c&&c.value===b}},d.find.ID=function(a,b){if("undefined"!=typeof b.getElementById&&p){var c,d,e,f=b.getElementById(a);if(f){if(c=f.getAttributeNode("id"),c&&c.value===a)return[f];e=b.getElementsByName(a),d=0;while(f=e[d++])if(c=f.getAttributeNode("id"),c&&c.value===a)return[f]}return[]}}),d.find.TAG=c.getElementsByTagName?function(a,b){return"undefined"!=typeof b.getElementsByTagName?b.getElementsByTagName(a):c.qsa?b.querySelectorAll(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){while(c=f[e++])1===c.nodeType&&d.push(c);return d}return f},d.find.CLASS=c.getElementsByClassName&&function(a,b){if("undefined"!=typeof b.getElementsByClassName&&p)return b.getElementsByClassName(a)},r=[],q=[],(c.qsa=Y.test(n.querySelectorAll))&&(ja(function(a){o.appendChild(a).innerHTML="<a id='"+u+"'></a><select id='"+u+"-\r\\' msallowcapture=''><option selected=''></option></select>",a.querySelectorAll("[msallowcapture^='']").length&&q.push("[*^$]="+K+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||q.push("\\["+K+"*(?:value|"+J+")"),a.querySelectorAll("[id~="+u+"-]").length||q.push("~="),a.querySelectorAll(":checked").length||q.push(":checked"),a.querySelectorAll("a#"+u+"+*").length||q.push(".#.+[+~]")}),ja(function(a){a.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var b=n.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&q.push("name"+K+"*[*^$|!~]?="),2!==a.querySelectorAll(":enabled").length&&q.push(":enabled",":disabled"),o.appendChild(a).disabled=!0,2!==a.querySelectorAll(":disabled").length&&q.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),q.push(",.*:")})),(c.matchesSelector=Y.test(s=o.matches||o.webkitMatchesSelector||o.mozMatchesSelector||o.oMatchesSelector||o.msMatchesSelector))&&ja(function(a){c.disconnectedMatch=s.call(a,"*"),s.call(a,"[s!='']:x"),r.push("!=",N)}),q=q.length&&new RegExp(q.join("|")),r=r.length&&new RegExp(r.join("|")),b=Y.test(o.compareDocumentPosition),t=b||Y.test(o.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)while(b=b.parentNode)if(b===a)return!0;return!1},B=b?function(a,b){if(a===b)return l=!0,0;var d=!a.compareDocumentPosition-!b.compareDocumentPosition;return d?d:(d=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&d||!c.sortDetached&&b.compareDocumentPosition(a)===d?a===n||a.ownerDocument===v&&t(v,a)?-1:b===n||b.ownerDocument===v&&t(v,b)?1:k?I(k,a)-I(k,b):0:4&d?-1:1)}:function(a,b){if(a===b)return l=!0,0;var c,d=0,e=a.parentNode,f=b.parentNode,g=[a],h=[b];if(!e||!f)return a===n?-1:b===n?1:e?-1:f?1:k?I(k,a)-I(k,b):0;if(e===f)return la(a,b);c=a;while(c=c.parentNode)g.unshift(c);c=b;while(c=c.parentNode)h.unshift(c);while(g[d]===h[d])d++;return d?la(g[d],h[d]):g[d]===v?-1:h[d]===v?1:0},n):n},ga.matches=function(a,b){return ga(a,null,null,b)},ga.matchesSelector=function(a,b){if((a.ownerDocument||a)!==n&&m(a),b=b.replace(S,"='$1']"),c.matchesSelector&&p&&!A[b+" "]&&(!r||!r.test(b))&&(!q||!q.test(b)))try{var d=s.call(a,b);if(d||c.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(e){}return ga(b,n,null,[a]).length>0},ga.contains=function(a,b){return(a.ownerDocument||a)!==n&&m(a),t(a,b)},ga.attr=function(a,b){(a.ownerDocument||a)!==n&&m(a);var e=d.attrHandle[b.toLowerCase()],f=e&&C.call(d.attrHandle,b.toLowerCase())?e(a,b,!p):void 0;return void 0!==f?f:c.attributes||!p?a.getAttribute(b):(f=a.getAttributeNode(b))&&f.specified?f.value:null},ga.escape=function(a){return(a+"").replace(ba,ca)},ga.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},ga.uniqueSort=function(a){var b,d=[],e=0,f=0;if(l=!c.detectDuplicates,k=!c.sortStable&&a.slice(0),a.sort(B),l){while(b=a[f++])b===a[f]&&(e=d.push(f));while(e--)a.splice(d[e],1)}return k=null,a},e=ga.getText=function(a){var b,c="",d=0,f=a.nodeType;if(f){if(1===f||9===f||11===f){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=e(a)}else if(3===f||4===f)return a.nodeValue}else while(b=a[d++])c+=e(b);return c},d=ga.selectors={cacheLength:50,createPseudo:ia,match:V,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(_,aa),a[3]=(a[3]||a[4]||a[5]||"").replace(_,aa),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||ga.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&ga.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return V.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&T.test(c)&&(b=g(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(_,aa).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=y[a+" "];return b||(b=new RegExp("(^|"+K+")"+a+"("+K+"|$)"))&&y(a,function(a){return b.test("string"==typeof a.className&&a.className||"undefined"!=typeof a.getAttribute&&a.getAttribute("class")||"")})},ATTR:function(a,b,c){return function(d){var e=ga.attr(d,a);return null==e?"!="===b:!b||(e+="","="===b?e===c:"!="===b?e!==c:"^="===b?c&&0===e.indexOf(c):"*="===b?c&&e.indexOf(c)>-1:"$="===b?c&&e.slice(-c.length)===c:"~="===b?(" "+e.replace(O," ")+" ").indexOf(c)>-1:"|="===b&&(e===c||e.slice(0,c.length+1)===c+"-"))}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h,t=!1;if(q){if(f){while(p){m=b;while(m=m[p])if(h?m.nodeName.toLowerCase()===r:1===m.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){m=q,l=m[u]||(m[u]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),j=k[a]||[],n=j[0]===w&&j[1],t=n&&j[2],m=n&&q.childNodes[n];while(m=++n&&m&&m[p]||(t=n=0)||o.pop())if(1===m.nodeType&&++t&&m===b){k[a]=[w,n,t];break}}else if(s&&(m=b,l=m[u]||(m[u]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),j=k[a]||[],n=j[0]===w&&j[1],t=n),t===!1)while(m=++n&&m&&m[p]||(t=n=0)||o.pop())if((h?m.nodeName.toLowerCase()===r:1===m.nodeType)&&++t&&(s&&(l=m[u]||(m[u]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),k[a]=[w,t]),m===b))break;return t-=e,t===d||t%d===0&&t/d>=0}}},PSEUDO:function(a,b){var c,e=d.pseudos[a]||d.setFilters[a.toLowerCase()]||ga.error("unsupported pseudo: "+a);return e[u]?e(b):e.length>1?(c=[a,a,"",b],d.setFilters.hasOwnProperty(a.toLowerCase())?ia(function(a,c){var d,f=e(a,b),g=f.length;while(g--)d=I(a,f[g]),a[d]=!(c[d]=f[g])}):function(a){return e(a,0,c)}):e}},pseudos:{not:ia(function(a){var b=[],c=[],d=h(a.replace(P,"$1"));return d[u]?ia(function(a,b,c,e){var f,g=d(a,null,e,[]),h=a.length;while(h--)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,e,f){return b[0]=a,d(b,null,f,c),b[0]=null,!c.pop()}}),has:ia(function(a){return function(b){return ga(a,b).length>0}}),contains:ia(function(a){return a=a.replace(_,aa),function(b){return(b.textContent||b.innerText||e(b)).indexOf(a)>-1}}),lang:ia(function(a){return U.test(a||"")||ga.error("unsupported lang: "+a),a=a.replace(_,aa).toLowerCase(),function(b){var c;do if(c=p?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===o},focus:function(a){return a===n.activeElement&&(!n.hasFocus||n.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:oa(!1),disabled:oa(!0),checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!d.pseudos.empty(a)},header:function(a){return X.test(a.nodeName)},input:function(a){return W.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:pa(function(){return[0]}),last:pa(function(a,b){return[b-1]}),eq:pa(function(a,b,c){return[c<0?c+b:c]}),even:pa(function(a,b){for(var c=0;c<b;c+=2)a.push(c);return a}),odd:pa(function(a,b){for(var c=1;c<b;c+=2)a.push(c);return a}),lt:pa(function(a,b,c){for(var d=c<0?c+b:c;--d>=0;)a.push(d);return a}),gt:pa(function(a,b,c){for(var d=c<0?c+b:c;++d<b;)a.push(d);return a})}},d.pseudos.nth=d.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})d.pseudos[b]=ma(b);for(b in{submit:!0,reset:!0})d.pseudos[b]=na(b);function ra(){}ra.prototype=d.filters=d.pseudos,d.setFilters=new ra,g=ga.tokenize=function(a,b){var c,e,f,g,h,i,j,k=z[a+" "];if(k)return b?0:k.slice(0);h=a,i=[],j=d.preFilter;while(h){c&&!(e=Q.exec(h))||(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),c=!1,(e=R.exec(h))&&(c=e.shift(),f.push({value:c,type:e[0].replace(P," ")}),h=h.slice(c.length));for(g in d.filter)!(e=V[g].exec(h))||j[g]&&!(e=j[g](e))||(c=e.shift(),f.push({value:c,type:g,matches:e}),h=h.slice(c.length));if(!c)break}return b?h.length:h?ga.error(a):z(a,i).slice(0)};function sa(a){for(var b=0,c=a.length,d="";b<c;b++)d+=a[b].value;return d}function ta(a,b,c){var d=b.dir,e=b.next,f=e||d,g=c&&"parentNode"===f,h=x++;return b.first?function(b,c,e){while(b=b[d])if(1===b.nodeType||g)return a(b,c,e);return!1}:function(b,c,i){var j,k,l,m=[w,h];if(i){while(b=b[d])if((1===b.nodeType||g)&&a(b,c,i))return!0}else while(b=b[d])if(1===b.nodeType||g)if(l=b[u]||(b[u]={}),k=l[b.uniqueID]||(l[b.uniqueID]={}),e&&e===b.nodeName.toLowerCase())b=b[d]||b;else{if((j=k[f])&&j[0]===w&&j[1]===h)return m[2]=j[2];if(k[f]=m,m[2]=a(b,c,i))return!0}return!1}}function ua(a){return a.length>1?function(b,c,d){var e=a.length;while(e--)if(!a[e](b,c,d))return!1;return!0}:a[0]}function va(a,b,c){for(var d=0,e=b.length;d<e;d++)ga(a,b[d],c);return c}function wa(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;h<i;h++)(f=a[h])&&(c&&!c(f,d,e)||(g.push(f),j&&b.push(h)));return g}function xa(a,b,c,d,e,f){return d&&!d[u]&&(d=xa(d)),e&&!e[u]&&(e=xa(e,f)),ia(function(f,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=f||va(b||"*",h.nodeType?[h]:h,[]),q=!a||!f&&b?p:wa(p,m,a,h,i),r=c?e||(f?a:o||d)?[]:g:q;if(c&&c(q,r,h,i),d){j=wa(r,n),d(j,[],h,i),k=j.length;while(k--)(l=j[k])&&(r[n[k]]=!(q[n[k]]=l))}if(f){if(e||a){if(e){j=[],k=r.length;while(k--)(l=r[k])&&j.push(q[k]=l);e(null,r=[],j,i)}k=r.length;while(k--)(l=r[k])&&(j=e?I(f,l):m[k])>-1&&(f[j]=!(g[j]=l))}}else r=wa(r===g?r.splice(o,r.length):r),e?e(null,g,r,i):G.apply(g,r)})}function ya(a){for(var b,c,e,f=a.length,g=d.relative[a[0].type],h=g||d.relative[" "],i=g?1:0,k=ta(function(a){return a===b},h,!0),l=ta(function(a){return I(b,a)>-1},h,!0),m=[function(a,c,d){var e=!g&&(d||c!==j)||((b=c).nodeType?k(a,c,d):l(a,c,d));return b=null,e}];i<f;i++)if(c=d.relative[a[i].type])m=[ta(ua(m),c)];else{if(c=d.filter[a[i].type].apply(null,a[i].matches),c[u]){for(e=++i;e<f;e++)if(d.relative[a[e].type])break;return xa(i>1&&ua(m),i>1&&sa(a.slice(0,i-1).concat({value:" "===a[i-2].type?"*":""})).replace(P,"$1"),c,i<e&&ya(a.slice(i,e)),e<f&&ya(a=a.slice(e)),e<f&&sa(a))}m.push(c)}return ua(m)}function za(a,b){var c=b.length>0,e=a.length>0,f=function(f,g,h,i,k){var l,o,q,r=0,s="0",t=f&&[],u=[],v=j,x=f||e&&d.find.TAG("*",k),y=w+=null==v?1:Math.random()||.1,z=x.length;for(k&&(j=g===n||g||k);s!==z&&null!=(l=x[s]);s++){if(e&&l){o=0,g||l.ownerDocument===n||(m(l),h=!p);while(q=a[o++])if(q(l,g||n,h)){i.push(l);break}k&&(w=y)}c&&((l=!q&&l)&&r--,f&&t.push(l))}if(r+=s,c&&s!==r){o=0;while(q=b[o++])q(t,u,g,h);if(f){if(r>0)while(s--)t[s]||u[s]||(u[s]=E.call(i));u=wa(u)}G.apply(i,u),k&&!f&&u.length>0&&r+b.length>1&&ga.uniqueSort(i)}return k&&(w=y,j=v),t};return c?ia(f):f}return h=ga.compile=function(a,b){var c,d=[],e=[],f=A[a+" "];if(!f){b||(b=g(a)),c=b.length;while(c--)f=ya(b[c]),f[u]?d.push(f):e.push(f);f=A(a,za(e,d)),f.selector=a}return f},i=ga.select=function(a,b,c,e){var f,i,j,k,l,m="function"==typeof a&&a,n=!e&&g(a=m.selector||a);if(c=c||[],1===n.length){if(i=n[0]=n[0].slice(0),i.length>2&&"ID"===(j=i[0]).type&&9===b.nodeType&&p&&d.relative[i[1].type]){if(b=(d.find.ID(j.matches[0].replace(_,aa),b)||[])[0],!b)return c;m&&(b=b.parentNode),a=a.slice(i.shift().value.length)}f=V.needsContext.test(a)?0:i.length;while(f--){if(j=i[f],d.relative[k=j.type])break;if((l=d.find[k])&&(e=l(j.matches[0].replace(_,aa),$.test(i[0].type)&&qa(b.parentNode)||b))){if(i.splice(f,1),a=e.length&&sa(i),!a)return G.apply(c,e),c;break}}}return(m||h(a,n))(e,b,!p,c,!b||$.test(a)&&qa(b.parentNode)||b),c},c.sortStable=u.split("").sort(B).join("")===u,c.detectDuplicates=!!l,m(),c.sortDetached=ja(function(a){return 1&a.compareDocumentPosition(n.createElement("fieldset"))}),ja(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||ka("type|href|height|width",function(a,b,c){if(!c)return a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),c.attributes&&ja(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||ka("value",function(a,b,c){if(!c&&"input"===a.nodeName.toLowerCase())return a.defaultValue}),ja(function(a){return null==a.getAttribute("disabled")})||ka(J,function(a,b,c){var d;if(!c)return a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),ga}(a);r.find=x,r.expr=x.selectors,r.expr[":"]=r.expr.pseudos,r.uniqueSort=r.unique=x.uniqueSort,r.text=x.getText,r.isXMLDoc=x.isXML,r.contains=x.contains,r.escapeSelector=x.escape;var y=function(a,b,c){var d=[],e=void 0!==c;while((a=a[b])&&9!==a.nodeType)if(1===a.nodeType){if(e&&r(a).is(c))break;d.push(a)}return d},z=function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c},A=r.expr.match.needsContext;function B(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()}var C=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i,D=/^.[^:#\[\.,]*$/;function E(a,b,c){return r.isFunction(b)?r.grep(a,function(a,d){return!!b.call(a,d,a)!==c}):b.nodeType?r.grep(a,function(a){return a===b!==c}):"string"!=typeof b?r.grep(a,function(a){return i.call(b,a)>-1!==c}):D.test(b)?r.filter(b,a,c):(b=r.filter(b,a),r.grep(a,function(a){return i.call(b,a)>-1!==c&&1===a.nodeType}))}r.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?r.find.matchesSelector(d,a)?[d]:[]:r.find.matches(a,r.grep(b,function(a){return 1===a.nodeType}))},r.fn.extend({find:function(a){var b,c,d=this.length,e=this;if("string"!=typeof a)return this.pushStack(r(a).filter(function(){for(b=0;b<d;b++)if(r.contains(e[b],this))return!0}));for(c=this.pushStack([]),b=0;b<d;b++)r.find(a,e[b],c);return d>1?r.uniqueSort(c):c},filter:function(a){return this.pushStack(E(this,a||[],!1))},not:function(a){return this.pushStack(E(this,a||[],!0))},is:function(a){return!!E(this,"string"==typeof a&&A.test(a)?r(a):a||[],!1).length}});var F,G=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,H=r.fn.init=function(a,b,c){var e,f;if(!a)return this;if(c=c||F,"string"==typeof a){if(e="<"===a[0]&&">"===a[a.length-1]&&a.length>=3?[null,a,null]:G.exec(a),!e||!e[1]&&b)return!b||b.jquery?(b||c).find(a):this.constructor(b).find(a);if(e[1]){if(b=b instanceof r?b[0]:b,r.merge(this,r.parseHTML(e[1],b&&b.nodeType?b.ownerDocument||b:d,!0)),C.test(e[1])&&r.isPlainObject(b))for(e in b)r.isFunction(this[e])?this[e](b[e]):this.attr(e,b[e]);return this}return f=d.getElementById(e[2]),f&&(this[0]=f,this.length=1),this}return a.nodeType?(this[0]=a,this.length=1,this):r.isFunction(a)?void 0!==c.ready?c.ready(a):a(r):r.makeArray(a,this)};H.prototype=r.fn,F=r(d);var I=/^(?:parents|prev(?:Until|All))/,J={children:!0,contents:!0,next:!0,prev:!0};r.fn.extend({has:function(a){var b=r(a,this),c=b.length;return this.filter(function(){for(var a=0;a<c;a++)if(r.contains(this,b[a]))return!0})},closest:function(a,b){var c,d=0,e=this.length,f=[],g="string"!=typeof a&&r(a);if(!A.test(a))for(;d<e;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&r.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?r.uniqueSort(f):f)},index:function(a){return a?"string"==typeof a?i.call(r(a),this[0]):i.call(this,a.jquery?a[0]:a):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(r.uniqueSort(r.merge(this.get(),r(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});function K(a,b){while((a=a[b])&&1!==a.nodeType);return a}r.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return y(a,"parentNode")},parentsUntil:function(a,b,c){return y(a,"parentNode",c)},next:function(a){return K(a,"nextSibling")},prev:function(a){return K(a,"previousSibling")},nextAll:function(a){return y(a,"nextSibling")},prevAll:function(a){return y(a,"previousSibling")},nextUntil:function(a,b,c){return y(a,"nextSibling",c)},prevUntil:function(a,b,c){return y(a,"previousSibling",c)},siblings:function(a){return z((a.parentNode||{}).firstChild,a)},children:function(a){return z(a.firstChild)},contents:function(a){return B(a,"iframe")?a.contentDocument:(B(a,"template")&&(a=a.content||a),r.merge([],a.childNodes))}},function(a,b){r.fn[a]=function(c,d){var e=r.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=r.filter(d,e)),this.length>1&&(J[a]||r.uniqueSort(e),I.test(a)&&e.reverse()),this.pushStack(e)}});var L=/[^\x20\t\r\n\f]+/g;function M(a){var b={};return r.each(a.match(L)||[],function(a,c){b[c]=!0}),b}r.Callbacks=function(a){a="string"==typeof a?M(a):r.extend({},a);var b,c,d,e,f=[],g=[],h=-1,i=function(){for(e=e||a.once,d=b=!0;g.length;h=-1){c=g.shift();while(++h<f.length)f[h].apply(c[0],c[1])===!1&&a.stopOnFalse&&(h=f.length,c=!1)}a.memory||(c=!1),b=!1,e&&(f=c?[]:"")},j={add:function(){return f&&(c&&!b&&(h=f.length-1,g.push(c)),function d(b){r.each(b,function(b,c){r.isFunction(c)?a.unique&&j.has(c)||f.push(c):c&&c.length&&"string"!==r.type(c)&&d(c)})}(arguments),c&&!b&&i()),this},remove:function(){return r.each(arguments,function(a,b){var c;while((c=r.inArray(b,f,c))>-1)f.splice(c,1),c<=h&&h--}),this},has:function(a){return a?r.inArray(a,f)>-1:f.length>0},empty:function(){return f&&(f=[]),this},disable:function(){return e=g=[],f=c="",this},disabled:function(){return!f},lock:function(){return e=g=[],c||b||(f=c=""),this},locked:function(){return!!e},fireWith:function(a,c){return e||(c=c||[],c=[a,c.slice?c.slice():c],g.push(c),b||i()),this},fire:function(){return j.fireWith(this,arguments),this},fired:function(){return!!d}};return j};function N(a){return a}function O(a){throw a}function P(a,b,c,d){var e;try{a&&r.isFunction(e=a.promise)?e.call(a).done(b).fail(c):a&&r.isFunction(e=a.then)?e.call(a,b,c):b.apply(void 0,[a].slice(d))}catch(a){c.apply(void 0,[a])}}r.extend({Deferred:function(b){var c=[["notify","progress",r.Callbacks("memory"),r.Callbacks("memory"),2],["resolve","done",r.Callbacks("once memory"),r.Callbacks("once memory"),0,"resolved"],["reject","fail",r.Callbacks("once memory"),r.Callbacks("once memory"),1,"rejected"]],d="pending",e={state:function(){return d},always:function(){return f.done(arguments).fail(arguments),this},"catch":function(a){return e.then(null,a)},pipe:function(){var a=arguments;return r.Deferred(function(b){r.each(c,function(c,d){var e=r.isFunction(a[d[4]])&&a[d[4]];f[d[1]](function(){var a=e&&e.apply(this,arguments);a&&r.isFunction(a.promise)?a.promise().progress(b.notify).done(b.resolve).fail(b.reject):b[d[0]+"With"](this,e?[a]:arguments)})}),a=null}).promise()},then:function(b,d,e){var f=0;function g(b,c,d,e){return function(){var h=this,i=arguments,j=function(){var a,j;if(!(b<f)){if(a=d.apply(h,i),a===c.promise())throw new TypeError("Thenable self-resolution");j=a&&("object"==typeof a||"function"==typeof a)&&a.then,r.isFunction(j)?e?j.call(a,g(f,c,N,e),g(f,c,O,e)):(f++,j.call(a,g(f,c,N,e),g(f,c,O,e),g(f,c,N,c.notifyWith))):(d!==N&&(h=void 0,i=[a]),(e||c.resolveWith)(h,i))}},k=e?j:function(){try{j()}catch(a){r.Deferred.exceptionHook&&r.Deferred.exceptionHook(a,k.stackTrace),b+1>=f&&(d!==O&&(h=void 0,i=[a]),c.rejectWith(h,i))}};b?k():(r.Deferred.getStackHook&&(k.stackTrace=r.Deferred.getStackHook()),a.setTimeout(k))}}return r.Deferred(function(a){c[0][3].add(g(0,a,r.isFunction(e)?e:N,a.notifyWith)),c[1][3].add(g(0,a,r.isFunction(b)?b:N)),c[2][3].add(g(0,a,r.isFunction(d)?d:O))}).promise()},promise:function(a){return null!=a?r.extend(a,e):e}},f={};return r.each(c,function(a,b){var g=b[2],h=b[5];e[b[1]]=g.add,h&&g.add(function(){d=h},c[3-a][2].disable,c[0][2].lock),g.add(b[3].fire),f[b[0]]=function(){return f[b[0]+"With"](this===f?void 0:this,arguments),this},f[b[0]+"With"]=g.fireWith}),e.promise(f),b&&b.call(f,f),f},when:function(a){var b=arguments.length,c=b,d=Array(c),e=f.call(arguments),g=r.Deferred(),h=function(a){return function(c){d[a]=this,e[a]=arguments.length>1?f.call(arguments):c,--b||g.resolveWith(d,e)}};if(b<=1&&(P(a,g.done(h(c)).resolve,g.reject,!b),"pending"===g.state()||r.isFunction(e[c]&&e[c].then)))return g.then();while(c--)P(e[c],h(c),g.reject);return g.promise()}});var Q=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;r.Deferred.exceptionHook=function(b,c){a.console&&a.console.warn&&b&&Q.test(b.name)&&a.console.warn("jQuery.Deferred exception: "+b.message,b.stack,c)},r.readyException=function(b){a.setTimeout(function(){throw b})};var R=r.Deferred();r.fn.ready=function(a){return R.then(a)["catch"](function(a){r.readyException(a)}),this},r.extend({isReady:!1,readyWait:1,ready:function(a){(a===!0?--r.readyWait:r.isReady)||(r.isReady=!0,a!==!0&&--r.readyWait>0||R.resolveWith(d,[r]))}}),r.ready.then=R.then;function S(){d.removeEventListener("DOMContentLoaded",S),
a.removeEventListener("load",S),r.ready()}"complete"===d.readyState||"loading"!==d.readyState&&!d.documentElement.doScroll?a.setTimeout(r.ready):(d.addEventListener("DOMContentLoaded",S),a.addEventListener("load",S));var T=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===r.type(c)){e=!0;for(h in c)T(a,b,h,c[h],!0,f,g)}else if(void 0!==d&&(e=!0,r.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(r(a),c)})),b))for(;h<i;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f},U=function(a){return 1===a.nodeType||9===a.nodeType||!+a.nodeType};function V(){this.expando=r.expando+V.uid++}V.uid=1,V.prototype={cache:function(a){var b=a[this.expando];return b||(b={},U(a)&&(a.nodeType?a[this.expando]=b:Object.defineProperty(a,this.expando,{value:b,configurable:!0}))),b},set:function(a,b,c){var d,e=this.cache(a);if("string"==typeof b)e[r.camelCase(b)]=c;else for(d in b)e[r.camelCase(d)]=b[d];return e},get:function(a,b){return void 0===b?this.cache(a):a[this.expando]&&a[this.expando][r.camelCase(b)]},access:function(a,b,c){return void 0===b||b&&"string"==typeof b&&void 0===c?this.get(a,b):(this.set(a,b,c),void 0!==c?c:b)},remove:function(a,b){var c,d=a[this.expando];if(void 0!==d){if(void 0!==b){Array.isArray(b)?b=b.map(r.camelCase):(b=r.camelCase(b),b=b in d?[b]:b.match(L)||[]),c=b.length;while(c--)delete d[b[c]]}(void 0===b||r.isEmptyObject(d))&&(a.nodeType?a[this.expando]=void 0:delete a[this.expando])}},hasData:function(a){var b=a[this.expando];return void 0!==b&&!r.isEmptyObject(b)}};var W=new V,X=new V,Y=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Z=/[A-Z]/g;function $(a){return"true"===a||"false"!==a&&("null"===a?null:a===+a+""?+a:Y.test(a)?JSON.parse(a):a)}function _(a,b,c){var d;if(void 0===c&&1===a.nodeType)if(d="data-"+b.replace(Z,"-$&").toLowerCase(),c=a.getAttribute(d),"string"==typeof c){try{c=$(c)}catch(e){}X.set(a,b,c)}else c=void 0;return c}r.extend({hasData:function(a){return X.hasData(a)||W.hasData(a)},data:function(a,b,c){return X.access(a,b,c)},removeData:function(a,b){X.remove(a,b)},_data:function(a,b,c){return W.access(a,b,c)},_removeData:function(a,b){W.remove(a,b)}}),r.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=X.get(f),1===f.nodeType&&!W.get(f,"hasDataAttrs"))){c=g.length;while(c--)g[c]&&(d=g[c].name,0===d.indexOf("data-")&&(d=r.camelCase(d.slice(5)),_(f,d,e[d])));W.set(f,"hasDataAttrs",!0)}return e}return"object"==typeof a?this.each(function(){X.set(this,a)}):T(this,function(b){var c;if(f&&void 0===b){if(c=X.get(f,a),void 0!==c)return c;if(c=_(f,a),void 0!==c)return c}else this.each(function(){X.set(this,a,b)})},null,b,arguments.length>1,null,!0)},removeData:function(a){return this.each(function(){X.remove(this,a)})}}),r.extend({queue:function(a,b,c){var d;if(a)return b=(b||"fx")+"queue",d=W.get(a,b),c&&(!d||Array.isArray(c)?d=W.access(a,b,r.makeArray(c)):d.push(c)),d||[]},dequeue:function(a,b){b=b||"fx";var c=r.queue(a,b),d=c.length,e=c.shift(),f=r._queueHooks(a,b),g=function(){r.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return W.get(a,c)||W.access(a,c,{empty:r.Callbacks("once memory").add(function(){W.remove(a,[b+"queue",c])})})}}),r.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?r.queue(this[0],a):void 0===b?this:this.each(function(){var c=r.queue(this,a,b);r._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&r.dequeue(this,a)})},dequeue:function(a){return this.each(function(){r.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=r.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};"string"!=typeof a&&(b=a,a=void 0),a=a||"fx";while(g--)c=W.get(f[g],a+"queueHooks"),c&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}});var aa=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ba=new RegExp("^(?:([+-])=|)("+aa+")([a-z%]*)$","i"),ca=["Top","Right","Bottom","Left"],da=function(a,b){return a=b||a,"none"===a.style.display||""===a.style.display&&r.contains(a.ownerDocument,a)&&"none"===r.css(a,"display")},ea=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e};function fa(a,b,c,d){var e,f=1,g=20,h=d?function(){return d.cur()}:function(){return r.css(a,b,"")},i=h(),j=c&&c[3]||(r.cssNumber[b]?"":"px"),k=(r.cssNumber[b]||"px"!==j&&+i)&&ba.exec(r.css(a,b));if(k&&k[3]!==j){j=j||k[3],c=c||[],k=+i||1;do f=f||".5",k/=f,r.style(a,b,k+j);while(f!==(f=h()/i)&&1!==f&&--g)}return c&&(k=+k||+i||0,e=c[1]?k+(c[1]+1)*c[2]:+c[2],d&&(d.unit=j,d.start=k,d.end=e)),e}var ga={};function ha(a){var b,c=a.ownerDocument,d=a.nodeName,e=ga[d];return e?e:(b=c.body.appendChild(c.createElement(d)),e=r.css(b,"display"),b.parentNode.removeChild(b),"none"===e&&(e="block"),ga[d]=e,e)}function ia(a,b){for(var c,d,e=[],f=0,g=a.length;f<g;f++)d=a[f],d.style&&(c=d.style.display,b?("none"===c&&(e[f]=W.get(d,"display")||null,e[f]||(d.style.display="")),""===d.style.display&&da(d)&&(e[f]=ha(d))):"none"!==c&&(e[f]="none",W.set(d,"display",c)));for(f=0;f<g;f++)null!=e[f]&&(a[f].style.display=e[f]);return a}r.fn.extend({show:function(){return ia(this,!0)},hide:function(){return ia(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){da(this)?r(this).show():r(this).hide()})}});var ja=/^(?:checkbox|radio)$/i,ka=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,la=/^$|\/(?:java|ecma)script/i,ma={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ma.optgroup=ma.option,ma.tbody=ma.tfoot=ma.colgroup=ma.caption=ma.thead,ma.th=ma.td;function na(a,b){var c;return c="undefined"!=typeof a.getElementsByTagName?a.getElementsByTagName(b||"*"):"undefined"!=typeof a.querySelectorAll?a.querySelectorAll(b||"*"):[],void 0===b||b&&B(a,b)?r.merge([a],c):c}function oa(a,b){for(var c=0,d=a.length;c<d;c++)W.set(a[c],"globalEval",!b||W.get(b[c],"globalEval"))}var pa=/<|&#?\w+;/;function qa(a,b,c,d,e){for(var f,g,h,i,j,k,l=b.createDocumentFragment(),m=[],n=0,o=a.length;n<o;n++)if(f=a[n],f||0===f)if("object"===r.type(f))r.merge(m,f.nodeType?[f]:f);else if(pa.test(f)){g=g||l.appendChild(b.createElement("div")),h=(ka.exec(f)||["",""])[1].toLowerCase(),i=ma[h]||ma._default,g.innerHTML=i[1]+r.htmlPrefilter(f)+i[2],k=i[0];while(k--)g=g.lastChild;r.merge(m,g.childNodes),g=l.firstChild,g.textContent=""}else m.push(b.createTextNode(f));l.textContent="",n=0;while(f=m[n++])if(d&&r.inArray(f,d)>-1)e&&e.push(f);else if(j=r.contains(f.ownerDocument,f),g=na(l.appendChild(f),"script"),j&&oa(g),c){k=0;while(f=g[k++])la.test(f.type||"")&&c.push(f)}return l}!function(){var a=d.createDocumentFragment(),b=a.appendChild(d.createElement("div")),c=d.createElement("input");c.setAttribute("type","radio"),c.setAttribute("checked","checked"),c.setAttribute("name","t"),b.appendChild(c),o.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,b.innerHTML="<textarea>x</textarea>",o.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue}();var ra=d.documentElement,sa=/^key/,ta=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,ua=/^([^.]*)(?:\.(.+)|)/;function va(){return!0}function wa(){return!1}function xa(){try{return d.activeElement}catch(a){}}function ya(a,b,c,d,e,f){var g,h;if("object"==typeof b){"string"!=typeof c&&(d=d||c,c=void 0);for(h in b)ya(a,h,c,d,b[h],f);return a}if(null==d&&null==e?(e=c,d=c=void 0):null==e&&("string"==typeof c?(e=d,d=void 0):(e=d,d=c,c=void 0)),e===!1)e=wa;else if(!e)return a;return 1===f&&(g=e,e=function(a){return r().off(a),g.apply(this,arguments)},e.guid=g.guid||(g.guid=r.guid++)),a.each(function(){r.event.add(this,b,e,d,c)})}r.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=W.get(a);if(q){c.handler&&(f=c,c=f.handler,e=f.selector),e&&r.find.matchesSelector(ra,e),c.guid||(c.guid=r.guid++),(i=q.events)||(i=q.events={}),(g=q.handle)||(g=q.handle=function(b){return"undefined"!=typeof r&&r.event.triggered!==b.type?r.event.dispatch.apply(a,arguments):void 0}),b=(b||"").match(L)||[""],j=b.length;while(j--)h=ua.exec(b[j])||[],n=p=h[1],o=(h[2]||"").split(".").sort(),n&&(l=r.event.special[n]||{},n=(e?l.delegateType:l.bindType)||n,l=r.event.special[n]||{},k=r.extend({type:n,origType:p,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&r.expr.match.needsContext.test(e),namespace:o.join(".")},f),(m=i[n])||(m=i[n]=[],m.delegateCount=0,l.setup&&l.setup.call(a,d,o,g)!==!1||a.addEventListener&&a.addEventListener(n,g)),l.add&&(l.add.call(a,k),k.handler.guid||(k.handler.guid=c.guid)),e?m.splice(m.delegateCount++,0,k):m.push(k),r.event.global[n]=!0)}},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=W.hasData(a)&&W.get(a);if(q&&(i=q.events)){b=(b||"").match(L)||[""],j=b.length;while(j--)if(h=ua.exec(b[j])||[],n=p=h[1],o=(h[2]||"").split(".").sort(),n){l=r.event.special[n]||{},n=(d?l.delegateType:l.bindType)||n,m=i[n]||[],h=h[2]&&new RegExp("(^|\\.)"+o.join("\\.(?:.*\\.|)")+"(\\.|$)"),g=f=m.length;while(f--)k=m[f],!e&&p!==k.origType||c&&c.guid!==k.guid||h&&!h.test(k.namespace)||d&&d!==k.selector&&("**"!==d||!k.selector)||(m.splice(f,1),k.selector&&m.delegateCount--,l.remove&&l.remove.call(a,k));g&&!m.length&&(l.teardown&&l.teardown.call(a,o,q.handle)!==!1||r.removeEvent(a,n,q.handle),delete i[n])}else for(n in i)r.event.remove(a,n+b[j],c,d,!0);r.isEmptyObject(i)&&W.remove(a,"handle events")}},dispatch:function(a){var b=r.event.fix(a),c,d,e,f,g,h,i=new Array(arguments.length),j=(W.get(this,"events")||{})[b.type]||[],k=r.event.special[b.type]||{};for(i[0]=b,c=1;c<arguments.length;c++)i[c]=arguments[c];if(b.delegateTarget=this,!k.preDispatch||k.preDispatch.call(this,b)!==!1){h=r.event.handlers.call(this,b,j),c=0;while((f=h[c++])&&!b.isPropagationStopped()){b.currentTarget=f.elem,d=0;while((g=f.handlers[d++])&&!b.isImmediatePropagationStopped())b.rnamespace&&!b.rnamespace.test(g.namespace)||(b.handleObj=g,b.data=g.data,e=((r.event.special[g.origType]||{}).handle||g.handler).apply(f.elem,i),void 0!==e&&(b.result=e)===!1&&(b.preventDefault(),b.stopPropagation()))}return k.postDispatch&&k.postDispatch.call(this,b),b.result}},handlers:function(a,b){var c,d,e,f,g,h=[],i=b.delegateCount,j=a.target;if(i&&j.nodeType&&!("click"===a.type&&a.button>=1))for(;j!==this;j=j.parentNode||this)if(1===j.nodeType&&("click"!==a.type||j.disabled!==!0)){for(f=[],g={},c=0;c<i;c++)d=b[c],e=d.selector+" ",void 0===g[e]&&(g[e]=d.needsContext?r(e,this).index(j)>-1:r.find(e,this,null,[j]).length),g[e]&&f.push(d);f.length&&h.push({elem:j,handlers:f})}return j=this,i<b.length&&h.push({elem:j,handlers:b.slice(i)}),h},addProp:function(a,b){Object.defineProperty(r.Event.prototype,a,{enumerable:!0,configurable:!0,get:r.isFunction(b)?function(){if(this.originalEvent)return b(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[a]},set:function(b){Object.defineProperty(this,a,{enumerable:!0,configurable:!0,writable:!0,value:b})}})},fix:function(a){return a[r.expando]?a:new r.Event(a)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==xa()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===xa()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&B(this,"input"))return this.click(),!1},_default:function(a){return B(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}}},r.removeEvent=function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c)},r.Event=function(a,b){return this instanceof r.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&a.returnValue===!1?va:wa,this.target=a.target&&3===a.target.nodeType?a.target.parentNode:a.target,this.currentTarget=a.currentTarget,this.relatedTarget=a.relatedTarget):this.type=a,b&&r.extend(this,b),this.timeStamp=a&&a.timeStamp||r.now(),void(this[r.expando]=!0)):new r.Event(a,b)},r.Event.prototype={constructor:r.Event,isDefaultPrevented:wa,isPropagationStopped:wa,isImmediatePropagationStopped:wa,isSimulated:!1,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=va,a&&!this.isSimulated&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=va,a&&!this.isSimulated&&a.stopPropagation()},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=va,a&&!this.isSimulated&&a.stopImmediatePropagation(),this.stopPropagation()}},r.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,"char":!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(a){var b=a.button;return null==a.which&&sa.test(a.type)?null!=a.charCode?a.charCode:a.keyCode:!a.which&&void 0!==b&&ta.test(a.type)?1&b?1:2&b?3:4&b?2:0:a.which}},r.event.addProp),r.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){r.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return e&&(e===d||r.contains(d,e))||(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),r.fn.extend({on:function(a,b,c,d){return ya(this,a,b,c,d)},one:function(a,b,c,d){return ya(this,a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,r(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return b!==!1&&"function"!=typeof b||(c=b,b=void 0),c===!1&&(c=wa),this.each(function(){r.event.remove(this,a,c,b)})}});var za=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,Aa=/<script|<style|<link/i,Ba=/checked\s*(?:[^=]|=\s*.checked.)/i,Ca=/^true\/(.*)/,Da=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Ea(a,b){return B(a,"table")&&B(11!==b.nodeType?b:b.firstChild,"tr")?r(">tbody",a)[0]||a:a}function Fa(a){return a.type=(null!==a.getAttribute("type"))+"/"+a.type,a}function Ga(a){var b=Ca.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function Ha(a,b){var c,d,e,f,g,h,i,j;if(1===b.nodeType){if(W.hasData(a)&&(f=W.access(a),g=W.set(b,f),j=f.events)){delete g.handle,g.events={};for(e in j)for(c=0,d=j[e].length;c<d;c++)r.event.add(b,e,j[e][c])}X.hasData(a)&&(h=X.access(a),i=r.extend({},h),X.set(b,i))}}function Ia(a,b){var c=b.nodeName.toLowerCase();"input"===c&&ja.test(a.type)?b.checked=a.checked:"input"!==c&&"textarea"!==c||(b.defaultValue=a.defaultValue)}function Ja(a,b,c,d){b=g.apply([],b);var e,f,h,i,j,k,l=0,m=a.length,n=m-1,q=b[0],s=r.isFunction(q);if(s||m>1&&"string"==typeof q&&!o.checkClone&&Ba.test(q))return a.each(function(e){var f=a.eq(e);s&&(b[0]=q.call(this,e,f.html())),Ja(f,b,c,d)});if(m&&(e=qa(b,a[0].ownerDocument,!1,a,d),f=e.firstChild,1===e.childNodes.length&&(e=f),f||d)){for(h=r.map(na(e,"script"),Fa),i=h.length;l<m;l++)j=e,l!==n&&(j=r.clone(j,!0,!0),i&&r.merge(h,na(j,"script"))),c.call(a[l],j,l);if(i)for(k=h[h.length-1].ownerDocument,r.map(h,Ga),l=0;l<i;l++)j=h[l],la.test(j.type||"")&&!W.access(j,"globalEval")&&r.contains(k,j)&&(j.src?r._evalUrl&&r._evalUrl(j.src):p(j.textContent.replace(Da,""),k))}return a}function Ka(a,b,c){for(var d,e=b?r.filter(b,a):a,f=0;null!=(d=e[f]);f++)c||1!==d.nodeType||r.cleanData(na(d)),d.parentNode&&(c&&r.contains(d.ownerDocument,d)&&oa(na(d,"script")),d.parentNode.removeChild(d));return a}r.extend({htmlPrefilter:function(a){return a.replace(za,"<$1></$2>")},clone:function(a,b,c){var d,e,f,g,h=a.cloneNode(!0),i=r.contains(a.ownerDocument,a);if(!(o.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||r.isXMLDoc(a)))for(g=na(h),f=na(a),d=0,e=f.length;d<e;d++)Ia(f[d],g[d]);if(b)if(c)for(f=f||na(a),g=g||na(h),d=0,e=f.length;d<e;d++)Ha(f[d],g[d]);else Ha(a,h);return g=na(h,"script"),g.length>0&&oa(g,!i&&na(a,"script")),h},cleanData:function(a){for(var b,c,d,e=r.event.special,f=0;void 0!==(c=a[f]);f++)if(U(c)){if(b=c[W.expando]){if(b.events)for(d in b.events)e[d]?r.event.remove(c,d):r.removeEvent(c,d,b.handle);c[W.expando]=void 0}c[X.expando]&&(c[X.expando]=void 0)}}}),r.fn.extend({detach:function(a){return Ka(this,a,!0)},remove:function(a){return Ka(this,a)},text:function(a){return T(this,function(a){return void 0===a?r.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=a)})},null,a,arguments.length)},append:function(){return Ja(this,arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=Ea(this,a);b.appendChild(a)}})},prepend:function(){return Ja(this,arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=Ea(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return Ja(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return Ja(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},empty:function(){for(var a,b=0;null!=(a=this[b]);b++)1===a.nodeType&&(r.cleanData(na(a,!1)),a.textContent="");return this},clone:function(a,b){return a=null!=a&&a,b=null==b?a:b,this.map(function(){return r.clone(this,a,b)})},html:function(a){return T(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a&&1===b.nodeType)return b.innerHTML;if("string"==typeof a&&!Aa.test(a)&&!ma[(ka.exec(a)||["",""])[1].toLowerCase()]){a=r.htmlPrefilter(a);try{for(;c<d;c++)b=this[c]||{},1===b.nodeType&&(r.cleanData(na(b,!1)),b.innerHTML=a);b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=[];return Ja(this,arguments,function(b){var c=this.parentNode;r.inArray(this,a)<0&&(r.cleanData(na(this)),c&&c.replaceChild(b,this))},a)}}),r.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){r.fn[a]=function(a){for(var c,d=[],e=r(a),f=e.length-1,g=0;g<=f;g++)c=g===f?this:this.clone(!0),r(e[g])[b](c),h.apply(d,c.get());return this.pushStack(d)}});var La=/^margin/,Ma=new RegExp("^("+aa+")(?!px)[a-z%]+$","i"),Na=function(b){var c=b.ownerDocument.defaultView;return c&&c.opener||(c=a),c.getComputedStyle(b)};!function(){function b(){if(i){i.style.cssText="box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",i.innerHTML="",ra.appendChild(h);var b=a.getComputedStyle(i);c="1%"!==b.top,g="2px"===b.marginLeft,e="4px"===b.width,i.style.marginRight="50%",f="4px"===b.marginRight,ra.removeChild(h),i=null}}var c,e,f,g,h=d.createElement("div"),i=d.createElement("div");i.style&&(i.style.backgroundClip="content-box",i.cloneNode(!0).style.backgroundClip="",o.clearCloneStyle="content-box"===i.style.backgroundClip,h.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",h.appendChild(i),r.extend(o,{pixelPosition:function(){return b(),c},boxSizingReliable:function(){return b(),e},pixelMarginRight:function(){return b(),f},reliableMarginLeft:function(){return b(),g}}))}();function Oa(a,b,c){var d,e,f,g,h=a.style;return c=c||Na(a),c&&(g=c.getPropertyValue(b)||c[b],""!==g||r.contains(a.ownerDocument,a)||(g=r.style(a,b)),!o.pixelMarginRight()&&Ma.test(g)&&La.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f)),void 0!==g?g+"":g}function Pa(a,b){return{get:function(){return a()?void delete this.get:(this.get=b).apply(this,arguments)}}}var Qa=/^(none|table(?!-c[ea]).+)/,Ra=/^--/,Sa={position:"absolute",visibility:"hidden",display:"block"},Ta={letterSpacing:"0",fontWeight:"400"},Ua=["Webkit","Moz","ms"],Va=d.createElement("div").style;function Wa(a){if(a in Va)return a;var b=a[0].toUpperCase()+a.slice(1),c=Ua.length;while(c--)if(a=Ua[c]+b,a in Va)return a}function Xa(a){var b=r.cssProps[a];return b||(b=r.cssProps[a]=Wa(a)||a),b}function Ya(a,b,c){var d=ba.exec(b);return d?Math.max(0,d[2]-(c||0))+(d[3]||"px"):b}function Za(a,b,c,d,e){var f,g=0;for(f=c===(d?"border":"content")?4:"width"===b?1:0;f<4;f+=2)"margin"===c&&(g+=r.css(a,c+ca[f],!0,e)),d?("content"===c&&(g-=r.css(a,"padding"+ca[f],!0,e)),"margin"!==c&&(g-=r.css(a,"border"+ca[f]+"Width",!0,e))):(g+=r.css(a,"padding"+ca[f],!0,e),"padding"!==c&&(g+=r.css(a,"border"+ca[f]+"Width",!0,e)));return g}function $a(a,b,c){var d,e=Na(a),f=Oa(a,b,e),g="border-box"===r.css(a,"boxSizing",!1,e);return Ma.test(f)?f:(d=g&&(o.boxSizingReliable()||f===a.style[b]),"auto"===f&&(f=a["offset"+b[0].toUpperCase()+b.slice(1)]),f=parseFloat(f)||0,f+Za(a,b,c||(g?"border":"content"),d,e)+"px")}r.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=Oa(a,"opacity");return""===c?"1":c}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=r.camelCase(b),i=Ra.test(b),j=a.style;return i||(b=Xa(h)),g=r.cssHooks[b]||r.cssHooks[h],void 0===c?g&&"get"in g&&void 0!==(e=g.get(a,!1,d))?e:j[b]:(f=typeof c,"string"===f&&(e=ba.exec(c))&&e[1]&&(c=fa(a,b,e),f="number"),null!=c&&c===c&&("number"===f&&(c+=e&&e[3]||(r.cssNumber[h]?"":"px")),o.clearCloneStyle||""!==c||0!==b.indexOf("background")||(j[b]="inherit"),g&&"set"in g&&void 0===(c=g.set(a,c,d))||(i?j.setProperty(b,c):j[b]=c)),void 0)}},css:function(a,b,c,d){var e,f,g,h=r.camelCase(b),i=Ra.test(b);return i||(b=Xa(h)),g=r.cssHooks[b]||r.cssHooks[h],g&&"get"in g&&(e=g.get(a,!0,c)),void 0===e&&(e=Oa(a,b,d)),"normal"===e&&b in Ta&&(e=Ta[b]),""===c||c?(f=parseFloat(e),c===!0||isFinite(f)?f||0:e):e}}),r.each(["height","width"],function(a,b){r.cssHooks[b]={get:function(a,c,d){if(c)return!Qa.test(r.css(a,"display"))||a.getClientRects().length&&a.getBoundingClientRect().width?$a(a,b,d):ea(a,Sa,function(){return $a(a,b,d)})},set:function(a,c,d){var e,f=d&&Na(a),g=d&&Za(a,b,d,"border-box"===r.css(a,"boxSizing",!1,f),f);return g&&(e=ba.exec(c))&&"px"!==(e[3]||"px")&&(a.style[b]=c,c=r.css(a,b)),Ya(a,c,g)}}}),r.cssHooks.marginLeft=Pa(o.reliableMarginLeft,function(a,b){if(b)return(parseFloat(Oa(a,"marginLeft"))||a.getBoundingClientRect().left-ea(a,{marginLeft:0},function(){return a.getBoundingClientRect().left}))+"px"}),r.each({margin:"",padding:"",border:"Width"},function(a,b){r.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];d<4;d++)e[a+ca[d]+b]=f[d]||f[d-2]||f[0];return e}},La.test(a)||(r.cssHooks[a+b].set=Ya)}),r.fn.extend({css:function(a,b){return T(this,function(a,b,c){var d,e,f={},g=0;if(Array.isArray(b)){for(d=Na(a),e=b.length;g<e;g++)f[b[g]]=r.css(a,b[g],!1,d);return f}return void 0!==c?r.style(a,b,c):r.css(a,b)},a,b,arguments.length>1)}});function _a(a,b,c,d,e){return new _a.prototype.init(a,b,c,d,e)}r.Tween=_a,_a.prototype={constructor:_a,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||r.easing._default,this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(r.cssNumber[c]?"":"px")},cur:function(){var a=_a.propHooks[this.prop];return a&&a.get?a.get(this):_a.propHooks._default.get(this)},run:function(a){var b,c=_a.propHooks[this.prop];return this.options.duration?this.pos=b=r.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=b=a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):_a.propHooks._default.set(this),this}},_a.prototype.init.prototype=_a.prototype,_a.propHooks={_default:{get:function(a){var b;return 1!==a.elem.nodeType||null!=a.elem[a.prop]&&null==a.elem.style[a.prop]?a.elem[a.prop]:(b=r.css(a.elem,a.prop,""),b&&"auto"!==b?b:0)},set:function(a){r.fx.step[a.prop]?r.fx.step[a.prop](a):1!==a.elem.nodeType||null==a.elem.style[r.cssProps[a.prop]]&&!r.cssHooks[a.prop]?a.elem[a.prop]=a.now:r.style(a.elem,a.prop,a.now+a.unit)}}},_a.propHooks.scrollTop=_a.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},r.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2},_default:"swing"},r.fx=_a.prototype.init,r.fx.step={};var ab,bb,cb=/^(?:toggle|show|hide)$/,db=/queueHooks$/;function eb(){bb&&(d.hidden===!1&&a.requestAnimationFrame?a.requestAnimationFrame(eb):a.setTimeout(eb,r.fx.interval),r.fx.tick())}function fb(){return a.setTimeout(function(){ab=void 0}),ab=r.now()}function gb(a,b){var c,d=0,e={height:a};for(b=b?1:0;d<4;d+=2-b)c=ca[d],e["margin"+c]=e["padding"+c]=a;return b&&(e.opacity=e.width=a),e}function hb(a,b,c){for(var d,e=(kb.tweeners[b]||[]).concat(kb.tweeners["*"]),f=0,g=e.length;f<g;f++)if(d=e[f].call(c,b,a))return d}function ib(a,b,c){var d,e,f,g,h,i,j,k,l="width"in b||"height"in b,m=this,n={},o=a.style,p=a.nodeType&&da(a),q=W.get(a,"fxshow");c.queue||(g=r._queueHooks(a,"fx"),null==g.unqueued&&(g.unqueued=0,h=g.empty.fire,g.empty.fire=function(){g.unqueued||h()}),g.unqueued++,m.always(function(){m.always(function(){g.unqueued--,r.queue(a,"fx").length||g.empty.fire()})}));for(d in b)if(e=b[d],cb.test(e)){if(delete b[d],f=f||"toggle"===e,e===(p?"hide":"show")){if("show"!==e||!q||void 0===q[d])continue;p=!0}n[d]=q&&q[d]||r.style(a,d)}if(i=!r.isEmptyObject(b),i||!r.isEmptyObject(n)){l&&1===a.nodeType&&(c.overflow=[o.overflow,o.overflowX,o.overflowY],j=q&&q.display,null==j&&(j=W.get(a,"display")),k=r.css(a,"display"),"none"===k&&(j?k=j:(ia([a],!0),j=a.style.display||j,k=r.css(a,"display"),ia([a]))),("inline"===k||"inline-block"===k&&null!=j)&&"none"===r.css(a,"float")&&(i||(m.done(function(){o.display=j}),null==j&&(k=o.display,j="none"===k?"":k)),o.display="inline-block")),c.overflow&&(o.overflow="hidden",m.always(function(){o.overflow=c.overflow[0],o.overflowX=c.overflow[1],o.overflowY=c.overflow[2]})),i=!1;for(d in n)i||(q?"hidden"in q&&(p=q.hidden):q=W.access(a,"fxshow",{display:j}),f&&(q.hidden=!p),p&&ia([a],!0),m.done(function(){p||ia([a]),W.remove(a,"fxshow");for(d in n)r.style(a,d,n[d])})),i=hb(p?q[d]:0,d,m),d in q||(q[d]=i.start,p&&(i.end=i.start,i.start=0))}}function jb(a,b){var c,d,e,f,g;for(c in a)if(d=r.camelCase(c),e=b[d],f=a[c],Array.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=r.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function kb(a,b,c){var d,e,f=0,g=kb.prefilters.length,h=r.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=ab||fb(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;g<i;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),f<1&&i?c:(i||h.notifyWith(a,[j,1,0]),h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:r.extend({},b),opts:r.extend(!0,{specialEasing:{},easing:r.easing._default},c),originalProperties:b,originalOptions:c,startTime:ab||fb(),duration:c.duration,tweens:[],createTween:function(b,c){var d=r.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;c<d;c++)j.tweens[c].run(1);return b?(h.notifyWith(a,[j,1,0]),h.resolveWith(a,[j,b])):h.rejectWith(a,[j,b]),this}}),k=j.props;for(jb(k,j.opts.specialEasing);f<g;f++)if(d=kb.prefilters[f].call(j,a,k,j.opts))return r.isFunction(d.stop)&&(r._queueHooks(j.elem,j.opts.queue).stop=r.proxy(d.stop,d)),d;return r.map(k,hb,j),r.isFunction(j.opts.start)&&j.opts.start.call(a,j),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always),r.fx.timer(r.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j}r.Animation=r.extend(kb,{tweeners:{"*":[function(a,b){var c=this.createTween(a,b);return fa(c.elem,a,ba.exec(b),c),c}]},tweener:function(a,b){r.isFunction(a)?(b=a,a=["*"]):a=a.match(L);for(var c,d=0,e=a.length;d<e;d++)c=a[d],kb.tweeners[c]=kb.tweeners[c]||[],kb.tweeners[c].unshift(b)},prefilters:[ib],prefilter:function(a,b){b?kb.prefilters.unshift(a):kb.prefilters.push(a)}}),r.speed=function(a,b,c){var d=a&&"object"==typeof a?r.extend({},a):{complete:c||!c&&b||r.isFunction(a)&&a,duration:a,easing:c&&b||b&&!r.isFunction(b)&&b};return r.fx.off?d.duration=0:"number"!=typeof d.duration&&(d.duration in r.fx.speeds?d.duration=r.fx.speeds[d.duration]:d.duration=r.fx.speeds._default),null!=d.queue&&d.queue!==!0||(d.queue="fx"),d.old=d.complete,d.complete=function(){r.isFunction(d.old)&&d.old.call(this),d.queue&&r.dequeue(this,d.queue)},d},r.fn.extend({fadeTo:function(a,b,c,d){return this.filter(da).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=r.isEmptyObject(a),f=r.speed(b,c,d),g=function(){var b=kb(this,r.extend({},a),f);(e||W.get(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=r.timers,g=W.get(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&db.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));!b&&c||r.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=W.get(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=r.timers,g=d?d.length:0;for(c.finish=!0,r.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;b<g;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),r.each(["toggle","show","hide"],function(a,b){var c=r.fn[b];r.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(gb(b,!0),a,d,e)}}),r.each({slideDown:gb("show"),slideUp:gb("hide"),slideToggle:gb("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){r.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),r.timers=[],r.fx.tick=function(){var a,b=0,c=r.timers;for(ab=r.now();b<c.length;b++)a=c[b],a()||c[b]!==a||c.splice(b--,1);c.length||r.fx.stop(),ab=void 0},r.fx.timer=function(a){r.timers.push(a),r.fx.start()},r.fx.interval=13,r.fx.start=function(){bb||(bb=!0,eb())},r.fx.stop=function(){bb=null},r.fx.speeds={slow:600,fast:200,_default:400},r.fn.delay=function(b,c){return b=r.fx?r.fx.speeds[b]||b:b,c=c||"fx",this.queue(c,function(c,d){var e=a.setTimeout(c,b);d.stop=function(){a.clearTimeout(e)}})},function(){var a=d.createElement("input"),b=d.createElement("select"),c=b.appendChild(d.createElement("option"));a.type="checkbox",o.checkOn=""!==a.value,o.optSelected=c.selected,a=d.createElement("input"),a.value="t",a.type="radio",o.radioValue="t"===a.value}();var lb,mb=r.expr.attrHandle;r.fn.extend({attr:function(a,b){return T(this,r.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){r.removeAttr(this,a)})}}),r.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(3!==f&&8!==f&&2!==f)return"undefined"==typeof a.getAttribute?r.prop(a,b,c):(1===f&&r.isXMLDoc(a)||(e=r.attrHooks[b.toLowerCase()]||(r.expr.match.bool.test(b)?lb:void 0)),void 0!==c?null===c?void r.removeAttr(a,b):e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:(a.setAttribute(b,c+""),c):e&&"get"in e&&null!==(d=e.get(a,b))?d:(d=r.find.attr(a,b),
null==d?void 0:d))},attrHooks:{type:{set:function(a,b){if(!o.radioValue&&"radio"===b&&B(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}},removeAttr:function(a,b){var c,d=0,e=b&&b.match(L);if(e&&1===a.nodeType)while(c=e[d++])a.removeAttribute(c)}}),lb={set:function(a,b,c){return b===!1?r.removeAttr(a,c):a.setAttribute(c,c),c}},r.each(r.expr.match.bool.source.match(/\w+/g),function(a,b){var c=mb[b]||r.find.attr;mb[b]=function(a,b,d){var e,f,g=b.toLowerCase();return d||(f=mb[g],mb[g]=e,e=null!=c(a,b,d)?g:null,mb[g]=f),e}});var nb=/^(?:input|select|textarea|button)$/i,ob=/^(?:a|area)$/i;r.fn.extend({prop:function(a,b){return T(this,r.prop,a,b,arguments.length>1)},removeProp:function(a){return this.each(function(){delete this[r.propFix[a]||a]})}}),r.extend({prop:function(a,b,c){var d,e,f=a.nodeType;if(3!==f&&8!==f&&2!==f)return 1===f&&r.isXMLDoc(a)||(b=r.propFix[b]||b,e=r.propHooks[b]),void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]},propHooks:{tabIndex:{get:function(a){var b=r.find.attr(a,"tabindex");return b?parseInt(b,10):nb.test(a.nodeName)||ob.test(a.nodeName)&&a.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),o.optSelected||(r.propHooks.selected={get:function(a){var b=a.parentNode;return b&&b.parentNode&&b.parentNode.selectedIndex,null},set:function(a){var b=a.parentNode;b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex)}}),r.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){r.propFix[this.toLowerCase()]=this});function pb(a){var b=a.match(L)||[];return b.join(" ")}function qb(a){return a.getAttribute&&a.getAttribute("class")||""}r.fn.extend({addClass:function(a){var b,c,d,e,f,g,h,i=0;if(r.isFunction(a))return this.each(function(b){r(this).addClass(a.call(this,b,qb(this)))});if("string"==typeof a&&a){b=a.match(L)||[];while(c=this[i++])if(e=qb(c),d=1===c.nodeType&&" "+pb(e)+" "){g=0;while(f=b[g++])d.indexOf(" "+f+" ")<0&&(d+=f+" ");h=pb(d),e!==h&&c.setAttribute("class",h)}}return this},removeClass:function(a){var b,c,d,e,f,g,h,i=0;if(r.isFunction(a))return this.each(function(b){r(this).removeClass(a.call(this,b,qb(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof a&&a){b=a.match(L)||[];while(c=this[i++])if(e=qb(c),d=1===c.nodeType&&" "+pb(e)+" "){g=0;while(f=b[g++])while(d.indexOf(" "+f+" ")>-1)d=d.replace(" "+f+" "," ");h=pb(d),e!==h&&c.setAttribute("class",h)}}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):r.isFunction(a)?this.each(function(c){r(this).toggleClass(a.call(this,c,qb(this),b),b)}):this.each(function(){var b,d,e,f;if("string"===c){d=0,e=r(this),f=a.match(L)||[];while(b=f[d++])e.hasClass(b)?e.removeClass(b):e.addClass(b)}else void 0!==a&&"boolean"!==c||(b=qb(this),b&&W.set(this,"__className__",b),this.setAttribute&&this.setAttribute("class",b||a===!1?"":W.get(this,"__className__")||""))})},hasClass:function(a){var b,c,d=0;b=" "+a+" ";while(c=this[d++])if(1===c.nodeType&&(" "+pb(qb(c))+" ").indexOf(b)>-1)return!0;return!1}});var rb=/\r/g;r.fn.extend({val:function(a){var b,c,d,e=this[0];{if(arguments.length)return d=r.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,r(this).val()):a,null==e?e="":"number"==typeof e?e+="":Array.isArray(e)&&(e=r.map(e,function(a){return null==a?"":a+""})),b=r.valHooks[this.type]||r.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))});if(e)return b=r.valHooks[e.type]||r.valHooks[e.nodeName.toLowerCase()],b&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(rb,""):null==c?"":c)}}}),r.extend({valHooks:{option:{get:function(a){var b=r.find.attr(a,"value");return null!=b?b:pb(r.text(a))}},select:{get:function(a){var b,c,d,e=a.options,f=a.selectedIndex,g="select-one"===a.type,h=g?null:[],i=g?f+1:e.length;for(d=f<0?i:g?f:0;d<i;d++)if(c=e[d],(c.selected||d===f)&&!c.disabled&&(!c.parentNode.disabled||!B(c.parentNode,"optgroup"))){if(b=r(c).val(),g)return b;h.push(b)}return h},set:function(a,b){var c,d,e=a.options,f=r.makeArray(b),g=e.length;while(g--)d=e[g],(d.selected=r.inArray(r.valHooks.option.get(d),f)>-1)&&(c=!0);return c||(a.selectedIndex=-1),f}}}}),r.each(["radio","checkbox"],function(){r.valHooks[this]={set:function(a,b){if(Array.isArray(b))return a.checked=r.inArray(r(a).val(),b)>-1}},o.checkOn||(r.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});var sb=/^(?:focusinfocus|focusoutblur)$/;r.extend(r.event,{trigger:function(b,c,e,f){var g,h,i,j,k,m,n,o=[e||d],p=l.call(b,"type")?b.type:b,q=l.call(b,"namespace")?b.namespace.split("."):[];if(h=i=e=e||d,3!==e.nodeType&&8!==e.nodeType&&!sb.test(p+r.event.triggered)&&(p.indexOf(".")>-1&&(q=p.split("."),p=q.shift(),q.sort()),k=p.indexOf(":")<0&&"on"+p,b=b[r.expando]?b:new r.Event(p,"object"==typeof b&&b),b.isTrigger=f?2:3,b.namespace=q.join("."),b.rnamespace=b.namespace?new RegExp("(^|\\.)"+q.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=e),c=null==c?[b]:r.makeArray(c,[b]),n=r.event.special[p]||{},f||!n.trigger||n.trigger.apply(e,c)!==!1)){if(!f&&!n.noBubble&&!r.isWindow(e)){for(j=n.delegateType||p,sb.test(j+p)||(h=h.parentNode);h;h=h.parentNode)o.push(h),i=h;i===(e.ownerDocument||d)&&o.push(i.defaultView||i.parentWindow||a)}g=0;while((h=o[g++])&&!b.isPropagationStopped())b.type=g>1?j:n.bindType||p,m=(W.get(h,"events")||{})[b.type]&&W.get(h,"handle"),m&&m.apply(h,c),m=k&&h[k],m&&m.apply&&U(h)&&(b.result=m.apply(h,c),b.result===!1&&b.preventDefault());return b.type=p,f||b.isDefaultPrevented()||n._default&&n._default.apply(o.pop(),c)!==!1||!U(e)||k&&r.isFunction(e[p])&&!r.isWindow(e)&&(i=e[k],i&&(e[k]=null),r.event.triggered=p,e[p](),r.event.triggered=void 0,i&&(e[k]=i)),b.result}},simulate:function(a,b,c){var d=r.extend(new r.Event,c,{type:a,isSimulated:!0});r.event.trigger(d,null,b)}}),r.fn.extend({trigger:function(a,b){return this.each(function(){r.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];if(c)return r.event.trigger(a,b,c,!0)}}),r.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(a,b){r.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),r.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}}),o.focusin="onfocusin"in a,o.focusin||r.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){r.event.simulate(b,a.target,r.event.fix(a))};r.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=W.access(d,b);e||d.addEventListener(a,c,!0),W.access(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=W.access(d,b)-1;e?W.access(d,b,e):(d.removeEventListener(a,c,!0),W.remove(d,b))}}});var tb=a.location,ub=r.now(),vb=/\?/;r.parseXML=function(b){var c;if(!b||"string"!=typeof b)return null;try{c=(new a.DOMParser).parseFromString(b,"text/xml")}catch(d){c=void 0}return c&&!c.getElementsByTagName("parsererror").length||r.error("Invalid XML: "+b),c};var wb=/\[\]$/,xb=/\r?\n/g,yb=/^(?:submit|button|image|reset|file)$/i,zb=/^(?:input|select|textarea|keygen)/i;function Ab(a,b,c,d){var e;if(Array.isArray(b))r.each(b,function(b,e){c||wb.test(a)?d(a,e):Ab(a+"["+("object"==typeof e&&null!=e?b:"")+"]",e,c,d)});else if(c||"object"!==r.type(b))d(a,b);else for(e in b)Ab(a+"["+e+"]",b[e],c,d)}r.param=function(a,b){var c,d=[],e=function(a,b){var c=r.isFunction(b)?b():b;d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(null==c?"":c)};if(Array.isArray(a)||a.jquery&&!r.isPlainObject(a))r.each(a,function(){e(this.name,this.value)});else for(c in a)Ab(c,a[c],b,e);return d.join("&")},r.fn.extend({serialize:function(){return r.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=r.prop(this,"elements");return a?r.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!r(this).is(":disabled")&&zb.test(this.nodeName)&&!yb.test(a)&&(this.checked||!ja.test(a))}).map(function(a,b){var c=r(this).val();return null==c?null:Array.isArray(c)?r.map(c,function(a){return{name:b.name,value:a.replace(xb,"\r\n")}}):{name:b.name,value:c.replace(xb,"\r\n")}}).get()}});var Bb=/%20/g,Cb=/#.*$/,Db=/([?&])_=[^&]*/,Eb=/^(.*?):[ \t]*([^\r\n]*)$/gm,Fb=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Gb=/^(?:GET|HEAD)$/,Hb=/^\/\//,Ib={},Jb={},Kb="*/".concat("*"),Lb=d.createElement("a");Lb.href=tb.href;function Mb(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(L)||[];if(r.isFunction(c))while(d=f[e++])"+"===d[0]?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function Nb(a,b,c,d){var e={},f=a===Jb;function g(h){var i;return e[h]=!0,r.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||f||e[j]?f?!(i=j):void 0:(b.dataTypes.unshift(j),g(j),!1)}),i}return g(b.dataTypes[0])||!e["*"]&&g("*")}function Ob(a,b){var c,d,e=r.ajaxSettings.flatOptions||{};for(c in b)void 0!==b[c]&&((e[c]?a:d||(d={}))[c]=b[c]);return d&&r.extend(!0,a,d),a}function Pb(a,b,c){var d,e,f,g,h=a.contents,i=a.dataTypes;while("*"===i[0])i.shift(),void 0===d&&(d=a.mimeType||b.getResponseHeader("Content-Type"));if(d)for(e in h)if(h[e]&&h[e].test(d)){i.unshift(e);break}if(i[0]in c)f=i[0];else{for(e in c){if(!i[0]||a.converters[e+" "+i[0]]){f=e;break}g||(g=e)}f=f||g}if(f)return f!==i[0]&&i.unshift(f),c[f]}function Qb(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];f=k.shift();while(f)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g)for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}if(g!==!0)if(g&&a["throws"])b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}r.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:tb.href,type:"GET",isLocal:Fb.test(tb.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Kb,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":r.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?Ob(Ob(a,r.ajaxSettings),b):Ob(r.ajaxSettings,a)},ajaxPrefilter:Mb(Ib),ajaxTransport:Mb(Jb),ajax:function(b,c){"object"==typeof b&&(c=b,b=void 0),c=c||{};var e,f,g,h,i,j,k,l,m,n,o=r.ajaxSetup({},c),p=o.context||o,q=o.context&&(p.nodeType||p.jquery)?r(p):r.event,s=r.Deferred(),t=r.Callbacks("once memory"),u=o.statusCode||{},v={},w={},x="canceled",y={readyState:0,getResponseHeader:function(a){var b;if(k){if(!h){h={};while(b=Eb.exec(g))h[b[1].toLowerCase()]=b[2]}b=h[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return k?g:null},setRequestHeader:function(a,b){return null==k&&(a=w[a.toLowerCase()]=w[a.toLowerCase()]||a,v[a]=b),this},overrideMimeType:function(a){return null==k&&(o.mimeType=a),this},statusCode:function(a){var b;if(a)if(k)y.always(a[y.status]);else for(b in a)u[b]=[u[b],a[b]];return this},abort:function(a){var b=a||x;return e&&e.abort(b),A(0,b),this}};if(s.promise(y),o.url=((b||o.url||tb.href)+"").replace(Hb,tb.protocol+"//"),o.type=c.method||c.type||o.method||o.type,o.dataTypes=(o.dataType||"*").toLowerCase().match(L)||[""],null==o.crossDomain){j=d.createElement("a");try{j.href=o.url,j.href=j.href,o.crossDomain=Lb.protocol+"//"+Lb.host!=j.protocol+"//"+j.host}catch(z){o.crossDomain=!0}}if(o.data&&o.processData&&"string"!=typeof o.data&&(o.data=r.param(o.data,o.traditional)),Nb(Ib,o,c,y),k)return y;l=r.event&&o.global,l&&0===r.active++&&r.event.trigger("ajaxStart"),o.type=o.type.toUpperCase(),o.hasContent=!Gb.test(o.type),f=o.url.replace(Cb,""),o.hasContent?o.data&&o.processData&&0===(o.contentType||"").indexOf("application/x-www-form-urlencoded")&&(o.data=o.data.replace(Bb,"+")):(n=o.url.slice(f.length),o.data&&(f+=(vb.test(f)?"&":"?")+o.data,delete o.data),o.cache===!1&&(f=f.replace(Db,"$1"),n=(vb.test(f)?"&":"?")+"_="+ub++ +n),o.url=f+n),o.ifModified&&(r.lastModified[f]&&y.setRequestHeader("If-Modified-Since",r.lastModified[f]),r.etag[f]&&y.setRequestHeader("If-None-Match",r.etag[f])),(o.data&&o.hasContent&&o.contentType!==!1||c.contentType)&&y.setRequestHeader("Content-Type",o.contentType),y.setRequestHeader("Accept",o.dataTypes[0]&&o.accepts[o.dataTypes[0]]?o.accepts[o.dataTypes[0]]+("*"!==o.dataTypes[0]?", "+Kb+"; q=0.01":""):o.accepts["*"]);for(m in o.headers)y.setRequestHeader(m,o.headers[m]);if(o.beforeSend&&(o.beforeSend.call(p,y,o)===!1||k))return y.abort();if(x="abort",t.add(o.complete),y.done(o.success),y.fail(o.error),e=Nb(Jb,o,c,y)){if(y.readyState=1,l&&q.trigger("ajaxSend",[y,o]),k)return y;o.async&&o.timeout>0&&(i=a.setTimeout(function(){y.abort("timeout")},o.timeout));try{k=!1,e.send(v,A)}catch(z){if(k)throw z;A(-1,z)}}else A(-1,"No Transport");function A(b,c,d,h){var j,m,n,v,w,x=c;k||(k=!0,i&&a.clearTimeout(i),e=void 0,g=h||"",y.readyState=b>0?4:0,j=b>=200&&b<300||304===b,d&&(v=Pb(o,y,d)),v=Qb(o,v,y,j),j?(o.ifModified&&(w=y.getResponseHeader("Last-Modified"),w&&(r.lastModified[f]=w),w=y.getResponseHeader("etag"),w&&(r.etag[f]=w)),204===b||"HEAD"===o.type?x="nocontent":304===b?x="notmodified":(x=v.state,m=v.data,n=v.error,j=!n)):(n=x,!b&&x||(x="error",b<0&&(b=0))),y.status=b,y.statusText=(c||x)+"",j?s.resolveWith(p,[m,x,y]):s.rejectWith(p,[y,x,n]),y.statusCode(u),u=void 0,l&&q.trigger(j?"ajaxSuccess":"ajaxError",[y,o,j?m:n]),t.fireWith(p,[y,x]),l&&(q.trigger("ajaxComplete",[y,o]),--r.active||r.event.trigger("ajaxStop")))}return y},getJSON:function(a,b,c){return r.get(a,b,c,"json")},getScript:function(a,b){return r.get(a,void 0,b,"script")}}),r.each(["get","post"],function(a,b){r[b]=function(a,c,d,e){return r.isFunction(c)&&(e=e||d,d=c,c=void 0),r.ajax(r.extend({url:a,type:b,dataType:e,data:c,success:d},r.isPlainObject(a)&&a))}}),r._evalUrl=function(a){return r.ajax({url:a,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,"throws":!0})},r.fn.extend({wrapAll:function(a){var b;return this[0]&&(r.isFunction(a)&&(a=a.call(this[0])),b=r(a,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstElementChild)a=a.firstElementChild;return a}).append(this)),this},wrapInner:function(a){return r.isFunction(a)?this.each(function(b){r(this).wrapInner(a.call(this,b))}):this.each(function(){var b=r(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=r.isFunction(a);return this.each(function(c){r(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(a){return this.parent(a).not("body").each(function(){r(this).replaceWith(this.childNodes)}),this}}),r.expr.pseudos.hidden=function(a){return!r.expr.pseudos.visible(a)},r.expr.pseudos.visible=function(a){return!!(a.offsetWidth||a.offsetHeight||a.getClientRects().length)},r.ajaxSettings.xhr=function(){try{return new a.XMLHttpRequest}catch(b){}};var Rb={0:200,1223:204},Sb=r.ajaxSettings.xhr();o.cors=!!Sb&&"withCredentials"in Sb,o.ajax=Sb=!!Sb,r.ajaxTransport(function(b){var c,d;if(o.cors||Sb&&!b.crossDomain)return{send:function(e,f){var g,h=b.xhr();if(h.open(b.type,b.url,b.async,b.username,b.password),b.xhrFields)for(g in b.xhrFields)h[g]=b.xhrFields[g];b.mimeType&&h.overrideMimeType&&h.overrideMimeType(b.mimeType),b.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest");for(g in e)h.setRequestHeader(g,e[g]);c=function(a){return function(){c&&(c=d=h.onload=h.onerror=h.onabort=h.onreadystatechange=null,"abort"===a?h.abort():"error"===a?"number"!=typeof h.status?f(0,"error"):f(h.status,h.statusText):f(Rb[h.status]||h.status,h.statusText,"text"!==(h.responseType||"text")||"string"!=typeof h.responseText?{binary:h.response}:{text:h.responseText},h.getAllResponseHeaders()))}},h.onload=c(),d=h.onerror=c("error"),void 0!==h.onabort?h.onabort=d:h.onreadystatechange=function(){4===h.readyState&&a.setTimeout(function(){c&&d()})},c=c("abort");try{h.send(b.hasContent&&b.data||null)}catch(i){if(c)throw i}},abort:function(){c&&c()}}}),r.ajaxPrefilter(function(a){a.crossDomain&&(a.contents.script=!1)}),r.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(a){return r.globalEval(a),a}}}),r.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET")}),r.ajaxTransport("script",function(a){if(a.crossDomain){var b,c;return{send:function(e,f){b=r("<script>").prop({charset:a.scriptCharset,src:a.url}).on("load error",c=function(a){b.remove(),c=null,a&&f("error"===a.type?404:200,a.type)}),d.head.appendChild(b[0])},abort:function(){c&&c()}}}});var Tb=[],Ub=/(=)\?(?=&|$)|\?\?/;r.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Tb.pop()||r.expando+"_"+ub++;return this[a]=!0,a}}),r.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=b.jsonp!==!1&&(Ub.test(b.url)?"url":"string"==typeof b.data&&0===(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ub.test(b.data)&&"data");if(h||"jsonp"===b.dataTypes[0])return e=b.jsonpCallback=r.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(Ub,"$1"+e):b.jsonp!==!1&&(b.url+=(vb.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||r.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){void 0===f?r(a).removeProp(e):a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,Tb.push(e)),g&&r.isFunction(f)&&f(g[0]),g=f=void 0}),"script"}),o.createHTMLDocument=function(){var a=d.implementation.createHTMLDocument("").body;return a.innerHTML="<form></form><form></form>",2===a.childNodes.length}(),r.parseHTML=function(a,b,c){if("string"!=typeof a)return[];"boolean"==typeof b&&(c=b,b=!1);var e,f,g;return b||(o.createHTMLDocument?(b=d.implementation.createHTMLDocument(""),e=b.createElement("base"),e.href=d.location.href,b.head.appendChild(e)):b=d),f=C.exec(a),g=!c&&[],f?[b.createElement(f[1])]:(f=qa([a],b,g),g&&g.length&&r(g).remove(),r.merge([],f.childNodes))},r.fn.load=function(a,b,c){var d,e,f,g=this,h=a.indexOf(" ");return h>-1&&(d=pb(a.slice(h)),a=a.slice(0,h)),r.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(e="POST"),g.length>0&&r.ajax({url:a,type:e||"GET",dataType:"html",data:b}).done(function(a){f=arguments,g.html(d?r("<div>").append(r.parseHTML(a)).find(d):a)}).always(c&&function(a,b){g.each(function(){c.apply(this,f||[a.responseText,b,a])})}),this},r.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){r.fn[b]=function(a){return this.on(b,a)}}),r.expr.pseudos.animated=function(a){return r.grep(r.timers,function(b){return a===b.elem}).length},r.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=r.css(a,"position"),l=r(a),m={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=r.css(a,"top"),i=r.css(a,"left"),j=("absolute"===k||"fixed"===k)&&(f+i).indexOf("auto")>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),r.isFunction(b)&&(b=b.call(a,c,r.extend({},h))),null!=b.top&&(m.top=b.top-h.top+g),null!=b.left&&(m.left=b.left-h.left+e),"using"in b?b.using.call(a,m):l.css(m)}},r.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){r.offset.setOffset(this,a,b)});var b,c,d,e,f=this[0];if(f)return f.getClientRects().length?(d=f.getBoundingClientRect(),b=f.ownerDocument,c=b.documentElement,e=b.defaultView,{top:d.top+e.pageYOffset-c.clientTop,left:d.left+e.pageXOffset-c.clientLeft}):{top:0,left:0}},position:function(){if(this[0]){var a,b,c=this[0],d={top:0,left:0};return"fixed"===r.css(c,"position")?b=c.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),B(a[0],"html")||(d=a.offset()),d={top:d.top+r.css(a[0],"borderTopWidth",!0),left:d.left+r.css(a[0],"borderLeftWidth",!0)}),{top:b.top-d.top-r.css(c,"marginTop",!0),left:b.left-d.left-r.css(c,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var a=this.offsetParent;while(a&&"static"===r.css(a,"position"))a=a.offsetParent;return a||ra})}}),r.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var c="pageYOffset"===b;r.fn[a]=function(d){return T(this,function(a,d,e){var f;return r.isWindow(a)?f=a:9===a.nodeType&&(f=a.defaultView),void 0===e?f?f[b]:a[d]:void(f?f.scrollTo(c?f.pageXOffset:e,c?e:f.pageYOffset):a[d]=e)},a,d,arguments.length)}}),r.each(["top","left"],function(a,b){r.cssHooks[b]=Pa(o.pixelPosition,function(a,c){if(c)return c=Oa(a,b),Ma.test(c)?r(a).position()[b]+"px":c})}),r.each({Height:"height",Width:"width"},function(a,b){r.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){r.fn[d]=function(e,f){var g=arguments.length&&(c||"boolean"!=typeof e),h=c||(e===!0||f===!0?"margin":"border");return T(this,function(b,c,e){var f;return r.isWindow(b)?0===d.indexOf("outer")?b["inner"+a]:b.document.documentElement["client"+a]:9===b.nodeType?(f=b.documentElement,Math.max(b.body["scroll"+a],f["scroll"+a],b.body["offset"+a],f["offset"+a],f["client"+a])):void 0===e?r.css(b,c,h):r.style(b,c,e,h)},b,g?e:void 0,g)}})}),r.fn.extend({bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}}),r.holdReady=function(a){a?r.readyWait++:r.ready(!0)},r.isArray=Array.isArray,r.parseJSON=JSON.parse,r.nodeName=B,"function"==typeof define&&define.amd&&define("jquery",[],function(){return r});var Vb=a.jQuery,Wb=a.$;return r.noConflict=function(b){return a.$===r&&(a.$=Wb),b&&a.jQuery===r&&(a.jQuery=Vb),r},b||(a.jQuery=a.$=r),r});

/*
 AngularJS v1.6.4
 (c) 2010-2017 Google, Inc. http://angularjs.org
 License: MIT
*/
(function(x){'use strict';function L(a,b){b=b||Error;return function(){var d=arguments[0],c;c="["+(a?a+":":"")+d+"] http://errors.angularjs.org/1.6.4/"+(a?a+"/":"")+d;for(d=1;d<arguments.length;d++){c=c+(1==d?"?":"&")+"p"+(d-1)+"=";var e=encodeURIComponent,f;f=arguments[d];f="function"==typeof f?f.toString().replace(/ \{[\s\S]*$/,""):"undefined"==typeof f?"undefined":"string"!=typeof f?JSON.stringify(f):f;c+=e(f)}return new b(c)}}function me(a){if(C(a))u(a.objectMaxDepth)&&(Ic.objectMaxDepth=Sb(a.objectMaxDepth)?
a.objectMaxDepth:NaN);else return Ic}function Sb(a){return ba(a)&&0<a}function qa(a){if(null==a||Wa(a))return!1;if(H(a)||F(a)||B&&a instanceof B)return!0;var b="length"in Object(a)&&a.length;return ba(b)&&(0<=b&&(b-1 in a||a instanceof Array)||"function"===typeof a.item)}function q(a,b,d){var c,e;if(a)if(D(a))for(c in a)"prototype"!==c&&"length"!==c&&"name"!==c&&a.hasOwnProperty(c)&&b.call(d,a[c],c,a);else if(H(a)||qa(a)){var f="object"!==typeof a;c=0;for(e=a.length;c<e;c++)(f||c in a)&&b.call(d,
a[c],c,a)}else if(a.forEach&&a.forEach!==q)a.forEach(b,d,a);else if(Jc(a))for(c in a)b.call(d,a[c],c,a);else if("function"===typeof a.hasOwnProperty)for(c in a)a.hasOwnProperty(c)&&b.call(d,a[c],c,a);else for(c in a)ua.call(a,c)&&b.call(d,a[c],c,a);return a}function Kc(a,b,d){for(var c=Object.keys(a).sort(),e=0;e<c.length;e++)b.call(d,a[c[e]],c[e]);return c}function Lc(a){return function(b,d){a(d,b)}}function ne(){return++qb}function Tb(a,b,d){for(var c=a.$$hashKey,e=0,f=b.length;e<f;++e){var g=b[e];
if(C(g)||D(g))for(var h=Object.keys(g),k=0,l=h.length;k<l;k++){var m=h[k],n=g[m];d&&C(n)?ga(n)?a[m]=new Date(n.valueOf()):Xa(n)?a[m]=new RegExp(n):n.nodeName?a[m]=n.cloneNode(!0):Ub(n)?a[m]=n.clone():(C(a[m])||(a[m]=H(n)?[]:{}),Tb(a[m],[n],!0)):a[m]=n}}c?a.$$hashKey=c:delete a.$$hashKey;return a}function S(a){return Tb(a,va.call(arguments,1),!1)}function oe(a){return Tb(a,va.call(arguments,1),!0)}function Z(a){return parseInt(a,10)}function Vb(a,b){return S(Object.create(a),b)}function z(){}function Ya(a){return a}
function la(a){return function(){return a}}function Wb(a){return D(a.toString)&&a.toString!==ma}function w(a){return"undefined"===typeof a}function u(a){return"undefined"!==typeof a}function C(a){return null!==a&&"object"===typeof a}function Jc(a){return null!==a&&"object"===typeof a&&!Mc(a)}function F(a){return"string"===typeof a}function ba(a){return"number"===typeof a}function ga(a){return"[object Date]"===ma.call(a)}function D(a){return"function"===typeof a}function Xa(a){return"[object RegExp]"===
ma.call(a)}function Wa(a){return a&&a.window===a}function Za(a){return a&&a.$evalAsync&&a.$watch}function Ha(a){return"boolean"===typeof a}function pe(a){return a&&ba(a.length)&&qe.test(ma.call(a))}function Ub(a){return!(!a||!(a.nodeName||a.prop&&a.attr&&a.find))}function re(a){var b={};a=a.split(",");var d;for(d=0;d<a.length;d++)b[a[d]]=!0;return b}function wa(a){return Q(a.nodeName||a[0]&&a[0].nodeName)}function $a(a,b){var d=a.indexOf(b);0<=d&&a.splice(d,1);return d}function ra(a,b,d){function c(a,
b,c){c--;if(0>c)return"...";var d=b.$$hashKey,f;if(H(a)){f=0;for(var g=a.length;f<g;f++)b.push(e(a[f],c))}else if(Jc(a))for(f in a)b[f]=e(a[f],c);else if(a&&"function"===typeof a.hasOwnProperty)for(f in a)a.hasOwnProperty(f)&&(b[f]=e(a[f],c));else for(f in a)ua.call(a,f)&&(b[f]=e(a[f],c));d?b.$$hashKey=d:delete b.$$hashKey;return b}function e(a,b){if(!C(a))return a;var d=g.indexOf(a);if(-1!==d)return h[d];if(Wa(a)||Za(a))throw Fa("cpws");var d=!1,e=f(a);void 0===e&&(e=H(a)?[]:Object.create(Mc(a)),
d=!0);g.push(a);h.push(e);return d?c(a,e,b):e}function f(a){switch(ma.call(a)){case "[object Int8Array]":case "[object Int16Array]":case "[object Int32Array]":case "[object Float32Array]":case "[object Float64Array]":case "[object Uint8Array]":case "[object Uint8ClampedArray]":case "[object Uint16Array]":case "[object Uint32Array]":return new a.constructor(e(a.buffer),a.byteOffset,a.length);case "[object ArrayBuffer]":if(!a.slice){var b=new ArrayBuffer(a.byteLength);(new Uint8Array(b)).set(new Uint8Array(a));
return b}return a.slice(0);case "[object Boolean]":case "[object Number]":case "[object String]":case "[object Date]":return new a.constructor(a.valueOf());case "[object RegExp]":return b=new RegExp(a.source,a.toString().match(/[^/]*$/)[0]),b.lastIndex=a.lastIndex,b;case "[object Blob]":return new a.constructor([a],{type:a.type})}if(D(a.cloneNode))return a.cloneNode(!0)}var g=[],h=[];d=Sb(d)?d:NaN;if(b){if(pe(b)||"[object ArrayBuffer]"===ma.call(b))throw Fa("cpta");if(a===b)throw Fa("cpi");H(b)?b.length=
0:q(b,function(a,c){"$$hashKey"!==c&&delete b[c]});g.push(a);h.push(b);return c(a,b,d)}return e(a,d)}function Xb(a,b){return a===b||a!==a&&b!==b}function sa(a,b){if(a===b)return!0;if(null===a||null===b)return!1;if(a!==a&&b!==b)return!0;var d=typeof a,c;if(d===typeof b&&"object"===d)if(H(a)){if(!H(b))return!1;if((d=a.length)===b.length){for(c=0;c<d;c++)if(!sa(a[c],b[c]))return!1;return!0}}else{if(ga(a))return ga(b)?Xb(a.getTime(),b.getTime()):!1;if(Xa(a))return Xa(b)?a.toString()===b.toString():!1;
if(Za(a)||Za(b)||Wa(a)||Wa(b)||H(b)||ga(b)||Xa(b))return!1;d=V();for(c in a)if("$"!==c.charAt(0)&&!D(a[c])){if(!sa(a[c],b[c]))return!1;d[c]=!0}for(c in b)if(!(c in d)&&"$"!==c.charAt(0)&&u(b[c])&&!D(b[c]))return!1;return!0}return!1}function ab(a,b,d){return a.concat(va.call(b,d))}function bb(a,b){var d=2<arguments.length?va.call(arguments,2):[];return!D(b)||b instanceof RegExp?b:d.length?function(){return arguments.length?b.apply(a,ab(d,arguments,0)):b.apply(a,d)}:function(){return arguments.length?
b.apply(a,arguments):b.call(a)}}function Nc(a,b){var d=b;"string"===typeof a&&"$"===a.charAt(0)&&"$"===a.charAt(1)?d=void 0:Wa(b)?d="$WINDOW":b&&x.document===b?d="$DOCUMENT":Za(b)&&(d="$SCOPE");return d}function cb(a,b){if(!w(a))return ba(b)||(b=b?2:null),JSON.stringify(a,Nc,b)}function Oc(a){return F(a)?JSON.parse(a):a}function Pc(a,b){a=a.replace(se,"");var d=Date.parse("Jan 01, 1970 00:00:00 "+a)/6E4;return da(d)?b:d}function Yb(a,b,d){d=d?-1:1;var c=a.getTimezoneOffset();b=Pc(b,c);d*=b-c;a=new Date(a.getTime());
a.setMinutes(a.getMinutes()+d);return a}function xa(a){a=B(a).clone();try{a.empty()}catch(b){}var d=B("<div>").append(a).html();try{return a[0].nodeType===Ia?Q(d):d.match(/^(<[^>]+>)/)[1].replace(/^<([\w-]+)/,function(a,b){return"<"+Q(b)})}catch(c){return Q(d)}}function Qc(a){try{return decodeURIComponent(a)}catch(b){}}function Rc(a){var b={};q((a||"").split("&"),function(a){var c,e,f;a&&(e=a=a.replace(/\+/g,"%20"),c=a.indexOf("="),-1!==c&&(e=a.substring(0,c),f=a.substring(c+1)),e=Qc(e),u(e)&&(f=
u(f)?Qc(f):!0,ua.call(b,e)?H(b[e])?b[e].push(f):b[e]=[b[e],f]:b[e]=f))});return b}function Zb(a){var b=[];q(a,function(a,c){H(a)?q(a,function(a){b.push($(c,!0)+(!0===a?"":"="+$(a,!0)))}):b.push($(c,!0)+(!0===a?"":"="+$(a,!0)))});return b.length?b.join("&"):""}function db(a){return $(a,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function $(a,b){return encodeURIComponent(a).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,
b?"%20":"+")}function te(a,b){var d,c,e=Ja.length;for(c=0;c<e;++c)if(d=Ja[c]+b,F(d=a.getAttribute(d)))return d;return null}function ue(a,b){var d,c,e={};q(Ja,function(b){b+="app";!d&&a.hasAttribute&&a.hasAttribute(b)&&(d=a,c=a.getAttribute(b))});q(Ja,function(b){b+="app";var e;!d&&(e=a.querySelector("["+b.replace(":","\\:")+"]"))&&(d=e,c=e.getAttribute(b))});d&&(ve?(e.strictDi=null!==te(d,"strict-di"),b(d,c?[c]:[],e)):x.console.error("Angular: disabling automatic bootstrap. <script> protocol indicates an extension, document.location.href does not match."))}
function Sc(a,b,d){C(d)||(d={});d=S({strictDi:!1},d);var c=function(){a=B(a);if(a.injector()){var c=a[0]===x.document?"document":xa(a);throw Fa("btstrpd",c.replace(/</,"&lt;").replace(/>/,"&gt;"));}b=b||[];b.unshift(["$provide",function(b){b.value("$rootElement",a)}]);d.debugInfoEnabled&&b.push(["$compileProvider",function(a){a.debugInfoEnabled(!0)}]);b.unshift("ng");c=eb(b,d.strictDi);c.invoke(["$rootScope","$rootElement","$compile","$injector",function(a,b,c,d){a.$apply(function(){b.data("$injector",
d);c(b)(a)})}]);return c},e=/^NG_ENABLE_DEBUG_INFO!/,f=/^NG_DEFER_BOOTSTRAP!/;x&&e.test(x.name)&&(d.debugInfoEnabled=!0,x.name=x.name.replace(e,""));if(x&&!f.test(x.name))return c();x.name=x.name.replace(f,"");ea.resumeBootstrap=function(a){q(a,function(a){b.push(a)});return c()};D(ea.resumeDeferredBootstrap)&&ea.resumeDeferredBootstrap()}function we(){x.name="NG_ENABLE_DEBUG_INFO!"+x.name;x.location.reload()}function xe(a){a=ea.element(a).injector();if(!a)throw Fa("test");return a.get("$$testability")}
function Tc(a,b){b=b||"_";return a.replace(ye,function(a,c){return(c?b:"")+a.toLowerCase()})}function ze(){var a;if(!Uc){var b=rb();(na=w(b)?x.jQuery:b?x[b]:void 0)&&na.fn.on?(B=na,S(na.fn,{scope:Na.scope,isolateScope:Na.isolateScope,controller:Na.controller,injector:Na.injector,inheritedData:Na.inheritedData}),a=na.cleanData,na.cleanData=function(b){for(var c,e=0,f;null!=(f=b[e]);e++)(c=na._data(f,"events"))&&c.$destroy&&na(f).triggerHandler("$destroy");a(b)}):B=W;ea.element=B;Uc=!0}}function fb(a,
b,d){if(!a)throw Fa("areq",b||"?",d||"required");return a}function sb(a,b,d){d&&H(a)&&(a=a[a.length-1]);fb(D(a),b,"not a function, got "+(a&&"object"===typeof a?a.constructor.name||"Object":typeof a));return a}function Ka(a,b){if("hasOwnProperty"===a)throw Fa("badname",b);}function Vc(a,b,d){if(!b)return a;b=b.split(".");for(var c,e=a,f=b.length,g=0;g<f;g++)c=b[g],a&&(a=(e=a)[c]);return!d&&D(a)?bb(e,a):a}function tb(a){for(var b=a[0],d=a[a.length-1],c,e=1;b!==d&&(b=b.nextSibling);e++)if(c||a[e]!==
b)c||(c=B(va.call(a,0,e))),c.push(b);return c||a}function V(){return Object.create(null)}function $b(a){if(null==a)return"";switch(typeof a){case "string":break;case "number":a=""+a;break;default:a=!Wb(a)||H(a)||ga(a)?cb(a):a.toString()}return a}function Ae(a){function b(a,b,c){return a[b]||(a[b]=c())}var d=L("$injector"),c=L("ng");a=b(a,"angular",Object);a.$$minErr=a.$$minErr||L;return b(a,"module",function(){var a={};return function(f,g,h){var k={};if("hasOwnProperty"===f)throw c("badname","module");
g&&a.hasOwnProperty(f)&&(a[f]=null);return b(a,f,function(){function a(b,c,d,f){f||(f=e);return function(){f[d||"push"]([b,c,arguments]);return v}}function b(a,c,d){d||(d=e);return function(b,e){e&&D(e)&&(e.$$moduleName=f);d.push([a,c,arguments]);return v}}if(!g)throw d("nomod",f);var e=[],p=[],r=[],J=a("$injector","invoke","push",p),v={_invokeQueue:e,_configBlocks:p,_runBlocks:r,info:function(a){if(u(a)){if(!C(a))throw c("aobj","value");k=a;return this}return k},requires:g,name:f,provider:b("$provide",
"provider"),factory:b("$provide","factory"),service:b("$provide","service"),value:a("$provide","value"),constant:a("$provide","constant","unshift"),decorator:b("$provide","decorator",p),animation:b("$animateProvider","register"),filter:b("$filterProvider","register"),controller:b("$controllerProvider","register"),directive:b("$compileProvider","directive"),component:b("$compileProvider","component"),config:J,run:function(a){r.push(a);return this}};h&&J(h);return v})}})}function pa(a,b){if(H(a)){b=
b||[];for(var d=0,c=a.length;d<c;d++)b[d]=a[d]}else if(C(a))for(d in b=b||{},a)if("$"!==d.charAt(0)||"$"!==d.charAt(1))b[d]=a[d];return b||a}function Be(a,b){var d=[];Sb(b)&&(a=ra(a,null,b));return JSON.stringify(a,function(a,b){b=Nc(a,b);if(C(b)){if(0<=d.indexOf(b))return"...";d.push(b)}return b})}function Ce(a){S(a,{errorHandlingConfig:me,bootstrap:Sc,copy:ra,extend:S,merge:oe,equals:sa,element:B,forEach:q,injector:eb,noop:z,bind:bb,toJson:cb,fromJson:Oc,identity:Ya,isUndefined:w,isDefined:u,isString:F,
isFunction:D,isObject:C,isNumber:ba,isElement:Ub,isArray:H,version:De,isDate:ga,lowercase:Q,uppercase:ub,callbacks:{$$counter:0},getTestability:xe,reloadWithDebugInfo:we,$$minErr:L,$$csp:Ga,$$encodeUriSegment:db,$$encodeUriQuery:$,$$stringify:$b});ac=Ae(x);ac("ng",["ngLocale"],["$provide",function(a){a.provider({$$sanitizeUri:Ee});a.provider("$compile",Wc).directive({a:Fe,input:Xc,textarea:Xc,form:Ge,script:He,select:Ie,option:Je,ngBind:Ke,ngBindHtml:Le,ngBindTemplate:Me,ngClass:Ne,ngClassEven:Oe,
ngClassOdd:Pe,ngCloak:Qe,ngController:Re,ngForm:Se,ngHide:Te,ngIf:Ue,ngInclude:Ve,ngInit:We,ngNonBindable:Xe,ngPluralize:Ye,ngRepeat:Ze,ngShow:$e,ngStyle:af,ngSwitch:bf,ngSwitchWhen:cf,ngSwitchDefault:df,ngOptions:ef,ngTransclude:ff,ngModel:gf,ngList:hf,ngChange:jf,pattern:Yc,ngPattern:Yc,required:Zc,ngRequired:Zc,minlength:$c,ngMinlength:$c,maxlength:ad,ngMaxlength:ad,ngValue:kf,ngModelOptions:lf}).directive({ngInclude:mf}).directive(vb).directive(bd);a.provider({$anchorScroll:nf,$animate:of,$animateCss:pf,
$$animateJs:qf,$$animateQueue:rf,$$AnimateRunner:sf,$$animateAsyncRun:tf,$browser:uf,$cacheFactory:vf,$controller:wf,$document:xf,$$isDocumentHidden:yf,$exceptionHandler:zf,$filter:cd,$$forceReflow:Af,$interpolate:Bf,$interval:Cf,$http:Df,$httpParamSerializer:Ef,$httpParamSerializerJQLike:Ff,$httpBackend:Gf,$xhrFactory:Hf,$jsonpCallbacks:If,$location:Jf,$log:Kf,$parse:Lf,$rootScope:Mf,$q:Nf,$$q:Of,$sce:Pf,$sceDelegate:Qf,$sniffer:Rf,$templateCache:Sf,$templateRequest:Tf,$$testability:Uf,$timeout:Vf,
$window:Wf,$$rAF:Xf,$$jqLite:Yf,$$Map:Zf,$$cookieReader:$f})}]).info({angularVersion:"1.6.4"})}function gb(a,b){return b.toUpperCase()}function wb(a){return a.replace(ag,gb)}function bc(a){a=a.nodeType;return 1===a||!a||9===a}function dd(a,b){var d,c,e=b.createDocumentFragment(),f=[];if(cc.test(a)){d=e.appendChild(b.createElement("div"));c=(bg.exec(a)||["",""])[1].toLowerCase();c=ha[c]||ha._default;d.innerHTML=c[1]+a.replace(cg,"<$1></$2>")+c[2];for(c=c[0];c--;)d=d.lastChild;f=ab(f,d.childNodes);
d=e.firstChild;d.textContent=""}else f.push(b.createTextNode(a));e.textContent="";e.innerHTML="";q(f,function(a){e.appendChild(a)});return e}function W(a){if(a instanceof W)return a;var b;F(a)&&(a=T(a),b=!0);if(!(this instanceof W)){if(b&&"<"!==a.charAt(0))throw dc("nosel");return new W(a)}if(b){b=x.document;var d;a=(d=dg.exec(a))?[b.createElement(d[1])]:(d=dd(a,b))?d.childNodes:[];ec(this,a)}else D(a)?ed(a):ec(this,a)}function fc(a){return a.cloneNode(!0)}function xb(a,b){!b&&bc(a)&&B.cleanData([a]);
a.querySelectorAll&&B.cleanData(a.querySelectorAll("*"))}function fd(a,b,d,c){if(u(c))throw dc("offargs");var e=(c=yb(a))&&c.events,f=c&&c.handle;if(f)if(b){var g=function(b){var c=e[b];u(d)&&$a(c||[],d);u(d)&&c&&0<c.length||(a.removeEventListener(b,f),delete e[b])};q(b.split(" "),function(a){g(a);zb[a]&&g(zb[a])})}else for(b in e)"$destroy"!==b&&a.removeEventListener(b,f),delete e[b]}function gc(a,b){var d=a.ng339,c=d&&hb[d];c&&(b?delete c.data[b]:(c.handle&&(c.events.$destroy&&c.handle({},"$destroy"),
fd(a)),delete hb[d],a.ng339=void 0))}function yb(a,b){var d=a.ng339,d=d&&hb[d];b&&!d&&(a.ng339=d=++eg,d=hb[d]={events:{},data:{},handle:void 0});return d}function hc(a,b,d){if(bc(a)){var c,e=u(d),f=!e&&b&&!C(b),g=!b;a=(a=yb(a,!f))&&a.data;if(e)a[wb(b)]=d;else{if(g)return a;if(f)return a&&a[wb(b)];for(c in b)a[wb(c)]=b[c]}}}function Ab(a,b){return a.getAttribute?-1<(" "+(a.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+b+" "):!1}function Bb(a,b){b&&a.setAttribute&&q(b.split(" "),
function(b){a.setAttribute("class",T((" "+(a.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+T(b)+" "," ")))})}function Cb(a,b){if(b&&a.setAttribute){var d=(" "+(a.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");q(b.split(" "),function(a){a=T(a);-1===d.indexOf(" "+a+" ")&&(d+=a+" ")});a.setAttribute("class",T(d))}}function ec(a,b){if(b)if(b.nodeType)a[a.length++]=b;else{var d=b.length;if("number"===typeof d&&b.window!==b){if(d)for(var c=0;c<d;c++)a[a.length++]=b[c]}else a[a.length++]=
b}}function gd(a,b){return Db(a,"$"+(b||"ngController")+"Controller")}function Db(a,b,d){9===a.nodeType&&(a=a.documentElement);for(b=H(b)?b:[b];a;){for(var c=0,e=b.length;c<e;c++)if(u(d=B.data(a,b[c])))return d;a=a.parentNode||11===a.nodeType&&a.host}}function hd(a){for(xb(a,!0);a.firstChild;)a.removeChild(a.firstChild)}function Eb(a,b){b||xb(a);var d=a.parentNode;d&&d.removeChild(a)}function fg(a,b){b=b||x;if("complete"===b.document.readyState)b.setTimeout(a);else B(b).on("load",a)}function ed(a){function b(){x.document.removeEventListener("DOMContentLoaded",
b);x.removeEventListener("load",b);a()}"complete"===x.document.readyState?x.setTimeout(a):(x.document.addEventListener("DOMContentLoaded",b),x.addEventListener("load",b))}function id(a,b){var d=Fb[b.toLowerCase()];return d&&jd[wa(a)]&&d}function gg(a,b){var d=function(c,d){c.isDefaultPrevented=function(){return c.defaultPrevented};var f=b[d||c.type],g=f?f.length:0;if(g){if(w(c.immediatePropagationStopped)){var h=c.stopImmediatePropagation;c.stopImmediatePropagation=function(){c.immediatePropagationStopped=
!0;c.stopPropagation&&c.stopPropagation();h&&h.call(c)}}c.isImmediatePropagationStopped=function(){return!0===c.immediatePropagationStopped};var k=f.specialHandlerWrapper||hg;1<g&&(f=pa(f));for(var l=0;l<g;l++)c.isImmediatePropagationStopped()||k(a,c,f[l])}};d.elem=a;return d}function hg(a,b,d){d.call(a,b)}function ig(a,b,d){var c=b.relatedTarget;c&&(c===a||jg.call(a,c))||d.call(a,b)}function Yf(){this.$get=function(){return S(W,{hasClass:function(a,b){a.attr&&(a=a[0]);return Ab(a,b)},addClass:function(a,
b){a.attr&&(a=a[0]);return Cb(a,b)},removeClass:function(a,b){a.attr&&(a=a[0]);return Bb(a,b)}})}}function Pa(a,b){var d=a&&a.$$hashKey;if(d)return"function"===typeof d&&(d=a.$$hashKey()),d;d=typeof a;return d="function"===d||"object"===d&&null!==a?a.$$hashKey=d+":"+(b||ne)():d+":"+a}function kd(){this._keys=[];this._values=[];this._lastKey=NaN;this._lastIndex=-1}function ld(a){a=Function.prototype.toString.call(a).replace(kg,"");return a.match(lg)||a.match(mg)}function ng(a){return(a=ld(a))?"function("+
(a[1]||"").replace(/[\s\r\n]+/," ")+")":"fn"}function eb(a,b){function d(a){return function(b,c){if(C(b))q(b,Lc(a));else return a(b,c)}}function c(a,b){Ka(a,"service");if(D(b)||H(b))b=p.instantiate(b);if(!b.$get)throw ya("pget",a);return n[a+"Provider"]=b}function e(a,b){return function(){var c=v.invoke(b,this);if(w(c))throw ya("undef",a);return c}}function f(a,b,d){return c(a,{$get:!1!==d?e(a,b):b})}function g(a){fb(w(a)||H(a),"modulesToLoad","not an array");var b=[],c;q(a,function(a){function d(a){var b,
c;b=0;for(c=a.length;b<c;b++){var e=a[b],f=p.get(e[0]);f[e[1]].apply(f,e[2])}}if(!m.get(a)){m.set(a,!0);try{F(a)?(c=ac(a),v.modules[a]=c,b=b.concat(g(c.requires)).concat(c._runBlocks),d(c._invokeQueue),d(c._configBlocks)):D(a)?b.push(p.invoke(a)):H(a)?b.push(p.invoke(a)):sb(a,"module")}catch(e){throw H(a)&&(a=a[a.length-1]),e.message&&e.stack&&-1===e.stack.indexOf(e.message)&&(e=e.message+"\n"+e.stack),ya("modulerr",a,e.stack||e.message||e);}}});return b}function h(a,c){function d(b,e){if(a.hasOwnProperty(b)){if(a[b]===
k)throw ya("cdep",b+" <- "+l.join(" <- "));return a[b]}try{return l.unshift(b),a[b]=k,a[b]=c(b,e),a[b]}catch(f){throw a[b]===k&&delete a[b],f;}finally{l.shift()}}function e(a,c,f){var g=[];a=eb.$$annotate(a,b,f);for(var k=0,h=a.length;k<h;k++){var l=a[k];if("string"!==typeof l)throw ya("itkn",l);g.push(c&&c.hasOwnProperty(l)?c[l]:d(l,f))}return g}return{invoke:function(a,b,c,d){"string"===typeof c&&(d=c,c=null);c=e(a,c,d);H(a)&&(a=a[a.length-1]);d=a;if(za||"function"!==typeof d)d=!1;else{var f=d.$$ngIsClass;
Ha(f)||(f=d.$$ngIsClass=/^(?:class\b|constructor\()/.test(Function.prototype.toString.call(d)));d=f}return d?(c.unshift(null),new (Function.prototype.bind.apply(a,c))):a.apply(b,c)},instantiate:function(a,b,c){var d=H(a)?a[a.length-1]:a;a=e(a,b,c);a.unshift(null);return new (Function.prototype.bind.apply(d,a))},get:d,annotate:eb.$$annotate,has:function(b){return n.hasOwnProperty(b+"Provider")||a.hasOwnProperty(b)}}}b=!0===b;var k={},l=[],m=new Gb,n={$provide:{provider:d(c),factory:d(f),service:d(function(a,
b){return f(a,["$injector",function(a){return a.instantiate(b)}])}),value:d(function(a,b){return f(a,la(b),!1)}),constant:d(function(a,b){Ka(a,"constant");n[a]=b;r[a]=b}),decorator:function(a,b){var c=p.get(a+"Provider"),d=c.$get;c.$get=function(){var a=v.invoke(d,c);return v.invoke(b,null,{$delegate:a})}}}},p=n.$injector=h(n,function(a,b){ea.isString(b)&&l.push(b);throw ya("unpr",l.join(" <- "));}),r={},J=h(r,function(a,b){var c=p.get(a+"Provider",b);return v.invoke(c.$get,c,void 0,a)}),v=J;n.$injectorProvider=
{$get:la(J)};v.modules=p.modules=V();var t=g(a),v=J.get("$injector");v.strictDi=b;q(t,function(a){a&&v.invoke(a)});return v}function nf(){var a=!0;this.disableAutoScrolling=function(){a=!1};this.$get=["$window","$location","$rootScope",function(b,d,c){function e(a){var b=null;Array.prototype.some.call(a,function(a){if("a"===wa(a))return b=a,!0});return b}function f(a){if(a){a.scrollIntoView();var c;c=g.yOffset;D(c)?c=c():Ub(c)?(c=c[0],c="fixed"!==b.getComputedStyle(c).position?0:c.getBoundingClientRect().bottom):
ba(c)||(c=0);c&&(a=a.getBoundingClientRect().top,b.scrollBy(0,a-c))}else b.scrollTo(0,0)}function g(a){a=F(a)?a:ba(a)?a.toString():d.hash();var b;a?(b=h.getElementById(a))?f(b):(b=e(h.getElementsByName(a)))?f(b):"top"===a&&f(null):f(null)}var h=b.document;a&&c.$watch(function(){return d.hash()},function(a,b){a===b&&""===a||fg(function(){c.$evalAsync(g)})});return g}]}function ib(a,b){if(!a&&!b)return"";if(!a)return b;if(!b)return a;H(a)&&(a=a.join(" "));H(b)&&(b=b.join(" "));return a+" "+b}function og(a){F(a)&&
(a=a.split(" "));var b=V();q(a,function(a){a.length&&(b[a]=!0)});return b}function ia(a){return C(a)?a:{}}function pg(a,b,d,c){function e(a){try{a.apply(null,va.call(arguments,1))}finally{if(J--,0===J)for(;v.length;)try{v.pop()()}catch(b){d.error(b)}}}function f(){Oa=null;h()}function g(){t=I();t=w(t)?null:t;sa(t,G)&&(t=G);M=G=t}function h(){var a=M;g();if(N!==k.url()||a!==t)N=k.url(),M=t,q(K,function(a){a(k.url(),t)})}var k=this,l=a.location,m=a.history,n=a.setTimeout,p=a.clearTimeout,r={};k.isMock=
!1;var J=0,v=[];k.$$completeOutstandingRequest=e;k.$$incOutstandingRequestCount=function(){J++};k.notifyWhenNoOutstandingRequests=function(a){0===J?a():v.push(a)};var t,M,N=l.href,A=b.find("base"),Oa=null,I=c.history?function(){try{return m.state}catch(a){}}:z;g();k.url=function(b,d,e){w(e)&&(e=null);l!==a.location&&(l=a.location);m!==a.history&&(m=a.history);if(b){var f=M===e;if(N===b&&(!c.history||f))return k;var h=N&&Aa(N)===Aa(b);N=b;M=e;!c.history||h&&f?(h||(Oa=b),d?l.replace(b):h?(d=l,e=b.indexOf("#"),
e=-1===e?"":b.substr(e),d.hash=e):l.href=b,l.href!==b&&(Oa=b)):(m[d?"replaceState":"pushState"](e,"",b),g());Oa&&(Oa=b);return k}return Oa||l.href.replace(/%27/g,"'")};k.state=function(){return t};var K=[],E=!1,G=null;k.onUrlChange=function(b){if(!E){if(c.history)B(a).on("popstate",f);B(a).on("hashchange",f);E=!0}K.push(b);return b};k.$$applicationDestroyed=function(){B(a).off("hashchange popstate",f)};k.$$checkUrlChange=h;k.baseHref=function(){var a=A.attr("href");return a?a.replace(/^(https?:)?\/\/[^/]*/,
""):""};k.defer=function(a,b){var c;J++;c=n(function(){delete r[c];e(a)},b||0);r[c]=!0;return c};k.defer.cancel=function(a){return r[a]?(delete r[a],p(a),e(z),!0):!1}}function uf(){this.$get=["$window","$log","$sniffer","$document",function(a,b,d,c){return new pg(a,c,b,d)}]}function vf(){this.$get=function(){function a(a,c){function e(a){a!==n&&(p?p===a&&(p=a.n):p=a,f(a.n,a.p),f(a,n),n=a,n.n=null)}function f(a,b){a!==b&&(a&&(a.p=b),b&&(b.n=a))}if(a in b)throw L("$cacheFactory")("iid",a);var g=0,h=
S({},c,{id:a}),k=V(),l=c&&c.capacity||Number.MAX_VALUE,m=V(),n=null,p=null;return b[a]={put:function(a,b){if(!w(b)){if(l<Number.MAX_VALUE){var c=m[a]||(m[a]={key:a});e(c)}a in k||g++;k[a]=b;g>l&&this.remove(p.key);return b}},get:function(a){if(l<Number.MAX_VALUE){var b=m[a];if(!b)return;e(b)}return k[a]},remove:function(a){if(l<Number.MAX_VALUE){var b=m[a];if(!b)return;b===n&&(n=b.p);b===p&&(p=b.n);f(b.n,b.p);delete m[a]}a in k&&(delete k[a],g--)},removeAll:function(){k=V();g=0;m=V();n=p=null},destroy:function(){m=
h=k=null;delete b[a]},info:function(){return S({},h,{size:g})}}}var b={};a.info=function(){var a={};q(b,function(b,e){a[e]=b.info()});return a};a.get=function(a){return b[a]};return a}}function Sf(){this.$get=["$cacheFactory",function(a){return a("templates")}]}function Wc(a,b){function d(a,b,c){var d=/^\s*([@&<]|=(\*?))(\??)\s*([\w$]*)\s*$/,e=V();q(a,function(a,f){if(a in n)e[f]=n[a];else{var g=a.match(d);if(!g)throw fa("iscp",b,f,a,c?"controller bindings definition":"isolate scope definition");
e[f]={mode:g[1][0],collection:"*"===g[2],optional:"?"===g[3],attrName:g[4]||f};g[4]&&(n[a]=e[f])}});return e}function c(a){var b=a.charAt(0);if(!b||b!==Q(b))throw fa("baddir",a);if(a!==a.trim())throw fa("baddir",a);}function e(a){var b=a.require||a.controller&&a.name;!H(b)&&C(b)&&q(b,function(a,c){var d=a.match(l);a.substring(d[0].length)||(b[c]=d[0]+c)});return b}var f={},g=/^\s*directive:\s*([\w-]+)\s+(.*)$/,h=/(([\w-]+)(?::([^;]+))?;?)/,k=re("ngSrc,ngSrcset,src,srcset"),l=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,
m=/^(on[a-z]+|formaction)$/,n=V();this.directive=function N(b,d){fb(b,"name");Ka(b,"directive");F(b)?(c(b),fb(d,"directiveFactory"),f.hasOwnProperty(b)||(f[b]=[],a.factory(b+"Directive",["$injector","$exceptionHandler",function(a,c){var d=[];q(f[b],function(f,g){try{var h=a.invoke(f);D(h)?h={compile:la(h)}:!h.compile&&h.link&&(h.compile=la(h.link));h.priority=h.priority||0;h.index=g;h.name=h.name||b;h.require=e(h);var k=h,l=h.restrict;if(l&&(!F(l)||!/[EACM]/.test(l)))throw fa("badrestrict",l,b);k.restrict=
l||"EA";h.$$moduleName=f.$$moduleName;d.push(h)}catch(m){c(m)}});return d}])),f[b].push(d)):q(b,Lc(N));return this};this.component=function(a,b){function c(a){function e(b){return D(b)||H(b)?function(c,d){return a.invoke(b,this,{$element:c,$attrs:d})}:b}var f=b.template||b.templateUrl?b.template:"",g={controller:d,controllerAs:qg(b.controller)||b.controllerAs||"$ctrl",template:e(f),templateUrl:e(b.templateUrl),transclude:b.transclude,scope:{},bindToController:b.bindings||{},restrict:"E",require:b.require};
q(b,function(a,b){"$"===b.charAt(0)&&(g[b]=a)});return g}var d=b.controller||function(){};q(b,function(a,b){"$"===b.charAt(0)&&(c[b]=a,D(d)&&(d[b]=a))});c.$inject=["$injector"];return this.directive(a,c)};this.aHrefSanitizationWhitelist=function(a){return u(a)?(b.aHrefSanitizationWhitelist(a),this):b.aHrefSanitizationWhitelist()};this.imgSrcSanitizationWhitelist=function(a){return u(a)?(b.imgSrcSanitizationWhitelist(a),this):b.imgSrcSanitizationWhitelist()};var p=!0;this.debugInfoEnabled=function(a){return u(a)?
(p=a,this):p};var r=!1;this.preAssignBindingsEnabled=function(a){return u(a)?(r=a,this):r};var J=10;this.onChangesTtl=function(a){return arguments.length?(J=a,this):J};var v=!0;this.commentDirectivesEnabled=function(a){return arguments.length?(v=a,this):v};var t=!0;this.cssClassDirectivesEnabled=function(a){return arguments.length?(t=a,this):t};this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$sce","$animate","$$sanitizeUri",function(a,
b,c,e,n,E,G,y,O,X){function P(){try{if(!--ya)throw ia=void 0,fa("infchng",J);G.$apply(function(){for(var a=[],b=0,c=ia.length;b<c;++b)try{ia[b]()}catch(d){a.push(d)}ia=void 0;if(a.length)throw a;})}finally{ya++}}function s(a,b){if(b){var c=Object.keys(b),d,e,f;d=0;for(e=c.length;d<e;d++)f=c[d],this[f]=b[f]}else this.$attr={};this.$$element=a}function R(a,b,c){ta.innerHTML="<span "+b+">";b=ta.firstChild.attributes;var d=b[0];b.removeNamedItem(d.name);d.value=c;a.attributes.setNamedItem(d)}function La(a,
b){try{a.addClass(b)}catch(c){}}function ca(a,b,c,d,e){a instanceof B||(a=B(a));var f=Ma(a,b,a,c,d,e);ca.$$addScopeClass(a);var g=null;return function(b,c,d){if(!a)throw fa("multilink");fb(b,"scope");e&&e.needsNewScope&&(b=b.$parent.$new());d=d||{};var h=d.parentBoundTranscludeFn,k=d.transcludeControllers;d=d.futureParentElement;h&&h.$$boundTransclude&&(h=h.$$boundTransclude);g||(g=(d=d&&d[0])?"foreignobject"!==wa(d)&&ma.call(d).match(/SVG/)?"svg":"html":"html");d="html"!==g?B(ha(g,B("<div>").append(a).html())):
c?Na.clone.call(a):a;if(k)for(var l in k)d.data("$"+l+"Controller",k[l].instance);ca.$$addScopeInfo(d,b);c&&c(d,b);f&&f(b,d,d,h);c||(a=f=null);return d}}function Ma(a,b,c,d,e,f){function g(a,c,d,e){var f,k,l,m,n,p,r;if(K)for(r=Array(c.length),m=0;m<h.length;m+=3)f=h[m],r[f]=c[f];else r=c;m=0;for(n=h.length;m<n;)k=r[h[m++]],c=h[m++],f=h[m++],c?(c.scope?(l=a.$new(),ca.$$addScopeInfo(B(k),l)):l=a,p=c.transcludeOnThisElement?ja(a,c.transclude,e):!c.templateOnThisElement&&e?e:!e&&b?ja(a,b):null,c(f,l,
k,d,p)):f&&f(a,k.childNodes,void 0,e)}for(var h=[],k=H(a)||a instanceof B,l,m,n,p,K,r=0;r<a.length;r++){l=new s;11===za&&L(a,r,k);m=jc(a[r],[],l,0===r?d:void 0,e);(f=m.length?W(m,a[r],l,b,c,null,[],[],f):null)&&f.scope&&ca.$$addScopeClass(l.$$element);l=f&&f.terminal||!(n=a[r].childNodes)||!n.length?null:Ma(n,f?(f.transcludeOnThisElement||!f.templateOnThisElement)&&f.transclude:b);if(f||l)h.push(r,f,l),p=!0,K=K||f;f=null}return p?g:null}function L(a,b,c){var d=a[b],e=d.parentNode,f;if(d.nodeType===
Ia)for(;;){f=e?d.nextSibling:a[b+1];if(!f||f.nodeType!==Ia)break;d.nodeValue+=f.nodeValue;f.parentNode&&f.parentNode.removeChild(f);c&&f===a[b+1]&&a.splice(b+1,1)}}function ja(a,b,c){function d(e,f,g,h,k){e||(e=a.$new(!1,k),e.$$transcluded=!0);return b(e,f,{parentBoundTranscludeFn:c,transcludeControllers:g,futureParentElement:h})}var e=d.$$slots=V(),f;for(f in b.$$slots)e[f]=b.$$slots[f]?ja(a,b.$$slots[f],c):null;return d}function jc(a,b,c,d,e){var f=c.$attr,g;switch(a.nodeType){case 1:g=wa(a);Y(b,
Ba(g),"E",d,e);for(var k,l,m,n,p=a.attributes,K=0,r=p&&p.length;K<r;K++){var G=!1,E=!1;k=p[K];l=k.name;m=k.value;k=Ba(l);(n=Ja.test(k))&&(l=l.replace(md,"").substr(8).replace(/_(.)/g,function(a,b){return b.toUpperCase()}));(k=k.match(Ka))&&Z(k[1])&&(G=l,E=l.substr(0,l.length-5)+"end",l=l.substr(0,l.length-6));k=Ba(l.toLowerCase());f[k]=l;if(n||!c.hasOwnProperty(k))c[k]=m,id(a,k)&&(c[k]=!0);pa(a,b,m,k,n);Y(b,k,"A",d,e,G,E)}"input"===g&&"hidden"===a.getAttribute("type")&&a.setAttribute("autocomplete",
"off");if(!Ga)break;f=a.className;C(f)&&(f=f.animVal);if(F(f)&&""!==f)for(;a=h.exec(f);)k=Ba(a[2]),Y(b,k,"C",d,e)&&(c[k]=T(a[3])),f=f.substr(a.index+a[0].length);break;case Ia:la(b,a.nodeValue);break;case 8:if(!Fa)break;jb(a,b,c,d,e)}b.sort(ea);return b}function jb(a,b,c,d,e){try{var f=g.exec(a.nodeValue);if(f){var h=Ba(f[1]);Y(b,h,"M",d,e)&&(c[h]=T(f[2]))}}catch(k){}}function nd(a,b,c){var d=[],e=0;if(b&&a.hasAttribute&&a.hasAttribute(b)){do{if(!a)throw fa("uterdir",b,c);1===a.nodeType&&(a.hasAttribute(b)&&
e++,a.hasAttribute(c)&&e--);d.push(a);a=a.nextSibling}while(0<e)}else d.push(a);return B(d)}function od(a,b,c){return function(d,e,f,g,h){e=nd(e[0],b,c);return a(d,e,f,g,h)}}function kc(a,b,c,d,e,f){var g;return a?ca(b,c,d,e,f):function(){g||(g=ca(b,c,d,e,f),b=c=f=null);return g.apply(this,arguments)}}function W(a,b,d,e,f,g,h,k,l){function m(a,b,c,d){if(a){c&&(a=od(a,c,d));a.require=y.require;a.directiveName=P;if(E===y||y.$$isolateScope)a=qa(a,{isolateScope:!0});h.push(a)}if(b){c&&(b=od(b,c,d));b.require=
y.require;b.directiveName=P;if(E===y||y.$$isolateScope)b=qa(b,{isolateScope:!0});k.push(b)}}function n(a,e,f,g,l){function m(a,b,c,d){var e;Za(a)||(d=c,c=b,b=a,a=void 0);X&&(e=O);c||(c=X?P.parent():P);if(d){var f=l.$$slots[d];if(f)return f(a,b,e,c,R);if(w(f))throw fa("noslot",d,xa(P));}else return l(a,b,e,c,R)}var p,y,t,v,J,O,N,P;b===f?(g=d,P=d.$$element):(P=B(f),g=new s(P,d));J=e;E?v=e.$new(!0):K&&(J=e.$parent);l&&(N=m,N.$$boundTransclude=l,N.isSlotFilled=function(a){return!!l.$$slots[a]});G&&(O=
ba(P,g,N,G,v,e,E));E&&(ca.$$addScopeInfo(P,v,!0,!(I&&(I===E||I===E.$$originalDirective))),ca.$$addScopeClass(P,!0),v.$$isolateBindings=E.$$isolateBindings,y=na(e,g,v,v.$$isolateBindings,E),y.removeWatches&&v.$on("$destroy",y.removeWatches));for(p in O){y=G[p];t=O[p];var Hb=y.$$bindings.bindToController;if(r){t.bindingInfo=Hb?na(J,g,t.instance,Hb,y):{};var A=t();A!==t.instance&&(t.instance=A,P.data("$"+y.name+"Controller",A),t.bindingInfo.removeWatches&&t.bindingInfo.removeWatches(),t.bindingInfo=
na(J,g,t.instance,Hb,y))}else t.instance=t(),P.data("$"+y.name+"Controller",t.instance),t.bindingInfo=na(J,g,t.instance,Hb,y)}q(G,function(a,b){var c=a.require;a.bindToController&&!H(c)&&C(c)&&S(O[b].instance,U(b,c,P,O))});q(O,function(a){var b=a.instance;if(D(b.$onChanges))try{b.$onChanges(a.bindingInfo.initialChanges)}catch(d){c(d)}if(D(b.$onInit))try{b.$onInit()}catch(e){c(e)}D(b.$doCheck)&&(J.$watch(function(){b.$doCheck()}),b.$doCheck());D(b.$onDestroy)&&J.$on("$destroy",function(){b.$onDestroy()})});
p=0;for(y=h.length;p<y;p++)t=h[p],ra(t,t.isolateScope?v:e,P,g,t.require&&U(t.directiveName,t.require,P,O),N);var R=e;E&&(E.template||null===E.templateUrl)&&(R=v);a&&a(R,f.childNodes,void 0,l);for(p=k.length-1;0<=p;p--)t=k[p],ra(t,t.isolateScope?v:e,P,g,t.require&&U(t.directiveName,t.require,P,O),N);q(O,function(a){a=a.instance;D(a.$postLink)&&a.$postLink()})}l=l||{};for(var p=-Number.MAX_VALUE,K=l.newScopeDirective,G=l.controllerDirectives,E=l.newIsolateScopeDirective,I=l.templateDirective,t=l.nonTlbTranscludeDirective,
J=!1,O=!1,X=l.hasElementTranscludeDirective,v=d.$$element=B(b),y,P,N,A=e,R,u=!1,La=!1,x,z=0,F=a.length;z<F;z++){y=a[z];var Ma=y.$$start,L=y.$$end;Ma&&(v=nd(b,Ma,L));N=void 0;if(p>y.priority)break;if(x=y.scope)y.templateUrl||(C(x)?($("new/isolated scope",E||K,y,v),E=y):$("new/isolated scope",E,y,v)),K=K||y;P=y.name;if(!u&&(y.replace&&(y.templateUrl||y.template)||y.transclude&&!y.$$tlb)){for(x=z+1;u=a[x++];)if(u.transclude&&!u.$$tlb||u.replace&&(u.templateUrl||u.template)){La=!0;break}u=!0}!y.templateUrl&&
y.controller&&(G=G||V(),$("'"+P+"' controller",G[P],y,v),G[P]=y);if(x=y.transclude)if(J=!0,y.$$tlb||($("transclusion",t,y,v),t=y),"element"===x)X=!0,p=y.priority,N=v,v=d.$$element=B(ca.$$createComment(P,d[P])),b=v[0],ka(f,va.call(N,0),b),N[0].$$parentNode=N[0].parentNode,A=kc(La,N,e,p,g&&g.name,{nonTlbTranscludeDirective:t});else{var ja=V();if(C(x)){N=[];var Q=V(),jb=V();q(x,function(a,b){var c="?"===a.charAt(0);a=c?a.substring(1):a;Q[a]=b;ja[b]=null;jb[b]=c});q(v.contents(),function(a){var b=Q[Ba(wa(a))];
b?(jb[b]=!0,ja[b]=ja[b]||[],ja[b].push(a)):N.push(a)});q(jb,function(a,b){if(!a)throw fa("reqslot",b);});for(var ic in ja)ja[ic]&&(ja[ic]=kc(La,ja[ic],e))}else N=B(fc(b)).contents();v.empty();A=kc(La,N,e,void 0,void 0,{needsNewScope:y.$$isolateScope||y.$$newScope});A.$$slots=ja}if(y.template)if(O=!0,$("template",I,y,v),I=y,x=D(y.template)?y.template(v,d):y.template,x=Ea(x),y.replace){g=y;N=cc.test(x)?pd(ha(y.templateNamespace,T(x))):[];b=N[0];if(1!==N.length||1!==b.nodeType)throw fa("tplrt",P,"");
ka(f,v,b);F={$attr:{}};x=jc(b,[],F);var Y=a.splice(z+1,a.length-(z+1));(E||K)&&aa(x,E,K);a=a.concat(x).concat(Y);da(d,F);F=a.length}else v.html(x);if(y.templateUrl)O=!0,$("template",I,y,v),I=y,y.replace&&(g=y),n=ga(a.splice(z,a.length-z),v,d,f,J&&A,h,k,{controllerDirectives:G,newScopeDirective:K!==y&&K,newIsolateScopeDirective:E,templateDirective:I,nonTlbTranscludeDirective:t}),F=a.length;else if(y.compile)try{R=y.compile(v,d,A);var Z=y.$$originalDirective||y;D(R)?m(null,bb(Z,R),Ma,L):R&&m(bb(Z,R.pre),
bb(Z,R.post),Ma,L)}catch(ea){c(ea,xa(v))}y.terminal&&(n.terminal=!0,p=Math.max(p,y.priority))}n.scope=K&&!0===K.scope;n.transcludeOnThisElement=J;n.templateOnThisElement=O;n.transclude=A;l.hasElementTranscludeDirective=X;return n}function U(a,b,c,d){var e;if(F(b)){var f=b.match(l);b=b.substring(f[0].length);var g=f[1]||f[3],f="?"===f[2];"^^"===g?c=c.parent():e=(e=d&&d[b])&&e.instance;if(!e){var h="$"+b+"Controller";e=g?c.inheritedData(h):c.data(h)}if(!e&&!f)throw fa("ctreq",b,a);}else if(H(b))for(e=
[],g=0,f=b.length;g<f;g++)e[g]=U(a,b[g],c,d);else C(b)&&(e={},q(b,function(b,f){e[f]=U(a,b,c,d)}));return e||null}function ba(a,b,c,d,e,f,g){var h=V(),k;for(k in d){var l=d[k],m={$scope:l===g||l.$$isolateScope?e:f,$element:a,$attrs:b,$transclude:c},n=l.controller;"@"===n&&(n=b[l.name]);m=E(n,m,!0,l.controllerAs);h[l.name]=m;a.data("$"+l.name+"Controller",m.instance)}return h}function aa(a,b,c){for(var d=0,e=a.length;d<e;d++)a[d]=Vb(a[d],{$$isolateScope:b,$$newScope:c})}function Y(b,c,e,g,h,k,l){if(c===
h)return null;var m=null;if(f.hasOwnProperty(c)){h=a.get(c+"Directive");for(var n=0,p=h.length;n<p;n++)if(c=h[n],(w(g)||g>c.priority)&&-1!==c.restrict.indexOf(e)){k&&(c=Vb(c,{$$start:k,$$end:l}));if(!c.$$bindings){var K=m=c,r=c.name,t={isolateScope:null,bindToController:null};C(K.scope)&&(!0===K.bindToController?(t.bindToController=d(K.scope,r,!0),t.isolateScope={}):t.isolateScope=d(K.scope,r,!1));C(K.bindToController)&&(t.bindToController=d(K.bindToController,r,!0));if(t.bindToController&&!K.controller)throw fa("noctrl",
r);m=m.$$bindings=t;C(m.isolateScope)&&(c.$$isolateBindings=m.isolateScope)}b.push(c);m=c}}return m}function Z(b){if(f.hasOwnProperty(b))for(var c=a.get(b+"Directive"),d=0,e=c.length;d<e;d++)if(b=c[d],b.multiElement)return!0;return!1}function da(a,b){var c=b.$attr,d=a.$attr;q(a,function(d,e){"$"!==e.charAt(0)&&(b[e]&&b[e]!==d&&(d=d.length?d+(("style"===e?";":" ")+b[e]):b[e]),a.$set(e,d,!0,c[e]))});q(b,function(b,e){a.hasOwnProperty(e)||"$"===e.charAt(0)||(a[e]=b,"class"!==e&&"style"!==e&&(d[e]=c[e]))})}
function ga(a,b,d,f,g,h,k,l){var m=[],n,p,K=b[0],r=a.shift(),t=Vb(r,{templateUrl:null,transclude:null,replace:null,$$originalDirective:r}),y=D(r.templateUrl)?r.templateUrl(b,d):r.templateUrl,E=r.templateNamespace;b.empty();e(y).then(function(c){var e,G;c=Ea(c);if(r.replace){c=cc.test(c)?pd(ha(E,T(c))):[];e=c[0];if(1!==c.length||1!==e.nodeType)throw fa("tplrt",r.name,y);c={$attr:{}};ka(f,b,e);var I=jc(e,[],c);C(r.scope)&&aa(I,!0);a=I.concat(a);da(d,c)}else e=K,b.html(c);a.unshift(t);n=W(a,e,d,g,b,
r,h,k,l);q(f,function(a,c){a===e&&(f[c]=b[0])});for(p=Ma(b[0].childNodes,g);m.length;){c=m.shift();G=m.shift();var v=m.shift(),J=m.shift(),I=b[0];if(!c.$$destroyed){if(G!==K){var O=G.className;l.hasElementTranscludeDirective&&r.replace||(I=fc(e));ka(v,B(G),I);La(B(I),O)}G=n.transcludeOnThisElement?ja(c,n.transclude,J):J;n(p,c,I,f,G)}}m=null}).catch(function(a){a instanceof Error&&c(a)});return function(a,b,c,d,e){a=e;b.$$destroyed||(m?m.push(b,c,d,a):(n.transcludeOnThisElement&&(a=ja(b,n.transclude,
e)),n(p,b,c,d,a)))}}function ea(a,b){var c=b.priority-a.priority;return 0!==c?c:a.name!==b.name?a.name<b.name?-1:1:a.index-b.index}function $(a,b,c,d){function e(a){return a?" (module: "+a+")":""}if(b)throw fa("multidir",b.name,e(b.$$moduleName),c.name,e(c.$$moduleName),a,xa(d));}function la(a,c){var d=b(c,!0);d&&a.push({priority:0,compile:function(a){a=a.parent();var b=!!a.length;b&&ca.$$addBindingClass(a);return function(a,c){var e=c.parent();b||ca.$$addBindingClass(e);ca.$$addBindingInfo(e,d.expressions);
a.$watch(d,function(a){c[0].nodeValue=a})}}})}function ha(a,b){a=Q(a||"html");switch(a){case "svg":case "math":var c=x.document.createElement("div");c.innerHTML="<"+a+">"+b+"</"+a+">";return c.childNodes[0].childNodes;default:return b}}function oa(a,b){if("srcdoc"===b)return y.HTML;var c=wa(a);if("src"===b||"ngSrc"===b){if(-1===["img","video","audio","source","track"].indexOf(c))return y.RESOURCE_URL}else if("xlinkHref"===b||"form"===c&&"action"===b||"link"===c&&"href"===b)return y.RESOURCE_URL}function pa(a,
c,d,e,f){var g=oa(a,e),h=k[e]||f,l=b(d,!f,g,h);if(l){if("multiple"===e&&"select"===wa(a))throw fa("selmulti",xa(a));if(m.test(e))throw fa("nodomevents");c.push({priority:100,compile:function(){return{pre:function(a,c,f){c=f.$$observers||(f.$$observers=V());var k=f[e];k!==d&&(l=k&&b(k,!0,g,h),d=k);l&&(f[e]=l(a),(c[e]||(c[e]=[])).$$inter=!0,(f.$$observers&&f.$$observers[e].$$scope||a).$watch(l,function(a,b){"class"===e&&a!==b?f.$updateClass(a,b):f.$set(e,a)}))}}}})}}function ka(a,b,c){var d=b[0],e=
b.length,f=d.parentNode,g,h;if(a)for(g=0,h=a.length;g<h;g++)if(a[g]===d){a[g++]=c;h=g+e-1;for(var k=a.length;g<k;g++,h++)h<k?a[g]=a[h]:delete a[g];a.length-=e-1;a.context===d&&(a.context=c);break}f&&f.replaceChild(c,d);a=x.document.createDocumentFragment();for(g=0;g<e;g++)a.appendChild(b[g]);B.hasData(d)&&(B.data(c,B.data(d)),B(d).off("$destroy"));B.cleanData(a.querySelectorAll("*"));for(g=1;g<e;g++)delete b[g];b[0]=c;b.length=1}function qa(a,b){return S(function(){return a.apply(null,arguments)},
a,b)}function ra(a,b,d,e,f,g){try{a(b,d,e,f,g)}catch(h){c(h,xa(d))}}function na(a,c,d,e,f){function g(b,c,e){D(d.$onChanges)&&!Xb(c,e)&&(ia||(a.$$postDigest(P),ia=[]),m||(m={},ia.push(h)),m[b]&&(e=m[b].previousValue),m[b]=new Ib(e,c))}function h(){d.$onChanges(m);m=void 0}var k=[],l={},m;q(e,function(e,h){var m=e.attrName,p=e.optional,r,t,y,G;switch(e.mode){case "@":p||ua.call(c,m)||(d[h]=c[m]=void 0);p=c.$observe(m,function(a){if(F(a)||Ha(a))g(h,a,d[h]),d[h]=a});c.$$observers[m].$$scope=a;r=c[m];
F(r)?d[h]=b(r)(a):Ha(r)&&(d[h]=r);l[h]=new Ib(lc,d[h]);k.push(p);break;case "=":if(!ua.call(c,m)){if(p)break;c[m]=void 0}if(p&&!c[m])break;t=n(c[m]);G=t.literal?sa:Xb;y=t.assign||function(){r=d[h]=t(a);throw fa("nonassign",c[m],m,f.name);};r=d[h]=t(a);p=function(b){G(b,d[h])||(G(b,r)?y(a,b=d[h]):d[h]=b);return r=b};p.$stateful=!0;p=e.collection?a.$watchCollection(c[m],p):a.$watch(n(c[m],p),null,t.literal);k.push(p);break;case "<":if(!ua.call(c,m)){if(p)break;c[m]=void 0}if(p&&!c[m])break;t=n(c[m]);
var E=t.literal,I=d[h]=t(a);l[h]=new Ib(lc,d[h]);p=a.$watch(t,function(a,b){if(b===a){if(b===I||E&&sa(b,I))return;b=I}g(h,a,b);d[h]=a},E);k.push(p);break;case "&":t=c.hasOwnProperty(m)?n(c[m]):z;if(t===z&&p)break;d[h]=function(b){return t(a,b)}}});return{initialChanges:l,removeWatches:k.length&&function(){for(var a=0,b=k.length;a<b;++a)k[a]()}}}var Ca=/^\w/,ta=x.document.createElement("div"),Fa=v,Ga=t,ya=J,ia;s.prototype={$normalize:Ba,$addClass:function(a){a&&0<a.length&&O.addClass(this.$$element,
a)},$removeClass:function(a){a&&0<a.length&&O.removeClass(this.$$element,a)},$updateClass:function(a,b){var c=qd(a,b);c&&c.length&&O.addClass(this.$$element,c);(c=qd(b,a))&&c.length&&O.removeClass(this.$$element,c)},$set:function(a,b,d,e){var f=id(this.$$element[0],a),g=rd[a],h=a;f?(this.$$element.prop(a,b),e=f):g&&(this[g]=b,h=g);this[a]=b;e?this.$attr[a]=e:(e=this.$attr[a])||(this.$attr[a]=e=Tc(a,"-"));f=wa(this.$$element);if("a"===f&&("href"===a||"xlinkHref"===a)||"img"===f&&"src"===a)this[a]=
b=X(b,"src"===a);else if("img"===f&&"srcset"===a&&u(b)){for(var f="",g=T(b),k=/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/,k=/\s/.test(g)?k:/(,)/,g=g.split(k),k=Math.floor(g.length/2),l=0;l<k;l++)var m=2*l,f=f+X(T(g[m]),!0),f=f+(" "+T(g[m+1]));g=T(g[2*l]).split(/\s/);f+=X(T(g[0]),!0);2===g.length&&(f+=" "+T(g[1]));this[a]=b=f}!1!==d&&(null===b||w(b)?this.$$element.removeAttr(e):Ca.test(e)?this.$$element.attr(e,b):R(this.$$element[0],e,b));(a=this.$$observers)&&q(a[h],function(a){try{a(b)}catch(d){c(d)}})},
$observe:function(a,b){var c=this,d=c.$$observers||(c.$$observers=V()),e=d[a]||(d[a]=[]);e.push(b);G.$evalAsync(function(){e.$$inter||!c.hasOwnProperty(a)||w(c[a])||b(c[a])});return function(){$a(e,b)}}};var Aa=b.startSymbol(),Da=b.endSymbol(),Ea="{{"===Aa&&"}}"===Da?Ya:function(a){return a.replace(/\{\{/g,Aa).replace(/}}/g,Da)},Ja=/^ngAttr[A-Z]/,Ka=/^(.+)Start$/;ca.$$addBindingInfo=p?function(a,b){var c=a.data("$binding")||[];H(b)?c=c.concat(b):c.push(b);a.data("$binding",c)}:z;ca.$$addBindingClass=
p?function(a){La(a,"ng-binding")}:z;ca.$$addScopeInfo=p?function(a,b,c,d){a.data(c?d?"$isolateScopeNoTemplate":"$isolateScope":"$scope",b)}:z;ca.$$addScopeClass=p?function(a,b){La(a,b?"ng-isolate-scope":"ng-scope")}:z;ca.$$createComment=function(a,b){var c="";p&&(c=" "+(a||"")+": ",b&&(c+=b+" "));return x.document.createComment(c)};return ca}]}function Ib(a,b){this.previousValue=a;this.currentValue=b}function Ba(a){return a.replace(md,"").replace(rg,gb)}function qd(a,b){var d="",c=a.split(/\s+/),
e=b.split(/\s+/),f=0;a:for(;f<c.length;f++){for(var g=c[f],h=0;h<e.length;h++)if(g===e[h])continue a;d+=(0<d.length?" ":"")+g}return d}function pd(a){a=B(a);var b=a.length;if(1>=b)return a;for(;b--;){var d=a[b];(8===d.nodeType||d.nodeType===Ia&&""===d.nodeValue.trim())&&sg.call(a,b,1)}return a}function qg(a,b){if(b&&F(b))return b;if(F(a)){var d=sd.exec(a);if(d)return d[3]}}function wf(){var a={},b=!1;this.has=function(b){return a.hasOwnProperty(b)};this.register=function(b,c){Ka(b,"controller");C(b)?
S(a,b):a[b]=c};this.allowGlobals=function(){b=!0};this.$get=["$injector","$window",function(d,c){function e(a,b,c,d){if(!a||!C(a.$scope))throw L("$controller")("noscp",d,b);a.$scope[b]=c}return function(f,g,h,k){var l,m,n;h=!0===h;k&&F(k)&&(n=k);if(F(f)){k=f.match(sd);if(!k)throw td("ctrlfmt",f);m=k[1];n=n||k[3];f=a.hasOwnProperty(m)?a[m]:Vc(g.$scope,m,!0)||(b?Vc(c,m,!0):void 0);if(!f)throw td("ctrlreg",m);sb(f,m,!0)}if(h)return h=(H(f)?f[f.length-1]:f).prototype,l=Object.create(h||null),n&&e(g,n,
l,m||f.name),S(function(){var a=d.invoke(f,l,g,m);a!==l&&(C(a)||D(a))&&(l=a,n&&e(g,n,l,m||f.name));return l},{instance:l,identifier:n});l=d.instantiate(f,g,m);n&&e(g,n,l,m||f.name);return l}}]}function xf(){this.$get=["$window",function(a){return B(a.document)}]}function yf(){this.$get=["$document","$rootScope",function(a,b){function d(){e=c.hidden}var c=a[0],e=c&&c.hidden;a.on("visibilitychange",d);b.$on("$destroy",function(){a.off("visibilitychange",d)});return function(){return e}}]}function zf(){this.$get=
["$log",function(a){return function(b,d){a.error.apply(a,arguments)}}]}function mc(a){return C(a)?ga(a)?a.toISOString():cb(a):a}function Ef(){this.$get=function(){return function(a){if(!a)return"";var b=[];Kc(a,function(a,c){null===a||w(a)||(H(a)?q(a,function(a){b.push($(c)+"="+$(mc(a)))}):b.push($(c)+"="+$(mc(a))))});return b.join("&")}}}function Ff(){this.$get=function(){return function(a){function b(a,e,f){null===a||w(a)||(H(a)?q(a,function(a,c){b(a,e+"["+(C(a)?c:"")+"]")}):C(a)&&!ga(a)?Kc(a,function(a,
c){b(a,e+(f?"":"[")+c+(f?"":"]"))}):d.push($(e)+"="+$(mc(a))))}if(!a)return"";var d=[];b(a,"",!0);return d.join("&")}}}function nc(a,b){if(F(a)){var d=a.replace(tg,"").trim();if(d){var c=b("Content-Type");(c=c&&0===c.indexOf(ud))||(c=(c=d.match(ug))&&vg[c[0]].test(d));if(c)try{a=Oc(d)}catch(e){throw oc("baddata",a,e);}}}return a}function vd(a){var b=V(),d;F(a)?q(a.split("\n"),function(a){d=a.indexOf(":");var e=Q(T(a.substr(0,d)));a=T(a.substr(d+1));e&&(b[e]=b[e]?b[e]+", "+a:a)}):C(a)&&q(a,function(a,
d){var f=Q(d),g=T(a);f&&(b[f]=b[f]?b[f]+", "+g:g)});return b}function wd(a){var b;return function(d){b||(b=vd(a));return d?(d=b[Q(d)],void 0===d&&(d=null),d):b}}function xd(a,b,d,c){if(D(c))return c(a,b,d);q(c,function(c){a=c(a,b,d)});return a}function Df(){var a=this.defaults={transformResponse:[nc],transformRequest:[function(a){return C(a)&&"[object File]"!==ma.call(a)&&"[object Blob]"!==ma.call(a)&&"[object FormData]"!==ma.call(a)?cb(a):a}],headers:{common:{Accept:"application/json, text/plain, */*"},
post:pa(pc),put:pa(pc),patch:pa(pc)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",paramSerializer:"$httpParamSerializer",jsonpCallbackParam:"callback"},b=!1;this.useApplyAsync=function(a){return u(a)?(b=!!a,this):b};var d=this.interceptors=[];this.$get=["$browser","$httpBackend","$$cookieReader","$cacheFactory","$rootScope","$q","$injector","$sce",function(c,e,f,g,h,k,l,m){function n(b){function d(a,b){for(var c=0,e=b.length;c<e;){var f=b[c++],g=b[c++];a=a.then(f,g)}b.length=0;return a}
function e(a,b){var c,d={};q(a,function(a,e){D(a)?(c=a(b),null!=c&&(d[e]=c)):d[e]=a});return d}function f(a){var b=S({},a);b.data=xd(a.data,a.headers,a.status,g.transformResponse);a=a.status;return 200<=a&&300>a?b:k.reject(b)}if(!C(b))throw L("$http")("badreq",b);if(!F(m.valueOf(b.url)))throw L("$http")("badreq",b.url);var g=S({method:"get",transformRequest:a.transformRequest,transformResponse:a.transformResponse,paramSerializer:a.paramSerializer,jsonpCallbackParam:a.jsonpCallbackParam},b);g.headers=
function(b){var c=a.headers,d=S({},b.headers),f,g,h,c=S({},c.common,c[Q(b.method)]);a:for(f in c){g=Q(f);for(h in d)if(Q(h)===g)continue a;d[f]=c[f]}return e(d,pa(b))}(b);g.method=ub(g.method);g.paramSerializer=F(g.paramSerializer)?l.get(g.paramSerializer):g.paramSerializer;c.$$incOutstandingRequestCount();var h=[],n=[];b=k.resolve(g);q(t,function(a){(a.request||a.requestError)&&h.unshift(a.request,a.requestError);(a.response||a.responseError)&&n.push(a.response,a.responseError)});b=d(b,h);b=b.then(function(b){var c=
b.headers,d=xd(b.data,wd(c),void 0,b.transformRequest);w(d)&&q(c,function(a,b){"content-type"===Q(b)&&delete c[b]});w(b.withCredentials)&&!w(a.withCredentials)&&(b.withCredentials=a.withCredentials);return p(b,d).then(f,f)});b=d(b,n);return b=b.finally(function(){c.$$completeOutstandingRequest(z)})}function p(c,d){function g(a){if(a){var c={};q(a,function(a,d){c[d]=function(c){function d(){a(c)}b?h.$applyAsync(d):h.$$phase?d():h.$apply(d)}});return c}}function l(a,c,d,e){function f(){p(c,a,d,e)}O&&
(200<=a&&300>a?O.put(R,[a,c,vd(d),e]):O.remove(R));b?h.$applyAsync(f):(f(),h.$$phase||h.$apply())}function p(a,b,d,e){b=-1<=b?b:0;(200<=b&&300>b?G.resolve:G.reject)({data:a,status:b,headers:wd(d),config:c,statusText:e})}function K(a){p(a.data,a.status,pa(a.headers()),a.statusText)}function t(){var a=n.pendingRequests.indexOf(c);-1!==a&&n.pendingRequests.splice(a,1)}var G=k.defer(),y=G.promise,O,X,P=c.headers,s="jsonp"===Q(c.method),R=c.url;s?R=m.getTrustedResourceUrl(R):F(R)||(R=m.valueOf(R));R=r(R,
c.paramSerializer(c.params));s&&(R=J(R,c.jsonpCallbackParam));n.pendingRequests.push(c);y.then(t,t);!c.cache&&!a.cache||!1===c.cache||"GET"!==c.method&&"JSONP"!==c.method||(O=C(c.cache)?c.cache:C(a.cache)?a.cache:v);O&&(X=O.get(R),u(X)?X&&D(X.then)?X.then(K,K):H(X)?p(X[1],X[0],pa(X[2]),X[3]):p(X,200,{},"OK"):O.put(R,y));w(X)&&((X=yd(c.url)?f()[c.xsrfCookieName||a.xsrfCookieName]:void 0)&&(P[c.xsrfHeaderName||a.xsrfHeaderName]=X),e(c.method,R,d,l,P,c.timeout,c.withCredentials,c.responseType,g(c.eventHandlers),
g(c.uploadEventHandlers)));return y}function r(a,b){0<b.length&&(a+=(-1===a.indexOf("?")?"?":"&")+b);return a}function J(a,b){if(/[&?][^=]+=JSON_CALLBACK/.test(a))throw oc("badjsonp",a);if((new RegExp("[&?]"+b+"=")).test(a))throw oc("badjsonp",b,a);return a+=(-1===a.indexOf("?")?"?":"&")+b+"=JSON_CALLBACK"}var v=g("$http");a.paramSerializer=F(a.paramSerializer)?l.get(a.paramSerializer):a.paramSerializer;var t=[];q(d,function(a){t.unshift(F(a)?l.get(a):l.invoke(a))});n.pendingRequests=[];(function(a){q(arguments,
function(a){n[a]=function(b,c){return n(S({},c||{},{method:a,url:b}))}})})("get","delete","head","jsonp");(function(a){q(arguments,function(a){n[a]=function(b,c,d){return n(S({},d||{},{method:a,url:b,data:c}))}})})("post","put","patch");n.defaults=a;return n}]}function Hf(){this.$get=function(){return function(){return new x.XMLHttpRequest}}}function Gf(){this.$get=["$browser","$jsonpCallbacks","$document","$xhrFactory",function(a,b,d,c){return wg(a,c,a.defer,b,d[0])}]}function wg(a,b,d,c,e){function f(a,
b,d){a=a.replace("JSON_CALLBACK",b);var f=e.createElement("script"),m=null;f.type="text/javascript";f.src=a;f.async=!0;m=function(a){f.removeEventListener("load",m);f.removeEventListener("error",m);e.body.removeChild(f);f=null;var g=-1,r="unknown";a&&("load"!==a.type||c.wasCalled(b)||(a={type:"error"}),r=a.type,g="error"===a.type?404:200);d&&d(g,r)};f.addEventListener("load",m);f.addEventListener("error",m);e.body.appendChild(f);return m}return function(e,h,k,l,m,n,p,r,J,v){function t(){N&&N();A&&
A.abort()}h=h||a.url();if("jsonp"===Q(e))var M=c.createCallback(h),N=f(h,M,function(a,b){var e=200===a&&c.getResponse(M);u(I)&&d.cancel(I);N=A=null;l(a,e,"",b);c.removeCallback(M)});else{var A=b(e,h);A.open(e,h,!0);q(m,function(a,b){u(a)&&A.setRequestHeader(b,a)});A.onload=function(){var a=A.statusText||"",b="response"in A?A.response:A.responseText,c=1223===A.status?204:A.status;0===c&&(c=b?200:"file"===Ca(h).protocol?404:0);var e=A.getAllResponseHeaders();u(I)&&d.cancel(I);N=A=null;l(c,b,e,a)};e=
function(){u(I)&&d.cancel(I);N=A=null;l(-1,null,null,"")};A.onerror=e;A.onabort=e;A.ontimeout=e;q(J,function(a,b){A.addEventListener(b,a)});q(v,function(a,b){A.upload.addEventListener(b,a)});p&&(A.withCredentials=!0);if(r)try{A.responseType=r}catch(s){if("json"!==r)throw s;}A.send(w(k)?null:k)}if(0<n)var I=d(t,n);else n&&D(n.then)&&n.then(t)}}function Bf(){var a="{{",b="}}";this.startSymbol=function(b){return b?(a=b,this):a};this.endSymbol=function(a){return a?(b=a,this):b};this.$get=["$parse","$exceptionHandler",
"$sce",function(d,c,e){function f(a){return"\\\\\\"+a}function g(c){return c.replace(n,a).replace(p,b)}function h(a,b,c,d){var e=a.$watch(function(a){e();return d(a)},b,c);return e}function k(f,k,n,p){function M(a){try{var b=a;a=n?e.getTrusted(n,b):e.valueOf(b);return p&&!u(a)?a:$b(a)}catch(d){c(Da.interr(f,d))}}if(!f.length||-1===f.indexOf(a)){var q;k||(k=g(f),q=la(k),q.exp=f,q.expressions=[],q.$$watchDelegate=h);return q}p=!!p;var A,s,I=0,K=[],E=[];q=f.length;for(var G=[],y=[];I<q;)if(-1!==(A=f.indexOf(a,
I))&&-1!==(s=f.indexOf(b,A+l)))I!==A&&G.push(g(f.substring(I,A))),I=f.substring(A+l,s),K.push(I),E.push(d(I,M)),I=s+m,y.push(G.length),G.push("");else{I!==q&&G.push(g(f.substring(I)));break}n&&1<G.length&&Da.throwNoconcat(f);if(!k||K.length){var O=function(a){for(var b=0,c=K.length;b<c;b++){if(p&&w(a[b]))return;G[y[b]]=a[b]}return G.join("")};return S(function(a){var b=0,d=K.length,e=Array(d);try{for(;b<d;b++)e[b]=E[b](a);return O(e)}catch(g){c(Da.interr(f,g))}},{exp:f,expressions:K,$$watchDelegate:function(a,
b){var c;return a.$watchGroup(E,function(d,e){var f=O(d);D(b)&&b.call(this,f,d!==e?c:f,a);c=f})}})}}var l=a.length,m=b.length,n=new RegExp(a.replace(/./g,f),"g"),p=new RegExp(b.replace(/./g,f),"g");k.startSymbol=function(){return a};k.endSymbol=function(){return b};return k}]}function Cf(){this.$get=["$rootScope","$window","$q","$$q","$browser",function(a,b,d,c,e){function f(f,k,l,m){function n(){p?f.apply(null,r):f(t)}var p=4<arguments.length,r=p?va.call(arguments,4):[],J=b.setInterval,v=b.clearInterval,
t=0,M=u(m)&&!m,q=(M?c:d).defer(),A=q.promise;l=u(l)?l:0;A.$$intervalId=J(function(){M?e.defer(n):a.$evalAsync(n);q.notify(t++);0<l&&t>=l&&(q.resolve(t),v(A.$$intervalId),delete g[A.$$intervalId]);M||a.$apply()},k);g[A.$$intervalId]=q;return A}var g={};f.cancel=function(a){return a&&a.$$intervalId in g?(g[a.$$intervalId].promise.catch(z),g[a.$$intervalId].reject("canceled"),b.clearInterval(a.$$intervalId),delete g[a.$$intervalId],!0):!1};return f}]}function qc(a){a=a.split("/");for(var b=a.length;b--;)a[b]=
db(a[b]);return a.join("/")}function zd(a,b){var d=Ca(a);b.$$protocol=d.protocol;b.$$host=d.hostname;b.$$port=Z(d.port)||xg[d.protocol]||null}function Ad(a,b){if(yg.test(a))throw kb("badpath",a);var d="/"!==a.charAt(0);d&&(a="/"+a);var c=Ca(a);b.$$path=decodeURIComponent(d&&"/"===c.pathname.charAt(0)?c.pathname.substring(1):c.pathname);b.$$search=Rc(c.search);b.$$hash=decodeURIComponent(c.hash);b.$$path&&"/"!==b.$$path.charAt(0)&&(b.$$path="/"+b.$$path)}function rc(a,b){return a.slice(0,b.length)===
b}function ka(a,b){if(rc(b,a))return b.substr(a.length)}function Aa(a){var b=a.indexOf("#");return-1===b?a:a.substr(0,b)}function lb(a){return a.replace(/(#.+)|#$/,"$1")}function sc(a,b,d){this.$$html5=!0;d=d||"";zd(a,this);this.$$parse=function(a){var d=ka(b,a);if(!F(d))throw kb("ipthprfx",a,b);Ad(d,this);this.$$path||(this.$$path="/");this.$$compose()};this.$$compose=function(){var a=Zb(this.$$search),d=this.$$hash?"#"+db(this.$$hash):"";this.$$url=qc(this.$$path)+(a?"?"+a:"")+d;this.$$absUrl=b+
this.$$url.substr(1);this.$$urlUpdatedByLocation=!0};this.$$parseLinkUrl=function(c,e){if(e&&"#"===e[0])return this.hash(e.slice(1)),!0;var f,g;u(f=ka(a,c))?(g=f,g=d&&u(f=ka(d,f))?b+(ka("/",f)||f):a+g):u(f=ka(b,c))?g=b+f:b===c+"/"&&(g=b);g&&this.$$parse(g);return!!g}}function tc(a,b,d){zd(a,this);this.$$parse=function(c){var e=ka(a,c)||ka(b,c),f;w(e)||"#"!==e.charAt(0)?this.$$html5?f=e:(f="",w(e)&&(a=c,this.replace())):(f=ka(d,e),w(f)&&(f=e));Ad(f,this);c=this.$$path;var e=a,g=/^\/[A-Z]:(\/.*)/;rc(f,
e)&&(f=f.replace(e,""));g.exec(f)||(c=(f=g.exec(c))?f[1]:c);this.$$path=c;this.$$compose()};this.$$compose=function(){var b=Zb(this.$$search),e=this.$$hash?"#"+db(this.$$hash):"";this.$$url=qc(this.$$path)+(b?"?"+b:"")+e;this.$$absUrl=a+(this.$$url?d+this.$$url:"");this.$$urlUpdatedByLocation=!0};this.$$parseLinkUrl=function(b,d){return Aa(a)===Aa(b)?(this.$$parse(b),!0):!1}}function Bd(a,b,d){this.$$html5=!0;tc.apply(this,arguments);this.$$parseLinkUrl=function(c,e){if(e&&"#"===e[0])return this.hash(e.slice(1)),
!0;var f,g;a===Aa(c)?f=c:(g=ka(b,c))?f=a+d+g:b===c+"/"&&(f=b);f&&this.$$parse(f);return!!f};this.$$compose=function(){var b=Zb(this.$$search),e=this.$$hash?"#"+db(this.$$hash):"";this.$$url=qc(this.$$path)+(b?"?"+b:"")+e;this.$$absUrl=a+d+this.$$url;this.$$urlUpdatedByLocation=!0}}function Jb(a){return function(){return this[a]}}function Cd(a,b){return function(d){if(w(d))return this[a];this[a]=b(d);this.$$compose();return this}}function Jf(){var a="!",b={enabled:!1,requireBase:!0,rewriteLinks:!0};
this.hashPrefix=function(b){return u(b)?(a=b,this):a};this.html5Mode=function(a){if(Ha(a))return b.enabled=a,this;if(C(a)){Ha(a.enabled)&&(b.enabled=a.enabled);Ha(a.requireBase)&&(b.requireBase=a.requireBase);if(Ha(a.rewriteLinks)||F(a.rewriteLinks))b.rewriteLinks=a.rewriteLinks;return this}return b};this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function(d,c,e,f,g){function h(a,b,d){var e=l.url(),f=l.$$state;try{c.url(a,b,d),l.$$state=c.state()}catch(g){throw l.url(e),l.$$state=
f,g;}}function k(a,b){d.$broadcast("$locationChangeSuccess",l.absUrl(),a,l.$$state,b)}var l,m;m=c.baseHref();var n=c.url(),p;if(b.enabled){if(!m&&b.requireBase)throw kb("nobase");p=n.substring(0,n.indexOf("/",n.indexOf("//")+2))+(m||"/");m=e.history?sc:Bd}else p=Aa(n),m=tc;var r=p.substr(0,Aa(p).lastIndexOf("/")+1);l=new m(p,r,"#"+a);l.$$parseLinkUrl(n,n);l.$$state=c.state();var J=/^\s*(javascript|mailto):/i;f.on("click",function(a){var e=b.rewriteLinks;if(e&&!a.ctrlKey&&!a.metaKey&&!a.shiftKey&&
2!==a.which&&2!==a.button){for(var h=B(a.target);"a"!==wa(h[0]);)if(h[0]===f[0]||!(h=h.parent())[0])return;if(!F(e)||!w(h.attr(e))){var e=h.prop("href"),k=h.attr("href")||h.attr("xlink:href");C(e)&&"[object SVGAnimatedString]"===e.toString()&&(e=Ca(e.animVal).href);J.test(e)||!e||h.attr("target")||a.isDefaultPrevented()||!l.$$parseLinkUrl(e,k)||(a.preventDefault(),l.absUrl()!==c.url()&&(d.$apply(),g.angular["ff-684208-preventDefault"]=!0))}}});lb(l.absUrl())!==lb(n)&&c.url(l.absUrl(),!0);var v=!0;
c.onUrlChange(function(a,b){rc(a,r)?(d.$evalAsync(function(){var c=l.absUrl(),e=l.$$state,f;a=lb(a);l.$$parse(a);l.$$state=b;f=d.$broadcast("$locationChangeStart",a,c,b,e).defaultPrevented;l.absUrl()===a&&(f?(l.$$parse(c),l.$$state=e,h(c,!1,e)):(v=!1,k(c,e)))}),d.$$phase||d.$digest()):g.location.href=a});d.$watch(function(){if(v||l.$$urlUpdatedByLocation){l.$$urlUpdatedByLocation=!1;var a=lb(c.url()),b=lb(l.absUrl()),f=c.state(),g=l.$$replace,m=a!==b||l.$$html5&&e.history&&f!==l.$$state;if(v||m)v=
!1,d.$evalAsync(function(){var b=l.absUrl(),c=d.$broadcast("$locationChangeStart",b,a,l.$$state,f).defaultPrevented;l.absUrl()===b&&(c?(l.$$parse(a),l.$$state=f):(m&&h(b,g,f===l.$$state?null:l.$$state),k(a,f)))})}l.$$replace=!1});return l}]}function Kf(){var a=!0,b=this;this.debugEnabled=function(b){return u(b)?(a=b,this):a};this.$get=["$window",function(d){function c(a){a instanceof Error&&(a.stack&&f?a=a.message&&-1===a.stack.indexOf(a.message)?"Error: "+a.message+"\n"+a.stack:a.stack:a.sourceURL&&
(a=a.message+"\n"+a.sourceURL+":"+a.line));return a}function e(a){var b=d.console||{},e=b[a]||b.log||z;a=!1;try{a=!!e.apply}catch(f){}return a?function(){var a=[];q(arguments,function(b){a.push(c(b))});return e.apply(b,a)}:function(a,b){e(a,null==b?"":b)}}var f=za||/\bEdge\//.test(d.navigator&&d.navigator.userAgent);return{log:e("log"),info:e("info"),warn:e("warn"),error:e("error"),debug:function(){var c=e("debug");return function(){a&&c.apply(b,arguments)}}()}}]}function zg(a){return a+""}function Ag(a,
b){return"undefined"!==typeof a?a:b}function Dd(a,b){return"undefined"===typeof a?b:"undefined"===typeof b?a:a+b}function U(a,b){var d,c,e;switch(a.type){case s.Program:d=!0;q(a.body,function(a){U(a.expression,b);d=d&&a.expression.constant});a.constant=d;break;case s.Literal:a.constant=!0;a.toWatch=[];break;case s.UnaryExpression:U(a.argument,b);a.constant=a.argument.constant;a.toWatch=a.argument.toWatch;break;case s.BinaryExpression:U(a.left,b);U(a.right,b);a.constant=a.left.constant&&a.right.constant;
a.toWatch=a.left.toWatch.concat(a.right.toWatch);break;case s.LogicalExpression:U(a.left,b);U(a.right,b);a.constant=a.left.constant&&a.right.constant;a.toWatch=a.constant?[]:[a];break;case s.ConditionalExpression:U(a.test,b);U(a.alternate,b);U(a.consequent,b);a.constant=a.test.constant&&a.alternate.constant&&a.consequent.constant;a.toWatch=a.constant?[]:[a];break;case s.Identifier:a.constant=!1;a.toWatch=[a];break;case s.MemberExpression:U(a.object,b);a.computed&&U(a.property,b);a.constant=a.object.constant&&
(!a.computed||a.property.constant);a.toWatch=[a];break;case s.CallExpression:d=e=a.filter?!b(a.callee.name).$stateful:!1;c=[];q(a.arguments,function(a){U(a,b);d=d&&a.constant;a.constant||c.push.apply(c,a.toWatch)});a.constant=d;a.toWatch=e?c:[a];break;case s.AssignmentExpression:U(a.left,b);U(a.right,b);a.constant=a.left.constant&&a.right.constant;a.toWatch=[a];break;case s.ArrayExpression:d=!0;c=[];q(a.elements,function(a){U(a,b);d=d&&a.constant;a.constant||c.push.apply(c,a.toWatch)});a.constant=
d;a.toWatch=c;break;case s.ObjectExpression:d=!0;c=[];q(a.properties,function(a){U(a.value,b);d=d&&a.value.constant&&!a.computed;a.value.constant||c.push.apply(c,a.value.toWatch);a.computed&&(U(a.key,b),a.key.constant||c.push.apply(c,a.key.toWatch))});a.constant=d;a.toWatch=c;break;case s.ThisExpression:a.constant=!1;a.toWatch=[];break;case s.LocalsExpression:a.constant=!1,a.toWatch=[]}}function Ed(a){if(1===a.length){a=a[0].expression;var b=a.toWatch;return 1!==b.length?b:b[0]!==a?b:void 0}}function Fd(a){return a.type===
s.Identifier||a.type===s.MemberExpression}function Gd(a){if(1===a.body.length&&Fd(a.body[0].expression))return{type:s.AssignmentExpression,left:a.body[0].expression,right:{type:s.NGValueParameter},operator:"="}}function Hd(a){this.$filter=a}function Id(a){this.$filter=a}function uc(a,b,d){this.ast=new s(a,d);this.astCompiler=d.csp?new Id(b):new Hd(b)}function vc(a){return D(a.valueOf)?a.valueOf():Bg.call(a)}function Lf(){var a=V(),b={"true":!0,"false":!1,"null":null,undefined:void 0},d,c;this.addLiteral=
function(a,c){b[a]=c};this.setIdentifierFns=function(a,b){d=a;c=b;return this};this.$get=["$filter",function(e){function f(a,b,c){return null==a||null==b?a===b:"object"!==typeof a||(a=vc(a),"object"!==typeof a||c)?a===b||a!==a&&b!==b:!1}function g(a,b,c,d,e){var g=d.inputs,h;if(1===g.length){var k=f,g=g[0];return a.$watch(function(a){var b=g(a);f(b,k,d.literal)||(h=d(a,void 0,void 0,[b]),k=b&&vc(b));return h},b,c,e)}for(var l=[],m=[],n=0,E=g.length;n<E;n++)l[n]=f,m[n]=null;return a.$watch(function(a){for(var b=
!1,c=0,e=g.length;c<e;c++){var k=g[c](a);if(b||(b=!f(k,l[c],d.literal)))m[c]=k,l[c]=k&&vc(k)}b&&(h=d(a,void 0,void 0,m));return h},b,c,e)}function h(a,b,c,d,e){function f(a){return d(a)}function h(a,c,d){n=a;D(b)&&b(a,c,d);l(a)&&d.$$postDigest(function(){l(n)&&m()})}var l=d.literal?k:u,m,n;return m=d.inputs?g(a,h,c,d,e):a.$watch(f,h,c)}function k(a){var b=!0;q(a,function(a){u(a)||(b=!1)});return b}function l(a,b,c,d){var e=a.$watch(function(a){e();return d(a)},b,c);return e}function m(a,b){function c(d,
e,g,h){g=f&&h?h[0]:a(d,e,g,h);return b(g,d,e)}function d(c,e,g,k){g=f&&k?k[0]:a(c,e,g,k);c=b(g,c,e);return h(g)?c:g}if(!b)return a;var e=a.$$watchDelegate,f=!1,h=a.literal?k:u,l=a.oneTime?d:c;l.literal=a.literal;l.oneTime=a.oneTime;f=!a.inputs;e&&e!==g?(l.$$watchDelegate=e,l.inputs=a.inputs):b.$stateful||(l.$$watchDelegate=g,l.inputs=a.inputs?a.inputs:[a]);return l}var n={csp:Ga().noUnsafeEval,literals:ra(b),isIdentifierStart:D(d)&&d,isIdentifierContinue:D(c)&&c};return function(b,c){var d,f,k;switch(typeof b){case "string":return k=
b=b.trim(),d=a[k],d||(":"===b.charAt(0)&&":"===b.charAt(1)&&(f=!0,b=b.substring(2)),d=new wc(n),d=(new uc(d,e,n)).parse(b),d.constant?d.$$watchDelegate=l:f?(d.oneTime=!0,d.$$watchDelegate=h):d.inputs&&(d.$$watchDelegate=g),a[k]=d),m(d,c);case "function":return m(b,c);default:return m(z,c)}}}]}function Nf(){var a=!0;this.$get=["$rootScope","$exceptionHandler",function(b,d){return Jd(function(a){b.$evalAsync(a)},d,a)}];this.errorOnUnhandledRejections=function(b){return u(b)?(a=b,this):a}}function Of(){var a=
!0;this.$get=["$browser","$exceptionHandler",function(b,d){return Jd(function(a){b.defer(a)},d,a)}];this.errorOnUnhandledRejections=function(b){return u(b)?(a=b,this):a}}function Jd(a,b,d){function c(){return new e}function e(){var a=this.promise=new f;this.resolve=function(b){k(a,b)};this.reject=function(b){m(a,b)};this.notify=function(b){p(a,b)}}function f(){this.$$state={status:0}}function g(){for(;!s&&A.length;){var a=A.shift();if(!a.pur){a.pur=!0;var c=a.value,c="Possibly unhandled rejection: "+
("function"===typeof c?c.toString().replace(/ \{[\s\S]*$/,""):w(c)?"undefined":"string"!==typeof c?Be(c,void 0):c);a.value instanceof Error?b(a.value,c):b(c)}}}function h(b){!d||b.pending||2!==b.status||b.pur||(0===s&&0===A.length&&a(g),A.push(b));!b.processScheduled&&b.pending&&(b.processScheduled=!0,++s,a(function(){var c,e,f;f=b.pending;b.processScheduled=!1;b.pending=void 0;try{for(var h=0,l=f.length;h<l;++h){b.pur=!0;e=f[h][0];c=f[h][b.status];try{D(c)?k(e,c(b.value)):1===b.status?k(e,b.value):
m(e,b.value)}catch(n){m(e,n)}}}finally{--s,d&&0===s&&a(g)}}))}function k(a,b){a.$$state.status||(b===a?n(a,M("qcycle",b)):l(a,b))}function l(a,b){function c(b){g||(g=!0,l(a,b))}function d(b){g||(g=!0,n(a,b))}function e(b){p(a,b)}var f,g=!1;try{if(C(b)||D(b))f=b.then;D(f)?(a.$$state.status=-1,f.call(b,c,d,e)):(a.$$state.value=b,a.$$state.status=1,h(a.$$state))}catch(k){d(k)}}function m(a,b){a.$$state.status||n(a,b)}function n(a,b){a.$$state.value=b;a.$$state.status=2;h(a.$$state)}function p(c,d){var e=
c.$$state.pending;0>=c.$$state.status&&e&&e.length&&a(function(){for(var a,c,f=0,g=e.length;f<g;f++){c=e[f][0];a=e[f][3];try{p(c,D(a)?a(d):d)}catch(h){b(h)}}})}function r(a){var b=new f;m(b,a);return b}function J(a,b,c){var d=null;try{D(c)&&(d=c())}catch(e){return r(e)}return d&&D(d.then)?d.then(function(){return b(a)},r):b(a)}function v(a,b,c,d){var e=new f;k(e,a);return e.then(b,c,d)}function t(a){if(!D(a))throw M("norslvr",a);var b=new f;a(function(a){k(b,a)},function(a){m(b,a)});return b}var M=
L("$q",TypeError),s=0,A=[];S(f.prototype,{then:function(a,b,c){if(w(a)&&w(b)&&w(c))return this;var d=new f;this.$$state.pending=this.$$state.pending||[];this.$$state.pending.push([d,a,b,c]);0<this.$$state.status&&h(this.$$state);return d},"catch":function(a){return this.then(null,a)},"finally":function(a,b){return this.then(function(b){return J(b,u,a)},function(b){return J(b,r,a)},b)}});var u=v;t.prototype=f.prototype;t.defer=c;t.reject=r;t.when=v;t.resolve=u;t.all=function(a){var b=new f,c=0,d=H(a)?
[]:{};q(a,function(a,e){c++;v(a).then(function(a){d[e]=a;--c||k(b,d)},function(a){m(b,a)})});0===c&&k(b,d);return b};t.race=function(a){var b=c();q(a,function(a){v(a).then(b.resolve,b.reject)});return b.promise};return t}function Xf(){this.$get=["$window","$timeout",function(a,b){var d=a.requestAnimationFrame||a.webkitRequestAnimationFrame,c=a.cancelAnimationFrame||a.webkitCancelAnimationFrame||a.webkitCancelRequestAnimationFrame,e=!!d,f=e?function(a){var b=d(a);return function(){c(b)}}:function(a){var c=
b(a,16.66,!1);return function(){b.cancel(c)}};f.supported=e;return f}]}function Mf(){function a(a){function b(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null;this.$$listeners={};this.$$listenerCount={};this.$$watchersCount=0;this.$id=++qb;this.$$ChildScope=null}b.prototype=a;return b}var b=10,d=L("$rootScope"),c=null,e=null;this.digestTtl=function(a){arguments.length&&(b=a);return b};this.$get=["$exceptionHandler","$parse","$browser",function(f,g,h){function k(a){a.currentScope.$$destroyed=
!0}function l(a){9===za&&(a.$$childHead&&l(a.$$childHead),a.$$nextSibling&&l(a.$$nextSibling));a.$parent=a.$$nextSibling=a.$$prevSibling=a.$$childHead=a.$$childTail=a.$root=a.$$watchers=null}function m(){this.$id=++qb;this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null;this.$root=this;this.$$destroyed=!1;this.$$listeners={};this.$$listenerCount={};this.$$watchersCount=0;this.$$isolateBindings=null}function n(a){if(M.$$phase)throw d("inprog",
M.$$phase);M.$$phase=a}function p(a,b){do a.$$watchersCount+=b;while(a=a.$parent)}function r(a,b,c){do a.$$listenerCount[c]-=b,0===a.$$listenerCount[c]&&delete a.$$listenerCount[c];while(a=a.$parent)}function J(){}function v(){for(;u.length;)try{u.shift()()}catch(a){f(a)}e=null}function t(){null===e&&(e=h.defer(function(){M.$apply(v)}))}m.prototype={constructor:m,$new:function(b,c){var d;c=c||this;b?(d=new m,d.$root=this.$root):(this.$$ChildScope||(this.$$ChildScope=a(this)),d=new this.$$ChildScope);
d.$parent=c;d.$$prevSibling=c.$$childTail;c.$$childHead?(c.$$childTail.$$nextSibling=d,c.$$childTail=d):c.$$childHead=c.$$childTail=d;(b||c!==this)&&d.$on("$destroy",k);return d},$watch:function(a,b,d,e){var f=g(a);if(f.$$watchDelegate)return f.$$watchDelegate(this,b,d,f,a);var h=this,k=h.$$watchers,l={fn:b,last:J,get:f,exp:e||a,eq:!!d};c=null;D(b)||(l.fn=z);k||(k=h.$$watchers=[],k.$$digestWatchIndex=-1);k.unshift(l);k.$$digestWatchIndex++;p(this,1);return function(){var a=$a(k,l);0<=a&&(p(h,-1),
a<k.$$digestWatchIndex&&k.$$digestWatchIndex--);c=null}},$watchGroup:function(a,b){function c(){h=!1;k?(k=!1,b(e,e,g)):b(e,d,g)}var d=Array(a.length),e=Array(a.length),f=[],g=this,h=!1,k=!0;if(!a.length){var l=!0;g.$evalAsync(function(){l&&b(e,e,g)});return function(){l=!1}}if(1===a.length)return this.$watch(a[0],function(a,c,f){e[0]=a;d[0]=c;b(e,a===c?e:d,f)});q(a,function(a,b){var k=g.$watch(a,function(a,f){e[b]=a;d[b]=f;h||(h=!0,g.$evalAsync(c))});f.push(k)});return function(){for(;f.length;)f.shift()()}},
$watchCollection:function(a,b){function c(a){e=a;var b,d,g,h;if(!w(e)){if(C(e))if(qa(e))for(f!==n&&(f=n,t=f.length=0,l++),a=e.length,t!==a&&(l++,f.length=t=a),b=0;b<a;b++)h=f[b],g=e[b],d=h!==h&&g!==g,d||h===g||(l++,f[b]=g);else{f!==p&&(f=p={},t=0,l++);a=0;for(b in e)ua.call(e,b)&&(a++,g=e[b],h=f[b],b in f?(d=h!==h&&g!==g,d||h===g||(l++,f[b]=g)):(t++,f[b]=g,l++));if(t>a)for(b in l++,f)ua.call(e,b)||(t--,delete f[b])}else f!==e&&(f=e,l++);return l}}c.$stateful=!0;var d=this,e,f,h,k=1<b.length,l=0,m=
g(a,c),n=[],p={},r=!0,t=0;return this.$watch(m,function(){r?(r=!1,b(e,e,d)):b(e,h,d);if(k)if(C(e))if(qa(e)){h=Array(e.length);for(var a=0;a<e.length;a++)h[a]=e[a]}else for(a in h={},e)ua.call(e,a)&&(h[a]=e[a]);else h=e})},$digest:function(){var a,g,k,l,m,p,r,t=b,q,u=[],w,x;n("$digest");h.$$checkUrlChange();this===M&&null!==e&&(h.defer.cancel(e),v());c=null;do{r=!1;q=this;for(p=0;p<s.length;p++){try{x=s[p],l=x.fn,l(x.scope,x.locals)}catch(z){f(z)}c=null}s.length=0;a:do{if(p=q.$$watchers)for(p.$$digestWatchIndex=
p.length;p.$$digestWatchIndex--;)try{if(a=p[p.$$digestWatchIndex])if(m=a.get,(g=m(q))!==(k=a.last)&&!(a.eq?sa(g,k):da(g)&&da(k)))r=!0,c=a,a.last=a.eq?ra(g,null):g,l=a.fn,l(g,k===J?g:k,q),5>t&&(w=4-t,u[w]||(u[w]=[]),u[w].push({msg:D(a.exp)?"fn: "+(a.exp.name||a.exp.toString()):a.exp,newVal:g,oldVal:k}));else if(a===c){r=!1;break a}}catch(B){f(B)}if(!(p=q.$$watchersCount&&q.$$childHead||q!==this&&q.$$nextSibling))for(;q!==this&&!(p=q.$$nextSibling);)q=q.$parent}while(q=p);if((r||s.length)&&!t--)throw M.$$phase=
null,d("infdig",b,u);}while(r||s.length);for(M.$$phase=null;I<A.length;)try{A[I++]()}catch(F){f(F)}A.length=I=0;h.$$checkUrlChange()},$destroy:function(){if(!this.$$destroyed){var a=this.$parent;this.$broadcast("$destroy");this.$$destroyed=!0;this===M&&h.$$applicationDestroyed();p(this,-this.$$watchersCount);for(var b in this.$$listenerCount)r(this,this.$$listenerCount[b],b);a&&a.$$childHead===this&&(a.$$childHead=this.$$nextSibling);a&&a.$$childTail===this&&(a.$$childTail=this.$$prevSibling);this.$$prevSibling&&
(this.$$prevSibling.$$nextSibling=this.$$nextSibling);this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling);this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=z;this.$on=this.$watch=this.$watchGroup=function(){return z};this.$$listeners={};this.$$nextSibling=null;l(this)}},$eval:function(a,b){return g(a)(this,b)},$evalAsync:function(a,b){M.$$phase||s.length||h.defer(function(){s.length&&M.$digest()});s.push({scope:this,fn:g(a),locals:b})},$$postDigest:function(a){A.push(a)},
$apply:function(a){try{n("$apply");try{return this.$eval(a)}finally{M.$$phase=null}}catch(b){f(b)}finally{try{M.$digest()}catch(c){throw f(c),c;}}},$applyAsync:function(a){function b(){c.$eval(a)}var c=this;a&&u.push(b);a=g(a);t()},$on:function(a,b){var c=this.$$listeners[a];c||(this.$$listeners[a]=c=[]);c.push(b);var d=this;do d.$$listenerCount[a]||(d.$$listenerCount[a]=0),d.$$listenerCount[a]++;while(d=d.$parent);var e=this;return function(){var d=c.indexOf(b);-1!==d&&(c[d]=null,r(e,1,a))}},$emit:function(a,
b){var c=[],d,e=this,g=!1,h={name:a,targetScope:e,stopPropagation:function(){g=!0},preventDefault:function(){h.defaultPrevented=!0},defaultPrevented:!1},k=ab([h],arguments,1),l,m;do{d=e.$$listeners[a]||c;h.currentScope=e;l=0;for(m=d.length;l<m;l++)if(d[l])try{d[l].apply(null,k)}catch(n){f(n)}else d.splice(l,1),l--,m--;if(g)return h.currentScope=null,h;e=e.$parent}while(e);h.currentScope=null;return h},$broadcast:function(a,b){var c=this,d=this,e={name:a,targetScope:this,preventDefault:function(){e.defaultPrevented=
!0},defaultPrevented:!1};if(!this.$$listenerCount[a])return e;for(var g=ab([e],arguments,1),h,k;c=d;){e.currentScope=c;d=c.$$listeners[a]||[];h=0;for(k=d.length;h<k;h++)if(d[h])try{d[h].apply(null,g)}catch(l){f(l)}else d.splice(h,1),h--,k--;if(!(d=c.$$listenerCount[a]&&c.$$childHead||c!==this&&c.$$nextSibling))for(;c!==this&&!(d=c.$$nextSibling);)c=c.$parent}e.currentScope=null;return e}};var M=new m,s=M.$$asyncQueue=[],A=M.$$postDigestQueue=[],u=M.$$applyAsyncQueue=[],I=0;return M}]}function Ee(){var a=
/^\s*(https?|ftp|mailto|tel|file):/,b=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=function(b){return u(b)?(a=b,this):a};this.imgSrcSanitizationWhitelist=function(a){return u(a)?(b=a,this):b};this.$get=function(){return function(d,c){var e=c?b:a,f;f=Ca(d).href;return""===f||f.match(e)?d:"unsafe:"+f}}}function Cg(a){if("self"===a)return a;if(F(a)){if(-1<a.indexOf("***"))throw ta("iwcard",a);a=Kd(a).replace(/\\\*\\\*/g,".*").replace(/\\\*/g,"[^:/.?&;]*");return new RegExp("^"+
a+"$")}if(Xa(a))return new RegExp("^"+a.source+"$");throw ta("imatcher");}function Ld(a){var b=[];u(a)&&q(a,function(a){b.push(Cg(a))});return b}function Qf(){this.SCE_CONTEXTS=oa;var a=["self"],b=[];this.resourceUrlWhitelist=function(b){arguments.length&&(a=Ld(b));return a};this.resourceUrlBlacklist=function(a){arguments.length&&(b=Ld(a));return b};this.$get=["$injector",function(d){function c(a,b){return"self"===a?yd(b):!!a.exec(b.href)}function e(a){var b=function(a){this.$$unwrapTrustedValue=
function(){return a}};a&&(b.prototype=new a);b.prototype.valueOf=function(){return this.$$unwrapTrustedValue()};b.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()};return b}var f=function(a){throw ta("unsafe");};d.has("$sanitize")&&(f=d.get("$sanitize"));var g=e(),h={};h[oa.HTML]=e(g);h[oa.CSS]=e(g);h[oa.URL]=e(g);h[oa.JS]=e(g);h[oa.RESOURCE_URL]=e(h[oa.URL]);return{trustAs:function(a,b){var c=h.hasOwnProperty(a)?h[a]:null;if(!c)throw ta("icontext",a,b);if(null===b||w(b)||
""===b)return b;if("string"!==typeof b)throw ta("itype",a);return new c(b)},getTrusted:function(d,e){if(null===e||w(e)||""===e)return e;var g=h.hasOwnProperty(d)?h[d]:null;if(g&&e instanceof g)return e.$$unwrapTrustedValue();if(d===oa.RESOURCE_URL){var g=Ca(e.toString()),n,p,r=!1;n=0;for(p=a.length;n<p;n++)if(c(a[n],g)){r=!0;break}if(r)for(n=0,p=b.length;n<p;n++)if(c(b[n],g)){r=!1;break}if(r)return e;throw ta("insecurl",e.toString());}if(d===oa.HTML)return f(e);throw ta("unsafe");},valueOf:function(a){return a instanceof
g?a.$$unwrapTrustedValue():a}}}]}function Pf(){var a=!0;this.enabled=function(b){arguments.length&&(a=!!b);return a};this.$get=["$parse","$sceDelegate",function(b,d){if(a&&8>za)throw ta("iequirks");var c=pa(oa);c.isEnabled=function(){return a};c.trustAs=d.trustAs;c.getTrusted=d.getTrusted;c.valueOf=d.valueOf;a||(c.trustAs=c.getTrusted=function(a,b){return b},c.valueOf=Ya);c.parseAs=function(a,d){var e=b(d);return e.literal&&e.constant?e:b(d,function(b){return c.getTrusted(a,b)})};var e=c.parseAs,
f=c.getTrusted,g=c.trustAs;q(oa,function(a,b){var d=Q(b);c[("parse_as_"+d).replace(xc,gb)]=function(b){return e(a,b)};c[("get_trusted_"+d).replace(xc,gb)]=function(b){return f(a,b)};c[("trust_as_"+d).replace(xc,gb)]=function(b){return g(a,b)}});return c}]}function Rf(){this.$get=["$window","$document",function(a,b){var d={},c=!((!a.nw||!a.nw.process)&&a.chrome&&(a.chrome.app&&a.chrome.app.runtime||!a.chrome.app&&a.chrome.runtime&&a.chrome.runtime.id))&&a.history&&a.history.pushState,e=Z((/android (\d+)/.exec(Q((a.navigator||
{}).userAgent))||[])[1]),f=/Boxee/i.test((a.navigator||{}).userAgent),g=b[0]||{},h=g.body&&g.body.style,k=!1,l=!1;h&&(k=!!("transition"in h||"webkitTransition"in h),l=!!("animation"in h||"webkitAnimation"in h));return{history:!(!c||4>e||f),hasEvent:function(a){if("input"===a&&za)return!1;if(w(d[a])){var b=g.createElement("div");d[a]="on"+a in b}return d[a]},csp:Ga(),transitions:k,animations:l,android:e}}]}function Tf(){var a;this.httpOptions=function(b){return b?(a=b,this):a};this.$get=["$exceptionHandler",
"$templateCache","$http","$q","$sce",function(b,d,c,e,f){function g(h,k){g.totalPendingRequests++;if(!F(h)||w(d.get(h)))h=f.getTrustedResourceUrl(h);var l=c.defaults&&c.defaults.transformResponse;H(l)?l=l.filter(function(a){return a!==nc}):l===nc&&(l=null);return c.get(h,S({cache:d,transformResponse:l},a)).finally(function(){g.totalPendingRequests--}).then(function(a){d.put(h,a.data);return a.data},function(a){k||(a=Dg("tpload",h,a.status,a.statusText),b(a));return e.reject(a)})}g.totalPendingRequests=
0;return g}]}function Uf(){this.$get=["$rootScope","$browser","$location",function(a,b,d){return{findBindings:function(a,b,d){a=a.getElementsByClassName("ng-binding");var g=[];q(a,function(a){var c=ea.element(a).data("$binding");c&&q(c,function(c){d?(new RegExp("(^|\\s)"+Kd(b)+"(\\s|\\||$)")).test(c)&&g.push(a):-1!==c.indexOf(b)&&g.push(a)})});return g},findModels:function(a,b,d){for(var g=["ng-","data-ng-","ng\\:"],h=0;h<g.length;++h){var k=a.querySelectorAll("["+g[h]+"model"+(d?"=":"*=")+'"'+b+
'"]');if(k.length)return k}},getLocation:function(){return d.url()},setLocation:function(b){b!==d.url()&&(d.url(b),a.$digest())},whenStable:function(a){b.notifyWhenNoOutstandingRequests(a)}}}]}function Vf(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function(a,b,d,c,e){function f(f,k,l){D(f)||(l=k,k=f,f=z);var m=va.call(arguments,3),n=u(l)&&!l,p=(n?c:d).defer(),r=p.promise,q;q=b.defer(function(){try{p.resolve(f.apply(null,m))}catch(b){p.reject(b),e(b)}finally{delete g[r.$$timeoutId]}n||
a.$apply()},k);r.$$timeoutId=q;g[q]=p;return r}var g={};f.cancel=function(a){return a&&a.$$timeoutId in g?(g[a.$$timeoutId].promise.catch(z),g[a.$$timeoutId].reject("canceled"),delete g[a.$$timeoutId],b.defer.cancel(a.$$timeoutId)):!1};return f}]}function Ca(a){za&&(aa.setAttribute("href",a),a=aa.href);aa.setAttribute("href",a);return{href:aa.href,protocol:aa.protocol?aa.protocol.replace(/:$/,""):"",host:aa.host,search:aa.search?aa.search.replace(/^\?/,""):"",hash:aa.hash?aa.hash.replace(/^#/,""):
"",hostname:aa.hostname,port:aa.port,pathname:"/"===aa.pathname.charAt(0)?aa.pathname:"/"+aa.pathname}}function yd(a){a=F(a)?Ca(a):a;return a.protocol===Md.protocol&&a.host===Md.host}function Wf(){this.$get=la(x)}function Nd(a){function b(a){try{return decodeURIComponent(a)}catch(b){return a}}var d=a[0]||{},c={},e="";return function(){var a,g,h,k,l;try{a=d.cookie||""}catch(m){a=""}if(a!==e)for(e=a,a=e.split("; "),c={},h=0;h<a.length;h++)g=a[h],k=g.indexOf("="),0<k&&(l=b(g.substring(0,k)),w(c[l])&&
(c[l]=b(g.substring(k+1))));return c}}function $f(){this.$get=Nd}function cd(a){function b(d,c){if(C(d)){var e={};q(d,function(a,c){e[c]=b(c,a)});return e}return a.factory(d+"Filter",c)}this.register=b;this.$get=["$injector",function(a){return function(b){return a.get(b+"Filter")}}];b("currency",Od);b("date",Pd);b("filter",Eg);b("json",Fg);b("limitTo",Gg);b("lowercase",Hg);b("number",Qd);b("orderBy",Rd);b("uppercase",Ig)}function Eg(){return function(a,b,d,c){if(!qa(a)){if(null==a)return a;throw L("filter")("notarray",
a);}c=c||"$";var e;switch(yc(b)){case "function":break;case "boolean":case "null":case "number":case "string":e=!0;case "object":b=Jg(b,d,c,e);break;default:return a}return Array.prototype.filter.call(a,b)}}function Jg(a,b,d,c){var e=C(a)&&d in a;!0===b?b=sa:D(b)||(b=function(a,b){if(w(a))return!1;if(null===a||null===b)return a===b;if(C(b)||C(a)&&!Wb(a))return!1;a=Q(""+a);b=Q(""+b);return-1!==a.indexOf(b)});return function(f){return e&&!C(f)?Ea(f,a[d],b,d,!1):Ea(f,a,b,d,c)}}function Ea(a,b,d,c,e,
f){var g=yc(a),h=yc(b);if("string"===h&&"!"===b.charAt(0))return!Ea(a,b.substring(1),d,c,e);if(H(a))return a.some(function(a){return Ea(a,b,d,c,e)});switch(g){case "object":var k;if(e){for(k in a)if(k.charAt&&"$"!==k.charAt(0)&&Ea(a[k],b,d,c,!0))return!0;return f?!1:Ea(a,b,d,c,!1)}if("object"===h){for(k in b)if(f=b[k],!D(f)&&!w(f)&&(g=k===c,!Ea(g?a:a[k],f,d,c,g,g)))return!1;return!0}return d(a,b);case "function":return!1;default:return d(a,b)}}function yc(a){return null===a?"null":typeof a}function Od(a){var b=
a.NUMBER_FORMATS;return function(a,c,e){w(c)&&(c=b.CURRENCY_SYM);w(e)&&(e=b.PATTERNS[1].maxFrac);return null==a?a:Sd(a,b.PATTERNS[1],b.GROUP_SEP,b.DECIMAL_SEP,e).replace(/\u00A4/g,c)}}function Qd(a){var b=a.NUMBER_FORMATS;return function(a,c){return null==a?a:Sd(a,b.PATTERNS[0],b.GROUP_SEP,b.DECIMAL_SEP,c)}}function Kg(a){var b=0,d,c,e,f,g;-1<(c=a.indexOf(Td))&&(a=a.replace(Td,""));0<(e=a.search(/e/i))?(0>c&&(c=e),c+=+a.slice(e+1),a=a.substring(0,e)):0>c&&(c=a.length);for(e=0;a.charAt(e)===zc;e++);
if(e===(g=a.length))d=[0],c=1;else{for(g--;a.charAt(g)===zc;)g--;c-=e;d=[];for(f=0;e<=g;e++,f++)d[f]=+a.charAt(e)}c>Ud&&(d=d.splice(0,Ud-1),b=c-1,c=1);return{d:d,e:b,i:c}}function Lg(a,b,d,c){var e=a.d,f=e.length-a.i;b=w(b)?Math.min(Math.max(d,f),c):+b;d=b+a.i;c=e[d];if(0<d){e.splice(Math.max(a.i,d));for(var g=d;g<e.length;g++)e[g]=0}else for(f=Math.max(0,f),a.i=1,e.length=Math.max(1,d=b+1),e[0]=0,g=1;g<d;g++)e[g]=0;if(5<=c)if(0>d-1){for(c=0;c>d;c--)e.unshift(0),a.i++;e.unshift(1);a.i++}else e[d-
1]++;for(;f<Math.max(0,b);f++)e.push(0);if(b=e.reduceRight(function(a,b,c,d){b+=a;d[c]=b%10;return Math.floor(b/10)},0))e.unshift(b),a.i++}function Sd(a,b,d,c,e){if(!F(a)&&!ba(a)||isNaN(a))return"";var f=!isFinite(a),g=!1,h=Math.abs(a)+"",k="";if(f)k="\u221e";else{g=Kg(h);Lg(g,e,b.minFrac,b.maxFrac);k=g.d;h=g.i;e=g.e;f=[];for(g=k.reduce(function(a,b){return a&&!b},!0);0>h;)k.unshift(0),h++;0<h?f=k.splice(h,k.length):(f=k,k=[0]);h=[];for(k.length>=b.lgSize&&h.unshift(k.splice(-b.lgSize,k.length).join(""));k.length>
b.gSize;)h.unshift(k.splice(-b.gSize,k.length).join(""));k.length&&h.unshift(k.join(""));k=h.join(d);f.length&&(k+=c+f.join(""));e&&(k+="e+"+e)}return 0>a&&!g?b.negPre+k+b.negSuf:b.posPre+k+b.posSuf}function Kb(a,b,d,c){var e="";if(0>a||c&&0>=a)c?a=-a+1:(a=-a,e="-");for(a=""+a;a.length<b;)a=zc+a;d&&(a=a.substr(a.length-b));return e+a}function Y(a,b,d,c,e){d=d||0;return function(f){f=f["get"+a]();if(0<d||f>-d)f+=d;0===f&&-12===d&&(f=12);return Kb(f,b,c,e)}}function mb(a,b,d){return function(c,e){var f=
c["get"+a](),g=ub((d?"STANDALONE":"")+(b?"SHORT":"")+a);return e[g][f]}}function Vd(a){var b=(new Date(a,0,1)).getDay();return new Date(a,0,(4>=b?5:12)-b)}function Wd(a){return function(b){var d=Vd(b.getFullYear());b=+new Date(b.getFullYear(),b.getMonth(),b.getDate()+(4-b.getDay()))-+d;b=1+Math.round(b/6048E5);return Kb(b,a)}}function Ac(a,b){return 0>=a.getFullYear()?b.ERAS[0]:b.ERAS[1]}function Pd(a){function b(a){var b;if(b=a.match(d)){a=new Date(0);var f=0,g=0,h=b[8]?a.setUTCFullYear:a.setFullYear,
k=b[8]?a.setUTCHours:a.setHours;b[9]&&(f=Z(b[9]+b[10]),g=Z(b[9]+b[11]));h.call(a,Z(b[1]),Z(b[2])-1,Z(b[3]));f=Z(b[4]||0)-f;g=Z(b[5]||0)-g;h=Z(b[6]||0);b=Math.round(1E3*parseFloat("0."+(b[7]||0)));k.call(a,f,g,h,b)}return a}var d=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(c,d,f){var g="",h=[],k,l;d=d||"mediumDate";d=a.DATETIME_FORMATS[d]||d;F(c)&&(c=Mg.test(c)?Z(c):b(c));ba(c)&&(c=new Date(c));if(!ga(c)||!isFinite(c.getTime()))return c;
for(;d;)(l=Ng.exec(d))?(h=ab(h,l,1),d=h.pop()):(h.push(d),d=null);var m=c.getTimezoneOffset();f&&(m=Pc(f,m),c=Yb(c,f,!0));q(h,function(b){k=Og[b];g+=k?k(c,a.DATETIME_FORMATS,m):"''"===b?"'":b.replace(/(^'|'$)/g,"").replace(/''/g,"'")});return g}}function Fg(){return function(a,b){w(b)&&(b=2);return cb(a,b)}}function Gg(){return function(a,b,d){b=Infinity===Math.abs(Number(b))?Number(b):Z(b);if(da(b))return a;ba(a)&&(a=a.toString());if(!qa(a))return a;d=!d||isNaN(d)?0:Z(d);d=0>d?Math.max(0,a.length+
d):d;return 0<=b?Bc(a,d,d+b):0===d?Bc(a,b,a.length):Bc(a,Math.max(0,d+b),d)}}function Bc(a,b,d){return F(a)?a.slice(b,d):va.call(a,b,d)}function Rd(a){function b(b){return b.map(function(b){var c=1,d=Ya;if(D(b))d=b;else if(F(b)){if("+"===b.charAt(0)||"-"===b.charAt(0))c="-"===b.charAt(0)?-1:1,b=b.substring(1);if(""!==b&&(d=a(b),d.constant))var e=d(),d=function(a){return a[e]}}return{get:d,descending:c}})}function d(a){switch(typeof a){case "number":case "boolean":case "string":return!0;default:return!1}}
function c(a,b){var c=0,d=a.type,k=b.type;if(d===k){var k=a.value,l=b.value;"string"===d?(k=k.toLowerCase(),l=l.toLowerCase()):"object"===d&&(C(k)&&(k=a.index),C(l)&&(l=b.index));k!==l&&(c=k<l?-1:1)}else c=d<k?-1:1;return c}return function(a,f,g,h){if(null==a)return a;if(!qa(a))throw L("orderBy")("notarray",a);H(f)||(f=[f]);0===f.length&&(f=["+"]);var k=b(f),l=g?-1:1,m=D(h)?h:c;a=Array.prototype.map.call(a,function(a,b){return{value:a,tieBreaker:{value:b,type:"number",index:b},predicateValues:k.map(function(c){var e=
c.get(a);c=typeof e;if(null===e)c="string",e="null";else if("object"===c)a:{if(D(e.valueOf)&&(e=e.valueOf(),d(e)))break a;Wb(e)&&(e=e.toString(),d(e))}return{value:e,type:c,index:b}})}});a.sort(function(a,b){for(var c=0,d=k.length;c<d;c++){var e=m(a.predicateValues[c],b.predicateValues[c]);if(e)return e*k[c].descending*l}return m(a.tieBreaker,b.tieBreaker)*l});return a=a.map(function(a){return a.value})}}function Qa(a){D(a)&&(a={link:a});a.restrict=a.restrict||"AC";return la(a)}function Lb(a,b,d,
c,e){this.$$controls=[];this.$error={};this.$$success={};this.$pending=void 0;this.$name=e(b.name||b.ngForm||"")(d);this.$dirty=!1;this.$valid=this.$pristine=!0;this.$submitted=this.$invalid=!1;this.$$parentForm=Mb;this.$$element=a;this.$$animate=c;Xd(this)}function Xd(a){a.$$classCache={};a.$$classCache[Yd]=!(a.$$classCache[nb]=a.$$element.hasClass(nb))}function Zd(a){function b(a,b,c){c&&!a.$$classCache[b]?(a.$$animate.addClass(a.$$element,b),a.$$classCache[b]=!0):!c&&a.$$classCache[b]&&(a.$$animate.removeClass(a.$$element,
b),a.$$classCache[b]=!1)}function d(a,c,d){c=c?"-"+Tc(c,"-"):"";b(a,nb+c,!0===d);b(a,Yd+c,!1===d)}var c=a.set,e=a.unset;a.clazz.prototype.$setValidity=function(a,g,h){w(g)?(this.$pending||(this.$pending={}),c(this.$pending,a,h)):(this.$pending&&e(this.$pending,a,h),$d(this.$pending)&&(this.$pending=void 0));Ha(g)?g?(e(this.$error,a,h),c(this.$$success,a,h)):(c(this.$error,a,h),e(this.$$success,a,h)):(e(this.$error,a,h),e(this.$$success,a,h));this.$pending?(b(this,"ng-pending",!0),this.$valid=this.$invalid=
void 0,d(this,"",null)):(b(this,"ng-pending",!1),this.$valid=$d(this.$error),this.$invalid=!this.$valid,d(this,"",this.$valid));g=this.$pending&&this.$pending[a]?void 0:this.$error[a]?!1:this.$$success[a]?!0:null;d(this,a,g);this.$$parentForm.$setValidity(a,g,this)}}function $d(a){if(a)for(var b in a)if(a.hasOwnProperty(b))return!1;return!0}function Cc(a){a.$formatters.push(function(b){return a.$isEmpty(b)?b:b.toString()})}function Ra(a,b,d,c,e,f){var g=Q(b[0].type);if(!e.android){var h=!1;b.on("compositionstart",
function(){h=!0});b.on("compositionend",function(){h=!1;l()})}var k,l=function(a){k&&(f.defer.cancel(k),k=null);if(!h){var e=b.val();a=a&&a.type;"password"===g||d.ngTrim&&"false"===d.ngTrim||(e=T(e));(c.$viewValue!==e||""===e&&c.$$hasNativeValidators)&&c.$setViewValue(e,a)}};if(e.hasEvent("input"))b.on("input",l);else{var m=function(a,b,c){k||(k=f.defer(function(){k=null;b&&b.value===c||l(a)}))};b.on("keydown",function(a){var b=a.keyCode;91===b||15<b&&19>b||37<=b&&40>=b||m(a,this,this.value)});if(e.hasEvent("paste"))b.on("paste cut",
m)}b.on("change",l);if(ae[g]&&c.$$hasNativeValidators&&g===d.type)b.on("keydown wheel mousedown",function(a){if(!k){var b=this.validity,c=b.badInput,d=b.typeMismatch;k=f.defer(function(){k=null;b.badInput===c&&b.typeMismatch===d||l(a)})}});c.$render=function(){var a=c.$isEmpty(c.$viewValue)?"":c.$viewValue;b.val()!==a&&b.val(a)}}function Nb(a,b){return function(d,c){var e,f;if(ga(d))return d;if(F(d)){'"'===d.charAt(0)&&'"'===d.charAt(d.length-1)&&(d=d.substring(1,d.length-1));if(Pg.test(d))return new Date(d);
a.lastIndex=0;if(e=a.exec(d))return e.shift(),f=c?{yyyy:c.getFullYear(),MM:c.getMonth()+1,dd:c.getDate(),HH:c.getHours(),mm:c.getMinutes(),ss:c.getSeconds(),sss:c.getMilliseconds()/1E3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},q(e,function(a,c){c<b.length&&(f[b[c]]=+a)}),new Date(f.yyyy,f.MM-1,f.dd,f.HH,f.mm,f.ss||0,1E3*f.sss||0)}return NaN}}function ob(a,b,d,c){return function(e,f,g,h,k,l,m){function n(a){return a&&!(a.getTime&&a.getTime()!==a.getTime())}function p(a){return u(a)&&!ga(a)?d(a)||
void 0:a}Dc(e,f,g,h);Ra(e,f,g,h,k,l);var r=h&&h.$options.getOption("timezone"),q;h.$$parserName=a;h.$parsers.push(function(a){if(h.$isEmpty(a))return null;if(b.test(a))return a=d(a,q),r&&(a=Yb(a,r)),a});h.$formatters.push(function(a){if(a&&!ga(a))throw pb("datefmt",a);if(n(a))return(q=a)&&r&&(q=Yb(q,r,!0)),m("date")(a,c,r);q=null;return""});if(u(g.min)||g.ngMin){var v;h.$validators.min=function(a){return!n(a)||w(v)||d(a)>=v};g.$observe("min",function(a){v=p(a);h.$validate()})}if(u(g.max)||g.ngMax){var t;
h.$validators.max=function(a){return!n(a)||w(t)||d(a)<=t};g.$observe("max",function(a){t=p(a);h.$validate()})}}}function Dc(a,b,d,c){(c.$$hasNativeValidators=C(b[0].validity))&&c.$parsers.push(function(a){var c=b.prop("validity")||{};return c.badInput||c.typeMismatch?void 0:a})}function be(a){a.$$parserName="number";a.$parsers.push(function(b){if(a.$isEmpty(b))return null;if(Qg.test(b))return parseFloat(b)});a.$formatters.push(function(b){if(!a.$isEmpty(b)){if(!ba(b))throw pb("numfmt",b);b=b.toString()}return b})}
function Sa(a){u(a)&&!ba(a)&&(a=parseFloat(a));return da(a)?void 0:a}function Ec(a){var b=a.toString(),d=b.indexOf(".");return-1===d?-1<a&&1>a&&(a=/e-(\d+)$/.exec(b))?Number(a[1]):0:b.length-d-1}function ce(a,b,d){a=Number(a);var c=(a|0)!==a,e=(b|0)!==b,f=(d|0)!==d;if(c||e||f){var g=c?Ec(a):0,h=e?Ec(b):0,k=f?Ec(d):0,g=Math.max(g,h,k),g=Math.pow(10,g);a*=g;b*=g;d*=g;c&&(a=Math.round(a));e&&(b=Math.round(b));f&&(d=Math.round(d))}return 0===(a-b)%d}function de(a,b,d,c,e){if(u(c)){a=a(c);if(!a.constant)throw pb("constexpr",
d,c);return a(b)}return e}function Fc(a,b){function d(a,b){if(!a||!a.length)return[];if(!b||!b.length)return a;var c=[],d=0;a:for(;d<a.length;d++){for(var e=a[d],m=0;m<b.length;m++)if(e===b[m])continue a;c.push(e)}return c}function c(a){var b=a;H(a)?b=a.map(c).join(" "):C(a)&&(b=Object.keys(a).filter(function(b){return a[b]}).join(" "));return b}a="ngClass"+a;var e;return["$parse",function(f){return{restrict:"AC",link:function(g,h,k){function l(a,b){var c=[];q(a,function(a){if(0<b||n[a])n[a]=(n[a]||
0)+b,n[a]===+(0<b)&&c.push(a)});return c.join(" ")}function m(a){if(a===b){var c=r,c=l(c&&c.split(" "),1);k.$addClass(c)}else c=r,c=l(c&&c.split(" "),-1),k.$removeClass(c);p=a}var n=h.data("$classCounts"),p=!0,r;n||(n=V(),h.data("$classCounts",n));"ngClass"!==a&&(e||(e=f("$index",function(a){return a&1})),g.$watch(e,m));g.$watch(f(k[a],c),function(a){F(a)||(a=c(a));if(p===b){var e=a,f=r&&r.split(" "),g=e&&e.split(" "),e=d(f,g),f=d(g,f),e=l(e,-1),f=l(f,1);k.$addClass(f);k.$removeClass(e)}r=a})}}}]}
function Ob(a,b,d,c,e,f,g,h,k){this.$modelValue=this.$viewValue=Number.NaN;this.$$rawModelValue=void 0;this.$validators={};this.$asyncValidators={};this.$parsers=[];this.$formatters=[];this.$viewChangeListeners=[];this.$untouched=!0;this.$touched=!1;this.$pristine=!0;this.$dirty=!1;this.$valid=!0;this.$invalid=!1;this.$error={};this.$$success={};this.$pending=void 0;this.$name=k(d.name||"",!1)(a);this.$$parentForm=Mb;this.$options=Pb;this.$$parsedNgModel=e(d.ngModel);this.$$parsedNgModelAssign=this.$$parsedNgModel.assign;
this.$$ngModelGet=this.$$parsedNgModel;this.$$ngModelSet=this.$$parsedNgModelAssign;this.$$pendingDebounce=null;this.$$parserValid=void 0;this.$$currentValidationRunId=0;Object.defineProperty(this,"$$scope",{value:a});this.$$attr=d;this.$$element=c;this.$$animate=f;this.$$timeout=g;this.$$parse=e;this.$$q=h;this.$$exceptionHandler=b;Xd(this);Rg(this)}function Rg(a){a.$$scope.$watch(function(b){b=a.$$ngModelGet(b);if(b!==a.$modelValue&&(a.$modelValue===a.$modelValue||b===b)){a.$modelValue=a.$$rawModelValue=
b;a.$$parserValid=void 0;for(var d=a.$formatters,c=d.length,e=b;c--;)e=d[c](e);a.$viewValue!==e&&(a.$$updateEmptyClasses(e),a.$viewValue=a.$$lastCommittedViewValue=e,a.$render(),a.$$runValidators(a.$modelValue,a.$viewValue,z))}return b})}function Gc(a){this.$$options=a}function ee(a,b){q(b,function(b,c){u(a[c])||(a[c]=b)})}function Ta(a,b){a.prop("selected",b);a.attr("selected",b)}var Sg=/^\/(.+)\/([a-z]*)$/,ua=Object.prototype.hasOwnProperty,Ic={objectMaxDepth:5},Q=function(a){return F(a)?a.toLowerCase():
a},ub=function(a){return F(a)?a.toUpperCase():a},za,B,na,va=[].slice,sg=[].splice,Tg=[].push,ma=Object.prototype.toString,Mc=Object.getPrototypeOf,Fa=L("ng"),ea=x.angular||(x.angular={}),ac,qb=0;za=x.document.documentMode;var da=Number.isNaN||function(a){return a!==a};z.$inject=[];Ya.$inject=[];var H=Array.isArray,qe=/^\[object (?:Uint8|Uint8Clamped|Uint16|Uint32|Int8|Int16|Int32|Float32|Float64)Array]$/,T=function(a){return F(a)?a.trim():a},Kd=function(a){return a.replace(/([-()[\]{}+?*.$^|,:#<!\\])/g,
"\\$1").replace(/\x08/g,"\\x08")},Ga=function(){if(!u(Ga.rules)){var a=x.document.querySelector("[ng-csp]")||x.document.querySelector("[data-ng-csp]");if(a){var b=a.getAttribute("ng-csp")||a.getAttribute("data-ng-csp");Ga.rules={noUnsafeEval:!b||-1!==b.indexOf("no-unsafe-eval"),noInlineStyle:!b||-1!==b.indexOf("no-inline-style")}}else{a=Ga;try{new Function(""),b=!1}catch(d){b=!0}a.rules={noUnsafeEval:b,noInlineStyle:!1}}}return Ga.rules},rb=function(){if(u(rb.name_))return rb.name_;var a,b,d=Ja.length,
c,e;for(b=0;b<d;++b)if(c=Ja[b],a=x.document.querySelector("["+c.replace(":","\\:")+"jq]")){e=a.getAttribute(c+"jq");break}return rb.name_=e},se=/:/g,Ja=["ng-","data-ng-","ng:","x-ng-"],ve=function(a){var b=a.currentScript;if(!b)return!0;if(!(b instanceof x.HTMLScriptElement||b instanceof x.SVGScriptElement))return!1;b=b.attributes;return[b.getNamedItem("src"),b.getNamedItem("href"),b.getNamedItem("xlink:href")].every(function(b){if(!b)return!0;if(!b.value)return!1;var c=a.createElement("a");c.href=
b.value;if(a.location.origin===c.origin)return!0;switch(c.protocol){case "http:":case "https:":case "ftp:":case "blob:":case "file:":case "data:":return!0;default:return!1}})}(x.document),ye=/[A-Z]/g,Uc=!1,Ia=3,De={full:"1.6.4",major:1,minor:6,dot:4,codeName:"phenomenal-footnote"};W.expando="ng339";var hb=W.cache={},eg=1;W._data=function(a){return this.cache[a[this.expando]]||{}};var ag=/-([a-z])/g,Ug=/^-ms-/,zb={mouseleave:"mouseout",mouseenter:"mouseover"},dc=L("jqLite"),dg=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,
cc=/<|&#?\w+;/,bg=/<([\w:-]+)/,cg=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,ha={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ha.optgroup=ha.option;ha.tbody=ha.tfoot=ha.colgroup=ha.caption=ha.thead;ha.th=ha.td;var jg=x.Node.prototype.contains||function(a){return!!(this.compareDocumentPosition(a)&
16)},Na=W.prototype={ready:ed,toString:function(){var a=[];q(this,function(b){a.push(""+b)});return"["+a.join(", ")+"]"},eq:function(a){return 0<=a?B(this[a]):B(this[this.length+a])},length:0,push:Tg,sort:[].sort,splice:[].splice},Fb={};q("multiple selected checked disabled readOnly required open".split(" "),function(a){Fb[Q(a)]=a});var jd={};q("input select option textarea button form details".split(" "),function(a){jd[a]=!0});var rd={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",
ngPattern:"pattern",ngStep:"step"};q({data:hc,removeData:gc,hasData:function(a){for(var b in hb[a.ng339])return!0;return!1},cleanData:function(a){for(var b=0,d=a.length;b<d;b++)gc(a[b])}},function(a,b){W[b]=a});q({data:hc,inheritedData:Db,scope:function(a){return B.data(a,"$scope")||Db(a.parentNode||a,["$isolateScope","$scope"])},isolateScope:function(a){return B.data(a,"$isolateScope")||B.data(a,"$isolateScopeNoTemplate")},controller:gd,injector:function(a){return Db(a,"$injector")},removeAttr:function(a,
b){a.removeAttribute(b)},hasClass:Ab,css:function(a,b,d){b=wb(b.replace(Ug,"ms-"));if(u(d))a.style[b]=d;else return a.style[b]},attr:function(a,b,d){var c=a.nodeType;if(c!==Ia&&2!==c&&8!==c&&a.getAttribute){var c=Q(b),e=Fb[c];if(u(d))null===d||!1===d&&e?a.removeAttribute(b):a.setAttribute(b,e?c:d);else return a=a.getAttribute(b),e&&null!==a&&(a=c),null===a?void 0:a}},prop:function(a,b,d){if(u(d))a[b]=d;else return a[b]},text:function(){function a(a,d){if(w(d)){var c=a.nodeType;return 1===c||c===Ia?
a.textContent:""}a.textContent=d}a.$dv="";return a}(),val:function(a,b){if(w(b)){if(a.multiple&&"select"===wa(a)){var d=[];q(a.options,function(a){a.selected&&d.push(a.value||a.text)});return d}return a.value}a.value=b},html:function(a,b){if(w(b))return a.innerHTML;xb(a,!0);a.innerHTML=b},empty:hd},function(a,b){W.prototype[b]=function(b,c){var e,f,g=this.length;if(a!==hd&&w(2===a.length&&a!==Ab&&a!==gd?b:c)){if(C(b)){for(e=0;e<g;e++)if(a===hc)a(this[e],b);else for(f in b)a(this[e],f,b[f]);return this}e=
a.$dv;g=w(e)?Math.min(g,1):g;for(f=0;f<g;f++){var h=a(this[f],b,c);e=e?e+h:h}return e}for(e=0;e<g;e++)a(this[e],b,c);return this}});q({removeData:gc,on:function(a,b,d,c){if(u(c))throw dc("onargs");if(bc(a)){c=yb(a,!0);var e=c.events,f=c.handle;f||(f=c.handle=gg(a,e));c=0<=b.indexOf(" ")?b.split(" "):[b];for(var g=c.length,h=function(b,c,g){var h=e[b];h||(h=e[b]=[],h.specialHandlerWrapper=c,"$destroy"===b||g||a.addEventListener(b,f));h.push(d)};g--;)b=c[g],zb[b]?(h(zb[b],ig),h(b,void 0,!0)):h(b)}},
off:fd,one:function(a,b,d){a=B(a);a.on(b,function e(){a.off(b,d);a.off(b,e)});a.on(b,d)},replaceWith:function(a,b){var d,c=a.parentNode;xb(a);q(new W(b),function(b){d?c.insertBefore(b,d.nextSibling):c.replaceChild(b,a);d=b})},children:function(a){var b=[];q(a.childNodes,function(a){1===a.nodeType&&b.push(a)});return b},contents:function(a){return a.contentDocument||a.childNodes||[]},append:function(a,b){var d=a.nodeType;if(1===d||11===d){b=new W(b);for(var d=0,c=b.length;d<c;d++)a.appendChild(b[d])}},
prepend:function(a,b){if(1===a.nodeType){var d=a.firstChild;q(new W(b),function(b){a.insertBefore(b,d)})}},wrap:function(a,b){var d=B(b).eq(0).clone()[0],c=a.parentNode;c&&c.replaceChild(d,a);d.appendChild(a)},remove:Eb,detach:function(a){Eb(a,!0)},after:function(a,b){var d=a,c=a.parentNode;if(c){b=new W(b);for(var e=0,f=b.length;e<f;e++){var g=b[e];c.insertBefore(g,d.nextSibling);d=g}}},addClass:Cb,removeClass:Bb,toggleClass:function(a,b,d){b&&q(b.split(" "),function(b){var e=d;w(e)&&(e=!Ab(a,b));
(e?Cb:Bb)(a,b)})},parent:function(a){return(a=a.parentNode)&&11!==a.nodeType?a:null},next:function(a){return a.nextElementSibling},find:function(a,b){return a.getElementsByTagName?a.getElementsByTagName(b):[]},clone:fc,triggerHandler:function(a,b,d){var c,e,f=b.type||b,g=yb(a);if(g=(g=g&&g.events)&&g[f])c={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return!0===this.defaultPrevented},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return!0===
this.immediatePropagationStopped},stopPropagation:z,type:f,target:a},b.type&&(c=S(c,b)),b=pa(g),e=d?[c].concat(d):[c],q(b,function(b){c.isImmediatePropagationStopped()||b.apply(a,e)})}},function(a,b){W.prototype[b]=function(b,c,e){for(var f,g=0,h=this.length;g<h;g++)w(f)?(f=a(this[g],b,c,e),u(f)&&(f=B(f))):ec(f,a(this[g],b,c,e));return u(f)?f:this}});W.prototype.bind=W.prototype.on;W.prototype.unbind=W.prototype.off;var Vg=Object.create(null);kd.prototype={_idx:function(a){if(a===this._lastKey)return this._lastIndex;
this._lastKey=a;return this._lastIndex=this._keys.indexOf(a)},_transformKey:function(a){return da(a)?Vg:a},get:function(a){a=this._transformKey(a);a=this._idx(a);if(-1!==a)return this._values[a]},set:function(a,b){a=this._transformKey(a);var d=this._idx(a);-1===d&&(d=this._lastIndex=this._keys.length);this._keys[d]=a;this._values[d]=b},delete:function(a){a=this._transformKey(a);a=this._idx(a);if(-1===a)return!1;this._keys.splice(a,1);this._values.splice(a,1);this._lastKey=NaN;this._lastIndex=-1;return!0}};
var Gb=kd,Zf=[function(){this.$get=[function(){return Gb}]}],lg=/^([^(]+?)=>/,mg=/^[^(]*\(\s*([^)]*)\)/m,Wg=/,/,Xg=/^\s*(_?)(\S+?)\1\s*$/,kg=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/mg,ya=L("$injector");eb.$$annotate=function(a,b,d){var c;if("function"===typeof a){if(!(c=a.$inject)){c=[];if(a.length){if(b)throw F(d)&&d||(d=a.name||ng(a)),ya("strictdi",d);b=ld(a);q(b[1].split(Wg),function(a){a.replace(Xg,function(a,b,d){c.push(d)})})}a.$inject=c}}else H(a)?(b=a.length-1,sb(a[b],"fn"),c=a.slice(0,b)):sb(a,"fn",
!0);return c};var fe=L("$animate"),qf=function(){this.$get=z},rf=function(){var a=new Gb,b=[];this.$get=["$$AnimateRunner","$rootScope",function(d,c){function e(a,b,c){var d=!1;b&&(b=F(b)?b.split(" "):H(b)?b:[],q(b,function(b){b&&(d=!0,a[b]=c)}));return d}function f(){q(b,function(b){var c=a.get(b);if(c){var d=og(b.attr("class")),e="",f="";q(c,function(a,b){a!==!!d[b]&&(a?e+=(e.length?" ":"")+b:f+=(f.length?" ":"")+b)});q(b,function(a){e&&Cb(a,e);f&&Bb(a,f)});a.delete(b)}});b.length=0}return{enabled:z,
on:z,off:z,pin:z,push:function(g,h,k,l){l&&l();k=k||{};k.from&&g.css(k.from);k.to&&g.css(k.to);if(k.addClass||k.removeClass)if(h=k.addClass,l=k.removeClass,k=a.get(g)||{},h=e(k,h,!0),l=e(k,l,!1),h||l)a.set(g,k),b.push(g),1===b.length&&c.$$postDigest(f);g=new d;g.complete();return g}}}]},of=["$provide",function(a){var b=this,d=null;this.$$registeredAnimations=Object.create(null);this.register=function(c,d){if(c&&"."!==c.charAt(0))throw fe("notcsel",c);var f=c+"-animation";b.$$registeredAnimations[c.substr(1)]=
f;a.factory(f,d)};this.classNameFilter=function(a){if(1===arguments.length&&(d=a instanceof RegExp?a:null)&&/[(\s|\/)]ng-animate[(\s|\/)]/.test(d.toString()))throw d=null,fe("nongcls","ng-animate");return d};this.$get=["$$animateQueue",function(a){function b(a,c,d){if(d){var e;a:{for(e=0;e<d.length;e++){var l=d[e];if(1===l.nodeType){e=l;break a}}e=void 0}!e||e.parentNode||e.previousElementSibling||(d=null)}d?d.after(a):c.prepend(a)}return{on:a.on,off:a.off,pin:a.pin,enabled:a.enabled,cancel:function(a){a.end&&
a.end()},enter:function(d,g,h,k){g=g&&B(g);h=h&&B(h);g=g||h.parent();b(d,g,h);return a.push(d,"enter",ia(k))},move:function(d,g,h,k){g=g&&B(g);h=h&&B(h);g=g||h.parent();b(d,g,h);return a.push(d,"move",ia(k))},leave:function(b,d){return a.push(b,"leave",ia(d),function(){b.remove()})},addClass:function(b,d,e){e=ia(e);e.addClass=ib(e.addclass,d);return a.push(b,"addClass",e)},removeClass:function(b,d,e){e=ia(e);e.removeClass=ib(e.removeClass,d);return a.push(b,"removeClass",e)},setClass:function(b,d,
e,k){k=ia(k);k.addClass=ib(k.addClass,d);k.removeClass=ib(k.removeClass,e);return a.push(b,"setClass",k)},animate:function(b,d,e,k,l){l=ia(l);l.from=l.from?S(l.from,d):d;l.to=l.to?S(l.to,e):e;l.tempClasses=ib(l.tempClasses,k||"ng-inline-animate");return a.push(b,"animate",l)}}}]}],tf=function(){this.$get=["$$rAF",function(a){function b(b){d.push(b);1<d.length||a(function(){for(var a=0;a<d.length;a++)d[a]();d=[]})}var d=[];return function(){var a=!1;b(function(){a=!0});return function(d){a?d():b(d)}}}]},
sf=function(){this.$get=["$q","$sniffer","$$animateAsyncRun","$$isDocumentHidden","$timeout",function(a,b,d,c,e){function f(a){this.setHost(a);var b=d();this._doneCallbacks=[];this._tick=function(a){c()?e(a,0,!1):b(a)};this._state=0}f.chain=function(a,b){function c(){if(d===a.length)b(!0);else a[d](function(a){!1===a?b(!1):(d++,c())})}var d=0;c()};f.all=function(a,b){function c(f){e=e&&f;++d===a.length&&b(e)}var d=0,e=!0;q(a,function(a){a.done(c)})};f.prototype={setHost:function(a){this.host=a||{}},
done:function(a){2===this._state?a():this._doneCallbacks.push(a)},progress:z,getPromise:function(){if(!this.promise){var b=this;this.promise=a(function(a,c){b.done(function(b){!1===b?c():a()})})}return this.promise},then:function(a,b){return this.getPromise().then(a,b)},"catch":function(a){return this.getPromise()["catch"](a)},"finally":function(a){return this.getPromise()["finally"](a)},pause:function(){this.host.pause&&this.host.pause()},resume:function(){this.host.resume&&this.host.resume()},end:function(){this.host.end&&
this.host.end();this._resolve(!0)},cancel:function(){this.host.cancel&&this.host.cancel();this._resolve(!1)},complete:function(a){var b=this;0===b._state&&(b._state=1,b._tick(function(){b._resolve(a)}))},_resolve:function(a){2!==this._state&&(q(this._doneCallbacks,function(b){b(a)}),this._doneCallbacks.length=0,this._state=2)}};return f}]},pf=function(){this.$get=["$$rAF","$q","$$AnimateRunner",function(a,b,d){return function(b,e){function f(){a(function(){g.addClass&&(b.addClass(g.addClass),g.addClass=
null);g.removeClass&&(b.removeClass(g.removeClass),g.removeClass=null);g.to&&(b.css(g.to),g.to=null);h||k.complete();h=!0});return k}var g=e||{};g.$$prepared||(g=ra(g));g.cleanupStyles&&(g.from=g.to=null);g.from&&(b.css(g.from),g.from=null);var h,k=new d;return{start:f,end:f}}}]},fa=L("$compile"),lc=new function(){};Wc.$inject=["$provide","$$sanitizeUriProvider"];Ib.prototype.isFirstChange=function(){return this.previousValue===lc};var md=/^((?:x|data)[:\-_])/i,rg=/[:\-_]+(.)/g,td=L("$controller"),
sd=/^(\S+)(\s+as\s+([\w$]+))?$/,Af=function(){this.$get=["$document",function(a){return function(b){b?!b.nodeType&&b instanceof B&&(b=b[0]):b=a[0].body;return b.offsetWidth+1}}]},ud="application/json",pc={"Content-Type":ud+";charset=utf-8"},ug=/^\[|^\{(?!\{)/,vg={"[":/]$/,"{":/}$/},tg=/^\)]\}',?\n/,oc=L("$http"),Da=ea.$interpolateMinErr=L("$interpolate");Da.throwNoconcat=function(a){throw Da("noconcat",a);};Da.interr=function(a,b){return Da("interr",a,b.toString())};var If=function(){this.$get=function(){function a(a){var b=
function(a){b.data=a;b.called=!0};b.id=a;return b}var b=ea.callbacks,d={};return{createCallback:function(c){c="_"+(b.$$counter++).toString(36);var e="angular.callbacks."+c,f=a(c);d[e]=b[c]=f;return e},wasCalled:function(a){return d[a].called},getResponse:function(a){return d[a].data},removeCallback:function(a){delete b[d[a].id];delete d[a]}}}},Yg=/^([^?#]*)(\?([^#]*))?(#(.*))?$/,xg={http:80,https:443,ftp:21},kb=L("$location"),yg=/^\s*[\\/]{2,}/,Zg={$$absUrl:"",$$html5:!1,$$replace:!1,absUrl:Jb("$$absUrl"),
url:function(a){if(w(a))return this.$$url;var b=Yg.exec(a);(b[1]||""===a)&&this.path(decodeURIComponent(b[1]));(b[2]||b[1]||""===a)&&this.search(b[3]||"");this.hash(b[5]||"");return this},protocol:Jb("$$protocol"),host:Jb("$$host"),port:Jb("$$port"),path:Cd("$$path",function(a){a=null!==a?a.toString():"";return"/"===a.charAt(0)?a:"/"+a}),search:function(a,b){switch(arguments.length){case 0:return this.$$search;case 1:if(F(a)||ba(a))a=a.toString(),this.$$search=Rc(a);else if(C(a))a=ra(a,{}),q(a,function(b,
c){null==b&&delete a[c]}),this.$$search=a;else throw kb("isrcharg");break;default:w(b)||null===b?delete this.$$search[a]:this.$$search[a]=b}this.$$compose();return this},hash:Cd("$$hash",function(a){return null!==a?a.toString():""}),replace:function(){this.$$replace=!0;return this}};q([Bd,tc,sc],function(a){a.prototype=Object.create(Zg);a.prototype.state=function(b){if(!arguments.length)return this.$$state;if(a!==sc||!this.$$html5)throw kb("nostate");this.$$state=w(b)?null:b;this.$$urlUpdatedByLocation=
!0;return this}});var Ua=L("$parse"),Bg={}.constructor.prototype.valueOf,Qb=V();q("+ - * / % === !== == != < > <= >= && || ! = |".split(" "),function(a){Qb[a]=!0});var $g={n:"\n",f:"\f",r:"\r",t:"\t",v:"\v","'":"'",'"':'"'},wc=function(a){this.options=a};wc.prototype={constructor:wc,lex:function(a){this.text=a;this.index=0;for(this.tokens=[];this.index<this.text.length;)if(a=this.text.charAt(this.index),'"'===a||"'"===a)this.readString(a);else if(this.isNumber(a)||"."===a&&this.isNumber(this.peek()))this.readNumber();
else if(this.isIdentifierStart(this.peekMultichar()))this.readIdent();else if(this.is(a,"(){}[].,;:?"))this.tokens.push({index:this.index,text:a}),this.index++;else if(this.isWhitespace(a))this.index++;else{var b=a+this.peek(),d=b+this.peek(2),c=Qb[b],e=Qb[d];Qb[a]||c||e?(a=e?d:c?b:a,this.tokens.push({index:this.index,text:a,operator:!0}),this.index+=a.length):this.throwError("Unexpected next character ",this.index,this.index+1)}return this.tokens},is:function(a,b){return-1!==b.indexOf(a)},peek:function(a){a=
a||1;return this.index+a<this.text.length?this.text.charAt(this.index+a):!1},isNumber:function(a){return"0"<=a&&"9">=a&&"string"===typeof a},isWhitespace:function(a){return" "===a||"\r"===a||"\t"===a||"\n"===a||"\v"===a||"\u00a0"===a},isIdentifierStart:function(a){return this.options.isIdentifierStart?this.options.isIdentifierStart(a,this.codePointAt(a)):this.isValidIdentifierStart(a)},isValidIdentifierStart:function(a){return"a"<=a&&"z">=a||"A"<=a&&"Z">=a||"_"===a||"$"===a},isIdentifierContinue:function(a){return this.options.isIdentifierContinue?
this.options.isIdentifierContinue(a,this.codePointAt(a)):this.isValidIdentifierContinue(a)},isValidIdentifierContinue:function(a,b){return this.isValidIdentifierStart(a,b)||this.isNumber(a)},codePointAt:function(a){return 1===a.length?a.charCodeAt(0):(a.charCodeAt(0)<<10)+a.charCodeAt(1)-56613888},peekMultichar:function(){var a=this.text.charAt(this.index),b=this.peek();if(!b)return a;var d=a.charCodeAt(0),c=b.charCodeAt(0);return 55296<=d&&56319>=d&&56320<=c&&57343>=c?a+b:a},isExpOperator:function(a){return"-"===
a||"+"===a||this.isNumber(a)},throwError:function(a,b,d){d=d||this.index;b=u(b)?"s "+b+"-"+this.index+" ["+this.text.substring(b,d)+"]":" "+d;throw Ua("lexerr",a,b,this.text);},readNumber:function(){for(var a="",b=this.index;this.index<this.text.length;){var d=Q(this.text.charAt(this.index));if("."===d||this.isNumber(d))a+=d;else{var c=this.peek();if("e"===d&&this.isExpOperator(c))a+=d;else if(this.isExpOperator(d)&&c&&this.isNumber(c)&&"e"===a.charAt(a.length-1))a+=d;else if(!this.isExpOperator(d)||
c&&this.isNumber(c)||"e"!==a.charAt(a.length-1))break;else this.throwError("Invalid exponent")}this.index++}this.tokens.push({index:b,text:a,constant:!0,value:Number(a)})},readIdent:function(){var a=this.index;for(this.index+=this.peekMultichar().length;this.index<this.text.length;){var b=this.peekMultichar();if(!this.isIdentifierContinue(b))break;this.index+=b.length}this.tokens.push({index:a,text:this.text.slice(a,this.index),identifier:!0})},readString:function(a){var b=this.index;this.index++;
for(var d="",c=a,e=!1;this.index<this.text.length;){var f=this.text.charAt(this.index),c=c+f;if(e)"u"===f?(e=this.text.substring(this.index+1,this.index+5),e.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+e+"]"),this.index+=4,d+=String.fromCharCode(parseInt(e,16))):d+=$g[f]||f,e=!1;else if("\\"===f)e=!0;else{if(f===a){this.index++;this.tokens.push({index:b,text:c,constant:!0,value:d});return}d+=f}this.index++}this.throwError("Unterminated quote",b)}};var s=function(a,b){this.lexer=
a;this.options=b};s.Program="Program";s.ExpressionStatement="ExpressionStatement";s.AssignmentExpression="AssignmentExpression";s.ConditionalExpression="ConditionalExpression";s.LogicalExpression="LogicalExpression";s.BinaryExpression="BinaryExpression";s.UnaryExpression="UnaryExpression";s.CallExpression="CallExpression";s.MemberExpression="MemberExpression";s.Identifier="Identifier";s.Literal="Literal";s.ArrayExpression="ArrayExpression";s.Property="Property";s.ObjectExpression="ObjectExpression";
s.ThisExpression="ThisExpression";s.LocalsExpression="LocalsExpression";s.NGValueParameter="NGValueParameter";s.prototype={ast:function(a){this.text=a;this.tokens=this.lexer.lex(a);a=this.program();0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]);return a},program:function(){for(var a=[];;)if(0<this.tokens.length&&!this.peek("}",")",";","]")&&a.push(this.expressionStatement()),!this.expect(";"))return{type:s.Program,body:a}},expressionStatement:function(){return{type:s.ExpressionStatement,
expression:this.filterChain()}},filterChain:function(){for(var a=this.expression();this.expect("|");)a=this.filter(a);return a},expression:function(){return this.assignment()},assignment:function(){var a=this.ternary();if(this.expect("=")){if(!Fd(a))throw Ua("lval");a={type:s.AssignmentExpression,left:a,right:this.assignment(),operator:"="}}return a},ternary:function(){var a=this.logicalOR(),b,d;return this.expect("?")&&(b=this.expression(),this.consume(":"))?(d=this.expression(),{type:s.ConditionalExpression,
test:a,alternate:b,consequent:d}):a},logicalOR:function(){for(var a=this.logicalAND();this.expect("||");)a={type:s.LogicalExpression,operator:"||",left:a,right:this.logicalAND()};return a},logicalAND:function(){for(var a=this.equality();this.expect("&&");)a={type:s.LogicalExpression,operator:"&&",left:a,right:this.equality()};return a},equality:function(){for(var a=this.relational(),b;b=this.expect("==","!=","===","!==");)a={type:s.BinaryExpression,operator:b.text,left:a,right:this.relational()};
return a},relational:function(){for(var a=this.additive(),b;b=this.expect("<",">","<=",">=");)a={type:s.BinaryExpression,operator:b.text,left:a,right:this.additive()};return a},additive:function(){for(var a=this.multiplicative(),b;b=this.expect("+","-");)a={type:s.BinaryExpression,operator:b.text,left:a,right:this.multiplicative()};return a},multiplicative:function(){for(var a=this.unary(),b;b=this.expect("*","/","%");)a={type:s.BinaryExpression,operator:b.text,left:a,right:this.unary()};return a},
unary:function(){var a;return(a=this.expect("+","-","!"))?{type:s.UnaryExpression,operator:a.text,prefix:!0,argument:this.unary()}:this.primary()},primary:function(){var a;this.expect("(")?(a=this.filterChain(),this.consume(")")):this.expect("[")?a=this.arrayDeclaration():this.expect("{")?a=this.object():this.selfReferential.hasOwnProperty(this.peek().text)?a=ra(this.selfReferential[this.consume().text]):this.options.literals.hasOwnProperty(this.peek().text)?a={type:s.Literal,value:this.options.literals[this.consume().text]}:
this.peek().identifier?a=this.identifier():this.peek().constant?a=this.constant():this.throwError("not a primary expression",this.peek());for(var b;b=this.expect("(","[",".");)"("===b.text?(a={type:s.CallExpression,callee:a,arguments:this.parseArguments()},this.consume(")")):"["===b.text?(a={type:s.MemberExpression,object:a,property:this.expression(),computed:!0},this.consume("]")):"."===b.text?a={type:s.MemberExpression,object:a,property:this.identifier(),computed:!1}:this.throwError("IMPOSSIBLE");
return a},filter:function(a){a=[a];for(var b={type:s.CallExpression,callee:this.identifier(),arguments:a,filter:!0};this.expect(":");)a.push(this.expression());return b},parseArguments:function(){var a=[];if(")"!==this.peekToken().text){do a.push(this.filterChain());while(this.expect(","))}return a},identifier:function(){var a=this.consume();a.identifier||this.throwError("is not a valid identifier",a);return{type:s.Identifier,name:a.text}},constant:function(){return{type:s.Literal,value:this.consume().value}},
arrayDeclaration:function(){var a=[];if("]"!==this.peekToken().text){do{if(this.peek("]"))break;a.push(this.expression())}while(this.expect(","))}this.consume("]");return{type:s.ArrayExpression,elements:a}},object:function(){var a=[],b;if("}"!==this.peekToken().text){do{if(this.peek("}"))break;b={type:s.Property,kind:"init"};this.peek().constant?(b.key=this.constant(),b.computed=!1,this.consume(":"),b.value=this.expression()):this.peek().identifier?(b.key=this.identifier(),b.computed=!1,this.peek(":")?
(this.consume(":"),b.value=this.expression()):b.value=b.key):this.peek("[")?(this.consume("["),b.key=this.expression(),this.consume("]"),b.computed=!0,this.consume(":"),b.value=this.expression()):this.throwError("invalid key",this.peek());a.push(b)}while(this.expect(","))}this.consume("}");return{type:s.ObjectExpression,properties:a}},throwError:function(a,b){throw Ua("syntax",b.text,a,b.index+1,this.text,this.text.substring(b.index));},consume:function(a){if(0===this.tokens.length)throw Ua("ueoe",
this.text);var b=this.expect(a);b||this.throwError("is unexpected, expecting ["+a+"]",this.peek());return b},peekToken:function(){if(0===this.tokens.length)throw Ua("ueoe",this.text);return this.tokens[0]},peek:function(a,b,d,c){return this.peekAhead(0,a,b,d,c)},peekAhead:function(a,b,d,c,e){if(this.tokens.length>a){a=this.tokens[a];var f=a.text;if(f===b||f===d||f===c||f===e||!(b||d||c||e))return a}return!1},expect:function(a,b,d,c){return(a=this.peek(a,b,d,c))?(this.tokens.shift(),a):!1},selfReferential:{"this":{type:s.ThisExpression},
$locals:{type:s.LocalsExpression}}};Hd.prototype={compile:function(a){var b=this;this.state={nextId:0,filters:{},fn:{vars:[],body:[],own:{}},assign:{vars:[],body:[],own:{}},inputs:[]};U(a,b.$filter);var d="",c;this.stage="assign";if(c=Gd(a))this.state.computing="assign",d=this.nextId(),this.recurse(c,d),this.return_(d),d="fn.assign="+this.generateFunction("assign","s,v,l");c=Ed(a.body);b.stage="inputs";q(c,function(a,c){var d="fn"+c;b.state[d]={vars:[],body:[],own:{}};b.state.computing=d;var h=b.nextId();
b.recurse(a,h);b.return_(h);b.state.inputs.push(d);a.watchId=c});this.state.computing="fn";this.stage="main";this.recurse(a);a='"'+this.USE+" "+this.STRICT+'";\n'+this.filterPrefix()+"var fn="+this.generateFunction("fn","s,l,a,i")+d+this.watchFns()+"return fn;";a=(new Function("$filter","getStringValue","ifDefined","plus",a))(this.$filter,zg,Ag,Dd);this.state=this.stage=void 0;return a},USE:"use",STRICT:"strict",watchFns:function(){var a=[],b=this.state.inputs,d=this;q(b,function(b){a.push("var "+
b+"="+d.generateFunction(b,"s"))});b.length&&a.push("fn.inputs=["+b.join(",")+"];");return a.join("")},generateFunction:function(a,b){return"function("+b+"){"+this.varsPrefix(a)+this.body(a)+"};"},filterPrefix:function(){var a=[],b=this;q(this.state.filters,function(d,c){a.push(d+"=$filter("+b.escape(c)+")")});return a.length?"var "+a.join(",")+";":""},varsPrefix:function(a){return this.state[a].vars.length?"var "+this.state[a].vars.join(",")+";":""},body:function(a){return this.state[a].body.join("")},
recurse:function(a,b,d,c,e,f){var g,h,k=this,l,m,n;c=c||z;if(!f&&u(a.watchId))b=b||this.nextId(),this.if_("i",this.lazyAssign(b,this.computedMember("i",a.watchId)),this.lazyRecurse(a,b,d,c,e,!0));else switch(a.type){case s.Program:q(a.body,function(b,c){k.recurse(b.expression,void 0,void 0,function(a){h=a});c!==a.body.length-1?k.current().body.push(h,";"):k.return_(h)});break;case s.Literal:m=this.escape(a.value);this.assign(b,m);c(b||m);break;case s.UnaryExpression:this.recurse(a.argument,void 0,
void 0,function(a){h=a});m=a.operator+"("+this.ifDefined(h,0)+")";this.assign(b,m);c(m);break;case s.BinaryExpression:this.recurse(a.left,void 0,void 0,function(a){g=a});this.recurse(a.right,void 0,void 0,function(a){h=a});m="+"===a.operator?this.plus(g,h):"-"===a.operator?this.ifDefined(g,0)+a.operator+this.ifDefined(h,0):"("+g+")"+a.operator+"("+h+")";this.assign(b,m);c(m);break;case s.LogicalExpression:b=b||this.nextId();k.recurse(a.left,b);k.if_("&&"===a.operator?b:k.not(b),k.lazyRecurse(a.right,
b));c(b);break;case s.ConditionalExpression:b=b||this.nextId();k.recurse(a.test,b);k.if_(b,k.lazyRecurse(a.alternate,b),k.lazyRecurse(a.consequent,b));c(b);break;case s.Identifier:b=b||this.nextId();d&&(d.context="inputs"===k.stage?"s":this.assign(this.nextId(),this.getHasOwnProperty("l",a.name)+"?l:s"),d.computed=!1,d.name=a.name);k.if_("inputs"===k.stage||k.not(k.getHasOwnProperty("l",a.name)),function(){k.if_("inputs"===k.stage||"s",function(){e&&1!==e&&k.if_(k.isNull(k.nonComputedMember("s",a.name)),
k.lazyAssign(k.nonComputedMember("s",a.name),"{}"));k.assign(b,k.nonComputedMember("s",a.name))})},b&&k.lazyAssign(b,k.nonComputedMember("l",a.name)));c(b);break;case s.MemberExpression:g=d&&(d.context=this.nextId())||this.nextId();b=b||this.nextId();k.recurse(a.object,g,void 0,function(){k.if_(k.notNull(g),function(){a.computed?(h=k.nextId(),k.recurse(a.property,h),k.getStringValue(h),e&&1!==e&&k.if_(k.not(k.computedMember(g,h)),k.lazyAssign(k.computedMember(g,h),"{}")),m=k.computedMember(g,h),k.assign(b,
m),d&&(d.computed=!0,d.name=h)):(e&&1!==e&&k.if_(k.isNull(k.nonComputedMember(g,a.property.name)),k.lazyAssign(k.nonComputedMember(g,a.property.name),"{}")),m=k.nonComputedMember(g,a.property.name),k.assign(b,m),d&&(d.computed=!1,d.name=a.property.name))},function(){k.assign(b,"undefined")});c(b)},!!e);break;case s.CallExpression:b=b||this.nextId();a.filter?(h=k.filter(a.callee.name),l=[],q(a.arguments,function(a){var b=k.nextId();k.recurse(a,b);l.push(b)}),m=h+"("+l.join(",")+")",k.assign(b,m),c(b)):
(h=k.nextId(),g={},l=[],k.recurse(a.callee,h,g,function(){k.if_(k.notNull(h),function(){q(a.arguments,function(b){k.recurse(b,a.constant?void 0:k.nextId(),void 0,function(a){l.push(a)})});m=g.name?k.member(g.context,g.name,g.computed)+"("+l.join(",")+")":h+"("+l.join(",")+")";k.assign(b,m)},function(){k.assign(b,"undefined")});c(b)}));break;case s.AssignmentExpression:h=this.nextId();g={};this.recurse(a.left,void 0,g,function(){k.if_(k.notNull(g.context),function(){k.recurse(a.right,h);m=k.member(g.context,
g.name,g.computed)+a.operator+h;k.assign(b,m);c(b||m)})},1);break;case s.ArrayExpression:l=[];q(a.elements,function(b){k.recurse(b,a.constant?void 0:k.nextId(),void 0,function(a){l.push(a)})});m="["+l.join(",")+"]";this.assign(b,m);c(b||m);break;case s.ObjectExpression:l=[];n=!1;q(a.properties,function(a){a.computed&&(n=!0)});n?(b=b||this.nextId(),this.assign(b,"{}"),q(a.properties,function(a){a.computed?(g=k.nextId(),k.recurse(a.key,g)):g=a.key.type===s.Identifier?a.key.name:""+a.key.value;h=k.nextId();
k.recurse(a.value,h);k.assign(k.member(b,g,a.computed),h)})):(q(a.properties,function(b){k.recurse(b.value,a.constant?void 0:k.nextId(),void 0,function(a){l.push(k.escape(b.key.type===s.Identifier?b.key.name:""+b.key.value)+":"+a)})}),m="{"+l.join(",")+"}",this.assign(b,m));c(b||m);break;case s.ThisExpression:this.assign(b,"s");c(b||"s");break;case s.LocalsExpression:this.assign(b,"l");c(b||"l");break;case s.NGValueParameter:this.assign(b,"v"),c(b||"v")}},getHasOwnProperty:function(a,b){var d=a+"."+
b,c=this.current().own;c.hasOwnProperty(d)||(c[d]=this.nextId(!1,a+"&&("+this.escape(b)+" in "+a+")"));return c[d]},assign:function(a,b){if(a)return this.current().body.push(a,"=",b,";"),a},filter:function(a){this.state.filters.hasOwnProperty(a)||(this.state.filters[a]=this.nextId(!0));return this.state.filters[a]},ifDefined:function(a,b){return"ifDefined("+a+","+this.escape(b)+")"},plus:function(a,b){return"plus("+a+","+b+")"},return_:function(a){this.current().body.push("return ",a,";")},if_:function(a,
b,d){if(!0===a)b();else{var c=this.current().body;c.push("if(",a,"){");b();c.push("}");d&&(c.push("else{"),d(),c.push("}"))}},not:function(a){return"!("+a+")"},isNull:function(a){return a+"==null"},notNull:function(a){return a+"!=null"},nonComputedMember:function(a,b){var d=/[^$_a-zA-Z0-9]/g;return/^[$_a-zA-Z][$_a-zA-Z0-9]*$/.test(b)?a+"."+b:a+'["'+b.replace(d,this.stringEscapeFn)+'"]'},computedMember:function(a,b){return a+"["+b+"]"},member:function(a,b,d){return d?this.computedMember(a,b):this.nonComputedMember(a,
b)},getStringValue:function(a){this.assign(a,"getStringValue("+a+")")},lazyRecurse:function(a,b,d,c,e,f){var g=this;return function(){g.recurse(a,b,d,c,e,f)}},lazyAssign:function(a,b){var d=this;return function(){d.assign(a,b)}},stringEscapeRegex:/[^ a-zA-Z0-9]/g,stringEscapeFn:function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)},escape:function(a){if(F(a))return"'"+a.replace(this.stringEscapeRegex,this.stringEscapeFn)+"'";if(ba(a))return a.toString();if(!0===a)return"true";if(!1===
a)return"false";if(null===a)return"null";if("undefined"===typeof a)return"undefined";throw Ua("esc");},nextId:function(a,b){var d="v"+this.state.nextId++;a||this.current().vars.push(d+(b?"="+b:""));return d},current:function(){return this.state[this.state.computing]}};Id.prototype={compile:function(a){var b=this;U(a,b.$filter);var d,c;if(d=Gd(a))c=this.recurse(d);d=Ed(a.body);var e;d&&(e=[],q(d,function(a,c){var d=b.recurse(a);a.input=d;e.push(d);a.watchId=c}));var f=[];q(a.body,function(a){f.push(b.recurse(a.expression))});
a=0===a.body.length?z:1===a.body.length?f[0]:function(a,b){var c;q(f,function(d){c=d(a,b)});return c};c&&(a.assign=function(a,b,d){return c(a,d,b)});e&&(a.inputs=e);return a},recurse:function(a,b,d){var c,e,f=this,g;if(a.input)return this.inputs(a.input,a.watchId);switch(a.type){case s.Literal:return this.value(a.value,b);case s.UnaryExpression:return e=this.recurse(a.argument),this["unary"+a.operator](e,b);case s.BinaryExpression:return c=this.recurse(a.left),e=this.recurse(a.right),this["binary"+
a.operator](c,e,b);case s.LogicalExpression:return c=this.recurse(a.left),e=this.recurse(a.right),this["binary"+a.operator](c,e,b);case s.ConditionalExpression:return this["ternary?:"](this.recurse(a.test),this.recurse(a.alternate),this.recurse(a.consequent),b);case s.Identifier:return f.identifier(a.name,b,d);case s.MemberExpression:return c=this.recurse(a.object,!1,!!d),a.computed||(e=a.property.name),a.computed&&(e=this.recurse(a.property)),a.computed?this.computedMember(c,e,b,d):this.nonComputedMember(c,
e,b,d);case s.CallExpression:return g=[],q(a.arguments,function(a){g.push(f.recurse(a))}),a.filter&&(e=this.$filter(a.callee.name)),a.filter||(e=this.recurse(a.callee,!0)),a.filter?function(a,c,d,f){for(var n=[],p=0;p<g.length;++p)n.push(g[p](a,c,d,f));a=e.apply(void 0,n,f);return b?{context:void 0,name:void 0,value:a}:a}:function(a,c,d,f){var n=e(a,c,d,f),p;if(null!=n.value){p=[];for(var r=0;r<g.length;++r)p.push(g[r](a,c,d,f));p=n.value.apply(n.context,p)}return b?{value:p}:p};case s.AssignmentExpression:return c=
this.recurse(a.left,!0,1),e=this.recurse(a.right),function(a,d,f,g){var n=c(a,d,f,g);a=e(a,d,f,g);n.context[n.name]=a;return b?{value:a}:a};case s.ArrayExpression:return g=[],q(a.elements,function(a){g.push(f.recurse(a))}),function(a,c,d,e){for(var f=[],p=0;p<g.length;++p)f.push(g[p](a,c,d,e));return b?{value:f}:f};case s.ObjectExpression:return g=[],q(a.properties,function(a){a.computed?g.push({key:f.recurse(a.key),computed:!0,value:f.recurse(a.value)}):g.push({key:a.key.type===s.Identifier?a.key.name:
""+a.key.value,computed:!1,value:f.recurse(a.value)})}),function(a,c,d,e){for(var f={},p=0;p<g.length;++p)g[p].computed?f[g[p].key(a,c,d,e)]=g[p].value(a,c,d,e):f[g[p].key]=g[p].value(a,c,d,e);return b?{value:f}:f};case s.ThisExpression:return function(a){return b?{value:a}:a};case s.LocalsExpression:return function(a,c){return b?{value:c}:c};case s.NGValueParameter:return function(a,c,d){return b?{value:d}:d}}},"unary+":function(a,b){return function(d,c,e,f){d=a(d,c,e,f);d=u(d)?+d:0;return b?{value:d}:
d}},"unary-":function(a,b){return function(d,c,e,f){d=a(d,c,e,f);d=u(d)?-d:-0;return b?{value:d}:d}},"unary!":function(a,b){return function(d,c,e,f){d=!a(d,c,e,f);return b?{value:d}:d}},"binary+":function(a,b,d){return function(c,e,f,g){var h=a(c,e,f,g);c=b(c,e,f,g);h=Dd(h,c);return d?{value:h}:h}},"binary-":function(a,b,d){return function(c,e,f,g){var h=a(c,e,f,g);c=b(c,e,f,g);h=(u(h)?h:0)-(u(c)?c:0);return d?{value:h}:h}},"binary*":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)*b(c,e,f,g);
return d?{value:c}:c}},"binary/":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)/b(c,e,f,g);return d?{value:c}:c}},"binary%":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)%b(c,e,f,g);return d?{value:c}:c}},"binary===":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)===b(c,e,f,g);return d?{value:c}:c}},"binary!==":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)!==b(c,e,f,g);return d?{value:c}:c}},"binary==":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)==b(c,e,f,g);return d?
{value:c}:c}},"binary!=":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)!=b(c,e,f,g);return d?{value:c}:c}},"binary<":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)<b(c,e,f,g);return d?{value:c}:c}},"binary>":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)>b(c,e,f,g);return d?{value:c}:c}},"binary<=":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)<=b(c,e,f,g);return d?{value:c}:c}},"binary>=":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)>=b(c,e,f,g);return d?{value:c}:
c}},"binary&&":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)&&b(c,e,f,g);return d?{value:c}:c}},"binary||":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)||b(c,e,f,g);return d?{value:c}:c}},"ternary?:":function(a,b,d,c){return function(e,f,g,h){e=a(e,f,g,h)?b(e,f,g,h):d(e,f,g,h);return c?{value:e}:e}},value:function(a,b){return function(){return b?{context:void 0,name:void 0,value:a}:a}},identifier:function(a,b,d){return function(c,e,f,g){c=e&&a in e?e:c;d&&1!==d&&c&&null==c[a]&&(c[a]=
{});e=c?c[a]:void 0;return b?{context:c,name:a,value:e}:e}},computedMember:function(a,b,d,c){return function(e,f,g,h){var k=a(e,f,g,h),l,m;null!=k&&(l=b(e,f,g,h),l+="",c&&1!==c&&k&&!k[l]&&(k[l]={}),m=k[l]);return d?{context:k,name:l,value:m}:m}},nonComputedMember:function(a,b,d,c){return function(e,f,g,h){e=a(e,f,g,h);c&&1!==c&&e&&null==e[b]&&(e[b]={});f=null!=e?e[b]:void 0;return d?{context:e,name:b,value:f}:f}},inputs:function(a,b){return function(d,c,e,f){return f?f[b]:a(d,c,e)}}};uc.prototype=
{constructor:uc,parse:function(a){a=this.ast.ast(a);var b=this.astCompiler.compile(a);b.literal=0===a.body.length||1===a.body.length&&(a.body[0].expression.type===s.Literal||a.body[0].expression.type===s.ArrayExpression||a.body[0].expression.type===s.ObjectExpression);b.constant=a.constant;return b}};var ta=L("$sce"),oa={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},xc=/_([a-z])/g,Dg=L("$compile"),aa=x.document.createElement("a"),Md=Ca(x.location.href);Nd.$inject=["$document"];
cd.$inject=["$provide"];var Ud=22,Td=".",zc="0";Od.$inject=["$locale"];Qd.$inject=["$locale"];var Og={yyyy:Y("FullYear",4,0,!1,!0),yy:Y("FullYear",2,0,!0,!0),y:Y("FullYear",1,0,!1,!0),MMMM:mb("Month"),MMM:mb("Month",!0),MM:Y("Month",2,1),M:Y("Month",1,1),LLLL:mb("Month",!1,!0),dd:Y("Date",2),d:Y("Date",1),HH:Y("Hours",2),H:Y("Hours",1),hh:Y("Hours",2,-12),h:Y("Hours",1,-12),mm:Y("Minutes",2),m:Y("Minutes",1),ss:Y("Seconds",2),s:Y("Seconds",1),sss:Y("Milliseconds",3),EEEE:mb("Day"),EEE:mb("Day",!0),
a:function(a,b){return 12>a.getHours()?b.AMPMS[0]:b.AMPMS[1]},Z:function(a,b,d){a=-1*d;return a=(0<=a?"+":"")+(Kb(Math[0<a?"floor":"ceil"](a/60),2)+Kb(Math.abs(a%60),2))},ww:Wd(2),w:Wd(1),G:Ac,GG:Ac,GGG:Ac,GGGG:function(a,b){return 0>=a.getFullYear()?b.ERANAMES[0]:b.ERANAMES[1]}},Ng=/((?:[^yMLdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|L+|d+|H+|h+|m+|s+|a|Z|G+|w+))([\s\S]*)/,Mg=/^-?\d+$/;Pd.$inject=["$locale"];var Hg=la(Q),Ig=la(ub);Rd.$inject=["$parse"];var Fe=la({restrict:"E",compile:function(a,
b){if(!b.href&&!b.xlinkHref)return function(a,b){if("a"===b[0].nodeName.toLowerCase()){var e="[object SVGAnimatedString]"===ma.call(b.prop("href"))?"xlink:href":"href";b.on("click",function(a){b.attr(e)||a.preventDefault()})}}}}),vb={};q(Fb,function(a,b){function d(a,d,e){a.$watch(e[c],function(a){e.$set(b,!!a)})}if("multiple"!==a){var c=Ba("ng-"+b),e=d;"checked"===a&&(e=function(a,b,e){e.ngModel!==e[c]&&d(a,b,e)});vb[c]=function(){return{restrict:"A",priority:100,link:e}}}});q(rd,function(a,b){vb[b]=
function(){return{priority:100,link:function(a,c,e){if("ngPattern"===b&&"/"===e.ngPattern.charAt(0)&&(c=e.ngPattern.match(Sg))){e.$set("ngPattern",new RegExp(c[1],c[2]));return}a.$watch(e[b],function(a){e.$set(b,a)})}}}});q(["src","srcset","href"],function(a){var b=Ba("ng-"+a);vb[b]=function(){return{priority:99,link:function(d,c,e){var f=a,g=a;"href"===a&&"[object SVGAnimatedString]"===ma.call(c.prop("href"))&&(g="xlinkHref",e.$attr[g]="xlink:href",f=null);e.$observe(b,function(b){b?(e.$set(g,b),
za&&f&&c.prop(f,e[g])):"href"===a&&e.$set(g,null)})}}}});var Mb={$addControl:z,$$renameControl:function(a,b){a.$name=b},$removeControl:z,$setValidity:z,$setDirty:z,$setPristine:z,$setSubmitted:z};Lb.$inject=["$element","$attrs","$scope","$animate","$interpolate"];Lb.prototype={$rollbackViewValue:function(){q(this.$$controls,function(a){a.$rollbackViewValue()})},$commitViewValue:function(){q(this.$$controls,function(a){a.$commitViewValue()})},$addControl:function(a){Ka(a.$name,"input");this.$$controls.push(a);
a.$name&&(this[a.$name]=a);a.$$parentForm=this},$$renameControl:function(a,b){var d=a.$name;this[d]===a&&delete this[d];this[b]=a;a.$name=b},$removeControl:function(a){a.$name&&this[a.$name]===a&&delete this[a.$name];q(this.$pending,function(b,d){this.$setValidity(d,null,a)},this);q(this.$error,function(b,d){this.$setValidity(d,null,a)},this);q(this.$$success,function(b,d){this.$setValidity(d,null,a)},this);$a(this.$$controls,a);a.$$parentForm=Mb},$setDirty:function(){this.$$animate.removeClass(this.$$element,
Va);this.$$animate.addClass(this.$$element,Rb);this.$dirty=!0;this.$pristine=!1;this.$$parentForm.$setDirty()},$setPristine:function(){this.$$animate.setClass(this.$$element,Va,Rb+" ng-submitted");this.$dirty=!1;this.$pristine=!0;this.$submitted=!1;q(this.$$controls,function(a){a.$setPristine()})},$setUntouched:function(){q(this.$$controls,function(a){a.$setUntouched()})},$setSubmitted:function(){this.$$animate.addClass(this.$$element,"ng-submitted");this.$submitted=!0;this.$$parentForm.$setSubmitted()}};
Zd({clazz:Lb,set:function(a,b,d){var c=a[b];c?-1===c.indexOf(d)&&c.push(d):a[b]=[d]},unset:function(a,b,d){var c=a[b];c&&($a(c,d),0===c.length&&delete a[b])}});var ge=function(a){return["$timeout","$parse",function(b,d){function c(a){return""===a?d('this[""]').assign:d(a).assign||z}return{name:"form",restrict:a?"EAC":"E",require:["form","^^?form"],controller:Lb,compile:function(d,f){d.addClass(Va).addClass(nb);var g=f.name?"name":a&&f.ngForm?"ngForm":!1;return{pre:function(a,d,e,f){var n=f[0];if(!("action"in
e)){var p=function(b){a.$apply(function(){n.$commitViewValue();n.$setSubmitted()});b.preventDefault()};d[0].addEventListener("submit",p);d.on("$destroy",function(){b(function(){d[0].removeEventListener("submit",p)},0,!1)})}(f[1]||n.$$parentForm).$addControl(n);var r=g?c(n.$name):z;g&&(r(a,n),e.$observe(g,function(b){n.$name!==b&&(r(a,void 0),n.$$parentForm.$$renameControl(n,b),r=c(n.$name),r(a,n))}));d.on("$destroy",function(){n.$$parentForm.$removeControl(n);r(a,void 0);S(n,Mb)})}}}}}]},Ge=ge(),
Se=ge(!0),Pg=/^\d{4,}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+(?:[+-][0-2]\d:[0-5]\d|Z)$/,ah=/^[a-z][a-z\d.+-]*:\/*(?:[^:@]+(?::[^@]+)?@)?(?:[^\s:/?#]+|\[[a-f\d:]+])(?::\d+)?(?:\/[^?#]*)?(?:\?[^#]*)?(?:#.*)?$/i,bh=/^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+(\.[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/,Qg=/^\s*(-|\+)?(\d+|(\d*(\.\d*)))([eE][+-]?\d+)?\s*$/,he=/^(\d{4,})-(\d{2})-(\d{2})$/,ie=/^(\d{4,})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,
Hc=/^(\d{4,})-W(\d\d)$/,je=/^(\d{4,})-(\d\d)$/,ke=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,ae=V();q(["date","datetime-local","month","time","week"],function(a){ae[a]=!0});var le={text:function(a,b,d,c,e,f){Ra(a,b,d,c,e,f);Cc(c)},date:ob("date",he,Nb(he,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":ob("datetimelocal",ie,Nb(ie,"yyyy MM dd HH mm ss sss".split(" ")),"yyyy-MM-ddTHH:mm:ss.sss"),time:ob("time",ke,Nb(ke,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:ob("week",Hc,function(a,b){if(ga(a))return a;
if(F(a)){Hc.lastIndex=0;var d=Hc.exec(a);if(d){var c=+d[1],e=+d[2],f=d=0,g=0,h=0,k=Vd(c),e=7*(e-1);b&&(d=b.getHours(),f=b.getMinutes(),g=b.getSeconds(),h=b.getMilliseconds());return new Date(c,0,k.getDate()+e,d,f,g,h)}}return NaN},"yyyy-Www"),month:ob("month",je,Nb(je,["yyyy","MM"]),"yyyy-MM"),number:function(a,b,d,c,e,f){Dc(a,b,d,c);be(c);Ra(a,b,d,c,e,f);var g,h;if(u(d.min)||d.ngMin)c.$validators.min=function(a){return c.$isEmpty(a)||w(g)||a>=g},d.$observe("min",function(a){g=Sa(a);c.$validate()});
if(u(d.max)||d.ngMax)c.$validators.max=function(a){return c.$isEmpty(a)||w(h)||a<=h},d.$observe("max",function(a){h=Sa(a);c.$validate()});if(u(d.step)||d.ngStep){var k;c.$validators.step=function(a,b){return c.$isEmpty(b)||w(k)||ce(b,g||0,k)};d.$observe("step",function(a){k=Sa(a);c.$validate()})}},url:function(a,b,d,c,e,f){Ra(a,b,d,c,e,f);Cc(c);c.$$parserName="url";c.$validators.url=function(a,b){var d=a||b;return c.$isEmpty(d)||ah.test(d)}},email:function(a,b,d,c,e,f){Ra(a,b,d,c,e,f);Cc(c);c.$$parserName=
"email";c.$validators.email=function(a,b){var d=a||b;return c.$isEmpty(d)||bh.test(d)}},radio:function(a,b,d,c){var e=!d.ngTrim||"false"!==T(d.ngTrim);w(d.name)&&b.attr("name",++qb);b.on("click",function(a){var g;b[0].checked&&(g=d.value,e&&(g=T(g)),c.$setViewValue(g,a&&a.type))});c.$render=function(){var a=d.value;e&&(a=T(a));b[0].checked=a===c.$viewValue};d.$observe("value",c.$render)},range:function(a,b,d,c,e,f){function g(a,c){b.attr(a,d[a]);d.$observe(a,c)}function h(a){n=Sa(a);da(c.$modelValue)||
(m?(a=b.val(),n>a&&(a=n,b.val(a)),c.$setViewValue(a)):c.$validate())}function k(a){p=Sa(a);da(c.$modelValue)||(m?(a=b.val(),p<a&&(b.val(p),a=p<n?n:p),c.$setViewValue(a)):c.$validate())}function l(a){r=Sa(a);da(c.$modelValue)||(m&&c.$viewValue!==b.val()?c.$setViewValue(b.val()):c.$validate())}Dc(a,b,d,c);be(c);Ra(a,b,d,c,e,f);var m=c.$$hasNativeValidators&&"range"===b[0].type,n=m?0:void 0,p=m?100:void 0,r=m?1:void 0,q=b[0].validity;a=u(d.min);e=u(d.max);f=u(d.step);var s=c.$render;c.$render=m&&u(q.rangeUnderflow)&&
u(q.rangeOverflow)?function(){s();c.$setViewValue(b.val())}:s;a&&(c.$validators.min=m?function(){return!0}:function(a,b){return c.$isEmpty(b)||w(n)||b>=n},g("min",h));e&&(c.$validators.max=m?function(){return!0}:function(a,b){return c.$isEmpty(b)||w(p)||b<=p},g("max",k));f&&(c.$validators.step=m?function(){return!q.stepMismatch}:function(a,b){return c.$isEmpty(b)||w(r)||ce(b,n||0,r)},g("step",l))},checkbox:function(a,b,d,c,e,f,g,h){var k=de(h,a,"ngTrueValue",d.ngTrueValue,!0),l=de(h,a,"ngFalseValue",
d.ngFalseValue,!1);b.on("click",function(a){c.$setViewValue(b[0].checked,a&&a.type)});c.$render=function(){b[0].checked=c.$viewValue};c.$isEmpty=function(a){return!1===a};c.$formatters.push(function(a){return sa(a,k)});c.$parsers.push(function(a){return a?k:l})},hidden:z,button:z,submit:z,reset:z,file:z},Xc=["$browser","$sniffer","$filter","$parse",function(a,b,d,c){return{restrict:"E",require:["?ngModel"],link:{pre:function(e,f,g,h){h[0]&&(le[Q(g.type)]||le.text)(e,f,g,h[0],b,a,d,c)}}}}],ch=/^(true|false|\d+)$/,
kf=function(){function a(a,d,c){var e=u(c)?c:9===za?"":null;a.prop("value",e);d.$set("value",c)}return{restrict:"A",priority:100,compile:function(b,d){return ch.test(d.ngValue)?function(b,d,f){b=b.$eval(f.ngValue);a(d,f,b)}:function(b,d,f){b.$watch(f.ngValue,function(b){a(d,f,b)})}}}},Ke=["$compile",function(a){return{restrict:"AC",compile:function(b){a.$$addBindingClass(b);return function(b,c,e){a.$$addBindingInfo(c,e.ngBind);c=c[0];b.$watch(e.ngBind,function(a){c.textContent=$b(a)})}}}}],Me=["$interpolate",
"$compile",function(a,b){return{compile:function(d){b.$$addBindingClass(d);return function(c,d,f){c=a(d.attr(f.$attr.ngBindTemplate));b.$$addBindingInfo(d,c.expressions);d=d[0];f.$observe("ngBindTemplate",function(a){d.textContent=w(a)?"":a})}}}}],Le=["$sce","$parse","$compile",function(a,b,d){return{restrict:"A",compile:function(c,e){var f=b(e.ngBindHtml),g=b(e.ngBindHtml,function(b){return a.valueOf(b)});d.$$addBindingClass(c);return function(b,c,e){d.$$addBindingInfo(c,e.ngBindHtml);b.$watch(g,
function(){var d=f(b);c.html(a.getTrustedHtml(d)||"")})}}}}],jf=la({restrict:"A",require:"ngModel",link:function(a,b,d,c){c.$viewChangeListeners.push(function(){a.$eval(d.ngChange)})}}),Ne=Fc("",!0),Pe=Fc("Odd",0),Oe=Fc("Even",1),Qe=Qa({compile:function(a,b){b.$set("ngCloak",void 0);a.removeClass("ng-cloak")}}),Re=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],bd={},dh={blur:!0,focus:!0};q("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),
function(a){var b=Ba("ng-"+a);bd[b]=["$parse","$rootScope",function(d,c){return{restrict:"A",compile:function(e,f){var g=d(f[b]);return function(b,d){d.on(a,function(d){var e=function(){g(b,{$event:d})};dh[a]&&c.$$phase?b.$evalAsync(e):b.$apply(e)})}}}}]});var Ue=["$animate","$compile",function(a,b){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(d,c,e,f,g){var h,k,l;d.$watch(e.ngIf,function(d){d?k||g(function(d,f){k=f;d[d.length++]=b.$$createComment("end ngIf",
e.ngIf);h={clone:d};a.enter(d,c.parent(),c)}):(l&&(l.remove(),l=null),k&&(k.$destroy(),k=null),h&&(l=tb(h.clone),a.leave(l).done(function(a){!1!==a&&(l=null)}),h=null))})}}}],Ve=["$templateRequest","$anchorScroll","$animate",function(a,b,d){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:ea.noop,compile:function(c,e){var f=e.ngInclude||e.src,g=e.onload||"",h=e.autoscroll;return function(c,e,m,n,p){var r=0,q,s,t,w=function(){s&&(s.remove(),s=null);q&&(q.$destroy(),q=
null);t&&(d.leave(t).done(function(a){!1!==a&&(s=null)}),s=t,t=null)};c.$watch(f,function(f){var m=function(a){!1===a||!u(h)||h&&!c.$eval(h)||b()},s=++r;f?(a(f,!0).then(function(a){if(!c.$$destroyed&&s===r){var b=c.$new();n.template=a;a=p(b,function(a){w();d.enter(a,null,e).done(m)});q=b;t=a;q.$emit("$includeContentLoaded",f);c.$eval(g)}},function(){c.$$destroyed||s!==r||(w(),c.$emit("$includeContentError",f))}),c.$emit("$includeContentRequested",f)):(w(),n.template=null)})}}}}],mf=["$compile",function(a){return{restrict:"ECA",
priority:-400,require:"ngInclude",link:function(b,d,c,e){ma.call(d[0]).match(/SVG/)?(d.empty(),a(dd(e.template,x.document).childNodes)(b,function(a){d.append(a)},{futureParentElement:d})):(d.html(e.template),a(d.contents())(b))}}}],We=Qa({priority:450,compile:function(){return{pre:function(a,b,d){a.$eval(d.ngInit)}}}}),hf=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(a,b,d,c){var e=d.ngList||", ",f="false"!==d.ngTrim,g=f?T(e):e;c.$parsers.push(function(a){if(!w(a)){var b=
[];a&&q(a.split(g),function(a){a&&b.push(f?T(a):a)});return b}});c.$formatters.push(function(a){if(H(a))return a.join(e)});c.$isEmpty=function(a){return!a||!a.length}}}},nb="ng-valid",Yd="ng-invalid",Va="ng-pristine",Rb="ng-dirty",pb=L("ngModel");Ob.$inject="$scope $exceptionHandler $attrs $element $parse $animate $timeout $q $interpolate".split(" ");Ob.prototype={$$initGetterSetters:function(){if(this.$options.getOption("getterSetter")){var a=this.$$parse(this.$$attr.ngModel+"()"),b=this.$$parse(this.$$attr.ngModel+
"($$$p)");this.$$ngModelGet=function(b){var c=this.$$parsedNgModel(b);D(c)&&(c=a(b));return c};this.$$ngModelSet=function(a,c){D(this.$$parsedNgModel(a))?b(a,{$$$p:c}):this.$$parsedNgModelAssign(a,c)}}else if(!this.$$parsedNgModel.assign)throw pb("nonassign",this.$$attr.ngModel,xa(this.$$element));},$render:z,$isEmpty:function(a){return w(a)||""===a||null===a||a!==a},$$updateEmptyClasses:function(a){this.$isEmpty(a)?(this.$$animate.removeClass(this.$$element,"ng-not-empty"),this.$$animate.addClass(this.$$element,
"ng-empty")):(this.$$animate.removeClass(this.$$element,"ng-empty"),this.$$animate.addClass(this.$$element,"ng-not-empty"))},$setPristine:function(){this.$dirty=!1;this.$pristine=!0;this.$$animate.removeClass(this.$$element,Rb);this.$$animate.addClass(this.$$element,Va)},$setDirty:function(){this.$dirty=!0;this.$pristine=!1;this.$$animate.removeClass(this.$$element,Va);this.$$animate.addClass(this.$$element,Rb);this.$$parentForm.$setDirty()},$setUntouched:function(){this.$touched=!1;this.$untouched=
!0;this.$$animate.setClass(this.$$element,"ng-untouched","ng-touched")},$setTouched:function(){this.$touched=!0;this.$untouched=!1;this.$$animate.setClass(this.$$element,"ng-touched","ng-untouched")},$rollbackViewValue:function(){this.$$timeout.cancel(this.$$pendingDebounce);this.$viewValue=this.$$lastCommittedViewValue;this.$render()},$validate:function(){if(!da(this.$modelValue)){var a=this.$$lastCommittedViewValue,b=this.$$rawModelValue,d=this.$valid,c=this.$modelValue,e=this.$options.getOption("allowInvalid"),
f=this;this.$$runValidators(b,a,function(a){e||d===a||(f.$modelValue=a?b:void 0,f.$modelValue!==c&&f.$$writeModelToScope())})}},$$runValidators:function(a,b,d){function c(){var c=!0;q(k.$validators,function(d,e){var g=Boolean(d(a,b));c=c&&g;f(e,g)});return c?!0:(q(k.$asyncValidators,function(a,b){f(b,null)}),!1)}function e(){var c=[],d=!0;q(k.$asyncValidators,function(e,g){var k=e(a,b);if(!k||!D(k.then))throw pb("nopromise",k);f(g,void 0);c.push(k.then(function(){f(g,!0)},function(){d=!1;f(g,!1)}))});
c.length?k.$$q.all(c).then(function(){g(d)},z):g(!0)}function f(a,b){h===k.$$currentValidationRunId&&k.$setValidity(a,b)}function g(a){h===k.$$currentValidationRunId&&d(a)}this.$$currentValidationRunId++;var h=this.$$currentValidationRunId,k=this;(function(){var a=k.$$parserName||"parse";if(w(k.$$parserValid))f(a,null);else return k.$$parserValid||(q(k.$validators,function(a,b){f(b,null)}),q(k.$asyncValidators,function(a,b){f(b,null)})),f(a,k.$$parserValid),k.$$parserValid;return!0})()?c()?e():g(!1):
g(!1)},$commitViewValue:function(){var a=this.$viewValue;this.$$timeout.cancel(this.$$pendingDebounce);if(this.$$lastCommittedViewValue!==a||""===a&&this.$$hasNativeValidators)this.$$updateEmptyClasses(a),this.$$lastCommittedViewValue=a,this.$pristine&&this.$setDirty(),this.$$parseAndValidate()},$$parseAndValidate:function(){var a=this.$$lastCommittedViewValue,b=this;if(this.$$parserValid=w(a)?void 0:!0)for(var d=0;d<this.$parsers.length;d++)if(a=this.$parsers[d](a),w(a)){this.$$parserValid=!1;break}da(this.$modelValue)&&
(this.$modelValue=this.$$ngModelGet(this.$$scope));var c=this.$modelValue,e=this.$options.getOption("allowInvalid");this.$$rawModelValue=a;e&&(this.$modelValue=a,b.$modelValue!==c&&b.$$writeModelToScope());this.$$runValidators(a,this.$$lastCommittedViewValue,function(d){e||(b.$modelValue=d?a:void 0,b.$modelValue!==c&&b.$$writeModelToScope())})},$$writeModelToScope:function(){this.$$ngModelSet(this.$$scope,this.$modelValue);q(this.$viewChangeListeners,function(a){try{a()}catch(b){this.$$exceptionHandler(b)}},
this)},$setViewValue:function(a,b){this.$viewValue=a;this.$options.getOption("updateOnDefault")&&this.$$debounceViewValueCommit(b)},$$debounceViewValueCommit:function(a){var b=this.$options.getOption("debounce");ba(b[a])?b=b[a]:ba(b["default"])&&(b=b["default"]);this.$$timeout.cancel(this.$$pendingDebounce);var d=this;0<b?this.$$pendingDebounce=this.$$timeout(function(){d.$commitViewValue()},b):this.$$scope.$root.$$phase?this.$commitViewValue():this.$$scope.$apply(function(){d.$commitViewValue()})},
$overrideModelOptions:function(a){this.$options=this.$options.createChild(a)}};Zd({clazz:Ob,set:function(a,b){a[b]=!0},unset:function(a,b){delete a[b]}});var gf=["$rootScope",function(a){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:Ob,priority:1,compile:function(b){b.addClass(Va).addClass("ng-untouched").addClass(nb);return{pre:function(a,b,e,f){var g=f[0];b=f[1]||g.$$parentForm;if(f=f[2])g.$options=f.$options;g.$$initGetterSetters();b.$addControl(g);e.$observe("name",
function(a){g.$name!==a&&g.$$parentForm.$$renameControl(g,a)});a.$on("$destroy",function(){g.$$parentForm.$removeControl(g)})},post:function(b,c,e,f){function g(){h.$setTouched()}var h=f[0];if(h.$options.getOption("updateOn"))c.on(h.$options.getOption("updateOn"),function(a){h.$$debounceViewValueCommit(a&&a.type)});c.on("blur",function(){h.$touched||(a.$$phase?b.$evalAsync(g):b.$apply(g))})}}}}}],Pb,eh=/(\s+|^)default(\s+|$)/;Gc.prototype={getOption:function(a){return this.$$options[a]},createChild:function(a){var b=
!1;a=S({},a);q(a,function(d,c){"$inherit"===d?"*"===c?b=!0:(a[c]=this.$$options[c],"updateOn"===c&&(a.updateOnDefault=this.$$options.updateOnDefault)):"updateOn"===c&&(a.updateOnDefault=!1,a[c]=T(d.replace(eh,function(){a.updateOnDefault=!0;return" "})))},this);b&&(delete a["*"],ee(a,this.$$options));ee(a,Pb.$$options);return new Gc(a)}};Pb=new Gc({updateOn:"",updateOnDefault:!0,debounce:0,getterSetter:!1,allowInvalid:!1,timezone:null});var lf=function(){function a(a,d){this.$$attrs=a;this.$$scope=
d}a.$inject=["$attrs","$scope"];a.prototype={$onInit:function(){var a=this.parentCtrl?this.parentCtrl.$options:Pb,d=this.$$scope.$eval(this.$$attrs.ngModelOptions);this.$options=a.createChild(d)}};return{restrict:"A",priority:10,require:{parentCtrl:"?^^ngModelOptions"},bindToController:!0,controller:a}},Xe=Qa({terminal:!0,priority:1E3}),fh=L("ngOptions"),gh=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?(?:\s+disable\s+when\s+([\s\S]+?))?\s+for\s+(?:([$\w][$\w]*)|(?:\(\s*([$\w][$\w]*)\s*,\s*([$\w][$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,
ef=["$compile","$document","$parse",function(a,b,d){function c(a,b,c){function e(a,b,c,d,f){this.selectValue=a;this.viewValue=b;this.label=c;this.group=d;this.disabled=f}function f(a){var b;if(!q&&qa(a))b=a;else{b=[];for(var c in a)a.hasOwnProperty(c)&&"$"!==c.charAt(0)&&b.push(c)}return b}var n=a.match(gh);if(!n)throw fh("iexp",a,xa(b));var p=n[5]||n[7],q=n[6];a=/ as /.test(n[0])&&n[1];var s=n[9];b=d(n[2]?n[1]:p);var v=a&&d(a)||b,t=s&&d(s),u=s?function(a,b){return t(c,b)}:function(a){return Pa(a)},
w=function(a,b){return u(a,G(a,b))},A=d(n[2]||n[1]),x=d(n[3]||""),I=d(n[4]||""),K=d(n[8]),E={},G=q?function(a,b){E[q]=b;E[p]=a;return E}:function(a){E[p]=a;return E};return{trackBy:s,getTrackByValue:w,getWatchables:d(K,function(a){var b=[];a=a||[];for(var d=f(a),e=d.length,g=0;g<e;g++){var h=a===d?g:d[g],l=a[h],h=G(l,h),l=u(l,h);b.push(l);if(n[2]||n[1])l=A(c,h),b.push(l);n[4]&&(h=I(c,h),b.push(h))}return b}),getOptions:function(){for(var a=[],b={},d=K(c)||[],g=f(d),h=g.length,n=0;n<h;n++){var p=d===
g?n:g[n],q=G(d[p],p),r=v(c,q),p=u(r,q),t=A(c,q),E=x(c,q),q=I(c,q),r=new e(p,r,t,E,q);a.push(r);b[p]=r}return{items:a,selectValueMap:b,getOptionFromViewValue:function(a){return b[w(a)]},getViewValueFromOption:function(a){return s?ra(a.viewValue):a.viewValue}}}}}var e=x.document.createElement("option"),f=x.document.createElement("optgroup");return{restrict:"A",terminal:!0,require:["select","ngModel"],link:{pre:function(a,b,c,d){d[0].registerOption=z},post:function(d,h,k,l){function m(a){var b=(a=A.getOptionFromViewValue(a))&&
a.element;b&&!b.selected&&(b.selected=!0);return a}function n(a,b){a.element=b;b.disabled=a.disabled;a.label!==b.label&&(b.label=a.label,b.textContent=a.label);b.value=a.selectValue}function p(){var a=A&&r.readValue();if(A)for(var b=A.items.length-1;0<=b;b--){var c=A.items[b];u(c.group)?Eb(c.element.parentNode):Eb(c.element)}A=z.getOptions();var d={};x&&h.prepend(r.emptyOption);A.items.forEach(function(a){var b;if(u(a.group)){b=d[a.group];b||(b=f.cloneNode(!1),I.appendChild(b),b.label=null===a.group?
"null":a.group,d[a.group]=b);var c=e.cloneNode(!1)}else b=I,c=e.cloneNode(!1);b.appendChild(c);n(a,c)});h[0].appendChild(I);s.$render();s.$isEmpty(a)||(b=r.readValue(),(z.trackBy||v?sa(a,b):a===b)||(s.$setViewValue(b),s.$render()))}var r=l[0],s=l[1],v=k.multiple;l=0;for(var t=h.children(),w=t.length;l<w;l++)if(""===t[l].value){r.hasEmptyOption=!0;r.emptyOption=t.eq(l);break}var x=!!r.emptyOption;B(e.cloneNode(!1)).val("?");var A,z=c(k.ngOptions,h,d),I=b[0].createDocumentFragment();r.generateUnknownOptionValue=
function(a){return"?"};v?(r.writeValue=function(a){var b=a&&a.map(m)||[];A.items.forEach(function(a){a.element.selected&&-1===Array.prototype.indexOf.call(b,a)&&(a.element.selected=!1)})},r.readValue=function(){var a=h.val()||[],b=[];q(a,function(a){(a=A.selectValueMap[a])&&!a.disabled&&b.push(A.getViewValueFromOption(a))});return b},z.trackBy&&d.$watchCollection(function(){if(H(s.$viewValue))return s.$viewValue.map(function(a){return z.getTrackByValue(a)})},function(){s.$render()})):(r.writeValue=
function(a){var b=A.selectValueMap[h.val()],c=A.getOptionFromViewValue(a);b&&b.element.removeAttribute("selected");c?(h[0].value!==c.selectValue&&(r.removeUnknownOption(),r.unselectEmptyOption(),h[0].value=c.selectValue,c.element.selected=!0),c.element.setAttribute("selected","selected")):x?r.selectEmptyOption():r.unknownOption.parent().length?r.updateUnknownOption(a):r.renderUnknownOption(a)},r.readValue=function(){var a=A.selectValueMap[h.val()];return a&&!a.disabled?(r.unselectEmptyOption(),r.removeUnknownOption(),
A.getViewValueFromOption(a)):null},z.trackBy&&d.$watch(function(){return z.getTrackByValue(s.$viewValue)},function(){s.$render()}));x&&(r.emptyOption.remove(),a(r.emptyOption)(d),8===r.emptyOption[0].nodeType?(r.hasEmptyOption=!1,r.registerOption=function(a,b){""===b.val()&&(r.hasEmptyOption=!0,r.emptyOption=b,r.emptyOption.removeClass("ng-scope"),s.$render(),b.on("$destroy",function(){r.hasEmptyOption=!1;r.emptyOption=void 0}))}):r.emptyOption.removeClass("ng-scope"));h.empty();p();d.$watchCollection(z.getWatchables,
p)}}}}],Ye=["$locale","$interpolate","$log",function(a,b,d){var c=/{}/g,e=/^when(Minus)?(.+)$/;return{link:function(f,g,h){function k(a){g.text(a||"")}var l=h.count,m=h.$attr.when&&g.attr(h.$attr.when),n=h.offset||0,p=f.$eval(m)||{},r={},s=b.startSymbol(),v=b.endSymbol(),t=s+l+"-"+n+v,u=ea.noop,x;q(h,function(a,b){var c=e.exec(b);c&&(c=(c[1]?"-":"")+Q(c[2]),p[c]=g.attr(h.$attr[b]))});q(p,function(a,d){r[d]=b(a.replace(c,t))});f.$watch(l,function(b){var c=parseFloat(b),e=da(c);e||c in p||(c=a.pluralCat(c-
n));c===x||e&&da(x)||(u(),e=r[c],w(e)?(null!=b&&d.debug("ngPluralize: no rule defined for '"+c+"' in "+m),u=z,k()):u=f.$watch(e,k),x=c)})}}}],Ze=["$parse","$animate","$compile",function(a,b,d){var c=L("ngRepeat"),e=function(a,b,c,d,e,m,n){a[c]=d;e&&(a[e]=m);a.$index=b;a.$first=0===b;a.$last=b===n-1;a.$middle=!(a.$first||a.$last);a.$odd=!(a.$even=0===(b&1))};return{restrict:"A",multiElement:!0,transclude:"element",priority:1E3,terminal:!0,$$tlb:!0,compile:function(f,g){var h=g.ngRepeat,k=d.$$createComment("end ngRepeat",
h),l=h.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!l)throw c("iexp",h);var m=l[1],n=l[2],p=l[3],r=l[4],l=m.match(/^(?:(\s*[$\w]+)|\(\s*([$\w]+)\s*,\s*([$\w]+)\s*\))$/);if(!l)throw c("iidexp",m);var s=l[3]||l[1],v=l[2];if(p&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(p)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(p)))throw c("badident",p);var t,u,w,x,z={$id:Pa};r?t=a(r):(w=function(a,b){return Pa(b)},
x=function(a){return a});return function(a,d,f,g,l){t&&(u=function(b,c,d){v&&(z[v]=b);z[s]=c;z.$index=d;return t(a,z)});var m=V();a.$watchCollection(n,function(f){var g,n,r=d[0],t,z=V(),B,D,F,C,G,E,H;p&&(a[p]=f);if(qa(f))G=f,n=u||w;else for(H in n=u||x,G=[],f)ua.call(f,H)&&"$"!==H.charAt(0)&&G.push(H);B=G.length;H=Array(B);for(g=0;g<B;g++)if(D=f===G?g:G[g],F=f[D],C=n(D,F,g),m[C])E=m[C],delete m[C],z[C]=E,H[g]=E;else{if(z[C])throw q(H,function(a){a&&a.scope&&(m[a.id]=a)}),c("dupes",h,C,F);H[g]={id:C,
scope:void 0,clone:void 0};z[C]=!0}for(t in m){E=m[t];C=tb(E.clone);b.leave(C);if(C[0].parentNode)for(g=0,n=C.length;g<n;g++)C[g].$$NG_REMOVED=!0;E.scope.$destroy()}for(g=0;g<B;g++)if(D=f===G?g:G[g],F=f[D],E=H[g],E.scope){t=r;do t=t.nextSibling;while(t&&t.$$NG_REMOVED);E.clone[0]!==t&&b.move(tb(E.clone),null,r);r=E.clone[E.clone.length-1];e(E.scope,g,s,F,v,D,B)}else l(function(a,c){E.scope=c;var d=k.cloneNode(!1);a[a.length++]=d;b.enter(a,null,r);r=d;E.clone=a;z[E.id]=E;e(E.scope,g,s,F,v,D,B)});m=
z})}}}}],$e=["$animate",function(a){return{restrict:"A",multiElement:!0,link:function(b,d,c){b.$watch(c.ngShow,function(b){a[b?"removeClass":"addClass"](d,"ng-hide",{tempClasses:"ng-hide-animate"})})}}}],Te=["$animate",function(a){return{restrict:"A",multiElement:!0,link:function(b,d,c){b.$watch(c.ngHide,function(b){a[b?"addClass":"removeClass"](d,"ng-hide",{tempClasses:"ng-hide-animate"})})}}}],af=Qa(function(a,b,d){a.$watch(d.ngStyle,function(a,d){d&&a!==d&&q(d,function(a,c){b.css(c,"")});a&&b.css(a)},
!0)}),bf=["$animate","$compile",function(a,b){return{require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(d,c,e,f){var g=[],h=[],k=[],l=[],m=function(a,b){return function(c){!1!==c&&a.splice(b,1)}};d.$watch(e.ngSwitch||e.on,function(c){for(var d,e;k.length;)a.cancel(k.pop());d=0;for(e=l.length;d<e;++d){var s=tb(h[d].clone);l[d].$destroy();(k[d]=a.leave(s)).done(m(k,d))}h.length=0;l.length=0;(g=f.cases["!"+c]||f.cases["?"])&&q(g,function(c){c.transclude(function(d,e){l.push(e);
var f=c.element;d[d.length++]=b.$$createComment("end ngSwitchWhen");h.push({clone:d});a.enter(d,f.parent(),f)})})})}}}],cf=Qa({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(a,b,d,c,e){a=d.ngSwitchWhen.split(d.ngSwitchWhenSeparator).sort().filter(function(a,b,c){return c[b-1]!==a});q(a,function(a){c.cases["!"+a]=c.cases["!"+a]||[];c.cases["!"+a].push({transclude:e,element:b})})}}),df=Qa({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(a,
b,d,c,e){c.cases["?"]=c.cases["?"]||[];c.cases["?"].push({transclude:e,element:b})}}),hh=L("ngTransclude"),ff=["$compile",function(a){return{restrict:"EAC",terminal:!0,compile:function(b){var d=a(b.contents());b.empty();return function(a,b,f,g,h){function k(){d(a,function(a){b.append(a)})}if(!h)throw hh("orphan",xa(b));f.ngTransclude===f.$attr.ngTransclude&&(f.ngTransclude="");f=f.ngTransclude||f.ngTranscludeSlot;h(function(a,c){var d;if(d=a.length)a:{d=0;for(var f=a.length;d<f;d++){var g=a[d];if(g.nodeType!==
Ia||g.nodeValue.trim()){d=!0;break a}}d=void 0}d?b.append(a):(k(),c.$destroy())},null,f);f&&!h.isSlotFilled(f)&&k()}}}}],He=["$templateCache",function(a){return{restrict:"E",terminal:!0,compile:function(b,d){"text/ng-template"===d.type&&a.put(d.id,b[0].text)}}}],ih={$setViewValue:z,$render:z},jh=["$element","$scope",function(a,b){function d(){g||(g=!0,b.$$postDigest(function(){g=!1;e.ngModelCtrl.$render()}))}function c(a){h||(h=!0,b.$$postDigest(function(){b.$$destroyed||(h=!1,e.ngModelCtrl.$setViewValue(e.readValue()),
a&&e.ngModelCtrl.$render())}))}var e=this,f=new Gb;e.selectValueMap={};e.ngModelCtrl=ih;e.multiple=!1;e.unknownOption=B(x.document.createElement("option"));e.hasEmptyOption=!1;e.emptyOption=void 0;e.renderUnknownOption=function(b){b=e.generateUnknownOptionValue(b);e.unknownOption.val(b);a.prepend(e.unknownOption);Ta(e.unknownOption,!0);a.val(b)};e.updateUnknownOption=function(b){b=e.generateUnknownOptionValue(b);e.unknownOption.val(b);Ta(e.unknownOption,!0);a.val(b)};e.generateUnknownOptionValue=
function(a){return"? "+Pa(a)+" ?"};e.removeUnknownOption=function(){e.unknownOption.parent()&&e.unknownOption.remove()};e.selectEmptyOption=function(){e.emptyOption&&(a.val(""),Ta(e.emptyOption,!0))};e.unselectEmptyOption=function(){e.hasEmptyOption&&e.emptyOption.removeAttr("selected")};b.$on("$destroy",function(){e.renderUnknownOption=z});e.readValue=function(){var b=a.val(),b=b in e.selectValueMap?e.selectValueMap[b]:b;return e.hasOption(b)?b:null};e.writeValue=function(b){var c=a[0].options[a[0].selectedIndex];
c&&Ta(B(c),!1);e.hasOption(b)?(e.removeUnknownOption(),c=Pa(b),a.val(c in e.selectValueMap?c:b),Ta(B(a[0].options[a[0].selectedIndex]),!0)):null==b&&e.emptyOption?(e.removeUnknownOption(),e.selectEmptyOption()):e.unknownOption.parent().length?e.updateUnknownOption(b):e.renderUnknownOption(b)};e.addOption=function(a,b){if(8!==b[0].nodeType){Ka(a,'"option value"');""===a&&(e.hasEmptyOption=!0,e.emptyOption=b);var c=f.get(a)||0;f.set(a,c+1);d()}};e.removeOption=function(a){var b=f.get(a);b&&(1===b?(f.delete(a),
""===a&&(e.hasEmptyOption=!1,e.emptyOption=void 0)):f.set(a,b-1))};e.hasOption=function(a){return!!f.get(a)};var g=!1,h=!1;e.registerOption=function(a,b,f,g,h){if(f.$attr.ngValue){var q,s=NaN;f.$observe("value",function(a){var d,f=b.prop("selected");u(s)&&(e.removeOption(q),delete e.selectValueMap[s],d=!0);s=Pa(a);q=a;e.selectValueMap[s]=a;e.addOption(a,b);b.attr("value",s);d&&f&&c()})}else g?f.$observe("value",function(a){e.readValue();var d,f=b.prop("selected");u(q)&&(e.removeOption(q),d=!0);q=
a;e.addOption(a,b);d&&f&&c()}):h?a.$watch(h,function(a,d){f.$set("value",a);var g=b.prop("selected");d!==a&&e.removeOption(d);e.addOption(a,b);d&&g&&c()}):e.addOption(f.value,b);f.$observe("disabled",function(a){if("true"===a||a&&b.prop("selected"))e.multiple?c(!0):(e.ngModelCtrl.$setViewValue(null),e.ngModelCtrl.$render())});b.on("$destroy",function(){var a=e.readValue(),b=f.value;e.removeOption(b);d();(e.multiple&&a&&-1!==a.indexOf(b)||a===b)&&c(!0)})}}],Ie=function(){return{restrict:"E",require:["select",
"?ngModel"],controller:jh,priority:1,link:{pre:function(a,b,d,c){var e=c[0],f=c[1];if(f){if(e.ngModelCtrl=f,b.on("change",function(){e.removeUnknownOption();a.$apply(function(){f.$setViewValue(e.readValue())})}),d.multiple){e.multiple=!0;e.readValue=function(){var a=[];q(b.find("option"),function(b){b.selected&&!b.disabled&&(b=b.value,a.push(b in e.selectValueMap?e.selectValueMap[b]:b))});return a};e.writeValue=function(a){q(b.find("option"),function(b){var c=!!a&&(-1!==Array.prototype.indexOf.call(a,
b.value)||-1!==Array.prototype.indexOf.call(a,e.selectValueMap[b.value]));c!==b.selected&&Ta(B(b),c)})};var g,h=NaN;a.$watch(function(){h!==f.$viewValue||sa(g,f.$viewValue)||(g=pa(f.$viewValue),f.$render());h=f.$viewValue});f.$isEmpty=function(a){return!a||0===a.length}}}else e.registerOption=z},post:function(a,b,d,c){var e=c[1];if(e){var f=c[0];e.$render=function(){f.writeValue(e.$viewValue)}}}}}},Je=["$interpolate",function(a){return{restrict:"E",priority:100,compile:function(b,d){var c,e;u(d.ngValue)||
(u(d.value)?c=a(d.value,!0):(e=a(b.text(),!0))||d.$set("value",b.text()));return function(a,b,d){var k=b.parent();(k=k.data("$selectController")||k.parent().data("$selectController"))&&k.registerOption(a,b,d,c,e)}}}}],Zc=function(){return{restrict:"A",require:"?ngModel",link:function(a,b,d,c){c&&(d.required=!0,c.$validators.required=function(a,b){return!d.required||!c.$isEmpty(b)},d.$observe("required",function(){c.$validate()}))}}},Yc=function(){return{restrict:"A",require:"?ngModel",link:function(a,
b,d,c){if(c){var e,f=d.ngPattern||d.pattern;d.$observe("pattern",function(a){F(a)&&0<a.length&&(a=new RegExp("^"+a+"$"));if(a&&!a.test)throw L("ngPattern")("noregexp",f,a,xa(b));e=a||void 0;c.$validate()});c.$validators.pattern=function(a,b){return c.$isEmpty(b)||w(e)||e.test(b)}}}}},ad=function(){return{restrict:"A",require:"?ngModel",link:function(a,b,d,c){if(c){var e=-1;d.$observe("maxlength",function(a){a=Z(a);e=da(a)?-1:a;c.$validate()});c.$validators.maxlength=function(a,b){return 0>e||c.$isEmpty(b)||
b.length<=e}}}}},$c=function(){return{restrict:"A",require:"?ngModel",link:function(a,b,d,c){if(c){var e=0;d.$observe("minlength",function(a){e=Z(a)||0;c.$validate()});c.$validators.minlength=function(a,b){return c.$isEmpty(b)||b.length>=e}}}}};x.angular.bootstrap?x.console&&console.log("WARNING: Tried to load angular more than once."):(ze(),Ce(ea),ea.module("ngLocale",[],["$provide",function(a){function b(a){a+="";var b=a.indexOf(".");return-1==b?0:a.length-b-1}a.value("$locale",{DATETIME_FORMATS:{AMPMS:["AM",
"PM"],DAY:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"],FIRSTDAYOFWEEK:6,MONTH:"January February March April May June July August September October November December".split(" "),SHORTDAY:"Sun Mon Tue Wed Thu Fri Sat".split(" "),SHORTMONTH:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),STANDALONEMONTH:"January February March April May June July August September October November December".split(" "),WEEKENDRANGE:[5,
6],fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",medium:"MMM d, y h:mm:ss a",mediumDate:"MMM d, y",mediumTime:"h:mm:ss a","short":"M/d/yy h:mm a",shortDate:"M/d/yy",shortTime:"h:mm a"},NUMBER_FORMATS:{CURRENCY_SYM:"$",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-\u00a4",negSuf:"",posPre:"\u00a4",posSuf:""}]},id:"en-us",localeID:"en_US",pluralCat:function(a,
c){var e=a|0,f=c;void 0===f&&(f=Math.min(b(a),3));Math.pow(10,f);return 1==e&&0==f?"one":"other"}})}]),B(function(){ue(x.document,Sc)}))})(window);!window.angular.$$csp().noInlineStyle&&window.angular.element(document.head).prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}.ng-animate-shim{visibility:hidden;}.ng-anchor{position:absolute;}</style>');
//# sourceMappingURL=angular.min.js.map

/*
 AngularJS v1.6.4
 (c) 2010-2017 Google, Inc. http://angularjs.org
 License: MIT
*/
(function(R,y){'use strict';function Ea(a,b,c){if(!a)throw Oa("areq",b||"?",c||"required");return a}function Fa(a,b){if(!a&&!b)return"";if(!a)return b;if(!b)return a;W(a)&&(a=a.join(" "));W(b)&&(b=b.join(" "));return a+" "+b}function Pa(a){var b={};a&&(a.to||a.from)&&(b.to=a.to,b.from=a.from);return b}function X(a,b,c){var d="";a=W(a)?a:a&&F(a)&&a.length?a.split(/\s+/):[];s(a,function(a,e){a&&0<a.length&&(d+=0<e?" ":"",d+=c?b+a:a+b)});return d}function Ga(a){if(a instanceof E)switch(a.length){case 0:return a;
case 1:if(1===a[0].nodeType)return a;break;default:return E(ua(a))}if(1===a.nodeType)return E(a)}function ua(a){if(!a[0])return a;for(var b=0;b<a.length;b++){var c=a[b];if(1===c.nodeType)return c}}function Qa(a,b,c){s(b,function(b){a.addClass(b,c)})}function Ra(a,b,c){s(b,function(b){a.removeClass(b,c)})}function Y(a){return function(b,c){c.addClass&&(Qa(a,b,c.addClass),c.addClass=null);c.removeClass&&(Ra(a,b,c.removeClass),c.removeClass=null)}}function na(a){a=a||{};if(!a.$$prepared){var b=a.domOperation||
P;a.domOperation=function(){a.$$domOperationFired=!0;b();b=P};a.$$prepared=!0}return a}function ha(a,b){Ha(a,b);Ia(a,b)}function Ha(a,b){b.from&&(a.css(b.from),b.from=null)}function Ia(a,b){b.to&&(a.css(b.to),b.to=null)}function U(a,b,c){var d=b.options||{};c=c.options||{};var f=(d.addClass||"")+" "+(c.addClass||""),e=(d.removeClass||"")+" "+(c.removeClass||"");a=Sa(a.attr("class"),f,e);c.preparationClasses&&(d.preparationClasses=Z(c.preparationClasses,d.preparationClasses),delete c.preparationClasses);
f=d.domOperation!==P?d.domOperation:null;va(d,c);f&&(d.domOperation=f);d.addClass=a.addClass?a.addClass:null;d.removeClass=a.removeClass?a.removeClass:null;b.addClass=d.addClass;b.removeClass=d.removeClass;return d}function Sa(a,b,c){function d(a){F(a)&&(a=a.split(" "));var b={};s(a,function(a){a.length&&(b[a]=!0)});return b}var f={};a=d(a);b=d(b);s(b,function(a,b){f[b]=1});c=d(c);s(c,function(a,b){f[b]=1===f[b]?null:-1});var e={addClass:"",removeClass:""};s(f,function(b,c){var d,f;1===b?(d="addClass",
f=!a[c]||a[c+"-remove"]):-1===b&&(d="removeClass",f=a[c]||a[c+"-add"]);f&&(e[d].length&&(e[d]+=" "),e[d]+=c)});return e}function Q(a){return a instanceof E?a[0]:a}function Ta(a,b,c){var d="";b&&(d=X(b,"ng-",!0));c.addClass&&(d=Z(d,X(c.addClass,"-add")));c.removeClass&&(d=Z(d,X(c.removeClass,"-remove")));d.length&&(c.preparationClasses=d,a.addClass(d))}function oa(a,b){var c=b?"-"+b+"s":"";ka(a,[la,c]);return[la,c]}function wa(a,b){var c=b?"paused":"",d=$+"PlayState";ka(a,[d,c]);return[d,c]}function ka(a,
b){a.style[b[0]]=b[1]}function Z(a,b){return a?b?a+" "+b:a:b}function Ja(a,b,c){var d=Object.create(null),f=a.getComputedStyle(b)||{};s(c,function(a,b){var c=f[a];if(c){var G=c.charAt(0);if("-"===G||"+"===G||0<=G)c=Ua(c);0===c&&(c=null);d[b]=c}});return d}function Ua(a){var b=0;a=a.split(/\s*,\s*/);s(a,function(a){"s"===a.charAt(a.length-1)&&(a=a.substring(0,a.length-1));a=parseFloat(a)||0;b=b?Math.max(a,b):a});return b}function xa(a){return 0===a||null!=a}function Ka(a,b){var c=S,d=a+"s";b?c+="Duration":
d+=" linear all";return[c,d]}function La(){var a=Object.create(null);return{flush:function(){a=Object.create(null)},count:function(b){return(b=a[b])?b.total:0},get:function(b){return(b=a[b])&&b.value},put:function(b,c){a[b]?a[b].total++:a[b]={total:1,value:c}}}}function Ma(a,b,c){s(c,function(c){a[c]=ya(a[c])?a[c]:b.style.getPropertyValue(c)})}var S,za,$,Aa;void 0===R.ontransitionend&&void 0!==R.onwebkittransitionend?(S="WebkitTransition",za="webkitTransitionEnd transitionend"):(S="transition",za=
"transitionend");void 0===R.onanimationend&&void 0!==R.onwebkitanimationend?($="WebkitAnimation",Aa="webkitAnimationEnd animationend"):($="animation",Aa="animationend");var pa=$+"Delay",Ba=$+"Duration",la=S+"Delay",Na=S+"Duration",Oa=y.$$minErr("ng"),Va={transitionDuration:Na,transitionDelay:la,transitionProperty:S+"Property",animationDuration:Ba,animationDelay:pa,animationIterationCount:$+"IterationCount"},Wa={transitionDuration:Na,transitionDelay:la,animationDuration:Ba,animationDelay:pa},Ca,va,
s,W,ya,da,Da,aa,F,N,E,P;y.module("ngAnimate",[],function(){P=y.noop;Ca=y.copy;va=y.extend;E=y.element;s=y.forEach;W=y.isArray;F=y.isString;aa=y.isObject;N=y.isUndefined;ya=y.isDefined;Da=y.isFunction;da=y.isElement}).info({angularVersion:"1.6.4"}).directive("ngAnimateSwap",["$animate","$rootScope",function(a,b){return{restrict:"A",transclude:"element",terminal:!0,priority:600,link:function(b,d,f,e,p){var K,G;b.$watchCollection(f.ngAnimateSwap||f["for"],function(f){K&&a.leave(K);G&&(G.$destroy(),G=
null);if(f||0===f)G=b.$new(),p(G,function(b){K=b;a.enter(b,null,d)})})}}}]).directive("ngAnimateChildren",["$interpolate",function(a){return{link:function(b,c,d){function f(a){c.data("$$ngAnimateChildren","on"===a||"true"===a)}var e=d.ngAnimateChildren;F(e)&&0===e.length?c.data("$$ngAnimateChildren",!0):(f(a(e)(b)),d.$observe("ngAnimateChildren",f))}}}]).factory("$$rAFScheduler",["$$rAF",function(a){function b(a){d=d.concat(a);c()}function c(){if(d.length){for(var b=d.shift(),p=0;p<b.length;p++)b[p]();
f||a(function(){f||c()})}}var d,f;d=b.queue=[];b.waitUntilQuiet=function(b){f&&f();f=a(function(){f=null;b();c()})};return b}]).provider("$$animateQueue",["$animateProvider",function(a){function b(a){if(!a)return null;a=a.split(" ");var b=Object.create(null);s(a,function(a){b[a]=!0});return b}function c(a,c){if(a&&c){var d=b(c);return a.split(" ").some(function(a){return d[a]})}}function d(a,b,c){return e[a].some(function(a){return a(b,c)})}function f(a,b){var c=0<(a.addClass||"").length,d=0<(a.removeClass||
"").length;return b?c&&d:c||d}var e=this.rules={skip:[],cancel:[],join:[]};e.join.push(function(a,b){return!a.structural&&f(a)});e.skip.push(function(a,b){return!a.structural&&!f(a)});e.skip.push(function(a,b){return"leave"===b.event&&a.structural});e.skip.push(function(a,b){return b.structural&&2===b.state&&!a.structural});e.cancel.push(function(a,b){return b.structural&&a.structural});e.cancel.push(function(a,b){return 2===b.state&&a.structural});e.cancel.push(function(a,b){if(b.structural)return!1;
var d=a.addClass,f=a.removeClass,e=b.addClass,qa=b.removeClass;return N(d)&&N(f)||N(e)&&N(qa)?!1:c(d,qa)||c(f,e)});this.$get=["$$rAF","$rootScope","$rootElement","$document","$$Map","$$animation","$$AnimateRunner","$templateRequest","$$jqLite","$$forceReflow","$$isDocumentHidden",function(b,c,e,n,z,qa,J,u,H,k,O){function L(){var a=!1;return function(b){a?b():c.$$postDigest(function(){a=!0;b()})}}function A(a,b,c){var g=[],d=h[c];d&&s(d,function(d){w.call(d.node,b)?g.push(d.callback):"leave"===c&&
w.call(d.node,a)&&g.push(d.callback)});return g}function B(a,b,c){var g=ua(b);return a.filter(function(a){return!(a.node===g&&(!c||a.callback===c))})}function q(a,h,v){function q(a,c,g,d){G(function(){var a=A(ta,k,c);a.length?b(function(){s(a,function(a){a(e,g,d)});"close"!==g||k.parentNode||ra.off(k)}):"close"!==g||k.parentNode||ra.off(k)});a.progress(c,g,d)}function B(a){var b=e,c=m;c.preparationClasses&&(b.removeClass(c.preparationClasses),c.preparationClasses=null);c.activeClasses&&(b.removeClass(c.activeClasses),
c.activeClasses=null);D(e,m);ha(e,m);m.domOperation();t.complete(!a)}var m=Ca(v),e=Ga(a),k=Q(e),ta=k&&k.parentNode,m=na(m),t=new J,G=L();W(m.addClass)&&(m.addClass=m.addClass.join(" "));m.addClass&&!F(m.addClass)&&(m.addClass=null);W(m.removeClass)&&(m.removeClass=m.removeClass.join(" "));m.removeClass&&!F(m.removeClass)&&(m.removeClass=null);m.from&&!aa(m.from)&&(m.from=null);m.to&&!aa(m.to)&&(m.to=null);if(!k)return B(),t;v=[k.getAttribute("class"),m.addClass,m.removeClass].join(" ");if(!Xa(v))return B(),
t;var n=0<=["enter","move","leave"].indexOf(h),w=O(),u=!g||w||ga.get(k);v=!u&&x.get(k)||{};var H=!!v.state;u||H&&1===v.state||(u=!M(k,ta,h));if(u)return w&&q(t,h,"start"),B(),w&&q(t,h,"close"),t;n&&sa(k);w={structural:n,element:e,event:h,addClass:m.addClass,removeClass:m.removeClass,close:B,options:m,runner:t};if(H){if(d("skip",w,v)){if(2===v.state)return B(),t;U(e,v,w);return v.runner}if(d("cancel",w,v))if(2===v.state)v.runner.end();else if(v.structural)v.close();else return U(e,v,w),v.runner;else if(d("join",
w,v))if(2===v.state)U(e,w,{});else return Ta(e,n?h:null,m),h=w.event=v.event,m=U(e,v,w),v.runner}else U(e,w,{});(H=w.structural)||(H="animate"===w.event&&0<Object.keys(w.options.to||{}).length||f(w));if(!H)return B(),l(k),t;var z=(v.counter||0)+1;w.counter=z;I(k,1,w);c.$$postDigest(function(){e=Ga(a);var b=x.get(k),c=!b,b=b||{},g=0<(e.parent()||[]).length&&("animate"===b.event||b.structural||f(b));if(c||b.counter!==z||!g){c&&(D(e,m),ha(e,m));if(c||n&&b.event!==h)m.domOperation(),t.end();g||l(k)}else h=
!b.structural&&f(b,!0)?"setClass":b.event,I(k,2),b=qa(e,h,b.options),t.setHost(b),q(t,h,"start",{}),b.done(function(a){B(!a);(a=x.get(k))&&a.counter===z&&l(k);q(t,h,"close",{})})});return t}function sa(a){a=a.querySelectorAll("[data-ng-animate]");s(a,function(a){var b=parseInt(a.getAttribute("data-ng-animate"),10),c=x.get(a);if(c)switch(b){case 2:c.runner.end();case 1:x.delete(a)}})}function l(a){a.removeAttribute("data-ng-animate");x.delete(a)}function M(a,b,c){c=n[0].body;var g=Q(e),d=a===c||"HTML"===
a.nodeName,h=a===g,f=!1,k=ga.get(a),A;for((a=E.data(a,"$ngAnimatePin"))&&(b=Q(a));b;){h||(h=b===g);if(1!==b.nodeType)break;a=x.get(b)||{};if(!f){var q=ga.get(b);if(!0===q&&!1!==k){k=!0;break}else!1===q&&(k=!1);f=a.structural}if(N(A)||!0===A)a=E.data(b,"$$ngAnimateChildren"),ya(a)&&(A=a);if(f&&!1===A)break;d||(d=b===c);if(d&&h)break;if(!h&&(a=E.data(b,"$ngAnimatePin"))){b=Q(a);continue}b=b.parentNode}return(!f||A)&&!0!==k&&h&&d}function I(a,b,c){c=c||{};c.state=b;a.setAttribute("data-ng-animate",b);
c=(b=x.get(a))?va(b,c):c;x.set(a,c)}var x=new z,ga=new z,g=null,ta=c.$watch(function(){return 0===u.totalPendingRequests},function(a){a&&(ta(),c.$$postDigest(function(){c.$$postDigest(function(){null===g&&(g=!0)})}))}),h=Object.create(null),t=a.classNameFilter(),Xa=t?function(a){return t.test(a)}:function(){return!0},D=Y(H),w=R.Node.prototype.contains||function(a){return this===a||!!(this.compareDocumentPosition(a)&16)},ra={on:function(a,b,c){var g=ua(b);h[a]=h[a]||[];h[a].push({node:g,callback:c});
E(b).on("$destroy",function(){x.get(g)||ra.off(a,b,c)})},off:function(a,b,c){if(1!==arguments.length||F(arguments[0])){var g=h[a];g&&(h[a]=1===arguments.length?null:B(g,b,c))}else for(g in b=arguments[0],h)h[g]=B(h[g],b)},pin:function(a,b){Ea(da(a),"element","not an element");Ea(da(b),"parentElement","not an element");a.data("$ngAnimatePin",b)},push:function(a,b,c,g){c=c||{};c.domOperation=g;return q(a,b,c)},enabled:function(a,b){var c=arguments.length;if(0===c)b=!!g;else if(da(a)){var d=Q(a);1===
c?b=!ga.get(d):ga.set(d,!b)}else b=g=!!a;return b}};return ra}]}]).provider("$$animation",["$animateProvider",function(a){var b=this.drivers=[];this.$get=["$$jqLite","$rootScope","$injector","$$AnimateRunner","$$Map","$$rAFScheduler",function(a,d,f,e,p,K){function G(a){function b(a){if(a.processed)return a;a.processed=!0;var d=a.domNode,e=d.parentNode;f.set(d,a);for(var q;e;){if(q=f.get(e)){q.processed||(q=b(q));break}e=e.parentNode}(q||c).children.push(a);return a}var c={children:[]},d,f=new p;for(d=
0;d<a.length;d++){var e=a[d];f.set(e.domNode,a[d]={domNode:e.domNode,fn:e.fn,children:[]})}for(d=0;d<a.length;d++)b(a[d]);return function(a){var b=[],c=[],d;for(d=0;d<a.children.length;d++)c.push(a.children[d]);a=c.length;var f=0,e=[];for(d=0;d<c.length;d++){var k=c[d];0>=a&&(a=f,f=0,b.push(e),e=[]);e.push(k.fn);k.children.forEach(function(a){f++;c.push(a)});a--}e.length&&b.push(e);return b}(c)}var n=[],z=Y(a);return function(p,J,u){function H(a){a=a.hasAttribute("ng-animate-ref")?[a]:a.querySelectorAll("[ng-animate-ref]");
var b=[];s(a,function(a){var c=a.getAttribute("ng-animate-ref");c&&c.length&&b.push(a)});return b}function k(a){var b=[],c={};s(a,function(a,d){var h=Q(a.element),f=0<=["enter","move"].indexOf(a.event),h=a.structural?H(h):[];if(h.length){var e=f?"to":"from";s(h,function(a){var b=a.getAttribute("ng-animate-ref");c[b]=c[b]||{};c[b][e]={animationID:d,element:E(a)}})}else b.push(a)});var d={},f={};s(c,function(c,e){var k=c.from,A=c.to;if(k&&A){var q=a[k.animationID],x=a[A.animationID],l=k.animationID.toString();
if(!f[l]){var B=f[l]={structural:!0,beforeStart:function(){q.beforeStart();x.beforeStart()},close:function(){q.close();x.close()},classes:O(q.classes,x.classes),from:q,to:x,anchors:[]};B.classes.length?b.push(B):(b.push(q),b.push(x))}f[l].anchors.push({out:k.element,"in":A.element})}else k=k?k.animationID:A.animationID,A=k.toString(),d[A]||(d[A]=!0,b.push(a[k]))});return b}function O(a,b){a=a.split(" ");b=b.split(" ");for(var c=[],d=0;d<a.length;d++){var f=a[d];if("ng-"!==f.substring(0,3))for(var e=
0;e<b.length;e++)if(f===b[e]){c.push(f);break}}return c.join(" ")}function L(a){for(var c=b.length-1;0<=c;c--){var d=f.get(b[c])(a);if(d)return d}}function A(a,b){function c(a){(a=a.data("$$animationRunner"))&&a.setHost(b)}a.from&&a.to?(c(a.from.element),c(a.to.element)):c(a.element)}function B(){var a=p.data("$$animationRunner");!a||"leave"===J&&u.$$domOperationFired||a.end()}function q(b){p.off("$destroy",B);p.removeData("$$animationRunner");z(p,u);ha(p,u);u.domOperation();I&&a.removeClass(p,I);
p.removeClass("ng-animate");l.complete(!b)}u=na(u);var sa=0<=["enter","move","leave"].indexOf(J),l=new e({end:function(){q()},cancel:function(){q(!0)}});if(!b.length)return q(),l;p.data("$$animationRunner",l);var M=Fa(p.attr("class"),Fa(u.addClass,u.removeClass)),I=u.tempClasses;I&&(M+=" "+I,u.tempClasses=null);var x;sa&&(x="ng-"+J+"-prepare",a.addClass(p,x));n.push({element:p,classes:M,event:J,structural:sa,options:u,beforeStart:function(){p.addClass("ng-animate");I&&a.addClass(p,I);x&&(a.removeClass(p,
x),x=null)},close:q});p.on("$destroy",B);if(1<n.length)return l;d.$$postDigest(function(){var a=[];s(n,function(b){b.element.data("$$animationRunner")?a.push(b):b.close()});n.length=0;var b=k(a),c=[];s(b,function(a){c.push({domNode:Q(a.from?a.from.element:a.element),fn:function(){a.beforeStart();var b,c=a.close;if((a.anchors?a.from.element||a.to.element:a.element).data("$$animationRunner")){var d=L(a);d&&(b=d.start)}b?(b=b(),b.done(function(a){c(!a)}),A(a,b)):c()}})});K(G(c))});return l}}]}]).provider("$animateCss",
["$animateProvider",function(a){var b=La(),c=La();this.$get=["$window","$$jqLite","$$AnimateRunner","$timeout","$$forceReflow","$sniffer","$$rAFScheduler","$$animateQueue",function(a,f,e,p,K,G,n,z){function y(a,b){var c=a.parentNode;return(c.$$ngAnimateParentKey||(c.$$ngAnimateParentKey=++O))+"-"+a.getAttribute("class")+"-"+b}function J(e,k,q,p){var l;0<b.count(q)&&(l=c.get(q),l||(k=X(k,"-stagger"),f.addClass(e,k),l=Ja(a,e,p),l.animationDuration=Math.max(l.animationDuration,0),l.transitionDuration=
Math.max(l.transitionDuration,0),f.removeClass(e,k),c.put(q,l)));return l||{}}function u(a){L.push(a);n.waitUntilQuiet(function(){b.flush();c.flush();for(var a=K(),d=0;d<L.length;d++)L[d](a);L.length=0})}function H(c,f,e){f=b.get(e);f||(f=Ja(a,c,Va),"infinite"===f.animationIterationCount&&(f.animationIterationCount=1));b.put(e,f);c=f;e=c.animationDelay;f=c.transitionDelay;c.maxDelay=e&&f?Math.max(e,f):e||f;c.maxDuration=Math.max(c.animationDuration*c.animationIterationCount,c.transitionDuration);
return c}var k=Y(f),O=0,L=[];return function(a,c){function d(){l()}function n(){l(!0)}function l(b){if(!(w||E&&O)){w=!0;O=!1;g.$$skipPreparationClasses||f.removeClass(a,fa);f.removeClass(a,da);wa(h,!1);oa(h,!1);s(t,function(a){h.style[a[0]]=""});k(a,g);ha(a,g);Object.keys(L).length&&s(L,function(a,b){a?h.style.setProperty(b,a):h.style.removeProperty(b)});if(g.onDone)g.onDone();ea&&ea.length&&a.off(ea.join(" "),x);var c=a.data("$$animateCss");c&&(p.cancel(c[0].timer),a.removeData("$$animateCss"));
F&&F.complete(!b)}}function M(a){r.blockTransition&&oa(h,a);r.blockKeyframeAnimation&&wa(h,!!a)}function I(){F=new e({end:d,cancel:n});u(P);l();return{$$willAnimate:!1,start:function(){return F},end:d}}function x(a){a.stopPropagation();var b=a.originalEvent||a;a=b.$manualTimeStamp||Date.now();b=parseFloat(b.elapsedTime.toFixed(3));Math.max(a-Y,0)>=R&&b>=m&&(E=!0,l())}function ga(){function b(){if(!w){M(!1);s(t,function(a){h.style[a[0]]=a[1]});k(a,g);f.addClass(a,da);if(r.recalculateTimingStyles){ma=
h.getAttribute("class")+" "+fa;ja=y(h,ma);C=H(h,ma,ja);ba=C.maxDelay;N=Math.max(ba,0);m=C.maxDuration;if(0===m){l();return}r.hasTransitions=0<C.transitionDuration;r.hasAnimations=0<C.animationDuration}r.applyAnimationDelay&&(ba="boolean"!==typeof g.delay&&xa(g.delay)?parseFloat(g.delay):ba,N=Math.max(ba,0),C.animationDelay=ba,ca=[pa,ba+"s"],t.push(ca),h.style[ca[0]]=ca[1]);R=1E3*N;U=1E3*m;if(g.easing){var d,e=g.easing;r.hasTransitions&&(d=S+"TimingFunction",t.push([d,e]),h.style[d]=e);r.hasAnimations&&
(d=$+"TimingFunction",t.push([d,e]),h.style[d]=e)}C.transitionDuration&&ea.push(za);C.animationDuration&&ea.push(Aa);Y=Date.now();var n=R+1.5*U;d=Y+n;var e=a.data("$$animateCss")||[],q=!0;if(e.length){var I=e[0];(q=d>I.expectedEndTime)?p.cancel(I.timer):e.push(l)}q&&(n=p(c,n,!1),e[0]={timer:n,expectedEndTime:d},e.push(l),a.data("$$animateCss",e));if(ea.length)a.on(ea.join(" "),x);g.to&&(g.cleanupStyles&&Ma(L,h,Object.keys(g.to)),Ia(a,g))}}function c(){var b=a.data("$$animateCss");if(b){for(var d=
1;d<b.length;d++)b[d]();a.removeData("$$animateCss")}}if(!w)if(h.parentNode){var d=function(a){if(E)O&&a&&(O=!1,l());else if(O=!a,C.animationDuration)if(a=wa(h,O),O)t.push(a);else{var b=t,c=b.indexOf(a);0<=a&&b.splice(c,1)}},e=0<aa&&(C.transitionDuration&&0===V.transitionDuration||C.animationDuration&&0===V.animationDuration)&&Math.max(V.animationDelay,V.transitionDelay);e?p(b,Math.floor(e*aa*1E3),!1):b();v.resume=function(){d(!0)};v.pause=function(){d(!1)}}else l()}var g=c||{};g.$$prepared||(g=na(Ca(g)));
var L={},h=Q(a);if(!h||!h.parentNode||!z.enabled())return I();var t=[],K=a.attr("class"),D=Pa(g),w,O,E,F,v,N,R,m,U,Y,ea=[];if(0===g.duration||!G.animations&&!G.transitions)return I();var ia=g.event&&W(g.event)?g.event.join(" "):g.event,Z="",T="";ia&&g.structural?Z=X(ia,"ng-",!0):ia&&(Z=ia);g.addClass&&(T+=X(g.addClass,"-add"));g.removeClass&&(T.length&&(T+=" "),T+=X(g.removeClass,"-remove"));g.applyClassesEarly&&T.length&&k(a,g);var fa=[Z,T].join(" ").trim(),ma=K+" "+fa,da=X(fa,"-active"),K=D.to&&
0<Object.keys(D.to).length;if(!(0<(g.keyframeStyle||"").length||K||fa))return I();var ja,V;0<g.stagger?(D=parseFloat(g.stagger),V={transitionDelay:D,animationDelay:D,transitionDuration:0,animationDuration:0}):(ja=y(h,ma),V=J(h,fa,ja,Wa));g.$$skipPreparationClasses||f.addClass(a,fa);g.transitionStyle&&(D=[S,g.transitionStyle],ka(h,D),t.push(D));0<=g.duration&&(D=0<h.style[S].length,D=Ka(g.duration,D),ka(h,D),t.push(D));g.keyframeStyle&&(D=[$,g.keyframeStyle],ka(h,D),t.push(D));var aa=V?0<=g.staggerIndex?
g.staggerIndex:b.count(ja):0;(ia=0===aa)&&!g.skipBlocking&&oa(h,9999);var C=H(h,ma,ja),ba=C.maxDelay;N=Math.max(ba,0);m=C.maxDuration;var r={};r.hasTransitions=0<C.transitionDuration;r.hasAnimations=0<C.animationDuration;r.hasTransitionAll=r.hasTransitions&&"all"===C.transitionProperty;r.applyTransitionDuration=K&&(r.hasTransitions&&!r.hasTransitionAll||r.hasAnimations&&!r.hasTransitions);r.applyAnimationDuration=g.duration&&r.hasAnimations;r.applyTransitionDelay=xa(g.delay)&&(r.applyTransitionDuration||
r.hasTransitions);r.applyAnimationDelay=xa(g.delay)&&r.hasAnimations;r.recalculateTimingStyles=0<T.length;if(r.applyTransitionDuration||r.applyAnimationDuration)m=g.duration?parseFloat(g.duration):m,r.applyTransitionDuration&&(r.hasTransitions=!0,C.transitionDuration=m,D=0<h.style[S+"Property"].length,t.push(Ka(m,D))),r.applyAnimationDuration&&(r.hasAnimations=!0,C.animationDuration=m,t.push([Ba,m+"s"]));if(0===m&&!r.recalculateTimingStyles)return I();if(null!=g.delay){var ca;"boolean"!==typeof g.delay&&
(ca=parseFloat(g.delay),N=Math.max(ca,0));r.applyTransitionDelay&&t.push([la,ca+"s"]);r.applyAnimationDelay&&t.push([pa,ca+"s"])}null==g.duration&&0<C.transitionDuration&&(r.recalculateTimingStyles=r.recalculateTimingStyles||ia);R=1E3*N;U=1E3*m;g.skipBlocking||(r.blockTransition=0<C.transitionDuration,r.blockKeyframeAnimation=0<C.animationDuration&&0<V.animationDelay&&0===V.animationDuration);g.from&&(g.cleanupStyles&&Ma(L,h,Object.keys(g.from)),Ha(a,g));r.blockTransition||r.blockKeyframeAnimation?
M(m):g.skipBlocking||oa(h,!1);return{$$willAnimate:!0,end:d,start:function(){if(!w)return v={end:d,cancel:n,resume:null,pause:null},F=new e(v),u(ga),F}}}}]}]).provider("$$animateCssDriver",["$$animationProvider",function(a){a.drivers.push("$$animateCssDriver");this.$get=["$animateCss","$rootScope","$$AnimateRunner","$rootElement","$sniffer","$$jqLite","$document",function(a,c,d,f,e,p,K){function G(a){return a.replace(/\bng-\S+\b/g,"")}function n(a,b){F(a)&&(a=a.split(" "));F(b)&&(b=b.split(" "));
return a.filter(function(a){return-1===b.indexOf(a)}).join(" ")}function z(c,e,f){function p(a){var b={},c=Q(a).getBoundingClientRect();s(["width","height","top","left"],function(a){var d=c[a];switch(a){case "top":d+=u.scrollTop;break;case "left":d+=u.scrollLeft}b[a]=Math.floor(d)+"px"});return b}function K(){var c=G(f.attr("class")||""),d=n(c,l),c=n(l,c),d=a(z,{to:p(f),addClass:"ng-anchor-in "+d,removeClass:"ng-anchor-out "+c,delay:!0});return d.$$willAnimate?d:null}function q(){z.remove();e.removeClass("ng-animate-shim");
f.removeClass("ng-animate-shim")}var z=E(Q(e).cloneNode(!0)),l=G(z.attr("class")||"");e.addClass("ng-animate-shim");f.addClass("ng-animate-shim");z.addClass("ng-anchor");H.append(z);var M;c=function(){var c=a(z,{addClass:"ng-anchor-out",delay:!0,from:p(e)});return c.$$willAnimate?c:null}();if(!c&&(M=K(),!M))return q();var I=c||M;return{start:function(){function a(){c&&c.end()}var b,c=I.start();c.done(function(){c=null;if(!M&&(M=K()))return c=M.start(),c.done(function(){c=null;q();b.complete()}),c;
q();b.complete()});return b=new d({end:a,cancel:a})}}}function y(a,b,c,e){var f=J(a,P),p=J(b,P),n=[];s(e,function(a){(a=z(c,a.out,a["in"]))&&n.push(a)});if(f||p||0!==n.length)return{start:function(){function a(){s(b,function(a){a.end()})}var b=[];f&&b.push(f.start());p&&b.push(p.start());s(n,function(a){b.push(a.start())});var c=new d({end:a,cancel:a});d.all(b,function(a){c.complete(a)});return c}}}function J(c){var d=c.element,e=c.options||{};c.structural&&(e.event=c.event,e.structural=!0,e.applyClassesEarly=
!0,"leave"===c.event&&(e.onDone=e.domOperation));e.preparationClasses&&(e.event=Z(e.event,e.preparationClasses));c=a(d,e);return c.$$willAnimate?c:null}if(!e.animations&&!e.transitions)return P;var u=K[0].body;c=Q(f);var H=E(c.parentNode&&11===c.parentNode.nodeType||u.contains(c)?c:u);return function(a){return a.from&&a.to?y(a.from,a.to,a.classes,a.anchors):J(a)}}]}]).provider("$$animateJs",["$animateProvider",function(a){this.$get=["$injector","$$AnimateRunner","$$jqLite",function(b,c,d){function f(c){c=
W(c)?c:c.split(" ");for(var d=[],e={},f=0;f<c.length;f++){var s=c[f],y=a.$$registeredAnimations[s];y&&!e[s]&&(d.push(b.get(y)),e[s]=!0)}return d}var e=Y(d);return function(a,b,d,n){function z(){n.domOperation();e(a,n)}function y(a,b,d,e,f){switch(d){case "animate":b=[b,e.from,e.to,f];break;case "setClass":b=[b,k,F,f];break;case "addClass":b=[b,k,f];break;case "removeClass":b=[b,F,f];break;default:b=[b,f]}b.push(e);if(a=a.apply(a,b))if(Da(a.start)&&(a=a.start()),a instanceof c)a.done(f);else if(Da(a))return a;
return P}function J(a,b,d,e,f){var k=[];s(e,function(e){var l=e[f];l&&k.push(function(){var e,f,g=!1,h=function(a){g||(g=!0,(f||P)(a),e.complete(!a))};e=new c({end:function(){h()},cancel:function(){h(!0)}});f=y(l,a,b,d,function(a){h(!1===a)});return e})});return k}function u(a,b,d,e,f){var k=J(a,b,d,e,f);if(0===k.length){var h,l;"beforeSetClass"===f?(h=J(a,"removeClass",d,e,"beforeRemoveClass"),l=J(a,"addClass",d,e,"beforeAddClass")):"setClass"===f&&(h=J(a,"removeClass",d,e,"removeClass"),l=J(a,"addClass",
d,e,"addClass"));h&&(k=k.concat(h));l&&(k=k.concat(l))}if(0!==k.length)return function(a){var b=[];k.length&&s(k,function(a){b.push(a())});b.length?c.all(b,a):a();return function(a){s(b,function(b){a?b.cancel():b.end()})}}}var H=!1;3===arguments.length&&aa(d)&&(n=d,d=null);n=na(n);d||(d=a.attr("class")||"",n.addClass&&(d+=" "+n.addClass),n.removeClass&&(d+=" "+n.removeClass));var k=n.addClass,F=n.removeClass,L=f(d),A,B;if(L.length){var q,E;"leave"===b?(E="leave",q="afterLeave"):(E="before"+b.charAt(0).toUpperCase()+
b.substr(1),q=b);"enter"!==b&&"move"!==b&&(A=u(a,b,n,L,E));B=u(a,b,n,L,q)}if(A||B){var l;return{$$willAnimate:!0,end:function(){l?l.end():(H=!0,z(),ha(a,n),l=new c,l.complete(!0));return l},start:function(){function b(c){H=!0;z();ha(a,n);l.complete(c)}if(l)return l;l=new c;var d,e=[];A&&e.push(function(a){d=A(a)});e.length?e.push(function(a){z();a(!0)}):z();B&&e.push(function(a){d=B(a)});l.setHost({end:function(){H||((d||P)(void 0),b(void 0))},cancel:function(){H||((d||P)(!0),b(!0))}});c.chain(e,
b);return l}}}}}]}]).provider("$$animateJsDriver",["$$animationProvider",function(a){a.drivers.push("$$animateJsDriver");this.$get=["$$animateJs","$$AnimateRunner",function(a,c){function d(c){return a(c.element,c.event,c.classes,c.options)}return function(a){if(a.from&&a.to){var b=d(a.from),p=d(a.to);if(b||p)return{start:function(){function a(){return function(){s(d,function(a){a.end()})}}var d=[];b&&d.push(b.start());p&&d.push(p.start());c.all(d,function(a){f.complete(a)});var f=new c({end:a(),cancel:a()});
return f}}}else return d(a)}}]}])})(window,window.angular);
//# sourceMappingURL=angular-animate.min.js.map

/**
 * floatThead wrapper for AngularJS
 * @version v0.1.0 - 2015-10-25
 * @link https://github.com/brandon-barker/angular-floatThead
 * @author Brandon Barker
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
(function () {
  'use strict';

  angular
    .module('floatThead', [])
    .directive('floatThead', ['$timeout', '$log', floatThead]);

  function floatThead($timeout, $log) {
    // Usage:
    // Specify float-thead on any table element and optionally pass through a floatThead options object to initialize the library.
    // Optionally specify ng-model to have the directive watch any objects for changes and call 'reflow' on floatThead.
    // You can also manually trigger a reflow by triggering an event on the table element called 'update', eg: jQuery('.table').trigger('update');
    var directive = {
      require: '?ngModel',
      scope: {
        floatThead: '=?',
        floatTheadEnabled: '=?'
      },
      controller: ['$scope', '$element', '$attrs', function ($scope, $element, $attrs) {
        // default float-thead-enabled to true if not present
        if (!$attrs.hasOwnProperty('floatTheadEnabled')) {
          $scope.floatTheadEnabled = $attrs.floatTheadEnabled = true;
        }
        
        // default to empty object
        if (!$attrs.hasOwnProperty('floatThead') || $attrs.floatThead === '') {
          $scope.floatThead = $attrs.floatThead = {};
        }
      }],
      link: link,
      restrict: 'A'
    };
    return directive;

    function link($scope, $element, $attrs, ngModel) {
      $scope.$watch('floatTheadEnabled', function (newVal) {
        if (newVal === true) {
          if (angular.isObject($scope.floatThead)) {
            jQuery($element).floatThead($scope.floatThead);
          }
        } else {
          jQuery($element).floatThead('destroy');
        }
      });
      
      $scope.$watch('floatThead', function (newVal, oldVal) {
        if (newVal === oldVal || !$scope.floatTheadEnabled) {
          return;
        }
        
        // first destroy it so we can recreate with new options
        jQuery($element).floatThead('destroy');
        if (angular.isObject(newVal)) {
          jQuery($element).floatThead(newVal);
        }
      }, true);

      if (ngModel) {
        // hook the model $formatters to get notified when anything changes so we can reflow
        ngModel.$formatters.push(function () {
          // only reflow if enabled
          if ($scope.floatTheadEnabled && angular.isObject($scope.floatThead)) {
            // give time for rerender before reflow
            $timeout(function() {
              jQuery($element).floatThead('reflow');
            });
          }
        });
      } else {
        $log.info('floatThead: ngModel not provided!');
      }

      $element.bind('update', function () {
        $timeout(function () {
          jQuery($element).floatThead('reflow');
        }, 0);
      });

      $element.bind('$destroy', function () {
        jQuery($element).floatThead('destroy');
      });
    }
  }
})();

angular.module("gettext",[]),angular.module("gettext").constant("gettext",function(a){return a}),angular.module("gettext").factory("gettextCatalog",["gettextPlurals","gettextFallbackLanguage","$http","$cacheFactory","$interpolate","$rootScope",function(a,b,c,d,e,f){function g(){f.$broadcast("gettextLanguageChanged")}var h,i="$$noContext",j='<span id="test" title="test" class="tested">test</span>',k=angular.element("<span>"+j+"</span>").html()!==j,l=function(a){return h.debug&&h.currentLanguage!==h.baseLanguage?h.debugPrefix+a:a},m=function(a){return h.showTranslatedMarkers?h.translatedMarkerPrefix+a+h.translatedMarkerSuffix:a};return h={debug:!1,debugPrefix:"[MISSING]: ",showTranslatedMarkers:!1,translatedMarkerPrefix:"[",translatedMarkerSuffix:"]",strings:{},baseLanguage:"en",currentLanguage:"en",cache:d("strings"),setCurrentLanguage:function(a){this.currentLanguage=a,g()},getCurrentLanguage:function(){return this.currentLanguage},setStrings:function(b,c){this.strings[b]||(this.strings[b]={});var d=a(b,1);for(var e in c){var f=c[e];if(k&&(e=angular.element("<span>"+e+"</span>").html()),angular.isString(f)||angular.isArray(f)){var h={};h[i]=f,f=h}this.strings[b][e]||(this.strings[b][e]={});for(var j in f){var l=f[j];angular.isArray(l)?this.strings[b][e][j]=l:(this.strings[b][e][j]=[],this.strings[b][e][j][d]=l)}}g()},getStringFormFor:function(b,c,d,e){if(!b)return null;var f=this.strings[b]||{},g=f[c]||{},h=g[e||i]||[];return h[a(b,d)]},getString:function(a,c,d){var f=b(this.currentLanguage);return a=this.getStringFormFor(this.currentLanguage,a,1,d)||this.getStringFormFor(f,a,1,d)||l(a),a=c?e(a)(c):a,m(a)},getPlural:function(a,c,d,f,g){var h=b(this.currentLanguage);return c=this.getStringFormFor(this.currentLanguage,c,a,g)||this.getStringFormFor(h,c,a,g)||l(1===a?c:d),f&&(f.$count=a,c=e(c)(f)),m(c)},loadRemote:function(a){return c({method:"GET",url:a,cache:h.cache}).then(function(a){var b=a.data;for(var c in b)h.setStrings(c,b[c]);return a})}}}]),angular.module("gettext").directive("translate",["gettextCatalog","$parse","$animate","$compile","$window","gettextUtil",function(a,b,c,d,e,f){function g(a){return f.lcFirst(a.replace(j,""))}function h(a,b,c){var d=Object.keys(b).filter(function(a){return f.startsWith(a,j)&&a!==j});if(!d.length)return null;var e=angular.extend({},a),h=[];return d.forEach(function(d){var f=a.$watch(b[d],function(a){var b=g(d);e[b]=a,c(e)});h.push(f)}),a.$on("$destroy",function(){h.forEach(function(a){a()})}),e}var i=parseInt((/msie (\d+)/.exec(angular.lowercase(e.navigator.userAgent))||[])[1],10),j="translateParams";return{restrict:"AE",terminal:!0,compile:function(e,g){f.assert(!g.translatePlural||g.translateN,"translate-n","translate-plural"),f.assert(!g.translateN||g.translatePlural,"translate-plural","translate-n");var j=f.trim(e.html()),k=g.translatePlural,l=g.translateContext;return 8>=i&&"<!--IE fix-->"===j.slice(-13)&&(j=j.slice(0,-13)),{post:function(e,g,i){function m(b){b=b||null;var h;k?(e=o||(o=e.$new()),e.$count=n(e),h=a.getPlural(e.$count,j,k,b,l)):h=a.getString(j,b,l);var i=g.contents();if(0!==i.length){if(h===f.trim(i.html()))return void(p&&d(i)(e));var m=angular.element("<span>"+h+"</span>");d(m.contents())(e);var q=m.contents();c.enter(q,g),c.leave(i)}}var n=b(i.translateN),o=null,p=!0,q=h(e,i,m);m(q),p=!1,i.translateN&&e.$watch(i.translateN,function(){m(q)}),e.$on("gettextLanguageChanged",function(){m(q)})}}}}}]),angular.module("gettext").factory("gettextFallbackLanguage",function(){var a={},b=/([^_]+)_[^_]+$/;return function(c){if(a[c])return a[c];var d=b.exec(c);return d?(a[c]=d[1],d[1]):null}}),angular.module("gettext").filter("translate",["gettextCatalog",function(a){function b(b,c){return a.getString(b,null,c)}return b.$stateful=!0,b}]),angular.module("gettext").factory("gettextPlurals",function(){function a(a){return b[a]||(b[a]=a.split(/\-|_/).shift()),b[a]}var b={pt_BR:"pt_BR","pt-BR":"pt_BR"};return function(b,c){switch(a(b)){case"ay":case"bo":case"cgg":case"dz":case"fa":case"id":case"ja":case"jbo":case"ka":case"kk":case"km":case"ko":case"ky":case"lo":case"ms":case"my":case"sah":case"su":case"th":case"tt":case"ug":case"vi":case"wo":case"zh":return 0;case"is":return c%10!=1||c%100==11?1:0;case"jv":return 0!=c?1:0;case"mk":return 1==c||c%10==1?0:1;case"ach":case"ak":case"am":case"arn":case"br":case"fil":case"fr":case"gun":case"ln":case"mfe":case"mg":case"mi":case"oc":case"pt_BR":case"tg":case"ti":case"tr":case"uz":case"wa":case"zh":return c>1?1:0;case"lv":return c%10==1&&c%100!=11?0:0!=c?1:2;case"lt":return c%10==1&&c%100!=11?0:c%10>=2&&(10>c%100||c%100>=20)?1:2;case"be":case"bs":case"hr":case"ru":case"sr":case"uk":return c%10==1&&c%100!=11?0:c%10>=2&&4>=c%10&&(10>c%100||c%100>=20)?1:2;case"mnk":return 0==c?0:1==c?1:2;case"ro":return 1==c?0:0==c||c%100>0&&20>c%100?1:2;case"pl":return 1==c?0:c%10>=2&&4>=c%10&&(10>c%100||c%100>=20)?1:2;case"cs":case"sk":return 1==c?0:c>=2&&4>=c?1:2;case"sl":return c%100==1?1:c%100==2?2:c%100==3||c%100==4?3:0;case"mt":return 1==c?0:0==c||c%100>1&&11>c%100?1:c%100>10&&20>c%100?2:3;case"gd":return 1==c||11==c?0:2==c||12==c?1:c>2&&20>c?2:3;case"cy":return 1==c?0:2==c?1:8!=c&&11!=c?2:3;case"kw":return 1==c?0:2==c?1:3==c?2:3;case"ga":return 1==c?0:2==c?1:7>c?2:11>c?3:4;case"ar":return 0==c?0:1==c?1:2==c?2:c%100>=3&&10>=c%100?3:c%100>=11?4:5;default:return 1!=c?1:0}}}),angular.module("gettext").factory("gettextUtil",function(){function a(a,b,c){if(!a)throw new Error("You should add a "+b+" attribute whenever you add a "+c+" attribute.")}function b(a,b){return 0===a.indexOf(b)}function c(a){var b=a.charAt(0).toLowerCase();return b+a.substr(1)}var d=function(){return String.prototype.trim?function(a){return"string"==typeof a?a.trim():a}:function(a){return"string"==typeof a?a.replace(/^\s*/,"").replace(/\s*$/,""):a}}();return{trim:d,assert:a,startsWith:b,lcFirst:c}});

/*
 AngularJS v1.6.4
 (c) 2010-2017 Google, Inc. http://angularjs.org
 License: MIT
*/
(function(s,f){'use strict';function J(f){var k=[];v(k,B).chars(f);return k.join("")}var w=f.$$minErr("$sanitize"),C,k,D,E,q,B,F,G,v;f.module("ngSanitize",[]).provider("$sanitize",function(){function h(a,c){var b={},d=a.split(","),l;for(l=0;l<d.length;l++)b[c?q(d[l]):d[l]]=!0;return b}function K(a){for(var c={},b=0,d=a.length;b<d;b++){var l=a[b];c[l.name]=l.value}return c}function H(a){return a.replace(/&/g,"&amp;").replace(L,function(a){var b=a.charCodeAt(0);a=a.charCodeAt(1);return"&#"+(1024*(b-
55296)+(a-56320)+65536)+";"}).replace(M,function(a){return"&#"+a.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function I(a){for(;a;){if(a.nodeType===s.Node.ELEMENT_NODE)for(var c=a.attributes,b=0,d=c.length;b<d;b++){var l=c[b],e=l.name.toLowerCase();if("xmlns:ns1"===e||0===e.lastIndexOf("ns1:",0))a.removeAttributeNode(l),b--,d--}(c=a.firstChild)&&I(c);a=t("nextSibling",a)}}function t(a,c){var b=c[a];if(b&&F.call(c,b))throw w("elclob",c.outerHTML||c.outerText);return b}var x=!1;this.$get=
["$$sanitizeUri",function(a){x&&k(p,z);return function(c){var b=[];G(c,v(b,function(b,c){return!/^unsafe:/.test(a(b,c))}));return b.join("")}}];this.enableSvg=function(a){return E(a)?(x=a,this):x};C=f.bind;k=f.extend;D=f.forEach;E=f.isDefined;q=f.lowercase;B=f.noop;G=function(a,c){null===a||void 0===a?a="":"string"!==typeof a&&(a=""+a);g.innerHTML=a;var b=5;do{if(0===b)throw w("uinput");b--;s.document.documentMode&&I(g);a=g.innerHTML;g.innerHTML=a}while(a!==g.innerHTML);for(b=g.firstChild;b;){switch(b.nodeType){case 1:c.start(b.nodeName.toLowerCase(),
K(b.attributes));break;case 3:c.chars(b.textContent)}var d;if(!(d=b.firstChild)&&(1===b.nodeType&&c.end(b.nodeName.toLowerCase()),d=t("nextSibling",b),!d))for(;null==d;){b=t("parentNode",b);if(b===g)break;d=t("nextSibling",b);1===b.nodeType&&c.end(b.nodeName.toLowerCase())}b=d}for(;b=g.firstChild;)g.removeChild(b)};v=function(a,c){var b=!1,d=C(a,a.push);return{start:function(a,e){a=q(a);!b&&A[a]&&(b=a);b||!0!==p[a]||(d("<"),d(a),D(e,function(b,e){var f=q(e),g="img"===a&&"src"===f||"background"===
f;!0!==u[f]||!0===n[f]&&!c(b,g)||(d(" "),d(e),d('="'),d(H(b)),d('"'))}),d(">"))},end:function(a){a=q(a);b||!0!==p[a]||!0===e[a]||(d("</"),d(a),d(">"));a==b&&(b=!1)},chars:function(a){b||d(H(a))}}};F=s.Node.prototype.contains||function(a){return!!(this.compareDocumentPosition(a)&16)};var L=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,M=/([^#-~ |!])/g,e=h("area,br,col,hr,img,wbr"),y=h("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),m=h("rp,rt"),r=k({},m,y),y=k({},y,h("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,section,table,ul")),
m=k({},m,h("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),z=h("circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,stop,svg,switch,text,title,tspan"),A=h("script,style"),p=k({},e,y,m,r),n=h("background,cite,href,longdesc,src,xlink:href"),r=h("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,tabindex,target,title,type,valign,value,vspace,width"),
m=h("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan",
!0),u=k({},n,m,r),g;(function(a){if(a.document&&a.document.implementation)a=a.document.implementation.createHTMLDocument("inert");else throw w("noinert");var c=(a.documentElement||a.getDocumentElement()).getElementsByTagName("body");1===c.length?g=c[0]:(c=a.createElement("html"),g=a.createElement("body"),c.appendChild(g),a.appendChild(c))})(s)}).info({angularVersion:"1.6.4"});f.module("ngSanitize").filter("linky",["$sanitize",function(h){var k=/((ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"\u201d\u2019]/i,
q=/^mailto:/i,s=f.$$minErr("linky"),t=f.isDefined,x=f.isFunction,v=f.isObject,w=f.isString;return function(e,f,m){function r(a){a&&n.push(J(a))}function z(a,c){var b,d=A(a);n.push("<a ");for(b in d)n.push(b+'="'+d[b]+'" ');!t(f)||"target"in d||n.push('target="',f,'" ');n.push('href="',a.replace(/"/g,"&quot;"),'">');r(c);n.push("</a>")}if(null==e||""===e)return e;if(!w(e))throw s("notstring",e);for(var A=x(m)?m:v(m)?function(){return m}:function(){return{}},p=e,n=[],u,g;e=p.match(k);)u=e[0],e[2]||
e[4]||(u=(e[3]?"http://":"mailto:")+u),g=e.index,r(p.substr(0,g)),z(u,e[0].replace(q,"")),p=p.substring(g+e[0].length);r(p);return h(n.join(""))}}])})(window,window.angular);
//# sourceMappingURL=angular-sanitize.min.js.map

/*
 AngularJS v1.6.4
 (c) 2010-2017 Google, Inc. http://angularjs.org
 License: MIT
*/
(function(x,p){'use strict';function s(f,k){var e=!1,a=!1;this.ngClickOverrideEnabled=function(b){return p.isDefined(b)?(b&&!a&&(a=!0,t.$$moduleName="ngTouch",k.directive("ngClick",t),f.decorator("ngClickDirective",["$delegate",function(a){if(e)a.shift();else for(var b=a.length-1;0<=b;){if("ngTouch"===a[b].$$moduleName){a.splice(b,1);break}b--}return a}])),e=b,this):e};this.$get=function(){return{ngClickOverrideEnabled:function(){return e}}}}function v(f,k,e){n.directive(f,["$parse","$swipe",function(a,
b){return function(l,u,g){function h(c){if(!d)return!1;var a=Math.abs(c.y-d.y);c=(c.x-d.x)*k;return r&&75>a&&0<c&&30<c&&.3>a/c}var m=a(g[f]),d,r,c=["touch"];p.isDefined(g.ngSwipeDisableMouse)||c.push("mouse");b.bind(u,{start:function(c,a){d=c;r=!0},cancel:function(c){r=!1},end:function(c,d){h(c)&&l.$apply(function(){u.triggerHandler(e);m(l,{$event:d})})}},c)}}])}var n=p.module("ngTouch",[]);n.info({angularVersion:"1.6.4"});n.provider("$touch",s);s.$inject=["$provide","$compileProvider"];n.factory("$swipe",
[function(){function f(a){a=a.originalEvent||a;var b=a.touches&&a.touches.length?a.touches:[a];a=a.changedTouches&&a.changedTouches[0]||b[0];return{x:a.clientX,y:a.clientY}}function k(a,b){var l=[];p.forEach(a,function(a){(a=e[a][b])&&l.push(a)});return l.join(" ")}var e={mouse:{start:"mousedown",move:"mousemove",end:"mouseup"},touch:{start:"touchstart",move:"touchmove",end:"touchend",cancel:"touchcancel"},pointer:{start:"pointerdown",move:"pointermove",end:"pointerup",cancel:"pointercancel"}};return{bind:function(a,
b,l){var e,g,h,m,d=!1;l=l||["mouse","touch","pointer"];a.on(k(l,"start"),function(c){h=f(c);d=!0;g=e=0;m=h;b.start&&b.start(h,c)});var r=k(l,"cancel");if(r)a.on(r,function(c){d=!1;b.cancel&&b.cancel(c)});a.on(k(l,"move"),function(c){if(d&&h){var a=f(c);e+=Math.abs(a.x-m.x);g+=Math.abs(a.y-m.y);m=a;10>e&&10>g||(g>e?(d=!1,b.cancel&&b.cancel(c)):(c.preventDefault(),b.move&&b.move(a,c)))}});a.on(k(l,"end"),function(c){d&&(d=!1,b.end&&b.end(f(c),c))})}}}]);var t=["$parse","$timeout","$rootElement",function(f,
k,e){function a(a,d,b){for(var c=0;c<a.length;c+=2){var g=a[c+1],e=b;if(25>Math.abs(a[c]-d)&&25>Math.abs(g-e))return a.splice(c,c+2),!0}return!1}function b(b){if(!(2500<Date.now()-u)){var d=b.touches&&b.touches.length?b.touches:[b],e=d[0].clientX,d=d[0].clientY;if(!(1>e&&1>d||h&&h[0]===e&&h[1]===d)){h&&(h=null);var c=b.target;"label"===p.lowercase(c.nodeName||c[0]&&c[0].nodeName)&&(h=[e,d]);a(g,e,d)||(b.stopPropagation(),b.preventDefault(),b.target&&b.target.blur&&b.target.blur())}}}function l(a){a=
a.touches&&a.touches.length?a.touches:[a];var b=a[0].clientX,e=a[0].clientY;g.push(b,e);k(function(){for(var a=0;a<g.length;a+=2)if(g[a]===b&&g[a+1]===e){g.splice(a,a+2);break}},2500,!1)}var u,g,h;return function(h,d,k){var c=f(k.ngClick),n=!1,q,s,t,v;d.on("touchstart",function(a){n=!0;q=a.target?a.target:a.srcElement;3===q.nodeType&&(q=q.parentNode);d.addClass("ng-click-active");s=Date.now();a=a.originalEvent||a;a=(a.touches&&a.touches.length?a.touches:[a])[0];t=a.clientX;v=a.clientY});d.on("touchcancel",
function(a){n=!1;d.removeClass("ng-click-active")});d.on("touchend",function(c){var h=Date.now()-s,f=c.originalEvent||c,m=(f.changedTouches&&f.changedTouches.length?f.changedTouches:f.touches&&f.touches.length?f.touches:[f])[0],f=m.clientX,m=m.clientY,w=Math.sqrt(Math.pow(f-t,2)+Math.pow(m-v,2));n&&750>h&&12>w&&(g||(e[0].addEventListener("click",b,!0),e[0].addEventListener("touchstart",l,!0),g=[]),u=Date.now(),a(g,f,m),q&&q.blur(),p.isDefined(k.disabled)&&!1!==k.disabled||d.triggerHandler("click",
[c]));n=!1;d.removeClass("ng-click-active")});d.onclick=function(a){};d.on("click",function(a,b){h.$apply(function(){c(h,{$event:b||a})})});d.on("mousedown",function(a){d.addClass("ng-click-active")});d.on("mousemove mouseup",function(a){d.removeClass("ng-click-active")})}}];v("ngSwipeLeft",-1,"swipeleft");v("ngSwipeRight",1,"swiperight")})(window,window.angular);
//# sourceMappingURL=angular-touch.min.js.map

/**
 * Angular Dynamic Locale - 0.1.32
 * https://github.com/lgalfaso/angular-dynamic-locale
 * License: MIT
 */

!function(a,b){"function"==typeof define&&define.amd?define([],function(){return b()}):"object"==typeof exports?module.exports=b():b()}(this,function(){"use strict";return angular.module("tmh.dynamicLocale",[]).config(["$provide",function(a){function b(a){return a.$stateful=!0,a}a.decorator("dateFilter",["$delegate",b]),a.decorator("numberFilter",["$delegate",b]),a.decorator("currencyFilter",["$delegate",b])}]).constant("tmhDynamicLocale.STORAGE_KEY","tmhDynamicLocale.locale").provider("tmhDynamicLocale",["tmhDynamicLocale.STORAGE_KEY",function(a){function b(a,b,c,d){var f=document.createElement("script"),g=e?e:document.getElementsByTagName("body")[0],h=!1;f.type="text/javascript",f.readyState?f.onreadystatechange=function(){("complete"===f.readyState||"loaded"===f.readyState)&&(f.onreadystatechange=null,d(function(){h||(h=!0,g.removeChild(f),b())},30,!1))}:(f.onload=function(){h||(h=!0,g.removeChild(f),b())},f.onerror=function(){h||(h=!0,g.removeChild(f),c())}),f.src=a,f.async=!0,g.appendChild(f)}function c(a,c,d,e,h,i,l){function m(a,b){g===d&&(angular.forEach(a,function(c,d){b[d]?angular.isArray(b[d])&&(a[d].length=b[d].length):delete a[d]}),angular.forEach(b,function(c,d){angular.isArray(b[d])||angular.isObject(b[d])?(a[d]||(a[d]=angular.isArray(b[d])?[]:{}),m(a[d],b[d])):a[d]=b[d]}))}if(k[d])return g=d,k[d];var n,o=h.defer();return d===g?o.resolve(c):(n=i.get(d))?(g=d,e.$evalAsync(function(){m(c,n),f.put(j,d),e.$broadcast("$localeChangeSuccess",d,c),o.resolve(c)})):(g=d,k[d]=o.promise,b(a,function(){var a=angular.injector(["ngLocale"]),b=a.get("$locale");m(c,b),i.put(d,b),delete k[d],e.$applyAsync(function(){f.put(j,d),e.$broadcast("$localeChangeSuccess",d,c),o.resolve(c)})},function(){delete k[d],e.$applyAsync(function(){g===d&&(g=c.id),e.$broadcast("$localeChangeError",d),o.reject(d)})},l)),o.promise}var d,e,f,g,h="angular/i18n/angular-locale_{{locale}}.js",i="tmhDynamicLocaleStorageCache",j=a,k={},l={};this.localeLocationPattern=function(a){return a?(h=a,this):h},this.appendScriptTo=function(a){e=a},this.useStorage=function(a){i=a},this.useCookieStorage=function(){this.useStorage("$cookieStore")},this.defaultLocale=function(a){d=a},this.storageKey=function(a){return a?(j=a,this):j},this.addLocalePatternValue=function(a,b){l[a]=b},this.$get=["$rootScope","$injector","$interpolate","$locale","$q","tmhDynamicLocaleCache","$timeout",function(a,b,e,k,m,n,o){function p(b){var d={locale:b,angularVersion:angular.version.full};return c(q(angular.extend({},l,d)),k,b,a,m,n,o)}var q=e(h);return f=b.get(i),a.$evalAsync(function(){var a;(a=f.get(j)||d)&&p(a)}),{set:p,get:function(){return g}}}]}]).provider("tmhDynamicLocaleCache",function(){this.$get=["$cacheFactory",function(a){return a("tmh.dynamicLocales")}]}).provider("tmhDynamicLocaleStorageCache",function(){this.$get=["$cacheFactory",function(a){return a("tmh.dynamicLocales.store")}]}).run(["tmhDynamicLocale",angular.noop]),"tmh.dynamicLocale"});
//# sourceMappingURL=tmhDynamicLocale.min.js.map

(function webpackUniversalModuleDefinition(root, factory) {
	if(typeof exports === 'object' && typeof module === 'object')
		module.exports = factory(require("jquery"), require("angular"), require("jquery-ui/datepicker"));
	else if(typeof define === 'function' && define.amd)
		define(["jquery", "angular", "jquery-ui/datepicker"], factory);
	else if(typeof exports === 'object')
		exports["angularUiDate"] = factory(require("jquery"), require("angular"), require("jquery-ui/datepicker"));
	else
		root["angularUiDate"] = factory(root["jQuery"], root["angular"], root["jquery-ui/datepicker"]);
})(this, function(__WEBPACK_EXTERNAL_MODULE_1__, __WEBPACK_EXTERNAL_MODULE_2__, __WEBPACK_EXTERNAL_MODULE_3__) {
return /******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};

/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {

/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId])
/******/ 			return installedModules[moduleId].exports;

/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			exports: {},
/******/ 			id: moduleId,
/******/ 			loaded: false
/******/ 		};

/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);

/******/ 		// Flag the module as loaded
/******/ 		module.loaded = true;

/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}


/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;

/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;

/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "assets";

/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(0);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ function(module, exports, __webpack_require__) {

	'use strict';

	Object.defineProperty(exports, "__esModule", {
	  value: true
	});

	var _jquery = __webpack_require__(1);

	var _jquery2 = _interopRequireDefault(_jquery);

	var _angular = __webpack_require__(2);

	var _angular2 = _interopRequireDefault(_angular);

	var _datepicker = __webpack_require__(3);

	var _datepicker2 = _interopRequireDefault(_datepicker);

	function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

	// sets up jQuery with the datepicker plugin

	exports.default = _angular2.default.module('ui.date', []).constant('uiDateConfig', {}).constant('uiDateFormatConfig', '').factory('uiDateConverter', ['uiDateFormatConfig', function (uiDateFormatConfig) {
	  return {
	    stringToDate: stringToDate,
	    dateToString: dateToString
	  };

	  function dateToString(uiDateFormat, value) {
	    var dateFormat = uiDateFormat || uiDateFormatConfig;
	    if (value) {
	      if (dateFormat) {
	        try {
	          return _jquery2.default.datepicker.formatDate(dateFormat, value);
	        } catch (formatException) {
	          return undefined;
	        }
	      }

	      if (value.toISOString) {
	        return value.toISOString();
	      }
	    }
	    return null;
	  }

	  function stringToDate(dateFormat, valueToParse) {
	    dateFormat = dateFormat || uiDateFormatConfig;

	    if (_angular2.default.isDate(valueToParse) && !isNaN(valueToParse)) {
	      return valueToParse;
	    }

	    if (_angular2.default.isString(valueToParse)) {
	      if (dateFormat) {
	        return _jquery2.default.datepicker.parseDate(dateFormat, valueToParse);
	      }

	      var isoDate = new Date(valueToParse);
	      return isNaN(isoDate.getTime()) ? null : isoDate;
	    }

	    if (_angular2.default.isNumber(valueToParse)) {
	      // presumably timestamp to date object
	      return new Date(valueToParse);
	    }

	    return null;
	  }
	}]).directive('uiDate', ['uiDateConfig', 'uiDateConverter', function uiDateDirective(uiDateConfig, uiDateConverter) {

	  return {
	    require: '?ngModel',
	    link: function link(scope, element, attrs, controller) {

	      var $element = (0, _jquery2.default)(element);

	      var getOptions = function getOptions() {
	        return _angular2.default.extend({}, uiDateConfig, scope.$eval(attrs.uiDate));
	      };
	      var initDateWidget = function initDateWidget() {
	        var showing = false;
	        var opts = getOptions();

	        function setVal(forcedUpdate) {
	          var keys = ['Hours', 'Minutes', 'Seconds', 'Milliseconds'];
	          var isDate = _angular2.default.isDate(controller.$modelValue);
	          var preserve = {};

	          if (!forcedUpdate && isDate && controller.$modelValue.toDateString() === $element.datepicker('getDate').toDateString()) {
	            return;
	          }

	          if (isDate) {
	            _angular2.default.forEach(keys, function (key) {
	              preserve[key] = controller.$modelValue['get' + key]();
	            });
	          }

	          var newViewValue = $element.datepicker('getDate');

	          if (isDate) {
	            _angular2.default.forEach(keys, function (key) {
	              newViewValue['set' + key](preserve[key]);
	            });
	          }

	          controller.$setViewValue(newViewValue);
	        }

	        // If we have a controller (i.e. ngModelController) then wire it up
	        if (controller) {
	          // Set the view value in a $apply block when users selects
	          // (calling directive user's function too if provided)
	          var _onSelect = opts.onSelect || _angular2.default.noop;
	          opts.onSelect = function (value, picker) {
	            scope.$apply(function () {
	              showing = true;
	              setVal();
	              $element.blur();
	              _onSelect(value, picker, $element);
	            });
	          };

	          var _beforeShow = opts.beforeShow || _angular2.default.noop;
	          opts.beforeShow = function (input, picker) {
	            showing = true;
	            _beforeShow(input, picker, $element);
	          };

	          var _onClose = opts.onClose || _angular2.default.noop;
	          opts.onClose = function (value, picker) {
	            showing = false;
	            _onClose(value, picker, $element);
	          };

	          element.on('focus', function (focusEvent) {
	            if (attrs.readonly) {
	              focusEvent.stopImmediatePropagation();
	            }
	          });

	          $element.off('blur.datepicker').on('blur.datepicker', function () {
	            if (!showing) {
	              scope.$apply(function () {
	                $element.datepicker('setDate', $element.datepicker('getDate'));
	                setVal();
	              });
	            }
	          });

	          controller.$validators.uiDateValidator = function uiDateValidator(modelValue, viewValue) {
	            return viewValue === null || viewValue === '' || _angular2.default.isDate(uiDateConverter.stringToDate(attrs.uiDateFormat, viewValue));
	          };

	          controller.$parsers.push(function uiDateParser(valueToParse) {
	            return uiDateConverter.stringToDate(attrs.uiDateFormat, valueToParse);
	          });

	          // Update the date picker when the model changes
	          controller.$render = function () {
	            // Force a render to override whatever is in the input text box
	            if (_angular2.default.isDate(controller.$modelValue) === false && _angular2.default.isString(controller.$modelValue)) {
	              controller.$modelValue = uiDateConverter.stringToDate(attrs.uiDateFormat, controller.$modelValue);
	            }
	            $element.datepicker('setDate', controller.$modelValue);
	          };
	        }
	        // Check if the $element already has a datepicker.
	        //

	        if ($element.data('datepicker')) {
	          // Updates the datepicker options
	          $element.datepicker('option', opts);
	          $element.datepicker('refresh');
	        } else {
	          // Creates the new datepicker widget
	          $element.datepicker(opts);

	          // Cleanup on destroy, prevent memory leaking
	          $element.on('$destroy', function () {
	            $element.datepicker('hide');
	            $element.datepicker('destroy');
	          });
	        }

	        if (controller) {
	          controller.$render();
	          // Update the model with the value from the datepicker after parsed
	          setVal(true);
	        }
	      };

	      // Watch for changes to the directives options
	      scope.$watch(getOptions, initDateWidget, true);
	    }
	  };
	}]).directive('uiDateFormat', ['uiDateConverter', function (uiDateConverter) {
	  return {
	    require: 'ngModel',
	    link: function link(scope, element, attrs, modelCtrl) {
	      var dateFormat = attrs.uiDateFormat;

	      // Use the datepicker with the attribute value as the dateFormat string to convert to and from a string
	      modelCtrl.$formatters.unshift(function (value) {
	        return uiDateConverter.stringToDate(dateFormat, value);
	      });

	      modelCtrl.$parsers.push(function (value) {
	        return uiDateConverter.dateToString(dateFormat, value);
	      });
	    }
	  };
	}]);

/***/ },
/* 1 */
/***/ function(module, exports) {

	module.exports = __WEBPACK_EXTERNAL_MODULE_1__;

/***/ },
/* 2 */
/***/ function(module, exports) {

	module.exports = __WEBPACK_EXTERNAL_MODULE_2__;

/***/ },
/* 3 */
/***/ function(module, exports) {

	module.exports = __WEBPACK_EXTERNAL_MODULE_3__;

/***/ }
/******/ ])
});
;
//# sourceMappingURL=date.js.map

/*
 jQuery UI Slider plugin wrapper
*/
angular.module('ui.slider', []).value('uiSliderConfig',{}).directive('uiSlider', ['uiSliderConfig', '$timeout', function(uiSliderConfig, $timeout) {
    uiSliderConfig = uiSliderConfig || {};
    return {
        require: 'ngModel',
        compile: function() {
            var preLink = function (scope, elm, attrs, ngModel) {

                function parseNumber(n, decimals) {
                    return (decimals) ? parseFloat(n) : parseInt(n, 10);
                }

                var directiveOptions = angular.copy(scope.$eval(attrs.uiSlider));
                var options = angular.extend(directiveOptions || {}, uiSliderConfig);
                // Object holding range values
                var prevRangeValues = {
                    min: null,
                    max: null
                };

                // convenience properties
                var properties = ['min', 'max', 'step', 'lowerBound', 'upperBound'];
                var useDecimals = (!angular.isUndefined(attrs.useDecimals)) ? true : false;
                var updateOn = (angular.isDefined(options['updateOn'])) ? options['updateOn'] : 'slide'

                var init = function() {
                    // When ngModel is assigned an array of values then range is expected to be true.
                    // Warn user and change range to true else an error occurs when trying to drag handle
                    if (angular.isArray(ngModel.$viewValue) && options.range !== true) {
                        console.warn('Change your range option of ui-slider. When assigning ngModel an array of values then the range option should be set to true.');
                        options.range = true;
                    }

                    // Ensure the convenience properties are passed as options if they're defined
                    // This avoids init ordering issues where the slider's initial state (eg handle
                    // position) is calculated using widget defaults
                    // Note the properties take precedence over any duplicates in options
                    angular.forEach(properties, function(property) {
                        if (angular.isDefined(attrs[property])) {
                            options[property] = parseNumber(attrs[property], useDecimals);
                        }
                    });

                    elm.slider(options);
                    init = angular.noop;
                };

                // Find out if decimals are to be used for slider
                angular.forEach(properties, function(property) {
                    // support {{}} and watch for updates
                    attrs.$observe(property, function(newVal) {
                        if (!!newVal) {
                            init();
                            options[property] = parseNumber(newVal, useDecimals);
                            elm.slider('option', property, parseNumber(newVal, useDecimals));
                            ngModel.$render();
                        }
                    });
                });
                attrs.$observe('disabled', function(newVal) {
                    init();
                    elm.slider('option', 'disabled', !!newVal);
                });

                // Watch ui-slider (byVal) for changes and update
                scope.$watch(attrs.uiSlider, function(newVal) {
                    init();
                    if(newVal !== undefined) {
                      elm.slider('option', newVal);
                    }
                }, true);

                // Late-bind to prevent compiler clobbering
                $timeout(init, 0, true);

                // Update model value from slider
                elm.bind(updateOn, function(event, ui) {
                    var valuesChanged;

                    if (ui.values) {
                        var boundedValues = ui.values.slice();

                        if (options.lowerBound && boundedValues[0] < options.lowerBound) {
                            boundedValues[0] = Math.max(boundedValues[0], options.lowerBound);
                        }
                        if (options.upperBound && boundedValues[1] > options.upperBound) {
                            boundedValues[1] = Math.min(boundedValues[1], options.upperBound);
                        }

                        if (boundedValues[0] !== ui.values[0] || boundedValues[1] !== ui.values[1]) {
                            valuesChanged = true;
                            ui.values = boundedValues;
                        }
                    } else {
                        var boundedValue = ui.value;

                        if (options.lowerBound && boundedValue < options.lowerBound) {
                            boundedValue = Math.max(boundedValue, options.lowerBound);
                        }
                        if (options.upperBound && boundedValue > options.upperBound) {
                            boundedValue = Math.min(boundedValue, options.upperBound);
                        }

                        if (boundedValue !== ui.value) {
                            valuesChanged = true;
                            ui.value = boundedValue;
                        }
                    }


                    ngModel.$setViewValue(ui.values || ui.value);
                    $(ui.handle).find('.ui-slider-tip').text(ui.value);
                    scope.$apply();

                    if (valuesChanged) {
                        setTimeout(function() {
                            elm.slider('value', ui.values || ui.value);
                        }, 0);

                        return false;
                    }
                });

                // Update slider from model value
                ngModel.$render = function() {
                    init();
                    var method = options.range === true ? 'values' : 'value';

                    if (options.range !== true && isNaN(ngModel.$viewValue) && !(ngModel.$viewValue instanceof Array)) {
                        ngModel.$viewValue = 0;
                    }
                    else if (options.range && !angular.isDefined(ngModel.$viewValue)) {
                            ngModel.$viewValue = [0,0];
                    }

                    // Do some sanity check of range values
                    if (options.range === true) {
                        // previously, the model was a string b/c it was in a text input, need to convert to a array.
                        // make sure input exists, comma exists once, and it is a string.
                        if (ngModel.$viewValue && angular.isString(ngModel.$viewValue) && (ngModel.$viewValue.match(/,/g) || []).length === 1) {
                            // transform string model into array.
                            var valueArr = ngModel.$viewValue.split(',');
                            ngModel.$viewValue = [Number(valueArr[0]), Number(valueArr[1])];
                        }
                        // Check outer bounds for min and max values
                        if (angular.isDefined(options.min) && options.min > ngModel.$viewValue[0]) {
                            ngModel.$viewValue[0] = options.min;
                        }
                        if (angular.isDefined(options.max) && options.max < ngModel.$viewValue[1]) {
                            ngModel.$viewValue[1] = options.max;
                        }

                        // Check min and max range values
                        if (ngModel.$viewValue[0] > ngModel.$viewValue[1]) {
                            // Min value should be less to equal to max value
                            if (prevRangeValues.min >= ngModel.$viewValue[1]) {
                                ngModel.$viewValue[1] = prevRangeValues.min;
                            }
                            // Max value should be less to equal to min value
                            if (prevRangeValues.max <= ngModel.$viewValue[0]) {
                                ngModel.$viewValue[0] = prevRangeValues.max;
                            }
                        }

                        // Store values for later user
                        prevRangeValues.min = ngModel.$viewValue[0];
                        prevRangeValues.max = ngModel.$viewValue[1];

                    }
                    elm.slider(method, ngModel.$viewValue);
                };

                scope.$watch(attrs.ngModel, function() {
                    if (options.range === true) {
                        ngModel.$render();

                        $(elm).find('.ui-slider-tip').each(function(i, tipElm) {
                            $(tipElm).text(ngModel.$viewValue[i]);
                        });
                    } else {
                        $(elm).find('.ui-slider-tip').text(ngModel.$viewValue);
                    }
                }, true);

                function destroy() {
                    if (elm.hasClass('ui-slider')) {
                        elm.slider('destroy');
                    }
                }

                scope.$on("$destroy", destroy);
                elm.one('$destroy', destroy);
            };

            var postLink = function (scope, element, attrs, ngModel) {
                // Add tick marks if 'tick' and 'step' attributes have been setted on element.
                // Support horizontal slider bar so far. 'tick' and 'step' attributes are required.
                var options = angular.extend({}, scope.$eval(attrs.uiSlider));
                var properties = ['min', 'max', 'step', 'tick', 'tip'];
                angular.forEach(properties, function(property) {
                    if (angular.isDefined(attrs[property])) {
                        options[property] = attrs[property];
                    }
                });
                if (angular.isDefined(options['tick']) && angular.isDefined(options['step'])) {
                    var total = parseInt( (parseInt(options['max']) - parseInt(options['min'])) /parseInt(options['step']));
                    for (var i = total; i >= 0; i--) {
                        var left = ((i / total) * 100) + '%';
                        $("<div/>").addClass("ui-slider-tick").appendTo(element).css({left: left});
                    };
                }
                if(angular.isDefined(options['tip'])) {
                    $timeout(function(){
                        var handles = element.find('.ui-slider-handle');
                        if(handles && handles.length>1 && ngModel.$viewValue && angular.isArray(ngModel.$viewValue)){
                            $(handles[0]).append('<div class="ui-slider-tip">'+ngModel.$viewValue[0]+'</div>');
                            $(handles[1]).append('<div class="ui-slider-tip">'+ngModel.$viewValue[1]+'</div>');
                        }else{
                            element.find('.ui-slider-handle').append('<div class="ui-slider-tip">'+ngModel.$viewValue+'</div>');
                        }
                    },10);
                }
            }

            return {
                pre: preLink,
                post: postLink
            };
        }
    };
}]);

/*!
 * Bootstrap v3.3.7 (http://getbootstrap.com)
 * Copyright 2011-2016 Twitter, Inc.
 * Licensed under the MIT license
 */
if("undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(a){"use strict";var b=a.fn.jquery.split(" ")[0].split(".");if(b[0]<2&&b[1]<9||1==b[0]&&9==b[1]&&b[2]<1||b[0]>3)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher, but lower than version 4")}(jQuery),+function(a){"use strict";function b(){var a=document.createElement("bootstrap"),b={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var c in b)if(void 0!==a.style[c])return{end:b[c]};return!1}a.fn.emulateTransitionEnd=function(b){var c=!1,d=this;a(this).one("bsTransitionEnd",function(){c=!0});var e=function(){c||a(d).trigger(a.support.transition.end)};return setTimeout(e,b),this},a(function(){a.support.transition=b(),a.support.transition&&(a.event.special.bsTransitionEnd={bindType:a.support.transition.end,delegateType:a.support.transition.end,handle:function(b){if(a(b.target).is(this))return b.handleObj.handler.apply(this,arguments)}})})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var c=a(this),e=c.data("bs.alert");e||c.data("bs.alert",e=new d(this)),"string"==typeof b&&e[b].call(c)})}var c='[data-dismiss="alert"]',d=function(b){a(b).on("click",c,this.close)};d.VERSION="3.3.7",d.TRANSITION_DURATION=150,d.prototype.close=function(b){function c(){g.detach().trigger("closed.bs.alert").remove()}var e=a(this),f=e.attr("data-target");f||(f=e.attr("href"),f=f&&f.replace(/.*(?=#[^\s]*$)/,""));var g=a("#"===f?[]:f);b&&b.preventDefault(),g.length||(g=e.closest(".alert")),g.trigger(b=a.Event("close.bs.alert")),b.isDefaultPrevented()||(g.removeClass("in"),a.support.transition&&g.hasClass("fade")?g.one("bsTransitionEnd",c).emulateTransitionEnd(d.TRANSITION_DURATION):c())};var e=a.fn.alert;a.fn.alert=b,a.fn.alert.Constructor=d,a.fn.alert.noConflict=function(){return a.fn.alert=e,this},a(document).on("click.bs.alert.data-api",c,d.prototype.close)}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.button"),f="object"==typeof b&&b;e||d.data("bs.button",e=new c(this,f)),"toggle"==b?e.toggle():b&&e.setState(b)})}var c=function(b,d){this.$element=a(b),this.options=a.extend({},c.DEFAULTS,d),this.isLoading=!1};c.VERSION="3.3.7",c.DEFAULTS={loadingText:"loading..."},c.prototype.setState=function(b){var c="disabled",d=this.$element,e=d.is("input")?"val":"html",f=d.data();b+="Text",null==f.resetText&&d.data("resetText",d[e]()),setTimeout(a.proxy(function(){d[e](null==f[b]?this.options[b]:f[b]),"loadingText"==b?(this.isLoading=!0,d.addClass(c).attr(c,c).prop(c,!0)):this.isLoading&&(this.isLoading=!1,d.removeClass(c).removeAttr(c).prop(c,!1))},this),0)},c.prototype.toggle=function(){var a=!0,b=this.$element.closest('[data-toggle="buttons"]');if(b.length){var c=this.$element.find("input");"radio"==c.prop("type")?(c.prop("checked")&&(a=!1),b.find(".active").removeClass("active"),this.$element.addClass("active")):"checkbox"==c.prop("type")&&(c.prop("checked")!==this.$element.hasClass("active")&&(a=!1),this.$element.toggleClass("active")),c.prop("checked",this.$element.hasClass("active")),a&&c.trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active")};var d=a.fn.button;a.fn.button=b,a.fn.button.Constructor=c,a.fn.button.noConflict=function(){return a.fn.button=d,this},a(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(c){var d=a(c.target).closest(".btn");b.call(d,"toggle"),a(c.target).is('input[type="radio"], input[type="checkbox"]')||(c.preventDefault(),d.is("input,button")?d.trigger("focus"):d.find("input:visible,button:visible").first().trigger("focus"))}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(b){a(b.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(b.type))})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.carousel"),f=a.extend({},c.DEFAULTS,d.data(),"object"==typeof b&&b),g="string"==typeof b?b:f.slide;e||d.data("bs.carousel",e=new c(this,f)),"number"==typeof b?e.to(b):g?e[g]():f.interval&&e.pause().cycle()})}var c=function(b,c){this.$element=a(b),this.$indicators=this.$element.find(".carousel-indicators"),this.options=c,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",a.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",a.proxy(this.pause,this)).on("mouseleave.bs.carousel",a.proxy(this.cycle,this))};c.VERSION="3.3.7",c.TRANSITION_DURATION=600,c.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},c.prototype.keydown=function(a){if(!/input|textarea/i.test(a.target.tagName)){switch(a.which){case 37:this.prev();break;case 39:this.next();break;default:return}a.preventDefault()}},c.prototype.cycle=function(b){return b||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(a.proxy(this.next,this),this.options.interval)),this},c.prototype.getItemIndex=function(a){return this.$items=a.parent().children(".item"),this.$items.index(a||this.$active)},c.prototype.getItemForDirection=function(a,b){var c=this.getItemIndex(b),d="prev"==a&&0===c||"next"==a&&c==this.$items.length-1;if(d&&!this.options.wrap)return b;var e="prev"==a?-1:1,f=(c+e)%this.$items.length;return this.$items.eq(f)},c.prototype.to=function(a){var b=this,c=this.getItemIndex(this.$active=this.$element.find(".item.active"));if(!(a>this.$items.length-1||a<0))return this.sliding?this.$element.one("slid.bs.carousel",function(){b.to(a)}):c==a?this.pause().cycle():this.slide(a>c?"next":"prev",this.$items.eq(a))},c.prototype.pause=function(b){return b||(this.paused=!0),this.$element.find(".next, .prev").length&&a.support.transition&&(this.$element.trigger(a.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},c.prototype.next=function(){if(!this.sliding)return this.slide("next")},c.prototype.prev=function(){if(!this.sliding)return this.slide("prev")},c.prototype.slide=function(b,d){var e=this.$element.find(".item.active"),f=d||this.getItemForDirection(b,e),g=this.interval,h="next"==b?"left":"right",i=this;if(f.hasClass("active"))return this.sliding=!1;var j=f[0],k=a.Event("slide.bs.carousel",{relatedTarget:j,direction:h});if(this.$element.trigger(k),!k.isDefaultPrevented()){if(this.sliding=!0,g&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var l=a(this.$indicators.children()[this.getItemIndex(f)]);l&&l.addClass("active")}var m=a.Event("slid.bs.carousel",{relatedTarget:j,direction:h});return a.support.transition&&this.$element.hasClass("slide")?(f.addClass(b),f[0].offsetWidth,e.addClass(h),f.addClass(h),e.one("bsTransitionEnd",function(){f.removeClass([b,h].join(" ")).addClass("active"),e.removeClass(["active",h].join(" ")),i.sliding=!1,setTimeout(function(){i.$element.trigger(m)},0)}).emulateTransitionEnd(c.TRANSITION_DURATION)):(e.removeClass("active"),f.addClass("active"),this.sliding=!1,this.$element.trigger(m)),g&&this.cycle(),this}};var d=a.fn.carousel;a.fn.carousel=b,a.fn.carousel.Constructor=c,a.fn.carousel.noConflict=function(){return a.fn.carousel=d,this};var e=function(c){var d,e=a(this),f=a(e.attr("data-target")||(d=e.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,""));if(f.hasClass("carousel")){var g=a.extend({},f.data(),e.data()),h=e.attr("data-slide-to");h&&(g.interval=!1),b.call(f,g),h&&f.data("bs.carousel").to(h),c.preventDefault()}};a(document).on("click.bs.carousel.data-api","[data-slide]",e).on("click.bs.carousel.data-api","[data-slide-to]",e),a(window).on("load",function(){a('[data-ride="carousel"]').each(function(){var c=a(this);b.call(c,c.data())})})}(jQuery),+function(a){"use strict";function b(b){var c,d=b.attr("data-target")||(c=b.attr("href"))&&c.replace(/.*(?=#[^\s]+$)/,"");return a(d)}function c(b){return this.each(function(){var c=a(this),e=c.data("bs.collapse"),f=a.extend({},d.DEFAULTS,c.data(),"object"==typeof b&&b);!e&&f.toggle&&/show|hide/.test(b)&&(f.toggle=!1),e||c.data("bs.collapse",e=new d(this,f)),"string"==typeof b&&e[b]()})}var d=function(b,c){this.$element=a(b),this.options=a.extend({},d.DEFAULTS,c),this.$trigger=a('[data-toggle="collapse"][href="#'+b.id+'"],[data-toggle="collapse"][data-target="#'+b.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};d.VERSION="3.3.7",d.TRANSITION_DURATION=350,d.DEFAULTS={toggle:!0},d.prototype.dimension=function(){var a=this.$element.hasClass("width");return a?"width":"height"},d.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var b,e=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(e&&e.length&&(b=e.data("bs.collapse"),b&&b.transitioning))){var f=a.Event("show.bs.collapse");if(this.$element.trigger(f),!f.isDefaultPrevented()){e&&e.length&&(c.call(e,"hide"),b||e.data("bs.collapse",null));var g=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[g](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var h=function(){this.$element.removeClass("collapsing").addClass("collapse in")[g](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!a.support.transition)return h.call(this);var i=a.camelCase(["scroll",g].join("-"));this.$element.one("bsTransitionEnd",a.proxy(h,this)).emulateTransitionEnd(d.TRANSITION_DURATION)[g](this.$element[0][i])}}}},d.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var b=a.Event("hide.bs.collapse");if(this.$element.trigger(b),!b.isDefaultPrevented()){var c=this.dimension();this.$element[c](this.$element[c]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var e=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return a.support.transition?void this.$element[c](0).one("bsTransitionEnd",a.proxy(e,this)).emulateTransitionEnd(d.TRANSITION_DURATION):e.call(this)}}},d.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},d.prototype.getParent=function(){return a(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(a.proxy(function(c,d){var e=a(d);this.addAriaAndCollapsedClass(b(e),e)},this)).end()},d.prototype.addAriaAndCollapsedClass=function(a,b){var c=a.hasClass("in");a.attr("aria-expanded",c),b.toggleClass("collapsed",!c).attr("aria-expanded",c)};var e=a.fn.collapse;a.fn.collapse=c,a.fn.collapse.Constructor=d,a.fn.collapse.noConflict=function(){return a.fn.collapse=e,this},a(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(d){var e=a(this);e.attr("data-target")||d.preventDefault();var f=b(e),g=f.data("bs.collapse"),h=g?"toggle":e.data();c.call(f,h)})}(jQuery),+function(a){"use strict";function b(b){var c=b.attr("data-target");c||(c=b.attr("href"),c=c&&/#[A-Za-z]/.test(c)&&c.replace(/.*(?=#[^\s]*$)/,""));var d=c&&a(c);return d&&d.length?d:b.parent()}function c(c){c&&3===c.which||(a(e).remove(),a(f).each(function(){var d=a(this),e=b(d),f={relatedTarget:this};e.hasClass("open")&&(c&&"click"==c.type&&/input|textarea/i.test(c.target.tagName)&&a.contains(e[0],c.target)||(e.trigger(c=a.Event("hide.bs.dropdown",f)),c.isDefaultPrevented()||(d.attr("aria-expanded","false"),e.removeClass("open").trigger(a.Event("hidden.bs.dropdown",f)))))}))}function d(b){return this.each(function(){var c=a(this),d=c.data("bs.dropdown");d||c.data("bs.dropdown",d=new g(this)),"string"==typeof b&&d[b].call(c)})}var e=".dropdown-backdrop",f='[data-toggle="dropdown"]',g=function(b){a(b).on("click.bs.dropdown",this.toggle)};g.VERSION="3.3.7",g.prototype.toggle=function(d){var e=a(this);if(!e.is(".disabled, :disabled")){var f=b(e),g=f.hasClass("open");if(c(),!g){"ontouchstart"in document.documentElement&&!f.closest(".navbar-nav").length&&a(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(a(this)).on("click",c);var h={relatedTarget:this};if(f.trigger(d=a.Event("show.bs.dropdown",h)),d.isDefaultPrevented())return;e.trigger("focus").attr("aria-expanded","true"),f.toggleClass("open").trigger(a.Event("shown.bs.dropdown",h))}return!1}},g.prototype.keydown=function(c){if(/(38|40|27|32)/.test(c.which)&&!/input|textarea/i.test(c.target.tagName)){var d=a(this);if(c.preventDefault(),c.stopPropagation(),!d.is(".disabled, :disabled")){var e=b(d),g=e.hasClass("open");if(!g&&27!=c.which||g&&27==c.which)return 27==c.which&&e.find(f).trigger("focus"),d.trigger("click");var h=" li:not(.disabled):visible a",i=e.find(".dropdown-menu"+h);if(i.length){var j=i.index(c.target);38==c.which&&j>0&&j--,40==c.which&&j<i.length-1&&j++,~j||(j=0),i.eq(j).trigger("focus")}}}};var h=a.fn.dropdown;a.fn.dropdown=d,a.fn.dropdown.Constructor=g,a.fn.dropdown.noConflict=function(){return a.fn.dropdown=h,this},a(document).on("click.bs.dropdown.data-api",c).on("click.bs.dropdown.data-api",".dropdown form",function(a){a.stopPropagation()}).on("click.bs.dropdown.data-api",f,g.prototype.toggle).on("keydown.bs.dropdown.data-api",f,g.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",g.prototype.keydown)}(jQuery),+function(a){"use strict";function b(b,d){return this.each(function(){var e=a(this),f=e.data("bs.modal"),g=a.extend({},c.DEFAULTS,e.data(),"object"==typeof b&&b);f||e.data("bs.modal",f=new c(this,g)),"string"==typeof b?f[b](d):g.show&&f.show(d)})}var c=function(b,c){this.options=c,this.$body=a(document.body),this.$element=a(b),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,a.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};c.VERSION="3.3.7",c.TRANSITION_DURATION=300,c.BACKDROP_TRANSITION_DURATION=150,c.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},c.prototype.toggle=function(a){return this.isShown?this.hide():this.show(a)},c.prototype.show=function(b){var d=this,e=a.Event("show.bs.modal",{relatedTarget:b});this.$element.trigger(e),this.isShown||e.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',a.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){d.$element.one("mouseup.dismiss.bs.modal",function(b){a(b.target).is(d.$element)&&(d.ignoreBackdropClick=!0)})}),this.backdrop(function(){var e=a.support.transition&&d.$element.hasClass("fade");d.$element.parent().length||d.$element.appendTo(d.$body),d.$element.show().scrollTop(0),d.adjustDialog(),e&&d.$element[0].offsetWidth,d.$element.addClass("in"),d.enforceFocus();var f=a.Event("shown.bs.modal",{relatedTarget:b});e?d.$dialog.one("bsTransitionEnd",function(){d.$element.trigger("focus").trigger(f)}).emulateTransitionEnd(c.TRANSITION_DURATION):d.$element.trigger("focus").trigger(f)}))},c.prototype.hide=function(b){b&&b.preventDefault(),b=a.Event("hide.bs.modal"),this.$element.trigger(b),this.isShown&&!b.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),a(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),a.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",a.proxy(this.hideModal,this)).emulateTransitionEnd(c.TRANSITION_DURATION):this.hideModal())},c.prototype.enforceFocus=function(){a(document).off("focusin.bs.modal").on("focusin.bs.modal",a.proxy(function(a){document===a.target||this.$element[0]===a.target||this.$element.has(a.target).length||this.$element.trigger("focus")},this))},c.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",a.proxy(function(a){27==a.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},c.prototype.resize=function(){this.isShown?a(window).on("resize.bs.modal",a.proxy(this.handleUpdate,this)):a(window).off("resize.bs.modal")},c.prototype.hideModal=function(){var a=this;this.$element.hide(),this.backdrop(function(){a.$body.removeClass("modal-open"),a.resetAdjustments(),a.resetScrollbar(),a.$element.trigger("hidden.bs.modal")})},c.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},c.prototype.backdrop=function(b){var d=this,e=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var f=a.support.transition&&e;if(this.$backdrop=a(document.createElement("div")).addClass("modal-backdrop "+e).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",a.proxy(function(a){return this.ignoreBackdropClick?void(this.ignoreBackdropClick=!1):void(a.target===a.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),f&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!b)return;f?this.$backdrop.one("bsTransitionEnd",b).emulateTransitionEnd(c.BACKDROP_TRANSITION_DURATION):b()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var g=function(){d.removeBackdrop(),b&&b()};a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",g).emulateTransitionEnd(c.BACKDROP_TRANSITION_DURATION):g()}else b&&b()},c.prototype.handleUpdate=function(){this.adjustDialog()},c.prototype.adjustDialog=function(){var a=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&a?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!a?this.scrollbarWidth:""})},c.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},c.prototype.checkScrollbar=function(){var a=window.innerWidth;if(!a){var b=document.documentElement.getBoundingClientRect();a=b.right-Math.abs(b.left)}this.bodyIsOverflowing=document.body.clientWidth<a,this.scrollbarWidth=this.measureScrollbar()},c.prototype.setScrollbar=function(){var a=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",a+this.scrollbarWidth)},c.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},c.prototype.measureScrollbar=function(){var a=document.createElement("div");a.className="modal-scrollbar-measure",this.$body.append(a);var b=a.offsetWidth-a.clientWidth;return this.$body[0].removeChild(a),b};var d=a.fn.modal;a.fn.modal=b,a.fn.modal.Constructor=c,a.fn.modal.noConflict=function(){return a.fn.modal=d,this},a(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(c){var d=a(this),e=d.attr("href"),f=a(d.attr("data-target")||e&&e.replace(/.*(?=#[^\s]+$)/,"")),g=f.data("bs.modal")?"toggle":a.extend({remote:!/#/.test(e)&&e},f.data(),d.data());d.is("a")&&c.preventDefault(),f.one("show.bs.modal",function(a){a.isDefaultPrevented()||f.one("hidden.bs.modal",function(){d.is(":visible")&&d.trigger("focus")})}),b.call(f,g,this)})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.tooltip"),f="object"==typeof b&&b;!e&&/destroy|hide/.test(b)||(e||d.data("bs.tooltip",e=new c(this,f)),"string"==typeof b&&e[b]())})}var c=function(a,b){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",a,b)};c.VERSION="3.3.7",c.TRANSITION_DURATION=150,c.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},c.prototype.init=function(b,c,d){if(this.enabled=!0,this.type=b,this.$element=a(c),this.options=this.getOptions(d),this.$viewport=this.options.viewport&&a(a.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var e=this.options.trigger.split(" "),f=e.length;f--;){var g=e[f];if("click"==g)this.$element.on("click."+this.type,this.options.selector,a.proxy(this.toggle,this));else if("manual"!=g){var h="hover"==g?"mouseenter":"focusin",i="hover"==g?"mouseleave":"focusout";this.$element.on(h+"."+this.type,this.options.selector,a.proxy(this.enter,this)),this.$element.on(i+"."+this.type,this.options.selector,a.proxy(this.leave,this))}}this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},c.prototype.getDefaults=function(){return c.DEFAULTS},c.prototype.getOptions=function(b){return b=a.extend({},this.getDefaults(),this.$element.data(),b),b.delay&&"number"==typeof b.delay&&(b.delay={show:b.delay,hide:b.delay}),b},c.prototype.getDelegateOptions=function(){var b={},c=this.getDefaults();return this._options&&a.each(this._options,function(a,d){c[a]!=d&&(b[a]=d)}),b},c.prototype.enter=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data("bs."+this.type);return c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c)),b instanceof a.Event&&(c.inState["focusin"==b.type?"focus":"hover"]=!0),c.tip().hasClass("in")||"in"==c.hoverState?void(c.hoverState="in"):(clearTimeout(c.timeout),c.hoverState="in",c.options.delay&&c.options.delay.show?void(c.timeout=setTimeout(function(){"in"==c.hoverState&&c.show()},c.options.delay.show)):c.show())},c.prototype.isInStateTrue=function(){for(var a in this.inState)if(this.inState[a])return!0;return!1},c.prototype.leave=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data("bs."+this.type);if(c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c)),b instanceof a.Event&&(c.inState["focusout"==b.type?"focus":"hover"]=!1),!c.isInStateTrue())return clearTimeout(c.timeout),c.hoverState="out",c.options.delay&&c.options.delay.hide?void(c.timeout=setTimeout(function(){"out"==c.hoverState&&c.hide()},c.options.delay.hide)):c.hide()},c.prototype.show=function(){var b=a.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(b);var d=a.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(b.isDefaultPrevented()||!d)return;var e=this,f=this.tip(),g=this.getUID(this.type);this.setContent(),f.attr("id",g),this.$element.attr("aria-describedby",g),this.options.animation&&f.addClass("fade");var h="function"==typeof this.options.placement?this.options.placement.call(this,f[0],this.$element[0]):this.options.placement,i=/\s?auto?\s?/i,j=i.test(h);j&&(h=h.replace(i,"")||"top"),f.detach().css({top:0,left:0,display:"block"}).addClass(h).data("bs."+this.type,this),this.options.container?f.appendTo(this.options.container):f.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var k=this.getPosition(),l=f[0].offsetWidth,m=f[0].offsetHeight;if(j){var n=h,o=this.getPosition(this.$viewport);h="bottom"==h&&k.bottom+m>o.bottom?"top":"top"==h&&k.top-m<o.top?"bottom":"right"==h&&k.right+l>o.width?"left":"left"==h&&k.left-l<o.left?"right":h,f.removeClass(n).addClass(h)}var p=this.getCalculatedOffset(h,k,l,m);this.applyPlacement(p,h);var q=function(){var a=e.hoverState;e.$element.trigger("shown.bs."+e.type),e.hoverState=null,"out"==a&&e.leave(e)};a.support.transition&&this.$tip.hasClass("fade")?f.one("bsTransitionEnd",q).emulateTransitionEnd(c.TRANSITION_DURATION):q()}},c.prototype.applyPlacement=function(b,c){var d=this.tip(),e=d[0].offsetWidth,f=d[0].offsetHeight,g=parseInt(d.css("margin-top"),10),h=parseInt(d.css("margin-left"),10);isNaN(g)&&(g=0),isNaN(h)&&(h=0),b.top+=g,b.left+=h,a.offset.setOffset(d[0],a.extend({using:function(a){d.css({top:Math.round(a.top),left:Math.round(a.left)})}},b),0),d.addClass("in");var i=d[0].offsetWidth,j=d[0].offsetHeight;"top"==c&&j!=f&&(b.top=b.top+f-j);var k=this.getViewportAdjustedDelta(c,b,i,j);k.left?b.left+=k.left:b.top+=k.top;var l=/top|bottom/.test(c),m=l?2*k.left-e+i:2*k.top-f+j,n=l?"offsetWidth":"offsetHeight";d.offset(b),this.replaceArrow(m,d[0][n],l)},c.prototype.replaceArrow=function(a,b,c){this.arrow().css(c?"left":"top",50*(1-a/b)+"%").css(c?"top":"left","")},c.prototype.setContent=function(){var a=this.tip(),b=this.getTitle();a.find(".tooltip-inner")[this.options.html?"html":"text"](b),a.removeClass("fade in top bottom left right")},c.prototype.hide=function(b){function d(){"in"!=e.hoverState&&f.detach(),e.$element&&e.$element.removeAttr("aria-describedby").trigger("hidden.bs."+e.type),b&&b()}var e=this,f=a(this.$tip),g=a.Event("hide.bs."+this.type);if(this.$element.trigger(g),!g.isDefaultPrevented())return f.removeClass("in"),a.support.transition&&f.hasClass("fade")?f.one("bsTransitionEnd",d).emulateTransitionEnd(c.TRANSITION_DURATION):d(),this.hoverState=null,this},c.prototype.fixTitle=function(){var a=this.$element;(a.attr("title")||"string"!=typeof a.attr("data-original-title"))&&a.attr("data-original-title",a.attr("title")||"").attr("title","")},c.prototype.hasContent=function(){return this.getTitle()},c.prototype.getPosition=function(b){b=b||this.$element;var c=b[0],d="BODY"==c.tagName,e=c.getBoundingClientRect();null==e.width&&(e=a.extend({},e,{width:e.right-e.left,height:e.bottom-e.top}));var f=window.SVGElement&&c instanceof window.SVGElement,g=d?{top:0,left:0}:f?null:b.offset(),h={scroll:d?document.documentElement.scrollTop||document.body.scrollTop:b.scrollTop()},i=d?{width:a(window).width(),height:a(window).height()}:null;return a.extend({},e,h,i,g)},c.prototype.getCalculatedOffset=function(a,b,c,d){return"bottom"==a?{top:b.top+b.height,left:b.left+b.width/2-c/2}:"top"==a?{top:b.top-d,left:b.left+b.width/2-c/2}:"left"==a?{top:b.top+b.height/2-d/2,left:b.left-c}:{top:b.top+b.height/2-d/2,left:b.left+b.width}},c.prototype.getViewportAdjustedDelta=function(a,b,c,d){var e={top:0,left:0};if(!this.$viewport)return e;var f=this.options.viewport&&this.options.viewport.padding||0,g=this.getPosition(this.$viewport);if(/right|left/.test(a)){var h=b.top-f-g.scroll,i=b.top+f-g.scroll+d;h<g.top?e.top=g.top-h:i>g.top+g.height&&(e.top=g.top+g.height-i)}else{var j=b.left-f,k=b.left+f+c;j<g.left?e.left=g.left-j:k>g.right&&(e.left=g.left+g.width-k)}return e},c.prototype.getTitle=function(){var a,b=this.$element,c=this.options;return a=b.attr("data-original-title")||("function"==typeof c.title?c.title.call(b[0]):c.title)},c.prototype.getUID=function(a){do a+=~~(1e6*Math.random());while(document.getElementById(a));return a},c.prototype.tip=function(){if(!this.$tip&&(this.$tip=a(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},c.prototype.enable=function(){this.enabled=!0},c.prototype.disable=function(){this.enabled=!1},c.prototype.toggleEnabled=function(){this.enabled=!this.enabled},c.prototype.toggle=function(b){var c=this;b&&(c=a(b.currentTarget).data("bs."+this.type),c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c))),b?(c.inState.click=!c.inState.click,c.isInStateTrue()?c.enter(c):c.leave(c)):c.tip().hasClass("in")?c.leave(c):c.enter(c)},c.prototype.destroy=function(){var a=this;clearTimeout(this.timeout),this.hide(function(){a.$element.off("."+a.type).removeData("bs."+a.type),a.$tip&&a.$tip.detach(),a.$tip=null,a.$arrow=null,a.$viewport=null,a.$element=null})};var d=a.fn.tooltip;a.fn.tooltip=b,a.fn.tooltip.Constructor=c,a.fn.tooltip.noConflict=function(){return a.fn.tooltip=d,this}}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.popover"),f="object"==typeof b&&b;!e&&/destroy|hide/.test(b)||(e||d.data("bs.popover",e=new c(this,f)),"string"==typeof b&&e[b]())})}var c=function(a,b){this.init("popover",a,b)};if(!a.fn.tooltip)throw new Error("Popover requires tooltip.js");c.VERSION="3.3.7",c.DEFAULTS=a.extend({},a.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),c.prototype=a.extend({},a.fn.tooltip.Constructor.prototype),c.prototype.constructor=c,c.prototype.getDefaults=function(){return c.DEFAULTS},c.prototype.setContent=function(){var a=this.tip(),b=this.getTitle(),c=this.getContent();a.find(".popover-title")[this.options.html?"html":"text"](b),a.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof c?"html":"append":"text"](c),a.removeClass("fade top bottom left right in"),a.find(".popover-title").html()||a.find(".popover-title").hide()},c.prototype.hasContent=function(){return this.getTitle()||this.getContent()},c.prototype.getContent=function(){var a=this.$element,b=this.options;return a.attr("data-content")||("function"==typeof b.content?b.content.call(a[0]):b.content)},c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var d=a.fn.popover;a.fn.popover=b,a.fn.popover.Constructor=c,a.fn.popover.noConflict=function(){return a.fn.popover=d,this}}(jQuery),+function(a){"use strict";function b(c,d){this.$body=a(document.body),this.$scrollElement=a(a(c).is(document.body)?window:c),this.options=a.extend({},b.DEFAULTS,d),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",a.proxy(this.process,this)),this.refresh(),this.process()}function c(c){return this.each(function(){var d=a(this),e=d.data("bs.scrollspy"),f="object"==typeof c&&c;e||d.data("bs.scrollspy",e=new b(this,f)),"string"==typeof c&&e[c]()})}b.VERSION="3.3.7",b.DEFAULTS={offset:10},b.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},b.prototype.refresh=function(){var b=this,c="offset",d=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),a.isWindow(this.$scrollElement[0])||(c="position",d=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var b=a(this),e=b.data("target")||b.attr("href"),f=/^#./.test(e)&&a(e);return f&&f.length&&f.is(":visible")&&[[f[c]().top+d,e]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){b.offsets.push(this[0]),b.targets.push(this[1])})},b.prototype.process=function(){var a,b=this.$scrollElement.scrollTop()+this.options.offset,c=this.getScrollHeight(),d=this.options.offset+c-this.$scrollElement.height(),e=this.offsets,f=this.targets,g=this.activeTarget;if(this.scrollHeight!=c&&this.refresh(),b>=d)return g!=(a=f[f.length-1])&&this.activate(a);if(g&&b<e[0])return this.activeTarget=null,this.clear();for(a=e.length;a--;)g!=f[a]&&b>=e[a]&&(void 0===e[a+1]||b<e[a+1])&&this.activate(f[a])},b.prototype.activate=function(b){
this.activeTarget=b,this.clear();var c=this.selector+'[data-target="'+b+'"],'+this.selector+'[href="'+b+'"]',d=a(c).parents("li").addClass("active");d.parent(".dropdown-menu").length&&(d=d.closest("li.dropdown").addClass("active")),d.trigger("activate.bs.scrollspy")},b.prototype.clear=function(){a(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var d=a.fn.scrollspy;a.fn.scrollspy=c,a.fn.scrollspy.Constructor=b,a.fn.scrollspy.noConflict=function(){return a.fn.scrollspy=d,this},a(window).on("load.bs.scrollspy.data-api",function(){a('[data-spy="scroll"]').each(function(){var b=a(this);c.call(b,b.data())})})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.tab");e||d.data("bs.tab",e=new c(this)),"string"==typeof b&&e[b]()})}var c=function(b){this.element=a(b)};c.VERSION="3.3.7",c.TRANSITION_DURATION=150,c.prototype.show=function(){var b=this.element,c=b.closest("ul:not(.dropdown-menu)"),d=b.data("target");if(d||(d=b.attr("href"),d=d&&d.replace(/.*(?=#[^\s]*$)/,"")),!b.parent("li").hasClass("active")){var e=c.find(".active:last a"),f=a.Event("hide.bs.tab",{relatedTarget:b[0]}),g=a.Event("show.bs.tab",{relatedTarget:e[0]});if(e.trigger(f),b.trigger(g),!g.isDefaultPrevented()&&!f.isDefaultPrevented()){var h=a(d);this.activate(b.closest("li"),c),this.activate(h,h.parent(),function(){e.trigger({type:"hidden.bs.tab",relatedTarget:b[0]}),b.trigger({type:"shown.bs.tab",relatedTarget:e[0]})})}}},c.prototype.activate=function(b,d,e){function f(){g.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),b.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),h?(b[0].offsetWidth,b.addClass("in")):b.removeClass("fade"),b.parent(".dropdown-menu").length&&b.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),e&&e()}var g=d.find("> .active"),h=e&&a.support.transition&&(g.length&&g.hasClass("fade")||!!d.find("> .fade").length);g.length&&h?g.one("bsTransitionEnd",f).emulateTransitionEnd(c.TRANSITION_DURATION):f(),g.removeClass("in")};var d=a.fn.tab;a.fn.tab=b,a.fn.tab.Constructor=c,a.fn.tab.noConflict=function(){return a.fn.tab=d,this};var e=function(c){c.preventDefault(),b.call(a(this),"show")};a(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',e).on("click.bs.tab.data-api",'[data-toggle="pill"]',e)}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.affix"),f="object"==typeof b&&b;e||d.data("bs.affix",e=new c(this,f)),"string"==typeof b&&e[b]()})}var c=function(b,d){this.options=a.extend({},c.DEFAULTS,d),this.$target=a(this.options.target).on("scroll.bs.affix.data-api",a.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",a.proxy(this.checkPositionWithEventLoop,this)),this.$element=a(b),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};c.VERSION="3.3.7",c.RESET="affix affix-top affix-bottom",c.DEFAULTS={offset:0,target:window},c.prototype.getState=function(a,b,c,d){var e=this.$target.scrollTop(),f=this.$element.offset(),g=this.$target.height();if(null!=c&&"top"==this.affixed)return e<c&&"top";if("bottom"==this.affixed)return null!=c?!(e+this.unpin<=f.top)&&"bottom":!(e+g<=a-d)&&"bottom";var h=null==this.affixed,i=h?e:f.top,j=h?g:b;return null!=c&&e<=c?"top":null!=d&&i+j>=a-d&&"bottom"},c.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(c.RESET).addClass("affix");var a=this.$target.scrollTop(),b=this.$element.offset();return this.pinnedOffset=b.top-a},c.prototype.checkPositionWithEventLoop=function(){setTimeout(a.proxy(this.checkPosition,this),1)},c.prototype.checkPosition=function(){if(this.$element.is(":visible")){var b=this.$element.height(),d=this.options.offset,e=d.top,f=d.bottom,g=Math.max(a(document).height(),a(document.body).height());"object"!=typeof d&&(f=e=d),"function"==typeof e&&(e=d.top(this.$element)),"function"==typeof f&&(f=d.bottom(this.$element));var h=this.getState(g,b,e,f);if(this.affixed!=h){null!=this.unpin&&this.$element.css("top","");var i="affix"+(h?"-"+h:""),j=a.Event(i+".bs.affix");if(this.$element.trigger(j),j.isDefaultPrevented())return;this.affixed=h,this.unpin="bottom"==h?this.getPinnedOffset():null,this.$element.removeClass(c.RESET).addClass(i).trigger(i.replace("affix","affixed")+".bs.affix")}"bottom"==h&&this.$element.offset({top:g-b-f})}};var d=a.fn.affix;a.fn.affix=b,a.fn.affix.Constructor=c,a.fn.affix.noConflict=function(){return a.fn.affix=d,this},a(window).on("load",function(){a('[data-spy="affix"]').each(function(){var c=a(this),d=c.data();d.offset=d.offset||{},null!=d.offsetBottom&&(d.offset.bottom=d.offsetBottom),null!=d.offsetTop&&(d.offset.top=d.offsetTop),b.call(c,d)})})}(jQuery);

/** @preserve jQuery.floatThead 2.0.3 - http://mkoryak.github.io/floatThead/ - Copyright (c) 2012 - 2017 Misha Koryak **/
!function(t){function e(t,e){if(8==f){var o=v.width(),n=s.debounce(function(){var t=v.width();o!=t&&(o=t,e())},1);v.on(t,n)}else v.on(t,s.debounce(e,1))}function o(e){var o=e[0],n=o.parentElement;do{var r=window.getComputedStyle(n).getPropertyValue("overflow");if("visible"!=r)break}while(n=n.parentElement);return t(n==document.body?[]:n)}function n(t){window&&window.console&&window.console.error&&window.console.error("jQuery.floatThead: "+t)}function r(t){var e=t.getBoundingClientRect();return e.width||e.right-e.left}function a(){var t=document.createElement("scrolltester");t.style.cssText="width:100px;height:100px;overflow:scroll!important;position:absolute;top:-9999px;display:block",document.body.appendChild(t);var e=t.offsetWidth-t.clientWidth;return document.body.removeChild(t),e}function i(t){if(t.dataTableSettings)for(var e=0;e<t.dataTableSettings.length;e++){var o=t.dataTableSettings[e].nTable;if(t[0]==o)return!0}return!1}function l(t,e,o){var n=o?"outerWidth":"width";if(p&&t.css("max-width")){var r=0;o&&(r+=parseInt(t.css("borderLeft"),10),r+=parseInt(t.css("borderRight"),10));for(var a=0;a<e.length;a++)r+=e.get(a).offsetWidth;return r}return t[n]()}t.floatThead=t.floatThead||{},t.floatThead.defaults={headerCellSelector:"tr:visible:first>*:visible",zIndex:1001,position:"auto",top:0,bottom:0,scrollContainer:function(){return t([])},responsiveContainer:function(){return t([])},getSizingRow:function(t){return t.find("tbody tr:visible:first>*:visible")},floatTableClass:"floatThead-table",floatWrapperClass:"floatThead-wrapper",floatContainerClass:"floatThead-container",copyTableClass:!0,autoReflow:!1,debug:!1,support:{bootstrap:!0,datatables:!0,jqueryUI:!0,perfectScrollbar:!0}};var s=window._||function(){var e={},o=Object.prototype.hasOwnProperty,n=["Arguments","Function","String","Number","Date","RegExp"];e.has=function(t,e){return o.call(t,e)},e.keys=Object.keys||function(t){if(t!==Object(t))throw new TypeError("Invalid object");var o=[];for(var n in t)e.has(t,n)&&o.push(n);return o};var r=0;return e.uniqueId=function(t){var e=++r+"";return t?t+e:e},t.each(n,function(){var t=this;e["is"+t]=function(e){return Object.prototype.toString.call(e)=="[object "+t+"]"}}),e.debounce=function(t,e,o){var n,r,a,i,l;return function(){a=this,r=arguments,i=new Date;var s=function(){var d=new Date-i;e>d?n=setTimeout(s,e-d):(n=null,o||(l=t.apply(a,r)))},d=o&&!n;return n||(n=setTimeout(s,e)),d&&(l=t.apply(a,r)),l}},e}(),d="undefined"!=typeof MutationObserver,f=function(){for(var t=3,e=document.createElement("b"),o=e.all||[];t=1+t,e.innerHTML="<!--[if gt IE "+t+"]><i><![endif]-->",o[0];);return t>4?t:document.documentMode}(),c=/Gecko\//.test(navigator.userAgent),u=/WebKit\//.test(navigator.userAgent);f||c||u||(f=11);var p=function(){if(u){var e=t("<div>").css("width",0).append(t("<table>").css("max-width","100%").append(t("<tr>").append(t("<th>").append(t("<div>").css("min-width",100).text("X")))));t("body").append(e);var o=0==e.find("table").width();return e.remove(),o}return!1},h=!c&&!f,v=t(window);if(!window.matchMedia){var b=window.onbeforeprint,w=window.onafterprint;window.onbeforeprint=function(){b&&b(),v.triggerHandler("beforeprint")},window.onafterprint=function(){w&&w(),v.triggerHandler("afterprint")}}t.fn.floatThead=function(c){if(c=c||{},8>f)return this;var b=null;if(s.isFunction(p)&&(p=p()),s.isString(c)){var w=c,g=Array.prototype.slice.call(arguments,1),m=this;return this.filter("table").each(function(){var e=t(this),o=e.data("floatThead-lazy");o&&e.floatThead(o);var n=e.data("floatThead-attached");if(n&&s.isFunction(n[w])){var r=n[w].apply(this,g);void 0!==r&&(m=r)}}),m}var y=t.extend({},t.floatThead.defaults||{},c);if(t.each(c,function(e){e in t.floatThead.defaults||!y.debug||n("Used ["+e+"] key to init plugin, but that param is not an option for the plugin. Valid options are: "+s.keys(t.floatThead.defaults).join(", "))}),y.debug){var T=t.fn.jquery.split(".");1==parseInt(T[0],10)&&parseInt(T[1],10)<=7&&n("jQuery version "+t.fn.jquery+" detected! This plugin supports 1.8 or better, or 1.7.x with jQuery UI 1.8.24 -> http://jqueryui.com/resources/download/jquery-ui-1.8.24.zip")}return this.filter(":not(."+y.floatTableClass+")").each(function(){function c(t){return t+".fth-"+R+".floatTHead"}function p(){var e=0;if(k.children("tr:visible").each(function(){e+=t(this).outerHeight(!0)}),"collapse"==M.css("border-collapse")){var o=parseInt(M.css("border-top-width"),10),n=parseInt(M.find("thead tr:first").find(">*:first").css("border-top-width"),10);o>n&&(e-=o/2)}st.outerHeight(e),dt.outerHeight(e)}function w(){var t=l(M,ut,!0),e=V?P:U,o=e.width()||t,n="hidden"!=e.css("overflow-y")?o-N.vertical:o;if(at.width(n),G){var r=100*t/n;tt.css("width",r+"%")}else tt.outerWidth(t)}function g(){D=(s.isFunction(y.top)?y.top(M):y.top)||0,O=(s.isFunction(y.bottom)?y.bottom(M):y.bottom)||0}function m(){var e,o=k.find(y.headerCellSelector);if(nt?e=ot.find("col").length:(e=0,o.each(function(){e+=parseInt(t(this).attr("colspan")||1,10)})),e!=Q){Q=e;for(var n,r=[],a=[],i=[],l=0;e>l;l++)n=o.eq(l).text(),r.push('<th class="floatThead-col" aria-label="'+n+'"/>'),a.push("<col/>"),i.push(t("<fthtd>").css({display:"table-cell",height:0,width:"auto"}));a=a.join(""),r=r.join(""),h&&(rt.empty(),rt.append(i),ut=rt.find("fthtd")),st.html(r),dt=st.find("th"),nt||ot.html(a),ft=ot.find("col"),et.html(a),ct=et.find("col")}return e}function T(){if(!F){if(F=!0,X){var t=l(M,ut,!0),e=J.width();t>e&&M.css("minWidth",t)}M.css(vt),tt.css(vt),tt.append(k),E.before(lt),p()}}function C(){F&&(F=!1,X&&M.width(wt),lt.detach(),M.prepend(k),M.css(bt),tt.css(bt),M.css("minWidth",gt),M.css("minWidth",l(M,ut)))}function x(t){mt!=t&&(mt=t,M.triggerHandler("floatThead",[t,at]))}function j(t){X!=t&&(X=t,at.css({position:X?"absolute":"fixed"}))}function S(t,e,o,n){return h?o:n?y.getSizingRow(t,e,o):e}function z(){var t,e=m();return function(){var o=at.scrollLeft();ft=ot.find("col");var n=S(M,ft,ut,f);if(n.length==e&&e>0){if(!nt)for(t=0;e>t;t++)ft.eq(t).css("width","");C();var a=[];for(t=0;e>t;t++)a[t]=r(n.get(t));for(t=0;e>t;t++)ct.eq(t).width(a[t]),ft.eq(t).width(a[t]);T()}else tt.append(k),M.css(bt),tt.css(bt),p();at.scrollLeft(o),M.triggerHandler("reflowed",[at])}}function I(t){var e=U.css("border-"+t+"-width"),o=0;return e&&~e.indexOf("px")&&(o=parseInt(e,10)),o}function L(){return"auto"==P.css("overflow-x")}function W(){var t,e=U.scrollTop(),o=0,n=B?Y.outerHeight(!0):0,r=K?n:-n,a=at.height(),i=M.offset(),l=0,s=0;if(G){var d=U.offset();o=i.top-d.top+e,B&&K&&(o+=n),l=I("left"),s=I("top"),o-=s}else t=i.top-D-a+O+N.horizontal;var f=v.scrollTop(),c=v.scrollLeft(),p=function(){return(L()?P:U).scrollLeft()||0},h=p();return function(d){V=L();var b=M[0].offsetWidth<=0&&M[0].offsetHeight<=0;if(!b&&it)return it=!1,setTimeout(function(){M.triggerHandler("reflow")},1),null;if(b&&(it=!0,!X))return null;if("windowScroll"==d)f=v.scrollTop(),c=v.scrollLeft();else if("containerScroll"==d)if(P.length){if(!V)return;h=P.scrollLeft()}else e=U.scrollTop(),h=U.scrollLeft();else"init"!=d&&(f=v.scrollTop(),c=v.scrollLeft(),e=U.scrollTop(),h=p());if(!u||!(0>f||0>c)){if(Z)j("windowScrollDone"==d?!0:!1);else if("windowScrollDone"==d)return null;i=M.offset(),B&&K&&(i.top+=n);var w,g,m=M.outerHeight();if(G&&X){if(o>=e){var y=o-e+s;w=y>0?y:0,x(!1)}else w=_?s:e,x(!0);g=l}else!G&&X?(f>t+m+r?w=m-a+r:i.top>=f+D?(w=0,C(),x(!1)):(w=D+f-i.top+o+(K?n:0),T(),x(!0)),g=h):G&&!X?(o>e||e-o>m?(w=i.top-f,C(),x(!1)):(w=i.top+e-f-o,T(),x(!0)),g=i.left+h-c):G||X||(f>t+m+r?w=m+D-f+t+r:i.top>f+D?(w=i.top-f,T(),x(!1)):(w=D,x(!0)),g=i.left+h-c);return{top:Math.round(w),left:Math.round(g)}}}}function H(){var t=null,e=null,o=null;return function(n,r,a){if(null!=n&&(t!=n.top||e!=n.left)){if(8===f)at.css({top:n.top,left:n.left});else{var i="translateX("+n.left+"px) translateY("+n.top+"px)";at.css({"-webkit-transform":i,"-moz-transform":i,"-ms-transform":i,"-o-transform":i,transform:i,top:0,left:0})}t=n.top,e=n.left}r&&w(),a&&p();var l=(V?P:U).scrollLeft();X&&o==l||(at.scrollLeft(l),o=l)}}function q(){if(U.length)if(y.support&&y.support.perfectScrollbar&&U.data().perfectScrollbar)N={horizontal:0,vertical:0};else{if("scroll"==U.css("overflow-x"))N.horizontal=A;else{var t=U.width(),e=l(M,ut),o=r>n?A:0;N.horizontal=e>t-o?A:0}if("scroll"==U.css("overflow-y"))N.vertical=A;else{var n=U.height(),r=M.height(),a=e>t?A:0;N.vertical=r>n-a?A:0}}}var R=s.uniqueId(),M=t(this);if(M.data("floatThead-attached"))return!0;if(!M.is("table"))throw new Error('jQuery.floatThead must be run on a table element. ex: $("table").floatThead();');d=y.autoReflow&&d;var k=M.children("thead:first"),E=M.children("tbody:first");if(0==k.length||0==E.length)return y.debug&&n(0==k.length?"The thead element is missing.":"The tbody element is missing."),M.data("floatThead-lazy",y),void M.unbind("reflow").one("reflow",function(){M.floatThead(y)});M.data("floatThead-lazy")&&M.unbind("reflow"),M.data("floatThead-lazy",!1);var D,O,F=!0,N={vertical:0,horizontal:0},A=a(),Q=0;y.scrollContainer===!0&&(y.scrollContainer=o);var U=y.scrollContainer(M)||t([]),G=U.length>0,P=G?t([]):y.responsiveContainer(M)||t([]),V=L(),X=null;"auto"==y.position?X=null:"fixed"==y.position?X=!1:"absolute"==y.position?X=!0:y.debug&&n('Invalid value given to "position" option, valid is "fixed", "absolute" and "auto". You passed: ',y.position),null==X&&(X=G);var Y=M.find("caption"),B=1==Y.length;if(B)var K="top"===(Y.css("caption-side")||Y.attr("align")||"top");var $=t("<fthfoot>").css({display:"table-footer-group","border-spacing":0,height:0,"border-collapse":"collapse",visibility:"hidden"}),_=!1,J=t([]),Z=9>=f&&!G&&X,tt=t("<table/>"),et=t("<colgroup/>"),ot=M.children("colgroup:first"),nt=!0;0==ot.length&&(ot=t("<colgroup/>"),nt=!1);var rt=t("<fthtr>").css({display:"table-row","border-spacing":0,height:0,"border-collapse":"collapse"}),at=t("<div>").css("overflow","hidden").attr("aria-hidden","true"),it=!1,lt=t("<thead/>"),st=t('<tr class="size-row" aria-hidden="true"/>'),dt=t([]),ft=t([]),ct=t([]),ut=t([]);lt.append(st),M.prepend(ot),h&&($.append(rt),M.append($)),tt.append(et),at.append(tt),y.copyTableClass&&tt.attr("class",M.attr("class")),tt.attr({cellpadding:M.attr("cellpadding"),cellspacing:M.attr("cellspacing"),border:M.attr("border")});var pt=M.css("display");if(tt.css({borderCollapse:M.css("borderCollapse"),border:M.css("border"),display:pt}),G||tt.css("width","auto"),"none"==pt&&(it=!0),tt.addClass(y.floatTableClass).css({margin:0,"border-bottom-width":0}),X){var ht=function(e,o){var n=e.css("position"),r="relative"==n||"absolute"==n,a=e;if(!r||o){var i={paddingLeft:e.css("paddingLeft"),paddingRight:e.css("paddingRight")};at.css(i),a=e.data("floatThead-containerWrap")||e.wrap(t("<div>").addClass(y.floatWrapperClass).css({position:"relative",clear:"both"})).parent(),e.data("floatThead-containerWrap",a),_=!0}return a};G?(J=ht(U,!0),J.prepend(at)):(J=ht(M),M.before(at))}else M.before(at);at.css({position:X?"absolute":"fixed",marginTop:0,top:X?0:"auto",zIndex:y.zIndex,willChange:"transform"}),at.addClass(y.floatContainerClass),g();var vt={"table-layout":"fixed"},bt={"table-layout":M.css("tableLayout")||"auto"},wt=M[0].style.width||"",gt=M.css("minWidth")||"",mt=!1;q();var yt,Tt=function(){(yt=z())()};Tt();var Ct=W(),xt=H();xt(Ct("init"),!0);var jt,St=s.debounce(function(){xt(Ct("windowScrollDone"),!1)},1),zt=function(){xt(Ct("windowScroll"),!1),Z&&St()},It=function(){xt(Ct("containerScroll"),!1)},Lt=function(){M.is(":hidden")||(g(),q(),Tt(),Ct=W(),(xt=H())(Ct("resize"),!0,!0))},Wt=s.debounce(function(){M.is(":hidden")||(q(),g(),Tt(),Ct=W(),xt(Ct("reflow"),!0))},1),Ht=function(){C()},qt=function(){T()},Rt=function(t){t.matches?Ht():qt()};if(window.matchMedia&&window.matchMedia("print").addListener?(jt=window.matchMedia("print"),jt.addListener(Rt)):(v.on("beforeprint",Ht),v.on("afterprint",qt)),G?X?U.on(c("scroll"),It):(U.on(c("scroll"),It),v.on(c("scroll"),zt)):(P.on(c("scroll"),It),v.on(c("scroll"),zt)),v.on(c("load"),Wt),e(c("resize"),Lt),M.on("reflow",Wt),y.support&&y.support.datatables&&i(M)&&M.on("filter",Wt).on("sort",Wt).on("page",Wt),y.support&&y.support.bootstrap&&v.on(c("shown.bs.tab"),Wt),y.support&&y.support.jqueryUI&&v.on(c("tabsactivate"),Wt),d){var Mt=null;s.isFunction(y.autoReflow)&&(Mt=y.autoReflow(M,U)),Mt||(Mt=U.length?U[0]:M[0]),b=new MutationObserver(function(t){for(var e=function(t){return t&&t[0]&&("THEAD"==t[0].nodeName||"TD"==t[0].nodeName||"TH"==t[0].nodeName)},o=0;o<t.length;o++)if(!e(t[o].addedNodes)&&!e(t[o].removedNodes)){Wt();break}}),b.observe(Mt,{childList:!0,subtree:!0})}M.data("floatThead-attached",{destroy:function(){var t=".fth-"+R;return C(),M.css(bt),ot.remove(),h&&$.remove(),lt.parent().length&&lt.replaceWith(k),x(!1),d&&(b.disconnect(),b=null),M.off("reflow reflowed"),U.off(t),P.off(t),_&&(U.length?U.unwrap():M.unwrap()),G?U.data("floatThead-containerWrap",!1):M.data("floatThead-containerWrap",!1),M.css("minWidth",gt),at.remove(),M.data("floatThead-attached",!1),v.off(t),jt&&jt.removeListener(Rt),Ht=qt=function(){},function(){return M.floatThead(y)}},reflow:function(){Wt()},setHeaderHeight:function(){p()},getFloatContainer:function(){return at},getRowGroups:function(){return F?at.find(">table>thead").add(M.children("tbody,tfoot")):M.children("thead,tbody,tfoot")}})}),this}}(function(){var t=window.jQuery;return"undefined"!=typeof module&&module.exports&&!t&&(t=require("jquery")),t}());

!function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define(b):a.proj4=b()}(this,function(){"use strict";function a(a,b){if(a[b])return a[b];for(var c,d,e=Object.keys(a),f=b.toLowerCase().replace(Ob,""),g=-1;++g<e.length;)if(c=e[g],d=c.toLowerCase().replace(Ob,""),d===f)return a[c]}function b(a){if("string"!=typeof a)throw new Error("not a string");this.text=a.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=Qb}function c(a){var c=new b(a);return c.output()}function d(a,b,c){Array.isArray(b)&&(c.unshift(b),b=null);var d=b?{}:a,f=c.reduce(function(a,b){return e(b,a),a},d);b&&(a[b]=f)}function e(a,b){if(!Array.isArray(a))return void(b[a]=!0);var c=a.shift();if("PARAMETER"===c&&(c=a.shift()),1===a.length)return Array.isArray(a[0])?(b[c]={},void e(a[0],b[c])):void(b[c]=a[0]);if(!a.length)return void(b[c]=!0);if("TOWGS84"===c)return void(b[c]=a);Array.isArray(c)||(b[c]={});var f;switch(c){case"UNIT":case"PRIMEM":case"VERT_DATUM":return b[c]={name:a[0].toLowerCase(),convert:a[1]},void(3===a.length&&e(a[2],b[c]));case"SPHEROID":case"ELLIPSOID":return b[c]={name:a[0],a:a[1],rf:a[2]},void(4===a.length&&e(a[3],b[c]));case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":return a[0]=["name",a[0]],void d(b,c,a);default:for(f=-1;++f<a.length;)if(!Array.isArray(a[f]))return e(a,b[c]);return d(b,c,a)}}function f(a,b){var c=b[0],d=b[1];!(c in a)&&d in a&&(a[c]=a[d],3===b.length&&(a[c]=b[2](a[c])))}function g(a){return a*_b}function h(a){function b(b){var c=a.to_meter||1;return b*c}"GEOGCS"===a.type?a.projName="longlat":"LOCAL_CS"===a.type?(a.projName="identity",a.local=!0):"object"==typeof a.PROJECTION?a.projName=Object.keys(a.PROJECTION)[0]:a.projName=a.PROJECTION,a.UNIT&&(a.units=a.UNIT.name.toLowerCase(),"metre"===a.units&&(a.units="meter"),a.UNIT.convert&&("GEOGCS"===a.type?a.DATUM&&a.DATUM.SPHEROID&&(a.to_meter=a.UNIT.convert*a.DATUM.SPHEROID.a):(a.to_meter=a.UNIT.convert,10)));var c=a.GEOGCS;"GEOGCS"===a.type&&(c=a),c&&(c.DATUM?a.datumCode=c.DATUM.name.toLowerCase():a.datumCode=c.name.toLowerCase(),"d_"===a.datumCode.slice(0,2)&&(a.datumCode=a.datumCode.slice(2)),"new_zealand_geodetic_datum_1949"!==a.datumCode&&"new_zealand_1949"!==a.datumCode||(a.datumCode="nzgd49"),"wgs_1984"===a.datumCode&&("Mercator_Auxiliary_Sphere"===a.PROJECTION&&(a.sphere=!0),a.datumCode="wgs84"),"_ferro"===a.datumCode.slice(-6)&&(a.datumCode=a.datumCode.slice(0,-6)),"_jakarta"===a.datumCode.slice(-8)&&(a.datumCode=a.datumCode.slice(0,-8)),~a.datumCode.indexOf("belge")&&(a.datumCode="rnb72"),c.DATUM&&c.DATUM.SPHEROID&&(a.ellps=c.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===a.ellps.toLowerCase().slice(0,13)&&(a.ellps="intl"),a.a=c.DATUM.SPHEROID.a,a.rf=parseFloat(c.DATUM.SPHEROID.rf,10)),~a.datumCode.indexOf("osgb_1936")&&(a.datumCode="osgb36")),a.b&&!isFinite(a.b)&&(a.b=a.a);var d=function(b){return f(a,b)},e=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_2","Standard_Parallel_2"],["false_easting","False_Easting"],["false_northing","False_Northing"],["central_meridian","Central_Meridian"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",g],["longitude_of_center","Longitude_Of_Center"],["longc","longitude_of_center",g],["x0","false_easting",b],["y0","false_northing",b],["long0","central_meridian",g],["lat0","latitude_of_origin",g],["lat0","standard_parallel_1",g],["lat1","standard_parallel_1",g],["lat2","standard_parallel_2",g],["alpha","azimuth",g],["srsCode","name"]];e.forEach(d),a.long0||!a.longc||"Albers_Conic_Equal_Area"!==a.projName&&"Lambert_Azimuthal_Equal_Area"!==a.projName||(a.long0=a.longc),a.lat_ts||!a.lat1||"Stereographic_South_Pole"!==a.projName&&"Polar Stereographic (variant B)"!==a.projName||(a.lat0=g(a.lat1>0?90:-90),a.lat_ts=a.lat1)}function i(a){var b=this;if(2===arguments.length){var c=arguments[1];"string"==typeof c?"+"===c.charAt(0)?i[a]=Pb(arguments[1]):i[a]=ac(arguments[1]):i[a]=c}else if(1===arguments.length){if(Array.isArray(a))return a.map(function(a){Array.isArray(a)?i.apply(b,a):i(a)});if("string"==typeof a){if(a in i)return i[a]}else"EPSG"in a?i["EPSG:"+a.EPSG]=a:"ESRI"in a?i["ESRI:"+a.ESRI]=a:"IAU2000"in a?i["IAU2000:"+a.IAU2000]=a:console.log(a);return}}function j(a){return"string"==typeof a}function k(a){return a in i}function l(a){return bc.some(function(b){return a.indexOf(b)>-1})}function m(a){return"+"===a[0]}function n(a){return j(a)?k(a)?i[a]:l(a)?ac(a):m(a)?Pb(a):void 0:a}function o(){var a=this.b/this.a;this.es=1-a*a,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=dc(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function p(a){var b=a.x,c=a.y;if(c*Ib>90&&c*Ib<-90&&b*Ib>180&&b*Ib<-180)return null;var d,e;if(Math.abs(Math.abs(c)-Cb)<=Gb)return null;if(this.sphere)d=this.x0+this.a*this.k0*fc(b-this.long0),e=this.y0+this.a*this.k0*Math.log(Math.tan(Jb+.5*c));else{var f=Math.sin(c),g=gc(this.e,c,f);d=this.x0+this.a*this.k0*fc(b-this.long0),e=this.y0-this.a*this.k0*Math.log(g)}return a.x=d,a.y=e,a}function q(a){var b,c,d=a.x-this.x0,e=a.y-this.y0;if(this.sphere)c=Cb-2*Math.atan(Math.exp(-e/(this.a*this.k0)));else{var f=Math.exp(-e/(this.a*this.k0));if(c=hc(this.e,f),c===-9999)return null}return b=fc(this.long0+d/(this.a*this.k0)),a.x=b,a.y=c,a}function r(){}function s(a){return a}function t(a,b){var c=oc.length;return a.names?(oc[c]=a,a.names.forEach(function(a){nc[a.toLowerCase()]=c}),this):(console.log(b),!0)}function u(a){if(!a)return!1;var b=a.toLowerCase();return"undefined"!=typeof nc[b]&&oc[nc[b]]?oc[nc[b]]:void 0}function v(){mc.forEach(t)}function w(a,b,c,d){var e=a*a,f=b*b,g=(e-f)/e,h=0;d?(a*=1-g*(Db+g*(Eb+g*Fb)),e=a*a,g=0):h=Math.sqrt(g);var i=(e-f)/f;return{es:g,e:h,ep2:i}}function x(b,c,d,e,f){if(!b){var g=a(qc,e);g||(g=rc),b=g.a,c=g.b,d=g.rf}return d&&!c&&(c=(1-1/d)*b),(0===d||Math.abs(b-c)<Gb)&&(f=!0,c=b),{a:b,b:c,rf:d,sphere:f}}function y(a,b,c,d,e,f){var g={};return void 0===a||"none"===a?g.datum_type=Ab:g.datum_type=zb,b&&(g.datum_params=b.map(parseFloat),0===g.datum_params[0]&&0===g.datum_params[1]&&0===g.datum_params[2]||(g.datum_type=xb),g.datum_params.length>3&&(0===g.datum_params[3]&&0===g.datum_params[4]&&0===g.datum_params[5]&&0===g.datum_params[6]||(g.datum_type=yb,g.datum_params[3]*=Bb,g.datum_params[4]*=Bb,g.datum_params[5]*=Bb,g.datum_params[6]=g.datum_params[6]/1e6+1))),g.a=c,g.b=d,g.es=e,g.ep2=f,g}function z(b,c){if(!(this instanceof z))return new z(b);c=c||function(a){if(a)throw a};var d=n(b);if("object"!=typeof d)return void c(b);var e=z.projections.get(d.projName);if(!e)return void c(b);if(d.datumCode&&"none"!==d.datumCode){var f=a(sc,d.datumCode);f&&(d.datum_params=f.towgs84?f.towgs84.split(","):null,d.ellps=f.ellipse,d.datumName=f.datumName?f.datumName:d.datumCode)}d.k0=d.k0||1,d.axis=d.axis||"enu",d.ellps=d.ellps||"wgs84";var g=x(d.a,d.b,d.rf,d.ellps,d.sphere),h=w(g.a,g.b,g.rf,d.R_A),i=d.datum||y(d.datumCode,d.datum_params,g.a,g.b,h.es,h.ep2);cc(this,d),cc(this,e),this.a=g.a,this.b=g.b,this.rf=g.rf,this.sphere=g.sphere,this.es=h.es,this.e=h.e,this.ep2=h.ep2,this.datum=i,this.init(),c(null,this)}function A(a,b){return a.datum_type===b.datum_type&&(!(a.a!==b.a||Math.abs(a.es-b.es)>5e-11)&&(a.datum_type===xb?a.datum_params[0]===b.datum_params[0]&&a.datum_params[1]===b.datum_params[1]&&a.datum_params[2]===b.datum_params[2]:a.datum_type!==yb||a.datum_params[0]===b.datum_params[0]&&a.datum_params[1]===b.datum_params[1]&&a.datum_params[2]===b.datum_params[2]&&a.datum_params[3]===b.datum_params[3]&&a.datum_params[4]===b.datum_params[4]&&a.datum_params[5]===b.datum_params[5]&&a.datum_params[6]===b.datum_params[6]))}function B(a,b,c){var d,e,f,g,h=a.x,i=a.y,j=a.z?a.z:0;if(i<-Cb&&i>-1.001*Cb)i=-Cb;else if(i>Cb&&i<1.001*Cb)i=Cb;else if(i<-Cb||i>Cb)return null;return h>Math.PI&&(h-=2*Math.PI),e=Math.sin(i),g=Math.cos(i),f=e*e,d=c/Math.sqrt(1-b*f),{x:(d+j)*g*Math.cos(h),y:(d+j)*g*Math.sin(h),z:(d*(1-b)+j)*e}}function C(a,b,c,d){var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u=1e-12,v=u*u,w=30,x=a.x,y=a.y,z=a.z?a.z:0;if(e=Math.sqrt(x*x+y*y),f=Math.sqrt(x*x+y*y+z*z),e/c<u){if(r=0,f/c<u)return s=Cb,t=-d,{x:a.x,y:a.y,z:a.z}}else r=Math.atan2(y,x);g=z/f,h=e/f,i=1/Math.sqrt(1-b*(2-b)*h*h),l=h*(1-b)*i,m=g*i,q=0;do q++,k=c/Math.sqrt(1-b*m*m),t=e*l+z*m-k*(1-b*m*m),j=b*k/(k+t),i=1/Math.sqrt(1-j*(2-j)*h*h),n=h*(1-j)*i,o=g*i,p=o*l-n*m,l=n,m=o;while(p*p>v&&q<w);return s=Math.atan(o/Math.abs(n)),{x:r,y:s,z:t}}function D(a,b,c){if(b===xb)return{x:a.x+c[0],y:a.y+c[1],z:a.z+c[2]};if(b===yb){var d=c[0],e=c[1],f=c[2],g=c[3],h=c[4],i=c[5],j=c[6];return{x:j*(a.x-i*a.y+h*a.z)+d,y:j*(i*a.x+a.y-g*a.z)+e,z:j*(-h*a.x+g*a.y+a.z)+f}}}function E(a,b,c){if(b===xb)return{x:a.x-c[0],y:a.y-c[1],z:a.z-c[2]};if(b===yb){var d=c[0],e=c[1],f=c[2],g=c[3],h=c[4],i=c[5],j=c[6],k=(a.x-d)/j,l=(a.y-e)/j,m=(a.z-f)/j;return{x:k+i*l-h*m,y:-i*k+l+g*m,z:h*k-g*l+m}}}function F(a){return a===xb||a===yb}function G(a,b){return(a.datum.datum_type===xb||a.datum.datum_type===yb)&&"WGS84"!==b.datumCode||(b.datum.datum_type===xb||b.datum.datum_type===yb)&&"WGS84"!==a.datumCode}function H(a,b,c){var d;return Array.isArray(c)&&(c=vc(c)),a.datum&&b.datum&&G(a,b)&&(d=new z("WGS84"),c=H(a,d,c),a=d),"enu"!==a.axis&&(c=uc(a,!1,c)),"longlat"===a.projName?c={x:c.x*Hb,y:c.y*Hb}:(a.to_meter&&(c={x:c.x*a.to_meter,y:c.y*a.to_meter}),c=a.inverse(c)),a.from_greenwich&&(c.x+=a.from_greenwich),c=tc(a.datum,b.datum,c),b.from_greenwich&&(c={x:c.x-b.from_greenwich,y:c.y}),"longlat"===b.projName?c={x:c.x*Ib,y:c.y*Ib}:(c=b.forward(c),b.to_meter&&(c={x:c.x/b.to_meter,y:c.y/b.to_meter})),"enu"!==b.axis?uc(b,!0,c):c}function I(a,b,c){var d;return Array.isArray(c)?(d=H(a,b,c),3===c.length?[d.x,d.y,d.z]:[d.x,d.y]):H(a,b,c)}function J(a){return a instanceof z?a:a.oProj?a.oProj:z(a)}function K(a,b,c){a=J(a);var d,e=!1;return"undefined"==typeof b?(b=a,a=wc,e=!0):("undefined"!=typeof b.x||Array.isArray(b))&&(c=b,b=a,a=wc,e=!0),b=J(b),c?I(a,b,c):(d={forward:function(c){return I(a,b,c)},inverse:function(c){return I(b,a,c)}},e&&(d.oProj=b),d)}function L(a,b){return b=b||5,T(Q({lat:a[1],lon:a[0]}),b)}function M(a){var b=R(X(a.toUpperCase()));return b.lat&&b.lon?[b.lon,b.lat,b.lon,b.lat]:[b.left,b.bottom,b.right,b.top]}function N(a){var b=R(X(a.toUpperCase()));return b.lat&&b.lon?[b.lon,b.lat]:[(b.left+b.right)/2,(b.top+b.bottom)/2]}function O(a){return a*(Math.PI/180)}function P(a){return 180*(a/Math.PI)}function Q(a){var b,c,d,e,f,g,h,i,j,k=a.lat,l=a.lon,m=6378137,n=.00669438,o=.9996,p=O(k),q=O(l);j=Math.floor((l+180)/6)+1,180===l&&(j=60),k>=56&&k<64&&l>=3&&l<12&&(j=32),k>=72&&k<84&&(l>=0&&l<9?j=31:l>=9&&l<21?j=33:l>=21&&l<33?j=35:l>=33&&l<42&&(j=37)),b=6*(j-1)-180+3,i=O(b),c=n/(1-n),d=m/Math.sqrt(1-n*Math.sin(p)*Math.sin(p)),e=Math.tan(p)*Math.tan(p),f=c*Math.cos(p)*Math.cos(p),g=Math.cos(p)*(q-i),h=m*((1-n/4-3*n*n/64-5*n*n*n/256)*p-(3*n/8+3*n*n/32+45*n*n*n/1024)*Math.sin(2*p)+(15*n*n/256+45*n*n*n/1024)*Math.sin(4*p)-35*n*n*n/3072*Math.sin(6*p));var r=o*d*(g+(1-e+f)*g*g*g/6+(5-18*e+e*e+72*f-58*c)*g*g*g*g*g/120)+5e5,s=o*(h+d*Math.tan(p)*(g*g/2+(5-e+9*f+4*f*f)*g*g*g*g/24+(61-58*e+e*e+600*f-330*c)*g*g*g*g*g*g/720));return k<0&&(s+=1e7),{northing:Math.round(s),easting:Math.round(r),zoneNumber:j,zoneLetter:S(k)}}function R(a){var b=a.northing,c=a.easting,d=a.zoneLetter,e=a.zoneNumber;if(e<0||e>60)return null;var f,g,h,i,j,k,l,m,n,o,p=.9996,q=6378137,r=.00669438,s=(1-Math.sqrt(1-r))/(1+Math.sqrt(1-r)),t=c-5e5,u=b;d<"N"&&(u-=1e7),m=6*(e-1)-180+3,f=r/(1-r),l=u/p,n=l/(q*(1-r/4-3*r*r/64-5*r*r*r/256)),o=n+(3*s/2-27*s*s*s/32)*Math.sin(2*n)+(21*s*s/16-55*s*s*s*s/32)*Math.sin(4*n)+151*s*s*s/96*Math.sin(6*n),g=q/Math.sqrt(1-r*Math.sin(o)*Math.sin(o)),h=Math.tan(o)*Math.tan(o),i=f*Math.cos(o)*Math.cos(o),j=q*(1-r)/Math.pow(1-r*Math.sin(o)*Math.sin(o),1.5),k=t/(g*p);var v=o-g*Math.tan(o)/j*(k*k/2-(5+3*h+10*i-4*i*i-9*f)*k*k*k*k/24+(61+90*h+298*i+45*h*h-252*f-3*i*i)*k*k*k*k*k*k/720);v=P(v);var w=(k-(1+2*h+i)*k*k*k/6+(5-2*i+28*h-3*i*i+8*f+24*h*h)*k*k*k*k*k/120)/Math.cos(o);w=m+P(w);var x;if(a.accuracy){var y=R({northing:a.northing+a.accuracy,easting:a.easting+a.accuracy,zoneLetter:a.zoneLetter,zoneNumber:a.zoneNumber});x={top:y.lat,right:y.lon,bottom:v,left:w}}else x={lat:v,lon:w};return x}function S(a){var b="Z";return 84>=a&&a>=72?b="X":72>a&&a>=64?b="W":64>a&&a>=56?b="V":56>a&&a>=48?b="U":48>a&&a>=40?b="T":40>a&&a>=32?b="S":32>a&&a>=24?b="R":24>a&&a>=16?b="Q":16>a&&a>=8?b="P":8>a&&a>=0?b="N":0>a&&a>=-8?b="M":-8>a&&a>=-16?b="L":-16>a&&a>=-24?b="K":-24>a&&a>=-32?b="J":-32>a&&a>=-40?b="H":-40>a&&a>=-48?b="G":-48>a&&a>=-56?b="F":-56>a&&a>=-64?b="E":-64>a&&a>=-72?b="D":-72>a&&a>=-80&&(b="C"),b}function T(a,b){var c="00000"+a.easting,d="00000"+a.northing;return a.zoneNumber+a.zoneLetter+U(a.easting,a.northing,a.zoneNumber)+c.substr(c.length-5,b)+d.substr(d.length-5,b)}function U(a,b,c){var d=V(c),e=Math.floor(a/1e5),f=Math.floor(b/1e5)%20;return W(e,f,d)}function V(a){var b=a%xc;return 0===b&&(b=xc),b}function W(a,b,c){var d=c-1,e=yc.charCodeAt(d),f=zc.charCodeAt(d),g=e+a-1,h=f+b,i=!1;g>Ec&&(g=g-Ec+Ac-1,i=!0),(g===Bc||e<Bc&&g>Bc||(g>Bc||e<Bc)&&i)&&g++,(g===Cc||e<Cc&&g>Cc||(g>Cc||e<Cc)&&i)&&(g++,g===Bc&&g++),g>Ec&&(g=g-Ec+Ac-1),h>Dc?(h=h-Dc+Ac-1,i=!0):i=!1,(h===Bc||f<Bc&&h>Bc||(h>Bc||f<Bc)&&i)&&h++,(h===Cc||f<Cc&&h>Cc||(h>Cc||f<Cc)&&i)&&(h++,h===Bc&&h++),h>Dc&&(h=h-Dc+Ac-1);var j=String.fromCharCode(g)+String.fromCharCode(h);return j}function X(a){if(a&&0===a.length)throw"MGRSPoint coverting from nothing";for(var b,c=a.length,d=null,e="",f=0;!/[A-Z]/.test(b=a.charAt(f));){if(f>=2)throw"MGRSPoint bad conversion from: "+a;e+=b,f++}var g=parseInt(e,10);if(0===f||f+3>c)throw"MGRSPoint bad conversion from: "+a;var h=a.charAt(f++);if(h<="A"||"B"===h||"Y"===h||h>="Z"||"I"===h||"O"===h)throw"MGRSPoint zone letter "+h+" not handled: "+a;d=a.substring(f,f+=2);for(var i=V(g),j=Y(d.charAt(0),i),k=Z(d.charAt(1),i);k<$(h);)k+=2e6;var l=c-f;if(l%2!==0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+a;var m,n,o,p,q,r=l/2,s=0,t=0;return r>0&&(m=1e5/Math.pow(10,r),n=a.substring(f,f+r),s=parseFloat(n)*m,o=a.substring(f+r),t=parseFloat(o)*m),p=s+j,q=t+k,{easting:p,northing:q,zoneLetter:h,zoneNumber:g,accuracy:m}}function Y(a,b){for(var c=yc.charCodeAt(b-1),d=1e5,e=!1;c!==a.charCodeAt(0);){if(c++,c===Bc&&c++,c===Cc&&c++,c>Ec){if(e)throw"Bad character: "+a;c=Ac,e=!0}d+=1e5}return d}function Z(a,b){if(a>"V")throw"MGRSPoint given invalid Northing "+a;for(var c=zc.charCodeAt(b-1),d=0,e=!1;c!==a.charCodeAt(0);){if(c++,c===Bc&&c++,c===Cc&&c++,c>Dc){if(e)throw"Bad character: "+a;c=Ac,e=!0}d+=1e5}return d}function $(a){var b;switch(a){case"C":b=11e5;break;case"D":b=2e6;break;case"E":b=28e5;break;case"F":b=37e5;break;case"G":b=46e5;break;case"H":b=55e5;break;case"J":b=64e5;break;case"K":b=73e5;break;case"L":b=82e5;break;case"M":b=91e5;break;case"N":b=0;break;case"P":b=8e5;break;case"Q":b=17e5;break;case"R":b=26e5;break;case"S":b=35e5;break;case"T":b=44e5;break;case"U":b=53e5;break;case"V":b=62e5;break;case"W":b=7e6;break;case"X":b=79e5;break;default:b=-1}if(b>=0)return b;throw"Invalid zone letter: "+a}function Point(a,b,c){if(!(this instanceof Point))return new Point(a,b,c);if(Array.isArray(a))this.x=a[0],this.y=a[1],this.z=a[2]||0;else if("object"==typeof a)this.x=a.x,this.y=a.y,this.z=a.z||0;else if("string"==typeof a&&"undefined"==typeof b){var d=a.split(",");this.x=parseFloat(d[0],10),this.y=parseFloat(d[1],10),this.z=parseFloat(d[2],10)||0}else this.x=a,this.y=b,this.z=c||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}function _(){this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.es&&(this.en=Tc(this.es),this.ml0=Uc(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function aa(a){var b,c,d,e=a.x,f=a.y,g=fc(e-this.long0),h=Math.sin(f),i=Math.cos(f);if(this.es){var j=i*g,k=Math.pow(j,2),l=this.ep2*Math.pow(i,2),m=Math.pow(l,2),n=Math.abs(i)>Gb?Math.tan(f):0,o=Math.pow(n,2),p=Math.pow(o,2);b=1-this.es*Math.pow(h,2),j/=Math.sqrt(b);var q=Uc(f,h,i,this.en);c=this.a*(this.k0*j*(1+k/6*(1-o+l+k/20*(5-18*o+p+14*l-58*o*l+k/42*(61+179*p-p*o-479*o)))))+this.x0,d=this.a*(this.k0*(q-this.ml0+h*g*j/2*(1+k/12*(5-o+9*l+4*m+k/30*(61+p-58*o+270*l-330*o*l+k/56*(1385+543*p-p*o-3111*o))))))+this.y0}else{var r=i*Math.sin(g);if(Math.abs(Math.abs(r)-1)<Gb)return 93;if(c=.5*this.a*this.k0*Math.log((1+r)/(1-r))+this.x0,d=i*Math.cos(g)/Math.sqrt(1-Math.pow(r,2)),r=Math.abs(d),r>=1){if(r-1>Gb)return 93;d=0}else d=Math.acos(d);f<0&&(d=-d),d=this.a*this.k0*(d-this.lat0)+this.y0}return a.x=c,a.y=d,a}function ba(a){var b,c,d,e,f=(a.x-this.x0)*(1/this.a),g=(a.y-this.y0)*(1/this.a);if(this.es)if(b=this.ml0+g/this.k0,c=Wc(b,this.es,this.en),Math.abs(c)<Cb){var h=Math.sin(c),i=Math.cos(c),j=Math.abs(i)>Gb?Math.tan(c):0,k=this.ep2*Math.pow(i,2),l=Math.pow(k,2),m=Math.pow(j,2),n=Math.pow(m,2);b=1-this.es*Math.pow(h,2);var o=f*Math.sqrt(b)/this.k0,p=Math.pow(o,2);b*=j,d=c-b*p/(1-this.es)*.5*(1-p/12*(5+3*m-9*k*m+k-4*l-p/30*(61+90*m-252*k*m+45*n+46*k-p/56*(1385+3633*m+4095*n+1574*n*m)))),e=fc(this.long0+o*(1-p/6*(1+2*m+k-p/20*(5+28*m+24*n+8*k*m+6*k-p/42*(61+662*m+1320*n+720*n*m))))/i)}else d=Cb*ec(g),e=0;else{var q=Math.exp(f/this.k0),r=.5*(q-1/q),s=this.lat0+g/this.k0,t=Math.cos(s);b=Math.sqrt((1-Math.pow(t,2))/(1+Math.pow(r,2))),d=Math.asin(b),g<0&&(d=-d),e=0===r&&0===t?0:fc(Math.atan2(r,t)+this.long0)}return a.x=e,a.y=d,a}function ca(){if(void 0===this.es||this.es<=0)throw new Error("incorrect elliptical usage");this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var a=this.es/(1+Math.sqrt(1-this.es)),b=a/(2-a),c=b;this.cgb[0]=b*(2+b*(-2/3+b*(-2+b*(116/45+b*(26/45+b*(-2854/675)))))),this.cbg[0]=b*(-2+b*(2/3+b*(4/3+b*(-82/45+b*(32/45+b*(4642/4725)))))),c*=b,this.cgb[1]=c*(7/3+b*(-1.6+b*(-227/45+b*(2704/315+b*(2323/945))))),this.cbg[1]=c*(5/3+b*(-16/15+b*(-13/9+b*(904/315+b*(-1522/945))))),c*=b,this.cgb[2]=c*(56/15+b*(-136/35+b*(-1262/105+b*(73814/2835)))),this.cbg[2]=c*(-26/15+b*(34/21+b*(1.6+b*(-12686/2835)))),c*=b,this.cgb[3]=c*(4279/630+b*(-332/35+b*(-399572/14175))),this.cbg[3]=c*(1237/630+b*(-2.4+b*(-24832/14175))),c*=b,this.cgb[4]=c*(4174/315+b*(-144838/6237)),this.cbg[4]=c*(-734/315+b*(109598/31185)),c*=b,this.cgb[5]=c*(601676/22275),this.cbg[5]=c*(444337/155925),c=Math.pow(b,2),this.Qn=this.k0/(1+b)*(1+c*(.25+c*(1/64+c/256))),this.utg[0]=b*(-.5+b*(2/3+b*(-37/96+b*(1/360+b*(81/512+b*(-96199/604800)))))),this.gtu[0]=b*(.5+b*(-2/3+b*(5/16+b*(41/180+b*(-127/288+b*(7891/37800)))))),this.utg[1]=c*(-1/48+b*(-1/15+b*(437/1440+b*(-46/105+b*(1118711/3870720))))),this.gtu[1]=c*(13/48+b*(-.6+b*(557/1440+b*(281/630+b*(-1983433/1935360))))),c*=b,this.utg[2]=c*(-17/480+b*(37/840+b*(209/4480+b*(-5569/90720)))),this.gtu[2]=c*(61/240+b*(-103/140+b*(15061/26880+b*(167603/181440)))),c*=b,this.utg[3]=c*(-4397/161280+b*(11/504+b*(830251/7257600))),this.gtu[3]=c*(49561/161280+b*(-179/168+b*(6601661/7257600))),c*=b,this.utg[4]=c*(-4583/161280+b*(108847/3991680)),this.gtu[4]=c*(34729/80640+b*(-3418889/1995840)),c*=b,this.utg[5]=c*-.03233083094085698,this.gtu[5]=.6650675310896665*c;var d=bd(this.cbg,this.lat0);this.Zb=-this.Qn*(d+cd(this.gtu,2*d))}function da(a){var b=fc(a.x-this.long0),c=a.y;c=bd(this.cbg,c);var d=Math.sin(c),e=Math.cos(c),f=Math.sin(b),g=Math.cos(b);c=Math.atan2(d,g*e),b=Math.atan2(f*e,$c(d,e*g)),b=ad(Math.tan(b));var h=ed(this.gtu,2*c,2*b);c+=h[0],b+=h[1];var i,j;return Math.abs(b)<=2.623395162778?(i=this.a*(this.Qn*b)+this.x0,j=this.a*(this.Qn*c+this.Zb)+this.y0):(i=1/0,j=1/0),a.x=i,a.y=j,a}function ea(a){var b=(a.x-this.x0)*(1/this.a),c=(a.y-this.y0)*(1/this.a);c=(c-this.Zb)/this.Qn,b/=this.Qn;var d,e;if(Math.abs(b)<=2.623395162778){var f=ed(this.utg,2*c,2*b);c+=f[0],b+=f[1],b=Math.atan(Zc(b));var g=Math.sin(c),h=Math.cos(c),i=Math.sin(b),j=Math.cos(b);c=Math.atan2(g*j,$c(i,j*h)),b=Math.atan2(i,j*h),d=fc(b+this.long0),e=bd(this.cgb,c)}else d=1/0,e=1/0;return a.x=d,a.y=e,a}function fa(){var a=hd(this.zone,this.long0);if(void 0===a)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(a)-183)*Hb,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,gd.init.apply(this),this.forward=gd.forward,this.inverse=gd.inverse}function ga(){var a=Math.sin(this.lat0),b=Math.cos(this.lat0);b*=b,this.rc=Math.sqrt(1-this.es)/(1-this.es*a*a),this.C=Math.sqrt(1+this.es*b*b/(1-this.es)),this.phic0=Math.asin(a/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+Jb)/(Math.pow(Math.tan(.5*this.lat0+Jb),this.C)*ld(this.e*a,this.ratexp))}function ha(a){var b=a.x,c=a.y;return a.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*c+Jb),this.C)*ld(this.e*Math.sin(c),this.ratexp))-Cb,a.x=this.C*b,a}function ia(a){for(var b=1e-14,c=a.x/this.C,d=a.y,e=Math.pow(Math.tan(.5*d+Jb)/this.K,1/this.C),f=md;f>0&&(d=2*Math.atan(e*ld(this.e*Math.sin(a.y),-.5*this.e))-Cb,!(Math.abs(d-a.y)<b));--f)a.y=d;return f?(a.x=c,a.y=d,a):null}function ja(){od.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function ka(a){var b,c,d,e;return a.x=fc(a.x-this.long0),od.forward.apply(this,[a]),b=Math.sin(a.y),c=Math.cos(a.y),d=Math.cos(a.x),e=this.k0*this.R2/(1+this.sinc0*b+this.cosc0*c*d),a.x=e*c*Math.sin(a.x),a.y=e*(this.cosc0*b-this.sinc0*c*d),a.x=this.a*a.x+this.x0,a.y=this.a*a.y+this.y0,a}function la(a){var b,c,d,e,f;if(a.x=(a.x-this.x0)/this.a,a.y=(a.y-this.y0)/this.a,a.x/=this.k0,a.y/=this.k0,f=Math.sqrt(a.x*a.x+a.y*a.y)){var g=2*Math.atan2(f,this.R2);b=Math.sin(g),c=Math.cos(g),e=Math.asin(c*this.sinc0+a.y*b*this.cosc0/f),d=Math.atan2(a.x*b,f*this.cosc0*c-a.y*this.sinc0*b)}else e=this.phic0,d=0;return a.x=d,a.y=e,od.inverse.apply(this,[a]),a.x=fc(a.x+this.long0),a}function ma(a,b,c){return b*=c,Math.tan(.5*(Cb+a))*Math.pow((1-b)/(1+b),.5*c)}function na(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=Gb&&(this.k0=.5*(1+ec(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=Gb&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=Gb&&(this.k0=.5*this.cons*dc(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/gc(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=dc(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-Cb,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function oa(a){var b,c,d,e,f,g,h=a.x,i=a.y,j=Math.sin(i),k=Math.cos(i),l=fc(h-this.long0);return Math.abs(Math.abs(h-this.long0)-Math.PI)<=Gb&&Math.abs(i+this.lat0)<=Gb?(a.x=NaN,a.y=NaN,a):this.sphere?(b=2*this.k0/(1+this.sinlat0*j+this.coslat0*k*Math.cos(l)),a.x=this.a*b*k*Math.sin(l)+this.x0,a.y=this.a*b*(this.coslat0*j-this.sinlat0*k*Math.cos(l))+this.y0,a):(c=2*Math.atan(this.ssfn_(i,j,this.e))-Cb,e=Math.cos(c),d=Math.sin(c),Math.abs(this.coslat0)<=Gb?(f=gc(this.e,i*this.con,this.con*j),g=2*this.a*this.k0*f/this.cons,a.x=this.x0+g*Math.sin(h-this.long0),a.y=this.y0-this.con*g*Math.cos(h-this.long0),a):(Math.abs(this.sinlat0)<Gb?(b=2*this.a*this.k0/(1+e*Math.cos(l)),a.y=b*d):(b=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*d+this.cosX0*e*Math.cos(l))),a.y=b*(this.cosX0*d-this.sinX0*e*Math.cos(l))+this.y0),a.x=b*e*Math.sin(l)+this.x0,a))}function pa(a){a.x-=this.x0,a.y-=this.y0;var b,c,d,e,f,g=Math.sqrt(a.x*a.x+a.y*a.y);if(this.sphere){var h=2*Math.atan(g/(.5*this.a*this.k0));return b=this.long0,c=this.lat0,g<=Gb?(a.x=b,a.y=c,a):(c=Math.asin(Math.cos(h)*this.sinlat0+a.y*Math.sin(h)*this.coslat0/g),b=fc(Math.abs(this.coslat0)<Gb?this.lat0>0?this.long0+Math.atan2(a.x,-1*a.y):this.long0+Math.atan2(a.x,a.y):this.long0+Math.atan2(a.x*Math.sin(h),g*this.coslat0*Math.cos(h)-a.y*this.sinlat0*Math.sin(h))),a.x=b,a.y=c,a)}if(Math.abs(this.coslat0)<=Gb){if(g<=Gb)return c=this.lat0,b=this.long0,a.x=b,a.y=c,a;a.x*=this.con,a.y*=this.con,d=g*this.cons/(2*this.a*this.k0),c=this.con*hc(this.e,d),b=this.con*fc(this.con*this.long0+Math.atan2(a.x,-1*a.y))}else e=2*Math.atan(g*this.cosX0/(2*this.a*this.k0*this.ms1)),b=this.long0,g<=Gb?f=this.X0:(f=Math.asin(Math.cos(e)*this.sinX0+a.y*Math.sin(e)*this.cosX0/g),b=fc(this.long0+Math.atan2(a.x*Math.sin(e),g*this.cosX0*Math.cos(e)-a.y*this.sinX0*Math.sin(e)))),c=-1*hc(this.e,Math.tan(.5*(Cb+f)));return a.x=b,a.y=c,a}function qa(){var a=this.lat0;this.lambda0=this.long0;var b=Math.sin(a),c=this.a,d=this.rf,e=1/d,f=2*e-Math.pow(e,2),g=this.e=Math.sqrt(f);this.R=this.k0*c*Math.sqrt(1-f)/(1-f*Math.pow(b,2)),this.alpha=Math.sqrt(1+f/(1-f)*Math.pow(Math.cos(a),4)),this.b0=Math.asin(b/this.alpha);var h=Math.log(Math.tan(Math.PI/4+this.b0/2)),i=Math.log(Math.tan(Math.PI/4+a/2)),j=Math.log((1+g*b)/(1-g*b));this.K=h-this.alpha*i+this.alpha*g/2*j}function ra(a){var b=Math.log(Math.tan(Math.PI/4-a.y/2)),c=this.e/2*Math.log((1+this.e*Math.sin(a.y))/(1-this.e*Math.sin(a.y))),d=-this.alpha*(b+c)+this.K,e=2*(Math.atan(Math.exp(d))-Math.PI/4),f=this.alpha*(a.x-this.lambda0),g=Math.atan(Math.sin(f)/(Math.sin(this.b0)*Math.tan(e)+Math.cos(this.b0)*Math.cos(f))),h=Math.asin(Math.cos(this.b0)*Math.sin(e)-Math.sin(this.b0)*Math.cos(e)*Math.cos(f));return a.y=this.R/2*Math.log((1+Math.sin(h))/(1-Math.sin(h)))+this.y0,a.x=this.R*g+this.x0,a}function sa(a){for(var b=a.x-this.x0,c=a.y-this.y0,d=b/this.R,e=2*(Math.atan(Math.exp(c/this.R))-Math.PI/4),f=Math.asin(Math.cos(this.b0)*Math.sin(e)+Math.sin(this.b0)*Math.cos(e)*Math.cos(d)),g=Math.atan(Math.sin(d)/(Math.cos(this.b0)*Math.cos(d)-Math.sin(this.b0)*Math.tan(e))),h=this.lambda0+g/this.alpha,i=0,j=f,k=-1e3,l=0;Math.abs(j-k)>1e-7;){if(++l>20)return;i=1/this.alpha*(Math.log(Math.tan(Math.PI/4+f/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(j))/2)),k=j,j=2*Math.atan(Math.exp(i))-Math.PI/2}return a.x=h,a.y=j,a}function ta(){this.no_off=this.no_off||!1,this.no_rot=this.no_rot||!1,isNaN(this.k0)&&(this.k0=1);var a=Math.sin(this.lat0),b=Math.cos(this.lat0),c=this.e*a;this.bl=Math.sqrt(1+this.es/(1-this.es)*Math.pow(b,4)),this.al=this.a*this.bl*this.k0*Math.sqrt(1-this.es)/(1-c*c);var d=gc(this.e,this.lat0,a),e=this.bl/b*Math.sqrt((1-this.es)/(1-c*c));e*e<1&&(e=1);var f,g;if(isNaN(this.longc)){var h=gc(this.e,this.lat1,Math.sin(this.lat1)),i=gc(this.e,this.lat2,Math.sin(this.lat2));this.lat0>=0?this.el=(e+Math.sqrt(e*e-1))*Math.pow(d,this.bl):this.el=(e-Math.sqrt(e*e-1))*Math.pow(d,this.bl);var j=Math.pow(h,this.bl),k=Math.pow(i,this.bl);f=this.el/j,g=.5*(f-1/f);var l=(this.el*this.el-k*j)/(this.el*this.el+k*j),m=(k-j)/(k+j),n=fc(this.long1-this.long2);this.long0=.5*(this.long1+this.long2)-Math.atan(l*Math.tan(.5*this.bl*n)/m)/this.bl,this.long0=fc(this.long0);var o=fc(this.long1-this.long0);this.gamma0=Math.atan(Math.sin(this.bl*o)/g),this.alpha=Math.asin(e*Math.sin(this.gamma0))}else f=this.lat0>=0?e+Math.sqrt(e*e-1):e-Math.sqrt(e*e-1),this.el=f*Math.pow(d,this.bl),g=.5*(f-1/f),this.gamma0=Math.asin(Math.sin(this.alpha)/e),this.long0=this.longc-Math.asin(g*Math.tan(this.gamma0))/this.bl;this.no_off?this.uc=0:this.lat0>=0?this.uc=this.al/this.bl*Math.atan2(Math.sqrt(e*e-1),Math.cos(this.alpha)):this.uc=-1*this.al/this.bl*Math.atan2(Math.sqrt(e*e-1),Math.cos(this.alpha))}function ua(a){var b,c,d,e=a.x,f=a.y,g=fc(e-this.long0);if(Math.abs(Math.abs(f)-Cb)<=Gb)d=f>0?-1:1,c=this.al/this.bl*Math.log(Math.tan(Jb+d*this.gamma0*.5)),b=-1*d*Cb*this.al/this.bl;else{var h=gc(this.e,f,Math.sin(f)),i=this.el/Math.pow(h,this.bl),j=.5*(i-1/i),k=.5*(i+1/i),l=Math.sin(this.bl*g),m=(j*Math.sin(this.gamma0)-l*Math.cos(this.gamma0))/k;c=Math.abs(Math.abs(m)-1)<=Gb?Number.POSITIVE_INFINITY:.5*this.al*Math.log((1-m)/(1+m))/this.bl,b=Math.abs(Math.cos(this.bl*g))<=Gb?this.al*this.bl*g:this.al*Math.atan2(j*Math.cos(this.gamma0)+l*Math.sin(this.gamma0),Math.cos(this.bl*g))/this.bl}return this.no_rot?(a.x=this.x0+b,a.y=this.y0+c):(b-=this.uc,a.x=this.x0+c*Math.cos(this.alpha)+b*Math.sin(this.alpha),a.y=this.y0+b*Math.cos(this.alpha)-c*Math.sin(this.alpha)),a}function va(a){var b,c;this.no_rot?(c=a.y-this.y0,b=a.x-this.x0):(c=(a.x-this.x0)*Math.cos(this.alpha)-(a.y-this.y0)*Math.sin(this.alpha),b=(a.y-this.y0)*Math.cos(this.alpha)+(a.x-this.x0)*Math.sin(this.alpha),b+=this.uc);var d=Math.exp(-1*this.bl*c/this.al),e=.5*(d-1/d),f=.5*(d+1/d),g=Math.sin(this.bl*b/this.al),h=(g*Math.cos(this.gamma0)+e*Math.sin(this.gamma0))/f,i=Math.pow(this.el/Math.sqrt((1+h)/(1-h)),1/this.bl);return Math.abs(h-1)<Gb?(a.x=this.long0,a.y=Cb):Math.abs(h+1)<Gb?(a.x=this.long0,a.y=-1*Cb):(a.y=hc(this.e,i),a.x=fc(this.long0-Math.atan2(e*Math.cos(this.gamma0)-g*Math.sin(this.gamma0),Math.cos(this.bl*b/this.al))/this.bl)),a}function wa(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<Gb)){var a=this.b/this.a;this.e=Math.sqrt(1-a*a);var b=Math.sin(this.lat1),c=Math.cos(this.lat1),d=dc(this.e,b,c),e=gc(this.e,this.lat1,b),f=Math.sin(this.lat2),g=Math.cos(this.lat2),h=dc(this.e,f,g),i=gc(this.e,this.lat2,f),j=gc(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>Gb?this.ns=Math.log(d/h)/Math.log(e/i):this.ns=b,isNaN(this.ns)&&(this.ns=b),this.f0=d/(this.ns*Math.pow(e,this.ns)),this.rh=this.a*this.f0*Math.pow(j,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function xa(a){var b=a.x,c=a.y;Math.abs(2*Math.abs(c)-Math.PI)<=Gb&&(c=ec(c)*(Cb-2*Gb));var d,e,f=Math.abs(Math.abs(c)-Cb);if(f>Gb)d=gc(this.e,c,Math.sin(c)),e=this.a*this.f0*Math.pow(d,this.ns);else{if(f=c*this.ns,f<=0)return null;e=0}var g=this.ns*fc(b-this.long0);return a.x=this.k0*(e*Math.sin(g))+this.x0,a.y=this.k0*(this.rh-e*Math.cos(g))+this.y0,a}function ya(a){var b,c,d,e,f,g=(a.x-this.x0)/this.k0,h=this.rh-(a.y-this.y0)/this.k0;this.ns>0?(b=Math.sqrt(g*g+h*h),c=1):(b=-Math.sqrt(g*g+h*h),c=-1);var i=0;if(0!==b&&(i=Math.atan2(c*g,c*h)),0!==b||this.ns>0){if(c=1/this.ns,d=Math.pow(b/(this.a*this.f0),c),e=hc(this.e,d),e===-9999)return null}else e=-Cb;return f=fc(i/this.ns+this.long0),a.x=f,a.y=e,a}function za(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function Aa(a){var b,c,d,e,f,g,h,i=a.x,j=a.y,k=fc(i-this.long0);return b=Math.pow((1+this.e*Math.sin(j))/(1-this.e*Math.sin(j)),this.alfa*this.e/2),c=2*(Math.atan(this.k*Math.pow(Math.tan(j/2+this.s45),this.alfa)/b)-this.s45),d=-k*this.alfa,
e=Math.asin(Math.cos(this.ad)*Math.sin(c)+Math.sin(this.ad)*Math.cos(c)*Math.cos(d)),f=Math.asin(Math.cos(c)*Math.sin(d)/Math.cos(e)),g=this.n*f,h=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(e/2+this.s45),this.n),a.y=h*Math.cos(g)/1,a.x=h*Math.sin(g)/1,this.czech||(a.y*=-1,a.x*=-1),a}function Ba(a){var b,c,d,e,f,g,h,i,j=a.x;a.x=a.y,a.y=j,this.czech||(a.y*=-1,a.x*=-1),g=Math.sqrt(a.x*a.x+a.y*a.y),f=Math.atan2(a.y,a.x),e=f/Math.sin(this.s0),d=2*(Math.atan(Math.pow(this.ro0/g,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),b=Math.asin(Math.cos(this.ad)*Math.sin(d)-Math.sin(this.ad)*Math.cos(d)*Math.cos(e)),c=Math.asin(Math.cos(d)*Math.sin(e)/Math.cos(b)),a.x=this.long0-c/this.alfa,h=b,i=0;var k=0;do a.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(b/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(h))/(1-this.e*Math.sin(h)),this.e/2))-this.s45),Math.abs(h-a.y)<1e-10&&(i=1),h=a.y,k+=1;while(0===i&&k<15);return k>=15?null:a}function Ca(){this.sphere||(this.e0=Cd(this.es),this.e1=Dd(this.es),this.e2=Ed(this.es),this.e3=Fd(this.es),this.ml0=this.a*Bd(this.e0,this.e1,this.e2,this.e3,this.lat0))}function Da(a){var b,c,d=a.x,e=a.y;if(d=fc(d-this.long0),this.sphere)b=this.a*Math.asin(Math.cos(e)*Math.sin(d)),c=this.a*(Math.atan2(Math.tan(e),Math.cos(d))-this.lat0);else{var f=Math.sin(e),g=Math.cos(e),h=Gd(this.a,this.e,f),i=Math.tan(e)*Math.tan(e),j=d*Math.cos(e),k=j*j,l=this.es*g*g/(1-this.es),m=this.a*Bd(this.e0,this.e1,this.e2,this.e3,e);b=h*j*(1-k*i*(1/6-(8-i+8*l)*k/120)),c=m-this.ml0+h*f/g*k*(.5+(5-i+6*l)*k/24)}return a.x=b+this.x0,a.y=c+this.y0,a}function Ea(a){a.x-=this.x0,a.y-=this.y0;var b,c,d=a.x/this.a,e=a.y/this.a;if(this.sphere){var f=e+this.lat0;b=Math.asin(Math.sin(f)*Math.cos(d)),c=Math.atan2(Math.tan(d),Math.cos(f))}else{var g=this.ml0/this.a+e,h=Id(g,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(h)-Cb)<=Gb)return a.x=this.long0,a.y=Cb,e<0&&(a.y*=-1),a;var i=Gd(this.a,this.e,Math.sin(h)),j=i*i*i/this.a/this.a*(1-this.es),k=Math.pow(Math.tan(h),2),l=d*this.a/i,m=l*l;b=h-i*Math.tan(h)/j*l*l*(.5-(1+3*k)*l*l/24),c=l*(1-m*(k/3+(1+3*k)*k*m/15))/Math.cos(h)}return a.x=fc(c+this.long0),a.y=Hd(b),a}function Fa(){var a=Math.abs(this.lat0);if(Math.abs(a-Cb)<Gb?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(a)<Gb?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0){var b;switch(this.qp=Ld(this.e,1),this.mmf=.5/(1-this.es),this.apa=Ia(this.es),this.mode){case this.N_POLE:this.dd=1;break;case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),b=Math.sin(this.lat0),this.sinb1=Ld(this.e,b)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*b*b)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function Ga(a){var b,c,d,e,f,g,h,i,j,k,l=a.x,m=a.y;if(l=fc(l-this.long0),this.sphere){if(f=Math.sin(m),k=Math.cos(m),d=Math.cos(l),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(c=this.mode===this.EQUIT?1+k*d:1+this.sinph0*f+this.cosph0*k*d,c<=Gb)return null;c=Math.sqrt(2/c),b=c*k*Math.sin(l),c*=this.mode===this.EQUIT?f:this.cosph0*f-this.sinph0*k*d}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(d=-d),Math.abs(m+this.phi0)<Gb)return null;c=Jb-.5*m,c=2*(this.mode===this.S_POLE?Math.cos(c):Math.sin(c)),b=c*Math.sin(l),c*=d}}else{switch(h=0,i=0,j=0,d=Math.cos(l),e=Math.sin(l),f=Math.sin(m),g=Ld(this.e,f),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(h=g/this.qp,i=Math.sqrt(1-h*h)),this.mode){case this.OBLIQ:j=1+this.sinb1*h+this.cosb1*i*d;break;case this.EQUIT:j=1+i*d;break;case this.N_POLE:j=Cb+m,g=this.qp-g;break;case this.S_POLE:j=m-Cb,g=this.qp+g}if(Math.abs(j)<Gb)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:j=Math.sqrt(2/j),c=this.mode===this.OBLIQ?this.ymf*j*(this.cosb1*h-this.sinb1*i*d):(j=Math.sqrt(2/(1+i*d)))*h*this.ymf,b=this.xmf*j*i*e;break;case this.N_POLE:case this.S_POLE:g>=0?(b=(j=Math.sqrt(g))*e,c=d*(this.mode===this.S_POLE?j:-j)):b=c=0}}return a.x=this.a*b+this.x0,a.y=this.a*c+this.y0,a}function Ha(a){a.x-=this.x0,a.y-=this.y0;var b,c,d,e,f,g,h,i=a.x/this.a,j=a.y/this.a;if(this.sphere){var k,l=0,m=0;if(k=Math.sqrt(i*i+j*j),c=.5*k,c>1)return null;switch(c=2*Math.asin(c),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(m=Math.sin(c),l=Math.cos(c)),this.mode){case this.EQUIT:c=Math.abs(k)<=Gb?0:Math.asin(j*m/k),i*=m,j=l*k;break;case this.OBLIQ:c=Math.abs(k)<=Gb?this.phi0:Math.asin(l*this.sinph0+j*m*this.cosph0/k),i*=m*this.cosph0,j=(l-Math.sin(c)*this.sinph0)*k;break;case this.N_POLE:j=-j,c=Cb-c;break;case this.S_POLE:c-=Cb}b=0!==j||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(i,j):0}else{if(h=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(i/=this.dd,j*=this.dd,g=Math.sqrt(i*i+j*j),g<Gb)return a.x=0,a.y=this.phi0,a;e=2*Math.asin(.5*g/this.rq),d=Math.cos(e),i*=e=Math.sin(e),this.mode===this.OBLIQ?(h=d*this.sinb1+j*e*this.cosb1/g,f=this.qp*h,j=g*this.cosb1*d-j*this.sinb1*e):(h=j*e/g,f=this.qp*h,j=g*d)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(j=-j),f=i*i+j*j,!f)return a.x=0,a.y=this.phi0,a;h=1-f/this.qp,this.mode===this.S_POLE&&(h=-h)}b=Math.atan2(i,j),c=Ja(Math.asin(h),this.apa)}return a.x=fc(this.long0+b),a.y=c,a}function Ia(a){var b,c=[];return c[0]=a*Qd,b=a*a,c[0]+=b*Rd,c[1]=b*Td,b*=a,c[0]+=b*Sd,c[1]+=b*Ud,c[2]=b*Vd,c}function Ja(a,b){var c=a+a;return a+b[0]*Math.sin(c)+b[1]*Math.sin(c+c)+b[2]*Math.sin(c+c+c)}function Ka(){Math.abs(this.lat1+this.lat2)<Gb||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=dc(this.e3,this.sin_po,this.cos_po),this.qs1=Ld(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=dc(this.e3,this.sin_po,this.cos_po),this.qs2=Ld(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=Ld(this.e3,this.sin_po,this.cos_po),Math.abs(this.lat1-this.lat2)>Gb?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function La(a){var b=a.x,c=a.y;this.sin_phi=Math.sin(c),this.cos_phi=Math.cos(c);var d=Ld(this.e3,this.sin_phi,this.cos_phi),e=this.a*Math.sqrt(this.c-this.ns0*d)/this.ns0,f=this.ns0*fc(b-this.long0),g=e*Math.sin(f)+this.x0,h=this.rh-e*Math.cos(f)+this.y0;return a.x=g,a.y=h,a}function Ma(a){var b,c,d,e,f,g;return a.x-=this.x0,a.y=this.rh-a.y+this.y0,this.ns0>=0?(b=Math.sqrt(a.x*a.x+a.y*a.y),d=1):(b=-Math.sqrt(a.x*a.x+a.y*a.y),d=-1),e=0,0!==b&&(e=Math.atan2(d*a.x,d*a.y)),d=b*this.ns0/this.a,this.sphere?g=Math.asin((this.c-d*d)/(2*this.ns0)):(c=(this.c-d*d)/this.ns0,g=this.phi1z(this.e3,c)),f=fc(e/this.ns0+this.long0),a.x=f,a.y=g,a}function Na(a,b){var c,d,e,f,g,h=Yd(.5*b);if(a<Gb)return h;for(var i=a*a,j=1;j<=25;j++)if(c=Math.sin(h),d=Math.cos(h),e=a*c,f=1-e*e,g=.5*f*f/d*(b/(1-i)-c/f+.5/a*Math.log((1-e)/(1+e))),h+=g,Math.abs(g)<=1e-7)return h;return null}function Oa(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function Pa(a){var b,c,d,e,f,g,h,i,j=a.x,k=a.y;return d=fc(j-this.long0),b=Math.sin(k),c=Math.cos(k),e=Math.cos(d),g=this.sin_p14*b+this.cos_p14*c*e,f=1,g>0||Math.abs(g)<=Gb?(h=this.x0+this.a*f*c*Math.sin(d)/g,i=this.y0+this.a*f*(this.cos_p14*b-this.sin_p14*c*e)/g):(h=this.x0+this.infinity_dist*c*Math.sin(d),i=this.y0+this.infinity_dist*(this.cos_p14*b-this.sin_p14*c*e)),a.x=h,a.y=i,a}function Qa(a){var b,c,d,e,f,g;return a.x=(a.x-this.x0)/this.a,a.y=(a.y-this.y0)/this.a,a.x/=this.k0,a.y/=this.k0,(b=Math.sqrt(a.x*a.x+a.y*a.y))?(e=Math.atan2(b,this.rc),c=Math.sin(e),d=Math.cos(e),g=Yd(d*this.sin_p14+a.y*c*this.cos_p14/b),f=Math.atan2(a.x*c,b*this.cos_p14*d-a.y*this.sin_p14*c),f=fc(this.long0+f)):(g=this.phic0,f=0),a.x=f,a.y=g,a}function Ra(){this.sphere||(this.k0=dc(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function Sa(a){var b,c,d=a.x,e=a.y,f=fc(d-this.long0);if(this.sphere)b=this.x0+this.a*f*Math.cos(this.lat_ts),c=this.y0+this.a*Math.sin(e)/Math.cos(this.lat_ts);else{var g=Ld(this.e,Math.sin(e));b=this.x0+this.a*this.k0*f,c=this.y0+this.a*g*.5/this.k0}return a.x=b,a.y=c,a}function Ta(a){a.x-=this.x0,a.y-=this.y0;var b,c;return this.sphere?(b=fc(this.long0+a.x/this.a/Math.cos(this.lat_ts)),c=Math.asin(a.y/this.a*Math.cos(this.lat_ts))):(c=be(this.e,2*a.y*this.k0/this.a),b=fc(this.long0+a.x/(this.a*this.k0))),a.x=b,a.y=c,a}function Ua(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function Va(a){var b=a.x,c=a.y,d=fc(b-this.long0),e=Hd(c-this.lat0);return a.x=this.x0+this.a*d*this.rc,a.y=this.y0+this.a*e,a}function Wa(a){var b=a.x,c=a.y;return a.x=fc(this.long0+(b-this.x0)/(this.a*this.rc)),a.y=Hd(this.lat0+(c-this.y0)/this.a),a}function Xa(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Cd(this.es),this.e1=Dd(this.es),this.e2=Ed(this.es),this.e3=Fd(this.es),this.ml0=this.a*Bd(this.e0,this.e1,this.e2,this.e3,this.lat0)}function Ya(a){var b,c,d,e=a.x,f=a.y,g=fc(e-this.long0);if(d=g*Math.sin(f),this.sphere)Math.abs(f)<=Gb?(b=this.a*g,c=-1*this.a*this.lat0):(b=this.a*Math.sin(d)/Math.tan(f),c=this.a*(Hd(f-this.lat0)+(1-Math.cos(d))/Math.tan(f)));else if(Math.abs(f)<=Gb)b=this.a*g,c=-1*this.ml0;else{var h=Gd(this.a,this.e,Math.sin(f))/Math.tan(f);b=h*Math.sin(d),c=this.a*Bd(this.e0,this.e1,this.e2,this.e3,f)-this.ml0+h*(1-Math.cos(d))}return a.x=b+this.x0,a.y=c+this.y0,a}function Za(a){var b,c,d,e,f,g,h,i,j;if(d=a.x-this.x0,e=a.y-this.y0,this.sphere)if(Math.abs(e+this.a*this.lat0)<=Gb)b=fc(d/this.a+this.long0),c=0;else{g=this.lat0+e/this.a,h=d*d/this.a/this.a+g*g,i=g;var k;for(f=ge;f;--f)if(k=Math.tan(i),j=-1*(g*(i*k+1)-i-.5*(i*i+h)*k)/((i-g)/k-1),i+=j,Math.abs(j)<=Gb){c=i;break}b=fc(this.long0+Math.asin(d*Math.tan(i)/this.a)/Math.sin(c))}else if(Math.abs(e+this.ml0)<=Gb)c=0,b=fc(this.long0+d/this.a);else{g=(this.ml0+e)/this.a,h=d*d/this.a/this.a+g*g,i=g;var l,m,n,o,p;for(f=ge;f;--f)if(p=this.e*Math.sin(i),l=Math.sqrt(1-p*p)*Math.tan(i),m=this.a*Bd(this.e0,this.e1,this.e2,this.e3,i),n=this.e0-2*this.e1*Math.cos(2*i)+4*this.e2*Math.cos(4*i)-6*this.e3*Math.cos(6*i),o=m/this.a,j=(g*(l*o+1)-o-.5*l*(o*o+h))/(this.es*Math.sin(2*i)*(o*o+h-2*g*o)/(4*l)+(g-o)*(l*n-2/Math.sin(2*i))-n),i-=j,Math.abs(j)<=Gb){c=i;break}l=Math.sqrt(1-this.es*Math.pow(Math.sin(c),2))*Math.tan(c),b=fc(this.long0+Math.asin(d*l/this.a)/Math.sin(c))}return a.x=b,a.y=c,a}function $a(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function _a(a){var b,c=a.x,d=a.y,e=d-this.lat0,f=c-this.long0,g=e/Bb*1e-5,h=f,i=1,j=0;for(b=1;b<=10;b++)i*=g,j+=this.A[b]*i;var k,l,m=j,n=h,o=1,p=0,q=0,r=0;for(b=1;b<=6;b++)k=o*m-p*n,l=p*m+o*n,o=k,p=l,q=q+this.B_re[b]*o-this.B_im[b]*p,r=r+this.B_im[b]*o+this.B_re[b]*p;return a.x=r*this.a+this.x0,a.y=q*this.a+this.y0,a}function ab(a){var b,c,d,e=a.x,f=a.y,g=e-this.x0,h=f-this.y0,i=h/this.a,j=g/this.a,k=1,l=0,m=0,n=0;for(b=1;b<=6;b++)c=k*i-l*j,d=l*i+k*j,k=c,l=d,m=m+this.C_re[b]*k-this.C_im[b]*l,n=n+this.C_im[b]*k+this.C_re[b]*l;for(var o=0;o<this.iterations;o++){var p,q,r=m,s=n,t=i,u=j;for(b=2;b<=6;b++)p=r*m-s*n,q=s*m+r*n,r=p,s=q,t+=(b-1)*(this.B_re[b]*r-this.B_im[b]*s),u+=(b-1)*(this.B_im[b]*r+this.B_re[b]*s);r=1,s=0;var v=this.B_re[1],w=this.B_im[1];for(b=2;b<=6;b++)p=r*m-s*n,q=s*m+r*n,r=p,s=q,v+=b*(this.B_re[b]*r-this.B_im[b]*s),w+=b*(this.B_im[b]*r+this.B_re[b]*s);var x=v*v+w*w;m=(t*v+u*w)/x,n=(u*v-t*w)/x}var y=m,z=n,A=1,B=0;for(b=1;b<=9;b++)A*=y,B+=this.D[b]*A;var C=this.lat0+B*Bb*1e5,D=this.long0+z;return a.x=D,a.y=C,a}function bb(){}function cb(a){var b=a.x,c=a.y,d=fc(b-this.long0),e=this.x0+this.a*d,f=this.y0+this.a*Math.log(Math.tan(Math.PI/4+c/2.5))*1.25;return a.x=e,a.y=f,a}function db(a){a.x-=this.x0,a.y-=this.y0;var b=fc(this.long0+a.x/this.a),c=2.5*(Math.atan(Math.exp(.8*a.y/this.a))-Math.PI/4);return a.x=b,a.y=c,a}function eb(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=Tc(this.es)}function fb(a){var b,c,d=a.x,e=a.y;if(d=fc(d-this.long0),this.sphere){if(this.m)for(var f=this.n*Math.sin(e),g=ne;g;--g){var h=(this.m*e+Math.sin(e)-f)/(this.m+Math.cos(e));if(e-=h,Math.abs(h)<Gb)break}else e=1!==this.n?Math.asin(this.n*Math.sin(e)):e;b=this.a*this.C_x*d*(this.m+Math.cos(e)),c=this.a*this.C_y*e}else{var i=Math.sin(e),j=Math.cos(e);c=this.a*Uc(e,i,j,this.en),b=this.a*d*j/Math.sqrt(1-this.es*i*i)}return a.x=b,a.y=c,a}function gb(a){var b,c,d,e;return a.x-=this.x0,d=a.x/this.a,a.y-=this.y0,b=a.y/this.a,this.sphere?(b/=this.C_y,d/=this.C_x*(this.m+Math.cos(b)),this.m?b=Yd((this.m*b+Math.sin(b))/this.n):1!==this.n&&(b=Yd(Math.sin(b)/this.n)),d=fc(d+this.long0),b=Hd(b)):(b=Wc(a.y/this.a,this.es,this.en),e=Math.abs(b),e<Cb?(e=Math.sin(b),c=this.long0+a.x*Math.sqrt(1-this.es*e*e)/(this.a*Math.cos(b)),d=fc(c)):e-Gb<Cb&&(d=this.long0)),a.x=d,a.y=b,a}function hb(){}function ib(a){for(var b=a.x,c=a.y,d=fc(b-this.long0),e=c,f=Math.PI*Math.sin(c),g=0;!0;g++){var h=-(e+Math.sin(e)-f)/(1+Math.cos(e));if(e+=h,Math.abs(h)<Gb)break}e/=2,Math.PI/2-Math.abs(c)<Gb&&(d=0);var i=.900316316158*this.a*d*Math.cos(e)+this.x0,j=1.4142135623731*this.a*Math.sin(e)+this.y0;return a.x=i,a.y=j,a}function jb(a){var b,c;a.x-=this.x0,a.y-=this.y0,c=a.y/(1.4142135623731*this.a),Math.abs(c)>.999999999999&&(c=.999999999999),b=Math.asin(c);var d=fc(this.long0+a.x/(.900316316158*this.a*Math.cos(b)));d<-Math.PI&&(d=-Math.PI),d>Math.PI&&(d=Math.PI),c=(2*b+Math.sin(2*b))/Math.PI,Math.abs(c)>1&&(c=1);var e=Math.asin(c);return a.x=d,a.y=e,a}function kb(){Math.abs(this.lat1+this.lat2)<Gb||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Cd(this.es),this.e1=Dd(this.es),this.e2=Ed(this.es),this.e3=Fd(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=dc(this.e,this.sinphi,this.cosphi),this.ml1=Bd(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<Gb?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=dc(this.e,this.sinphi,this.cosphi),this.ml2=Bd(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=Bd(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function lb(a){var b,c=a.x,d=a.y;if(this.sphere)b=this.a*(this.g-d);else{var e=Bd(this.e0,this.e1,this.e2,this.e3,d);b=this.a*(this.g-e)}var f=this.ns*fc(c-this.long0),g=this.x0+b*Math.sin(f),h=this.y0+this.rh-b*Math.cos(f);return a.x=g,a.y=h,a}function mb(a){a.x-=this.x0,a.y=this.rh-a.y+this.y0;var b,c,d,e;this.ns>=0?(c=Math.sqrt(a.x*a.x+a.y*a.y),b=1):(c=-Math.sqrt(a.x*a.x+a.y*a.y),b=-1);var f=0;if(0!==c&&(f=Math.atan2(b*a.x,b*a.y)),this.sphere)return e=fc(this.long0+f/this.ns),d=Hd(this.g-c/this.a),a.x=e,a.y=d,a;var g=this.g-c/this.a;return d=Id(g,this.e0,this.e1,this.e2,this.e3),e=fc(this.long0+f/this.ns),a.x=e,a.y=d,a}function nb(){this.R=this.a}function ob(a){var b,c,d=a.x,e=a.y,f=fc(d-this.long0);Math.abs(e)<=Gb&&(b=this.x0+this.R*f,c=this.y0);var g=Yd(2*Math.abs(e/Math.PI));(Math.abs(f)<=Gb||Math.abs(Math.abs(e)-Cb)<=Gb)&&(b=this.x0,c=e>=0?this.y0+Math.PI*this.R*Math.tan(.5*g):this.y0+Math.PI*this.R*-Math.tan(.5*g));var h=.5*Math.abs(Math.PI/f-f/Math.PI),i=h*h,j=Math.sin(g),k=Math.cos(g),l=k/(j+k-1),m=l*l,n=l*(2/j-1),o=n*n,p=Math.PI*this.R*(h*(l-o)+Math.sqrt(i*(l-o)*(l-o)-(o+i)*(m-o)))/(o+i);f<0&&(p=-p),b=this.x0+p;var q=i+l;return p=Math.PI*this.R*(n*q-h*Math.sqrt((o+i)*(i+1)-q*q))/(o+i),c=e>=0?this.y0+p:this.y0-p,a.x=b,a.y=c,a}function pb(a){var b,c,d,e,f,g,h,i,j,k,l,m,n;return a.x-=this.x0,a.y-=this.y0,l=Math.PI*this.R,d=a.x/l,e=a.y/l,f=d*d+e*e,g=-Math.abs(e)*(1+f),h=g-2*e*e+d*d,i=-2*g+1+2*e*e+f*f,n=e*e/i+(2*h*h*h/i/i/i-9*g*h/i/i)/27,j=(g-h*h/3/i)/i,k=2*Math.sqrt(-j/3),l=3*n/j/k,Math.abs(l)>1&&(l=l>=0?1:-1),m=Math.acos(l)/3,c=a.y>=0?(-k*Math.cos(m+Math.PI/3)-h/3/i)*Math.PI:-(-k*Math.cos(m+Math.PI/3)-h/3/i)*Math.PI,b=Math.abs(d)<Gb?this.long0:fc(this.long0+Math.PI*(f-1+Math.sqrt(1+2*(d*d-e*e)+f*f))/2/d),a.x=b,a.y=c,a}function qb(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)}function rb(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y=a.x,z=a.y,A=Math.sin(a.y),B=Math.cos(a.y),C=fc(y-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=Gb?(a.x=this.x0+this.a*(Cb-z)*Math.sin(C),a.y=this.y0-this.a*(Cb-z)*Math.cos(C),a):Math.abs(this.sin_p12+1)<=Gb?(a.x=this.x0+this.a*(Cb+z)*Math.sin(C),a.y=this.y0+this.a*(Cb+z)*Math.cos(C),a):(s=this.sin_p12*A+this.cos_p12*B*Math.cos(C),q=Math.acos(s),r=q/Math.sin(q),a.x=this.x0+this.a*r*B*Math.sin(C),a.y=this.y0+this.a*r*(this.cos_p12*A-this.sin_p12*B*Math.cos(C)),a):(b=Cd(this.es),c=Dd(this.es),d=Ed(this.es),e=Fd(this.es),Math.abs(this.sin_p12-1)<=Gb?(f=this.a*Bd(b,c,d,e,Cb),g=this.a*Bd(b,c,d,e,z),a.x=this.x0+(f-g)*Math.sin(C),a.y=this.y0-(f-g)*Math.cos(C),a):Math.abs(this.sin_p12+1)<=Gb?(f=this.a*Bd(b,c,d,e,Cb),g=this.a*Bd(b,c,d,e,z),a.x=this.x0+(f+g)*Math.sin(C),a.y=this.y0+(f+g)*Math.cos(C),a):(h=A/B,i=Gd(this.a,this.e,this.sin_p12),j=Gd(this.a,this.e,A),k=Math.atan((1-this.es)*h+this.es*i*this.sin_p12/(j*B)),l=Math.atan2(Math.sin(C),this.cos_p12*Math.tan(k)-this.sin_p12*Math.cos(C)),t=0===l?Math.asin(this.cos_p12*Math.sin(k)-this.sin_p12*Math.cos(k)):Math.abs(Math.abs(l)-Math.PI)<=Gb?-Math.asin(this.cos_p12*Math.sin(k)-this.sin_p12*Math.cos(k)):Math.asin(Math.sin(C)*Math.cos(k)/Math.sin(l)),m=this.e*this.sin_p12/Math.sqrt(1-this.es),n=this.e*this.cos_p12*Math.cos(l)/Math.sqrt(1-this.es),o=m*n,p=n*n,u=t*t,v=u*t,w=v*t,x=w*t,q=i*t*(1-u*p*(1-p)/6+v/8*o*(1-2*p)+w/120*(p*(4-7*p)-3*m*m*(1-7*p))-x/48*o),a.x=this.x0+q*Math.sin(l),a.y=this.y0+q*Math.cos(l),a))}function sb(a){a.x-=this.x0,a.y-=this.y0;var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x;if(this.sphere){if(b=Math.sqrt(a.x*a.x+a.y*a.y),b>2*Cb*this.a)return;return c=b/this.a,d=Math.sin(c),e=Math.cos(c),f=this.long0,Math.abs(b)<=Gb?g=this.lat0:(g=Yd(e*this.sin_p12+a.y*d*this.cos_p12/b),h=Math.abs(this.lat0)-Cb,f=fc(Math.abs(h)<=Gb?this.lat0>=0?this.long0+Math.atan2(a.x,-a.y):this.long0-Math.atan2(-a.x,a.y):this.long0+Math.atan2(a.x*d,b*this.cos_p12*e-a.y*this.sin_p12*d))),a.x=f,a.y=g,a}return i=Cd(this.es),j=Dd(this.es),k=Ed(this.es),l=Fd(this.es),Math.abs(this.sin_p12-1)<=Gb?(m=this.a*Bd(i,j,k,l,Cb),b=Math.sqrt(a.x*a.x+a.y*a.y),n=m-b,g=Id(n/this.a,i,j,k,l),f=fc(this.long0+Math.atan2(a.x,-1*a.y)),a.x=f,a.y=g,a):Math.abs(this.sin_p12+1)<=Gb?(m=this.a*Bd(i,j,k,l,Cb),b=Math.sqrt(a.x*a.x+a.y*a.y),n=b-m,g=Id(n/this.a,i,j,k,l),f=fc(this.long0+Math.atan2(a.x,a.y)),a.x=f,a.y=g,a):(b=Math.sqrt(a.x*a.x+a.y*a.y),q=Math.atan2(a.x,a.y),o=Gd(this.a,this.e,this.sin_p12),r=Math.cos(q),s=this.e*this.cos_p12*r,t=-s*s/(1-this.es),u=3*this.es*(1-t)*this.sin_p12*this.cos_p12*r/(1-this.es),v=b/o,w=v-t*(1+t)*Math.pow(v,3)/6-u*(1+3*t)*Math.pow(v,4)/24,x=1-t*w*w/2-v*w*w*w/6,p=Math.asin(this.sin_p12*Math.cos(w)+this.cos_p12*Math.sin(w)*r),f=fc(this.long0+Math.asin(Math.sin(q)*Math.sin(w)/Math.cos(p))),g=Math.atan((1-this.es*x*this.sin_p12/Math.sin(p))*Math.tan(p)/(1-this.es)),a.x=f,a.y=g,a)}function tb(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function ub(a){var b,c,d,e,f,g,h,i,j=a.x,k=a.y;return d=fc(j-this.long0),b=Math.sin(k),c=Math.cos(k),e=Math.cos(d),g=this.sin_p14*b+this.cos_p14*c*e,f=1,(g>0||Math.abs(g)<=Gb)&&(h=this.a*f*c*Math.sin(d),i=this.y0+this.a*f*(this.cos_p14*b-this.sin_p14*c*e)),a.x=h,a.y=i,a}function vb(a){var b,c,d,e,f,g,h;return a.x-=this.x0,a.y-=this.y0,b=Math.sqrt(a.x*a.x+a.y*a.y),c=Yd(b/this.a),d=Math.sin(c),e=Math.cos(c),g=this.long0,Math.abs(b)<=Gb?(h=this.lat0,a.x=g,a.y=h,a):(h=Yd(e*this.sin_p14+a.y*d*this.cos_p14/b),f=Math.abs(this.lat0)-Cb,Math.abs(f)<=Gb?(g=fc(this.lat0>=0?this.long0+Math.atan2(a.x,-a.y):this.long0-Math.atan2(-a.x,a.y)),a.x=g,a.y=h,a):(g=fc(this.long0+Math.atan2(a.x*d,b*this.cos_p14*e-a.y*this.sin_p14*d)),a.x=g,a.y=h,a))}var wb=function(a){a("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),a("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),a("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),a.WGS84=a["EPSG:4326"],a["EPSG:3785"]=a["EPSG:3857"],a.GOOGLE=a["EPSG:3857"],a["EPSG:900913"]=a["EPSG:3857"],a["EPSG:102113"]=a["EPSG:3857"]},xb=1,yb=2,zb=4,Ab=5,Bb=484813681109536e-20,Cb=Math.PI/2,Db=.16666666666666666,Eb=.04722222222222222,Fb=.022156084656084655,Gb="undefined"==typeof Number.EPSILON?1e-10:Number.EPSILON,Hb=.017453292519943295,Ib=57.29577951308232,Jb=Math.PI/4,Kb=2*Math.PI,Lb=3.14159265359,Mb={};Mb.greenwich=0,Mb.lisbon=-9.131906111111,Mb.paris=2.337229166667,Mb.bogota=-74.080916666667,Mb.madrid=-3.687938888889,Mb.rome=12.452333333333,Mb.bern=7.439583333333,Mb.jakarta=106.807719444444,Mb.ferro=-17.666666666667,Mb.brussels=4.367975,Mb.stockholm=18.058277777778,Mb.athens=23.7163375,Mb.oslo=10.722916666667;var Nb={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}},Ob=/[\s_\-\/\(\)]/g,Pb=function(b){var c,d,e,f={},g=b.split("+").map(function(a){return a.trim()}).filter(function(a){return a}).reduce(function(a,b){var c=b.split("=");return c.push(!0),a[c[0].toLowerCase()]=c[1],a},{}),h={proj:"projName",datum:"datumCode",rf:function(a){f.rf=parseFloat(a)},lat_0:function(a){f.lat0=a*Hb},lat_1:function(a){f.lat1=a*Hb},lat_2:function(a){f.lat2=a*Hb},lat_ts:function(a){f.lat_ts=a*Hb},lon_0:function(a){f.long0=a*Hb},lon_1:function(a){f.long1=a*Hb},lon_2:function(a){f.long2=a*Hb},alpha:function(a){f.alpha=parseFloat(a)*Hb},lonc:function(a){f.longc=a*Hb},x_0:function(a){f.x0=parseFloat(a)},y_0:function(a){f.y0=parseFloat(a)},k_0:function(a){f.k0=parseFloat(a)},k:function(a){f.k0=parseFloat(a)},a:function(a){f.a=parseFloat(a)},b:function(a){f.b=parseFloat(a)},r_a:function(){f.R_A=!0},zone:function(a){f.zone=parseInt(a,10)},south:function(){f.utmSouth=!0},towgs84:function(a){f.datum_params=a.split(",").map(function(a){return parseFloat(a)})},to_meter:function(a){f.to_meter=parseFloat(a)},units:function(b){f.units=b;var c=a(Nb,b);c&&(f.to_meter=c.to_meter)},from_greenwich:function(a){f.from_greenwich=a*Hb},pm:function(b){var c=a(Mb,b);f.from_greenwich=(c?c:parseFloat(b))*Hb},nadgrids:function(a){"@null"===a?f.datumCode="none":f.nadgrids=a},axis:function(a){var b="ewnsud";3===a.length&&b.indexOf(a.substr(0,1))!==-1&&b.indexOf(a.substr(1,1))!==-1&&b.indexOf(a.substr(2,1))!==-1&&(f.axis=a)}};for(c in g)d=g[c],c in h?(e=h[c],"function"==typeof e?e(d):f[e]=d):f[c]=d;return"string"==typeof f.datumCode&&"WGS84"!==f.datumCode&&(f.datumCode=f.datumCode.toLowerCase()),f},Qb=1,Rb=2,Sb=3,Tb=4,Ub=5,Vb=-1,Wb=/\s/,Xb=/[A-Za-z]/,Yb=/[A-Za-z84]/,Zb=/[,\]]/,$b=/[\d\.E\-\+]/;b.prototype.readCharicter=function(){var a=this.text[this.place++];if(this.state!==Tb)for(;Wb.test(a);){if(this.place>=this.text.length)return;a=this.text[this.place++]}switch(this.state){case Qb:return this.neutral(a);case Rb:return this.keyword(a);case Tb:return this.quoted(a);case Ub:return this.afterquote(a);case Sb:return this.number(a);case Vb:return}},b.prototype.afterquote=function(a){if('"'===a)return this.word+='"',void(this.state=Tb);if(Zb.test(a))return this.word=this.word.trim(),void this.afterItem(a);throw new Error("havn't handled \""+a+'" in afterquote yet, index '+this.place)},b.prototype.afterItem=function(a){return","===a?(null!==this.word&&this.currentObject.push(this.word),this.word=null,void(this.state=Qb)):"]"===a?(this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=Qb,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=Vb))):void 0},b.prototype.number=function(a){if($b.test(a))return void(this.word+=a);if(Zb.test(a))return this.word=parseFloat(this.word),void this.afterItem(a);throw new Error("havn't handled \""+a+'" in number yet, index '+this.place)},b.prototype.quoted=function(a){return'"'===a?void(this.state=Ub):void(this.word+=a)},b.prototype.keyword=function(a){if(Yb.test(a))return void(this.word+=a);if("["===a){var b=[];return b.push(this.word),this.level++,null===this.root?this.root=b:this.currentObject.push(b),this.stack.push(this.currentObject),this.currentObject=b,void(this.state=Qb)}if(Zb.test(a))return void this.afterItem(a);throw new Error("havn't handled \""+a+'" in keyword yet, index '+this.place)},b.prototype.neutral=function(a){if(Xb.test(a))return this.word=a,void(this.state=Rb);if('"'===a)return this.word="",void(this.state=Tb);if($b.test(a))return this.word=a,void(this.state=Sb);if(Zb.test(a))return void this.afterItem(a);throw new Error("havn't handled \""+a+'" in neutral yet, index '+this.place)},b.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===Vb)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};var _b=.017453292519943295,ac=function(a){var b=c(a),d=b.shift(),f=b.shift();b.unshift(["name",f]),b.unshift(["type",d]);var g={};return e(b,g),h(g),g};wb(i);var bc=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"],cc=function(a,b){a=a||{};var c,d;if(!b)return a;for(d in b)c=b[d],void 0!==c&&(a[d]=c);return a},dc=function(a,b,c){var d=a*b;return c/Math.sqrt(1-d*d)},ec=function(a){return a<0?-1:1},fc=function(a){return Math.abs(a)<=Lb?a:a-ec(a)*Kb},gc=function(a,b,c){var d=a*c,e=.5*a;return d=Math.pow((1-d)/(1+d),e),Math.tan(.5*(Cb-b))/d},hc=function(a,b){for(var c,d,e=.5*a,f=Cb-2*Math.atan(b),g=0;g<=15;g++)if(c=a*Math.sin(f),d=Cb-2*Math.atan(b*Math.pow((1-c)/(1+c),e))-f,f+=d,Math.abs(d)<=1e-10)return f;return-9999},ic=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"],jc={init:o,forward:p,inverse:q,names:ic},kc=["longlat","identity"],lc={init:r,forward:s,inverse:s,names:kc},mc=[jc,lc],nc={},oc=[],pc={start:v,add:t,get:u},qc={};qc.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"},qc.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},qc.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},qc.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"},qc.airy={a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},qc.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},qc.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},qc.mod_airy={a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},qc.andrae={a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},qc.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},qc.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},qc.bessel={a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},qc.bess_nam={a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},qc.clrk66={a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},qc.clrk80={a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},qc.clrk58={a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},qc.CPM={a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},qc.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},qc.engelis={a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},qc.evrst30={a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},qc.evrst48={a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},qc.evrst56={a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},qc.evrst69={a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},qc.evrstSS={a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},qc.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},qc.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"},qc.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"},qc.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"},qc.hough={a:6378270,rf:297,ellipseName:"Hough"},qc.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},qc.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"},qc.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"},qc.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"},qc.new_intl={a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},qc.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},qc.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},qc.SEasia={a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},qc.walbeck={a:6376896,b:6355834.8467,ellipseName:"Walbeck"},qc.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"},qc.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"},qc.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"};var rc=qc.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};qc.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};var sc={};sc.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},sc.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},sc.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},sc.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},sc.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},sc.potsdam={towgs84:"606.0,23.0,413.0",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},sc.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},sc.hermannskogel={towgs84:"653.0,-212.0,449.0",ellipse:"bessel",datumName:"Hermannskogel"},sc.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},sc.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},sc.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},sc.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},sc.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},sc.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},sc.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},sc.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"},z.projections=pc,z.projections.start();
var tc=function(a,b,c){return A(a,b)?c:a.datum_type===Ab||b.datum_type===Ab?c:a.es!==b.es||a.a!==b.a||F(a.datum_type)||F(b.datum_type)?(c=B(c,a.es,a.a),F(a.datum_type)&&(c=D(c,a.datum_type,a.datum_params)),F(b.datum_type)&&(c=E(c,b.datum_type,b.datum_params)),C(c,b.es,b.a,b.b)):c},uc=function(a,b,c){var d,e,f,g=c.x,h=c.y,i=c.z||0,j={};for(f=0;f<3;f++)if(!b||2!==f||void 0!==c.z)switch(0===f?(d=g,e="x"):1===f?(d=h,e="y"):(d=i,e="z"),a.axis[f]){case"e":j[e]=d;break;case"w":j[e]=-d;break;case"n":j[e]=d;break;case"s":j[e]=-d;break;case"u":void 0!==c[e]&&(j.z=d);break;case"d":void 0!==c[e]&&(j.z=-d);break;default:return null}return j},vc=function(a){var b={x:a[0],y:a[1]};return a.length>2&&(b.z=a[2]),a.length>3&&(b.m=a[3]),b},wc=z("WGS84"),xc=6,yc="AJSAJS",zc="AFAFAF",Ac=65,Bc=73,Cc=79,Dc=86,Ec=90,Fc={forward:L,inverse:M,toPoint:N};Point.fromMGRS=function(a){return new Point(N(a))},Point.prototype.toMGRS=function(a){return L([this.x,this.y],a)};var Gc="2.4.3",Hc=1,Ic=.25,Jc=.046875,Kc=.01953125,Lc=.01068115234375,Mc=.75,Nc=.46875,Oc=.013020833333333334,Pc=.007120768229166667,Qc=.3645833333333333,Rc=.005696614583333333,Sc=.3076171875,Tc=function(a){var b=[];b[0]=Hc-a*(Ic+a*(Jc+a*(Kc+a*Lc))),b[1]=a*(Mc-a*(Jc+a*(Kc+a*Lc)));var c=a*a;return b[2]=c*(Nc-a*(Oc+a*Pc)),c*=a,b[3]=c*(Qc-a*Rc),b[4]=c*a*Sc,b},Uc=function(a,b,c,d){return c*=b,b*=b,d[0]*a-c*(d[1]+b*(d[2]+b*(d[3]+b*d[4])))},Vc=20,Wc=function(a,b,c){for(var d=1/(1-b),e=a,f=Vc;f;--f){var g=Math.sin(e),h=1-b*g*g;if(h=(Uc(e,g,Math.cos(e),c)-a)*(h*Math.sqrt(h))*d,e-=h,Math.abs(h)<Gb)return e}return e},Xc=["Transverse_Mercator","Transverse Mercator","tmerc"],Yc={init:_,forward:aa,inverse:ba,names:Xc},Zc=function(a){var b=Math.exp(a);return b=(b-1/b)/2},$c=function(a,b){a=Math.abs(a),b=Math.abs(b);var c=Math.max(a,b),d=Math.min(a,b)/(c?c:1);return c*Math.sqrt(1+Math.pow(d,2))},_c=function(a){var b=1+a,c=b-1;return 0===c?a:a*Math.log(b)/c},ad=function(a){var b=Math.abs(a);return b=_c(b*(1+b/($c(1,b)+1))),a<0?-b:b},bd=function(a,b){for(var c,d=2*Math.cos(2*b),e=a.length-1,f=a[e],g=0;--e>=0;)c=-g+d*f+a[e],g=f,f=c;return b+c*Math.sin(2*b)},cd=function(a,b){for(var c,d=2*Math.cos(b),e=a.length-1,f=a[e],g=0;--e>=0;)c=-g+d*f+a[e],g=f,f=c;return Math.sin(b)*c},dd=function(a){var b=Math.exp(a);return b=(b+1/b)/2},ed=function(a,b,c){for(var d,e,f=Math.sin(b),g=Math.cos(b),h=Zc(c),i=dd(c),j=2*g*i,k=-2*f*h,l=a.length-1,m=a[l],n=0,o=0,p=0;--l>=0;)d=o,e=n,o=m,n=p,m=-d+j*o-k*n+a[l],p=-e+k*o+j*n;return j=f*i,k=g*h,[j*m-k*p,j*p+k*m]},fd=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc"],gd={init:ca,forward:da,inverse:ea,names:fd},hd=function(a,b){if(void 0===a){if(a=Math.floor(30*(fc(b)+Math.PI)/Math.PI)+1,a<0)return 0;if(a>60)return 60}return a},id="etmerc",jd=["Universal Transverse Mercator System","utm"],kd={init:fa,names:jd,dependsOn:id},ld=function(a,b){return Math.pow((1-a)/(1+a),b)},md=20,nd=["gauss"],od={init:ga,forward:ha,inverse:ia,names:nd},pd=["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative"],qd={init:ja,forward:ka,inverse:la,names:pd},rd=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"],sd={init:na,forward:oa,inverse:pa,names:rd,ssfn_:ma},td=["somerc"],ud={init:qa,forward:ra,inverse:sa,names:td},vd=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","omerc"],wd={init:ta,forward:ua,inverse:va,names:vd},xd=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_2SP","lcc"],yd={init:wa,forward:xa,inverse:ya,names:xd},zd=["Krovak","krovak"],Ad={init:za,forward:Aa,inverse:Ba,names:zd},Bd=function(a,b,c,d,e){return a*e-b*Math.sin(2*e)+c*Math.sin(4*e)-d*Math.sin(6*e)},Cd=function(a){return 1-.25*a*(1+a/16*(3+1.25*a))},Dd=function(a){return.375*a*(1+.25*a*(1+.46875*a))},Ed=function(a){return.05859375*a*a*(1+.75*a)},Fd=function(a){return a*a*a*(35/3072)},Gd=function(a,b,c){var d=b*c;return a/Math.sqrt(1-d*d)},Hd=function(a){return Math.abs(a)<Cb?a:a-ec(a)*Math.PI},Id=function(a,b,c,d,e){var f,g;f=a/b;for(var h=0;h<15;h++)if(g=(a-(b*f-c*Math.sin(2*f)+d*Math.sin(4*f)-e*Math.sin(6*f)))/(b-2*c*Math.cos(2*f)+4*d*Math.cos(4*f)-6*e*Math.cos(6*f)),f+=g,Math.abs(g)<=1e-10)return f;return NaN},Jd=["Cassini","Cassini_Soldner","cass"],Kd={init:Ca,forward:Da,inverse:Ea,names:Jd},Ld=function(a,b){var c;return a>1e-7?(c=a*b,(1-a*a)*(b/(1-c*c)-.5/a*Math.log((1-c)/(1+c)))):2*b},Md=1,Nd=2,Od=3,Pd=4,Qd=.3333333333333333,Rd=.17222222222222222,Sd=.10257936507936508,Td=.06388888888888888,Ud=.0664021164021164,Vd=.016415012942191543,Wd=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],Xd={init:Fa,forward:Ga,inverse:Ha,names:Wd,S_POLE:Md,N_POLE:Nd,EQUIT:Od,OBLIQ:Pd},Yd=function(a){return Math.abs(a)>1&&(a=a>1?1:-1),Math.asin(a)},Zd=["Albers_Conic_Equal_Area","Albers","aea"],$d={init:Ka,forward:La,inverse:Ma,names:Zd,phi1z:Na},_d=["gnom"],ae={init:Oa,forward:Pa,inverse:Qa,names:_d},be=function(a,b){var c=1-(1-a*a)/(2*a)*Math.log((1-a)/(1+a));if(Math.abs(Math.abs(b)-c)<1e-6)return b<0?-1*Cb:Cb;for(var d,e,f,g,h=Math.asin(.5*b),i=0;i<30;i++)if(e=Math.sin(h),f=Math.cos(h),g=a*e,d=Math.pow(1-g*g,2)/(2*f)*(b/(1-a*a)-e/(1-g*g)+.5/a*Math.log((1-g)/(1+g))),h+=d,Math.abs(d)<=1e-10)return h;return NaN},ce=["cea"],de={init:Ra,forward:Sa,inverse:Ta,names:ce},ee=["Equirectangular","Equidistant_Cylindrical","eqc"],fe={init:Ua,forward:Va,inverse:Wa,names:ee},ge=20,he=["Polyconic","poly"],ie={init:Xa,forward:Ya,inverse:Za,names:he},je=["New_Zealand_Map_Grid","nzmg"],ke={init:$a,forward:_a,inverse:ab,names:je},le=["Miller_Cylindrical","mill"],me={init:bb,forward:cb,inverse:db,names:le},ne=20,oe=["Sinusoidal","sinu"],pe={init:eb,forward:fb,inverse:gb,names:oe},qe=["Mollweide","moll"],re={init:hb,forward:ib,inverse:jb,names:qe},se=["Equidistant_Conic","eqdc"],te={init:kb,forward:lb,inverse:mb,names:se},ue=["Van_der_Grinten_I","VanDerGrinten","vandg"],ve={init:nb,forward:ob,inverse:pb,names:ue},we=["Azimuthal_Equidistant","aeqd"],xe={init:qb,forward:rb,inverse:sb,names:we},ye=["ortho"],ze={init:tb,forward:ub,inverse:vb,names:ye},Ae=function(proj4){proj4.Proj.projections.add(Yc),proj4.Proj.projections.add(gd),proj4.Proj.projections.add(kd),proj4.Proj.projections.add(qd),proj4.Proj.projections.add(sd),proj4.Proj.projections.add(ud),proj4.Proj.projections.add(wd),proj4.Proj.projections.add(yd),proj4.Proj.projections.add(Ad),proj4.Proj.projections.add(Kd),proj4.Proj.projections.add(Xd),proj4.Proj.projections.add($d),proj4.Proj.projections.add(ae),proj4.Proj.projections.add(de),proj4.Proj.projections.add(fe),proj4.Proj.projections.add(ie),proj4.Proj.projections.add(ke),proj4.Proj.projections.add(me),proj4.Proj.projections.add(pe),proj4.Proj.projections.add(re),proj4.Proj.projections.add(te),proj4.Proj.projections.add(ve),proj4.Proj.projections.add(xe),proj4.Proj.projections.add(ze)};return K.defaultDatum="WGS84",K.Proj=z,K.WGS84=new K.Proj("WGS84"),K.Point=Point,K.toPoint=vc,K.defs=i,K.transform=H,K.mgrs=Fc,K.version=Gc,Ae(K),K});

/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js */
var saveAs=saveAs||function(e){"use strict";if(typeof e==="undefined"||typeof navigator!=="undefined"&&/MSIE [1-9]\./.test(navigator.userAgent)){return}var t=e.document,n=function(){return e.URL||e.webkitURL||e},r=t.createElementNS("http://www.w3.org/1999/xhtml","a"),o="download"in r,a=function(e){var t=new MouseEvent("click");e.dispatchEvent(t)},i=/constructor/i.test(e.HTMLElement)||e.safari,f=/CriOS\/[\d]+/.test(navigator.userAgent),u=function(t){(e.setImmediate||e.setTimeout)(function(){throw t},0)},s="application/octet-stream",d=1e3*40,c=function(e){var t=function(){if(typeof e==="string"){n().revokeObjectURL(e)}else{e.remove()}};setTimeout(t,d)},l=function(e,t,n){t=[].concat(t);var r=t.length;while(r--){var o=e["on"+t[r]];if(typeof o==="function"){try{o.call(e,n||e)}catch(a){u(a)}}}},p=function(e){if(/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)){return new Blob([String.fromCharCode(65279),e],{type:e.type})}return e},v=function(t,u,d){if(!d){t=p(t)}var v=this,w=t.type,m=w===s,y,h=function(){l(v,"writestart progress write writeend".split(" "))},S=function(){if((f||m&&i)&&e.FileReader){var r=new FileReader;r.onloadend=function(){var t=f?r.result:r.result.replace(/^data:[^;]*;/,"data:attachment/file;");var n=e.open(t,"_blank");if(!n)e.location.href=t;t=undefined;v.readyState=v.DONE;h()};r.readAsDataURL(t);v.readyState=v.INIT;return}if(!y){y=n().createObjectURL(t)}if(m){e.location.href=y}else{var o=e.open(y,"_blank");if(!o){e.location.href=y}}v.readyState=v.DONE;h();c(y)};v.readyState=v.INIT;if(o){y=n().createObjectURL(t);setTimeout(function(){r.href=y;r.download=u;a(r);h();c(y);v.readyState=v.DONE});return}S()},w=v.prototype,m=function(e,t,n){return new v(e,t||e.name||"download",n)};if(typeof navigator!=="undefined"&&navigator.msSaveOrOpenBlob){return function(e,t,n){t=t||e.name||"download";if(!n){e=p(e)}return navigator.msSaveOrOpenBlob(e,t)}}w.abort=function(){};w.readyState=w.INIT=0;w.WRITING=1;w.DONE=2;w.error=w.onwritestart=w.onprogress=w.onwrite=w.onabort=w.onerror=w.onwriteend=null;return m}(typeof self!=="undefined"&&self||typeof window!=="undefined"&&window||this.content);if(typeof module!=="undefined"&&module.exports){module.exports.saveAs=saveAs}else if(typeof define!=="undefined"&&define!==null&&define.amd!==null){define("FileSaver.js",function(){return saveAs})}

// https://d3js.org Version 4.8.0. Copyright 2017 Mike Bostock.
(function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n(t.d3=t.d3||{})})(this,function(t){"use strict";function n(t){return function(n,e){return Rs(t(n),e)}}function e(t,n){return[t,n]}function r(t,n,e){var r=(n-t)/Math.max(0,e),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=Qs?10:o>=Ks?5:o>=tf?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=Qs?10:o>=Ks?5:o>=tf?2:1)}function i(t,n,e){var r=Math.abs(n-t)/Math.max(0,e),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=Qs?i*=10:o>=Ks?i*=5:o>=tf&&(i*=2),n<t?-i:i}function o(t){return t.length}function u(t){return"translate("+t+",0)"}function a(t){return"translate(0,"+t+")"}function c(t){var n=t.bandwidth()/2;return t.round()&&(n=Math.round(n)),function(e){return t(e)+n}}function s(){return!this.__axis}function f(t,n){function e(e){var u=null==o?n.ticks?n.ticks.apply(n,i):n.domain():o,a=null==f?n.tickFormat?n.tickFormat.apply(n,i):xf:f,g=Math.max(l,0)+p,y=n.range(),m=y[0]+.5,x=y[y.length-1]+.5,b=(n.bandwidth?c:xf)(n.copy()),w=e.selection?e.selection():e,M=w.selectAll(".domain").data([null]),T=w.selectAll(".tick").data(u,n).order(),S=T.exit(),N=T.enter().append("g").attr("class","tick"),k=T.select("line"),E=T.select("text");M=M.merge(M.enter().insert("path",".tick").attr("class","domain").attr("stroke","#000")),T=T.merge(N),k=k.merge(N.append("line").attr("stroke","#000").attr(r+"2",d*l).attr(v+"1",.5).attr(v+"2",.5)),E=E.merge(N.append("text").attr("fill","#000").attr(r,d*g).attr(v,.5).attr("dy",t===bf?"0em":t===Mf?"0.71em":"0.32em")),e!==w&&(M=M.transition(e),T=T.transition(e),k=k.transition(e),E=E.transition(e),S=S.transition(e).attr("opacity",Sf).attr("transform",function(t){return isFinite(t=b(t))?_(t):this.getAttribute("transform")}),N.attr("opacity",Sf).attr("transform",function(t){var n=this.parentNode.__axis;return _(n&&isFinite(n=n(t))?n:b(t))})),S.remove(),M.attr("d",t===Tf||t==wf?"M"+d*h+","+m+"H0.5V"+x+"H"+d*h:"M"+m+","+d*h+"V0.5H"+x+"V"+d*h),T.attr("opacity",1).attr("transform",function(t){return _(b(t))}),k.attr(r+"2",d*l),E.attr(r,d*g).text(a),w.filter(s).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===wf?"start":t===Tf?"end":"middle"),w.each(function(){this.__axis=b})}var r,i=[],o=null,f=null,l=6,h=6,p=3,d=t===bf||t===Tf?-1:1,v=t===Tf||t===wf?(r="x","y"):(r="y","x"),_=t===bf||t===Mf?u:a;return e.scale=function(t){return arguments.length?(n=t,e):n},e.ticks=function(){return i=mf.call(arguments),e},e.tickArguments=function(t){return arguments.length?(i=null==t?[]:mf.call(t),e):i.slice()},e.tickValues=function(t){return arguments.length?(o=null==t?null:mf.call(t),e):o&&o.slice()},e.tickFormat=function(t){return arguments.length?(f=t,e):f},e.tickSize=function(t){return arguments.length?(l=h=+t,e):l},e.tickSizeInner=function(t){return arguments.length?(l=+t,e):l},e.tickSizeOuter=function(t){return arguments.length?(h=+t,e):h},e.tickPadding=function(t){return arguments.length?(p=+t,e):p},e}function l(t){return f(bf,t)}function h(t){return f(wf,t)}function p(t){return f(Mf,t)}function d(t){return f(Tf,t)}function v(){for(var t,n=0,e=arguments.length,r={};n<e;++n){if(!(t=arguments[n]+"")||t in r)throw new Error("illegal type: "+t);r[t]=[]}return new _(r)}function _(t){this._=t}function g(t,n){return t.trim().split(/^|\s+/).map(function(t){var e="",r=t.indexOf(".");if(r>=0&&(e=t.slice(r+1),t=t.slice(0,r)),t&&!n.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:e}})}function y(t,n){for(var e,r=0,i=t.length;r<i;++r)if((e=t[r]).name===n)return e.value}function m(t,n,e){for(var r=0,i=t.length;r<i;++r)if(t[r].name===n){t[r]=Nf,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=e&&t.push({name:n,value:e}),t}function x(t){return function(){var n=this.ownerDocument,e=this.namespaceURI;return e===kf&&n.documentElement.namespaceURI===kf?n.createElement(t):n.createElementNS(e,t)}}function b(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function w(){return new M}function M(){this._="@"+(++zf).toString(36)}function T(t,n,e){return t=S(t,n,e),function(n){var e=n.relatedTarget;e&&(e===this||8&e.compareDocumentPosition(this))||t.call(this,n)}}function S(n,e,r){return function(i){var o=t.event;t.event=i;try{n.call(this,this.__data__,e,r)}finally{t.event=o}}}function N(t){return t.trim().split(/^|\s+/).map(function(t){var n="",e=t.indexOf(".");return e>=0&&(n=t.slice(e+1),t=t.slice(0,e)),{type:t,name:n}})}function k(t){return function(){var n=this.__on;if(n){for(var e,r=0,i=-1,o=n.length;r<o;++r)e=n[r],t.type&&e.type!==t.type||e.name!==t.name?n[++i]=e:this.removeEventListener(e.type,e.listener,e.capture);++i?n.length=i:delete this.__on}}}function E(t,n,e){var r=Uf.hasOwnProperty(t.type)?T:S;return function(i,o,u){var a,c=this.__on,s=r(n,o,u);if(c)for(var f=0,l=c.length;f<l;++f)if((a=c[f]).type===t.type&&a.name===t.name)return this.removeEventListener(a.type,a.listener,a.capture),this.addEventListener(a.type,a.listener=s,a.capture=e),void(a.value=n);this.addEventListener(t.type,s,e),a={type:t.type,name:t.name,value:n,listener:s,capture:e},c?c.push(a):this.__on=[a]}}function A(n,e,r,i){var o=t.event;n.sourceEvent=t.event,t.event=n;try{return e.apply(r,i)}finally{t.event=o}}function C(){}function z(){return[]}function P(t,n){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=n}function L(t,n,e,r,i,o){for(var u,a=0,c=n.length,s=o.length;a<s;++a)(u=n[a])?(u.__data__=o[a],r[a]=u):e[a]=new P(t,o[a]);for(;a<c;++a)(u=n[a])&&(i[a]=u)}function R(t,n,e,r,i,o,u){var a,c,s,f={},l=n.length,h=o.length,p=new Array(l);for(a=0;a<l;++a)(c=n[a])&&(p[a]=s=Zf+u.call(c,c.__data__,a,n),s in f?i[a]=c:f[s]=c);for(a=0;a<h;++a)s=Zf+u.call(t,o[a],a,o),(c=f[s])?(r[a]=c,c.__data__=o[a],f[s]=null):e[a]=new P(t,o[a]);for(a=0;a<l;++a)(c=n[a])&&f[p[a]]===c&&(i[a]=c)}function q(t,n){return t<n?-1:t>n?1:t>=n?0:NaN}function U(t){return function(){this.removeAttribute(t)}}function D(t){return function(){this.removeAttributeNS(t.space,t.local)}}function O(t,n){return function(){this.setAttribute(t,n)}}function F(t,n){return function(){this.setAttributeNS(t.space,t.local,n)}}function I(t,n){return function(){var e=n.apply(this,arguments);null==e?this.removeAttribute(t):this.setAttribute(t,e)}}function Y(t,n){return function(){var e=n.apply(this,arguments);null==e?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}}function B(t){return function(){this.style.removeProperty(t)}}function j(t,n,e){return function(){this.style.setProperty(t,n,e)}}function H(t,n,e){return function(){var r=n.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,e)}}function X(t){return function(){delete this[t]}}function V(t,n){return function(){this[t]=n}}function $(t,n){return function(){var e=n.apply(this,arguments);null==e?delete this[t]:this[t]=e}}function W(t){return t.trim().split(/^|\s+/)}function Z(t){return t.classList||new G(t)}function G(t){this._node=t,this._names=W(t.getAttribute("class")||"")}function J(t,n){for(var e=Z(t),r=-1,i=n.length;++r<i;)e.add(n[r])}function Q(t,n){for(var e=Z(t),r=-1,i=n.length;++r<i;)e.remove(n[r])}function K(t){return function(){J(this,t)}}function tt(t){return function(){Q(this,t)}}function nt(t,n){return function(){(n.apply(this,arguments)?J:Q)(this,t)}}function et(){this.textContent=""}function rt(t){return function(){this.textContent=t}}function it(t){return function(){var n=t.apply(this,arguments);this.textContent=null==n?"":n}}function ot(){this.innerHTML=""}function ut(t){return function(){this.innerHTML=t}}function at(t){return function(){var n=t.apply(this,arguments);this.innerHTML=null==n?"":n}}function ct(){this.nextSibling&&this.parentNode.appendChild(this)}function st(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function ft(){return null}function lt(){var t=this.parentNode;t&&t.removeChild(this)}function ht(t,n,e){var r=cl(t),i=r.CustomEvent;i?i=new i(n,e):(i=r.document.createEvent("Event"),e?(i.initEvent(n,e.bubbles,e.cancelable),i.detail=e.detail):i.initEvent(n,!1,!1)),t.dispatchEvent(i)}function pt(t,n){return function(){return ht(this,t,n)}}function dt(t,n){return function(){return ht(this,t,n.apply(this,arguments))}}function vt(t,n){this._groups=t,this._parents=n}function _t(){return new vt([[document.documentElement]],bl)}function gt(){t.event.stopImmediatePropagation()}function yt(t,n){var e=t.document.documentElement,r=wl(t).on("dragstart.drag",null);n&&(r.on("click.drag",Nl,!0),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in e?r.on("selectstart.drag",null):(e.style.MozUserSelect=e.__noselect,delete e.__noselect)}function mt(t,n,e,r,i,o,u,a,c,s){this.target=t,this.type=n,this.subject=e,this.identifier=r,this.active=i,this.x=o,this.y=u,this.dx=a,this.dy=c,this._=s}function xt(){return!t.event.button}function bt(){return this.parentNode}function wt(n){return null==n?{x:t.event.x,y:t.event.y}:n}function Mt(t,n){var e=Object.create(t.prototype);for(var r in n)e[r]=n[r];return e}function Tt(){}function St(t){var n;return t=(t+"").trim().toLowerCase(),(n=Rl.exec(t))?(n=parseInt(n[1],16),new Ct(n>>8&15|n>>4&240,n>>4&15|240&n,(15&n)<<4|15&n,1)):(n=ql.exec(t))?Nt(parseInt(n[1],16)):(n=Ul.exec(t))?new Ct(n[1],n[2],n[3],1):(n=Dl.exec(t))?new Ct(255*n[1]/100,255*n[2]/100,255*n[3]/100,1):(n=Ol.exec(t))?kt(n[1],n[2],n[3],n[4]):(n=Fl.exec(t))?kt(255*n[1]/100,255*n[2]/100,255*n[3]/100,n[4]):(n=Il.exec(t))?zt(n[1],n[2]/100,n[3]/100,1):(n=Yl.exec(t))?zt(n[1],n[2]/100,n[3]/100,n[4]):Bl.hasOwnProperty(t)?Nt(Bl[t]):"transparent"===t?new Ct(NaN,NaN,NaN,0):null}function Nt(t){return new Ct(t>>16&255,t>>8&255,255&t,1)}function kt(t,n,e,r){return r<=0&&(t=n=e=NaN),new Ct(t,n,e,r)}function Et(t){return t instanceof Tt||(t=St(t)),t?(t=t.rgb(),new Ct(t.r,t.g,t.b,t.opacity)):new Ct}function At(t,n,e,r){return 1===arguments.length?Et(t):new Ct(t,n,e,null==r?1:r)}function Ct(t,n,e,r){this.r=+t,this.g=+n,this.b=+e,this.opacity=+r}function zt(t,n,e,r){return r<=0?t=n=e=NaN:e<=0||e>=1?t=n=NaN:n<=0&&(t=NaN),new Rt(t,n,e,r)}function Pt(t){if(t instanceof Rt)return new Rt(t.h,t.s,t.l,t.opacity);if(t instanceof Tt||(t=St(t)),!t)return new Rt;if(t instanceof Rt)return t;t=t.rgb();var n=t.r/255,e=t.g/255,r=t.b/255,i=Math.min(n,e,r),o=Math.max(n,e,r),u=NaN,a=o-i,c=(o+i)/2;return a?(u=n===o?(e-r)/a+6*(e<r):e===o?(r-n)/a+2:(n-e)/a+4,a/=c<.5?o+i:2-o-i,u*=60):a=c>0&&c<1?0:u,new Rt(u,a,c,t.opacity)}function Lt(t,n,e,r){return 1===arguments.length?Pt(t):new Rt(t,n,e,null==r?1:r)}function Rt(t,n,e,r){this.h=+t,this.s=+n,this.l=+e,this.opacity=+r}function qt(t,n,e){return 255*(t<60?n+(e-n)*t/60:t<180?e:t<240?n+(e-n)*(240-t)/60:n)}function Ut(t){if(t instanceof Ot)return new Ot(t.l,t.a,t.b,t.opacity);if(t instanceof Xt){var n=t.h*jl;return new Ot(t.l,Math.cos(n)*t.c,Math.sin(n)*t.c,t.opacity)}t instanceof Ct||(t=Et(t));var e=Bt(t.r),r=Bt(t.g),i=Bt(t.b),o=Ft((.4124564*e+.3575761*r+.1804375*i)/Xl),u=Ft((.2126729*e+.7151522*r+.072175*i)/Vl);return new Ot(116*u-16,500*(o-u),200*(u-Ft((.0193339*e+.119192*r+.9503041*i)/$l)),t.opacity)}function Dt(t,n,e,r){return 1===arguments.length?Ut(t):new Ot(t,n,e,null==r?1:r)}function Ot(t,n,e,r){this.l=+t,this.a=+n,this.b=+e,this.opacity=+r}function Ft(t){return t>Jl?Math.pow(t,1/3):t/Gl+Wl}function It(t){return t>Zl?t*t*t:Gl*(t-Wl)}function Yt(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Bt(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function jt(t){if(t instanceof Xt)return new Xt(t.h,t.c,t.l,t.opacity);t instanceof Ot||(t=Ut(t));var n=Math.atan2(t.b,t.a)*Hl;return new Xt(n<0?n+360:n,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function Ht(t,n,e,r){return 1===arguments.length?jt(t):new Xt(t,n,e,null==r?1:r)}function Xt(t,n,e,r){this.h=+t,this.c=+n,this.l=+e,this.opacity=+r}function Vt(t){if(t instanceof Wt)return new Wt(t.h,t.s,t.l,t.opacity);t instanceof Ct||(t=Et(t));var n=t.r/255,e=t.g/255,r=t.b/255,i=(oh*r+rh*n-ih*e)/(oh+rh-ih),o=r-i,u=(eh*(e-i)-th*o)/nh,a=Math.sqrt(u*u+o*o)/(eh*i*(1-i)),c=a?Math.atan2(u,o)*Hl-120:NaN;return new Wt(c<0?c+360:c,a,i,t.opacity)}function $t(t,n,e,r){return 1===arguments.length?Vt(t):new Wt(t,n,e,null==r?1:r)}function Wt(t,n,e,r){this.h=+t,this.s=+n,this.l=+e,this.opacity=+r}function Zt(t,n,e,r,i){var o=t*t,u=o*t;return((1-3*t+3*o-u)*n+(4-6*o+3*u)*e+(1+3*t+3*o-3*u)*r+u*i)/6}function Gt(t,n){return function(e){return t+e*n}}function Jt(t,n,e){return t=Math.pow(t,e),n=Math.pow(n,e)-t,e=1/e,function(r){return Math.pow(t+r*n,e)}}function Qt(t,n){var e=n-t;return e?Gt(t,e>180||e<-180?e-360*Math.round(e/360):e):dh(isNaN(t)?n:t)}function Kt(t){return 1==(t=+t)?tn:function(n,e){return e-n?Jt(n,e,t):dh(isNaN(n)?e:n)}}function tn(t,n){var e=n-t;return e?Gt(t,e):dh(isNaN(t)?n:t)}function nn(t){return function(n){var e,r,i=n.length,o=new Array(i),u=new Array(i),a=new Array(i);for(e=0;e<i;++e)r=At(n[e]),o[e]=r.r||0,u[e]=r.g||0,a[e]=r.b||0;return o=t(o),u=t(u),a=t(a),r.opacity=1,function(t){return r.r=o(t),r.g=u(t),r.b=a(t),r+""}}}function en(t){return function(){return t}}function rn(t){return function(n){return t(n)+""}}function on(t){return"none"===t?Eh:(uh||(uh=document.createElement("DIV"),ah=document.documentElement,ch=document.defaultView),uh.style.transform=t,t=ch.getComputedStyle(ah.appendChild(uh),null).getPropertyValue("transform"),ah.removeChild(uh),t=t.slice(7,-1).split(","),Ah(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5]))}function un(t){return null==t?Eh:(sh||(sh=document.createElementNS("http://www.w3.org/2000/svg","g")),sh.setAttribute("transform",t),(t=sh.transform.baseVal.consolidate())?(t=t.matrix,Ah(t.a,t.b,t.c,t.d,t.e,t.f)):Eh)}function an(t,n,e,r){function i(t){return t.length?t.pop()+" ":""}function o(t,r,i,o,u,a){if(t!==i||r!==o){var c=u.push("translate(",null,n,null,e);a.push({i:c-4,x:xh(t,i)},{i:c-2,x:xh(r,o)})}else(i||o)&&u.push("translate("+i+n+o+e)}function u(t,n,e,o){t!==n?(t-n>180?n+=360:n-t>180&&(t+=360),o.push({i:e.push(i(e)+"rotate(",null,r)-2,x:xh(t,n)})):n&&e.push(i(e)+"rotate("+n+r)}function a(t,n,e,o){t!==n?o.push({i:e.push(i(e)+"skewX(",null,r)-2,x:xh(t,n)}):n&&e.push(i(e)+"skewX("+n+r)}function c(t,n,e,r,o,u){if(t!==e||n!==r){var a=o.push(i(o)+"scale(",null,",",null,")");u.push({i:a-4,x:xh(t,e)},{i:a-2,x:xh(n,r)})}else 1===e&&1===r||o.push(i(o)+"scale("+e+","+r+")")}return function(n,e){var r=[],i=[];return n=t(n),e=t(e),o(n.translateX,n.translateY,e.translateX,e.translateY,r,i),u(n.rotate,e.rotate,r,i),a(n.skewX,e.skewX,r,i),c(n.scaleX,n.scaleY,e.scaleX,e.scaleY,r,i),n=e=null,function(t){for(var n,e=-1,o=i.length;++e<o;)r[(n=i[e]).i]=n.x(t);return r.join("")}}}function cn(t){return((t=Math.exp(t))+1/t)/2}function sn(t){return((t=Math.exp(t))-1/t)/2}function fn(t){return((t=Math.exp(2*t))-1)/(t+1)}function ln(t){return function(n,e){var r=t((n=Lt(n)).h,(e=Lt(e)).h),i=tn(n.s,e.s),o=tn(n.l,e.l),u=tn(n.opacity,e.opacity);return function(t){return n.h=r(t),n.s=i(t),n.l=o(t),n.opacity=u(t),n+""}}}function hn(t,n){var e=tn((t=Dt(t)).l,(n=Dt(n)).l),r=tn(t.a,n.a),i=tn(t.b,n.b),o=tn(t.opacity,n.opacity);return function(n){return t.l=e(n),t.a=r(n),t.b=i(n),t.opacity=o(n),t+""}}function pn(t){return function(n,e){var r=t((n=Ht(n)).h,(e=Ht(e)).h),i=tn(n.c,e.c),o=tn(n.l,e.l),u=tn(n.opacity,e.opacity);return function(t){return n.h=r(t),n.c=i(t),n.l=o(t),n.opacity=u(t),n+""}}}function dn(t){return function n(e){function r(n,r){var i=t((n=$t(n)).h,(r=$t(r)).h),o=tn(n.s,r.s),u=tn(n.l,r.l),a=tn(n.opacity,r.opacity);return function(t){return n.h=i(t),n.s=o(t),n.l=u(Math.pow(t,e)),n.opacity=a(t),n+""}}return e=+e,r.gamma=n,r}(1)}function vn(){return Vh||(Zh(_n),Vh=Wh.now()+$h)}function _n(){Vh=0}function gn(){this._call=this._time=this._next=null}function yn(t,n,e){var r=new gn;return r.restart(t,n,e),r}function mn(){vn(),++Yh;for(var t,n=fh;n;)(t=Vh-n._time)>=0&&n._call.call(null,t),n=n._next;--Yh}function xn(){Vh=(Xh=Wh.now())+$h,Yh=Bh=0;try{mn()}finally{Yh=0,wn(),Vh=0}}function bn(){var t=Wh.now(),n=t-Xh;n>Hh&&($h-=n,Xh=t)}function wn(){for(var t,n,e=fh,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:fh=n);lh=t,Mn(r)}function Mn(t){if(!Yh){Bh&&(Bh=clearTimeout(Bh));var n=t-Vh;n>24?(t<1/0&&(Bh=setTimeout(xn,n)),jh&&(jh=clearInterval(jh))):(jh||(Xh=Vh,jh=setInterval(bn,Hh)),Yh=1,Zh(xn))}}function Tn(t,n){var e=t.__transition;if(!e||!(e=e[n])||e.state>tp)throw new Error("too late");return e}function Sn(t,n){var e=t.__transition;if(!e||!(e=e[n])||e.state>ep)throw new Error("too late");return e}function Nn(t,n){var e=t.__transition;if(!e||!(e=e[n]))throw new Error("too late");return e}function kn(t,n,e){function r(t){e.state=np,e.timer.restart(i,e.delay,e.time),e.delay<=t&&i(t-e.delay)}function i(r){var s,f,l,h;if(e.state!==np)return u();for(s in c)if(h=c[s],h.name===e.name){if(h.state===rp)return Gh(i);h.state===ip?(h.state=up,h.timer.stop(),h.on.call("interrupt",t,t.__data__,h.index,h.group),delete c[s]):+s<n&&(h.state=up,h.timer.stop(),delete c[s])}if(Gh(function(){e.state===rp&&(e.state=ip,e.timer.restart(o,e.delay,e.time),o(r))}),e.state=ep,e.on.call("start",t,t.__data__,e.index,e.group),e.state===ep){for(e.state=rp,a=new Array(l=e.tween.length),s=0,f=-1;s<l;++s)(h=e.tween[s].value.call(t,t.__data__,e.index,e.group))&&(a[++f]=h);a.length=f+1}}function o(n){for(var r=n<e.duration?e.ease.call(null,n/e.duration):(e.timer.restart(u),e.state=op,1),i=-1,o=a.length;++i<o;)a[i].call(null,r);e.state===op&&(e.on.call("end",t,t.__data__,e.index,e.group),u())}function u(){e.state=up,e.timer.stop(),delete c[n];for(var r in c)return;delete t.__transition}var a,c=t.__transition;c[n]=e,e.timer=yn(r,0,e.time)}function En(t,n){var e,r;return function(){var i=Sn(this,t),o=i.tween;if(o!==e){r=e=o;for(var u=0,a=r.length;u<a;++u)if(r[u].name===n){r=r.slice(),r.splice(u,1);break}}i.tween=r}}function An(t,n,e){var r,i;if("function"!=typeof e)throw new Error;return function(){var o=Sn(this,t),u=o.tween;if(u!==r){i=(r=u).slice();for(var a={name:n,value:e},c=0,s=i.length;c<s;++c)if(i[c].name===n){i[c]=a;break}c===s&&i.push(a)}o.tween=i}}function Cn(t,n,e){var r=t._id;return t.each(function(){var t=Sn(this,r);(t.value||(t.value={}))[n]=e.apply(this,arguments)}),function(t){return Nn(t,r).value[n]}}function zn(t){return function(){this.removeAttribute(t)}}function Pn(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Ln(t,n,e){var r,i;return function(){var o=this.getAttribute(t);return o===e?null:o===r?i:i=n(r=o,e)}}function Rn(t,n,e){var r,i;return function(){var o=this.getAttributeNS(t.space,t.local);return o===e?null:o===r?i:i=n(r=o,e)}}function qn(t,n,e){var r,i,o;return function(){var u,a=e(this);return null==a?void this.removeAttribute(t):(u=this.getAttribute(t),u===a?null:u===r&&a===i?o:o=n(r=u,i=a))}}function Un(t,n,e){var r,i,o;return function(){var u,a=e(this);return null==a?void this.removeAttributeNS(t.space,t.local):(u=this.getAttributeNS(t.space,t.local),u===a?null:u===r&&a===i?o:o=n(r=u,i=a))}}function Dn(t,n){function e(){var e=this,r=n.apply(e,arguments);return r&&function(n){e.setAttributeNS(t.space,t.local,r(n))}}return e._value=n,e}function On(t,n){function e(){var e=this,r=n.apply(e,arguments);return r&&function(n){e.setAttribute(t,r(n))}}return e._value=n,e}function Fn(t,n){return function(){Tn(this,t).delay=+n.apply(this,arguments)}}function In(t,n){return n=+n,function(){Tn(this,t).delay=n}}function Yn(t,n){return function(){Sn(this,t).duration=+n.apply(this,arguments)}}function Bn(t,n){return n=+n,function(){Sn(this,t).duration=n}}function jn(t,n){if("function"!=typeof n)throw new Error;return function(){Sn(this,t).ease=n}}function Hn(t){return(t+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||"start"===t})}function Xn(t,n,e){var r,i,o=Hn(n)?Tn:Sn;return function(){var u=o(this,t),a=u.on;a!==r&&(i=(r=a).copy()).on(n,e),u.on=i}}function Vn(t){return function(){var n=this.parentNode;for(var e in this.__transition)if(+e!==t)return;n&&n.removeChild(this)}}function $n(t,n){var e,r,i;return function(){var o=cl(this).getComputedStyle(this,null),u=o.getPropertyValue(t),a=(this.style.removeProperty(t),o.getPropertyValue(t));return u===a?null:u===e&&a===r?i:i=n(e=u,r=a)}}function Wn(t){return function(){this.style.removeProperty(t)}}function Zn(t,n,e){var r,i;return function(){var o=cl(this).getComputedStyle(this,null).getPropertyValue(t);return o===e?null:o===r?i:i=n(r=o,e)}}function Gn(t,n,e){var r,i,o;return function(){var u=cl(this).getComputedStyle(this,null),a=u.getPropertyValue(t),c=e(this);return null==c&&(this.style.removeProperty(t),c=u.getPropertyValue(t)),a===c?null:a===r&&c===i?o:o=n(r=a,i=c)}}function Jn(t,n,e){function r(){var r=this,i=n.apply(r,arguments);return i&&function(n){r.style.setProperty(t,i(n),e)}}return r._value=n,r}function Qn(t){return function(){this.textContent=t}}function Kn(t){return function(){var n=t(this);this.textContent=null==n?"":n}}function te(t,n,e,r){this._groups=t,this._parents=n,this._name=e,this._id=r}function ne(t){return _t().transition(t)}function ee(){return++Ap}function re(t){return+t}function ie(t){return t*t}function oe(t){return t*(2-t)}function ue(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}function ae(t){return t*t*t}function ce(t){return--t*t*t+1}function se(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}function fe(t){return 1-Math.cos(t*qp)}function le(t){return Math.sin(t*qp)}function he(t){return(1-Math.cos(Rp*t))/2}function pe(t){return Math.pow(2,10*t-10)}function de(t){return 1-Math.pow(2,-10*t)}function ve(t){return((t*=2)<=1?Math.pow(2,10*t-10):2-Math.pow(2,10-10*t))/2}function _e(t){return 1-Math.sqrt(1-t*t)}function ge(t){return Math.sqrt(1- --t*t)}function ye(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2}function me(t){return 1-xe(1-t)}function xe(t){return(t=+t)<Up?Xp*t*t:t<Op?Xp*(t-=Dp)*t+Fp:t<Yp?Xp*(t-=Ip)*t+Bp:Xp*(t-=jp)*t+Hp}function be(t){return((t*=2)<=1?1-xe(1-t):xe(t-1)+1)/2}function we(t,n){for(var e;!(e=t.__transition)||!(e=e[n]);)if(!(t=t.parentNode))return Kp.time=vn(),Kp;return e}function Me(){t.event.stopImmediatePropagation()}function Te(t){return{type:t}}function Se(){return!t.event.button}function Ne(){var t=this.ownerSVGElement||this;return[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function ke(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function Ee(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}function Ae(t){var n=t.__brush;return n?n.dim.output(n.selection):null}function Ce(){return Pe(fd)}function ze(){return Pe(ld)}function Pe(n){function e(t){var e=t.property("__brush",a).selectAll(".overlay").data([Te("overlay")]);e.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",pd.overlay).merge(e).each(function(){var t=ke(this).extent;wl(this).attr("x",t[0][0]).attr("y",t[0][1]).attr("width",t[1][0]-t[0][0]).attr("height",t[1][1]-t[0][1])}),t.selectAll(".selection").data([Te("selection")]).enter().append("rect").attr("class","selection").attr("cursor",pd.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var i=t.selectAll(".handle").data(n.handles,function(t){return t.type});i.exit().remove(),i.enter().append("rect").attr("class",function(t){return"handle handle--"+t.type}).attr("cursor",function(t){return pd[t.type]}),t.each(r).attr("fill","none").attr("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush touchstart.brush",u)}function r(){var t=wl(this),n=ke(this).selection;n?(t.selectAll(".selection").style("display",null).attr("x",n[0][0]).attr("y",n[0][1]).attr("width",n[1][0]-n[0][0]).attr("height",n[1][1]-n[0][1]),t.selectAll(".handle").style("display",null).attr("x",function(t){return"e"===t.type[t.type.length-1]?n[1][0]-h/2:n[0][0]-h/2}).attr("y",function(t){return"s"===t.type[0]?n[1][1]-h/2:n[0][1]-h/2}).attr("width",function(t){return"n"===t.type||"s"===t.type?n[1][0]-n[0][0]+h:h}).attr("height",function(t){return"e"===t.type||"w"===t.type?n[1][1]-n[0][1]+h:h})):t.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function i(t,n){return t.__brush.emitter||new o(t,n)}function o(t,n){this.that=t,this.args=n,this.state=t.__brush,this.active=0}function u(){function e(){var t=If(T);!U||w||M||(Math.abs(t[0]-O[0])>Math.abs(t[1]-O[1])?M=!0:w=!0),O=t,b=!0,od(),o()}function o(){var t;switch(m=O[0]-D[0],x=O[1]-D[1],N){case ad:case ud:k&&(m=Math.max(P-l,Math.min(R-v,m)),h=l+m,_=v+m),E&&(x=Math.max(L-p,Math.min(q-g,x)),d=p+x,y=g+x);break;case cd:k<0?(m=Math.max(P-l,Math.min(R-l,m)),h=l+m,_=v):k>0&&(m=Math.max(P-v,Math.min(R-v,m)),h=l,_=v+m),E<0?(x=Math.max(L-p,Math.min(q-p,x)),d=p+x,y=g):E>0&&(x=Math.max(L-g,Math.min(q-g,x)),d=p,y=g+x);break;case sd:k&&(h=Math.max(P,Math.min(R,l-m*k)),_=Math.max(P,Math.min(R,v+m*k))),E&&(d=Math.max(L,Math.min(q,p-x*E)),y=Math.max(L,Math.min(q,g+x*E)))}_<h&&(k*=-1,t=l,l=v,v=t,t=h,h=_,_=t,S in dd&&Y.attr("cursor",pd[S=dd[S]])),y<d&&(E*=-1,t=p,p=g,g=t,t=d,d=y,y=t,S in vd&&Y.attr("cursor",pd[S=vd[S]])),A.selection&&(z=A.selection),w&&(h=z[0][0],_=z[1][0]),M&&(d=z[0][1],y=z[1][1]),z[0][0]===h&&z[0][1]===d&&z[1][0]===_&&z[1][1]===y||(A.selection=[[h,d],[_,y]],r.call(T),F.brush())}function u(){if(Me(),t.event.touches){if(t.event.touches.length)return;c&&clearTimeout(c),c=setTimeout(function(){c=null},500),I.on("touchmove.brush touchend.brush touchcancel.brush",null)}else yt(t.event.view,b),B.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);I.attr("pointer-events","all"),Y.attr("cursor",pd.overlay),A.selection&&(z=A.selection),Ee(z)&&(A.selection=null,r.call(T)),F.end()}function a(){switch(t.event.keyCode){case 16:U=k&&E;break;case 18:N===cd&&(k&&(v=_-m*k,l=h+m*k),E&&(g=y-x*E,p=d+x*E),N=sd,o());break;case 32:N!==cd&&N!==sd||(k<0?v=_-m:k>0&&(l=h-m),E<0?g=y-x:E>0&&(p=d-x),N=ad,Y.attr("cursor",pd.selection),o());break;default:return}od()}function s(){switch(t.event.keyCode){case 16:U&&(w=M=U=!1,o());break;case 18:N===sd&&(k<0?v=_:k>0&&(l=h),E<0?g=y:E>0&&(p=d),N=cd,o());break;case 32:N===ad&&(t.event.altKey?(k&&(v=_-m*k,l=h+m*k),E&&(g=y-x*E,p=d+x*E),N=sd):(k<0?v=_:k>0&&(l=h),E<0?g=y:E>0&&(p=d),N=cd),Y.attr("cursor",pd[S]),o());break;default:return}od()}if(t.event.touches){if(t.event.changedTouches.length<t.event.touches.length)return od()}else if(c)return;if(f.apply(this,arguments)){var l,h,p,d,v,_,g,y,m,x,b,w,M,T=this,S=t.event.target.__data__.type,N="selection"===(t.event.metaKey?S="overlay":S)?ud:t.event.altKey?sd:cd,k=n===ld?null:_d[S],E=n===fd?null:gd[S],A=ke(T),C=A.extent,z=A.selection,P=C[0][0],L=C[0][1],R=C[1][0],q=C[1][1],U=k&&E&&t.event.shiftKey,D=If(T),O=D,F=i(T,arguments).beforestart();"overlay"===S?A.selection=z=[[l=n===ld?P:D[0],p=n===fd?L:D[1]],[v=n===ld?R:l,g=n===fd?q:p]]:(l=z[0][0],p=z[0][1],v=z[1][0],g=z[1][1]),h=l,d=p,_=v,y=g;var I=wl(T).attr("pointer-events","none"),Y=I.selectAll(".overlay").attr("cursor",pd[S]);if(t.event.touches)I.on("touchmove.brush",e,!0).on("touchend.brush touchcancel.brush",u,!0);else{var B=wl(t.event.view).on("keydown.brush",a,!0).on("keyup.brush",s,!0).on("mousemove.brush",e,!0).on("mouseup.brush",u,!0);kl(t.event.view)}Me(),cp(T),r.call(T),F.start()}}function a(){var t=this.__brush||{selection:null};return t.extent=s.apply(this,arguments),t.dim=n,t}var c,s=Ne,f=Se,l=v(e,"start","brush","end"),h=6;return e.move=function(t,e){t.selection?t.on("start.brush",function(){i(this,arguments).beforestart().start()}).on("interrupt.brush end.brush",function(){i(this,arguments).end()}).tween("brush",function(){function t(t){u.selection=1===t&&Ee(s)?null:f(t),r.call(o),a.brush()}var o=this,u=o.__brush,a=i(o,arguments),c=u.selection,s=n.input("function"==typeof e?e.apply(this,arguments):e,u.extent),f=Sh(c,s);return c&&s?t:t(1)}):t.each(function(){var t=this,o=arguments,u=t.__brush,a=n.input("function"==typeof e?e.apply(t,o):e,u.extent),c=i(t,o).beforestart();cp(t),u.selection=null==a||Ee(a)?null:a,r.call(t),c.start().brush().end()})},o.prototype={beforestart:function(){return 1==++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(){return this.starting&&(this.starting=!1,this.emit("start")),this},brush:function(){return this.emit("brush"),this},end:function(){return 0==--this.active&&(delete this.state.emitter,this.emit("end")),this},emit:function(t){A(new id(e,t,n.output(this.state.selection)),l.apply,l,[t,this.that,this.args])}},e.extent=function(t){return arguments.length?(s="function"==typeof t?t:rd([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),e):s},e.filter=function(t){return arguments.length?(f="function"==typeof t?t:rd(!!t),e):f},e.handleSize=function(t){return arguments.length?(h=+t,e):h},e.on=function(){var t=l.on.apply(l,arguments);return t===l?e:t},e}function Le(t){return function(n,e){return t(n.source.value+n.target.value,e.source.value+e.target.value)}}function Re(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function qe(){return new Re}function Ue(t){return t.source}function De(t){return t.target}function Oe(t){return t.radius}function Fe(t){return t.startAngle}function Ie(t){return t.endAngle}function Ye(){}function Be(t,n){var e=new Ye;if(t instanceof Ye)t.each(function(t,n){e.set(n,t)});else if(Array.isArray(t)){var r,i=-1,o=t.length;if(null==n)for(;++i<o;)e.set(i,t[i]);else for(;++i<o;)e.set(n(r=t[i],i,t),r)}else if(t)for(var u in t)e.set(u,t[u]);return e}function je(){return{}}function He(t,n,e){t[n]=e}function Xe(){return Be()}function Ve(t,n,e){t.set(n,e)}function $e(){}function We(t,n){var e=new $e;if(t instanceof $e)t.each(function(t){e.add(t)});else if(t){var r=-1,i=t.length;if(null==n)for(;++r<i;)e.add(t[r]);else for(;++r<i;)e.add(n(t[r],r,t))}return e}function Ze(t){return new Function("d","return {"+t.map(function(t,n){return JSON.stringify(t)+": d["+n+"]"}).join(",")+"}")}function Ge(t,n){var e=Ze(t);return function(r,i){return n(e(r),i,t)}}function Je(t){var n=Object.create(null),e=[];return t.forEach(function(t){for(var r in t)r in n||e.push(n[r]=r)}),e}function Qe(t,n,e,r){if(isNaN(n)||isNaN(e))return t;var i,o,u,a,c,s,f,l,h,p=t._root,d={data:r},v=t._x0,_=t._y0,g=t._x1,y=t._y1;if(!p)return t._root=d,t;for(;p.length;)if((s=n>=(o=(v+g)/2))?v=o:g=o,(f=e>=(u=(_+y)/2))?_=u:y=u,i=p,!(p=p[l=f<<1|s]))return i[l]=d,t;if(a=+t._x.call(null,p.data),c=+t._y.call(null,p.data),n===a&&e===c)return d.next=p,i?i[l]=d:t._root=d,t;do{i=i?i[l]=new Array(4):t._root=new Array(4),(s=n>=(o=(v+g)/2))?v=o:g=o,(f=e>=(u=(_+y)/2))?_=u:y=u}while((l=f<<1|s)==(h=(c>=u)<<1|a>=o));return i[h]=p,i[l]=d,t}function Ke(t){var n,e,r,i,o=t.length,u=new Array(o),a=new Array(o),c=1/0,s=1/0,f=-1/0,l=-1/0;for(e=0;e<o;++e)isNaN(r=+this._x.call(null,n=t[e]))||isNaN(i=+this._y.call(null,n))||(u[e]=r,a[e]=i,r<c&&(c=r),r>f&&(f=r),i<s&&(s=i),i>l&&(l=i));for(f<c&&(c=this._x0,f=this._x1),l<s&&(s=this._y0,l=this._y1),this.cover(c,s).cover(f,l),e=0;e<o;++e)Qe(this,u[e],a[e],t[e]);return this}function tr(t){for(var n=0,e=t.length;n<e;++n)this.remove(t[n]);return this}function nr(t){return t[0]}function er(t){return t[1]}function rr(t,n,e){var r=new ir(null==n?nr:n,null==e?er:e,NaN,NaN,NaN,NaN);return null==t?r:r.addAll(t)}function ir(t,n,e,r,i,o){this._x=t,this._y=n,this._x0=e,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function or(t){for(var n={data:t.data},e=n;t=t.next;)e=e.next={data:t.data};return n}function ur(t){return t.x+t.vx}function ar(t){return t.y+t.vy}function cr(t){return t.index}function sr(t,n){var e=t.get(n);if(!e)throw new Error("missing: "+n);return e}function fr(t){return t.x}function lr(t){return t.y}function hr(t){return new pr(t)}function pr(t){if(!(n=Ev.exec(t)))throw new Error("invalid format: "+t);var n,e=n[1]||" ",r=n[2]||">",i=n[3]||"-",o=n[4]||"",u=!!n[5],a=n[6]&&+n[6],c=!!n[7],s=n[8]&&+n[8].slice(1),f=n[9]||"";"n"===f?(c=!0,
f="g"):kv[f]||(f=""),(u||"0"===e&&"="===r)&&(u=!0,e="0",r="="),this.fill=e,this.align=r,this.sign=i,this.symbol=o,this.zero=u,this.width=a,this.comma=c,this.precision=s,this.type=f}function dr(n){return Av=Pv(n),t.format=Av.format,t.formatPrefix=Av.formatPrefix,Av}function vr(){this.reset()}function _r(t,n,e){var r=t.s=n+e,i=r-n,o=r-i;t.t=n-o+(e-i)}function gr(t){return t>1?0:t<-1?__:Math.acos(t)}function yr(t){return t>1?g_:t<-1?-g_:Math.asin(t)}function mr(t){return(t=C_(t/2))*t}function xr(){}function br(t,n){t&&q_.hasOwnProperty(t.type)&&q_[t.type](t,n)}function wr(t,n,e){var r,i=-1,o=t.length-e;for(n.lineStart();++i<o;)r=t[i],n.point(r[0],r[1],r[2]);n.lineEnd()}function Mr(t,n){var e=-1,r=t.length;for(n.polygonStart();++e<r;)wr(t[e],n,1);n.polygonEnd()}function Tr(){F_.point=Nr}function Sr(){kr(Dv,Ov)}function Nr(t,n){F_.point=kr,Dv=t,Ov=n,t*=b_,n*=b_,Fv=t,Iv=S_(n=n/2+y_),Yv=C_(n)}function kr(t,n){t*=b_,n*=b_,n=n/2+y_;var e=t-Fv,r=e>=0?1:-1,i=r*e,o=S_(n),u=C_(n),a=Yv*u,c=Iv*o+a*S_(i),s=a*r*C_(i);D_.add(T_(s,c)),Fv=t,Iv=o,Yv=u}function Er(t){return[T_(t[1],t[0]),yr(t[2])]}function Ar(t){var n=t[0],e=t[1],r=S_(e);return[r*S_(n),r*C_(n),C_(e)]}function Cr(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}function zr(t,n){return[t[1]*n[2]-t[2]*n[1],t[2]*n[0]-t[0]*n[2],t[0]*n[1]-t[1]*n[0]]}function Pr(t,n){t[0]+=n[0],t[1]+=n[1],t[2]+=n[2]}function Lr(t,n){return[t[0]*n,t[1]*n,t[2]*n]}function Rr(t){var n=P_(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=n,t[1]/=n,t[2]/=n}function qr(t,n){Gv.push(Jv=[Bv=t,Hv=t]),n<jv&&(jv=n),n>Xv&&(Xv=n)}function Ur(t,n){var e=Ar([t*b_,n*b_]);if(Zv){var r=zr(Zv,e),i=[r[1],-r[0],0],o=zr(i,r);Rr(o),o=Er(o);var u,a=t-Vv,c=a>0?1:-1,s=o[0]*x_*c,f=w_(a)>180;f^(c*Vv<s&&s<c*t)?(u=o[1]*x_)>Xv&&(Xv=u):(s=(s+360)%360-180,f^(c*Vv<s&&s<c*t)?(u=-o[1]*x_)<jv&&(jv=u):(n<jv&&(jv=n),n>Xv&&(Xv=n))),f?t<Vv?Br(Bv,t)>Br(Bv,Hv)&&(Hv=t):Br(t,Hv)>Br(Bv,Hv)&&(Bv=t):Hv>=Bv?(t<Bv&&(Bv=t),t>Hv&&(Hv=t)):t>Vv?Br(Bv,t)>Br(Bv,Hv)&&(Hv=t):Br(t,Hv)>Br(Bv,Hv)&&(Bv=t)}else Gv.push(Jv=[Bv=t,Hv=t]);n<jv&&(jv=n),n>Xv&&(Xv=n),Zv=e,Vv=t}function Dr(){B_.point=Ur}function Or(){Jv[0]=Bv,Jv[1]=Hv,B_.point=qr,Zv=null}function Fr(t,n){if(Zv){var e=t-Vv;Y_.add(w_(e)>180?e+(e>0?360:-360):e)}else $v=t,Wv=n;F_.point(t,n),Ur(t,n)}function Ir(){F_.lineStart()}function Yr(){Fr($v,Wv),F_.lineEnd(),w_(Y_)>v_&&(Bv=-(Hv=180)),Jv[0]=Bv,Jv[1]=Hv,Zv=null}function Br(t,n){return(n-=t)<0?n+360:n}function jr(t,n){return t[0]-n[0]}function Hr(t,n){return t[0]<=t[1]?t[0]<=n&&n<=t[1]:n<t[0]||t[1]<n}function Xr(t,n){t*=b_,n*=b_;var e=S_(n);Vr(e*S_(t),e*C_(t),C_(n))}function Vr(t,n,e){++Qv,t_+=(t-t_)/Qv,n_+=(n-n_)/Qv,e_+=(e-e_)/Qv}function $r(){H_.point=Wr}function Wr(t,n){t*=b_,n*=b_;var e=S_(n);l_=e*S_(t),h_=e*C_(t),p_=C_(n),H_.point=Zr,Vr(l_,h_,p_)}function Zr(t,n){t*=b_,n*=b_;var e=S_(n),r=e*S_(t),i=e*C_(t),o=C_(n),u=T_(P_((u=h_*o-p_*i)*u+(u=p_*r-l_*o)*u+(u=l_*i-h_*r)*u),l_*r+h_*i+p_*o);Kv+=u,r_+=u*(l_+(l_=r)),i_+=u*(h_+(h_=i)),o_+=u*(p_+(p_=o)),Vr(l_,h_,p_)}function Gr(){H_.point=Xr}function Jr(){H_.point=Kr}function Qr(){ti(s_,f_),H_.point=Xr}function Kr(t,n){s_=t,f_=n,t*=b_,n*=b_,H_.point=ti;var e=S_(n);l_=e*S_(t),h_=e*C_(t),p_=C_(n),Vr(l_,h_,p_)}function ti(t,n){t*=b_,n*=b_;var e=S_(n),r=e*S_(t),i=e*C_(t),o=C_(n),u=h_*o-p_*i,a=p_*r-l_*o,c=l_*i-h_*r,s=P_(u*u+a*a+c*c),f=yr(s),l=s&&-f/s;u_+=l*u,a_+=l*a,c_+=l*c,Kv+=f,r_+=f*(l_+(l_=r)),i_+=f*(h_+(h_=i)),o_+=f*(p_+(p_=o)),Vr(l_,h_,p_)}function ni(t,n){return[t>__?t-m_:t<-__?t+m_:t,n]}function ei(t,n,e){return(t%=m_)?n||e?$_(ii(t),oi(n,e)):ii(t):n||e?oi(n,e):ni}function ri(t){return function(n,e){return n+=t,[n>__?n-m_:n<-__?n+m_:n,e]}}function ii(t){var n=ri(t);return n.invert=ri(-t),n}function oi(t,n){function e(t,n){var e=S_(n),a=S_(t)*e,c=C_(t)*e,s=C_(n),f=s*r+a*i;return[T_(c*o-f*u,a*r-s*i),yr(f*o+c*u)]}var r=S_(t),i=C_(t),o=S_(n),u=C_(n);return e.invert=function(t,n){var e=S_(n),a=S_(t)*e,c=C_(t)*e,s=C_(n),f=s*o-c*u;return[T_(c*o+s*u,a*r+f*i),yr(f*r-a*i)]},e}function ui(t,n,e,r,i,o){if(e){var u=S_(n),a=C_(n),c=r*e;null==i?(i=n+r*m_,o=n-c/2):(i=ai(u,i),o=ai(u,o),(r>0?i<o:i>o)&&(i+=r*m_));for(var s,f=i;r>0?f>o:f<o;f-=c)s=Er([u,-a*S_(f),-a*C_(f)]),t.point(s[0],s[1])}}function ai(t,n){n=Ar(n),n[0]-=t,Rr(n);var e=gr(-n[1]);return((-n[2]<0?-e:e)+m_-v_)%m_}function ci(t,n,e,r){this.x=t,this.z=n,this.o=e,this.e=r,this.v=!1,this.n=this.p=null}function si(t){if(n=t.length){for(var n,e,r=0,i=t[0];++r<n;)i.n=e=t[r],e.p=i,i=e;i.n=e=t[0],e.p=i}}function fi(t,n,e,r){function i(i,o){return t<=i&&i<=e&&n<=o&&o<=r}function o(i,o,a,s){var f=0,l=0;if(null==i||(f=u(i,a))!==(l=u(o,a))||c(i,o)<0^a>0)do{s.point(0===f||3===f?t:e,f>1?r:n)}while((f=(f+a+4)%4)!==l);else s.point(o[0],o[1])}function u(r,i){return w_(r[0]-t)<v_?i>0?0:3:w_(r[0]-e)<v_?i>0?2:1:w_(r[1]-n)<v_?i>0?1:0:i>0?3:2}function a(t,n){return c(t.x,n.x)}function c(t,n){var e=u(t,1),r=u(n,1);return e!==r?e-r:0===e?n[1]-t[1]:1===e?t[0]-n[0]:2===e?t[1]-n[1]:n[0]-t[0]}return function(u){function c(t,n){i(t,n)&&N.point(t,n)}function s(){for(var n=0,e=0,i=_.length;e<i;++e)for(var o,u,a=_[e],c=1,s=a.length,f=a[0],l=f[0],h=f[1];c<s;++c)o=l,u=h,f=a[c],l=f[0],h=f[1],u<=r?h>r&&(l-o)*(r-u)>(h-u)*(t-o)&&++n:h<=r&&(l-o)*(r-u)<(h-u)*(t-o)&&--n;return n}function f(){N=k,v=[],_=[],S=!0}function l(){var t=s(),n=S&&t,e=(v=lf(v)).length;(n||e)&&(u.polygonStart(),n&&(u.lineStart(),o(null,null,1,u),u.lineEnd()),e&&fg(v,a,t,o,u),u.polygonEnd()),N=u,v=_=g=null}function h(){E.point=d,_&&_.push(g=[]),T=!0,M=!1,b=w=NaN}function p(){v&&(d(y,m),x&&M&&k.rejoin(),v.push(k.result())),E.point=c,M&&N.lineEnd()}function d(o,u){var a=i(o,u);if(_&&g.push([o,u]),T)y=o,m=u,x=a,T=!1,a&&(N.lineStart(),N.point(o,u));else if(a&&M)N.point(o,u);else{var c=[b=Math.max(hg,Math.min(lg,b)),w=Math.max(hg,Math.min(lg,w))],s=[o=Math.max(hg,Math.min(lg,o)),u=Math.max(hg,Math.min(lg,u))];cg(c,s,t,n,e,r)?(M||(N.lineStart(),N.point(c[0],c[1])),N.point(s[0],s[1]),a||N.lineEnd(),S=!1):a&&(N.lineStart(),N.point(o,u),S=!1)}b=o,w=u,M=a}var v,_,g,y,m,x,b,w,M,T,S,N=u,k=ag(),E={point:c,lineStart:h,lineEnd:p,polygonStart:f,polygonEnd:l};return E}}function li(){gg.point=pi,gg.lineEnd=hi}function hi(){gg.point=gg.lineEnd=xr}function pi(t,n){t*=b_,n*=b_,W_=t,Z_=C_(n),G_=S_(n),gg.point=di}function di(t,n){t*=b_,n*=b_;var e=C_(n),r=S_(n),i=w_(t-W_),o=S_(i),u=C_(i),a=r*u,c=G_*e-Z_*r*o,s=Z_*e+G_*r*o;_g.add(T_(P_(a*a+c*c),s)),W_=t,Z_=e,G_=r}function vi(t,n){return!(!t||!Mg.hasOwnProperty(t.type))&&Mg[t.type](t,n)}function _i(t,n){return 0===bg(t,n)}function gi(t,n){var e=bg(t[0],t[1]);return bg(t[0],n)+bg(n,t[1])<=e+v_}function yi(t,n){return!!vg(t.map(mi),xi(n))}function mi(t){return t=t.map(xi),t.pop(),t}function xi(t){return[t[0]*b_,t[1]*b_]}function bi(t,n,e){var r=Js(t,n-v_,e).concat(n);return function(t){return r.map(function(n){return[t,n]})}}function wi(t,n,e){var r=Js(t,n-v_,e).concat(n);return function(t){return r.map(function(n){return[n,t]})}}function Mi(){function t(){return{type:"MultiLineString",coordinates:n()}}function n(){return Js(N_(o/_)*_,i,_).map(h).concat(Js(N_(s/g)*g,c,g).map(p)).concat(Js(N_(r/d)*d,e,d).filter(function(t){return w_(t%_)>v_}).map(f)).concat(Js(N_(a/v)*v,u,v).filter(function(t){return w_(t%g)>v_}).map(l))}var e,r,i,o,u,a,c,s,f,l,h,p,d=10,v=d,_=90,g=360,y=2.5;return t.lines=function(){return n().map(function(t){return{type:"LineString",coordinates:t}})},t.outline=function(){return{type:"Polygon",coordinates:[h(o).concat(p(c).slice(1),h(i).reverse().slice(1),p(s).reverse().slice(1))]}},t.extent=function(n){return arguments.length?t.extentMajor(n).extentMinor(n):t.extentMinor()},t.extentMajor=function(n){return arguments.length?(o=+n[0][0],i=+n[1][0],s=+n[0][1],c=+n[1][1],o>i&&(n=o,o=i,i=n),s>c&&(n=s,s=c,c=n),t.precision(y)):[[o,s],[i,c]]},t.extentMinor=function(n){return arguments.length?(r=+n[0][0],e=+n[1][0],a=+n[0][1],u=+n[1][1],r>e&&(n=r,r=e,e=n),a>u&&(n=a,a=u,u=n),t.precision(y)):[[r,a],[e,u]]},t.step=function(n){return arguments.length?t.stepMajor(n).stepMinor(n):t.stepMinor()},t.stepMajor=function(n){return arguments.length?(_=+n[0],g=+n[1],t):[_,g]},t.stepMinor=function(n){return arguments.length?(d=+n[0],v=+n[1],t):[d,v]},t.precision=function(n){return arguments.length?(y=+n,f=bi(a,u,90),l=wi(r,e,y),h=bi(s,c,90),p=wi(o,i,y),t):y},t.extentMajor([[-180,-90+v_],[180,90-v_]]).extentMinor([[-180,-80-v_],[180,80+v_]])}function Ti(){return Mi()()}function Si(){Ag.point=Ni}function Ni(t,n){Ag.point=ki,J_=K_=t,Q_=tg=n}function ki(t,n){Eg.add(tg*t-K_*n),K_=t,tg=n}function Ei(){ki(J_,Q_)}function Ai(t,n){t<Cg&&(Cg=t),t>Pg&&(Pg=t),n<zg&&(zg=n),n>Lg&&(Lg=n)}function Ci(t,n){qg+=t,Ug+=n,++Dg}function zi(){Hg.point=Pi}function Pi(t,n){Hg.point=Li,Ci(rg=t,ig=n)}function Li(t,n){var e=t-rg,r=n-ig,i=P_(e*e+r*r);Og+=i*(rg+t)/2,Fg+=i*(ig+n)/2,Ig+=i,Ci(rg=t,ig=n)}function Ri(){Hg.point=Ci}function qi(){Hg.point=Di}function Ui(){Oi(ng,eg)}function Di(t,n){Hg.point=Oi,Ci(ng=rg=t,eg=ig=n)}function Oi(t,n){var e=t-rg,r=n-ig,i=P_(e*e+r*r);Og+=i*(rg+t)/2,Fg+=i*(ig+n)/2,Ig+=i,i=ig*t-rg*n,Yg+=i*(rg+t),Bg+=i*(ig+n),jg+=3*i,Ci(rg=t,ig=n)}function Fi(t){this._context=t}function Ii(t,n){Jg.point=Yi,Vg=Wg=t,$g=Zg=n}function Yi(t,n){Wg-=t,Zg-=n,Gg.add(P_(Wg*Wg+Zg*Zg)),Wg=t,Zg=n}function Bi(){this._string=[]}function ji(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function Hi(t){return t.length>1}function Xi(t,n){return((t=t.x)[0]<0?t[1]-g_-v_:g_-t[1])-((n=n.x)[0]<0?n[1]-g_-v_:g_-n[1])}function Vi(t){var n,e=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),n=1},point:function(o,u){var a=o>0?__:-__,c=w_(o-e);w_(c-__)<v_?(t.point(e,r=(r+u)/2>0?g_:-g_),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(a,r),t.point(o,r),n=0):i!==a&&c>=__&&(w_(e-i)<v_&&(e-=i*v_),w_(o-a)<v_&&(o-=a*v_),r=$i(e,r,o,u),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(a,r),n=0),t.point(e=o,r=u),i=a},lineEnd:function(){t.lineEnd(),e=r=NaN},clean:function(){return 2-n}}}function $i(t,n,e,r){var i,o,u=C_(t-e);return w_(u)>v_?M_((C_(n)*(o=S_(r))*C_(e)-C_(r)*(i=S_(n))*C_(t))/(i*o*u)):(n+r)/2}function Wi(t,n,e,r){var i;if(null==t)i=e*g_,r.point(-__,i),r.point(0,i),r.point(__,i),r.point(__,0),r.point(__,-i),r.point(0,-i),r.point(-__,-i),r.point(-__,0),r.point(-__,i);else if(w_(t[0]-n[0])>v_){var o=t[0]<n[0]?__:-__;i=e*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(n[0],n[1])}function Zi(t){return function(n){var e=new Gi;for(var r in t)e[r]=t[r];return e.stream=n,e}}function Gi(){}function Ji(t,n,e){var r=n[1][0]-n[0][0],i=n[1][1]-n[0][1],o=t.clipExtent&&t.clipExtent();t.scale(150).translate([0,0]),null!=o&&t.clipExtent(null),U_(e,t.stream(Rg));var u=Rg.result(),a=Math.min(r/(u[1][0]-u[0][0]),i/(u[1][1]-u[0][1])),c=+n[0][0]+(r-a*(u[1][0]+u[0][0]))/2,s=+n[0][1]+(i-a*(u[1][1]+u[0][1]))/2;return null!=o&&t.clipExtent(o),t.scale(150*a).translate([c,s])}function Qi(t,n,e){return Ji(t,[[0,0],n],e)}function Ki(t){return Zi({point:function(n,e){n=t(n,e),this.stream.point(n[0],n[1])}})}function to(t,n){function e(r,i,o,u,a,c,s,f,l,h,p,d,v,_){var g=s-r,y=f-i,m=g*g+y*y;if(m>4*n&&v--){var x=u+h,b=a+p,w=c+d,M=P_(x*x+b*b+w*w),T=yr(w/=M),S=w_(w_(w)-1)<v_||w_(o-l)<v_?(o+l)/2:T_(b,x),N=t(S,T),k=N[0],E=N[1],A=k-r,C=E-i,z=y*A-g*C;(z*z/m>n||w_((g*A+y*C)/m-.5)>.3||u*h+a*p+c*d<iy)&&(e(r,i,o,u,a,c,k,E,S,x/=M,b/=M,w,v,_),_.point(k,E),e(k,E,S,x,b,w,s,f,l,h,p,d,v,_))}}return function(n){function r(e,r){e=t(e,r),n.point(e[0],e[1])}function i(){g=NaN,w.point=o,n.lineStart()}function o(r,i){var o=Ar([r,i]),u=t(r,i);e(g,y,_,m,x,b,g=u[0],y=u[1],_=r,m=o[0],x=o[1],b=o[2],ry,n),n.point(g,y)}function u(){w.point=r,n.lineEnd()}function a(){i(),w.point=c,w.lineEnd=s}function c(t,n){o(f=t,n),l=g,h=y,p=m,d=x,v=b,w.point=o}function s(){e(g,y,_,m,x,b,l,h,f,p,d,v,ry,n),w.lineEnd=u,u()}var f,l,h,p,d,v,_,g,y,m,x,b,w={point:r,lineStart:i,lineEnd:u,polygonStart:function(){n.polygonStart(),w.lineStart=a},polygonEnd:function(){n.polygonEnd(),w.lineStart=i}};return w}}function no(t){return eo(function(){return t})()}function eo(t){function n(t){return t=f(t[0]*b_,t[1]*b_),[t[0]*_+a,c-t[1]*_]}function e(t){return(t=f.invert((t[0]-a)/_,(c-t[1])/_))&&[t[0]*x_,t[1]*x_]}function r(t,n){return t=u(t,n),[t[0]*_+a,c-t[1]*_]}function i(){f=$_(s=ei(b,w,M),u);var t=u(m,x);return a=g-t[0]*_,c=y+t[1]*_,o()}function o(){return d=v=null,n}var u,a,c,s,f,l,h,p,d,v,_=150,g=480,y=250,m=0,x=0,b=0,w=0,M=0,T=null,S=ty,N=null,k=Ng,E=.5,A=oy(r,E);return n.stream=function(t){return d&&v===t?d:d=uy(S(s,A(k(v=t))))},n.clipAngle=function(t){return arguments.length?(S=+t?ny(T=t*b_,6*b_):(T=null,ty),o()):T*x_},n.clipExtent=function(t){return arguments.length?(k=null==t?(N=l=h=p=null,Ng):fi(N=+t[0][0],l=+t[0][1],h=+t[1][0],p=+t[1][1]),o()):null==N?null:[[N,l],[h,p]]},n.scale=function(t){return arguments.length?(_=+t,i()):_},n.translate=function(t){return arguments.length?(g=+t[0],y=+t[1],i()):[g,y]},n.center=function(t){return arguments.length?(m=t[0]%360*b_,x=t[1]%360*b_,i()):[m*x_,x*x_]},n.rotate=function(t){return arguments.length?(b=t[0]%360*b_,w=t[1]%360*b_,M=t.length>2?t[2]%360*b_:0,i()):[b*x_,w*x_,M*x_]},n.precision=function(t){return arguments.length?(A=oy(r,E=t*t),o()):P_(E)},n.fitExtent=function(t,e){return Ji(n,t,e)},n.fitSize=function(t,e){return Qi(n,t,e)},function(){return u=t.apply(this,arguments),n.invert=u.invert&&e,i()}}function ro(t){var n=0,e=__/3,r=eo(t),i=r(n,e);return i.parallels=function(t){return arguments.length?r(n=t[0]*b_,e=t[1]*b_):[n*x_,e*x_]},i}function io(t){function n(t,n){return[t*e,C_(n)/e]}var e=S_(t);return n.invert=function(t,n){return[t/e,yr(n*e)]},n}function oo(t,n){function e(t,n){var e=P_(o-2*i*C_(n))/i;return[e*C_(t*=i),u-e*S_(t)]}var r=C_(t),i=(r+C_(n))/2;if(w_(i)<v_)return io(t);var o=1+r*(2*i-r),u=P_(o)/i;return e.invert=function(t,n){var e=u-n;return[T_(t,w_(e))/i*z_(e),yr((o-(t*t+e*e)*i*i)/(2*i))]},e}function uo(t){var n=t.length;return{point:function(e,r){for(var i=-1;++i<n;)t[i].point(e,r)},sphere:function(){for(var e=-1;++e<n;)t[e].sphere()},lineStart:function(){for(var e=-1;++e<n;)t[e].lineStart()},lineEnd:function(){for(var e=-1;++e<n;)t[e].lineEnd()},polygonStart:function(){for(var e=-1;++e<n;)t[e].polygonStart()},polygonEnd:function(){for(var e=-1;++e<n;)t[e].polygonEnd()}}}function ao(t){return function(n,e){var r=S_(n),i=S_(e),o=t(r*i);return[o*i*C_(n),o*C_(e)]}}function co(t){return function(n,e){var r=P_(n*n+e*e),i=t(r),o=C_(i),u=S_(i);return[T_(n*o,r*u),yr(r&&e*o/r)]}}function so(t,n){return[t,E_(L_((g_+n)/2))]}function fo(t){function n(){var n=__*a(),u=o(og(o.rotate()).invert([0,0]));return s(null==f?[[u[0]-n,u[1]-n],[u[0]+n,u[1]+n]]:t===so?[[Math.max(u[0]-n,f),e],[Math.min(u[0]+n,r),i]]:[[f,Math.max(u[1]-n,e)],[r,Math.min(u[1]+n,i)]])}var e,r,i,o=no(t),u=o.center,a=o.scale,c=o.translate,s=o.clipExtent,f=null;return o.scale=function(t){return arguments.length?(a(t),n()):a()},o.translate=function(t){return arguments.length?(c(t),n()):c()},o.center=function(t){return arguments.length?(u(t),n()):u()},o.clipExtent=function(t){return arguments.length?(null==t?f=e=r=i=null:(f=+t[0][0],e=+t[0][1],r=+t[1][0],i=+t[1][1]),n()):null==f?null:[[f,e],[r,i]]},n()}function lo(t){return L_((g_+t)/2)}function ho(t,n){function e(t,n){o>0?n<-g_+v_&&(n=-g_+v_):n>g_-v_&&(n=g_-v_);var e=o/A_(lo(n),i);return[e*C_(i*t),o-e*S_(i*t)]}var r=S_(t),i=t===n?C_(t):E_(r/S_(n))/E_(lo(n)/lo(t)),o=r*A_(lo(t),i)/i;return i?(e.invert=function(t,n){var e=o-n,r=z_(i)*P_(t*t+e*e);return[T_(t,w_(e))/i*z_(e),2*M_(A_(o/r,1/i))-g_]},e):so}function po(t,n){return[t,n]}function vo(t,n){function e(t,n){var e=o-n,r=i*t;return[e*C_(r),o-e*S_(r)]}var r=S_(t),i=t===n?C_(t):(r-S_(n))/(n-t),o=r/i+t;return w_(i)<v_?po:(e.invert=function(t,n){var e=o-n;return[T_(t,w_(e))/i*z_(e),o-z_(i)*P_(t*t+e*e)]},e)}function _o(t,n){var e=S_(n),r=S_(t)*e;return[e*C_(t)/r,C_(n)/r]}function go(t,n,e,r){return 1===t&&1===n&&0===e&&0===r?Ng:Zi({point:function(i,o){this.stream.point(i*t+e,o*n+r)}})}function yo(t,n){return[S_(n)*C_(t),C_(n)]}function mo(t,n){var e=S_(n),r=1+S_(t)*e;return[e*C_(t)/r,C_(n)/r]}function xo(t,n){return[E_(L_((g_+n)/2)),-t]}function bo(t,n){return t.parent===n.parent?1:2}function wo(t){return t.reduce(Mo,0)/t.length}function Mo(t,n){return t+n.x}function To(t){return 1+t.reduce(So,0)}function So(t,n){return Math.max(t,n.y)}function No(t){for(var n;n=t.children;)t=n[0];return t}function ko(t){for(var n;n=t.children;)t=n[n.length-1];return t}function Eo(t){var n=0,e=t.children,r=e&&e.length;if(r)for(;--r>=0;)n+=e[r].value;else n=1;t.value=n}function Ao(t,n){if(t===n)return t;var e=t.ancestors(),r=n.ancestors(),i=null;for(t=e.pop(),n=r.pop();t===n;)i=t,t=e.pop(),n=r.pop();return i}function Co(t,n){var e,r,i,o,u,a=new qo(t),c=+t.value&&(a.value=t.value),s=[a];for(null==n&&(n=Po);e=s.pop();)if(c&&(e.value=+e.data.value),(i=n(e.data))&&(u=i.length))for(e.children=new Array(u),o=u-1;o>=0;--o)s.push(r=e.children[o]=new qo(i[o])),r.parent=e,r.depth=e.depth+1;return a.eachBefore(Ro)}function zo(){return Co(this).eachBefore(Lo)}function Po(t){return t.children}function Lo(t){t.data=t.data.data}function Ro(t){var n=0;do{t.height=n}while((t=t.parent)&&t.height<++n)}function qo(t){this.data=t,this.depth=this.height=0,this.parent=null}function Uo(t){this._=t,this.next=null}function Do(t,n){var e=n.x-t.x,r=n.y-t.y,i=t.r-n.r;return i*i+1e-6>e*e+r*r}function Oo(t,n){var e,r,i,o=null,u=t.head;switch(n.length){case 1:e=Fo(n[0]);break;case 2:e=Io(n[0],n[1]);break;case 3:e=Yo(n[0],n[1],n[2])}for(;u;)i=u._,r=u.next,e&&Do(e,i)?o=u:(o?(t.tail=o,o.next=null):t.head=t.tail=null,n.push(i),e=Oo(t,n),n.pop(),t.head?(u.next=t.head,t.head=u):(u.next=null,t.head=t.tail=u),o=t.tail,o.next=r),u=r;return t.tail=o,e}function Fo(t){return{x:t.x,y:t.y,r:t.r}}function Io(t,n){var e=t.x,r=t.y,i=t.r,o=n.x,u=n.y,a=n.r,c=o-e,s=u-r,f=a-i,l=Math.sqrt(c*c+s*s);return{x:(e+o+c/l*f)/2,y:(r+u+s/l*f)/2,r:(l+i+a)/2}}function Yo(t,n,e){var r=t.x,i=t.y,o=t.r,u=n.x,a=n.y,c=n.r,s=e.x,f=e.y,l=e.r,h=2*(r-u),p=2*(i-a),d=2*(c-o),v=r*r+i*i-o*o-u*u-a*a+c*c,_=2*(r-s),g=2*(i-f),y=2*(l-o),m=r*r+i*i-o*o-s*s-f*f+l*l,x=_*p-h*g,b=(p*m-g*v)/x-r,w=(g*d-p*y)/x,M=(_*v-h*m)/x-i,T=(h*y-_*d)/x,S=w*w+T*T-1,N=2*(b*w+M*T+o),k=b*b+M*M-o*o,E=(-N-Math.sqrt(N*N-4*S*k))/(2*S);return{x:b+w*E+r,y:M+T*E+i,r:E}}function Bo(t,n,e){var r=t.x,i=t.y,o=n.r+e.r,u=t.r+e.r,a=n.x-r,c=n.y-i,s=a*a+c*c;if(s){var f=.5+((u*=u)-(o*=o))/(2*s),l=Math.sqrt(Math.max(0,2*o*(u+s)-(u-=s)*u-o*o))/(2*s);e.x=r+f*a+l*c,e.y=i+f*c-l*a}else e.x=r+u,e.y=i}function jo(t,n){var e=n.x-t.x,r=n.y-t.y,i=t.r+n.r;return i*i-1e-6>e*e+r*r}function Ho(t,n,e){var r=t._,i=t.next._,o=r.r+i.r,u=(r.x*i.r+i.x*r.r)/o-n,a=(r.y*i.r+i.y*r.r)/o-e;return u*u+a*a}function Xo(t){this._=t,this.next=null,this.previous=null}function Vo(t){if(!(i=t.length))return 0;var n,e,r,i;if(n=t[0],n.x=0,n.y=0,!(i>1))return n.r;if(e=t[1],n.x=-e.r,e.x=n.r,e.y=0,!(i>2))return n.r+e.r;Bo(e,n,r=t[2]);var o,u,a,c,s,f,l,h=n.r*n.r,p=e.r*e.r,d=r.r*r.r,v=h+p+d,_=h*n.x+p*e.x+d*r.x,g=h*n.y+p*e.y+d*r.y;n=new Xo(n),e=new Xo(e),r=new Xo(r),n.next=r.previous=e,e.next=n.previous=r,r.next=e.previous=n;t:for(a=3;a<i;++a){Bo(n._,e._,r=t[a]),r=new Xo(r),c=e.next,s=n.previous,f=e._.r,l=n._.r;do{if(f<=l){if(jo(c._,r._)){e=c,n.next=e,e.previous=n,--a;continue t}f+=c._.r,c=c.next}else{if(jo(s._,r._)){n=s,n.next=e,e.previous=n,--a;continue t}l+=s._.r,s=s.previous}}while(c!==s.next);for(r.previous=n,r.next=e,n.next=e.previous=e=r,v+=d=r._.r*r._.r,_+=d*r._.x,g+=d*r._.y,h=Ho(n,o=_/v,u=g/v);(r=r.next)!==e;)(d=Ho(r,o,u))<h&&(n=r,h=d);e=n.next}for(n=[e._],r=e;(r=r.next)!==e;)n.push(r._);for(r=Uy(n),a=0;a<i;++a)n=t[a],n.x-=r.x,n.y-=r.y;return r.r}function $o(t){return null==t?null:Wo(t)}function Wo(t){if("function"!=typeof t)throw new Error;return t}function Zo(){return 0}function Go(t){return Math.sqrt(t.value)}function Jo(t){return function(n){n.children||(n.r=Math.max(0,+t(n)||0))}}function Qo(t,n){return function(e){if(r=e.children){var r,i,o,u=r.length,a=t(e)*n||0;if(a)for(i=0;i<u;++i)r[i].r+=a;if(o=Vo(r),a)for(i=0;i<u;++i)r[i].r-=a;e.r=o+a}}}function Ko(t){return function(n){var e=n.parent;n.r*=t,e&&(n.x=e.x+t*n.x,n.y=e.y+t*n.y)}}function tu(t){return t.id}function nu(t){return t.parentId}function eu(t,n){return t.parent===n.parent?1:2}function ru(t){var n=t.children;return n?n[0]:t.t}function iu(t){var n=t.children;return n?n[n.length-1]:t.t}function ou(t,n,e){var r=e/(n.i-t.i);n.c-=r,n.s+=e,t.c+=r,n.z+=e,n.m+=e}function uu(t){for(var n,e=0,r=0,i=t.children,o=i.length;--o>=0;)n=i[o],n.z+=e,n.m+=e,e+=n.s+(r+=n.c)}function au(t,n,e){return t.a.parent===n.parent?t.a:e}function cu(t,n){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=n}function su(t){for(var n,e,r,i,o,u=new cu(t,0),a=[u];n=a.pop();)if(r=n._.children)for(n.children=new Array(o=r.length),i=o-1;i>=0;--i)a.push(e=n.children[i]=new cu(r[i],i)),e.parent=n;return(u.parent=new cu(null,0)).children=[u],u}function fu(t,n,e,r,i,o){for(var u,a,c,s,f,l,h,p,d,v,_,g=[],y=n.children,m=0,x=0,b=y.length,w=n.value;m<b;){c=i-e,s=o-r;do{f=y[x++].value}while(!f&&x<b);for(l=h=f,v=Math.max(s/c,c/s)/(w*t),_=f*f*v,d=Math.max(h/_,_/l);x<b;++x){if(f+=a=y[x].value,a<l&&(l=a),a>h&&(h=a),_=f*f*v,(p=Math.max(h/_,_/l))>d){f-=a;break}d=p}g.push(u={value:f,dice:c<s,children:y.slice(m,x)}),u.dice?Yy(u,e,r,i,w?r+=s*f/w:o):Wy(u,e,r,w?e+=c*f/w:i,o),w-=f,m=x}return g}function lu(t,n){return t[0]-n[0]||t[1]-n[1]}function hu(t){for(var n=t.length,e=[0,1],r=2,i=2;i<n;++i){for(;r>1&&rm(t[e[r-2]],t[e[r-1]],t[i])<=0;)--r;e[r++]=i}return e.slice(0,r)}function pu(t){if(!(t>=1))throw new Error;this._size=t,this._call=this._error=null,this._tasks=[],this._data=[],this._waiting=this._active=this._ended=this._start=0}function du(t){if(!t._start)try{vu(t)}catch(n){if(t._tasks[t._ended+t._active-1])gu(t,n);else if(!t._data)throw n}}function vu(t){for(;t._start=t._waiting&&t._active<t._size;){var n=t._ended+t._active,e=t._tasks[n],r=e.length-1,i=e[r];e[r]=_u(t,n),--t._waiting,++t._active,e=i.apply(null,e),t._tasks[n]&&(t._tasks[n]=e||cm)}}function _u(t,n){return function(e,r){t._tasks[n]&&(--t._active,++t._ended,t._tasks[n]=null,null==t._error&&(null!=e?gu(t,e):(t._data[n]=r,t._waiting?du(t):yu(t))))}}function gu(t,n){var e,r=t._tasks.length;for(t._error=n,t._data=void 0,t._waiting=NaN;--r>=0;)if((e=t._tasks[r])&&(t._tasks[r]=null,e.abort))try{e.abort()}catch(n){}t._active=NaN,yu(t)}function yu(t){if(!t._active&&t._call){var n=t._data;t._data=void 0,t._call(t._error,n)}}function mu(t){return new pu(arguments.length?+t:1/0)}function xu(t){return function(n,e){t(null==n?e:null)}}function bu(t){var n=t.responseType;return n&&"text"!==n?t.response:t.responseText}function wu(t,n){return function(e){return t(e.responseText,n)}}function Mu(t){function n(n){var o=n+"",u=e.get(o);if(!u){if(i!==km)return i;e.set(o,u=r.push(n))}return t[(u-1)%t.length]}var e=Be(),r=[],i=km;return t=null==t?[]:Nm.call(t),n.domain=function(t){if(!arguments.length)return r.slice();r=[],e=Be();for(var i,o,u=-1,a=t.length;++u<a;)e.has(o=(i=t[u])+"")||e.set(o,r.push(i));return n},n.range=function(e){return arguments.length?(t=Nm.call(e),n):t.slice()},n.unknown=function(t){return arguments.length?(i=t,n):i},n.copy=function(){return Mu().domain(r).range(t).unknown(i)},n}function Tu(){function t(){var t=i().length,r=u[1]<u[0],l=u[r-0],h=u[1-r];n=(h-l)/Math.max(1,t-c+2*s),a&&(n=Math.floor(n)),l+=(h-l-n*(t-c))*f,e=n*(1-c),a&&(l=Math.round(l),e=Math.round(e));var p=Js(t).map(function(t){return l+n*t});return o(r?p.reverse():p)}var n,e,r=Mu().unknown(void 0),i=r.domain,o=r.range,u=[0,1],a=!1,c=0,s=0,f=.5;return delete r.unknown,r.domain=function(n){return arguments.length?(i(n),t()):i()},r.range=function(n){return arguments.length?(u=[+n[0],+n[1]],t()):u.slice()},r.rangeRound=function(n){return u=[+n[0],+n[1]],a=!0,t()},r.bandwidth=function(){return e},r.step=function(){return n},r.round=function(n){return arguments.length?(a=!!n,t()):a},r.padding=function(n){return arguments.length?(c=s=Math.max(0,Math.min(1,n)),t()):c},r.paddingInner=function(n){return arguments.length?(c=Math.max(0,Math.min(1,n)),t()):c},r.paddingOuter=function(n){return arguments.length?(s=Math.max(0,Math.min(1,n)),t()):s},r.align=function(n){return arguments.length?(f=Math.max(0,Math.min(1,n)),t()):f},r.copy=function(){return Tu().domain(i()).range(u).round(a).paddingInner(c).paddingOuter(s).align(f)},t()}function Su(t){var n=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return Su(n())},t}function Nu(){return Su(Tu().paddingInner(1))}function ku(t,n){return(n-=t=+t)?function(e){return(e-t)/n}:Em(n)}function Eu(t){return function(n,e){var r=t(n=+n,e=+e);return function(t){return t<=n?0:t>=e?1:r(t)}}}function Au(t){return function(n,e){var r=t(n=+n,e=+e);return function(t){return t<=0?n:t>=1?e:r(t)}}}function Cu(t,n,e,r){var i=t[0],o=t[1],u=n[0],a=n[1];return o<i?(i=e(o,i),u=r(a,u)):(i=e(i,o),u=r(u,a)),function(t){return u(i(t))}}function zu(t,n,e,r){var i=Math.min(t.length,n.length)-1,o=new Array(i),u=new Array(i),a=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),n=n.slice().reverse());++a<i;)o[a]=e(t[a],t[a+1]),u[a]=r(n[a],n[a+1]);return function(n){var e=Ds(t,n,1,i)-1;return u[e](o[e](n))}}function Pu(t,n){return n.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp())}function Lu(t,n){function e(){return i=Math.min(a.length,c.length)>2?zu:Cu,o=u=null,r}function r(n){return(o||(o=i(a,c,f?Eu(t):t,s)))(+n)}var i,o,u,a=Cm,c=Cm,s=Sh,f=!1;return r.invert=function(t){return(u||(u=i(c,a,ku,f?Au(n):n)))(+t)},r.domain=function(t){return arguments.length?(a=Sm.call(t,Am),e()):a.slice()},r.range=function(t){return arguments.length?(c=Nm.call(t),e()):c.slice()},r.rangeRound=function(t){return c=Nm.call(t),s=Nh,e()},r.clamp=function(t){return arguments.length?(f=!!t,e()):f},r.interpolate=function(t){return arguments.length?(s=t,e()):s},e()}function Ru(t){var n=t.domain;return t.ticks=function(t){var e=n();return nf(e[0],e[e.length-1],null==t?10:t)},t.tickFormat=function(t,e){return zm(n(),t,e)},t.nice=function(e){var r=n(),o=r.length-1,u=null==e?10:e,a=r[0],c=r[o],s=i(a,c,u);return s&&(s=i(Math.floor(a/s)*s,Math.ceil(c/s)*s,u),r[0]=Math.floor(a/s)*s,r[o]=Math.ceil(c/s)*s,n(r)),t},t}function qu(){var t=Lu(ku,xh);return t.copy=function(){return Pu(t,qu())},Ru(t)}function Uu(){function t(t){return+t}var n=[0,1];return t.invert=t,t.domain=t.range=function(e){return arguments.length?(n=Sm.call(e,Am),t):n.slice()},t.copy=function(){return Uu().domain(n)},Ru(t)}function Du(t,n){return(n=Math.log(n/t))?function(e){return Math.log(e/t)/n}:Em(n)}function Ou(t,n){return t<0?function(e){return-Math.pow(-n,e)*Math.pow(-t,1-e)}:function(e){return Math.pow(n,e)*Math.pow(t,1-e)}}function Fu(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Iu(t){return 10===t?Fu:t===Math.E?Math.exp:function(n){return Math.pow(t,n)}}function Yu(t){return t===Math.E?Math.log:10===t&&Math.log10||2===t&&Math.log2||(t=Math.log(t),function(n){return Math.log(n)/t})}function Bu(t){return function(n){return-t(-n)}}function ju(){function n(){return o=Yu(i),u=Iu(i),r()[0]<0&&(o=Bu(o),u=Bu(u)),e}var e=Lu(Du,Ou).domain([1,10]),r=e.domain,i=10,o=Yu(10),u=Iu(10);return e.base=function(t){return arguments.length?(i=+t,n()):i},e.domain=function(t){return arguments.length?(r(t),n()):r()},e.ticks=function(t){var n,e=r(),a=e[0],c=e[e.length-1];(n=c<a)&&(h=a,a=c,c=h);var s,f,l,h=o(a),p=o(c),d=null==t?10:+t,v=[];if(!(i%1)&&p-h<d){if(h=Math.round(h)-1,p=Math.round(p)+1,a>0){for(;h<p;++h)for(f=1,s=u(h);f<i;++f)if(!((l=s*f)<a)){if(l>c)break;v.push(l)}}else for(;h<p;++h)for(f=i-1,s=u(h);f>=1;--f)if(!((l=s*f)<a)){if(l>c)break;v.push(l)}}else v=nf(h,p,Math.min(p-h,d)).map(u);return n?v.reverse():v},e.tickFormat=function(n,r){if(null==r&&(r=10===i?".0e":","),"function"!=typeof r&&(r=t.format(r)),n===1/0)return r;null==n&&(n=10);var a=Math.max(1,i*n/e.ticks().length);return function(t){var n=t/u(Math.round(o(t)));return n*i<i-.5&&(n*=i),n<=a?r(t):""}},e.nice=function(){return r(Pm(r(),{floor:function(t){return u(Math.floor(o(t)))},ceil:function(t){return u(Math.ceil(o(t)))}}))},e.copy=function(){return Pu(e,ju().base(i))},e}function Hu(t,n){return t<0?-Math.pow(-t,n):Math.pow(t,n)}function Xu(){function t(t,n){return(n=Hu(n,e)-(t=Hu(t,e)))?function(r){return(Hu(r,e)-t)/n}:Em(n)}function n(t,n){return n=Hu(n,e)-(t=Hu(t,e)),function(r){return Hu(t+n*r,1/e)}}var e=1,r=Lu(t,n),i=r.domain;return r.exponent=function(t){return arguments.length?(e=+t,i(i())):e},r.copy=function(){return Pu(r,Xu().exponent(e))},Ru(r)}function Vu(){return Xu().exponent(.5)}function $u(){function t(){var t=0,o=Math.max(1,r.length);for(i=new Array(o-1);++t<o;)i[t-1]=of(e,t/o);return n}function n(t){if(!isNaN(t=+t))return r[Ds(i,t)]}var e=[],r=[],i=[];return n.invertExtent=function(t){var n=r.indexOf(t);return n<0?[NaN,NaN]:[n>0?i[n-1]:e[0],n<i.length?i[n]:e[e.length-1]]},n.domain=function(n){if(!arguments.length)return e.slice();e=[];for(var r,i=0,o=n.length;i<o;++i)null==(r=n[i])||isNaN(r=+r)||e.push(r);return e.sort(Rs),t()},n.range=function(n){return arguments.length?(r=Nm.call(n),t()):r.slice()},n.quantiles=function(){return i.slice()},n.copy=function(){return $u().domain(e).range(r)},n}function Wu(){function t(t){if(t<=t)return u[Ds(o,t,0,i)]}function n(){var n=-1;for(o=new Array(i);++n<i;)o[n]=((n+1)*r-(n-i)*e)/(i+1);return t}var e=0,r=1,i=1,o=[.5],u=[0,1];return t.domain=function(t){return arguments.length?(e=+t[0],r=+t[1],n()):[e,r]},t.range=function(t){return arguments.length?(i=(u=Nm.call(t)).length-1,n()):u.slice()},t.invertExtent=function(t){var n=u.indexOf(t);return n<0?[NaN,NaN]:n<1?[e,o[0]]:n>=i?[o[i-1],r]:[o[n-1],o[n]]},t.copy=function(){return Wu().domain([e,r]).range(u)},Ru(t)}function Zu(){function t(t){if(t<=t)return e[Ds(n,t,0,r)]}var n=[.5],e=[0,1],r=1;return t.domain=function(i){return arguments.length?(n=Nm.call(i),r=Math.min(n.length,e.length-1),t):n.slice()},t.range=function(i){return arguments.length?(e=Nm.call(i),r=Math.min(n.length,e.length-1),t):e.slice()},t.invertExtent=function(t){var r=e.indexOf(t);return[n[r-1],n[r]]},t.copy=function(){return Zu().domain(n).range(e)},t}function Gu(t,n,e,r){function i(n){return t(n=new Date(+n)),n}return i.floor=i,i.ceil=function(e){return t(e=new Date(e-1)),n(e,1),t(e),e},i.round=function(t){var n=i(t),e=i.ceil(t);return t-n<e-t?n:e},i.offset=function(t,e){return n(t=new Date(+t),null==e?1:Math.floor(e)),t},i.range=function(e,r,o){var u=[];if(e=i.ceil(e),o=null==o?1:Math.floor(o),!(e<r&&o>0))return u;do{u.push(new Date(+e))}while(n(e,o),t(e),e<r);return u},i.filter=function(e){return Gu(function(n){if(n>=n)for(;t(n),!e(n);)n.setTime(n-1)},function(t,r){if(t>=t)for(;--r>=0;)for(;n(t,1),!e(t););})},e&&(i.count=function(n,r){return Lm.setTime(+n),Rm.setTime(+r),t(Lm),t(Rm),Math.floor(e(Lm,Rm))},i.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?i.filter(r?function(n){return r(n)%t==0}:function(n){return i.count(0,n)%t==0}):i:null}),i}function Ju(t){return Gu(function(n){n.setDate(n.getDate()-(n.getDay()+7-t)%7),n.setHours(0,0,0,0)},function(t,n){t.setDate(t.getDate()+7*n)},function(t,n){return(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Dm)/Om})}function Qu(t){return Gu(function(n){n.setUTCDate(n.getUTCDate()-(n.getUTCDay()+7-t)%7),n.setUTCHours(0,0,0,0)},function(t,n){t.setUTCDate(t.getUTCDate()+7*n)},function(t,n){return(n-t)/Om})}function Ku(t){if(0<=t.y&&t.y<100){var n=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return n.setFullYear(t.y),n}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function ta(t){if(0<=t.y&&t.y<100){var n=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return n.setUTCFullYear(t.y),n}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function na(t){return{y:t,m:0,d:1,H:0,M:0,S:0,L:0}}function ea(t){function n(t,n){return function(e){var r,i,o,u=[],a=-1,c=0,s=t.length;for(e instanceof Date||(e=new Date(+e));++a<s;)37===t.charCodeAt(a)&&(u.push(t.slice(c,a)),null!=(i=Ux[r=t.charAt(++a)])?r=t.charAt(++a):i="e"===r?" ":"0",(o=n[r])&&(r=o(e,i)),u.push(r),c=a+1);return u.push(t.slice(c,a)),u.join("")}}function e(t,n){return function(e){var i=na(1900)
;if(r(i,t,e+="",0)!=e.length)return null;if("p"in i&&(i.H=i.H%12+12*i.p),"W"in i||"U"in i){"w"in i||(i.w="W"in i?1:0);var o="Z"in i?ta(na(i.y)).getUTCDay():n(na(i.y)).getDay();i.m=0,i.d="W"in i?(i.w+6)%7+7*i.W-(o+5)%7:i.w+7*i.U-(o+6)%7}return"Z"in i?(i.H+=i.Z/100|0,i.M+=i.Z%100,ta(i)):n(i)}}function r(t,n,e,r){for(var i,o,u=0,a=n.length,c=e.length;u<a;){if(r>=c)return-1;if(37===(i=n.charCodeAt(u++))){if(i=n.charAt(u++),!(o=B[i in Ux?n.charAt(u++):i])||(r=o(t,e,r))<0)return-1}else if(i!=e.charCodeAt(r++))return-1}return r}function i(t,n,e){var r=C.exec(n.slice(e));return r?(t.p=z[r[0].toLowerCase()],e+r[0].length):-1}function o(t,n,e){var r=R.exec(n.slice(e));return r?(t.w=q[r[0].toLowerCase()],e+r[0].length):-1}function u(t,n,e){var r=P.exec(n.slice(e));return r?(t.w=L[r[0].toLowerCase()],e+r[0].length):-1}function a(t,n,e){var r=O.exec(n.slice(e));return r?(t.m=F[r[0].toLowerCase()],e+r[0].length):-1}function c(t,n,e){var r=U.exec(n.slice(e));return r?(t.m=D[r[0].toLowerCase()],e+r[0].length):-1}function s(t,n,e){return r(t,w,n,e)}function f(t,n,e){return r(t,M,n,e)}function l(t,n,e){return r(t,T,n,e)}function h(t){return k[t.getDay()]}function p(t){return N[t.getDay()]}function d(t){return A[t.getMonth()]}function v(t){return E[t.getMonth()]}function _(t){return S[+(t.getHours()>=12)]}function g(t){return k[t.getUTCDay()]}function y(t){return N[t.getUTCDay()]}function m(t){return A[t.getUTCMonth()]}function x(t){return E[t.getUTCMonth()]}function b(t){return S[+(t.getUTCHours()>=12)]}var w=t.dateTime,M=t.date,T=t.time,S=t.periods,N=t.days,k=t.shortDays,E=t.months,A=t.shortMonths,C=oa(S),z=ua(S),P=oa(N),L=ua(N),R=oa(k),q=ua(k),U=oa(E),D=ua(E),O=oa(A),F=ua(A),I={a:h,A:p,b:d,B:v,c:null,d:ba,e:ba,H:wa,I:Ma,j:Ta,L:Sa,m:Na,M:ka,p:_,S:Ea,U:Aa,w:Ca,W:za,x:null,X:null,y:Pa,Y:La,Z:Ra,"%":Za},Y={a:g,A:y,b:m,B:x,c:null,d:qa,e:qa,H:Ua,I:Da,j:Oa,L:Fa,m:Ia,M:Ya,p:b,S:Ba,U:ja,w:Ha,W:Xa,x:null,X:null,y:Va,Y:$a,Z:Wa,"%":Za},B={a:o,A:u,b:a,B:c,c:s,d:da,e:da,H:_a,I:_a,j:va,L:ma,m:pa,M:ga,p:i,S:ya,U:ca,w:aa,W:sa,x:f,X:l,y:la,Y:fa,Z:ha,"%":xa};return I.x=n(M,I),I.X=n(T,I),I.c=n(w,I),Y.x=n(M,Y),Y.X=n(T,Y),Y.c=n(w,Y),{format:function(t){var e=n(t+="",I);return e.toString=function(){return t},e},parse:function(t){var n=e(t+="",Ku);return n.toString=function(){return t},n},utcFormat:function(t){var e=n(t+="",Y);return e.toString=function(){return t},e},utcParse:function(t){var n=e(t,ta);return n.toString=function(){return t},n}}}function ra(t,n,e){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<e?new Array(e-o+1).join(n)+i:i)}function ia(t){return t.replace(Fx,"\\$&")}function oa(t){return new RegExp("^(?:"+t.map(ia).join("|")+")","i")}function ua(t){for(var n={},e=-1,r=t.length;++e<r;)n[t[e].toLowerCase()]=e;return n}function aa(t,n,e){var r=Dx.exec(n.slice(e,e+1));return r?(t.w=+r[0],e+r[0].length):-1}function ca(t,n,e){var r=Dx.exec(n.slice(e));return r?(t.U=+r[0],e+r[0].length):-1}function sa(t,n,e){var r=Dx.exec(n.slice(e));return r?(t.W=+r[0],e+r[0].length):-1}function fa(t,n,e){var r=Dx.exec(n.slice(e,e+4));return r?(t.y=+r[0],e+r[0].length):-1}function la(t,n,e){var r=Dx.exec(n.slice(e,e+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),e+r[0].length):-1}function ha(t,n,e){var r=/^(Z)|([+-]\d\d)(?:\:?(\d\d))?/.exec(n.slice(e,e+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),e+r[0].length):-1}function pa(t,n,e){var r=Dx.exec(n.slice(e,e+2));return r?(t.m=r[0]-1,e+r[0].length):-1}function da(t,n,e){var r=Dx.exec(n.slice(e,e+2));return r?(t.d=+r[0],e+r[0].length):-1}function va(t,n,e){var r=Dx.exec(n.slice(e,e+3));return r?(t.m=0,t.d=+r[0],e+r[0].length):-1}function _a(t,n,e){var r=Dx.exec(n.slice(e,e+2));return r?(t.H=+r[0],e+r[0].length):-1}function ga(t,n,e){var r=Dx.exec(n.slice(e,e+2));return r?(t.M=+r[0],e+r[0].length):-1}function ya(t,n,e){var r=Dx.exec(n.slice(e,e+2));return r?(t.S=+r[0],e+r[0].length):-1}function ma(t,n,e){var r=Dx.exec(n.slice(e,e+3));return r?(t.L=+r[0],e+r[0].length):-1}function xa(t,n,e){var r=Ox.exec(n.slice(e,e+1));return r?e+r[0].length:-1}function ba(t,n){return ra(t.getDate(),n,2)}function wa(t,n){return ra(t.getHours(),n,2)}function Ma(t,n){return ra(t.getHours()%12||12,n,2)}function Ta(t,n){return ra(1+Xm.count(sx(t),t),n,3)}function Sa(t,n){return ra(t.getMilliseconds(),n,3)}function Na(t,n){return ra(t.getMonth()+1,n,2)}function ka(t,n){return ra(t.getMinutes(),n,2)}function Ea(t,n){return ra(t.getSeconds(),n,2)}function Aa(t,n){return ra($m.count(sx(t),t),n,2)}function Ca(t){return t.getDay()}function za(t,n){return ra(Wm.count(sx(t),t),n,2)}function Pa(t,n){return ra(t.getFullYear()%100,n,2)}function La(t,n){return ra(t.getFullYear()%1e4,n,4)}function Ra(t){var n=t.getTimezoneOffset();return(n>0?"-":(n*=-1,"+"))+ra(n/60|0,"0",2)+ra(n%60,"0",2)}function qa(t,n){return ra(t.getUTCDate(),n,2)}function Ua(t,n){return ra(t.getUTCHours(),n,2)}function Da(t,n){return ra(t.getUTCHours()%12||12,n,2)}function Oa(t,n){return ra(1+vx.count(Lx(t),t),n,3)}function Fa(t,n){return ra(t.getUTCMilliseconds(),n,3)}function Ia(t,n){return ra(t.getUTCMonth()+1,n,2)}function Ya(t,n){return ra(t.getUTCMinutes(),n,2)}function Ba(t,n){return ra(t.getUTCSeconds(),n,2)}function ja(t,n){return ra(gx.count(Lx(t),t),n,2)}function Ha(t){return t.getUTCDay()}function Xa(t,n){return ra(yx.count(Lx(t),t),n,2)}function Va(t,n){return ra(t.getUTCFullYear()%100,n,2)}function $a(t,n){return ra(t.getUTCFullYear()%1e4,n,4)}function Wa(){return"+0000"}function Za(){return"%"}function Ga(n){return Rx=ea(n),t.timeFormat=Rx.format,t.timeParse=Rx.parse,t.utcFormat=Rx.utcFormat,t.utcParse=Rx.utcParse,Rx}function Ja(t){return t.toISOString()}function Qa(t){var n=new Date(t);return isNaN(n)?null:n}function Ka(t){return new Date(t)}function tc(t){return t instanceof Date?+t:+new Date(+t)}function nc(t,n,e,r,o,u,a,c,s){function f(i){return(a(i)<i?v:u(i)<i?_:o(i)<i?g:r(i)<i?y:n(i)<i?e(i)<i?m:x:t(i)<i?b:w)(i)}function l(n,e,r,o){if(null==n&&(n=10),"number"==typeof n){var u=Math.abs(r-e)/n,a=qs(function(t){return t[2]}).right(M,u);a===M.length?(o=i(e/Wx,r/Wx,n),n=t):a?(a=M[u/M[a-1][2]<M[a][2]/u?a-1:a],o=a[1],n=a[0]):(o=i(e,r,n),n=c)}return null==o?n:n.every(o)}var h=Lu(ku,xh),p=h.invert,d=h.domain,v=s(".%L"),_=s(":%S"),g=s("%I:%M"),y=s("%I %p"),m=s("%a %d"),x=s("%b %d"),b=s("%B"),w=s("%Y"),M=[[a,1,Bx],[a,5,5*Bx],[a,15,15*Bx],[a,30,30*Bx],[u,1,jx],[u,5,5*jx],[u,15,15*jx],[u,30,30*jx],[o,1,Hx],[o,3,3*Hx],[o,6,6*Hx],[o,12,12*Hx],[r,1,Xx],[r,2,2*Xx],[e,1,Vx],[n,1,$x],[n,3,3*$x],[t,1,Wx]];return h.invert=function(t){return new Date(p(t))},h.domain=function(t){return arguments.length?d(Sm.call(t,tc)):d().map(Ka)},h.ticks=function(t,n){var e,r=d(),i=r[0],o=r[r.length-1],u=o<i;return u&&(e=i,i=o,o=e),e=l(t,i,o,n),e=e?e.range(i,o+1):[],u?e.reverse():e},h.tickFormat=function(t,n){return null==n?f:s(n)},h.nice=function(t,n){var e=d();return(t=l(t,e[0],e[e.length-1],n))?d(Pm(e,t)):h},h.copy=function(){return Pu(h,nc(t,n,e,r,o,u,a,c,s))},h}function ec(t){var n=t.length;return function(e){return t[Math.max(0,Math.min(n-1,Math.floor(e*n)))]}}function rc(t){function n(n){var o=(n-e)/(r-e);return t(i?Math.max(0,Math.min(1,o)):o)}var e=0,r=1,i=!1;return n.domain=function(t){return arguments.length?(e=+t[0],r=+t[1],n):[e,r]},n.clamp=function(t){return arguments.length?(i=!!t,n):i},n.interpolator=function(e){return arguments.length?(t=e,n):t},n.copy=function(){return rc(t).domain([e,r]).clamp(i)},Ru(n)}function ic(t){return t>1?0:t<-1?xb:Math.acos(t)}function oc(t){return t>=1?bb:t<=-1?-bb:Math.asin(t)}function uc(t){return t.innerRadius}function ac(t){return t.outerRadius}function cc(t){return t.startAngle}function sc(t){return t.endAngle}function fc(t){return t&&t.padAngle}function lc(t,n,e,r,i,o,u,a){var c=e-t,s=r-n,f=u-i,l=a-o,h=(f*(n-o)-l*(t-i))/(l*c-f*s);return[t+h*c,n+h*s]}function hc(t,n,e,r,i,o,u){var a=t-e,c=n-r,s=(u?o:-o)/yb(a*a+c*c),f=s*c,l=-s*a,h=t+f,p=n+l,d=e+f,v=r+l,_=(h+d)/2,g=(p+v)/2,y=d-h,m=v-p,x=y*y+m*m,b=i-o,w=h*v-d*p,M=(m<0?-1:1)*yb(vb(0,b*b*x-w*w)),T=(w*m-y*M)/x,S=(-w*y-m*M)/x,N=(w*m+y*M)/x,k=(-w*y+m*M)/x,E=T-_,A=S-g,C=N-_,z=k-g;return E*E+A*A>C*C+z*z&&(T=N,S=k),{cx:T,cy:S,x01:-f,y01:-l,x11:T*(i/b-1),y11:S*(i/b-1)}}function pc(t){this._context=t}function dc(t){return t[0]}function vc(t){return t[1]}function _c(t){this._curve=t}function gc(t){function n(n){return new _c(t(n))}return n._curve=t,n}function yc(t){var n=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(t){return arguments.length?n(gc(t)):n()._curve},t}function mc(t,n,e){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+n)/6,(t._y0+4*t._y1+e)/6)}function xc(t){this._context=t}function bc(t){this._context=t}function wc(t){this._context=t}function Mc(t,n){this._basis=new xc(t),this._beta=n}function Tc(t,n,e){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-n),t._y2+t._k*(t._y1-e),t._x2,t._y2)}function Sc(t,n){this._context=t,this._k=(1-n)/6}function Nc(t,n){this._context=t,this._k=(1-n)/6}function kc(t,n){this._context=t,this._k=(1-n)/6}function Ec(t,n,e){var r=t._x1,i=t._y1,o=t._x2,u=t._y2;if(t._l01_a>mb){var a=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,c=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*a-t._x0*t._l12_2a+t._x2*t._l01_2a)/c,i=(i*a-t._y0*t._l12_2a+t._y2*t._l01_2a)/c}if(t._l23_a>mb){var s=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,f=3*t._l23_a*(t._l23_a+t._l12_a);o=(o*s+t._x1*t._l23_2a-n*t._l12_2a)/f,u=(u*s+t._y1*t._l23_2a-e*t._l12_2a)/f}t._context.bezierCurveTo(r,i,o,u,t._x2,t._y2)}function Ac(t,n){this._context=t,this._alpha=n}function Cc(t,n){this._context=t,this._alpha=n}function zc(t,n){this._context=t,this._alpha=n}function Pc(t){this._context=t}function Lc(t){return t<0?-1:1}function Rc(t,n,e){var r=t._x1-t._x0,i=n-t._x1,o=(t._y1-t._y0)/(r||i<0&&-0),u=(e-t._y1)/(i||r<0&&-0),a=(o*i+u*r)/(r+i);return(Lc(o)+Lc(u))*Math.min(Math.abs(o),Math.abs(u),.5*Math.abs(a))||0}function qc(t,n){var e=t._x1-t._x0;return e?(3*(t._y1-t._y0)/e-n)/2:n}function Uc(t,n,e){var r=t._x0,i=t._y0,o=t._x1,u=t._y1,a=(o-r)/3;t._context.bezierCurveTo(r+a,i+a*n,o-a,u-a*e,o,u)}function Dc(t){this._context=t}function Oc(t){this._context=new Fc(t)}function Fc(t){this._context=t}function Ic(t){return new Dc(t)}function Yc(t){return new Oc(t)}function Bc(t){this._context=t}function jc(t){var n,e,r=t.length-1,i=new Array(r),o=new Array(r),u=new Array(r);for(i[0]=0,o[0]=2,u[0]=t[0]+2*t[1],n=1;n<r-1;++n)i[n]=1,o[n]=4,u[n]=4*t[n]+2*t[n+1];for(i[r-1]=2,o[r-1]=7,u[r-1]=8*t[r-1]+t[r],n=1;n<r;++n)e=i[n]/o[n-1],o[n]-=e,u[n]-=e*u[n-1];for(i[r-1]=u[r-1]/o[r-1],n=r-2;n>=0;--n)i[n]=(u[n]-i[n+1])/o[n];for(o[r-1]=(t[r]+i[r-1])/2,n=0;n<r-1;++n)o[n]=2*t[n+1]-i[n+1];return[i,o]}function Hc(t,n){this._context=t,this._t=n}function Xc(t){return new Hc(t,0)}function Vc(t){return new Hc(t,1)}function $c(t,n){return t[n]}function Wc(t){for(var n,e=0,r=-1,i=t.length;++r<i;)(n=+t[r][1])&&(e+=n);return e}function Zc(t){return t[0]}function Gc(t){return t[1]}function Jc(){this._=null}function Qc(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function Kc(t,n){var e=n,r=n.R,i=e.U;i?i.L===e?i.L=r:i.R=r:t._=r,r.U=i,e.U=r,e.R=r.L,e.R&&(e.R.U=e),r.L=e}function ts(t,n){var e=n,r=n.L,i=e.U;i?i.L===e?i.L=r:i.R=r:t._=r,r.U=i,e.U=r,e.L=r.R,e.L&&(e.L.U=e),r.R=e}function ns(t){for(;t.L;)t=t.L;return t}function es(t,n,e,r){var i=[null,null],o=Ew.push(i)-1;return i.left=t,i.right=n,e&&is(i,t,n,e),r&&is(i,n,t,r),Nw[t.index].halfedges.push(o),Nw[n.index].halfedges.push(o),i}function rs(t,n,e){var r=[n,e];return r.left=t,r}function is(t,n,e,r){t[0]||t[1]?t.left===e?t[1]=r:t[0]=r:(t[0]=r,t.left=n,t.right=e)}function os(t,n,e,r,i){var o,u=t[0],a=t[1],c=u[0],s=u[1],f=a[0],l=a[1],h=0,p=1,d=f-c,v=l-s;if(o=n-c,d||!(o>0)){if(o/=d,d<0){if(o<h)return;o<p&&(p=o)}else if(d>0){if(o>p)return;o>h&&(h=o)}if(o=r-c,d||!(o<0)){if(o/=d,d<0){if(o>p)return;o>h&&(h=o)}else if(d>0){if(o<h)return;o<p&&(p=o)}if(o=e-s,v||!(o>0)){if(o/=v,v<0){if(o<h)return;o<p&&(p=o)}else if(v>0){if(o>p)return;o>h&&(h=o)}if(o=i-s,v||!(o<0)){if(o/=v,v<0){if(o>p)return;o>h&&(h=o)}else if(v>0){if(o<h)return;o<p&&(p=o)}return!(h>0||p<1)||(h>0&&(t[0]=[c+h*d,s+h*v]),p<1&&(t[1]=[c+p*d,s+p*v]),!0)}}}}}function us(t,n,e,r,i){var o=t[1];if(o)return!0;var u,a,c=t[0],s=t.left,f=t.right,l=s[0],h=s[1],p=f[0],d=f[1],v=(l+p)/2,_=(h+d)/2;if(d===h){if(v<n||v>=r)return;if(l>p){if(c){if(c[1]>=i)return}else c=[v,e];o=[v,i]}else{if(c){if(c[1]<e)return}else c=[v,i];o=[v,e]}}else if(u=(l-p)/(d-h),a=_-u*v,u<-1||u>1)if(l>p){if(c){if(c[1]>=i)return}else c=[(e-a)/u,e];o=[(i-a)/u,i]}else{if(c){if(c[1]<e)return}else c=[(i-a)/u,i];o=[(e-a)/u,e]}else if(h<d){if(c){if(c[0]>=r)return}else c=[n,u*n+a];o=[r,u*r+a]}else{if(c){if(c[0]<n)return}else c=[r,u*r+a];o=[n,u*n+a]}return t[0]=c,t[1]=o,!0}function as(t,n,e,r){for(var i,o=Ew.length;o--;)us(i=Ew[o],t,n,e,r)&&os(i,t,n,e,r)&&(Math.abs(i[0][0]-i[1][0])>zw||Math.abs(i[0][1]-i[1][1])>zw)||delete Ew[o]}function cs(t){return Nw[t.index]={site:t,halfedges:[]}}function ss(t,n){var e=t.site,r=n.left,i=n.right;return e===i&&(i=r,r=e),i?Math.atan2(i[1]-r[1],i[0]-r[0]):(e===r?(r=n[1],i=n[0]):(r=n[0],i=n[1]),Math.atan2(r[0]-i[0],i[1]-r[1]))}function fs(t,n){return n[+(n.left!==t.site)]}function ls(t,n){return n[+(n.left===t.site)]}function hs(){for(var t,n,e,r,i=0,o=Nw.length;i<o;++i)if((t=Nw[i])&&(r=(n=t.halfedges).length)){var u=new Array(r),a=new Array(r);for(e=0;e<r;++e)u[e]=e,a[e]=ss(t,Ew[n[e]]);for(u.sort(function(t,n){return a[n]-a[t]}),e=0;e<r;++e)a[e]=n[u[e]];for(e=0;e<r;++e)n[e]=a[e]}}function ps(t,n,e,r){var i,o,u,a,c,s,f,l,h,p,d,v,_=Nw.length,g=!0;for(i=0;i<_;++i)if(o=Nw[i]){for(u=o.site,c=o.halfedges,a=c.length;a--;)Ew[c[a]]||c.splice(a,1);for(a=0,s=c.length;a<s;)p=ls(o,Ew[c[a]]),d=p[0],v=p[1],f=fs(o,Ew[c[++a%s]]),l=f[0],h=f[1],(Math.abs(d-l)>zw||Math.abs(v-h)>zw)&&(c.splice(a,0,Ew.push(rs(u,p,Math.abs(d-t)<zw&&r-v>zw?[t,Math.abs(l-t)<zw?h:r]:Math.abs(v-r)<zw&&e-d>zw?[Math.abs(h-r)<zw?l:e,r]:Math.abs(d-e)<zw&&v-n>zw?[e,Math.abs(l-e)<zw?h:n]:Math.abs(v-n)<zw&&d-t>zw?[Math.abs(h-n)<zw?l:t,n]:null))-1),++s);s&&(g=!1)}if(g){var y,m,x,b=1/0;for(i=0,g=null;i<_;++i)(o=Nw[i])&&(u=o.site,y=u[0]-t,m=u[1]-n,(x=y*y+m*m)<b&&(b=x,g=o));if(g){var w=[t,n],M=[t,r],T=[e,r],S=[e,n];g.halfedges.push(Ew.push(rs(u=g.site,w,M))-1,Ew.push(rs(u,M,T))-1,Ew.push(rs(u,T,S))-1,Ew.push(rs(u,S,w))-1)}}for(i=0;i<_;++i)(o=Nw[i])&&(o.halfedges.length||delete Nw[i])}function ds(){Qc(this),this.x=this.y=this.arc=this.site=this.cy=null}function vs(t){var n=t.P,e=t.N;if(n&&e){var r=n.site,i=t.site,o=e.site;if(r!==o){var u=i[0],a=i[1],c=r[0]-u,s=r[1]-a,f=o[0]-u,l=o[1]-a,h=2*(c*l-s*f);if(!(h>=-Pw)){var p=c*c+s*s,d=f*f+l*l,v=(l*p-s*d)/h,_=(c*d-f*p)/h,g=Aw.pop()||new ds;g.arc=t,g.site=i,g.x=v+u,g.y=(g.cy=_+a)+Math.sqrt(v*v+_*_),t.circle=g;for(var y=null,m=kw._;m;)if(g.y<m.y||g.y===m.y&&g.x<=m.x){if(!m.L){y=m.P;break}m=m.L}else{if(!m.R){y=m;break}m=m.R}kw.insert(y,g),y||(Tw=g)}}}}function _s(t){var n=t.circle;n&&(n.P||(Tw=n.N),kw.remove(n),Aw.push(n),Qc(n),t.circle=null)}function gs(){Qc(this),this.edge=this.site=this.circle=null}function ys(t){var n=Cw.pop()||new gs;return n.site=t,n}function ms(t){_s(t),Sw.remove(t),Cw.push(t),Qc(t)}function xs(t){var n=t.circle,e=n.x,r=n.cy,i=[e,r],o=t.P,u=t.N,a=[t];ms(t);for(var c=o;c.circle&&Math.abs(e-c.circle.x)<zw&&Math.abs(r-c.circle.cy)<zw;)o=c.P,a.unshift(c),ms(c),c=o;a.unshift(c),_s(c);for(var s=u;s.circle&&Math.abs(e-s.circle.x)<zw&&Math.abs(r-s.circle.cy)<zw;)u=s.N,a.push(s),ms(s),s=u;a.push(s),_s(s);var f,l=a.length;for(f=1;f<l;++f)s=a[f],c=a[f-1],is(s.edge,c.site,s.site,i);c=a[0],s=a[l-1],s.edge=es(c.site,s.site,null,i),vs(c),vs(s)}function bs(t){for(var n,e,r,i,o=t[0],u=t[1],a=Sw._;a;)if((r=ws(a,u)-o)>zw)a=a.L;else{if(!((i=o-Ms(a,u))>zw)){r>-zw?(n=a.P,e=a):i>-zw?(n=a,e=a.N):n=e=a;break}if(!a.R){n=a;break}a=a.R}cs(t);var c=ys(t);if(Sw.insert(n,c),n||e){if(n===e)return _s(n),e=ys(n.site),Sw.insert(c,e),c.edge=e.edge=es(n.site,c.site),vs(n),void vs(e);if(!e)return void(c.edge=es(n.site,c.site));_s(n),_s(e);var s=n.site,f=s[0],l=s[1],h=t[0]-f,p=t[1]-l,d=e.site,v=d[0]-f,_=d[1]-l,g=2*(h*_-p*v),y=h*h+p*p,m=v*v+_*_,x=[(_*y-p*m)/g+f,(h*m-v*y)/g+l];is(e.edge,s,d,x),c.edge=es(s,t,null,x),e.edge=es(t,d,null,x),vs(n),vs(e)}}function ws(t,n){var e=t.site,r=e[0],i=e[1],o=i-n;if(!o)return r;var u=t.P;if(!u)return-1/0;e=u.site;var a=e[0],c=e[1],s=c-n;if(!s)return a;var f=a-r,l=1/o-1/s,h=f/s;return l?(-h+Math.sqrt(h*h-2*l*(f*f/(-2*s)-c+s/2+i-o/2)))/l+r:(r+a)/2}function Ms(t,n){var e=t.N;if(e)return ws(e,n);var r=t.site;return r[1]===n?r[0]:1/0}function Ts(t,n,e){return(t[0]-e[0])*(n[1]-t[1])-(t[0]-n[0])*(e[1]-t[1])}function Ss(t,n){return n[1]-t[1]||n[0]-t[0]}function Ns(t,n){var e,r,i,o=t.sort(Ss).pop();for(Ew=[],Nw=new Array(t.length),Sw=new Jc,kw=new Jc;;)if(i=Tw,o&&(!i||o[1]<i.y||o[1]===i.y&&o[0]<i.x))o[0]===e&&o[1]===r||(bs(o),e=o[0],r=o[1]),o=t.pop();else{if(!i)break;xs(i.arc)}if(hs(),n){var u=+n[0][0],a=+n[0][1],c=+n[1][0],s=+n[1][1];as(u,a,c,s),ps(u,a,c,s)}this.edges=Ew,this.cells=Nw,Sw=kw=Ew=Nw=null}function ks(t,n,e){this.target=t,this.type=n,this.transform=e}function Es(t,n,e){this.k=t,this.x=n,this.y=e}function As(t){return t.__zoom||qw}function Cs(){t.event.stopImmediatePropagation()}function zs(){return!t.event.button}function Ps(){var t,n,e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,t=e.width.baseVal.value,n=e.height.baseVal.value):(t=e.clientWidth,n=e.clientHeight),[[0,0],[t,n]]}function Ls(){return this.__zoom||qw}var Rs=function(t,n){return t<n?-1:t>n?1:t>=n?0:NaN},qs=function(t){return 1===t.length&&(t=n(t)),{left:function(n,e,r,i){for(null==r&&(r=0),null==i&&(i=n.length);r<i;){var o=r+i>>>1;t(n[o],e)<0?r=o+1:i=o}return r},right:function(n,e,r,i){for(null==r&&(r=0),null==i&&(i=n.length);r<i;){var o=r+i>>>1;t(n[o],e)>0?i=o:r=o+1}return r}}},Us=qs(Rs),Ds=Us.right,Os=Us.left,Fs=function(t,n){null==n&&(n=e);for(var r=0,i=t.length-1,o=t[0],u=new Array(i<0?0:i);r<i;)u[r]=n(o,o=t[++r]);return u},Is=function(t,n,r){var i,o,u,a,c=t.length,s=n.length,f=new Array(c*s);for(null==r&&(r=e),i=u=0;i<c;++i)for(a=t[i],o=0;o<s;++o,++u)f[u]=r(a,n[o]);return f},Ys=function(t,n){return n<t?-1:n>t?1:n>=t?0:NaN},Bs=function(t){return null===t?NaN:+t},js=function(t,n){var e,r,i=t.length,o=0,u=-1,a=0,c=0;if(null==n)for(;++u<i;)isNaN(e=Bs(t[u]))||(r=e-a,a+=r/++o,c+=r*(e-a));else for(;++u<i;)isNaN(e=Bs(n(t[u],u,t)))||(r=e-a,a+=r/++o,c+=r*(e-a));if(o>1)return c/(o-1)},Hs=function(t,n){var e=js(t,n);return e?Math.sqrt(e):e},Xs=function(t,n){var e,r,i,o=t.length,u=-1;if(null==n){for(;++u<o;)if(null!=(e=t[u])&&e>=e)for(r=i=e;++u<o;)null!=(e=t[u])&&(r>e&&(r=e),i<e&&(i=e))}else for(;++u<o;)if(null!=(e=n(t[u],u,t))&&e>=e)for(r=i=e;++u<o;)null!=(e=n(t[u],u,t))&&(r>e&&(r=e),i<e&&(i=e));return[r,i]},Vs=Array.prototype,$s=Vs.slice,Ws=Vs.map,Zs=function(t){return function(){return t}},Gs=function(t){return t},Js=function(t,n,e){t=+t,n=+n,e=(i=arguments.length)<2?(n=t,t=0,1):i<3?1:+e;for(var r=-1,i=0|Math.max(0,Math.ceil((n-t)/e)),o=new Array(i);++r<i;)o[r]=t+r*e;return o},Qs=Math.sqrt(50),Ks=Math.sqrt(10),tf=Math.sqrt(2),nf=function(t,n,e){var i,o,u,a=n<t,c=-1;if(a&&(i=t,t=n,n=i),0===(u=r(t,n,e))||!isFinite(u))return[];if(u>0)for(t=Math.ceil(t/u),n=Math.floor(n/u),o=new Array(i=Math.ceil(n-t+1));++c<i;)o[c]=(t+c)*u;else for(t=Math.floor(t*u),n=Math.ceil(n*u),o=new Array(i=Math.ceil(t-n+1));++c<i;)o[c]=(t-c)/u;return a&&o.reverse(),o},ef=function(t){return Math.ceil(Math.log(t.length)/Math.LN2)+1},rf=function(){function t(t){var o,u,a=t.length,c=new Array(a);for(o=0;o<a;++o)c[o]=n(t[o],o,t);var s=e(c),f=s[0],l=s[1],h=r(c,f,l);Array.isArray(h)||(h=i(f,l,h),h=Js(Math.ceil(f/h)*h,Math.floor(l/h)*h,h));for(var p=h.length;h[0]<=f;)h.shift(),--p;for(;h[p-1]>l;)h.pop(),--p;var d,v=new Array(p+1);for(o=0;o<=p;++o)d=v[o]=[],d.x0=o>0?h[o-1]:f,d.x1=o<p?h[o]:l;for(o=0;o<a;++o)u=c[o],f<=u&&u<=l&&v[Ds(h,u,0,p)].push(t[o]);return v}var n=Gs,e=Xs,r=ef;return t.value=function(e){return arguments.length?(n="function"==typeof e?e:Zs(e),t):n},t.domain=function(n){return arguments.length?(e="function"==typeof n?n:Zs([n[0],n[1]]),t):e},t.thresholds=function(n){return arguments.length?(r="function"==typeof n?n:Zs(Array.isArray(n)?$s.call(n):n),t):r},t},of=function(t,n,e){if(null==e&&(e=Bs),r=t.length){if((n=+n)<=0||r<2)return+e(t[0],0,t);if(n>=1)return+e(t[r-1],r-1,t);var r,i=(r-1)*n,o=Math.floor(i),u=+e(t[o],o,t);return u+(+e(t[o+1],o+1,t)-u)*(i-o)}},uf=function(t,n,e){return t=Ws.call(t,Bs).sort(Rs),Math.ceil((e-n)/(2*(of(t,.75)-of(t,.25))*Math.pow(t.length,-1/3)))},af=function(t,n,e){return Math.ceil((e-n)/(3.5*Hs(t)*Math.pow(t.length,-1/3)))},cf=function(t,n){var e,r,i=t.length,o=-1;if(null==n){for(;++o<i;)if(null!=(e=t[o])&&e>=e)for(r=e;++o<i;)null!=(e=t[o])&&e>r&&(r=e)}else for(;++o<i;)if(null!=(e=n(t[o],o,t))&&e>=e)for(r=e;++o<i;)null!=(e=n(t[o],o,t))&&e>r&&(r=e);return r},sf=function(t,n){var e,r=t.length,i=r,o=-1,u=0;if(null==n)for(;++o<r;)isNaN(e=Bs(t[o]))?--i:u+=e;else for(;++o<r;)isNaN(e=Bs(n(t[o],o,t)))?--i:u+=e;if(i)return u/i},ff=function(t,n){var e,r=t.length,i=-1,o=[];if(null==n)for(;++i<r;)isNaN(e=Bs(t[i]))||o.push(e);else for(;++i<r;)isNaN(e=Bs(n(t[i],i,t)))||o.push(e);return of(o.sort(Rs),.5)},lf=function(t){for(var n,e,r,i=t.length,o=-1,u=0;++o<i;)u+=t[o].length;for(e=new Array(u);--i>=0;)for(r=t[i],n=r.length;--n>=0;)e[--u]=r[n];return e},hf=function(t,n){var e,r,i=t.length,o=-1;if(null==n){for(;++o<i;)if(null!=(e=t[o])&&e>=e)for(r=e;++o<i;)null!=(e=t[o])&&r>e&&(r=e)}else for(;++o<i;)if(null!=(e=n(t[o],o,t))&&e>=e)for(r=e;++o<i;)null!=(e=n(t[o],o,t))&&r>e&&(r=e);return r},pf=function(t,n){for(var e=n.length,r=new Array(e);e--;)r[e]=t[n[e]];return r},df=function(t,n){if(e=t.length){var e,r,i=0,o=0,u=t[o];for(null==n&&(n=Rs);++i<e;)(n(r=t[i],u)<0||0!==n(u,u))&&(u=r,o=i);return 0===n(u,u)?o:void 0}},vf=function(t,n,e){for(var r,i,o=(null==e?t.length:e)-(n=null==n?0:+n);o;)i=Math.random()*o--|0,r=t[o+n],t[o+n]=t[i+n],t[i+n]=r;return t},_f=function(t,n){var e,r=t.length,i=-1,o=0;if(null==n)for(;++i<r;)(e=+t[i])&&(o+=e);else for(;++i<r;)(e=+n(t[i],i,t))&&(o+=e);return o},gf=function(t){if(!(i=t.length))return[];for(var n=-1,e=hf(t,o),r=new Array(e);++n<e;)for(var i,u=-1,a=r[n]=new Array(i);++u<i;)a[u]=t[u][n];return r},yf=function(){return gf(arguments)},mf=Array.prototype.slice,xf=function(t){return t},bf=1,wf=2,Mf=3,Tf=4,Sf=1e-6,Nf={value:function(){}};_.prototype=v.prototype={constructor:_,on:function(t,n){var e,r=this._,i=g(t+"",r),o=-1,u=i.length;{if(!(arguments.length<2)){if(null!=n&&"function"!=typeof n)throw new Error("invalid callback: "+n);for(;++o<u;)if(e=(t=i[o]).type)r[e]=m(r[e],t.name,n);else if(null==n)for(e in r)r[e]=m(r[e],t.name,null);return this}for(;++o<u;)if((e=(t=i[o]).type)&&(e=y(r[e],t.name)))return e}},copy:function(){var t={},n=this._;for(var e in n)t[e]=n[e].slice();return new _(t)},call:function(t,n){if((e=arguments.length-2)>0)for(var e,r,i=new Array(e),o=0;o<e;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(r=this._[t],o=0,e=r.length;o<e;++o)r[o].value.apply(n,i)},apply:function(t,n,e){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(n,e)}};var kf="http://www.w3.org/1999/xhtml",Ef={svg:"http://www.w3.org/2000/svg",xhtml:kf,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Af=function(t){var n=t+="",e=n.indexOf(":");return e>=0&&"xmlns"!==(n=t.slice(0,e))&&(t=t.slice(e+1)),Ef.hasOwnProperty(n)?{space:Ef[n],local:t}:t},Cf=function(t){var n=Af(t);return(n.local?b:x)(n)},zf=0;M.prototype=w.prototype={constructor:M,get:function(t){for(var n=this._;!(n in t);)if(!(t=t.parentNode))return;return t[n]},set:function(t,n){return t[this._]=n},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}};var Pf=function(t){return function(){return this.matches(t)}};if("undefined"!=typeof document){var Lf=document.documentElement;if(!Lf.matches){var Rf=Lf.webkitMatchesSelector||Lf.msMatchesSelector||Lf.mozMatchesSelector||Lf.oMatchesSelector;Pf=function(t){return function(){return Rf.call(this,t)}}}}var qf=Pf,Uf={};if(t.event=null,"undefined"!=typeof document){"onmouseenter"in document.documentElement||(Uf={mouseenter:"mouseover",mouseleave:"mouseout"})}var Df=function(t,n,e){var r,i,o=N(t+""),u=o.length;{if(!(arguments.length<2)){for(a=n?E:k,null==e&&(e=!1),r=0;r<u;++r)this.each(a(o[r],n,e));return this}var a=this.node().__on;if(a)for(var c,s=0,f=a.length;s<f;++s)for(r=0,c=a[s];r<u;++r)if((i=o[r]).type===c.type&&i.name===c.name)return c.value}},Of=function(){for(var n,e=t.event;n=e.sourceEvent;)e=n;return e},Ff=function(t,n){var e=t.ownerSVGElement||t;if(e.createSVGPoint){var r=e.createSVGPoint();return r.x=n.clientX,r.y=n.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}var i=t.getBoundingClientRect();return[n.clientX-i.left-t.clientLeft,n.clientY-i.top-t.clientTop]},If=function(t){var n=Of();return n.changedTouches&&(n=n.changedTouches[0]),Ff(t,n)},Yf=function(t){return null==t?C:function(){return this.querySelector(t)}},Bf=function(t){"function"!=typeof t&&(t=Yf(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o,u,a=n[i],c=a.length,s=r[i]=new Array(c),f=0;f<c;++f)(o=a[f])&&(u=t.call(o,o.__data__,f,a))&&("__data__"in o&&(u.__data__=o.__data__),s[f]=u);return new vt(r,this._parents)},jf=function(t){return null==t?z:function(){return this.querySelectorAll(t)}},Hf=function(t){"function"!=typeof t&&(t=jf(t));for(var n=this._groups,e=n.length,r=[],i=[],o=0;o<e;++o)for(var u,a=n[o],c=a.length,s=0;s<c;++s)(u=a[s])&&(r.push(t.call(u,u.__data__,s,a)),i.push(u));return new vt(r,i)},Xf=function(t){"function"!=typeof t&&(t=qf(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o,u=n[i],a=u.length,c=r[i]=[],s=0;s<a;++s)(o=u[s])&&t.call(o,o.__data__,s,u)&&c.push(o);return new vt(r,this._parents)},Vf=function(t){return new Array(t.length)},$f=function(){return new vt(this._enter||this._groups.map(Vf),this._parents)};P.prototype={constructor:P,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,n){return this._parent.insertBefore(t,n)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var Wf=function(t){return function(){return t}},Zf="$",Gf=function(t,n){if(!t)return p=new Array(this.size()),s=-1,this.each(function(t){p[++s]=t}),p;var e=n?R:L,r=this._parents,i=this._groups;"function"!=typeof t&&(t=Wf(t));for(var o=i.length,u=new Array(o),a=new Array(o),c=new Array(o),s=0;s<o;++s){var f=r[s],l=i[s],h=l.length,p=t.call(f,f&&f.__data__,s,r),d=p.length,v=a[s]=new Array(d),_=u[s]=new Array(d);e(f,l,v,_,c[s]=new Array(h),p,n);for(var g,y,m=0,x=0;m<d;++m)if(g=v[m]){for(m>=x&&(x=m+1);!(y=_[x])&&++x<d;);g._next=y||null}}return u=new vt(u,r),u._enter=a,u._exit=c,u},Jf=function(){return new vt(this._exit||this._groups.map(Vf),this._parents)},Qf=function(t){for(var n=this._groups,e=t._groups,r=n.length,i=e.length,o=Math.min(r,i),u=new Array(r),a=0;a<o;++a)for(var c,s=n[a],f=e[a],l=s.length,h=u[a]=new Array(l),p=0;p<l;++p)(c=s[p]||f[p])&&(h[p]=c);for(;a<r;++a)u[a]=n[a];return new vt(u,this._parents)},Kf=function(){for(var t=this._groups,n=-1,e=t.length;++n<e;)for(var r,i=t[n],o=i.length-1,u=i[o];--o>=0;)(r=i[o])&&(u&&u!==r.nextSibling&&u.parentNode.insertBefore(r,u),u=r);return this},tl=function(t){function n(n,e){return n&&e?t(n.__data__,e.__data__):!n-!e}t||(t=q);for(var e=this._groups,r=e.length,i=new Array(r),o=0;o<r;++o){for(var u,a=e[o],c=a.length,s=i[o]=new Array(c),f=0;f<c;++f)(u=a[f])&&(s[f]=u);s.sort(n)}return new vt(i,this._parents).order()},nl=function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},el=function(){var t=new Array(this.size()),n=-1;return this.each(function(){t[++n]=this}),t},rl=function(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var r=t[n],i=0,o=r.length;i<o;++i){var u=r[i];if(u)return u}return null},il=function(){var t=0;return this.each(function(){++t}),t},ol=function(){return!this.node()},ul=function(t){for(var n=this._groups,e=0,r=n.length;e<r;++e)for(var i,o=n[e],u=0,a=o.length;u<a;++u)(i=o[u])&&t.call(i,i.__data__,u,o);return this},al=function(t,n){var e=Af(t);if(arguments.length<2){var r=this.node();return e.local?r.getAttributeNS(e.space,e.local):r.getAttribute(e)}return this.each((null==n?e.local?D:U:"function"==typeof n?e.local?Y:I:e.local?F:O)(e,n))},cl=function(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView},sl=function(t,n,e){var r;return arguments.length>1?this.each((null==n?B:"function"==typeof n?H:j)(t,n,null==e?"":e)):cl(r=this.node()).getComputedStyle(r,null).getPropertyValue(t)},fl=function(t,n){return arguments.length>1?this.each((null==n?X:"function"==typeof n?$:V)(t,n)):this.node()[t]};G.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var n=this._names.indexOf(t);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var ll=function(t,n){var e=W(t+"");if(arguments.length<2){for(var r=Z(this.node()),i=-1,o=e.length;++i<o;)if(!r.contains(e[i]))return!1;return!0}return this.each(("function"==typeof n?nt:n?K:tt)(e,n))},hl=function(t){return arguments.length?this.each(null==t?et:("function"==typeof t?it:rt)(t)):this.node().textContent},pl=function(t){return arguments.length?this.each(null==t?ot:("function"==typeof t?at:ut)(t)):this.node().innerHTML},dl=function(){return this.each(ct)},vl=function(){return this.each(st)},_l=function(t){var n="function"==typeof t?t:Cf(t);return this.select(function(){return this.appendChild(n.apply(this,arguments))})},gl=function(t,n){var e="function"==typeof t?t:Cf(t),r=null==n?ft:"function"==typeof n?n:Yf(n);return this.select(function(){return this.insertBefore(e.apply(this,arguments),r.apply(this,arguments)||null)})},yl=function(){return this.each(lt)},ml=function(t){return arguments.length?this.property("__data__",t):this.node().__data__},xl=function(t,n){return this.each(("function"==typeof n?dt:pt)(t,n))},bl=[null];vt.prototype=_t.prototype={constructor:vt,select:Bf,selectAll:Hf,filter:Xf,data:Gf,enter:$f,exit:Jf,merge:Qf,order:Kf,sort:tl,call:nl,nodes:el,node:rl,size:il,empty:ol,each:ul,attr:al,style:sl,property:fl,classed:ll,text:hl,html:pl,raise:dl,lower:vl,append:_l,insert:gl,remove:yl,datum:ml,on:Df,dispatch:xl};var wl=function(t){return"string"==typeof t?new vt([[document.querySelector(t)]],[document.documentElement]):new vt([[t]],bl)},Ml=function(t){return"string"==typeof t?new vt([document.querySelectorAll(t)],[document.documentElement]):new vt([null==t?[]:t],bl)},Tl=function(t,n,e){arguments.length<3&&(e=n,n=Of().changedTouches);for(var r,i=0,o=n?n.length:0;i<o;++i)if((r=n[i]).identifier===e)return Ff(t,r);return null},Sl=function(t,n){null==n&&(n=Of().touches);for(var e=0,r=n?n.length:0,i=new Array(r);e<r;++e)i[e]=Ff(t,n[e]);return i},Nl=function(){t.event.preventDefault(),t.event.stopImmediatePropagation()},kl=function(t){var n=t.document.documentElement,e=wl(t).on("dragstart.drag",Nl,!0);"onselectstart"in n?e.on("selectstart.drag",Nl,!0):(n.__noselect=n.style.MozUserSelect,n.style.MozUserSelect="none")},El=function(t){return function(){return t}};mt.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};var Al=function(){function n(t){t.on("mousedown.drag",e).on("touchstart.drag",o).on("touchmove.drag",u).on("touchend.drag touchcancel.drag",a).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function e(){if(!f&&l.apply(this,arguments)){var n=c("mouse",h.apply(this,arguments),If,this,arguments);n&&(wl(t.event.view).on("mousemove.drag",r,!0).on("mouseup.drag",i,!0),kl(t.event.view),gt(),s=!1,n("start"))}}function r(){Nl(),s=!0,d.mouse("drag")}function i(){
wl(t.event.view).on("mousemove.drag mouseup.drag",null),yt(t.event.view,s),Nl(),d.mouse("end")}function o(){if(l.apply(this,arguments)){var n,e,r=t.event.changedTouches,i=h.apply(this,arguments),o=r.length;for(n=0;n<o;++n)(e=c(r[n].identifier,i,Tl,this,arguments))&&(gt(),e("start"))}}function u(){var n,e,r=t.event.changedTouches,i=r.length;for(n=0;n<i;++n)(e=d[r[n].identifier])&&(Nl(),e("drag"))}function a(){var n,e,r=t.event.changedTouches,i=r.length;for(f&&clearTimeout(f),f=setTimeout(function(){f=null},500),n=0;n<i;++n)(e=d[r[n].identifier])&&(gt(),e("end"))}function c(e,r,i,o,u){var a,c,s,f=i(r,e),l=_.copy();if(A(new mt(n,"beforestart",a,e,g,f[0],f[1],0,0,l),function(){return null!=(t.event.subject=a=p.apply(o,u))&&(c=a.x-f[0]||0,s=a.y-f[1]||0,!0)}))return function t(h){var p,v=f;switch(h){case"start":d[e]=t,p=g++;break;case"end":delete d[e],--g;case"drag":f=i(r,e),p=g}A(new mt(n,h,a,e,p,f[0]+c,f[1]+s,f[0]-v[0],f[1]-v[1],l),l.apply,l,[h,o,u])}}var s,f,l=xt,h=bt,p=wt,d={},_=v("start","drag","end"),g=0;return n.filter=function(t){return arguments.length?(l="function"==typeof t?t:El(!!t),n):l},n.container=function(t){return arguments.length?(h="function"==typeof t?t:El(t),n):h},n.subject=function(t){return arguments.length?(p="function"==typeof t?t:El(t),n):p},n.on=function(){var t=_.on.apply(_,arguments);return t===_?n:t},n},Cl=function(t,n,e){t.prototype=n.prototype=e,e.constructor=t},zl="\\s*([+-]?\\d+)\\s*",Pl="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ll="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Rl=/^#([0-9a-f]{3})$/,ql=/^#([0-9a-f]{6})$/,Ul=new RegExp("^rgb\\("+[zl,zl,zl]+"\\)$"),Dl=new RegExp("^rgb\\("+[Ll,Ll,Ll]+"\\)$"),Ol=new RegExp("^rgba\\("+[zl,zl,zl,Pl]+"\\)$"),Fl=new RegExp("^rgba\\("+[Ll,Ll,Ll,Pl]+"\\)$"),Il=new RegExp("^hsl\\("+[Pl,Ll,Ll]+"\\)$"),Yl=new RegExp("^hsla\\("+[Pl,Ll,Ll,Pl]+"\\)$"),Bl={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Cl(Tt,St,{displayable:function(){return this.rgb().displayable()},toString:function(){return this.rgb()+""}}),Cl(Ct,At,Mt(Tt,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Ct(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Ct(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},toString:function(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(1===t?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}})),Cl(Rt,Lt,Mt(Tt,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Rt(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Rt(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),n=isNaN(t)||isNaN(this.s)?0:this.s,e=this.l,r=e+(e<.5?e:1-e)*n,i=2*e-r;return new Ct(qt(t>=240?t-240:t+120,i,r),qt(t,i,r),qt(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var jl=Math.PI/180,Hl=180/Math.PI,Xl=.95047,Vl=1,$l=1.08883,Wl=4/29,Zl=6/29,Gl=3*Zl*Zl,Jl=Zl*Zl*Zl;Cl(Ot,Dt,Mt(Tt,{brighter:function(t){return new Ot(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new Ot(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,n=isNaN(this.a)?t:t+this.a/500,e=isNaN(this.b)?t:t-this.b/200;return t=Vl*It(t),n=Xl*It(n),e=$l*It(e),new Ct(Yt(3.2404542*n-1.5371385*t-.4985314*e),Yt(-.969266*n+1.8760108*t+.041556*e),Yt(.0556434*n-.2040259*t+1.0572252*e),this.opacity)}})),Cl(Xt,Ht,Mt(Tt,{brighter:function(t){return new Xt(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker:function(t){return new Xt(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb:function(){return Ut(this).rgb()}}));var Ql=-.14861,Kl=1.78277,th=-.29227,nh=-.90649,eh=1.97294,rh=eh*nh,ih=eh*Kl,oh=Kl*th-nh*Ql;Cl(Wt,$t,Mt(Tt,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Wt(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Wt(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*jl,n=+this.l,e=isNaN(this.s)?0:this.s*n*(1-n),r=Math.cos(t),i=Math.sin(t);return new Ct(255*(n+e*(Ql*r+Kl*i)),255*(n+e*(th*r+nh*i)),255*(n+e*(eh*r)),this.opacity)}}));var uh,ah,ch,sh,fh,lh,hh=function(t){var n=t.length-1;return function(e){var r=e<=0?e=0:e>=1?(e=1,n-1):Math.floor(e*n),i=t[r],o=t[r+1],u=r>0?t[r-1]:2*i-o,a=r<n-1?t[r+2]:2*o-i;return Zt((e-r/n)*n,u,i,o,a)}},ph=function(t){var n=t.length;return function(e){var r=Math.floor(((e%=1)<0?++e:e)*n),i=t[(r+n-1)%n],o=t[r%n],u=t[(r+1)%n],a=t[(r+2)%n];return Zt((e-r/n)*n,i,o,u,a)}},dh=function(t){return function(){return t}},vh=function t(n){function e(t,n){var e=r((t=At(t)).r,(n=At(n)).r),i=r(t.g,n.g),o=r(t.b,n.b),u=tn(t.opacity,n.opacity);return function(n){return t.r=e(n),t.g=i(n),t.b=o(n),t.opacity=u(n),t+""}}var r=Kt(n);return e.gamma=t,e}(1),_h=nn(hh),gh=nn(ph),yh=function(t,n){var e,r=n?n.length:0,i=t?Math.min(r,t.length):0,o=new Array(r),u=new Array(r);for(e=0;e<i;++e)o[e]=Sh(t[e],n[e]);for(;e<r;++e)u[e]=n[e];return function(t){for(e=0;e<i;++e)u[e]=o[e](t);return u}},mh=function(t,n){var e=new Date;return t=+t,n-=t,function(r){return e.setTime(t+n*r),e}},xh=function(t,n){return t=+t,n-=t,function(e){return t+n*e}},bh=function(t,n){var e,r={},i={};null!==t&&"object"==typeof t||(t={}),null!==n&&"object"==typeof n||(n={});for(e in n)e in t?r[e]=Sh(t[e],n[e]):i[e]=n[e];return function(t){for(e in r)i[e]=r[e](t);return i}},wh=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Mh=new RegExp(wh.source,"g"),Th=function(t,n){var e,r,i,o=wh.lastIndex=Mh.lastIndex=0,u=-1,a=[],c=[];for(t+="",n+="";(e=wh.exec(t))&&(r=Mh.exec(n));)(i=r.index)>o&&(i=n.slice(o,i),a[u]?a[u]+=i:a[++u]=i),(e=e[0])===(r=r[0])?a[u]?a[u]+=r:a[++u]=r:(a[++u]=null,c.push({i:u,x:xh(e,r)})),o=Mh.lastIndex;return o<n.length&&(i=n.slice(o),a[u]?a[u]+=i:a[++u]=i),a.length<2?c[0]?rn(c[0].x):en(n):(n=c.length,function(t){for(var e,r=0;r<n;++r)a[(e=c[r]).i]=e.x(t);return a.join("")})},Sh=function(t,n){var e,r=typeof n;return null==n||"boolean"===r?dh(n):("number"===r?xh:"string"===r?(e=St(n))?(n=e,vh):Th:n instanceof St?vh:n instanceof Date?mh:Array.isArray(n)?yh:isNaN(n)?bh:xh)(t,n)},Nh=function(t,n){return t=+t,n-=t,function(e){return Math.round(t+n*e)}},kh=180/Math.PI,Eh={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},Ah=function(t,n,e,r,i,o){var u,a,c;return(u=Math.sqrt(t*t+n*n))&&(t/=u,n/=u),(c=t*e+n*r)&&(e-=t*c,r-=n*c),(a=Math.sqrt(e*e+r*r))&&(e/=a,r/=a,c/=a),t*r<n*e&&(t=-t,n=-n,c=-c,u=-u),{translateX:i,translateY:o,rotate:Math.atan2(n,t)*kh,skewX:Math.atan(c)*kh,scaleX:u,scaleY:a}},Ch=an(on,"px, ","px)","deg)"),zh=an(un,", ",")",")"),Ph=Math.SQRT2,Lh=function(t,n){var e,r,i=t[0],o=t[1],u=t[2],a=n[0],c=n[1],s=n[2],f=a-i,l=c-o,h=f*f+l*l;if(h<1e-12)r=Math.log(s/u)/Ph,e=function(t){return[i+t*f,o+t*l,u*Math.exp(Ph*t*r)]};else{var p=Math.sqrt(h),d=(s*s-u*u+4*h)/(2*u*2*p),v=(s*s-u*u-4*h)/(2*s*2*p),_=Math.log(Math.sqrt(d*d+1)-d),g=Math.log(Math.sqrt(v*v+1)-v);r=(g-_)/Ph,e=function(t){var n=t*r,e=cn(_),a=u/(2*p)*(e*fn(Ph*n+_)-sn(_));return[i+a*f,o+a*l,u*e/cn(Ph*n+_)]}}return e.duration=1e3*r,e},Rh=ln(Qt),qh=ln(tn),Uh=pn(Qt),Dh=pn(tn),Oh=dn(Qt),Fh=dn(tn),Ih=function(t,n){for(var e=new Array(n),r=0;r<n;++r)e[r]=t(r/(n-1));return e},Yh=0,Bh=0,jh=0,Hh=1e3,Xh=0,Vh=0,$h=0,Wh="object"==typeof performance&&performance.now?performance:Date,Zh="function"==typeof requestAnimationFrame?requestAnimationFrame:function(t){setTimeout(t,17)};gn.prototype=yn.prototype={constructor:gn,restart:function(t,n,e){if("function"!=typeof t)throw new TypeError("callback is not a function");e=(null==e?vn():+e)+(null==n?0:+n),this._next||lh===this||(lh?lh._next=this:fh=this,lh=this),this._call=t,this._time=e,Mn()},stop:function(){this._call&&(this._call=null,this._time=1/0,Mn())}};var Gh=function(t,n,e){var r=new gn;return n=null==n?0:+n,r.restart(function(e){r.stop(),t(e+n)},n,e),r},Jh=function(t,n,e){var r=new gn,i=n;return null==n?(r.restart(t,n,e),r):(n=+n,e=null==e?vn():+e,r.restart(function o(u){u+=i,r.restart(o,i+=n,e),t(u)},n,e),r)},Qh=v("start","end","interrupt"),Kh=[],tp=0,np=1,ep=2,rp=3,ip=4,op=5,up=6,ap=function(t,n,e,r,i,o){var u=t.__transition;if(u){if(e in u)return}else t.__transition={};kn(t,e,{name:n,index:r,group:i,on:Qh,tween:Kh,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:tp})},cp=function(t,n){var e,r,i,o=t.__transition,u=!0;if(o){n=null==n?null:n+"";for(i in o)(e=o[i]).name===n?(r=e.state>ep&&e.state<op,e.state=up,e.timer.stop(),r&&e.on.call("interrupt",t,t.__data__,e.index,e.group),delete o[i]):u=!1;u&&delete t.__transition}},sp=function(t){return this.each(function(){cp(this,t)})},fp=function(t,n){var e=this._id;if(t+="",arguments.length<2){for(var r,i=Nn(this.node(),e).tween,o=0,u=i.length;o<u;++o)if((r=i[o]).name===t)return r.value;return null}return this.each((null==n?En:An)(e,t,n))},lp=function(t,n){var e;return("number"==typeof n?xh:n instanceof St?vh:(e=St(n))?(n=e,vh):Th)(t,n)},hp=function(t,n){var e=Af(t),r="transform"===e?zh:lp;return this.attrTween(t,"function"==typeof n?(e.local?Un:qn)(e,r,Cn(this,"attr."+t,n)):null==n?(e.local?Pn:zn)(e):(e.local?Rn:Ln)(e,r,n+""))},pp=function(t,n){var e="attr."+t;if(arguments.length<2)return(e=this.tween(e))&&e._value;if(null==n)return this.tween(e,null);if("function"!=typeof n)throw new Error;var r=Af(t);return this.tween(e,(r.local?Dn:On)(r,n))},dp=function(t){var n=this._id;return arguments.length?this.each(("function"==typeof t?Fn:In)(n,t)):Nn(this.node(),n).delay},vp=function(t){var n=this._id;return arguments.length?this.each(("function"==typeof t?Yn:Bn)(n,t)):Nn(this.node(),n).duration},_p=function(t){var n=this._id;return arguments.length?this.each(jn(n,t)):Nn(this.node(),n).ease},gp=function(t){"function"!=typeof t&&(t=qf(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o,u=n[i],a=u.length,c=r[i]=[],s=0;s<a;++s)(o=u[s])&&t.call(o,o.__data__,s,u)&&c.push(o);return new te(r,this._parents,this._name,this._id)},yp=function(t){if(t._id!==this._id)throw new Error;for(var n=this._groups,e=t._groups,r=n.length,i=e.length,o=Math.min(r,i),u=new Array(r),a=0;a<o;++a)for(var c,s=n[a],f=e[a],l=s.length,h=u[a]=new Array(l),p=0;p<l;++p)(c=s[p]||f[p])&&(h[p]=c);for(;a<r;++a)u[a]=n[a];return new te(u,this._parents,this._name,this._id)},mp=function(t,n){var e=this._id;return arguments.length<2?Nn(this.node(),e).on.on(t):this.each(Xn(e,t,n))},xp=function(){return this.on("end.remove",Vn(this._id))},bp=function(t){var n=this._name,e=this._id;"function"!=typeof t&&(t=Yf(t));for(var r=this._groups,i=r.length,o=new Array(i),u=0;u<i;++u)for(var a,c,s=r[u],f=s.length,l=o[u]=new Array(f),h=0;h<f;++h)(a=s[h])&&(c=t.call(a,a.__data__,h,s))&&("__data__"in a&&(c.__data__=a.__data__),l[h]=c,ap(l[h],n,e,h,l,Nn(a,e)));return new te(o,this._parents,n,e)},wp=function(t){var n=this._name,e=this._id;"function"!=typeof t&&(t=jf(t));for(var r=this._groups,i=r.length,o=[],u=[],a=0;a<i;++a)for(var c,s=r[a],f=s.length,l=0;l<f;++l)if(c=s[l]){for(var h,p=t.call(c,c.__data__,l,s),d=Nn(c,e),v=0,_=p.length;v<_;++v)(h=p[v])&&ap(h,n,e,v,p,d);o.push(p),u.push(c)}return new te(o,u,n,e)},Mp=_t.prototype.constructor,Tp=function(){return new Mp(this._groups,this._parents)},Sp=function(t,n,e){var r="transform"==(t+="")?Ch:lp;return null==n?this.styleTween(t,$n(t,r)).on("end.style."+t,Wn(t)):this.styleTween(t,"function"==typeof n?Gn(t,r,Cn(this,"style."+t,n)):Zn(t,r,n+""),e)},Np=function(t,n,e){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==n)return this.tween(r,null);if("function"!=typeof n)throw new Error;return this.tween(r,Jn(t,n,null==e?"":e))},kp=function(t){return this.tween("text","function"==typeof t?Kn(Cn(this,"text",t)):Qn(null==t?"":t+""))},Ep=function(){for(var t=this._name,n=this._id,e=ee(),r=this._groups,i=r.length,o=0;o<i;++o)for(var u,a=r[o],c=a.length,s=0;s<c;++s)if(u=a[s]){var f=Nn(u,n);ap(u,t,e,s,a,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new te(r,this._parents,t,e)},Ap=0,Cp=_t.prototype;te.prototype=ne.prototype={constructor:te,select:bp,selectAll:wp,filter:gp,merge:yp,selection:Tp,transition:Ep,call:Cp.call,nodes:Cp.nodes,node:Cp.node,size:Cp.size,empty:Cp.empty,each:Cp.each,on:mp,attr:hp,attrTween:pp,style:Sp,styleTween:Np,text:kp,remove:xp,tween:fp,delay:dp,duration:vp,ease:_p};var zp=function t(n){function e(t){return Math.pow(t,n)}return n=+n,e.exponent=t,e}(3),Pp=function t(n){function e(t){return 1-Math.pow(1-t,n)}return n=+n,e.exponent=t,e}(3),Lp=function t(n){function e(t){return((t*=2)<=1?Math.pow(t,n):2-Math.pow(2-t,n))/2}return n=+n,e.exponent=t,e}(3),Rp=Math.PI,qp=Rp/2,Up=4/11,Dp=6/11,Op=8/11,Fp=.75,Ip=9/11,Yp=10/11,Bp=.9375,jp=21/22,Hp=63/64,Xp=1/Up/Up,Vp=function t(n){function e(t){return t*t*((n+1)*t-n)}return n=+n,e.overshoot=t,e}(1.70158),$p=function t(n){function e(t){return--t*t*((n+1)*t+n)+1}return n=+n,e.overshoot=t,e}(1.70158),Wp=function t(n){function e(t){return((t*=2)<1?t*t*((n+1)*t-n):(t-=2)*t*((n+1)*t+n)+2)/2}return n=+n,e.overshoot=t,e}(1.70158),Zp=2*Math.PI,Gp=function t(n,e){function r(t){return n*Math.pow(2,10*--t)*Math.sin((i-t)/e)}var i=Math.asin(1/(n=Math.max(1,n)))*(e/=Zp);return r.amplitude=function(n){return t(n,e*Zp)},r.period=function(e){return t(n,e)},r}(1,.3),Jp=function t(n,e){function r(t){return 1-n*Math.pow(2,-10*(t=+t))*Math.sin((t+i)/e)}var i=Math.asin(1/(n=Math.max(1,n)))*(e/=Zp);return r.amplitude=function(n){return t(n,e*Zp)},r.period=function(e){return t(n,e)},r}(1,.3),Qp=function t(n,e){function r(t){return((t=2*t-1)<0?n*Math.pow(2,10*t)*Math.sin((i-t)/e):2-n*Math.pow(2,-10*t)*Math.sin((i+t)/e))/2}var i=Math.asin(1/(n=Math.max(1,n)))*(e/=Zp);return r.amplitude=function(n){return t(n,e*Zp)},r.period=function(e){return t(n,e)},r}(1,.3),Kp={time:null,delay:0,duration:250,ease:se},td=function(t){var n,e;t instanceof te?(n=t._id,t=t._name):(n=ee(),(e=Kp).time=vn(),t=null==t?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var u,a=r[o],c=a.length,s=0;s<c;++s)(u=a[s])&&ap(u,t,n,s,a,e||we(u,n));return new te(r,this._parents,t,n)};_t.prototype.interrupt=sp,_t.prototype.transition=td;var nd=[null],ed=function(t,n){var e,r,i=t.__transition;if(i){n=null==n?null:n+"";for(r in i)if((e=i[r]).state>np&&e.name===n)return new te([[t]],nd,n,+r)}return null},rd=function(t){return function(){return t}},id=function(t,n,e){this.target=t,this.type=n,this.selection=e},od=function(){t.event.preventDefault(),t.event.stopImmediatePropagation()},ud={name:"drag"},ad={name:"space"},cd={name:"handle"},sd={name:"center"},fd={name:"x",handles:["e","w"].map(Te),input:function(t,n){return t&&[[t[0],n[0][1]],[t[1],n[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},ld={name:"y",handles:["n","s"].map(Te),input:function(t,n){return t&&[[n[0][0],t[0]],[n[1][0],t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},hd={name:"xy",handles:["n","e","s","w","nw","ne","se","sw"].map(Te),input:function(t){return t},output:function(t){return t}},pd={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},dd={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},vd={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},_d={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},gd={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1},yd=function(){return Pe(hd)},md=Math.cos,xd=Math.sin,bd=Math.PI,wd=bd/2,Md=2*bd,Td=Math.max,Sd=function(){function t(t){var o,u,a,c,s,f,l=t.length,h=[],p=Js(l),d=[],v=[],_=v.groups=new Array(l),g=new Array(l*l);for(o=0,s=-1;++s<l;){for(u=0,f=-1;++f<l;)u+=t[s][f];h.push(u),d.push(Js(l)),o+=u}for(e&&p.sort(function(t,n){return e(h[t],h[n])}),r&&d.forEach(function(n,e){n.sort(function(n,i){return r(t[e][n],t[e][i])})}),o=Td(0,Md-n*l)/o,c=o?n:Md/l,u=0,s=-1;++s<l;){for(a=u,f=-1;++f<l;){var y=p[s],m=d[y][f],x=t[y][m],b=u,w=u+=x*o;g[m*l+y]={index:y,subindex:m,startAngle:b,endAngle:w,value:x}}_[y]={index:y,startAngle:a,endAngle:u,value:h[y]},u+=c}for(s=-1;++s<l;)for(f=s-1;++f<l;){var M=g[f*l+s],T=g[s*l+f];(M.value||T.value)&&v.push(M.value<T.value?{source:T,target:M}:{source:M,target:T})}return i?v.sort(i):v}var n=0,e=null,r=null,i=null;return t.padAngle=function(e){return arguments.length?(n=Td(0,e),t):n},t.sortGroups=function(n){return arguments.length?(e=n,t):e},t.sortSubgroups=function(n){return arguments.length?(r=n,t):r},t.sortChords=function(n){return arguments.length?(null==n?i=null:(i=Le(n))._=n,t):i&&i._},t},Nd=Array.prototype.slice,kd=function(t){return function(){return t}},Ed=Math.PI,Ad=2*Ed,Cd=Ad-1e-6;Re.prototype=qe.prototype={constructor:Re,moveTo:function(t,n){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+n)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,n){this._+="L"+(this._x1=+t)+","+(this._y1=+n)},quadraticCurveTo:function(t,n,e,r){this._+="Q"+ +t+","+ +n+","+(this._x1=+e)+","+(this._y1=+r)},bezierCurveTo:function(t,n,e,r,i,o){this._+="C"+ +t+","+ +n+","+ +e+","+ +r+","+(this._x1=+i)+","+(this._y1=+o)},arcTo:function(t,n,e,r,i){t=+t,n=+n,e=+e,r=+r,i=+i;var o=this._x1,u=this._y1,a=e-t,c=r-n,s=o-t,f=u-n,l=s*s+f*f;if(i<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=n);else if(l>1e-6)if(Math.abs(f*a-c*s)>1e-6&&i){var h=e-o,p=r-u,d=a*a+c*c,v=h*h+p*p,_=Math.sqrt(d),g=Math.sqrt(l),y=i*Math.tan((Ed-Math.acos((d+l-v)/(2*_*g)))/2),m=y/g,x=y/_;Math.abs(m-1)>1e-6&&(this._+="L"+(t+m*s)+","+(n+m*f)),this._+="A"+i+","+i+",0,0,"+ +(f*h>s*p)+","+(this._x1=t+x*a)+","+(this._y1=n+x*c)}else this._+="L"+(this._x1=t)+","+(this._y1=n);else;},arc:function(t,n,e,r,i,o){t=+t,n=+n,e=+e;var u=e*Math.cos(r),a=e*Math.sin(r),c=t+u,s=n+a,f=1^o,l=o?r-i:i-r;if(e<0)throw new Error("negative radius: "+e);null===this._x1?this._+="M"+c+","+s:(Math.abs(this._x1-c)>1e-6||Math.abs(this._y1-s)>1e-6)&&(this._+="L"+c+","+s),e&&(l<0&&(l=l%Ad+Ad),l>Cd?this._+="A"+e+","+e+",0,1,"+f+","+(t-u)+","+(n-a)+"A"+e+","+e+",0,1,"+f+","+(this._x1=c)+","+(this._y1=s):l>1e-6&&(this._+="A"+e+","+e+",0,"+ +(l>=Ed)+","+f+","+(this._x1=t+e*Math.cos(i))+","+(this._y1=n+e*Math.sin(i))))},rect:function(t,n,e,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+n)+"h"+ +e+"v"+ +r+"h"+-e+"Z"},toString:function(){return this._}};var zd=function(){function t(){var t,a=Nd.call(arguments),c=n.apply(this,a),s=e.apply(this,a),f=+r.apply(this,(a[0]=c,a)),l=i.apply(this,a)-wd,h=o.apply(this,a)-wd,p=f*md(l),d=f*xd(l),v=+r.apply(this,(a[0]=s,a)),_=i.apply(this,a)-wd,g=o.apply(this,a)-wd;if(u||(u=t=qe()),u.moveTo(p,d),u.arc(0,0,f,l,h),l===_&&h===g||(u.quadraticCurveTo(0,0,v*md(_),v*xd(_)),u.arc(0,0,v,_,g)),u.quadraticCurveTo(0,0,p,d),u.closePath(),t)return u=null,t+""||null}var n=Ue,e=De,r=Oe,i=Fe,o=Ie,u=null;return t.radius=function(n){return arguments.length?(r="function"==typeof n?n:kd(+n),t):r},t.startAngle=function(n){return arguments.length?(i="function"==typeof n?n:kd(+n),t):i},t.endAngle=function(n){return arguments.length?(o="function"==typeof n?n:kd(+n),t):o},t.source=function(e){return arguments.length?(n=e,t):n},t.target=function(n){return arguments.length?(e=n,t):e},t.context=function(n){return arguments.length?(u=null==n?null:n,t):u},t};Ye.prototype=Be.prototype={constructor:Ye,has:function(t){return"$"+t in this},get:function(t){return this["$"+t]},set:function(t,n){return this["$"+t]=n,this},remove:function(t){var n="$"+t;return n in this&&delete this[n]},clear:function(){for(var t in this)"$"===t[0]&&delete this[t]},keys:function(){var t=[];for(var n in this)"$"===n[0]&&t.push(n.slice(1));return t},values:function(){var t=[];for(var n in this)"$"===n[0]&&t.push(this[n]);return t},entries:function(){var t=[];for(var n in this)"$"===n[0]&&t.push({key:n.slice(1),value:this[n]});return t},size:function(){var t=0;for(var n in this)"$"===n[0]&&++t;return t},empty:function(){for(var t in this)if("$"===t[0])return!1;return!0},each:function(t){for(var n in this)"$"===n[0]&&t(this[n],n.slice(1),this)}};var Pd=function(){function t(n,i,u,a){if(i>=o.length)return null!=r?r(n):null!=e?n.sort(e):n;for(var c,s,f,l=-1,h=n.length,p=o[i++],d=Be(),v=u();++l<h;)(f=d.get(c=p(s=n[l])+""))?f.push(s):d.set(c,[s]);return d.each(function(n,e){a(v,e,t(n,i,u,a))}),v}function n(t,e){if(++e>o.length)return t;var i,a=u[e-1];return null!=r&&e>=o.length?i=t.entries():(i=[],t.each(function(t,r){i.push({key:r,values:n(t,e)})})),null!=a?i.sort(function(t,n){return a(t.key,n.key)}):i}var e,r,i,o=[],u=[];return i={object:function(n){return t(n,0,je,He)},map:function(n){return t(n,0,Xe,Ve)},entries:function(e){return n(t(e,0,Xe,Ve),0)},key:function(t){return o.push(t),i},sortKeys:function(t){return u[o.length-1]=t,i},sortValues:function(t){return e=t,i},rollup:function(t){return r=t,i}}},Ld=Be.prototype;$e.prototype=We.prototype={constructor:$e,has:Ld.has,add:function(t){return t+="",this["$"+t]=t,this},remove:Ld.remove,clear:Ld.clear,values:Ld.keys,size:Ld.size,empty:Ld.empty,each:Ld.each};var Rd=function(t){var n=[];for(var e in t)n.push(e);return n},qd=function(t){var n=[];for(var e in t)n.push(t[e]);return n},Ud=function(t){var n=[];for(var e in t)n.push({key:e,value:t[e]});return n},Dd=function(t){function n(t,n){var r,i,o=e(t,function(t,e){if(r)return r(t,e-1);i=t,r=n?Ge(t,n):Ze(t)});return o.columns=i,o}function e(t,n){function e(){if(f>=s)return u;if(i)return i=!1,o;var n,e=f;if(34===t.charCodeAt(e)){for(var r=e;r++<s;)if(34===t.charCodeAt(r)){if(34!==t.charCodeAt(r+1))break;++r}return f=r+2,n=t.charCodeAt(r+1),13===n?(i=!0,10===t.charCodeAt(r+2)&&++f):10===n&&(i=!0),t.slice(e+1,r).replace(/""/g,'"')}for(;f<s;){var a=1;if(10===(n=t.charCodeAt(f++)))i=!0;else if(13===n)i=!0,10===t.charCodeAt(f)&&(++f,++a);else if(n!==c)continue;return t.slice(e,f-a)}return t.slice(e)}for(var r,i,o={},u={},a=[],s=t.length,f=0,l=0;(r=e())!==u;){for(var h=[];r!==o&&r!==u;)h.push(r),r=e();n&&null==(h=n(h,l++))||a.push(h)}return a}function r(n,e){return null==e&&(e=Je(n)),[e.map(u).join(t)].concat(n.map(function(n){return e.map(function(t){return u(n[t])}).join(t)})).join("\n")}function i(t){return t.map(o).join("\n")}function o(n){return n.map(u).join(t)}function u(t){return null==t?"":a.test(t+="")?'"'+t.replace(/\"/g,'""')+'"':t}var a=new RegExp('["'+t+"\n\r]"),c=t.charCodeAt(0);return{parse:n,parseRows:e,format:r,formatRows:i}},Od=Dd(","),Fd=Od.parse,Id=Od.parseRows,Yd=Od.format,Bd=Od.formatRows,jd=Dd("\t"),Hd=jd.parse,Xd=jd.parseRows,Vd=jd.format,$d=jd.formatRows,Wd=function(t,n){function e(){var e,i,o=r.length,u=0,a=0;for(e=0;e<o;++e)i=r[e],u+=i.x,a+=i.y;for(u=u/o-t,a=a/o-n,e=0;e<o;++e)i=r[e],i.x-=u,i.y-=a}var r;return null==t&&(t=0),null==n&&(n=0),e.initialize=function(t){r=t},e.x=function(n){return arguments.length?(t=+n,e):t},e.y=function(t){return arguments.length?(n=+t,e):n},e},Zd=function(t){return function(){return t}},Gd=function(){return 1e-6*(Math.random()-.5)},Jd=function(t){var n=+this._x.call(null,t),e=+this._y.call(null,t);return Qe(this.cover(n,e),n,e,t)},Qd=function(t,n){if(isNaN(t=+t)||isNaN(n=+n))return this;var e=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(e))i=(e=Math.floor(t))+1,o=(r=Math.floor(n))+1;else{if(!(e>t||t>i||r>n||n>o))return this;var u,a,c=i-e,s=this._root;switch(a=(n<(r+o)/2)<<1|t<(e+i)/2){case 0:do{u=new Array(4),u[a]=s,s=u}while(c*=2,i=e+c,o=r+c,t>i||n>o);break;case 1:do{u=new Array(4),u[a]=s,s=u}while(c*=2,e=i-c,o=r+c,e>t||n>o);break;case 2:do{u=new Array(4),u[a]=s,s=u}while(c*=2,i=e+c,r=o-c,t>i||r>n);break;case 3:do{u=new Array(4),u[a]=s,s=u}while(c*=2,e=i-c,r=o-c,e>t||r>n)}this._root&&this._root.length&&(this._root=s)}return this._x0=e,this._y0=r,this._x1=i,this._y1=o,this},Kd=function(){var t=[];return this.visit(function(n){if(!n.length)do{t.push(n.data)}while(n=n.next)}),t},tv=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},nv=function(t,n,e,r,i){this.node=t,this.x0=n,this.y0=e,this.x1=r,this.y1=i},ev=function(t,n,e){var r,i,o,u,a,c,s,f=this._x0,l=this._y0,h=this._x1,p=this._y1,d=[],v=this._root;for(v&&d.push(new nv(v,f,l,h,p)),null==e?e=1/0:(f=t-e,l=n-e,h=t+e,p=n+e,e*=e);c=d.pop();)if(!(!(v=c.node)||(i=c.x0)>h||(o=c.y0)>p||(u=c.x1)<f||(a=c.y1)<l))if(v.length){var _=(i+u)/2,g=(o+a)/2;d.push(new nv(v[3],_,g,u,a),new nv(v[2],i,g,_,a),new nv(v[1],_,o,u,g),new nv(v[0],i,o,_,g)),(s=(n>=g)<<1|t>=_)&&(c=d[d.length-1],d[d.length-1]=d[d.length-1-s],d[d.length-1-s]=c)}else{var y=t-+this._x.call(null,v.data),m=n-+this._y.call(null,v.data),x=y*y+m*m;if(x<e){var b=Math.sqrt(e=x);f=t-b,l=n-b,h=t+b,p=n+b,r=v.data}}return r},rv=function(t){if(isNaN(o=+this._x.call(null,t))||isNaN(u=+this._y.call(null,t)))return this;var n,e,r,i,o,u,a,c,s,f,l,h,p=this._root,d=this._x0,v=this._y0,_=this._x1,g=this._y1;if(!p)return this;if(p.length)for(;;){if((s=o>=(a=(d+_)/2))?d=a:_=a,(f=u>=(c=(v+g)/2))?v=c:g=c,n=p,!(p=p[l=f<<1|s]))return this;if(!p.length)break;(n[l+1&3]||n[l+2&3]||n[l+3&3])&&(e=n,h=l)}for(;p.data!==t;)if(r=p,!(p=p.next))return this;return(i=p.next)&&delete p.next,r?(i?r.next=i:delete r.next,this):n?(i?n[l]=i:delete n[l],(p=n[0]||n[1]||n[2]||n[3])&&p===(n[3]||n[2]||n[1]||n[0])&&!p.length&&(e?e[h]=p:this._root=p),this):(this._root=i,this)},iv=function(){return this._root},ov=function(){var t=0;return this.visit(function(n){if(!n.length)do{++t}while(n=n.next)}),t},uv=function(t){var n,e,r,i,o,u,a=[],c=this._root;for(c&&a.push(new nv(c,this._x0,this._y0,this._x1,this._y1));n=a.pop();)if(!t(c=n.node,r=n.x0,i=n.y0,o=n.x1,u=n.y1)&&c.length){var s=(r+o)/2,f=(i+u)/2;(e=c[3])&&a.push(new nv(e,s,f,o,u)),(e=c[2])&&a.push(new nv(e,r,f,s,u)),(e=c[1])&&a.push(new nv(e,s,i,o,f)),(e=c[0])&&a.push(new nv(e,r,i,s,f))}return this},av=function(t){var n,e=[],r=[];for(this._root&&e.push(new nv(this._root,this._x0,this._y0,this._x1,this._y1));n=e.pop();){var i=n.node;if(i.length){var o,u=n.x0,a=n.y0,c=n.x1,s=n.y1,f=(u+c)/2,l=(a+s)/2;(o=i[0])&&e.push(new nv(o,u,a,f,l)),(o=i[1])&&e.push(new nv(o,f,a,c,l)),(o=i[2])&&e.push(new nv(o,u,l,f,s)),(o=i[3])&&e.push(new nv(o,f,l,c,s))}r.push(n)}for(;n=r.pop();)t(n.node,n.x0,n.y0,n.x1,n.y1);return this},cv=function(t){return arguments.length?(this._x=t,this):this._x},sv=function(t){return arguments.length?(this._y=t,this):this._y},fv=rr.prototype=ir.prototype;fv.copy=function(){var t,n,e=new ir(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return e;if(!r.length)return e._root=or(r),e;for(t=[{source:r,target:e._root=new Array(4)}];r=t.pop();)for(var i=0;i<4;++i)(n=r.source[i])&&(n.length?t.push({source:n,target:r.target[i]=new Array(4)}):r.target[i]=or(n));return e},fv.add=Jd,fv.addAll=Ke,fv.cover=Qd,fv.data=Kd,fv.extent=tv,fv.find=ev,fv.remove=rv,fv.removeAll=tr,fv.root=iv,fv.size=ov,fv.visit=uv,fv.visitAfter=av,fv.x=cv,fv.y=sv;var lv,hv=function(t){function n(){function t(t,n,e,r,i){var o=t.data,a=t.r,p=l+a;{if(!o)return n>s+p||r<s-p||e>f+p||i<f-p;if(o.index>c.index){var d=s-o.x-o.vx,v=f-o.y-o.vy,_=d*d+v*v;_<p*p&&(0===d&&(d=Gd(),_+=d*d),0===v&&(v=Gd(),_+=v*v),_=(p-(_=Math.sqrt(_)))/_*u,c.vx+=(d*=_)*(p=(a*=a)/(h+a)),c.vy+=(v*=_)*p,o.vx-=d*(p=1-p),o.vy-=v*p)}}}for(var n,r,c,s,f,l,h,p=i.length,d=0;d<a;++d)for(r=rr(i,ur,ar).visitAfter(e),n=0;n<p;++n)c=i[n],l=o[c.index],h=l*l,s=c.x+c.vx,f=c.y+c.vy,r.visit(t)}function e(t){if(t.data)return t.r=o[t.data.index];for(var n=t.r=0;n<4;++n)t[n]&&t[n].r>t.r&&(t.r=t[n].r)}function r(){if(i){var n,e,r=i.length;for(o=new Array(r),n=0;n<r;++n)e=i[n],o[e.index]=+t(e,n,i)}}var i,o,u=1,a=1;return"function"!=typeof t&&(t=Zd(null==t?1:+t)),n.initialize=function(t){i=t,r()},n.iterations=function(t){return arguments.length?(a=+t,n):a},n.strength=function(t){return arguments.length?(u=+t,n):u},n.radius=function(e){return arguments.length?(t="function"==typeof e?e:Zd(+e),r(),n):t},n},pv=function(t){function n(t){return 1/Math.min(s[t.source.index],s[t.target.index])}function e(n){for(var e=0,r=t.length;e<d;++e)for(var i,o,c,s,l,h,p,v=0;v<r;++v)i=t[v],o=i.source,c=i.target,s=c.x+c.vx-o.x-o.vx||Gd(),l=c.y+c.vy-o.y-o.vy||Gd(),h=Math.sqrt(s*s+l*l),h=(h-a[v])/h*n*u[v],s*=h,l*=h,c.vx-=s*(p=f[v]),c.vy-=l*p,o.vx+=s*(p=1-p),o.vy+=l*p}function r(){if(c){var n,e,r=c.length,h=t.length,p=Be(c,l);for(n=0,s=new Array(r);n<h;++n)e=t[n],e.index=n,"object"!=typeof e.source&&(e.source=sr(p,e.source)),"object"!=typeof e.target&&(e.target=sr(p,e.target)),s[e.source.index]=(s[e.source.index]||0)+1,s[e.target.index]=(s[e.target.index]||0)+1;for(n=0,f=new Array(h);n<h;++n)e=t[n],f[n]=s[e.source.index]/(s[e.source.index]+s[e.target.index]);u=new Array(h),i(),a=new Array(h),o()}}function i(){if(c)for(var n=0,e=t.length;n<e;++n)u[n]=+h(t[n],n,t)}function o(){if(c)for(var n=0,e=t.length;n<e;++n)a[n]=+p(t[n],n,t)}var u,a,c,s,f,l=cr,h=n,p=Zd(30),d=1;return null==t&&(t=[]),e.initialize=function(t){c=t,r()},e.links=function(n){return arguments.length?(t=n,r(),e):t},e.id=function(t){return arguments.length?(l=t,
e):l},e.iterations=function(t){return arguments.length?(d=+t,e):d},e.strength=function(t){return arguments.length?(h="function"==typeof t?t:Zd(+t),i(),e):h},e.distance=function(t){return arguments.length?(p="function"==typeof t?t:Zd(+t),o(),e):p},e},dv=10,vv=Math.PI*(3-Math.sqrt(5)),_v=function(t){function n(){e(),p.call("tick",o),u<a&&(h.stop(),p.call("end",o))}function e(){var n,e,r=t.length;for(u+=(s-u)*c,l.each(function(t){t(u)}),n=0;n<r;++n)e=t[n],null==e.fx?e.x+=e.vx*=f:(e.x=e.fx,e.vx=0),null==e.fy?e.y+=e.vy*=f:(e.y=e.fy,e.vy=0)}function r(){for(var n,e=0,r=t.length;e<r;++e){if(n=t[e],n.index=e,isNaN(n.x)||isNaN(n.y)){var i=dv*Math.sqrt(e),o=e*vv;n.x=i*Math.cos(o),n.y=i*Math.sin(o)}(isNaN(n.vx)||isNaN(n.vy))&&(n.vx=n.vy=0)}}function i(n){return n.initialize&&n.initialize(t),n}var o,u=1,a=.001,c=1-Math.pow(a,1/300),s=0,f=.6,l=Be(),h=yn(n),p=v("tick","end");return null==t&&(t=[]),r(),o={tick:e,restart:function(){return h.restart(n),o},stop:function(){return h.stop(),o},nodes:function(n){return arguments.length?(t=n,r(),l.each(i),o):t},alpha:function(t){return arguments.length?(u=+t,o):u},alphaMin:function(t){return arguments.length?(a=+t,o):a},alphaDecay:function(t){return arguments.length?(c=+t,o):+c},alphaTarget:function(t){return arguments.length?(s=+t,o):s},velocityDecay:function(t){return arguments.length?(f=1-t,o):1-f},force:function(t,n){return arguments.length>1?(null==n?l.remove(t):l.set(t,i(n)),o):l.get(t)},find:function(n,e,r){var i,o,u,a,c,s=0,f=t.length;for(null==r?r=1/0:r*=r,s=0;s<f;++s)a=t[s],i=n-a.x,o=e-a.y,(u=i*i+o*o)<r&&(c=a,r=u);return c},on:function(t,n){return arguments.length>1?(p.on(t,n),o):p.on(t)}}},gv=function(){function t(t){var n,a=i.length,c=rr(i,fr,lr).visitAfter(e);for(u=t,n=0;n<a;++n)o=i[n],c.visit(r)}function n(){if(i){var t,n,e=i.length;for(a=new Array(e),t=0;t<e;++t)n=i[t],a[n.index]=+c(n,t,i)}}function e(t){var n,e,r,i,o,u=0;if(t.length){for(r=i=o=0;o<4;++o)(n=t[o])&&(e=n.value)&&(u+=e,r+=e*n.x,i+=e*n.y);t.x=r/u,t.y=i/u}else{n=t,n.x=n.data.x,n.y=n.data.y;do{u+=a[n.data.index]}while(n=n.next)}t.value=u}function r(t,n,e,r){if(!t.value)return!0;var i=t.x-o.x,c=t.y-o.y,h=r-n,p=i*i+c*c;if(h*h/l<p)return p<f&&(0===i&&(i=Gd(),p+=i*i),0===c&&(c=Gd(),p+=c*c),p<s&&(p=Math.sqrt(s*p)),o.vx+=i*t.value*u/p,o.vy+=c*t.value*u/p),!0;if(!(t.length||p>=f)){(t.data!==o||t.next)&&(0===i&&(i=Gd(),p+=i*i),0===c&&(c=Gd(),p+=c*c),p<s&&(p=Math.sqrt(s*p)));do{t.data!==o&&(h=a[t.data.index]*u/p,o.vx+=i*h,o.vy+=c*h)}while(t=t.next)}}var i,o,u,a,c=Zd(-30),s=1,f=1/0,l=.81;return t.initialize=function(t){i=t,n()},t.strength=function(e){return arguments.length?(c="function"==typeof e?e:Zd(+e),n(),t):c},t.distanceMin=function(n){return arguments.length?(s=n*n,t):Math.sqrt(s)},t.distanceMax=function(n){return arguments.length?(f=n*n,t):Math.sqrt(f)},t.theta=function(n){return arguments.length?(l=n*n,t):Math.sqrt(l)},t},yv=function(t){function n(t){for(var n,e=0,u=r.length;e<u;++e)n=r[e],n.vx+=(o[e]-n.x)*i[e]*t}function e(){if(r){var n,e=r.length;for(i=new Array(e),o=new Array(e),n=0;n<e;++n)i[n]=isNaN(o[n]=+t(r[n],n,r))?0:+u(r[n],n,r)}}var r,i,o,u=Zd(.1);return"function"!=typeof t&&(t=Zd(null==t?0:+t)),n.initialize=function(t){r=t,e()},n.strength=function(t){return arguments.length?(u="function"==typeof t?t:Zd(+t),e(),n):u},n.x=function(r){return arguments.length?(t="function"==typeof r?r:Zd(+r),e(),n):t},n},mv=function(t){function n(t){for(var n,e=0,u=r.length;e<u;++e)n=r[e],n.vy+=(o[e]-n.y)*i[e]*t}function e(){if(r){var n,e=r.length;for(i=new Array(e),o=new Array(e),n=0;n<e;++n)i[n]=isNaN(o[n]=+t(r[n],n,r))?0:+u(r[n],n,r)}}var r,i,o,u=Zd(.1);return"function"!=typeof t&&(t=Zd(null==t?0:+t)),n.initialize=function(t){r=t,e()},n.strength=function(t){return arguments.length?(u="function"==typeof t?t:Zd(+t),e(),n):u},n.y=function(r){return arguments.length?(t="function"==typeof r?r:Zd(+r),e(),n):t},n},xv=function(t,n){if((e=(t=n?t.toExponential(n-1):t.toExponential()).indexOf("e"))<0)return null;var e,r=t.slice(0,e);return[r.length>1?r[0]+r.slice(2):r,+t.slice(e+1)]},bv=function(t){return t=xv(Math.abs(t)),t?t[1]:NaN},wv=function(t,n){return function(e,r){for(var i=e.length,o=[],u=0,a=t[0],c=0;i>0&&a>0&&(c+a+1>r&&(a=Math.max(1,r-c)),o.push(e.substring(i-=a,i+a)),!((c+=a+1)>r));)a=t[u=(u+1)%t.length];return o.reverse().join(n)}},Mv=function(t){return function(n){return n.replace(/[0-9]/g,function(n){return t[+n]})}},Tv=function(t,n){t=t.toPrecision(n);t:for(var e,r=t.length,i=1,o=-1;i<r;++i)switch(t[i]){case".":o=e=i;break;case"0":0===o&&(o=i),e=i;break;case"e":break t;default:o>0&&(o=0)}return o>0?t.slice(0,o)+t.slice(e+1):t},Sv=function(t,n){var e=xv(t,n);if(!e)return t+"";var r=e[0],i=e[1],o=i-(lv=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,u=r.length;return o===u?r:o>u?r+new Array(o-u+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+xv(t,Math.max(0,n+o-1))[0]},Nv=function(t,n){var e=xv(t,n);if(!e)return t+"";var r=e[0],i=e[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")},kv={"":Tv,"%":function(t,n){return(100*t).toFixed(n)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,n){return t.toExponential(n)},f:function(t,n){return t.toFixed(n)},g:function(t,n){return t.toPrecision(n)},o:function(t){return Math.round(t).toString(8)},p:function(t,n){return Nv(100*t,n)},r:Nv,s:Sv,X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}},Ev=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i;hr.prototype=pr.prototype,pr.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+this.type};var Av,Cv=function(t){return t},zv=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"],Pv=function(t){function n(t){function n(t){var n,i,a,f=_,x=g;if("c"===v)x=y(t)+x,t="";else{t=+t;var b=t<0;if(t=y(Math.abs(t),d),b&&0==+t&&(b=!1),f=(b?"("===s?s:"-":"-"===s||"("===s?"":s)+f,x=x+("s"===v?zv[8+lv/3]:"")+(b&&"("===s?")":""),m)for(n=-1,i=t.length;++n<i;)if(48>(a=t.charCodeAt(n))||a>57){x=(46===a?o+t.slice(n+1):t.slice(n))+x,t=t.slice(0,n);break}}p&&!l&&(t=r(t,1/0));var w=f.length+t.length+x.length,M=w<h?new Array(h-w+1).join(e):"";switch(p&&l&&(t=r(M+t,M.length?h-x.length:1/0),M=""),c){case"<":t=f+t+x+M;break;case"=":t=f+M+t+x;break;case"^":t=M.slice(0,w=M.length>>1)+f+t+x+M.slice(w);break;default:t=M+f+t+x}return u(t)}t=hr(t);var e=t.fill,c=t.align,s=t.sign,f=t.symbol,l=t.zero,h=t.width,p=t.comma,d=t.precision,v=t.type,_="$"===f?i[0]:"#"===f&&/[boxX]/.test(v)?"0"+v.toLowerCase():"",g="$"===f?i[1]:/[%p]/.test(v)?a:"",y=kv[v],m=!v||/[defgprs%]/.test(v);return d=null==d?v?6:12:/[gprs]/.test(v)?Math.max(1,Math.min(21,d)):Math.max(0,Math.min(20,d)),n.toString=function(){return t+""},n}function e(t,e){var r=n((t=hr(t),t.type="f",t)),i=3*Math.max(-8,Math.min(8,Math.floor(bv(e)/3))),o=Math.pow(10,-i),u=zv[8+i/3];return function(t){return r(o*t)+u}}var r=t.grouping&&t.thousands?wv(t.grouping,t.thousands):Cv,i=t.currency,o=t.decimal,u=t.numerals?Mv(t.numerals):Cv,a=t.percent||"%";return{format:n,formatPrefix:e}};dr({decimal:".",thousands:",",grouping:[3],currency:["$",""]});var Lv=function(t){return Math.max(0,-bv(Math.abs(t)))},Rv=function(t,n){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(bv(n)/3)))-bv(Math.abs(t)))},qv=function(t,n){return t=Math.abs(t),n=Math.abs(n)-t,Math.max(0,bv(n)-bv(t))+1},Uv=function(){return new vr};vr.prototype={constructor:vr,reset:function(){this.s=this.t=0},add:function(t){_r(d_,t,this.t),_r(this,d_.s,this.s),this.s?this.t+=d_.t:this.s=d_.t},valueOf:function(){return this.s}};var Dv,Ov,Fv,Iv,Yv,Bv,jv,Hv,Xv,Vv,$v,Wv,Zv,Gv,Jv,Qv,Kv,t_,n_,e_,r_,i_,o_,u_,a_,c_,s_,f_,l_,h_,p_,d_=new vr,v_=1e-6,__=Math.PI,g_=__/2,y_=__/4,m_=2*__,x_=180/__,b_=__/180,w_=Math.abs,M_=Math.atan,T_=Math.atan2,S_=Math.cos,N_=Math.ceil,k_=Math.exp,E_=Math.log,A_=Math.pow,C_=Math.sin,z_=Math.sign||function(t){return t>0?1:t<0?-1:0},P_=Math.sqrt,L_=Math.tan,R_={Feature:function(t,n){br(t.geometry,n)},FeatureCollection:function(t,n){for(var e=t.features,r=-1,i=e.length;++r<i;)br(e[r].geometry,n)}},q_={Sphere:function(t,n){n.sphere()},Point:function(t,n){t=t.coordinates,n.point(t[0],t[1],t[2])},MultiPoint:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)t=e[r],n.point(t[0],t[1],t[2])},LineString:function(t,n){wr(t.coordinates,n,0)},MultiLineString:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)wr(e[r],n,0)},Polygon:function(t,n){Mr(t.coordinates,n)},MultiPolygon:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)Mr(e[r],n)},GeometryCollection:function(t,n){for(var e=t.geometries,r=-1,i=e.length;++r<i;)br(e[r],n)}},U_=function(t,n){t&&R_.hasOwnProperty(t.type)?R_[t.type](t,n):br(t,n)},D_=Uv(),O_=Uv(),F_={point:xr,lineStart:xr,lineEnd:xr,polygonStart:function(){D_.reset(),F_.lineStart=Tr,F_.lineEnd=Sr},polygonEnd:function(){var t=+D_;O_.add(t<0?m_+t:t),this.lineStart=this.lineEnd=this.point=xr},sphere:function(){O_.add(m_)}},I_=function(t){return O_.reset(),U_(t,F_),2*O_},Y_=Uv(),B_={point:qr,lineStart:Dr,lineEnd:Or,polygonStart:function(){B_.point=Fr,B_.lineStart=Ir,B_.lineEnd=Yr,Y_.reset(),F_.polygonStart()},polygonEnd:function(){F_.polygonEnd(),B_.point=qr,B_.lineStart=Dr,B_.lineEnd=Or,D_<0?(Bv=-(Hv=180),jv=-(Xv=90)):Y_>v_?Xv=90:Y_<-v_&&(jv=-90),Jv[0]=Bv,Jv[1]=Hv}},j_=function(t){var n,e,r,i,o,u,a;if(Xv=Hv=-(Bv=jv=1/0),Gv=[],U_(t,B_),e=Gv.length){for(Gv.sort(jr),n=1,r=Gv[0],o=[r];n<e;++n)i=Gv[n],Hr(r,i[0])||Hr(r,i[1])?(Br(r[0],i[1])>Br(r[0],r[1])&&(r[1]=i[1]),Br(i[0],r[1])>Br(r[0],r[1])&&(r[0]=i[0])):o.push(r=i);for(u=-1/0,e=o.length-1,n=0,r=o[e];n<=e;r=i,++n)i=o[n],(a=Br(r[1],i[0]))>u&&(u=a,Bv=i[0],Hv=r[1])}return Gv=Jv=null,Bv===1/0||jv===1/0?[[NaN,NaN],[NaN,NaN]]:[[Bv,jv],[Hv,Xv]]},H_={sphere:xr,point:Xr,lineStart:$r,lineEnd:Gr,polygonStart:function(){H_.lineStart=Jr,H_.lineEnd=Qr},polygonEnd:function(){H_.lineStart=$r,H_.lineEnd=Gr}},X_=function(t){Qv=Kv=t_=n_=e_=r_=i_=o_=u_=a_=c_=0,U_(t,H_);var n=u_,e=a_,r=c_,i=n*n+e*e+r*r;return i<1e-12&&(n=r_,e=i_,r=o_,Kv<v_&&(n=t_,e=n_,r=e_),(i=n*n+e*e+r*r)<1e-12)?[NaN,NaN]:[T_(e,n)*x_,yr(r/P_(i))*x_]},V_=function(t){return function(){return t}},$_=function(t,n){function e(e,r){return e=t(e,r),n(e[0],e[1])}return t.invert&&n.invert&&(e.invert=function(e,r){return(e=n.invert(e,r))&&t.invert(e[0],e[1])}),e};ni.invert=ni;var W_,Z_,G_,J_,Q_,K_,tg,ng,eg,rg,ig,og=function(t){function n(n){return n=t(n[0]*b_,n[1]*b_),n[0]*=x_,n[1]*=x_,n}return t=ei(t[0]*b_,t[1]*b_,t.length>2?t[2]*b_:0),n.invert=function(n){return n=t.invert(n[0]*b_,n[1]*b_),n[0]*=x_,n[1]*=x_,n},n},ug=function(){function t(t,n){e.push(t=r(t,n)),t[0]*=x_,t[1]*=x_}function n(){var t=i.apply(this,arguments),n=o.apply(this,arguments)*b_,c=u.apply(this,arguments)*b_;return e=[],r=ei(-t[0]*b_,-t[1]*b_,0).invert,ui(a,n,c,1),t={type:"Polygon",coordinates:[e]},e=r=null,t}var e,r,i=V_([0,0]),o=V_(90),u=V_(6),a={point:t};return n.center=function(t){return arguments.length?(i="function"==typeof t?t:V_([+t[0],+t[1]]),n):i},n.radius=function(t){return arguments.length?(o="function"==typeof t?t:V_(+t),n):o},n.precision=function(t){return arguments.length?(u="function"==typeof t?t:V_(+t),n):u},n},ag=function(){var t,n=[];return{point:function(n,e){t.push([n,e])},lineStart:function(){n.push(t=[])},lineEnd:xr,rejoin:function(){n.length>1&&n.push(n.pop().concat(n.shift()))},result:function(){var e=n;return n=[],t=null,e}}},cg=function(t,n,e,r,i,o){var u,a=t[0],c=t[1],s=n[0],f=n[1],l=0,h=1,p=s-a,d=f-c;if(u=e-a,p||!(u>0)){if(u/=p,p<0){if(u<l)return;u<h&&(h=u)}else if(p>0){if(u>h)return;u>l&&(l=u)}if(u=i-a,p||!(u<0)){if(u/=p,p<0){if(u>h)return;u>l&&(l=u)}else if(p>0){if(u<l)return;u<h&&(h=u)}if(u=r-c,d||!(u>0)){if(u/=d,d<0){if(u<l)return;u<h&&(h=u)}else if(d>0){if(u>h)return;u>l&&(l=u)}if(u=o-c,d||!(u<0)){if(u/=d,d<0){if(u>h)return;u>l&&(l=u)}else if(d>0){if(u<l)return;u<h&&(h=u)}return l>0&&(t[0]=a+l*p,t[1]=c+l*d),h<1&&(n[0]=a+h*p,n[1]=c+h*d),!0}}}}},sg=function(t,n){return w_(t[0]-n[0])<v_&&w_(t[1]-n[1])<v_},fg=function(t,n,e,r,i){var o,u,a=[],c=[];if(t.forEach(function(t){if(!((n=t.length-1)<=0)){var n,e,r=t[0],u=t[n];if(sg(r,u)){for(i.lineStart(),o=0;o<n;++o)i.point((r=t[o])[0],r[1]);return void i.lineEnd()}a.push(e=new ci(r,t,null,!0)),c.push(e.o=new ci(r,null,e,!1)),a.push(e=new ci(u,t,null,!1)),c.push(e.o=new ci(u,null,e,!0))}}),a.length){for(c.sort(n),si(a),si(c),o=0,u=c.length;o<u;++o)c[o].e=e=!e;for(var s,f,l=a[0];;){for(var h=l,p=!0;h.v;)if((h=h.n)===l)return;s=h.z,i.lineStart();do{if(h.v=h.o.v=!0,h.e){if(p)for(o=0,u=s.length;o<u;++o)i.point((f=s[o])[0],f[1]);else r(h.x,h.n.x,1,i);h=h.n}else{if(p)for(s=h.p.z,o=s.length-1;o>=0;--o)i.point((f=s[o])[0],f[1]);else r(h.x,h.p.x,-1,i);h=h.p}h=h.o,s=h.z,p=!p}while(!h.v);i.lineEnd()}}},lg=1e9,hg=-lg,pg=function(){var t,n,e,r=0,i=0,o=960,u=500;return e={stream:function(e){return t&&n===e?t:t=fi(r,i,o,u)(n=e)},extent:function(a){return arguments.length?(r=+a[0][0],i=+a[0][1],o=+a[1][0],u=+a[1][1],t=n=null,e):[[r,i],[o,u]]}}},dg=Uv(),vg=function(t,n){var e=n[0],r=n[1],i=[C_(e),-S_(e),0],o=0,u=0;dg.reset();for(var a=0,c=t.length;a<c;++a)if(f=(s=t[a]).length)for(var s,f,l=s[f-1],h=l[0],p=l[1]/2+y_,d=C_(p),v=S_(p),_=0;_<f;++_,h=y,d=x,v=b,l=g){var g=s[_],y=g[0],m=g[1]/2+y_,x=C_(m),b=S_(m),w=y-h,M=w>=0?1:-1,T=M*w,S=T>__,N=d*x;if(dg.add(T_(N*M*C_(T),v*b+N*S_(T))),o+=S?w+M*m_:w,S^h>=e^y>=e){var k=zr(Ar(l),Ar(g));Rr(k);var E=zr(i,k);Rr(E);var A=(S^w>=0?-1:1)*yr(E[2]);(r>A||r===A&&(k[0]||k[1]))&&(u+=S^w>=0?1:-1)}}return(o<-v_||o<v_&&dg<-v_)^1&u},_g=Uv(),gg={sphere:xr,point:xr,lineStart:li,lineEnd:xr,polygonStart:xr,polygonEnd:xr},yg=function(t){return _g.reset(),U_(t,gg),+_g},mg=[null,null],xg={type:"LineString",coordinates:mg},bg=function(t,n){return mg[0]=t,mg[1]=n,yg(xg)},wg={Feature:function(t,n){return vi(t.geometry,n)},FeatureCollection:function(t,n){for(var e=t.features,r=-1,i=e.length;++r<i;)if(vi(e[r].geometry,n))return!0;return!1}},Mg={Sphere:function(){return!0},Point:function(t,n){return _i(t.coordinates,n)},MultiPoint:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)if(_i(e[r],n))return!0;return!1},LineString:function(t,n){return gi(t.coordinates,n)},MultiLineString:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)if(gi(e[r],n))return!0;return!1},Polygon:function(t,n){return yi(t.coordinates,n)},MultiPolygon:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)if(yi(e[r],n))return!0;return!1},GeometryCollection:function(t,n){for(var e=t.geometries,r=-1,i=e.length;++r<i;)if(vi(e[r],n))return!0;return!1}},Tg=function(t,n){return(t&&wg.hasOwnProperty(t.type)?wg[t.type]:vi)(t,n)},Sg=function(t,n){var e=t[0]*b_,r=t[1]*b_,i=n[0]*b_,o=n[1]*b_,u=S_(r),a=C_(r),c=S_(o),s=C_(o),f=u*S_(e),l=u*C_(e),h=c*S_(i),p=c*C_(i),d=2*yr(P_(mr(o-r)+u*c*mr(i-e))),v=C_(d),_=d?function(t){var n=C_(t*=d)/v,e=C_(d-t)/v,r=e*f+n*h,i=e*l+n*p,o=e*a+n*s;return[T_(i,r)*x_,T_(o,P_(r*r+i*i))*x_]}:function(){return[e*x_,r*x_]};return _.distance=d,_},Ng=function(t){return t},kg=Uv(),Eg=Uv(),Ag={point:xr,lineStart:xr,lineEnd:xr,polygonStart:function(){Ag.lineStart=Si,Ag.lineEnd=Ei},polygonEnd:function(){Ag.lineStart=Ag.lineEnd=Ag.point=xr,kg.add(w_(Eg)),Eg.reset()},result:function(){var t=kg/2;return kg.reset(),t}},Cg=1/0,zg=Cg,Pg=-Cg,Lg=Pg,Rg={point:Ai,lineStart:xr,lineEnd:xr,polygonStart:xr,polygonEnd:xr,result:function(){var t=[[Cg,zg],[Pg,Lg]];return Pg=Lg=-(zg=Cg=1/0),t}},qg=0,Ug=0,Dg=0,Og=0,Fg=0,Ig=0,Yg=0,Bg=0,jg=0,Hg={point:Ci,lineStart:zi,lineEnd:Ri,polygonStart:function(){Hg.lineStart=qi,Hg.lineEnd=Ui},polygonEnd:function(){Hg.point=Ci,Hg.lineStart=zi,Hg.lineEnd=Ri},result:function(){var t=jg?[Yg/jg,Bg/jg]:Ig?[Og/Ig,Fg/Ig]:Dg?[qg/Dg,Ug/Dg]:[NaN,NaN];return qg=Ug=Dg=Og=Fg=Ig=Yg=Bg=jg=0,t}};Fi.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,n){switch(this._point){case 0:this._context.moveTo(t,n),this._point=1;break;case 1:this._context.lineTo(t,n);break;default:this._context.moveTo(t+this._radius,n),this._context.arc(t,n,this._radius,0,m_)}},result:xr};var Xg,Vg,$g,Wg,Zg,Gg=Uv(),Jg={point:xr,lineStart:function(){Jg.point=Ii},lineEnd:function(){Xg&&Yi(Vg,$g),Jg.point=xr},polygonStart:function(){Xg=!0},polygonEnd:function(){Xg=null},result:function(){var t=+Gg;return Gg.reset(),t}};Bi.prototype={_circle:ji(4.5),pointRadius:function(t){return this._circle=ji(t),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,n){switch(this._point){case 0:this._string.push("M",t,",",n),this._point=1;break;case 1:this._string.push("L",t,",",n);break;default:this._string.push("M",t,",",n,this._circle)}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}}};var Qg=function(t,n){function e(t){return t&&("function"==typeof o&&i.pointRadius(+o.apply(this,arguments)),U_(t,r(i))),i.result()}var r,i,o=4.5;return e.area=function(t){return U_(t,r(Ag)),Ag.result()},e.measure=function(t){return U_(t,r(Jg)),Jg.result()},e.bounds=function(t){return U_(t,r(Rg)),Rg.result()},e.centroid=function(t){return U_(t,r(Hg)),Hg.result()},e.projection=function(n){return arguments.length?(r=null==n?(t=null,Ng):(t=n).stream,e):t},e.context=function(t){return arguments.length?(i=null==t?(n=null,new Bi):new Fi(n=t),"function"!=typeof o&&i.pointRadius(o),e):n},e.pointRadius=function(t){return arguments.length?(o="function"==typeof t?t:(i.pointRadius(+t),+t),e):o},e.projection(t).context(n)},Kg=function(t,n,e,r){return function(i,o){function u(n,e){var r=i(n,e);t(n=r[0],e=r[1])&&o.point(n,e)}function a(t,n){var e=i(t,n);_.point(e[0],e[1])}function c(){b.point=a,_.lineStart()}function s(){b.point=u,_.lineEnd()}function f(t,n){v.push([t,n]);var e=i(t,n);m.point(e[0],e[1])}function l(){m.lineStart(),v=[]}function h(){f(v[0][0],v[0][1]),m.lineEnd();var t,n,e,r,i=m.clean(),u=y.result(),a=u.length;if(v.pop(),p.push(v),v=null,a)if(1&i){if(e=u[0],(n=e.length-1)>0){for(x||(o.polygonStart(),x=!0),o.lineStart(),t=0;t<n;++t)o.point((r=e[t])[0],r[1]);o.lineEnd()}}else a>1&&2&i&&u.push(u.pop().concat(u.shift())),d.push(u.filter(Hi))}var p,d,v,_=n(o),g=i.invert(r[0],r[1]),y=ag(),m=n(y),x=!1,b={point:u,lineStart:c,lineEnd:s,polygonStart:function(){b.point=f,b.lineStart=l,b.lineEnd=h,d=[],p=[]},polygonEnd:function(){b.point=u,b.lineStart=c,b.lineEnd=s,d=lf(d);var t=vg(p,g);d.length?(x||(o.polygonStart(),x=!0),fg(d,Xi,t,e,o)):t&&(x||(o.polygonStart(),x=!0),o.lineStart(),e(null,null,1,o),o.lineEnd()),x&&(o.polygonEnd(),x=!1),d=p=null},sphere:function(){o.polygonStart(),o.lineStart(),e(null,null,1,o),o.lineEnd(),o.polygonEnd()}};return b}},ty=Kg(function(){return!0},Vi,Wi,[-__,-g_]),ny=function(t,n){function e(e,r,i,o){ui(o,t,n,i,e,r)}function r(t,n){return S_(t)*S_(n)>a}function i(t){var n,e,i,a,f;return{lineStart:function(){a=i=!1,f=1},point:function(l,h){var p,d=[l,h],v=r(l,h),_=c?v?0:u(l,h):v?u(l+(l<0?__:-__),h):0;if(!n&&(a=i=v)&&t.lineStart(),v!==i&&(p=o(n,d),(sg(n,p)||sg(d,p))&&(d[0]+=v_,d[1]+=v_,v=r(d[0],d[1]))),v!==i)f=0,v?(t.lineStart(),p=o(d,n),t.point(p[0],p[1])):(p=o(n,d),t.point(p[0],p[1]),t.lineEnd()),n=p;else if(s&&n&&c^v){var g;_&e||!(g=o(d,n,!0))||(f=0,c?(t.lineStart(),t.point(g[0][0],g[0][1]),t.point(g[1][0],g[1][1]),t.lineEnd()):(t.point(g[1][0],g[1][1]),t.lineEnd(),t.lineStart(),t.point(g[0][0],g[0][1])))}!v||n&&sg(n,d)||t.point(d[0],d[1]),n=d,i=v,e=_},lineEnd:function(){i&&t.lineEnd(),n=null},clean:function(){return f|(a&&i)<<1}}}function o(t,n,e){var r=Ar(t),i=Ar(n),o=[1,0,0],u=zr(r,i),c=Cr(u,u),s=u[0],f=c-s*s;if(!f)return!e&&t;var l=a*c/f,h=-a*s/f,p=zr(o,u),d=Lr(o,l);Pr(d,Lr(u,h));var v=p,_=Cr(d,v),g=Cr(v,v),y=_*_-g*(Cr(d,d)-1);if(!(y<0)){var m=P_(y),x=Lr(v,(-_-m)/g);if(Pr(x,d),x=Er(x),!e)return x;var b,w=t[0],M=n[0],T=t[1],S=n[1];M<w&&(b=w,w=M,M=b);var N=M-w,k=w_(N-__)<v_,E=k||N<v_;if(!k&&S<T&&(b=T,T=S,S=b),E?k?T+S>0^x[1]<(w_(x[0]-w)<v_?T:S):T<=x[1]&&x[1]<=S:N>__^(w<=x[0]&&x[0]<=M)){var A=Lr(v,(-_+m)/g);return Pr(A,d),[x,Er(A)]}}}function u(n,e){var r=c?t:__-t,i=0;return n<-r?i|=1:n>r&&(i|=2),e<-r?i|=4:e>r&&(i|=8),i}var a=S_(t),c=a>0,s=w_(a)>v_;return Kg(r,i,e,c?[0,-t]:[-__,t-__])},ey=function(t){return{stream:Zi(t)}};Gi.prototype={constructor:Gi,point:function(t,n){this.stream.point(t,n)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var ry=16,iy=S_(30*b_),oy=function(t,n){return+n?to(t,n):Ki(t)},uy=Zi({point:function(t,n){this.stream.point(t*b_,n*b_)}}),ay=function(){return ro(oo).scale(155.424).center([0,33.6442])},cy=function(){return ay().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])},sy=function(){function t(t){var n=t[0],e=t[1];return a=null,i.point(n,e),a||(o.point(n,e),a)||(u.point(n,e),a)}function n(){return e=r=null,t}var e,r,i,o,u,a,c=cy(),s=ay().rotate([154,0]).center([-2,58.5]).parallels([55,65]),f=ay().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l={point:function(t,n){a=[t,n]}};return t.invert=function(t){var n=c.scale(),e=c.translate(),r=(t[0]-e[0])/n,i=(t[1]-e[1])/n;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?s:i>=.166&&i<.234&&r>=-.214&&r<-.115?f:c).invert(t)},t.stream=function(t){return e&&r===t?e:e=uo([c.stream(r=t),s.stream(t),f.stream(t)])},t.precision=function(t){return arguments.length?(c.precision(t),s.precision(t),f.precision(t),n()):c.precision()},t.scale=function(n){return arguments.length?(c.scale(n),s.scale(.35*n),f.scale(n),t.translate(c.translate())):c.scale()},t.translate=function(t){if(!arguments.length)return c.translate();var e=c.scale(),r=+t[0],a=+t[1];return i=c.translate(t).clipExtent([[r-.455*e,a-.238*e],[r+.455*e,a+.238*e]]).stream(l),o=s.translate([r-.307*e,a+.201*e]).clipExtent([[r-.425*e+v_,a+.12*e+v_],[r-.214*e-v_,a+.234*e-v_]]).stream(l),u=f.translate([r-.205*e,a+.212*e]).clipExtent([[r-.214*e+v_,a+.166*e+v_],[r-.115*e-v_,a+.234*e-v_]]).stream(l),n()},t.fitExtent=function(n,e){return Ji(t,n,e)},t.fitSize=function(n,e){return Qi(t,n,e)},t.scale(1070)},fy=ao(function(t){return P_(2/(1+t))});fy.invert=co(function(t){return 2*yr(t/2)});var ly=function(){return no(fy).scale(124.75).clipAngle(179.999)},hy=ao(function(t){return(t=gr(t))&&t/C_(t)});hy.invert=co(function(t){return t});var py=function(){return no(hy).scale(79.4188).clipAngle(179.999)};so.invert=function(t,n){return[t,2*M_(k_(n))-g_]};var dy=function(){return fo(so).scale(961/m_)},vy=function(){return ro(ho).scale(109.5).parallels([30,30])};po.invert=po;var _y=function(){return no(po).scale(152.63)},gy=function(){return ro(vo).scale(131.154).center([0,13.9389])};_o.invert=co(M_);var yy=function(){return no(_o).scale(144.049).clipAngle(60)},my=function(){function t(){return i=o=null,u}var n,e,r,i,o,u,a=1,c=0,s=0,f=1,l=1,h=Ng,p=null,d=Ng;return u={stream:function(t){return i&&o===t?i:i=h(d(o=t))},clipExtent:function(i){return arguments.length?(d=null==i?(p=n=e=r=null,Ng):fi(p=+i[0][0],n=+i[0][1],e=+i[1][0],r=+i[1][1]),t()):null==p?null:[[p,n],[e,r]]},scale:function(n){return arguments.length?(h=go((a=+n)*f,a*l,c,s),t()):a},translate:function(n){return arguments.length?(h=go(a*f,a*l,c=+n[0],s=+n[1]),t()):[c,s]},reflectX:function(n){return arguments.length?(h=go(a*(f=n?-1:1),a*l,c,s),t()):f<0},reflectY:function(n){return arguments.length?(h=go(a*f,a*(l=n?-1:1),c,s),t()):l<0},fitExtent:function(t,n){return Ji(u,t,n)},fitSize:function(t,n){return Qi(u,t,n)}}};yo.invert=co(yr);var xy=function(){return no(yo).scale(249.5).clipAngle(90+v_)};mo.invert=co(function(t){return 2*M_(t)});var by=function(){return no(mo).scale(250).clipAngle(142)};xo.invert=function(t,n){return[-n,2*M_(k_(t))-g_]};var wy=function(){var t=fo(xo),n=t.center,e=t.rotate;return t.center=function(t){return arguments.length?n([-t[1],t[0]]):(t=n(),[t[1],-t[0]])},t.rotate=function(t){return arguments.length?e([t[0],t[1],t.length>2?t[2]+90:90]):(t=e(),[t[0],t[1],t[2]-90])},e([0,0,90]).scale(159.155)},My=function(){function t(t){var o,u=0;t.eachAfter(function(t){var e=t.children;e?(t.x=wo(e),t.y=To(e)):(t.x=o?u+=n(t,o):0,t.y=0,o=t)});var a=No(t),c=ko(t),s=a.x-n(a,c)/2,f=c.x+n(c,a)/2;return t.eachAfter(i?function(n){n.x=(n.x-t.x)*e,n.y=(t.y-n.y)*r}:function(n){n.x=(n.x-s)/(f-s)*e,n.y=(1-(t.y?n.y/t.y:1))*r})}var n=bo,e=1,r=1,i=!1;return t.separation=function(e){return arguments.length?(n=e,t):n},t.size=function(n){return arguments.length?(i=!1,e=+n[0],r=+n[1],t):i?null:[e,r]},t.nodeSize=function(n){return arguments.length?(i=!0,e=+n[0],r=+n[1],t):i?[e,r]:null},t},Ty=function(){return this.eachAfter(Eo)},Sy=function(t){var n,e,r,i,o=this,u=[o];do{for(n=u.reverse(),u=[];o=n.pop();)if(t(o),e=o.children)for(r=0,i=e.length;r<i;++r)u.push(e[r])}while(u.length);return this},Ny=function(t){for(var n,e,r=this,i=[r];r=i.pop();)if(t(r),n=r.children)for(e=n.length-1;e>=0;--e)i.push(n[e]);return this},ky=function(t){for(var n,e,r,i=this,o=[i],u=[];i=o.pop();)if(u.push(i),n=i.children)for(e=0,r=n.length;e<r;++e)o.push(n[e]);for(;i=u.pop();)t(i);return this},Ey=function(t){return this.eachAfter(function(n){for(var e=+t(n.data)||0,r=n.children,i=r&&r.length;--i>=0;)e+=r[i].value;n.value=e})},Ay=function(t){return this.eachBefore(function(n){n.children&&n.children.sort(t)})},Cy=function(t){for(var n=this,e=Ao(n,t),r=[n];n!==e;)n=n.parent,r.push(n);for(var i=r.length;t!==e;)r.splice(i,0,t),t=t.parent;return r},zy=function(){for(var t=this,n=[t];t=t.parent;)n.push(t);return n},Py=function(){var t=[];return this.each(function(n){t.push(n)}),t},Ly=function(){var t=[];return this.eachBefore(function(n){n.children||t.push(n)}),t},Ry=function(){var t=this,n=[];return t.each(function(e){e!==t&&n.push({source:e.parent,target:e})}),n};qo.prototype=Co.prototype={constructor:qo,count:Ty,each:Sy,eachAfter:ky,eachBefore:Ny,sum:Ey,sort:Ay,path:Cy,ancestors:zy,descendants:Py,leaves:Ly,links:Ry,copy:zo};var qy=function(t){for(var n=(t=t.slice()).length,e=null,r=e;n;){var i=new Uo(t[n-1]);r=r?r.next=i:e=i,t[void 0]=t[--n]}return{head:e,tail:r}},Uy=function(t){return Oo(qy(t),[])},Dy=function(t){return Vo(t),t},Oy=function(t){return function(){return t}},Fy=function(){function t(t){return t.x=e/2,t.y=r/2,n?t.eachBefore(Jo(n)).eachAfter(Qo(i,.5)).eachBefore(Ko(1)):t.eachBefore(Jo(Go)).eachAfter(Qo(Zo,1)).eachAfter(Qo(i,t.r/Math.min(e,r))).eachBefore(Ko(Math.min(e,r)/(2*t.r))),t}var n=null,e=1,r=1,i=Zo;return t.radius=function(e){return arguments.length?(n=$o(e),t):n},t.size=function(n){return arguments.length?(e=+n[0],r=+n[1],t):[e,r]},t.padding=function(n){return arguments.length?(i="function"==typeof n?n:Oy(+n),t):i},t},Iy=function(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)},Yy=function(t,n,e,r,i){for(var o,u=t.children,a=-1,c=u.length,s=t.value&&(r-n)/t.value;++a<c;)o=u[a],o.y0=e,o.y1=i,o.x0=n,o.x1=n+=o.value*s},By=function(){function t(t){var u=t.height+1;return t.x0=t.y0=i,t.x1=e,t.y1=r/u,t.eachBefore(n(r,u)),o&&t.eachBefore(Iy),t}function n(t,n){return function(e){e.children&&Yy(e,e.x0,t*(e.depth+1)/n,e.x1,t*(e.depth+2)/n);var r=e.x0,o=e.y0,u=e.x1-i,a=e.y1-i;u<r&&(r=u=(r+u)/2),a<o&&(o=a=(o+a)/2),e.x0=r,e.y0=o,e.x1=u,e.y1=a}}var e=1,r=1,i=0,o=!1;return t.round=function(n){return arguments.length?(o=!!n,t):o},t.size=function(n){return arguments.length?(e=+n[0],r=+n[1],t):[e,r]},t.padding=function(n){return arguments.length?(i=+n,t):i},t},jy="$",Hy={depth:-1},Xy={},Vy=function(){function t(t){var r,i,o,u,a,c,s,f=t.length,l=new Array(f),h={};for(i=0;i<f;++i)r=t[i],a=l[i]=new qo(r),null!=(c=n(r,i,t))&&(c+="")&&(s=jy+(a.id=c),h[s]=s in h?Xy:a);for(i=0;i<f;++i)if(a=l[i],null!=(c=e(t[i],i,t))&&(c+="")){if(!(u=h[jy+c]))throw new Error("missing: "+c);if(u===Xy)throw new Error("ambiguous: "+c);u.children?u.children.push(a):u.children=[a],a.parent=u}else{if(o)throw new Error("multiple roots");o=a}if(!o)throw new Error("no root");if(o.parent=Hy,o.eachBefore(function(t){t.depth=t.parent.depth+1,--f}).eachBefore(Ro),o.parent=null,f>0)throw new Error("cycle");return o}var n=tu,e=nu;return t.id=function(e){return arguments.length?(n=Wo(e),t):n},t.parentId=function(n){return arguments.length?(e=Wo(n),t):e},t};cu.prototype=Object.create(qo.prototype);var $y=function(){function t(t){var r=su(t);if(r.eachAfter(n),r.parent.m=-r.z,r.eachBefore(e),c)t.eachBefore(i);else{var s=t,f=t,l=t;t.eachBefore(function(t){t.x<s.x&&(s=t),t.x>f.x&&(f=t),t.depth>l.depth&&(l=t)});var h=s===f?1:o(s,f)/2,p=h-s.x,d=u/(f.x+h+p),v=a/(l.depth||1);t.eachBefore(function(t){t.x=(t.x+p)*d,t.y=t.depth*v})}return t}function n(t){var n=t.children,e=t.parent.children,i=t.i?e[t.i-1]:null;if(n){uu(t);var u=(n[0].z+n[n.length-1].z)/2;i?(t.z=i.z+o(t._,i._),t.m=t.z-u):t.z=u}else i&&(t.z=i.z+o(t._,i._));t.parent.A=r(t,i,t.parent.A||e[0])}function e(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function r(t,n,e){if(n){for(var r,i=t,u=t,a=n,c=i.parent.children[0],s=i.m,f=u.m,l=a.m,h=c.m;a=iu(a),i=ru(i),a&&i;)c=ru(c),u=iu(u),u.a=t,r=a.z+l-i.z-s+o(a._,i._),r>0&&(ou(au(a,t,e),t,r),s+=r,f+=r),l+=a.m,s+=i.m,h+=c.m,f+=u.m;a&&!iu(u)&&(u.t=a,u.m+=l-f),i&&!ru(c)&&(c.t=i,c.m+=s-h,e=t)}return e}function i(t){t.x*=u,t.y=t.depth*a}var o=eu,u=1,a=1,c=null;return t.separation=function(n){return arguments.length?(o=n,t):o},t.size=function(n){return arguments.length?(c=!1,u=+n[0],a=+n[1],t):c?null:[u,a]},t.nodeSize=function(n){return arguments.length?(c=!0,u=+n[0],a=+n[1],t):c?[u,a]:null},t},Wy=function(t,n,e,r,i){for(var o,u=t.children,a=-1,c=u.length,s=t.value&&(i-e)/t.value;++a<c;)o=u[a],o.x0=n,o.x1=r,o.y0=e,o.y1=e+=o.value*s},Zy=(1+Math.sqrt(5))/2,Gy=function t(n){function e(t,e,r,i,o){fu(n,t,e,r,i,o)}return e.ratio=function(n){return t((n=+n)>1?n:1)},e}(Zy),Jy=function(){function t(t){return t.x0=t.y0=0,t.x1=i,t.y1=o,t.eachBefore(n),u=[0],r&&t.eachBefore(Iy),t}function n(t){var n=u[t.depth],r=t.x0+n,i=t.y0+n,o=t.x1-n,h=t.y1-n;o<r&&(r=o=(r+o)/2),h<i&&(i=h=(i+h)/2),t.x0=r,t.y0=i,t.x1=o,t.y1=h,t.children&&(n=u[t.depth+1]=a(t)/2,r+=l(t)-n,i+=c(t)-n,o-=s(t)-n,h-=f(t)-n,o<r&&(r=o=(r+o)/2),h<i&&(i=h=(i+h)/2),e(t,r,i,o,h))}var e=Gy,r=!1,i=1,o=1,u=[0],a=Zo,c=Zo,s=Zo,f=Zo,l=Zo;return t.round=function(n){return arguments.length?(r=!!n,t):r},t.size=function(n){return arguments.length?(i=+n[0],o=+n[1],t):[i,o]},t.tile=function(n){return arguments.length?(e=Wo(n),t):e},t.padding=function(n){return arguments.length?t.paddingInner(n).paddingOuter(n):t.paddingInner()},t.paddingInner=function(n){return arguments.length?(a="function"==typeof n?n:Oy(+n),t):a},t.paddingOuter=function(n){return arguments.length?t.paddingTop(n).paddingRight(n).paddingBottom(n).paddingLeft(n):t.paddingTop()},t.paddingTop=function(n){return arguments.length?(c="function"==typeof n?n:Oy(+n),t):c},t.paddingRight=function(n){return arguments.length?(s="function"==typeof n?n:Oy(+n),t):s},t.paddingBottom=function(n){return arguments.length?(f="function"==typeof n?n:Oy(+n),t):f},t.paddingLeft=function(n){return arguments.length?(l="function"==typeof n?n:Oy(+n),t):l},t},Qy=function(t,n,e,r,i){function o(t,n,e,r,i,u,a){if(t>=n-1){var s=c[t];return s.x0=r,s.y0=i,s.x1=u,s.y1=a,void 0}for(var l=f[t],h=e/2+l,p=t+1,d=n-1;p<d;){var v=p+d>>>1;f[v]<h?p=v+1:d=v}h-f[p-1]<f[p]-h&&t+1<p&&--p;var _=f[p]-l,g=e-_;if(u-r>a-i){var y=(r*g+u*_)/e;o(t,p,_,r,i,y,a),o(p,n,g,y,i,u,a)}else{var m=(i*g+a*_)/e;o(t,p,_,r,i,u,m),o(p,n,g,r,m,u,a)}}var u,a,c=t.children,s=c.length,f=new Array(s+1);for(f[0]=a=u=0;u<s;++u)f[u+1]=a+=c[u].value;o(0,s,t.value,n,e,r,i)
},Ky=function(t,n,e,r,i){(1&t.depth?Wy:Yy)(t,n,e,r,i)},tm=function t(n){function e(t,e,r,i,o){if((u=t._squarify)&&u.ratio===n)for(var u,a,c,s,f,l=-1,h=u.length,p=t.value;++l<h;){for(a=u[l],c=a.children,s=a.value=0,f=c.length;s<f;++s)a.value+=c[s].value;a.dice?Yy(a,e,r,i,r+=(o-r)*a.value/p):Wy(a,e,r,e+=(i-e)*a.value/p,o),p-=a.value}else t._squarify=u=fu(n,t,e,r,i,o),u.ratio=n}return e.ratio=function(n){return t((n=+n)>1?n:1)},e}(Zy),nm=function(t){for(var n,e=-1,r=t.length,i=t[r-1],o=0;++e<r;)n=i,i=t[e],o+=n[1]*i[0]-n[0]*i[1];return o/2},em=function(t){for(var n,e,r=-1,i=t.length,o=0,u=0,a=t[i-1],c=0;++r<i;)n=a,a=t[r],c+=e=n[0]*a[1]-a[0]*n[1],o+=(n[0]+a[0])*e,u+=(n[1]+a[1])*e;return c*=3,[o/c,u/c]},rm=function(t,n,e){return(n[0]-t[0])*(e[1]-t[1])-(n[1]-t[1])*(e[0]-t[0])},im=function(t){if((e=t.length)<3)return null;var n,e,r=new Array(e),i=new Array(e);for(n=0;n<e;++n)r[n]=[+t[n][0],+t[n][1],n];for(r.sort(lu),n=0;n<e;++n)i[n]=[r[n][0],-r[n][1]];var o=hu(r),u=hu(i),a=u[0]===o[0],c=u[u.length-1]===o[o.length-1],s=[];for(n=o.length-1;n>=0;--n)s.push(t[r[o[n]][2]]);for(n=+a;n<u.length-c;++n)s.push(t[r[u[n]][2]]);return s},om=function(t,n){for(var e,r,i=t.length,o=t[i-1],u=n[0],a=n[1],c=o[0],s=o[1],f=!1,l=0;l<i;++l)o=t[l],e=o[0],r=o[1],r>a!=s>a&&u<(c-e)*(a-r)/(s-r)+e&&(f=!f),c=e,s=r;return f},um=function(t){for(var n,e,r=-1,i=t.length,o=t[i-1],u=o[0],a=o[1],c=0;++r<i;)n=u,e=a,o=t[r],u=o[0],a=o[1],n-=u,e-=a,c+=Math.sqrt(n*n+e*e);return c},am=[].slice,cm={};pu.prototype=mu.prototype={constructor:pu,defer:function(t){if("function"!=typeof t||this._call)throw new Error;if(null!=this._error)return this;var n=am.call(arguments,1);return n.push(t),++this._waiting,this._tasks.push(n),du(this),this},abort:function(){return null==this._error&&gu(this,new Error("abort")),this},await:function(t){if("function"!=typeof t||this._call)throw new Error;return this._call=function(n,e){t.apply(null,[n].concat(e))},yu(this),this},awaitAll:function(t){if("function"!=typeof t||this._call)throw new Error;return this._call=t,yu(this),this}};var sm=function(t,n){return t=null==t?0:+t,n=null==n?1:+n,1===arguments.length?(n=t,t=0):n-=t,function(){return Math.random()*n+t}},fm=function(t,n){var e,r;return t=null==t?0:+t,n=null==n?1:+n,function(){var i;if(null!=e)i=e,e=null;else do{e=2*Math.random()-1,i=2*Math.random()-1,r=e*e+i*i}while(!r||r>1);return t+n*i*Math.sqrt(-2*Math.log(r)/r)}},lm=function(){var t=fm.apply(this,arguments);return function(){return Math.exp(t())}},hm=function(t){return function(){for(var n=0,e=0;e<t;++e)n+=Math.random();return n}},pm=function(t){var n=hm(t);return function(){return n()/t}},dm=function(t){return function(){return-Math.log(1-Math.random())/t}},vm=function(t,n){function e(t){var n,e=s.status;if(!e&&bu(s)||e>=200&&e<300||304===e){if(o)try{n=o.call(r,s)}catch(t){return void a.call("error",r,t)}else n=s;a.call("load",r,n)}else a.call("error",r,t)}var r,i,o,u,a=v("beforesend","progress","load","error"),c=Be(),s=new XMLHttpRequest,f=null,l=null,h=0;if("undefined"==typeof XDomainRequest||"withCredentials"in s||!/^(http(s)?:)?\/\//.test(t)||(s=new XDomainRequest),"onload"in s?s.onload=s.onerror=s.ontimeout=e:s.onreadystatechange=function(t){s.readyState>3&&e(t)},s.onprogress=function(t){a.call("progress",r,t)},r={header:function(t,n){return t=(t+"").toLowerCase(),arguments.length<2?c.get(t):(null==n?c.remove(t):c.set(t,n+""),r)},mimeType:function(t){return arguments.length?(i=null==t?null:t+"",r):i},responseType:function(t){return arguments.length?(u=t,r):u},timeout:function(t){return arguments.length?(h=+t,r):h},user:function(t){return arguments.length<1?f:(f=null==t?null:t+"",r)},password:function(t){return arguments.length<1?l:(l=null==t?null:t+"",r)},response:function(t){return o=t,r},get:function(t,n){return r.send("GET",t,n)},post:function(t,n){return r.send("POST",t,n)},send:function(n,e,o){return s.open(n,t,!0,f,l),null==i||c.has("accept")||c.set("accept",i+",*/*"),s.setRequestHeader&&c.each(function(t,n){s.setRequestHeader(n,t)}),null!=i&&s.overrideMimeType&&s.overrideMimeType(i),null!=u&&(s.responseType=u),h>0&&(s.timeout=h),null==o&&"function"==typeof e&&(o=e,e=null),null!=o&&1===o.length&&(o=xu(o)),null!=o&&r.on("error",o).on("load",function(t){o(null,t)}),a.call("beforesend",r,s),s.send(null==e?null:e),r},abort:function(){return s.abort(),r},on:function(){var t=a.on.apply(a,arguments);return t===a?r:t}},null!=n){if("function"!=typeof n)throw new Error("invalid callback: "+n);return r.get(n)}return r},_m=function(t,n){return function(e,r){var i=vm(e).mimeType(t).response(n);if(null!=r){if("function"!=typeof r)throw new Error("invalid callback: "+r);return i.get(r)}return i}},gm=_m("text/html",function(t){return document.createRange().createContextualFragment(t.responseText)}),ym=_m("application/json",function(t){return JSON.parse(t.responseText)}),mm=_m("text/plain",function(t){return t.responseText}),xm=_m("application/xml",function(t){var n=t.responseXML;if(!n)throw new Error("parse error");return n}),bm=function(t,n){return function(e,r,i){arguments.length<3&&(i=r,r=null);var o=vm(e).mimeType(t);return o.row=function(t){return arguments.length?o.response(wu(n,r=t)):r},o.row(r),i?o.get(i):o}},wm=bm("text/csv",Fd),Mm=bm("text/tab-separated-values",Hd),Tm=Array.prototype,Sm=Tm.map,Nm=Tm.slice,km={name:"implicit"},Em=function(t){return function(){return t}},Am=function(t){return+t},Cm=[0,1],zm=function(n,e,r){var o,u=n[0],a=n[n.length-1],c=i(u,a,null==e?10:e);switch(r=hr(null==r?",f":r),r.type){case"s":var s=Math.max(Math.abs(u),Math.abs(a));return null!=r.precision||isNaN(o=Rv(c,s))||(r.precision=o),t.formatPrefix(r,s);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(o=qv(c,Math.max(Math.abs(u),Math.abs(a))))||(r.precision=o-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(o=Lv(c))||(r.precision=o-2*("%"===r.type))}return t.format(r)},Pm=function(t,n){t=t.slice();var e,r=0,i=t.length-1,o=t[r],u=t[i];return u<o&&(e=r,r=i,i=e,e=o,o=u,u=e),t[r]=n.floor(o),t[i]=n.ceil(u),t},Lm=new Date,Rm=new Date,qm=Gu(function(){},function(t,n){t.setTime(+t+n)},function(t,n){return n-t});qm.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?Gu(function(n){n.setTime(Math.floor(n/t)*t)},function(n,e){n.setTime(+n+e*t)},function(n,e){return(e-n)/t}):qm:null};var Um=qm.range,Dm=6e4,Om=6048e5,Fm=Gu(function(t){t.setTime(1e3*Math.floor(t/1e3))},function(t,n){t.setTime(+t+1e3*n)},function(t,n){return(n-t)/1e3},function(t){return t.getUTCSeconds()}),Im=Fm.range,Ym=Gu(function(t){t.setTime(Math.floor(t/Dm)*Dm)},function(t,n){t.setTime(+t+n*Dm)},function(t,n){return(n-t)/Dm},function(t){return t.getMinutes()}),Bm=Ym.range,jm=Gu(function(t){var n=t.getTimezoneOffset()*Dm%36e5;n<0&&(n+=36e5),t.setTime(36e5*Math.floor((+t-n)/36e5)+n)},function(t,n){t.setTime(+t+36e5*n)},function(t,n){return(n-t)/36e5},function(t){return t.getHours()}),Hm=jm.range,Xm=Gu(function(t){t.setHours(0,0,0,0)},function(t,n){t.setDate(t.getDate()+n)},function(t,n){return(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Dm)/864e5},function(t){return t.getDate()-1}),Vm=Xm.range,$m=Ju(0),Wm=Ju(1),Zm=Ju(2),Gm=Ju(3),Jm=Ju(4),Qm=Ju(5),Km=Ju(6),tx=$m.range,nx=Wm.range,ex=Zm.range,rx=Gm.range,ix=Jm.range,ox=Qm.range,ux=Km.range,ax=Gu(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,n){t.setMonth(t.getMonth()+n)},function(t,n){return n.getMonth()-t.getMonth()+12*(n.getFullYear()-t.getFullYear())},function(t){return t.getMonth()}),cx=ax.range,sx=Gu(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,n){t.setFullYear(t.getFullYear()+n)},function(t,n){return n.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()});sx.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Gu(function(n){n.setFullYear(Math.floor(n.getFullYear()/t)*t),n.setMonth(0,1),n.setHours(0,0,0,0)},function(n,e){n.setFullYear(n.getFullYear()+e*t)}):null};var fx=sx.range,lx=Gu(function(t){t.setUTCSeconds(0,0)},function(t,n){t.setTime(+t+n*Dm)},function(t,n){return(n-t)/Dm},function(t){return t.getUTCMinutes()}),hx=lx.range,px=Gu(function(t){t.setUTCMinutes(0,0,0)},function(t,n){t.setTime(+t+36e5*n)},function(t,n){return(n-t)/36e5},function(t){return t.getUTCHours()}),dx=px.range,vx=Gu(function(t){t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCDate(t.getUTCDate()+n)},function(t,n){return(n-t)/864e5},function(t){return t.getUTCDate()-1}),_x=vx.range,gx=Qu(0),yx=Qu(1),mx=Qu(2),xx=Qu(3),bx=Qu(4),wx=Qu(5),Mx=Qu(6),Tx=gx.range,Sx=yx.range,Nx=mx.range,kx=xx.range,Ex=bx.range,Ax=wx.range,Cx=Mx.range,zx=Gu(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCMonth(t.getUTCMonth()+n)},function(t,n){return n.getUTCMonth()-t.getUTCMonth()+12*(n.getUTCFullYear()-t.getUTCFullYear())},function(t){return t.getUTCMonth()}),Px=zx.range,Lx=Gu(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n)},function(t,n){return n.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()});Lx.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Gu(function(n){n.setUTCFullYear(Math.floor(n.getUTCFullYear()/t)*t),n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0)},function(n,e){n.setUTCFullYear(n.getUTCFullYear()+e*t)}):null};var Rx,qx=Lx.range,Ux={"-":"",_:" ",0:"0"},Dx=/^\s*\d+/,Ox=/^%/,Fx=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;Ga({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var Ix=Date.prototype.toISOString?Ja:t.utcFormat("%Y-%m-%dT%H:%M:%S.%LZ"),Yx=+new Date("2000-01-01T00:00:00.000Z")?Qa:t.utcParse("%Y-%m-%dT%H:%M:%S.%LZ"),Bx=1e3,jx=60*Bx,Hx=60*jx,Xx=24*Hx,Vx=7*Xx,$x=30*Xx,Wx=365*Xx,Zx=function(){return nc(sx,ax,$m,Xm,jm,Ym,Fm,qm,t.timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)])},Gx=function(){return nc(Lx,zx,gx,vx,px,lx,Fm,qm,t.utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)])},Jx=function(t){return t.match(/.{6}/g).map(function(t){return"#"+t})},Qx=Jx("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Kx=Jx("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6"),tb=Jx("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9"),nb=Jx("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5"),eb=Fh($t(300,.5,0),$t(-240,.5,1)),rb=Fh($t(-100,.75,.35),$t(80,1.5,.8)),ib=Fh($t(260,.75,.35),$t(80,1.5,.8)),ob=$t(),ub=function(t){(t<0||t>1)&&(t-=Math.floor(t));var n=Math.abs(t-.5);return ob.h=360*t-100,ob.s=1.5-1.5*n,ob.l=.8-.9*n,ob+""},ab=ec(Jx("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),cb=ec(Jx("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),sb=ec(Jx("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),fb=ec(Jx("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921")),lb=function(t){return function(){return t}},hb=Math.abs,pb=Math.atan2,db=Math.cos,vb=Math.max,_b=Math.min,gb=Math.sin,yb=Math.sqrt,mb=1e-12,xb=Math.PI,bb=xb/2,wb=2*xb,Mb=function(){function t(){var t,s,f=+n.apply(this,arguments),l=+e.apply(this,arguments),h=o.apply(this,arguments)-bb,p=u.apply(this,arguments)-bb,d=hb(p-h),v=p>h;if(c||(c=t=qe()),l<f&&(s=l,l=f,f=s),l>mb)if(d>wb-mb)c.moveTo(l*db(h),l*gb(h)),c.arc(0,0,l,h,p,!v),f>mb&&(c.moveTo(f*db(p),f*gb(p)),c.arc(0,0,f,p,h,v));else{var _,g,y=h,m=p,x=h,b=p,w=d,M=d,T=a.apply(this,arguments)/2,S=T>mb&&(i?+i.apply(this,arguments):yb(f*f+l*l)),N=_b(hb(l-f)/2,+r.apply(this,arguments)),k=N,E=N;if(S>mb){var A=oc(S/f*gb(T)),C=oc(S/l*gb(T));(w-=2*A)>mb?(A*=v?1:-1,x+=A,b-=A):(w=0,x=b=(h+p)/2),(M-=2*C)>mb?(C*=v?1:-1,y+=C,m-=C):(M=0,y=m=(h+p)/2)}var z=l*db(y),P=l*gb(y),L=f*db(b),R=f*gb(b);if(N>mb){var q=l*db(m),U=l*gb(m),D=f*db(x),O=f*gb(x);if(d<xb){var F=w>mb?lc(z,P,D,O,q,U,L,R):[L,R],I=z-F[0],Y=P-F[1],B=q-F[0],j=U-F[1],H=1/gb(ic((I*B+Y*j)/(yb(I*I+Y*Y)*yb(B*B+j*j)))/2),X=yb(F[0]*F[0]+F[1]*F[1]);k=_b(N,(f-X)/(H-1)),E=_b(N,(l-X)/(H+1))}}M>mb?E>mb?(_=hc(D,O,z,P,l,E,v),g=hc(q,U,L,R,l,E,v),c.moveTo(_.cx+_.x01,_.cy+_.y01),E<N?c.arc(_.cx,_.cy,E,pb(_.y01,_.x01),pb(g.y01,g.x01),!v):(c.arc(_.cx,_.cy,E,pb(_.y01,_.x01),pb(_.y11,_.x11),!v),c.arc(0,0,l,pb(_.cy+_.y11,_.cx+_.x11),pb(g.cy+g.y11,g.cx+g.x11),!v),c.arc(g.cx,g.cy,E,pb(g.y11,g.x11),pb(g.y01,g.x01),!v))):(c.moveTo(z,P),c.arc(0,0,l,y,m,!v)):c.moveTo(z,P),f>mb&&w>mb?k>mb?(_=hc(L,R,q,U,f,-k,v),g=hc(z,P,D,O,f,-k,v),c.lineTo(_.cx+_.x01,_.cy+_.y01),k<N?c.arc(_.cx,_.cy,k,pb(_.y01,_.x01),pb(g.y01,g.x01),!v):(c.arc(_.cx,_.cy,k,pb(_.y01,_.x01),pb(_.y11,_.x11),!v),c.arc(0,0,f,pb(_.cy+_.y11,_.cx+_.x11),pb(g.cy+g.y11,g.cx+g.x11),v),c.arc(g.cx,g.cy,k,pb(g.y11,g.x11),pb(g.y01,g.x01),!v))):c.arc(0,0,f,b,x,v):c.lineTo(L,R)}else c.moveTo(0,0);if(c.closePath(),t)return c=null,t+""||null}var n=uc,e=ac,r=lb(0),i=null,o=cc,u=sc,a=fc,c=null;return t.centroid=function(){var t=(+n.apply(this,arguments)+ +e.apply(this,arguments))/2,r=(+o.apply(this,arguments)+ +u.apply(this,arguments))/2-xb/2;return[db(r)*t,gb(r)*t]},t.innerRadius=function(e){return arguments.length?(n="function"==typeof e?e:lb(+e),t):n},t.outerRadius=function(n){return arguments.length?(e="function"==typeof n?n:lb(+n),t):e},t.cornerRadius=function(n){return arguments.length?(r="function"==typeof n?n:lb(+n),t):r},t.padRadius=function(n){return arguments.length?(i=null==n?null:"function"==typeof n?n:lb(+n),t):i},t.startAngle=function(n){return arguments.length?(o="function"==typeof n?n:lb(+n),t):o},t.endAngle=function(n){return arguments.length?(u="function"==typeof n?n:lb(+n),t):u},t.padAngle=function(n){return arguments.length?(a="function"==typeof n?n:lb(+n),t):a},t.context=function(n){return arguments.length?(c=null==n?null:n,t):c},t};pc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;default:this._context.lineTo(t,n)}}};var Tb=function(t){return new pc(t)},Sb=function(){function t(t){var a,c,s,f=t.length,l=!1;for(null==i&&(u=o(s=qe())),a=0;a<=f;++a)!(a<f&&r(c=t[a],a,t))===l&&((l=!l)?u.lineStart():u.lineEnd()),l&&u.point(+n(c,a,t),+e(c,a,t));if(s)return u=null,s+""||null}var n=dc,e=vc,r=lb(!0),i=null,o=Tb,u=null;return t.x=function(e){return arguments.length?(n="function"==typeof e?e:lb(+e),t):n},t.y=function(n){return arguments.length?(e="function"==typeof n?n:lb(+n),t):e},t.defined=function(n){return arguments.length?(r="function"==typeof n?n:lb(!!n),t):r},t.curve=function(n){return arguments.length?(o=n,null!=i&&(u=o(i)),t):o},t.context=function(n){return arguments.length?(null==n?i=u=null:u=o(i=n),t):i},t},Nb=function(){function t(t){var n,f,l,h,p,d=t.length,v=!1,_=new Array(d),g=new Array(d);for(null==a&&(s=c(p=qe())),n=0;n<=d;++n){if(!(n<d&&u(h=t[n],n,t))===v)if(v=!v)f=n,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),l=n-1;l>=f;--l)s.point(_[l],g[l]);s.lineEnd(),s.areaEnd()}v&&(_[n]=+e(h,n,t),g[n]=+i(h,n,t),s.point(r?+r(h,n,t):_[n],o?+o(h,n,t):g[n]))}if(p)return s=null,p+""||null}function n(){return Sb().defined(u).curve(c).context(a)}var e=dc,r=null,i=lb(0),o=vc,u=lb(!0),a=null,c=Tb,s=null;return t.x=function(n){return arguments.length?(e="function"==typeof n?n:lb(+n),r=null,t):e},t.x0=function(n){return arguments.length?(e="function"==typeof n?n:lb(+n),t):e},t.x1=function(n){return arguments.length?(r=null==n?null:"function"==typeof n?n:lb(+n),t):r},t.y=function(n){return arguments.length?(i="function"==typeof n?n:lb(+n),o=null,t):i},t.y0=function(n){return arguments.length?(i="function"==typeof n?n:lb(+n),t):i},t.y1=function(n){return arguments.length?(o=null==n?null:"function"==typeof n?n:lb(+n),t):o},t.lineX0=t.lineY0=function(){return n().x(e).y(i)},t.lineY1=function(){return n().x(e).y(o)},t.lineX1=function(){return n().x(r).y(i)},t.defined=function(n){return arguments.length?(u="function"==typeof n?n:lb(!!n),t):u},t.curve=function(n){return arguments.length?(c=n,null!=a&&(s=c(a)),t):c},t.context=function(n){return arguments.length?(null==n?a=s=null:s=c(a=n),t):a},t},kb=function(t,n){return n<t?-1:n>t?1:n>=t?0:NaN},Eb=function(t){return t},Ab=function(){function t(t){var a,c,s,f,l,h=t.length,p=0,d=new Array(h),v=new Array(h),_=+i.apply(this,arguments),g=Math.min(wb,Math.max(-wb,o.apply(this,arguments)-_)),y=Math.min(Math.abs(g)/h,u.apply(this,arguments)),m=y*(g<0?-1:1);for(a=0;a<h;++a)(l=v[d[a]=a]=+n(t[a],a,t))>0&&(p+=l);for(null!=e?d.sort(function(t,n){return e(v[t],v[n])}):null!=r&&d.sort(function(n,e){return r(t[n],t[e])}),a=0,s=p?(g-h*m)/p:0;a<h;++a,_=f)c=d[a],l=v[c],f=_+(l>0?l*s:0)+m,v[c]={data:t[c],index:a,value:l,startAngle:_,endAngle:f,padAngle:y};return v}var n=Eb,e=kb,r=null,i=lb(0),o=lb(wb),u=lb(0);return t.value=function(e){return arguments.length?(n="function"==typeof e?e:lb(+e),t):n},t.sortValues=function(n){return arguments.length?(e=n,r=null,t):e},t.sort=function(n){return arguments.length?(r=n,e=null,t):r},t.startAngle=function(n){return arguments.length?(i="function"==typeof n?n:lb(+n),t):i},t.endAngle=function(n){return arguments.length?(o="function"==typeof n?n:lb(+n),t):o},t.padAngle=function(n){return arguments.length?(u="function"==typeof n?n:lb(+n),t):u},t},Cb=gc(Tb);_c.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,n){this._curve.point(n*Math.sin(t),n*-Math.cos(t))}};var zb=function(){return yc(Sb().curve(Cb))},Pb=function(){var t=Nb().curve(Cb),n=t.curve,e=t.lineX0,r=t.lineX1,i=t.lineY0,o=t.lineY1;return t.angle=t.x,delete t.x,t.startAngle=t.x0,delete t.x0,t.endAngle=t.x1,delete t.x1,t.radius=t.y,delete t.y,t.innerRadius=t.y0,delete t.y0,t.outerRadius=t.y1,delete t.y1,t.lineStartAngle=function(){return yc(e())},delete t.lineX0,t.lineEndAngle=function(){return yc(r())},delete t.lineX1,t.lineInnerRadius=function(){return yc(i())},delete t.lineY0,t.lineOuterRadius=function(){return yc(o())},delete t.lineY1,t.curve=function(t){return arguments.length?n(gc(t)):n()._curve},t},Lb={draw:function(t,n){var e=Math.sqrt(n/xb);t.moveTo(e,0),t.arc(0,0,e,0,wb)}},Rb={draw:function(t,n){var e=Math.sqrt(n/5)/2;t.moveTo(-3*e,-e),t.lineTo(-e,-e),t.lineTo(-e,-3*e),t.lineTo(e,-3*e),t.lineTo(e,-e),t.lineTo(3*e,-e),t.lineTo(3*e,e),t.lineTo(e,e),t.lineTo(e,3*e),t.lineTo(-e,3*e),t.lineTo(-e,e),t.lineTo(-3*e,e),t.closePath()}},qb=Math.sqrt(1/3),Ub=2*qb,Db={draw:function(t,n){var e=Math.sqrt(n/Ub),r=e*qb;t.moveTo(0,-e),t.lineTo(r,0),t.lineTo(0,e),t.lineTo(-r,0),t.closePath()}},Ob=Math.sin(xb/10)/Math.sin(7*xb/10),Fb=Math.sin(wb/10)*Ob,Ib=-Math.cos(wb/10)*Ob,Yb={draw:function(t,n){var e=Math.sqrt(.8908130915292852*n),r=Fb*e,i=Ib*e;t.moveTo(0,-e),t.lineTo(r,i);for(var o=1;o<5;++o){var u=wb*o/5,a=Math.cos(u),c=Math.sin(u);t.lineTo(c*e,-a*e),t.lineTo(a*r-c*i,c*r+a*i)}t.closePath()}},Bb={draw:function(t,n){var e=Math.sqrt(n),r=-e/2;t.rect(r,r,e,e)}},jb=Math.sqrt(3),Hb={draw:function(t,n){var e=-Math.sqrt(n/(3*jb));t.moveTo(0,2*e),t.lineTo(-jb*e,-e),t.lineTo(jb*e,-e),t.closePath()}},Xb=-.5,Vb=Math.sqrt(3)/2,$b=1/Math.sqrt(12),Wb=3*($b/2+1),Zb={draw:function(t,n){var e=Math.sqrt(n/Wb),r=e/2,i=e*$b,o=r,u=e*$b+e,a=-o,c=u;t.moveTo(r,i),t.lineTo(o,u),t.lineTo(a,c),t.lineTo(Xb*r-Vb*i,Vb*r+Xb*i),t.lineTo(Xb*o-Vb*u,Vb*o+Xb*u),t.lineTo(Xb*a-Vb*c,Vb*a+Xb*c),t.lineTo(Xb*r+Vb*i,Xb*i-Vb*r),t.lineTo(Xb*o+Vb*u,Xb*u-Vb*o),t.lineTo(Xb*a+Vb*c,Xb*c-Vb*a),t.closePath()}},Gb=[Lb,Rb,Db,Bb,Yb,Hb,Zb],Jb=function(){function t(){var t;if(r||(r=t=qe()),n.apply(this,arguments).draw(r,+e.apply(this,arguments)),t)return r=null,t+""||null}var n=lb(Lb),e=lb(64),r=null;return t.type=function(e){return arguments.length?(n="function"==typeof e?e:lb(e),t):n},t.size=function(n){return arguments.length?(e="function"==typeof n?n:lb(+n),t):e},t.context=function(n){return arguments.length?(r=null==n?null:n,t):r},t},Qb=function(){};xc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:mc(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:mc(this,t,n)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n}};var Kb=function(t){return new xc(t)};bc.prototype={areaStart:Qb,areaEnd:Qb,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._x2=t,this._y2=n;break;case 1:this._point=2,this._x3=t,this._y3=n;break;case 2:this._point=3,this._x4=t,this._y4=n,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+n)/6);break;default:mc(this,t,n)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n}};var tw=function(t){return new bc(t)};wc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var e=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+n)/6;this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break;case 3:this._point=4;default:mc(this,t,n)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n}};var nw=function(t){return new wc(t)};Mc.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,n=this._y,e=t.length-1;if(e>0)for(var r,i=t[0],o=n[0],u=t[e]-i,a=n[e]-o,c=-1;++c<=e;)r=c/e,this._basis.point(this._beta*t[c]+(1-this._beta)*(i+r*u),this._beta*n[c]+(1-this._beta)*(o+r*a));this._x=this._y=null,this._basis.lineEnd()},point:function(t,n){this._x.push(+t),this._y.push(+n)}};var ew=function t(n){function e(t){return 1===n?new xc(t):new Mc(t,n)}return e.beta=function(n){return t(+n)},e}(.85);Sc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Tc(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2,this._x1=t,this._y1=n;break;case 2:this._point=3;default:Tc(this,t,n)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var rw=function t(n){function e(t){return new Sc(t,n)}return e.tension=function(n){return t(+n)},e}(0);Nc.prototype={areaStart:Qb,areaEnd:Qb,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._x3=t,this._y3=n;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=n);break;case 2:this._point=3,this._x5=t,this._y5=n;break;default:Tc(this,t,n)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var iw=function t(n){function e(t){return new Nc(t,n)}return e.tension=function(n){return t(+n)},e}(0);kc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Tc(this,t,n)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var ow=function t(n){function e(t){return new kc(t,n)}return e.tension=function(n){return t(+n)},e}(0);Ac.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,
this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){if(t=+t,n=+n,this._point){var e=this._x2-t,r=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(e*e+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3;default:Ec(this,t,n)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var uw=function t(n){function e(t){return n?new Ac(t,n):new Sc(t,0)}return e.alpha=function(n){return t(+n)},e}(.5);Cc.prototype={areaStart:Qb,areaEnd:Qb,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,n){if(t=+t,n=+n,this._point){var e=this._x2-t,r=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(e*e+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=n;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=n);break;case 2:this._point=3,this._x5=t,this._y5=n;break;default:Ec(this,t,n)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var aw=function t(n){function e(t){return n?new Cc(t,n):new Nc(t,0)}return e.alpha=function(n){return t(+n)},e}(.5);zc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){if(t=+t,n=+n,this._point){var e=this._x2-t,r=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(e*e+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Ec(this,t,n)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var cw=function t(n){function e(t){return n?new zc(t,n):new kc(t,0)}return e.alpha=function(n){return t(+n)},e}(.5);Pc.prototype={areaStart:Qb,areaEnd:Qb,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,n){t=+t,n=+n,this._point?this._context.lineTo(t,n):(this._point=1,this._context.moveTo(t,n))}};var sw=function(t){return new Pc(t)};Dc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Uc(this,this._t0,qc(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){var e=NaN;if(t=+t,n=+n,t!==this._x1||n!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3,Uc(this,qc(this,e=Rc(this,t,n)),e);break;default:Uc(this,this._t0,e=Rc(this,t,n))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n,this._t0=e}}},(Oc.prototype=Object.create(Dc.prototype)).point=function(t,n){Dc.prototype.point.call(this,n,t)},Fc.prototype={moveTo:function(t,n){this._context.moveTo(n,t)},closePath:function(){this._context.closePath()},lineTo:function(t,n){this._context.lineTo(n,t)},bezierCurveTo:function(t,n,e,r,i,o){this._context.bezierCurveTo(n,t,r,e,o,i)}},Bc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,n=this._y,e=t.length;if(e)if(this._line?this._context.lineTo(t[0],n[0]):this._context.moveTo(t[0],n[0]),2===e)this._context.lineTo(t[1],n[1]);else for(var r=jc(t),i=jc(n),o=0,u=1;u<e;++o,++u)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],t[u],n[u]);(this._line||0!==this._line&&1===e)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,n){this._x.push(+t),this._y.push(+n)}};var fw=function(t){return new Bc(t)};Hc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,n),this._context.lineTo(t,n);else{var e=this._x*(1-this._t)+t*this._t;this._context.lineTo(e,this._y),this._context.lineTo(e,n)}}this._x=t,this._y=n}};var lw=function(t){return new Hc(t,.5)},hw=Array.prototype.slice,pw=function(t,n){if((r=t.length)>1)for(var e,r,i=1,o=t[n[0]],u=o.length;i<r;++i){e=o,o=t[n[i]];for(var a=0;a<u;++a)o[a][1]+=o[a][0]=isNaN(e[a][1])?e[a][0]:e[a][1]}},dw=function(t){for(var n=t.length,e=new Array(n);--n>=0;)e[n]=n;return e},vw=function(){function t(t){var o,u,a=n.apply(this,arguments),c=t.length,s=a.length,f=new Array(s);for(o=0;o<s;++o){for(var l,h=a[o],p=f[o]=new Array(c),d=0;d<c;++d)p[d]=l=[0,+i(t[d],h,d,t)],l.data=t[d];p.key=h}for(o=0,u=e(f);o<s;++o)f[u[o]].index=o;return r(f,u),f}var n=lb([]),e=dw,r=pw,i=$c;return t.keys=function(e){return arguments.length?(n="function"==typeof e?e:lb(hw.call(e)),t):n},t.value=function(n){return arguments.length?(i="function"==typeof n?n:lb(+n),t):i},t.order=function(n){return arguments.length?(e=null==n?dw:"function"==typeof n?n:lb(hw.call(n)),t):e},t.offset=function(n){return arguments.length?(r=null==n?pw:n,t):r},t},_w=function(t,n){if((r=t.length)>0){for(var e,r,i,o=0,u=t[0].length;o<u;++o){for(i=e=0;e<r;++e)i+=t[e][o][1]||0;if(i)for(e=0;e<r;++e)t[e][o][1]/=i}pw(t,n)}},gw=function(t,n){if((e=t.length)>0){for(var e,r=0,i=t[n[0]],o=i.length;r<o;++r){for(var u=0,a=0;u<e;++u)a+=t[u][r][1]||0;i[r][1]+=i[r][0]=-a/2}pw(t,n)}},yw=function(t,n){if((i=t.length)>0&&(r=(e=t[n[0]]).length)>0){for(var e,r,i,o=0,u=1;u<r;++u){for(var a=0,c=0,s=0;a<i;++a){for(var f=t[n[a]],l=f[u][1]||0,h=f[u-1][1]||0,p=(l-h)/2,d=0;d<a;++d){var v=t[n[d]];p+=(v[u][1]||0)-(v[u-1][1]||0)}c+=l,s+=p*l}e[u-1][1]+=e[u-1][0]=o,c&&(o-=s/c)}e[u-1][1]+=e[u-1][0]=o,pw(t,n)}},mw=function(t){var n=t.map(Wc);return dw(t).sort(function(t,e){return n[t]-n[e]})},xw=function(t){return mw(t).reverse()},bw=function(t){var n,e,r=t.length,i=t.map(Wc),o=dw(t).sort(function(t,n){return i[n]-i[t]}),u=0,a=0,c=[],s=[];for(n=0;n<r;++n)e=o[n],u<a?(u+=i[e],c.push(e)):(a+=i[e],s.push(e));return s.reverse().concat(c)},ww=function(t){return dw(t).reverse()},Mw=function(t){return function(){return t}};Jc.prototype={constructor:Jc,insert:function(t,n){var e,r,i;if(t){if(n.P=t,n.N=t.N,t.N&&(t.N.P=n),t.N=n,t.R){for(t=t.R;t.L;)t=t.L;t.L=n}else t.R=n;e=t}else this._?(t=ns(this._),n.P=null,n.N=t,t.P=t.L=n,e=t):(n.P=n.N=null,this._=n,e=null);for(n.L=n.R=null,n.U=e,n.C=!0,t=n;e&&e.C;)r=e.U,e===r.L?(i=r.R,i&&i.C?(e.C=i.C=!1,r.C=!0,t=r):(t===e.R&&(Kc(this,e),t=e,e=t.U),e.C=!1,r.C=!0,ts(this,r))):(i=r.L,i&&i.C?(e.C=i.C=!1,r.C=!0,t=r):(t===e.L&&(ts(this,e),t=e,e=t.U),e.C=!1,r.C=!0,Kc(this,r))),e=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var n,e,r,i=t.U,o=t.L,u=t.R;if(e=o?u?ns(u):o:u,i?i.L===t?i.L=e:i.R=e:this._=e,o&&u?(r=e.C,e.C=t.C,e.L=o,o.U=e,e!==u?(i=e.U,e.U=t.U,t=e.R,i.L=t,e.R=u,u.U=e):(e.U=i,i=e,t=e.R)):(r=t.C,t=e),t&&(t.U=i),!r){if(t&&t.C)return void(t.C=!1);do{if(t===this._)break;if(t===i.L){if(n=i.R,n.C&&(n.C=!1,i.C=!0,Kc(this,i),n=i.R),n.L&&n.L.C||n.R&&n.R.C){n.R&&n.R.C||(n.L.C=!1,n.C=!0,ts(this,n),n=i.R),n.C=i.C,i.C=n.R.C=!1,Kc(this,i),t=this._;break}}else if(n=i.L,n.C&&(n.C=!1,i.C=!0,ts(this,i),n=i.L),n.L&&n.L.C||n.R&&n.R.C){n.L&&n.L.C||(n.R.C=!1,n.C=!0,Kc(this,n),n=i.L),n.C=i.C,i.C=n.L.C=!1,ts(this,i),t=this._;break}n.C=!0,t=i,i=i.U}while(!t.C);t&&(t.C=!1)}}};var Tw,Sw,Nw,kw,Ew,Aw=[],Cw=[],zw=1e-6,Pw=1e-12;Ns.prototype={constructor:Ns,polygons:function(){var t=this.edges;return this.cells.map(function(n){var e=n.halfedges.map(function(e){return fs(n,t[e])});return e.data=n.site.data,e})},triangles:function(){var t=[],n=this.edges;return this.cells.forEach(function(e,r){if(o=(i=e.halfedges).length)for(var i,o,u,a=e.site,c=-1,s=n[i[o-1]],f=s.left===a?s.right:s.left;++c<o;)u=f,s=n[i[c]],f=s.left===a?s.right:s.left,u&&f&&r<u.index&&r<f.index&&Ts(a,u,f)<0&&t.push([a.data,u.data,f.data])}),t},links:function(){return this.edges.filter(function(t){return t.right}).map(function(t){return{source:t.left.data,target:t.right.data}})},find:function(t,n,e){for(var r,i,o=this,u=o._found||0,a=o.cells.length;!(i=o.cells[u]);)if(++u>=a)return null;var c=t-i.site[0],s=n-i.site[1],f=c*c+s*s;do{i=o.cells[r=u],u=null,i.halfedges.forEach(function(e){var r=o.edges[e],a=r.left;if(a!==i.site&&a||(a=r.right)){var c=t-a[0],s=n-a[1],l=c*c+s*s;l<f&&(f=l,u=a.index)}})}while(null!==u);return o._found=r,null==e||f<=e*e?i.site:null}};var Lw=function(){function t(t){return new Ns(t.map(function(r,i){var o=[Math.round(n(r,i,t)/zw)*zw,Math.round(e(r,i,t)/zw)*zw];return o.index=i,o.data=r,o}),r)}var n=Zc,e=Gc,r=null;return t.polygons=function(n){return t(n).polygons()},t.links=function(n){return t(n).links()},t.triangles=function(n){return t(n).triangles()},t.x=function(e){return arguments.length?(n="function"==typeof e?e:Mw(+e),t):n},t.y=function(n){return arguments.length?(e="function"==typeof n?n:Mw(+n),t):e},t.extent=function(n){return arguments.length?(r=null==n?null:[[+n[0][0],+n[0][1]],[+n[1][0],+n[1][1]]],t):r&&[[r[0][0],r[0][1]],[r[1][0],r[1][1]]]},t.size=function(n){return arguments.length?(r=null==n?null:[[0,0],[+n[0],+n[1]]],t):r&&[r[1][0]-r[0][0],r[1][1]-r[0][1]]},t},Rw=function(t){return function(){return t}};Es.prototype={constructor:Es,scale:function(t){return 1===t?this:new Es(this.k*t,this.x,this.y)},translate:function(t,n){return 0===t&0===n?this:new Es(this.k,this.x+this.k*t,this.y+this.k*n)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var qw=new Es(1,0,0);As.prototype=Es.prototype;var Uw=function(){t.event.preventDefault(),t.event.stopImmediatePropagation()},Dw=function(){function n(t){t.on("wheel.zoom",s).on("mousedown.zoom",f).on("dblclick.zoom",l).on("touchstart.zoom",h).on("touchmove.zoom",p).on("touchend.zoom touchcancel.zoom",d).style("-webkit-tap-highlight-color","rgba(0,0,0,0)").property("__zoom",Ls)}function e(t,n){return n=Math.max(x,Math.min(b,n)),n===t.k?t:new Es(n,t.x,t.y)}function r(t,n,e){var r=n[0]-e[0]*t.k,i=n[1]-e[1]*t.k;return r===t.x&&i===t.y?t:new Es(t.k,r,i)}function i(t,n){var e=t.invertX(n[0][0])-w,r=t.invertX(n[1][0])-M,i=t.invertY(n[0][1])-T,o=t.invertY(n[1][1])-S;return t.translate(r>e?(e+r)/2:Math.min(0,e)||Math.max(0,r),o>i?(i+o)/2:Math.min(0,i)||Math.max(0,o))}function o(t){return[(+t[0][0]+ +t[1][0])/2,(+t[0][1]+ +t[1][1])/2]}function u(t,n,e){t.on("start.zoom",function(){a(this,arguments).start()}).on("interrupt.zoom end.zoom",function(){a(this,arguments).end()}).tween("zoom",function(){var t=this,r=arguments,i=a(t,r),u=m.apply(t,r),c=e||o(u),s=Math.max(u[1][0]-u[0][0],u[1][1]-u[0][1]),f=t.__zoom,l="function"==typeof n?n.apply(t,r):n,h=k(f.invert(c).concat(s/f.k),l.invert(c).concat(s/l.k));return function(t){if(1===t)t=l;else{var n=h(t),e=s/n[2];t=new Es(e,c[0]-n[0]*e,c[1]-n[1]*e)}i.zoom(null,t)}})}function a(t,n){for(var e,r=0,i=E.length;r<i;++r)if((e=E[r]).that===t)return e;return new c(t,n)}function c(t,n){this.that=t,this.args=n,this.index=-1,this.active=0,this.extent=m.apply(t,n)}function s(){function n(){o.wheel=null,o.end()}if(y.apply(this,arguments)){var o=a(this,arguments),u=this.__zoom,c=Math.max(x,Math.min(b,u.k*Math.pow(2,-t.event.deltaY*(t.event.deltaMode?120:1)/500))),s=If(this);if(o.wheel)o.mouse[0][0]===s[0]&&o.mouse[0][1]===s[1]||(o.mouse[1]=u.invert(o.mouse[0]=s)),clearTimeout(o.wheel);else{if(u.k===c)return;o.mouse=[s,u.invert(s)],cp(this),o.start()}Uw(),o.wheel=setTimeout(n,P),o.zoom("mouse",i(r(e(u,c),o.mouse[0],o.mouse[1]),o.extent))}}function f(){function n(){Uw(),o.moved=!0,o.zoom("mouse",i(r(o.that.__zoom,o.mouse[0]=If(o.that),o.mouse[1]),o.extent))}function e(){u.on("mousemove.zoom mouseup.zoom",null),yt(t.event.view,o.moved),Uw(),o.end()}if(!g&&y.apply(this,arguments)){var o=a(this,arguments),u=wl(t.event.view).on("mousemove.zoom",n,!0).on("mouseup.zoom",e,!0),c=If(this);kl(t.event.view),Cs(),o.mouse=[c,this.__zoom.invert(c)],cp(this),o.start()}}function l(){if(y.apply(this,arguments)){var o=this.__zoom,a=If(this),c=o.invert(a),s=o.k*(t.event.shiftKey?.5:2),f=i(r(e(o,s),a,c),m.apply(this,arguments));Uw(),N>0?wl(this).transition().duration(N).call(u,f,a):wl(this).call(n.transform,f)}}function h(){if(y.apply(this,arguments)){var n,e,r,i,o=a(this,arguments),u=t.event.changedTouches,c=u.length;for(Cs(),e=0;e<c;++e)r=u[e],i=Tl(this,u,r.identifier),i=[i,this.__zoom.invert(i),r.identifier],o.touch0?o.touch1||(o.touch1=i):(o.touch0=i,n=!0);if(_&&(_=clearTimeout(_),!o.touch1))return o.end(),void((i=wl(this).on("dblclick.zoom"))&&i.apply(this,arguments));n&&(_=setTimeout(function(){_=null},z),cp(this),o.start())}}function p(){var n,o,u,c,s=a(this,arguments),f=t.event.changedTouches,l=f.length;for(Uw(),_&&(_=clearTimeout(_)),n=0;n<l;++n)o=f[n],u=Tl(this,f,o.identifier),s.touch0&&s.touch0[2]===o.identifier?s.touch0[0]=u:s.touch1&&s.touch1[2]===o.identifier&&(s.touch1[0]=u);if(o=s.that.__zoom,s.touch1){var h=s.touch0[0],p=s.touch0[1],d=s.touch1[0],v=s.touch1[1],g=(g=d[0]-h[0])*g+(g=d[1]-h[1])*g,y=(y=v[0]-p[0])*y+(y=v[1]-p[1])*y;o=e(o,Math.sqrt(g/y)),u=[(h[0]+d[0])/2,(h[1]+d[1])/2],c=[(p[0]+v[0])/2,(p[1]+v[1])/2]}else{if(!s.touch0)return;u=s.touch0[0],c=s.touch0[1]}s.zoom("touch",i(r(o,u,c),s.extent))}function d(){var n,e,r=a(this,arguments),i=t.event.changedTouches,o=i.length;for(Cs(),g&&clearTimeout(g),g=setTimeout(function(){g=null},z),n=0;n<o;++n)e=i[n],r.touch0&&r.touch0[2]===e.identifier?delete r.touch0:r.touch1&&r.touch1[2]===e.identifier&&delete r.touch1;r.touch1&&!r.touch0&&(r.touch0=r.touch1,delete r.touch1),r.touch0?r.touch0[1]=this.__zoom.invert(r.touch0[0]):r.end()}var _,g,y=zs,m=Ps,x=0,b=1/0,w=-b,M=b,T=w,S=M,N=250,k=Lh,E=[],C=v("start","zoom","end"),z=500,P=150;return n.transform=function(t,n){var e=t.selection?t.selection():t;e.property("__zoom",Ls),t!==e?u(t,n):e.interrupt().each(function(){a(this,arguments).start().zoom(null,"function"==typeof n?n.apply(this,arguments):n).end()})},n.scaleBy=function(t,e){n.scaleTo(t,function(){return this.__zoom.k*("function"==typeof e?e.apply(this,arguments):e)})},n.scaleTo=function(t,u){n.transform(t,function(){var t=m.apply(this,arguments),n=this.__zoom,a=o(t),c=n.invert(a);return i(r(e(n,"function"==typeof u?u.apply(this,arguments):u),a,c),t)})},n.translateBy=function(t,e,r){n.transform(t,function(){return i(this.__zoom.translate("function"==typeof e?e.apply(this,arguments):e,"function"==typeof r?r.apply(this,arguments):r),m.apply(this,arguments))})},c.prototype={start:function(){return 1==++this.active&&(this.index=E.push(this)-1,this.emit("start")),this},zoom:function(t,n){return this.mouse&&"mouse"!==t&&(this.mouse[1]=n.invert(this.mouse[0])),this.touch0&&"touch"!==t&&(this.touch0[1]=n.invert(this.touch0[0])),this.touch1&&"touch"!==t&&(this.touch1[1]=n.invert(this.touch1[0])),this.that.__zoom=n,this.emit("zoom"),this},end:function(){return 0==--this.active&&(E.splice(this.index,1),this.index=-1,this.emit("end")),this},emit:function(t){A(new ks(n,t,this.that.__zoom),C.apply,C,[t,this.that,this.args])}},n.filter=function(t){return arguments.length?(y="function"==typeof t?t:Rw(!!t),n):y},n.extent=function(t){return arguments.length?(m="function"==typeof t?t:Rw([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),n):m},n.scaleExtent=function(t){return arguments.length?(x=+t[0],b=+t[1],n):[x,b]},n.translateExtent=function(t){return arguments.length?(w=+t[0][0],M=+t[1][0],T=+t[0][1],S=+t[1][1],n):[[w,T],[M,S]]},n.duration=function(t){return arguments.length?(N=+t,n):N},n.interpolate=function(t){return arguments.length?(k=t,n):k},n.on=function(){var t=C.on.apply(C,arguments);return t===C?n:t},n};t.version="4.8.0",t.bisect=Ds,t.bisectRight=Ds,t.bisectLeft=Os,t.ascending=Rs,t.bisector=qs,t.cross=Is,t.descending=Ys,t.deviation=Hs,t.extent=Xs,t.histogram=rf,t.thresholdFreedmanDiaconis=uf,t.thresholdScott=af,t.thresholdSturges=ef,t.max=cf,t.mean=sf,t.median=ff,t.merge=lf,t.min=hf,t.pairs=Fs,t.permute=pf,t.quantile=of,t.range=Js,t.scan=df,t.shuffle=vf,t.sum=_f,t.ticks=nf,t.tickIncrement=r,t.tickStep=i,t.transpose=gf,t.variance=js,t.zip=yf,t.axisTop=l,t.axisRight=h,t.axisBottom=p,t.axisLeft=d,t.brush=yd,t.brushX=Ce,t.brushY=ze,t.brushSelection=Ae,t.chord=Sd,t.ribbon=zd,t.nest=Pd,t.set=We,t.map=Be,t.keys=Rd,t.values=qd,t.entries=Ud,t.color=St,t.rgb=At,t.hsl=Lt,t.lab=Dt,t.hcl=Ht,t.cubehelix=$t,t.dispatch=v,t.drag=Al,t.dragDisable=kl,t.dragEnable=yt,t.dsvFormat=Dd,t.csvParse=Fd,t.csvParseRows=Id,t.csvFormat=Yd,t.csvFormatRows=Bd,t.tsvParse=Hd,t.tsvParseRows=Xd,t.tsvFormat=Vd,t.tsvFormatRows=$d,t.easeLinear=re,t.easeQuad=ue,t.easeQuadIn=ie,t.easeQuadOut=oe,t.easeQuadInOut=ue,t.easeCubic=se,t.easeCubicIn=ae,t.easeCubicOut=ce,t.easeCubicInOut=se,t.easePoly=Lp,t.easePolyIn=zp,t.easePolyOut=Pp,t.easePolyInOut=Lp,t.easeSin=he,t.easeSinIn=fe,t.easeSinOut=le,t.easeSinInOut=he,t.easeExp=ve,t.easeExpIn=pe,t.easeExpOut=de,t.easeExpInOut=ve,t.easeCircle=ye,t.easeCircleIn=_e,t.easeCircleOut=ge,t.easeCircleInOut=ye,t.easeBounce=xe,t.easeBounceIn=me,t.easeBounceOut=xe,t.easeBounceInOut=be,t.easeBack=Wp,t.easeBackIn=Vp,t.easeBackOut=$p,t.easeBackInOut=Wp,t.easeElastic=Jp,t.easeElasticIn=Gp,t.easeElasticOut=Jp,t.easeElasticInOut=Qp,t.forceCenter=Wd,t.forceCollide=hv,t.forceLink=pv,t.forceManyBody=gv,t.forceSimulation=_v,t.forceX=yv,t.forceY=mv,t.formatDefaultLocale=dr,t.formatLocale=Pv,t.formatSpecifier=hr,t.precisionFixed=Lv,t.precisionPrefix=Rv,t.precisionRound=qv,t.geoArea=I_,t.geoBounds=j_,t.geoCentroid=X_,t.geoCircle=ug,t.geoClipExtent=pg,t.geoContains=Tg,t.geoDistance=bg,t.geoGraticule=Mi,t.geoGraticule10=Ti,t.geoInterpolate=Sg,t.geoLength=yg,t.geoPath=Qg,t.geoAlbers=cy,t.geoAlbersUsa=sy,t.geoAzimuthalEqualArea=ly,t.geoAzimuthalEqualAreaRaw=fy,t.geoAzimuthalEquidistant=py,t.geoAzimuthalEquidistantRaw=hy,t.geoConicConformal=vy,t.geoConicConformalRaw=ho,t.geoConicEqualArea=ay,t.geoConicEqualAreaRaw=oo,t.geoConicEquidistant=gy,t.geoConicEquidistantRaw=vo,t.geoEquirectangular=_y,t.geoEquirectangularRaw=po,t.geoGnomonic=yy,t.geoGnomonicRaw=_o,t.geoIdentity=my,t.geoProjection=no,t.geoProjectionMutator=eo,t.geoMercator=dy,t.geoMercatorRaw=so,t.geoOrthographic=xy,t.geoOrthographicRaw=yo,t.geoStereographic=by,t.geoStereographicRaw=mo,t.geoTransverseMercator=wy,t.geoTransverseMercatorRaw=xo,t.geoRotation=og,t.geoStream=U_,t.geoTransform=ey,t.cluster=My,t.hierarchy=Co,t.pack=Fy,t.packSiblings=Dy,t.packEnclose=Uy,t.partition=By,t.stratify=Vy,t.tree=$y,t.treemap=Jy,t.treemapBinary=Qy,t.treemapDice=Yy,t.treemapSlice=Wy,t.treemapSliceDice=Ky,t.treemapSquarify=Gy,t.treemapResquarify=tm,t.interpolate=Sh,t.interpolateArray=yh,t.interpolateBasis=hh,t.interpolateBasisClosed=ph,t.interpolateDate=mh,t.interpolateNumber=xh,t.interpolateObject=bh,t.interpolateRound=Nh,t.interpolateString=Th,t.interpolateTransformCss=Ch,t.interpolateTransformSvg=zh,t.interpolateZoom=Lh,t.interpolateRgb=vh,t.interpolateRgbBasis=_h,t.interpolateRgbBasisClosed=gh,t.interpolateHsl=Rh,t.interpolateHslLong=qh,t.interpolateLab=hn,t.interpolateHcl=Uh,t.interpolateHclLong=Dh,t.interpolateCubehelix=Oh,t.interpolateCubehelixLong=Fh,t.quantize=Ih,t.path=qe,t.polygonArea=nm,t.polygonCentroid=em;t.polygonHull=im,t.polygonContains=om,t.polygonLength=um,t.quadtree=rr,t.queue=mu,t.randomUniform=sm,t.randomNormal=fm,t.randomLogNormal=lm,t.randomBates=pm,t.randomIrwinHall=hm,t.randomExponential=dm,t.request=vm,t.html=gm,t.json=ym,t.text=mm,t.xml=xm,t.csv=wm,t.tsv=Mm,t.scaleBand=Tu,t.scalePoint=Nu,t.scaleIdentity=Uu,t.scaleLinear=qu,t.scaleLog=ju,t.scaleOrdinal=Mu,t.scaleImplicit=km,t.scalePow=Xu,t.scaleSqrt=Vu,t.scaleQuantile=$u,t.scaleQuantize=Wu,t.scaleThreshold=Zu,t.scaleTime=Zx,t.scaleUtc=Gx,t.schemeCategory10=Qx,t.schemeCategory20b=Kx,t.schemeCategory20c=tb,t.schemeCategory20=nb,t.interpolateCubehelixDefault=eb,t.interpolateRainbow=ub,t.interpolateWarm=rb,t.interpolateCool=ib,t.interpolateViridis=ab,t.interpolateMagma=cb,t.interpolateInferno=sb,t.interpolatePlasma=fb,t.scaleSequential=rc,t.creator=Cf,t.local=w,t.matcher=qf,t.mouse=If,t.namespace=Af,t.namespaces=Ef,t.select=wl,t.selectAll=Ml,t.selection=_t,t.selector=Yf,t.selectorAll=jf,t.touch=Tl,t.touches=Sl,t.window=cl,t.customEvent=A,t.arc=Mb,t.area=Nb,t.line=Sb,t.pie=Ab,t.radialArea=Pb,t.radialLine=zb,t.symbol=Jb,t.symbols=Gb,t.symbolCircle=Lb,t.symbolCross=Rb,t.symbolDiamond=Db,t.symbolSquare=Bb,t.symbolStar=Yb,t.symbolTriangle=Hb,t.symbolWye=Zb,t.curveBasisClosed=tw,t.curveBasisOpen=nw,t.curveBasis=Kb,t.curveBundle=ew,t.curveCardinalClosed=iw,t.curveCardinalOpen=ow,t.curveCardinal=rw,t.curveCatmullRomClosed=aw,t.curveCatmullRomOpen=cw,t.curveCatmullRom=uw,t.curveLinearClosed=sw,t.curveLinear=Tb,t.curveMonotoneX=Ic,t.curveMonotoneY=Yc,t.curveNatural=fw,t.curveStep=lw,t.curveStepAfter=Vc,t.curveStepBefore=Xc,t.stack=vw,t.stackOffsetExpand=_w,t.stackOffsetNone=pw,t.stackOffsetSilhouette=gw,t.stackOffsetWiggle=yw,t.stackOrderAscending=mw,t.stackOrderDescending=xw,t.stackOrderInsideOut=bw,t.stackOrderNone=dw,t.stackOrderReverse=ww,t.timeInterval=Gu,t.timeMillisecond=qm,t.timeMilliseconds=Um,t.utcMillisecond=qm,t.utcMilliseconds=Um,t.timeSecond=Fm,t.timeSeconds=Im,t.utcSecond=Fm,t.utcSeconds=Im,t.timeMinute=Ym,t.timeMinutes=Bm,t.timeHour=jm,t.timeHours=Hm,t.timeDay=Xm,t.timeDays=Vm,t.timeWeek=$m,t.timeWeeks=tx,t.timeSunday=$m,t.timeSundays=tx,t.timeMonday=Wm,t.timeMondays=nx,t.timeTuesday=Zm,t.timeTuesdays=ex,t.timeWednesday=Gm,t.timeWednesdays=rx,t.timeThursday=Jm,t.timeThursdays=ix,t.timeFriday=Qm,t.timeFridays=ox,t.timeSaturday=Km,t.timeSaturdays=ux,t.timeMonth=ax,t.timeMonths=cx,t.timeYear=sx,t.timeYears=fx,t.utcMinute=lx,t.utcMinutes=hx,t.utcHour=px,t.utcHours=dx,t.utcDay=vx,t.utcDays=_x,t.utcWeek=gx,t.utcWeeks=Tx,t.utcSunday=gx,t.utcSundays=Tx,t.utcMonday=yx,t.utcMondays=Sx,t.utcTuesday=mx,t.utcTuesdays=Nx,t.utcWednesday=xx,t.utcWednesdays=kx,t.utcThursday=bx,t.utcThursdays=Ex,t.utcFriday=wx,t.utcFridays=Ax,t.utcSaturday=Mx,t.utcSaturdays=Cx,t.utcMonth=zx,t.utcMonths=Px,t.utcYear=Lx,t.utcYears=qx,t.timeFormatDefaultLocale=Ga,t.timeFormatLocale=ea,t.isoFormat=Ix,t.isoParse=Yx,t.now=vn,t.timer=yn,t.timerFlush=mn,t.timeout=Gh,t.interval=Jh,t.transition=ne,t.active=ed,t.interrupt=cp,t.voronoi=Lw,t.zoom=Dw,t.zoomTransform=As,t.zoomIdentity=qw,Object.defineProperty(t,"__esModule",{value:!0})});

/*!
 * typeahead.js 1.1.1
 * https://github.com/twitter/typeahead.js
 * Copyright 2013-2017 Twitter, Inc. and other contributors; Licensed MIT
 */

!function(a,b){"function"==typeof define&&define.amd?define(["jquery"],function(c){return a.Bloodhound=b(c)}):"object"==typeof exports?module.exports=b(require("jquery")):a.Bloodhound=b(a.jQuery)}(this,function(a){var b=function(){"use strict";return{isMsie:function(){return!!/(msie|trident)/i.test(navigator.userAgent)&&navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]},isBlankString:function(a){return!a||/^\s*$/.test(a)},escapeRegExChars:function(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(a){return"string"==typeof a},isNumber:function(a){return"number"==typeof a},isArray:a.isArray,isFunction:a.isFunction,isObject:a.isPlainObject,isUndefined:function(a){return"undefined"==typeof a},isElement:function(a){return!(!a||1!==a.nodeType)},isJQuery:function(b){return b instanceof a},toStr:function(a){return b.isUndefined(a)||null===a?"":a+""},bind:a.proxy,each:function(b,c){function d(a,b){return c(b,a)}a.each(b,d)},map:a.map,filter:a.grep,every:function(b,c){var d=!0;return b?(a.each(b,function(a,e){if(!(d=c.call(null,e,a,b)))return!1}),!!d):d},some:function(b,c){var d=!1;return b?(a.each(b,function(a,e){if(d=c.call(null,e,a,b))return!1}),!!d):d},mixin:a.extend,identity:function(a){return a},clone:function(b){return a.extend(!0,{},b)},getIdGenerator:function(){var a=0;return function(){return a++}},templatify:function(b){function c(){return String(b)}return a.isFunction(b)?b:c},defer:function(a){setTimeout(a,0)},debounce:function(a,b,c){var d,e;return function(){var f,g,h=this,i=arguments;return f=function(){d=null,c||(e=a.apply(h,i))},g=c&&!d,clearTimeout(d),d=setTimeout(f,b),g&&(e=a.apply(h,i)),e}},throttle:function(a,b){var c,d,e,f,g,h;return g=0,h=function(){g=new Date,e=null,f=a.apply(c,d)},function(){var i=new Date,j=b-(i-g);return c=this,d=arguments,j<=0?(clearTimeout(e),e=null,g=i,f=a.apply(c,d)):e||(e=setTimeout(h,j)),f}},stringify:function(a){return b.isString(a)?a:JSON.stringify(a)},guid:function(){function a(a){var b=(Math.random().toString(16)+"000000000").substr(2,8);return a?"-"+b.substr(0,4)+"-"+b.substr(4,4):b}return"tt-"+a()+a(!0)+a(!0)+a()},noop:function(){}}}(),c="1.1.1",d=function(){"use strict";function a(a){return a=b.toStr(a),a?a.split(/\s+/):[]}function c(a){return a=b.toStr(a),a?a.split(/\W+/):[]}function d(a){a=b.toStr(a);var c=[],d="";return b.each(a.split(""),function(a){a.match(/\s+/)?d="":(c.push(d+a),d+=a)}),c}function e(a){return function(c){return c=b.isArray(c)?c:[].slice.call(arguments,0),function(d){var e=[];return b.each(c,function(c){e=e.concat(a(b.toStr(d[c])))}),e}}}return{nonword:c,whitespace:a,ngram:d,obj:{nonword:e(c),whitespace:e(a),ngram:e(d)}}}(),e=function(){"use strict";function c(c){this.maxSize=b.isNumber(c)?c:100,this.reset(),this.maxSize<=0&&(this.set=this.get=a.noop)}function d(){this.head=this.tail=null}function e(a,b){this.key=a,this.val=b,this.prev=this.next=null}return b.mixin(c.prototype,{set:function(a,b){var c,d=this.list.tail;this.size>=this.maxSize&&(this.list.remove(d),delete this.hash[d.key],this.size--),(c=this.hash[a])?(c.val=b,this.list.moveToFront(c)):(c=new e(a,b),this.list.add(c),this.hash[a]=c,this.size++)},get:function(a){var b=this.hash[a];if(b)return this.list.moveToFront(b),b.val},reset:function(){this.size=0,this.hash={},this.list=new d}}),b.mixin(d.prototype,{add:function(a){this.head&&(a.next=this.head,this.head.prev=a),this.head=a,this.tail=this.tail||a},remove:function(a){a.prev?a.prev.next=a.next:this.head=a.next,a.next?a.next.prev=a.prev:this.tail=a.prev},moveToFront:function(a){this.remove(a),this.add(a)}}),c}(),f=function(){"use strict";function c(a,c){this.prefix=["__",a,"__"].join(""),this.ttlKey="__ttl__",this.keyMatcher=new RegExp("^"+b.escapeRegExChars(this.prefix)),this.ls=c||h,!this.ls&&this._noop()}function d(){return(new Date).getTime()}function e(a){return JSON.stringify(b.isUndefined(a)?null:a)}function f(b){return a.parseJSON(b)}function g(a){var b,c,d=[],e=h.length;for(b=0;b<e;b++)(c=h.key(b)).match(a)&&d.push(c.replace(a,""));return d}var h;try{h=window.localStorage,h.setItem("~~~","!"),h.removeItem("~~~")}catch(a){h=null}return b.mixin(c.prototype,{_prefix:function(a){return this.prefix+a},_ttlKey:function(a){return this._prefix(a)+this.ttlKey},_noop:function(){this.get=this.set=this.remove=this.clear=this.isExpired=b.noop},_safeSet:function(a,b){try{this.ls.setItem(a,b)}catch(a){"QuotaExceededError"===a.name&&(this.clear(),this._noop())}},get:function(a){return this.isExpired(a)&&this.remove(a),f(this.ls.getItem(this._prefix(a)))},set:function(a,c,f){return b.isNumber(f)?this._safeSet(this._ttlKey(a),e(d()+f)):this.ls.removeItem(this._ttlKey(a)),this._safeSet(this._prefix(a),e(c))},remove:function(a){return this.ls.removeItem(this._ttlKey(a)),this.ls.removeItem(this._prefix(a)),this},clear:function(){var a,b=g(this.keyMatcher);for(a=b.length;a--;)this.remove(b[a]);return this},isExpired:function(a){var c=f(this.ls.getItem(this._ttlKey(a)));return!!(b.isNumber(c)&&d()>c)}}),c}(),g=function(){"use strict";function c(a){a=a||{},this.maxPendingRequests=a.maxPendingRequests||6,this.cancelled=!1,this.lastReq=null,this._send=a.transport,this._get=a.limiter?a.limiter(this._get):this._get,this._cache=a.cache===!1?new e(0):g}var d=0,f={},g=new e(10);return c.setMaxPendingRequests=function(a){this.maxPendingRequests=a},c.resetCache=function(){g.reset()},b.mixin(c.prototype,{_fingerprint:function(b){return b=b||{},b.url+b.type+a.param(b.data||{})},_get:function(a,b){function c(a){b(null,a),j._cache.set(h,a)}function e(){b(!0)}function g(){d--,delete f[h],j.onDeckRequestArgs&&(j._get.apply(j,j.onDeckRequestArgs),j.onDeckRequestArgs=null)}var h,i,j=this;h=this._fingerprint(a),this.cancelled||h!==this.lastReq||((i=f[h])?i.done(c).fail(e):d<this.maxPendingRequests?(d++,f[h]=this._send(a).done(c).fail(e).always(g)):this.onDeckRequestArgs=[].slice.call(arguments,0))},get:function(c,d){var e,f;d=d||a.noop,c=b.isString(c)?{url:c}:c||{},f=this._fingerprint(c),this.cancelled=!1,this.lastReq=f,(e=this._cache.get(f))?d(null,e):this._get(c,d)},cancel:function(){this.cancelled=!0}}),c}(),h=window.SearchIndex=function(){"use strict";function c(c){c=c||{},c.datumTokenizer&&c.queryTokenizer||a.error("datumTokenizer and queryTokenizer are both required"),this.identify=c.identify||b.stringify,this.datumTokenizer=c.datumTokenizer,this.queryTokenizer=c.queryTokenizer,this.matchAnyQueryToken=c.matchAnyQueryToken,this.reset()}function d(a){return a=b.filter(a,function(a){return!!a}),a=b.map(a,function(a){return a.toLowerCase()})}function e(){var a={};return a[i]=[],a[h]={},a}function f(a){for(var b={},c=[],d=0,e=a.length;d<e;d++)b[a[d]]||(b[a[d]]=!0,c.push(a[d]));return c}function g(a,b){var c=0,d=0,e=[];a=a.sort(),b=b.sort();for(var f=a.length,g=b.length;c<f&&d<g;)a[c]<b[d]?c++:a[c]>b[d]?d++:(e.push(a[c]),c++,d++);return e}var h="c",i="i";return b.mixin(c.prototype,{bootstrap:function(a){this.datums=a.datums,this.trie=a.trie},add:function(a){var c=this;a=b.isArray(a)?a:[a],b.each(a,function(a){var f,g;c.datums[f=c.identify(a)]=a,g=d(c.datumTokenizer(a)),b.each(g,function(a){var b,d,g;for(b=c.trie,d=a.split("");g=d.shift();)b=b[h][g]||(b[h][g]=e()),b[i].push(f)})})},get:function(a){var c=this;return b.map(a,function(a){return c.datums[a]})},search:function(a){var c,e,j=this;return c=d(this.queryTokenizer(a)),b.each(c,function(a){var b,c,d,f;if(e&&0===e.length&&!j.matchAnyQueryToken)return!1;for(b=j.trie,c=a.split("");b&&(d=c.shift());)b=b[h][d];if(b&&0===c.length)f=b[i].slice(0),e=e?g(e,f):f;else if(!j.matchAnyQueryToken)return e=[],!1}),e?b.map(f(e),function(a){return j.datums[a]}):[]},all:function(){var a=[];for(var b in this.datums)a.push(this.datums[b]);return a},reset:function(){this.datums={},this.trie=e()},serialize:function(){return{datums:this.datums,trie:this.trie}}}),c}(),i=function(){"use strict";function a(a){this.url=a.url,this.ttl=a.ttl,this.cache=a.cache,this.prepare=a.prepare,this.transform=a.transform,this.transport=a.transport,this.thumbprint=a.thumbprint,this.storage=new f(a.cacheKey)}var c;return c={data:"data",protocol:"protocol",thumbprint:"thumbprint"},b.mixin(a.prototype,{_settings:function(){return{url:this.url,type:"GET",dataType:"json"}},store:function(a){this.cache&&(this.storage.set(c.data,a,this.ttl),this.storage.set(c.protocol,location.protocol,this.ttl),this.storage.set(c.thumbprint,this.thumbprint,this.ttl))},fromCache:function(){var a,b={};return this.cache?(b.data=this.storage.get(c.data),b.protocol=this.storage.get(c.protocol),b.thumbprint=this.storage.get(c.thumbprint),a=b.thumbprint!==this.thumbprint||b.protocol!==location.protocol,b.data&&!a?b.data:null):null},fromNetwork:function(a){function b(){a(!0)}function c(b){a(null,e.transform(b))}var d,e=this;a&&(d=this.prepare(this._settings()),this.transport(d).fail(b).done(c))},clear:function(){return this.storage.clear(),this}}),a}(),j=function(){"use strict";function a(a){this.url=a.url,this.prepare=a.prepare,this.transform=a.transform,this.indexResponse=a.indexResponse,this.transport=new g({cache:a.cache,limiter:a.limiter,transport:a.transport,maxPendingRequests:a.maxPendingRequests})}return b.mixin(a.prototype,{_settings:function(){return{url:this.url,type:"GET",dataType:"json"}},get:function(a,b){function c(a,c){b(a?[]:e.transform(c))}var d,e=this;if(b)return a=a||"",d=this.prepare(a,this._settings()),this.transport.get(d,c)},cancelLastRequest:function(){this.transport.cancel()}}),a}(),k=function(){"use strict";function d(d){var e;return d?(e={url:null,ttl:864e5,cache:!0,cacheKey:null,thumbprint:"",prepare:b.identity,transform:b.identity,transport:null},d=b.isString(d)?{url:d}:d,d=b.mixin(e,d),!d.url&&a.error("prefetch requires url to be set"),d.transform=d.filter||d.transform,d.cacheKey=d.cacheKey||d.url,d.thumbprint=c+d.thumbprint,d.transport=d.transport?h(d.transport):a.ajax,d):null}function e(c){var d;if(c)return d={url:null,cache:!0,prepare:null,replace:null,wildcard:null,limiter:null,rateLimitBy:"debounce",rateLimitWait:300,transform:b.identity,transport:null},c=b.isString(c)?{url:c}:c,c=b.mixin(d,c),!c.url&&a.error("remote requires url to be set"),c.transform=c.filter||c.transform,c.prepare=f(c),c.limiter=g(c),c.transport=c.transport?h(c.transport):a.ajax,delete c.replace,delete c.wildcard,delete c.rateLimitBy,delete c.rateLimitWait,c}function f(a){function b(a,b){return b.url=f(b.url,a),b}function c(a,b){return b.url=b.url.replace(g,encodeURIComponent(a)),b}function d(a,b){return b}var e,f,g;return e=a.prepare,f=a.replace,g=a.wildcard,e?e:e=f?b:a.wildcard?c:d}function g(a){function c(a){return function(c){return b.debounce(c,a)}}function d(a){return function(c){return b.throttle(c,a)}}var e,f,g;return e=a.limiter,f=a.rateLimitBy,g=a.rateLimitWait,e||(e=/^throttle$/i.test(f)?d(g):c(g)),e}function h(c){return function(d){function e(a){b.defer(function(){g.resolve(a)})}function f(a){b.defer(function(){g.reject(a)})}var g=a.Deferred();return c(d,e,f),g}}return function(c){var f,g;return f={initialize:!0,identify:b.stringify,datumTokenizer:null,queryTokenizer:null,matchAnyQueryToken:!1,sufficient:5,indexRemote:!1,sorter:null,local:[],prefetch:null,remote:null},c=b.mixin(f,c||{}),!c.datumTokenizer&&a.error("datumTokenizer is required"),!c.queryTokenizer&&a.error("queryTokenizer is required"),g=c.sorter,c.sorter=g?function(a){return a.sort(g)}:b.identity,c.local=b.isFunction(c.local)?c.local():c.local,c.prefetch=d(c.prefetch),c.remote=e(c.remote),c}}(),l=function(){"use strict";function c(a){a=k(a),this.sorter=a.sorter,this.identify=a.identify,this.sufficient=a.sufficient,this.indexRemote=a.indexRemote,this.local=a.local,this.remote=a.remote?new j(a.remote):null,this.prefetch=a.prefetch?new i(a.prefetch):null,this.index=new h({identify:this.identify,datumTokenizer:a.datumTokenizer,queryTokenizer:a.queryTokenizer}),a.initialize!==!1&&this.initialize()}var e;return e=window&&window.Bloodhound,c.noConflict=function(){return window&&(window.Bloodhound=e),c},c.tokenizers=d,b.mixin(c.prototype,{__ttAdapter:function(){function a(a,b,d){return c.search(a,b,d)}function b(a,b){return c.search(a,b)}var c=this;return this.remote?a:b},_loadPrefetch:function(){function b(a,b){return a?c.reject():(e.add(b),e.prefetch.store(e.index.serialize()),void c.resolve())}var c,d,e=this;return c=a.Deferred(),this.prefetch?(d=this.prefetch.fromCache())?(this.index.bootstrap(d),c.resolve()):this.prefetch.fromNetwork(b):c.resolve(),c.promise()},_initialize:function(){function a(){b.add(b.local)}var b=this;return this.clear(),(this.initPromise=this._loadPrefetch()).done(a),this.initPromise},initialize:function(a){return!this.initPromise||a?this._initialize():this.initPromise},add:function(a){return this.index.add(a),this},get:function(a){return a=b.isArray(a)?a:[].slice.call(arguments),this.index.get(a)},search:function(a,c,d){function e(a){var c=[];b.each(a,function(a){!b.some(f,function(b){return g.identify(a)===g.identify(b)})&&c.push(a)}),g.indexRemote&&g.add(c),d(c)}var f,g=this;return c=c||b.noop,d=d||b.noop,f=this.sorter(this.index.search(a)),c(this.remote?f.slice():f),this.remote&&f.length<this.sufficient?this.remote.get(a,e):this.remote&&this.remote.cancelLastRequest(),this},all:function(){return this.index.all()},clear:function(){return this.index.reset(),this},clearPrefetchCache:function(){return this.prefetch&&this.prefetch.clear(),this},clearRemoteCache:function(){return g.resetCache(),this},ttAdapter:function(){return this.__ttAdapter()}}),c}();return l}),function(a,b){"function"==typeof define&&define.amd?define(["jquery"],function(a){return b(a)}):"object"==typeof exports?module.exports=b(require("jquery")):b(a.jQuery)}(this,function(a){var b=function(){"use strict";return{isMsie:function(){return!!/(msie|trident)/i.test(navigator.userAgent)&&navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]},isBlankString:function(a){return!a||/^\s*$/.test(a)},escapeRegExChars:function(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(a){return"string"==typeof a},isNumber:function(a){return"number"==typeof a},isArray:a.isArray,isFunction:a.isFunction,isObject:a.isPlainObject,isUndefined:function(a){return"undefined"==typeof a},isElement:function(a){return!(!a||1!==a.nodeType)},isJQuery:function(b){return b instanceof a},toStr:function(a){return b.isUndefined(a)||null===a?"":a+""},bind:a.proxy,each:function(b,c){function d(a,b){return c(b,a)}a.each(b,d)},map:a.map,filter:a.grep,every:function(b,c){var d=!0;return b?(a.each(b,function(a,e){if(!(d=c.call(null,e,a,b)))return!1}),!!d):d},some:function(b,c){var d=!1;return b?(a.each(b,function(a,e){if(d=c.call(null,e,a,b))return!1}),!!d):d},mixin:a.extend,identity:function(a){return a},clone:function(b){return a.extend(!0,{},b)},getIdGenerator:function(){var a=0;return function(){return a++}},templatify:function(b){function c(){return String(b)}return a.isFunction(b)?b:c},defer:function(a){setTimeout(a,0)},debounce:function(a,b,c){var d,e;return function(){var f,g,h=this,i=arguments;return f=function(){d=null,c||(e=a.apply(h,i))},g=c&&!d,clearTimeout(d),d=setTimeout(f,b),g&&(e=a.apply(h,i)),e}},throttle:function(a,b){var c,d,e,f,g,h;return g=0,h=function(){g=new Date,e=null,f=a.apply(c,d)},function(){var i=new Date,j=b-(i-g);return c=this,d=arguments,j<=0?(clearTimeout(e),e=null,g=i,f=a.apply(c,d)):e||(e=setTimeout(h,j)),f}},stringify:function(a){return b.isString(a)?a:JSON.stringify(a)},guid:function(){function a(a){var b=(Math.random().toString(16)+"000000000").substr(2,8);return a?"-"+b.substr(0,4)+"-"+b.substr(4,4):b}return"tt-"+a()+a(!0)+a(!0)+a()},noop:function(){}}}(),c=function(){"use strict";function a(a){var g,h;return h=b.mixin({},f,a),g={css:e(),classes:h,html:c(h),selectors:d(h)},{css:g.css,html:g.html,classes:g.classes,selectors:g.selectors,mixin:function(a){b.mixin(a,g)}}}function c(a){return{wrapper:'<span class="'+a.wrapper+'"></span>',menu:'<div role="listbox" class="'+a.menu+'"></div>'}}function d(a){var c={};return b.each(a,function(a,b){c[b]="."+a}),c}function e(){var a={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none",opacity:"1"},input:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},inputWithNoHint:{position:"relative",verticalAlign:"top"},menu:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"},ltr:{left:"0",right:"auto"},rtl:{left:"auto",right:" 0"}};return b.isMsie()&&b.mixin(a.input,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"}),a}var f={wrapper:"twitter-typeahead",input:"tt-input",hint:"tt-hint",menu:"tt-menu",dataset:"tt-dataset",suggestion:"tt-suggestion",selectable:"tt-selectable",empty:"tt-empty",open:"tt-open",cursor:"tt-cursor",highlight:"tt-highlight"};return a}(),d=function(){"use strict";function c(b){b&&b.el||a.error("EventBus initialized without el"),this.$el=a(b.el)}var d,e;return d="typeahead:",e={render:"rendered",cursorchange:"cursorchanged",select:"selected",autocomplete:"autocompleted"},b.mixin(c.prototype,{_trigger:function(b,c){var e=a.Event(d+b);return this.$el.trigger.call(this.$el,e,c||[]),e},before:function(a){var b,c;return b=[].slice.call(arguments,1),c=this._trigger("before"+a,b),c.isDefaultPrevented()},trigger:function(a){var b;this._trigger(a,[].slice.call(arguments,1)),(b=e[a])&&this._trigger(b,[].slice.call(arguments,1))}}),c}(),e=function(){"use strict";function a(a,b,c,d){var e;if(!c)return this;for(b=b.split(i),c=d?h(c,d):c,this._callbacks=this._callbacks||{};e=b.shift();)this._callbacks[e]=this._callbacks[e]||{sync:[],async:[]},this._callbacks[e][a].push(c);return this}function b(b,c,d){return a.call(this,"async",b,c,d)}function c(b,c,d){return a.call(this,"sync",b,c,d)}function d(a){var b;if(!this._callbacks)return this;for(a=a.split(i);b=a.shift();)delete this._callbacks[b];return this}function e(a){var b,c,d,e,g;if(!this._callbacks)return this;for(a=a.split(i),d=[].slice.call(arguments,1);(b=a.shift())&&(c=this._callbacks[b]);)e=f(c.sync,this,[b].concat(d)),g=f(c.async,this,[b].concat(d)),e()&&j(g);return this}function f(a,b,c){function d(){for(var d,e=0,f=a.length;!d&&e<f;e+=1)d=a[e].apply(b,c)===!1;return!d}return d}function g(){var a;return a=window.setImmediate?function(a){setImmediate(function(){a()})}:function(a){setTimeout(function(){a()},0)}}function h(a,b){return a.bind?a.bind(b):function(){a.apply(b,[].slice.call(arguments,0))}}var i=/\s+/,j=g();return{onSync:c,onAsync:b,off:d,trigger:e}}(),f=function(a){"use strict";function c(a){return f[a.toUpperCase()]||a}function d(a,d,e,f){for(var g,h=[],i=0,j=a.length;i<j;i++){var k=b.escapeRegExChars(a[i]);f&&(k=k.replace(/\S/g,c)),h.push(k)}return g=e?"\\b("+h.join("|")+")\\b":"("+h.join("|")+")",d?new RegExp(g):new RegExp(g,"i")}var e={node:null,pattern:null,tagName:"strong",className:null,wordsOnly:!1,caseSensitive:!1,diacriticInsensitive:!1},f={A:"[AaªÀ-Åà-åĀ-ąǍǎȀ-ȃȦȧᴬᵃḀḁẚẠ-ảₐ℀℁℻⒜Ⓐⓐ㍱-㍴㎀-㎄㎈㎉㎩-㎯㏂㏊㏟㏿Ａａ]",B:"[BbᴮᵇḂ-ḇℬ⒝Ⓑⓑ㍴㎅-㎇㏃㏈㏔㏝Ｂｂ]",C:"[CcÇçĆ-čᶜ℀ℂ℃℅℆ℭⅭⅽ⒞Ⓒⓒ㍶㎈㎉㎝㎠㎤㏄-㏇Ｃｃ]",D:"[DdĎďǄ-ǆǱ-ǳᴰᵈḊ-ḓⅅⅆⅮⅾ⒟Ⓓⓓ㋏㍲㍷-㍹㎗㎭-㎯㏅㏈Ｄｄ]",E:"[EeÈ-Ëè-ëĒ-ěȄ-ȇȨȩᴱᵉḘ-ḛẸ-ẽₑ℡ℯℰⅇ⒠Ⓔⓔ㉐㋍㋎Ｅｅ]",F:"[FfᶠḞḟ℉ℱ℻⒡Ⓕⓕ㎊-㎌㎙ﬀ-ﬄＦｆ]",G:"[GgĜ-ģǦǧǴǵᴳᵍḠḡℊ⒢Ⓖⓖ㋌㋍㎇㎍-㎏㎓㎬㏆㏉㏒㏿Ｇｇ]",H:"[HhĤĥȞȟʰᴴḢ-ḫẖℋ-ℎ⒣Ⓗⓗ㋌㍱㎐-㎔㏊㏋㏗Ｈｈ]",I:"[IiÌ-Ïì-ïĨ-İĲĳǏǐȈ-ȋᴵᵢḬḭỈ-ịⁱℐℑℹⅈⅠ-ⅣⅥ-ⅨⅪⅫⅰ-ⅳⅵ-ⅸⅺⅻ⒤Ⓘⓘ㍺㏌㏕ﬁﬃＩｉ]",J:"[JjĲ-ĵǇ-ǌǰʲᴶⅉ⒥ⒿⓙⱼＪｊ]",K:"[KkĶķǨǩᴷᵏḰ-ḵK⒦Ⓚⓚ㎄㎅㎉㎏㎑㎘㎞㎢㎦㎪㎸㎾㏀㏆㏍-㏏Ｋｋ]",L:"[LlĹ-ŀǇ-ǉˡᴸḶḷḺ-ḽℒℓ℡Ⅼⅼ⒧Ⓛⓛ㋏㎈㎉㏐-㏓㏕㏖㏿ﬂﬄＬｌ]",M:"[MmᴹᵐḾ-ṃ℠™ℳⅯⅿ⒨Ⓜⓜ㍷-㍹㎃㎆㎎㎒㎖㎙-㎨㎫㎳㎷㎹㎽㎿㏁㏂㏎㏐㏔-㏖㏘㏙㏞㏟Ｍｍ]",N:"[NnÑñŃ-ŉǊ-ǌǸǹᴺṄ-ṋⁿℕ№⒩Ⓝⓝ㎁㎋㎚㎱㎵㎻㏌㏑Ｎｎ]",O:"[OoºÒ-Öò-öŌ-őƠơǑǒǪǫȌ-ȏȮȯᴼᵒỌ-ỏₒ℅№ℴ⒪Ⓞⓞ㍵㏇㏒㏖Ｏｏ]",P:"[PpᴾᵖṔ-ṗℙ⒫Ⓟⓟ㉐㍱㍶㎀㎊㎩-㎬㎰㎴㎺㏋㏗-㏚Ｐｐ]",Q:"[Qqℚ⒬Ⓠⓠ㏃Ｑｑ]",R:"[RrŔ-řȐ-ȓʳᴿᵣṘ-ṛṞṟ₨ℛ-ℝ⒭Ⓡⓡ㋍㍴㎭-㎯㏚㏛Ｒｒ]",S:"[SsŚ-šſȘșˢṠ-ṣ₨℁℠⒮Ⓢⓢ㎧㎨㎮-㎳㏛㏜ﬆＳｓ]",T:"[TtŢ-ťȚțᵀᵗṪ-ṱẗ℡™⒯Ⓣⓣ㉐㋏㎔㏏ﬅﬆＴｔ]",U:"[UuÙ-Üù-üŨ-ųƯưǓǔȔ-ȗᵁᵘᵤṲ-ṷỤ-ủ℆⒰Ⓤⓤ㍳㍺Ｕｕ]",V:"[VvᵛᵥṼ-ṿⅣ-Ⅷⅳ-ⅷ⒱Ⓥⓥⱽ㋎㍵㎴-㎹㏜㏞Ｖｖ]",W:"[WwŴŵʷᵂẀ-ẉẘ⒲Ⓦⓦ㎺-㎿㏝Ｗｗ]",X:"[XxˣẊ-ẍₓ℻Ⅸ-Ⅻⅸ-ⅻ⒳Ⓧⓧ㏓Ｘｘ]",Y:"[YyÝýÿŶ-ŸȲȳʸẎẏẙỲ-ỹ⒴Ⓨⓨ㏉Ｙｙ]",Z:"[ZzŹ-žǱ-ǳᶻẐ-ẕℤℨ⒵Ⓩⓩ㎐-㎔Ｚｚ]"};return function(c){function f(b){var d,e,f;return(d=h.exec(b.data))&&(f=a.createElement(c.tagName),c.className&&(f.className=c.className),e=b.splitText(d.index),e.splitText(d[0].length),f.appendChild(e.cloneNode(!0)),b.parentNode.replaceChild(f,e)),!!d}function g(a,b){for(var c,d=3,e=0;e<a.childNodes.length;e++)c=a.childNodes[e],c.nodeType===d?e+=b(c)?1:0:g(c,b)}var h;c=b.mixin({},e,c),c.node&&c.pattern&&(c.pattern=b.isArray(c.pattern)?c.pattern:[c.pattern],h=d(c.pattern,c.caseSensitive,c.wordsOnly,c.diacriticInsensitive),g(c.node,f))}}(window.document),g=function(){"use strict";function c(c,e){c=c||{},c.input||a.error("input is missing"),e.mixin(this),this.$hint=a(c.hint),this.$input=a(c.input),this.$input.attr({"aria-activedescendant":"","aria-owns":this.$input.attr("id")+"_listbox",role:"combobox","aria-readonly":"true","aria-autocomplete":"list"}),a(e.menu).attr("id",this.$input.attr("id")+"_listbox"),this.query=this.$input.val(),this.queryWhenFocused=this.hasFocus()?this.query:null,this.$overflowHelper=d(this.$input),this._checkLanguageDirection(),0===this.$hint.length&&(this.setHint=this.getHint=this.clearHint=this.clearHintIfInvalid=b.noop),this.onSync("cursorchange",this._updateDescendent)}function d(b){return a('<pre aria-hidden="true"></pre>').css({position:"absolute",visibility:"hidden",whiteSpace:"pre",fontFamily:b.css("font-family"),fontSize:b.css("font-size"),fontStyle:b.css("font-style"),fontVariant:b.css("font-variant"),fontWeight:b.css("font-weight"),wordSpacing:b.css("word-spacing"),letterSpacing:b.css("letter-spacing"),textIndent:b.css("text-indent"),textRendering:b.css("text-rendering"),textTransform:b.css("text-transform")}).insertAfter(b)}function f(a,b){return c.normalizeQuery(a)===c.normalizeQuery(b)}function g(a){return a.altKey||a.ctrlKey||a.metaKey||a.shiftKey}var h;return h={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"},c.normalizeQuery=function(a){return b.toStr(a).replace(/^\s*/g,"").replace(/\s{2,}/g," ")},b.mixin(c.prototype,e,{_onBlur:function(){this.resetInputValue(),this.trigger("blurred")},_onFocus:function(){this.queryWhenFocused=this.query,this.trigger("focused")},_onKeydown:function(a){var b=h[a.which||a.keyCode];this._managePreventDefault(b,a),b&&this._shouldTrigger(b,a)&&this.trigger(b+"Keyed",a)},_onInput:function(){this._setQuery(this.getInputValue()),this.clearHintIfInvalid(),this._checkLanguageDirection()},_managePreventDefault:function(a,b){var c;switch(a){case"up":case"down":c=!g(b);break;default:c=!1}c&&b.preventDefault()},_shouldTrigger:function(a,b){var c;switch(a){case"tab":c=!g(b);break;default:c=!0}return c},_checkLanguageDirection:function(){var a=(this.$input.css("direction")||"ltr").toLowerCase();this.dir!==a&&(this.dir=a,this.$hint.attr("dir",a),this.trigger("langDirChanged",a))},_setQuery:function(a,b){var c,d;c=f(a,this.query),d=!!c&&this.query.length!==a.length,this.query=a,b||c?!b&&d&&this.trigger("whitespaceChanged",this.query):this.trigger("queryChanged",this.query)},_updateDescendent:function(a,b){this.$input.attr("aria-activedescendant",b)},bind:function(){var a,c,d,e,f=this;return a=b.bind(this._onBlur,this),c=b.bind(this._onFocus,this),d=b.bind(this._onKeydown,this),e=b.bind(this._onInput,this),this.$input.on("blur.tt",a).on("focus.tt",c).on("keydown.tt",d),!b.isMsie()||b.isMsie()>9?this.$input.on("input.tt",e):this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",function(a){h[a.which||a.keyCode]||b.defer(b.bind(f._onInput,f,a))}),this},focus:function(){this.$input.focus()},blur:function(){this.$input.blur()},getLangDir:function(){return this.dir},getQuery:function(){return this.query||""},setQuery:function(a,b){this.setInputValue(a),this._setQuery(a,b)},hasQueryChangedSinceLastFocus:function(){return this.query!==this.queryWhenFocused},getInputValue:function(){return this.$input.val()},setInputValue:function(a){this.$input.val(a),this.clearHintIfInvalid(),this._checkLanguageDirection()},resetInputValue:function(){this.setInputValue(this.query)},getHint:function(){return this.$hint.val()},setHint:function(a){this.$hint.val(a)},clearHint:function(){this.setHint("")},clearHintIfInvalid:function(){var a,b,c,d;a=this.getInputValue(),b=this.getHint(),c=a!==b&&0===b.indexOf(a),d=""!==a&&c&&!this.hasOverflow(),!d&&this.clearHint()},hasFocus:function(){return this.$input.is(":focus")},hasOverflow:function(){var a=this.$input.width()-2;return this.$overflowHelper.text(this.getInputValue()),this.$overflowHelper.width()>=a},isCursorAtEnd:function(){var a,c,d;return a=this.$input.val().length,c=this.$input[0].selectionStart,b.isNumber(c)?c===a:!document.selection||(d=document.selection.createRange(),d.moveStart("character",-a),a===d.text.length)},destroy:function(){this.$hint.off(".tt"),this.$input.off(".tt"),this.$overflowHelper.remove(),this.$hint=this.$input=this.$overflowHelper=a("<div>")}}),c}(),h=function(){"use strict";function c(c,e){c=c||{},c.templates=c.templates||{},c.templates.notFound=c.templates.notFound||c.templates.empty,c.source||a.error("missing source"),c.node||a.error("missing node"),c.name&&!h(c.name)&&a.error("invalid dataset name: "+c.name),e.mixin(this),this.highlight=!!c.highlight,this.name=b.toStr(c.name||j()),this.limit=c.limit||5,this.displayFn=d(c.display||c.displayKey),this.templates=g(c.templates,this.displayFn),this.source=c.source.__ttAdapter?c.source.__ttAdapter():c.source,this.async=b.isUndefined(c.async)?this.source.length>2:!!c.async,this._resetLastSuggestion(),this.$el=a(c.node).attr("role","presentation").addClass(this.classes.dataset).addClass(this.classes.dataset+"-"+this.name)}function d(a){function c(b){return b[a]}return a=a||b.stringify,b.isFunction(a)?a:c}function g(c,d){function e(c){return a('<div role="option">').attr("id",b.guid()).text(d(c))}return{notFound:c.notFound&&b.templatify(c.notFound),pending:c.pending&&b.templatify(c.pending),header:c.header&&b.templatify(c.header),footer:c.footer&&b.templatify(c.footer),suggestion:c.suggestion||e}}function h(a){return/^[_a-zA-Z0-9-]+$/.test(a)}var i,j;return i={dataset:"tt-selectable-dataset",val:"tt-selectable-display",obj:"tt-selectable-object"},j=b.getIdGenerator(),c.extractData=function(b){var c=a(b);return c.data(i.obj)?{dataset:c.data(i.dataset)||"",val:c.data(i.val)||"",obj:c.data(i.obj)||null}:null},b.mixin(c.prototype,e,{_overwrite:function(a,b){b=b||[],b.length?this._renderSuggestions(a,b):this.async&&this.templates.pending?this._renderPending(a):!this.async&&this.templates.notFound?this._renderNotFound(a):this._empty(),this.trigger("rendered",b,!1,this.name)},_append:function(a,b){b=b||[],b.length&&this.$lastSuggestion.length?this._appendSuggestions(a,b):b.length?this._renderSuggestions(a,b):!this.$lastSuggestion.length&&this.templates.notFound&&this._renderNotFound(a),this.trigger("rendered",b,!0,this.name)},_renderSuggestions:function(a,b){var c;c=this._getSuggestionsFragment(a,b),this.$lastSuggestion=c.children().last(),this.$el.html(c).prepend(this._getHeader(a,b)).append(this._getFooter(a,b))},_appendSuggestions:function(a,b){var c,d;c=this._getSuggestionsFragment(a,b),d=c.children().last(),this.$lastSuggestion.after(c),this.$lastSuggestion=d},_renderPending:function(a){var b=this.templates.pending;this._resetLastSuggestion(),b&&this.$el.html(b({query:a,dataset:this.name}))},_renderNotFound:function(a){var b=this.templates.notFound;this._resetLastSuggestion(),b&&this.$el.html(b({query:a,dataset:this.name}))},_empty:function(){this.$el.empty(),this._resetLastSuggestion()},_getSuggestionsFragment:function(c,d){var e,g=this;return e=document.createDocumentFragment(),b.each(d,function(b){var d,f;f=g._injectQuery(c,b),d=a(g.templates.suggestion(f)).data(i.dataset,g.name).data(i.obj,b).data(i.val,g.displayFn(b)).addClass(g.classes.suggestion+" "+g.classes.selectable),e.appendChild(d[0])}),this.highlight&&f({className:this.classes.highlight,node:e,pattern:c}),a(e)},_getFooter:function(a,b){return this.templates.footer?this.templates.footer({query:a,suggestions:b,dataset:this.name}):null},_getHeader:function(a,b){return this.templates.header?this.templates.header({query:a,suggestions:b,dataset:this.name}):null},_resetLastSuggestion:function(){this.$lastSuggestion=a()},_injectQuery:function(a,c){return b.isObject(c)?b.mixin({_query:a},c):c},update:function(b){function c(a){g||(g=!0,a=(a||[]).slice(0,e.limit),h=a.length,e._overwrite(b,a),h<e.limit&&e.async&&e.trigger("asyncRequested",b,e.name))}function d(c){if(c=c||[],!f&&h<e.limit){e.cancel=a.noop;var d=Math.abs(h-e.limit);h+=d,e._append(b,c.slice(0,d)),e.async&&e.trigger("asyncReceived",b,e.name)}}var e=this,f=!1,g=!1,h=0;this.cancel(),this.cancel=function(){f=!0,e.cancel=a.noop,e.async&&e.trigger("asyncCanceled",b,e.name)},this.source(b,c,d),!g&&c([])},cancel:a.noop,clear:function(){this._empty(),this.cancel(),this.trigger("cleared")},isEmpty:function(){return this.$el.is(":empty")},destroy:function(){this.$el=a("<div>")}}),c}(),i=function(){"use strict";function c(c,d){function e(b){var c=f.$node.find(b.node).first();return b.node=c.length?c:a("<div>").appendTo(f.$node),new h(b,d)}var f=this;c=c||{},c.node||a.error("node is required"),d.mixin(this),this.$node=a(c.node),this.query=null,this.datasets=b.map(c.datasets,e)}return b.mixin(c.prototype,e,{_onSelectableClick:function(b){this.trigger("selectableClicked",a(b.currentTarget))},_onRendered:function(a,b,c,d){this.$node.toggleClass(this.classes.empty,this._allDatasetsEmpty()),this.trigger("datasetRendered",b,c,d)},_onCleared:function(){this.$node.toggleClass(this.classes.empty,this._allDatasetsEmpty()),this.trigger("datasetCleared")},_propagate:function(){this.trigger.apply(this,arguments)},_allDatasetsEmpty:function(){return b.every(this.datasets,b.bind(function(a){var b=a.isEmpty();return this.$node.attr("aria-expanded",!b),b},this))},_getSelectables:function(){return this.$node.find(this.selectors.selectable)},_removeCursor:function(){var a=this.getActiveSelectable();a&&a.removeClass(this.classes.cursor)},_ensureVisible:function(a){var b,c,d,e;b=a.position().top,c=b+a.outerHeight(!0),d=this.$node.scrollTop(),e=this.$node.height()+parseInt(this.$node.css("paddingTop"),10)+parseInt(this.$node.css("paddingBottom"),10),b<0?this.$node.scrollTop(d+b):e<c&&this.$node.scrollTop(d+(c-e))},bind:function(){var c,d=this;return c=b.bind(this._onSelectableClick,this),this.$node.on("click.tt",this.selectors.selectable,c),this.$node.on("mouseover",this.selectors.selectable,function(){d.setCursor(a(this))}),this.$node.on("mouseleave",function(){d._removeCursor()}),b.each(this.datasets,function(a){a.onSync("asyncRequested",d._propagate,d).onSync("asyncCanceled",d._propagate,d).onSync("asyncReceived",d._propagate,d).onSync("rendered",d._onRendered,d).onSync("cleared",d._onCleared,d)}),this},isOpen:function(){return this.$node.hasClass(this.classes.open)},open:function(){this.$node.scrollTop(0),this.$node.addClass(this.classes.open)},close:function(){this.$node.attr("aria-expanded",!1),this.$node.removeClass(this.classes.open),this._removeCursor()},setLanguageDirection:function(a){this.$node.attr("dir",a)},selectableRelativeToCursor:function(a){var b,c,d,e;return c=this.getActiveSelectable(),b=this._getSelectables(),d=c?b.index(c):-1,e=d+a,e=(e+1)%(b.length+1)-1,e=e<-1?b.length-1:e,e===-1?null:b.eq(e)},setCursor:function(a){this._removeCursor(),(a=a&&a.first())&&(a.addClass(this.classes.cursor),this._ensureVisible(a))},getSelectableData:function(a){return a&&a.length?h.extractData(a):null},getActiveSelectable:function(){var a=this._getSelectables().filter(this.selectors.cursor).first();return a.length?a:null},getTopSelectable:function(){var a=this._getSelectables().first();return a.length?a:null},update:function(a){function c(b){b.update(a)}var d=a!==this.query;return d&&(this.query=a,b.each(this.datasets,c)),d},empty:function(){function a(a){a.clear()}b.each(this.datasets,a),this.query=null,this.$node.addClass(this.classes.empty)},destroy:function(){function c(a){a.destroy()}this.$node.off(".tt"),this.$node=a("<div>"),b.each(this.datasets,c)}}),c}(),j=function(){
"use strict";function c(c){this.$el=a("<span></span>",{role:"status","aria-live":"polite"}).css({position:"absolute",padding:"0",border:"0",height:"1px",width:"1px","margin-bottom":"-1px","margin-right":"-1px",overflow:"hidden",clip:"rect(0 0 0 0)","white-space":"nowrap"}),c.$input.after(this.$el),b.each(c.menu.datasets,b.bind(function(a){a.onSync&&(a.onSync("rendered",b.bind(this.update,this)),a.onSync("cleared",b.bind(this.cleared,this)))},this))}return b.mixin(c.prototype,{update:function(a,b){var c,d=b.length;c=1===d?{result:"result",is:"is"}:{result:"results",is:"are"},this.$el.text(d+" "+c.result+" "+c.is+" available, use up and down arrow keys to navigate.")},cleared:function(){this.$el.text("")}}),c}(),k=function(){"use strict";function a(){i.apply(this,[].slice.call(arguments,0))}var c=i.prototype;return b.mixin(a.prototype,i.prototype,{open:function(){return!this._allDatasetsEmpty()&&this._show(),c.open.apply(this,[].slice.call(arguments,0))},close:function(){return this._hide(),c.close.apply(this,[].slice.call(arguments,0))},_onRendered:function(){return this._allDatasetsEmpty()?this._hide():this.isOpen()&&this._show(),c._onRendered.apply(this,[].slice.call(arguments,0))},_onCleared:function(){return this._allDatasetsEmpty()?this._hide():this.isOpen()&&this._show(),c._onCleared.apply(this,[].slice.call(arguments,0))},setLanguageDirection:function(a){return this.$node.css("ltr"===a?this.css.ltr:this.css.rtl),c.setLanguageDirection.apply(this,[].slice.call(arguments,0))},_hide:function(){this.$node.hide()},_show:function(){this.$node.css("display","block")}}),a}(),l=function(){"use strict";function c(c,e){var f,g,h,i,j,k,l,m,n,o,p;c=c||{},c.input||a.error("missing input"),c.menu||a.error("missing menu"),c.eventBus||a.error("missing event bus"),e.mixin(this),this.eventBus=c.eventBus,this.minLength=b.isNumber(c.minLength)?c.minLength:1,this.input=c.input,this.menu=c.menu,this.enabled=!0,this.active=!1,this.input.hasFocus()&&this.activate(),this.dir=this.input.getLangDir(),this._hacks(),this.menu.bind().onSync("selectableClicked",this._onSelectableClicked,this).onSync("asyncRequested",this._onAsyncRequested,this).onSync("asyncCanceled",this._onAsyncCanceled,this).onSync("asyncReceived",this._onAsyncReceived,this).onSync("datasetRendered",this._onDatasetRendered,this).onSync("datasetCleared",this._onDatasetCleared,this),f=d(this,"activate","open","_onFocused"),g=d(this,"deactivate","_onBlurred"),h=d(this,"isActive","isOpen","_onEnterKeyed"),i=d(this,"isActive","isOpen","_onTabKeyed"),j=d(this,"isActive","_onEscKeyed"),k=d(this,"isActive","open","_onUpKeyed"),l=d(this,"isActive","open","_onDownKeyed"),m=d(this,"isActive","isOpen","_onLeftKeyed"),n=d(this,"isActive","isOpen","_onRightKeyed"),o=d(this,"_openIfActive","_onQueryChanged"),p=d(this,"_openIfActive","_onWhitespaceChanged"),this.input.bind().onSync("focused",f,this).onSync("blurred",g,this).onSync("enterKeyed",h,this).onSync("tabKeyed",i,this).onSync("escKeyed",j,this).onSync("upKeyed",k,this).onSync("downKeyed",l,this).onSync("leftKeyed",m,this).onSync("rightKeyed",n,this).onSync("queryChanged",o,this).onSync("whitespaceChanged",p,this).onSync("langDirChanged",this._onLangDirChanged,this)}function d(a){var c=[].slice.call(arguments,1);return function(){var d=[].slice.call(arguments);b.each(c,function(b){return a[b].apply(a,d)})}}return b.mixin(c.prototype,{_hacks:function(){var c,d;c=this.input.$input||a("<div>"),d=this.menu.$node||a("<div>"),c.on("blur.tt",function(a){var e,f,g;e=document.activeElement,f=d.is(e),g=d.has(e).length>0,b.isMsie()&&(f||g)&&(a.preventDefault(),a.stopImmediatePropagation(),b.defer(function(){c.focus()}))}),d.on("mousedown.tt",function(a){a.preventDefault()})},_onSelectableClicked:function(a,b){this.select(b)},_onDatasetCleared:function(){this._updateHint()},_onDatasetRendered:function(a,b,c,d){this._updateHint(),this.eventBus.trigger("render",b,c,d)},_onAsyncRequested:function(a,b,c){this.eventBus.trigger("asyncrequest",c,b)},_onAsyncCanceled:function(a,b,c){this.eventBus.trigger("asynccancel",c,b)},_onAsyncReceived:function(a,b,c){this.eventBus.trigger("asyncreceive",c,b)},_onFocused:function(){this._minLengthMet()&&this.menu.update(this.input.getQuery())},_onBlurred:function(){this.input.hasQueryChangedSinceLastFocus()&&this.eventBus.trigger("change",this.input.getQuery())},_onEnterKeyed:function(a,b){var c;(c=this.menu.getActiveSelectable())&&this.select(c)&&(b.preventDefault(),b.stopPropagation())},_onTabKeyed:function(a,b){var c;(c=this.menu.getActiveSelectable())?this.select(c)&&b.preventDefault():(c=this.menu.getTopSelectable())&&this.autocomplete(c)&&b.preventDefault()},_onEscKeyed:function(){this.close()},_onUpKeyed:function(){this.moveCursor(-1)},_onDownKeyed:function(){this.moveCursor(1)},_onLeftKeyed:function(){"rtl"===this.dir&&this.input.isCursorAtEnd()&&this.autocomplete(this.menu.getActiveSelectable()||this.menu.getTopSelectable())},_onRightKeyed:function(){"ltr"===this.dir&&this.input.isCursorAtEnd()&&this.autocomplete(this.menu.getActiveSelectable()||this.menu.getTopSelectable())},_onQueryChanged:function(a,b){this._minLengthMet(b)?this.menu.update(b):this.menu.empty()},_onWhitespaceChanged:function(){this._updateHint()},_onLangDirChanged:function(a,b){this.dir!==b&&(this.dir=b,this.menu.setLanguageDirection(b))},_openIfActive:function(){this.isActive()&&this.open()},_minLengthMet:function(a){return a=b.isString(a)?a:this.input.getQuery()||"",a.length>=this.minLength},_updateHint:function(){var a,c,d,e,f,h,i;a=this.menu.getTopSelectable(),c=this.menu.getSelectableData(a),d=this.input.getInputValue(),!c||b.isBlankString(d)||this.input.hasOverflow()?this.input.clearHint():(e=g.normalizeQuery(d),f=b.escapeRegExChars(e),h=new RegExp("^(?:"+f+")(.+$)","i"),i=h.exec(c.val),i&&this.input.setHint(d+i[1]))},isEnabled:function(){return this.enabled},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},isActive:function(){return this.active},activate:function(){return!!this.isActive()||!(!this.isEnabled()||this.eventBus.before("active"))&&(this.active=!0,this.eventBus.trigger("active"),!0)},deactivate:function(){return!this.isActive()||!this.eventBus.before("idle")&&(this.active=!1,this.close(),this.eventBus.trigger("idle"),!0)},isOpen:function(){return this.menu.isOpen()},open:function(){return this.isOpen()||this.eventBus.before("open")||(this.menu.open(),this._updateHint(),this.eventBus.trigger("open")),this.isOpen()},close:function(){return this.isOpen()&&!this.eventBus.before("close")&&(this.menu.close(),this.input.clearHint(),this.input.resetInputValue(),this.eventBus.trigger("close")),!this.isOpen()},setVal:function(a){this.input.setQuery(b.toStr(a))},getVal:function(){return this.input.getQuery()},select:function(a){var b=this.menu.getSelectableData(a);return!(!b||this.eventBus.before("select",b.obj,b.dataset))&&(this.input.setQuery(b.val,!0),this.eventBus.trigger("select",b.obj,b.dataset),this.close(),!0)},autocomplete:function(a){var b,c,d;return b=this.input.getQuery(),c=this.menu.getSelectableData(a),d=c&&b!==c.val,!(!d||this.eventBus.before("autocomplete",c.obj,c.dataset))&&(this.input.setQuery(c.val),this.eventBus.trigger("autocomplete",c.obj,c.dataset),!0)},moveCursor:function(a){var b,c,d,e,f,g,h;return b=this.input.getQuery(),c=this.menu.selectableRelativeToCursor(a),d=this.menu.getSelectableData(c),e=d?d.obj:null,f=d?d.dataset:null,h=c?c.attr("id"):null,this.input.trigger("cursorchange",h),g=this._minLengthMet()&&this.menu.update(b),!g&&!this.eventBus.before("cursorchange",e,f)&&(this.menu.setCursor(c),d?this.input.setInputValue(d.val):(this.input.resetInputValue(),this._updateHint()),this.eventBus.trigger("cursorchange",e,f),!0)},destroy:function(){this.input.destroy(),this.menu.destroy()}}),c}();!function(){"use strict";function e(b,c){b.each(function(){var b,d=a(this);(b=d.data(q.typeahead))&&c(b,d)})}function f(a,b){return a.clone().addClass(b.classes.hint).removeData().css(b.css.hint).css(m(a)).prop("readonly",!0).removeAttr("id name placeholder required").attr({spellcheck:"false",tabindex:-1})}function h(a,b){a.data(q.attrs,{dir:a.attr("dir"),autocomplete:a.attr("autocomplete"),spellcheck:a.attr("spellcheck"),style:a.attr("style")}),a.addClass(b.classes.input).attr({spellcheck:!1});try{!a.attr("dir")&&a.attr("dir","auto")}catch(a){}return a}function m(a){return{backgroundAttachment:a.css("background-attachment"),backgroundClip:a.css("background-clip"),backgroundColor:a.css("background-color"),backgroundImage:a.css("background-image"),backgroundOrigin:a.css("background-origin"),backgroundPosition:a.css("background-position"),backgroundRepeat:a.css("background-repeat"),backgroundSize:a.css("background-size")}}function n(a){var c,d;c=a.data(q.www),d=a.parent().filter(c.selectors.wrapper),b.each(a.data(q.attrs),function(c,d){b.isUndefined(c)?a.removeAttr(d):a.attr(d,c)}),a.removeData(q.typeahead).removeData(q.www).removeData(q.attr).removeClass(c.classes.input),d.length&&(a.detach().insertAfter(d),d.remove())}function o(c){var d,e;return d=b.isJQuery(c)||b.isElement(c),e=d?a(c).first():[],e.length?e:null}var p,q,r;p=a.fn.typeahead,q={www:"tt-www",attrs:"tt-attrs",typeahead:"tt-typeahead"},r={initialize:function(e,m){function n(){var c,n,r,s,t,u,v,w,x,y,z,A;b.each(m,function(a){a.highlight=!!e.highlight}),c=a(this),n=a(p.html.wrapper),r=o(e.hint),s=o(e.menu),t=e.hint!==!1&&!r,u=e.menu!==!1&&!s,t&&(r=f(c,p)),u&&(s=a(p.html.menu).css(p.css.menu)),r&&r.val(""),c=h(c,p),(t||u)&&(n.css(p.css.wrapper),c.css(t?p.css.input:p.css.inputWithNoHint),c.wrap(n).parent().prepend(t?r:null).append(u?s:null)),A=u?k:i,v=new d({el:c}),w=new g({hint:r,input:c},p),x=new A({node:s,datasets:m},p),y=new j({$input:c,menu:x}),z=new l({input:w,menu:x,eventBus:v,minLength:e.minLength},p),c.data(q.www,p),c.data(q.typeahead,z)}var p;return m=b.isArray(m)?m:[].slice.call(arguments,1),e=e||{},p=c(e.classNames),this.each(n)},isEnabled:function(){var a;return e(this.first(),function(b){a=b.isEnabled()}),a},enable:function(){return e(this,function(a){a.enable()}),this},disable:function(){return e(this,function(a){a.disable()}),this},isActive:function(){var a;return e(this.first(),function(b){a=b.isActive()}),a},activate:function(){return e(this,function(a){a.activate()}),this},deactivate:function(){return e(this,function(a){a.deactivate()}),this},isOpen:function(){var a;return e(this.first(),function(b){a=b.isOpen()}),a},open:function(){return e(this,function(a){a.open()}),this},close:function(){return e(this,function(a){a.close()}),this},select:function(b){var c=!1,d=a(b);return e(this.first(),function(a){c=a.select(d)}),c},autocomplete:function(b){var c=!1,d=a(b);return e(this.first(),function(a){c=a.autocomplete(d)}),c},moveCursor:function(a){var b=!1;return e(this.first(),function(c){b=c.moveCursor(a)}),b},val:function(a){var c;return arguments.length?(e(this,function(c){c.setVal(b.toStr(a))}),this):(e(this.first(),function(a){c=a.getVal()}),c)},destroy:function(){return e(this,function(a,b){n(b),a.destroy()}),this}},a.fn.typeahead=function(a){return r[a]?r[a].apply(this,[].slice.call(arguments,1)):r.initialize.apply(this,arguments)},a.fn.typeahead.noConflict=function(){return a.fn.typeahead=p,this}}()});

/**
 * JSTS. See https://github.com/bjornharrtell/jsts
 * https://github.com/bjornharrtell/jsts/blob/master/LICENSE_EDLv1.txt
 * https://github.com/bjornharrtell/jsts/blob/master/LICENSE_EPLv1.txt
 * https://github.com/bjornharrtell/jsts/blob/master/LICENSE_LICENSE_ES6_COLLECTIONS.txt
 * @license
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.jsts=t.jsts||{})}(this,function(t){"use strict";function e(){}function n(){}function i(){}function r(){}function s(){}function o(){}function a(){}function u(t){this.name="RuntimeException",this.message=t,this.stack=(new Error).stack,Error.call(this,t)}function l(){if(0===arguments.length)u.call(this);else if(1===arguments.length){var t=arguments[0];u.call(this,t)}}function h(){}function c(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)c.call(this,0,0);else if(1===arguments.length){var t=arguments[0];c.call(this,t.x,t.y,t.z)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];c.call(this,e,n,c.NULL_ORDINATE)}else if(3===arguments.length){var i=arguments[0],r=arguments[1],s=arguments[2];this.x=i,this.y=r,this.z=s}}function f(){if(this.dimensionsToTest=2,0===arguments.length)f.call(this,2);else if(1===arguments.length){var t=arguments[0];if(2!==t&&3!==t)throw new n("only 2 or 3 dimensions may be specified");this.dimensionsToTest=t}}function g(){}function d(){}function p(t){this.message=t||""}function m(){}function v(t){this.message=t||""}function y(t){this.message=t||""}function x(){this.array_=[],arguments[0]instanceof d&&this.addAll(arguments[0])}function E(){if(x.apply(this),0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.ensureCapacity(t.length),this.add(t,!0)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.ensureCapacity(e.length),this.add(e,n)}}function I(){if(this.minx=null,this.maxx=null,this.miny=null,this.maxy=null,0===arguments.length)this.init();else if(1===arguments.length){if(arguments[0]instanceof c){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof I){var e=arguments[0];this.init(e)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.init(n.x,i.x,n.y,i.y)}else if(4===arguments.length){var r=arguments[0],s=arguments[1],o=arguments[2],a=arguments[3];this.init(r,s,o,a)}}function N(){}function C(){N.call(this,"Projective point not representable on the Cartesian plane.")}function S(){}function L(){}function w(t){this.str=t}function R(t){this.value=t}function T(){}function O(){if(this.hi=0,this.lo=0,0===arguments.length)this.init(0);else if(1===arguments.length){if("number"==typeof arguments[0]){var t=arguments[0];this.init(t)}else if(arguments[0]instanceof O){var e=arguments[0];this.init(e)}else if("string"==typeof arguments[0]){var n=arguments[0];O.call(this,O.parse(n))}}else if(2===arguments.length){var i=arguments[0],r=arguments[1];this.init(i,r)}}function P(){}function b(){}function _(){}function M(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length){var t=arguments[0];this.x=t.x,this.y=t.y,this.w=1}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var e=arguments[0],n=arguments[1];this.x=e,this.y=n,this.w=1}else if(arguments[0]instanceof M&&arguments[1]instanceof M){var i=arguments[0],r=arguments[1];this.x=i.y*r.w-r.y*i.w,this.y=r.x*i.w-i.x*r.w,this.w=i.x*r.y-r.x*i.y}else if(arguments[0]instanceof c&&arguments[1]instanceof c){var s=arguments[0],o=arguments[1];this.x=s.y-o.y,this.y=o.x-s.x,this.w=s.x*o.y-o.x*s.y}}else if(3===arguments.length){var a=arguments[0],u=arguments[1],l=arguments[2];this.x=a,this.y=u,this.w=l}else if(4===arguments.length){var h=arguments[0],f=arguments[1],g=arguments[2],d=arguments[3],p=h.y-f.y,m=f.x-h.x,v=h.x*f.y-f.x*h.y,y=g.y-d.y,x=d.x-g.x,E=g.x*d.y-d.x*g.y;this.x=m*E-x*v,this.y=y*v-p*E,this.w=p*x-y*m}}function D(){}function A(){}function F(){this.envelope=null,this.factory=null,this.SRID=null,this.userData=null;var t=arguments[0];this.factory=t,this.SRID=t.getSRID()}function G(){}function q(){}function B(){}function V(){}function z(){}function k(){}function Y(){}function U(){}function X(){}function H(){}function W(){}function j(){}function K(){this.array_=[],arguments[0]instanceof d&&this.addAll(arguments[0])}function Z(t){return null==t?uo:t.color}function Q(t){return null==t?null:t.parent}function J(t,e){null!==t&&(t.color=e)}function $(t){return null==t?null:t.left}function tt(t){return null==t?null:t.right}function et(){this.root_=null,this.size_=0}function nt(){}function it(){}function rt(){this.array_=[],arguments[0]instanceof d&&this.addAll(arguments[0])}function st(){}function ot(){}function at(){}function ut(){}function lt(){this.geometries=null;var t=arguments[0],e=arguments[1];if(F.call(this,e),null===t&&(t=[]),F.hasNullElements(t))throw new n("geometries must not contain null elements");this.geometries=t}function ht(){var t=arguments[0],e=arguments[1];lt.call(this,t,e)}function ct(){if(this.geom=null,this.geomFact=null,this.bnRule=null,this.endpointMap=null,1===arguments.length){var t=arguments[0];ct.call(this,t,q.MOD2_BOUNDARY_RULE)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.geom=e,this.geomFact=e.getFactory(),this.bnRule=n}}function ft(){this.count=null}function gt(){}function dt(){}function pt(){}function mt(){}function vt(){}function yt(){}function xt(){}function Et(){}function It(){this.points=null;var t=arguments[0],e=arguments[1];F.call(this,e),this.init(t)}function Nt(){}function Ct(){this.coordinates=null;var t=arguments[0],e=arguments[1];F.call(this,e),this.init(t)}function St(){}function Lt(){this.shell=null,this.holes=null;var t=arguments[0],e=arguments[1],i=arguments[2];if(F.call(this,i),null===t&&(t=this.getFactory().createLinearRing()),null===e&&(e=[]),F.hasNullElements(e))throw new n("holes must not contain null elements");if(t.isEmpty()&&F.hasNonEmptyElements(e))throw new n("shell is empty but holes are not");this.shell=t,this.holes=e}function wt(){var t=arguments[0],e=arguments[1];lt.call(this,t,e)}function Rt(){if(arguments[0]instanceof c&&arguments[1]instanceof $t){var t=arguments[0],e=arguments[1];Rt.call(this,e.getCoordinateSequenceFactory().create(t),e)}else if(oo(arguments[0],b)&&arguments[1]instanceof $t){var n=arguments[0],i=arguments[1];It.call(this,n,i),this.validateConstruction()}}function Tt(){var t=arguments[0],e=arguments[1];lt.call(this,t,e)}function Ot(){if(this.factory=null,this.isUserDataCopied=!1,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.factory=t}}function Pt(){}function bt(){}function _t(){}function Mt(){}function Dt(){if(this.dimension=3,this.coordinates=null,1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];Dt.call(this,t,3)}else if(Number.isInteger(arguments[0])){var e=arguments[0];this.coordinates=new Array(e).fill(null);for(var n=0;n<e;n++)this.coordinates[n]=new c}else if(oo(arguments[0],b)){var i=arguments[0];if(null===i)return this.coordinates=new Array(0).fill(null),null;this.dimension=i.getDimension(),this.coordinates=new Array(i.size()).fill(null);for(var n=0;n<this.coordinates.length;n++)this.coordinates[n]=i.getCoordinateCopy(n)}}else if(2===arguments.length)if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var r=arguments[0],s=arguments[1];this.coordinates=r,this.dimension=s,null===r&&(this.coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var o=arguments[0],a=arguments[1];this.coordinates=new Array(o).fill(null),this.dimension=a;for(var n=0;n<o;n++)this.coordinates[n]=new c}}function At(){}function Ft(t,e){return t===e||t!==t&&e!==e}function Gt(t){this.add?t.forEach(this.add,this):t.forEach(function(t){this.set(t[0],t[1])},this)}function qt(t){return this.has(t)&&(this._keys.splice(ho,1),this._values.splice(ho,1),this._itp.forEach(function(t){ho<t[0]&&t[0]--})),ho>-1}function Bt(t){return this.has(t)?this._values[ho]:void 0}function Vt(t,e){if(this.objectOnly&&e!==Object(e))throw new TypeError("Invalid value used as weak collection key");if(e!==e||0===e)for(ho=t.length;ho--&&!Ft(t[ho],e););else ho=t.indexOf(e);return ho>-1}function zt(t){return Vt.call(this,this._keys,t)}function kt(t,e){return this.has(t)?this._values[ho]=e:this._values[this._keys.push(t)-1]=e,this}function Yt(){(this._keys||0).length=this._values.length=0}function Ut(){return Wt(this._itp,this._keys)}function Xt(){return Wt(this._itp,this._values)}function Ht(){return Wt(this._itp,this._keys,this._values)}function Wt(t,e,n){var i=[0],r=!1;return t.push(i),{next:function(){var s,o=i[0];return!r&&o<e.length?(s=n?[e[o],n[o]]:e[o],i[0]++):(r=!0,t.splice(t.indexOf(i),1)),{done:r,value:s}}}}function jt(){return this._values.length}function Kt(t,e){for(var n=this.entries();;){var i=n.next();if(i.done)break;t.call(e,i.value[1],i.value[0],this)}}function Zt(){this.map_=new go}function Qt(){if(this.modelType=null,this.scale=null,0===arguments.length)this.modelType=Qt.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof Jt){var t=arguments[0];this.modelType=t,t===Qt.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){var e=arguments[0];this.modelType=Qt.FIXED,this.setScale(e)}else if(arguments[0]instanceof Qt){var n=arguments[0];this.modelType=n.modelType,this.scale=n.scale}}function Jt(){this.name=null;var t=arguments[0];this.name=t,Jt.nameToTypeMap.put(t,this)}function $t(){if(this.precisionModel=null,this.coordinateSequenceFactory=null,this.SRID=null,0===arguments.length)$t.call(this,new Qt,0);else if(1===arguments.length){if(oo(arguments[0],D)){var t=arguments[0];$t.call(this,new Qt,0,t)}else if(arguments[0]instanceof Qt){var e=arguments[0];$t.call(this,e,0,$t.getDefaultCoordinateSequenceFactory())}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];$t.call(this,n,i,$t.getDefaultCoordinateSequenceFactory())}else if(3===arguments.length){var r=arguments[0],s=arguments[1],o=arguments[2];this.precisionModel=r,this.coordinateSequenceFactory=o,this.SRID=s}}function te(t){this.geometryFactory=t||new $t}function ee(t){this.parser=new te(t)}function ne(){this.result=null,this.inputLines=Array(2).fill().map(function(){return Array(2)}),this.intPt=new Array(2).fill(null),this.intLineIndex=null,this._isProper=null,this.pa=null,this.pb=null,this.precisionModel=null,this.intPt[0]=new c,this.intPt[1]=new c,this.pa=this.intPt[0],this.pb=this.intPt[1],this.result=0}function ie(){ne.apply(this)}function re(){}function se(){this.p=null,this.crossingCount=0,this.isPointOnSegment=!1;var t=arguments[0];this.p=t}function oe(){}function ae(){if(this.p0=null,this.p1=null,0===arguments.length)ae.call(this,new c,new c);else if(1===arguments.length){var t=arguments[0];ae.call(this,t.p0,t.p1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.p0=e,this.p1=n}else if(4===arguments.length){var i=arguments[0],r=arguments[1],s=arguments[2],o=arguments[3];ae.call(this,new c(i,r),new c(s,o))}}function ue(){if(this.matrix=null,0===arguments.length)this.matrix=Array(3).fill().map(function(){return Array(3)}),this.setAll(ot.FALSE);else if(1===arguments.length)if("string"==typeof arguments[0]){var t=arguments[0];ue.call(this),this.set(t)}else if(arguments[0]instanceof ue){var e=arguments[0];ue.call(this),this.matrix[S.INTERIOR][S.INTERIOR]=e.matrix[S.INTERIOR][S.INTERIOR],this.matrix[S.INTERIOR][S.BOUNDARY]=e.matrix[S.INTERIOR][S.BOUNDARY],this.matrix[S.INTERIOR][S.EXTERIOR]=e.matrix[S.INTERIOR][S.EXTERIOR],this.matrix[S.BOUNDARY][S.INTERIOR]=e.matrix[S.BOUNDARY][S.INTERIOR],this.matrix[S.BOUNDARY][S.BOUNDARY]=e.matrix[S.BOUNDARY][S.BOUNDARY],this.matrix[S.BOUNDARY][S.EXTERIOR]=e.matrix[S.BOUNDARY][S.EXTERIOR],this.matrix[S.EXTERIOR][S.INTERIOR]=e.matrix[S.EXTERIOR][S.INTERIOR],this.matrix[S.EXTERIOR][S.BOUNDARY]=e.matrix[S.EXTERIOR][S.BOUNDARY],this.matrix[S.EXTERIOR][S.EXTERIOR]=e.matrix[S.EXTERIOR][S.EXTERIOR]}}function le(){this.areaBasePt=null,this.triangleCent3=new c,this.areasum2=0,this.cg3=new c,this.lineCentSum=new c,this.totalLength=0,this.ptCount=0,this.ptCentSum=new c;var t=arguments[0];this.areaBasePt=null,this.add(t)}function he(t){this.message=t||""}function ce(){this.array_=[]}function fe(){this.treeSet=new rt,this.list=new x}function ge(){if(this.geomFactory=null,this.inputPts=null,1===arguments.length){var t=arguments[0];ge.call(this,ge.extractCoordinates(t),t.getFactory())}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.inputPts=fe.filterCoordinates(e),this.geomFactory=n}}function de(){this.origin=null;var t=arguments[0];this.origin=t}function pe(){this.inputGeom=null,this.factory=null,this.pruneEmptyGeometry=!0,this.preserveGeometryCollectionType=!0,this.preserveCollections=!1,this.preserveType=!1}function me(){if(this.snapTolerance=0,this.srcPts=null,this.seg=new ae,this.allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof It&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];me.call(this,t.getCoordinates(),e)}else if(arguments[0]instanceof Array&&"number"==typeof arguments[1]){var n=arguments[0],i=arguments[1];this.srcPts=n,this._isClosed=me.isClosed(n),this.snapTolerance=i}}function ve(){this.srcGeom=null;var t=arguments[0];this.srcGeom=t}function ye(){if(pe.apply(this),this.snapTolerance=null,this.snapPts=null,this.isSelfSnap=!1,2===arguments.length){var t=arguments[0],e=arguments[1];this.snapTolerance=t,this.snapPts=e}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this.snapTolerance=n,this.snapPts=i,this.isSelfSnap=r}}function xe(){this.isFirst=!0,this.commonMantissaBitsCount=53,this.commonBits=0,this.commonSignExp=null}function Ee(){this.commonCoord=null,this.ccFilter=new Ie}function Ie(){this.commonBitsX=new xe,this.commonBitsY=new xe}function Ne(){this.trans=null;var t=arguments[0];this.trans=t}function Ce(){this.parent=null,this.atStart=null,this.max=null,this.index=null,this.subcollectionIterator=null;var t=arguments[0];this.parent=t,this.atStart=!0,this.index=0,this.max=t.getNumGeometries()}function Se(){if(this.boundaryRule=q.OGC_SFS_BOUNDARY_RULE,this.isIn=null,this.numBoundaries=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];if(null===t)throw new n("Rule must be non-null");this.boundaryRule=t}}function Le(){}function we(){}function Re(){this.pts=null,this.data=null;var t=arguments[0],e=arguments[1];this.pts=t,this.data=e}function Te(){}function Oe(){this.bounds=null,this.item=null;var t=arguments[0],e=arguments[1];this.bounds=t,this.item=e}function Pe(){this._size=null,this.items=null,this._size=0,this.items=new x,this.items.add(null)}function be(){}function _e(){}function Me(){if(this.childBoundables=new x,this.bounds=null,this.level=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.level=t}}function De(){this.boundable1=null,this.boundable2=null,this._distance=null,this.itemDistance=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.boundable1=t,this.boundable2=e,this.itemDistance=n,this._distance=this.distance()}function Ae(){if(this.root=null,this.built=!1,this.itemBoundables=new x,this.nodeCapacity=null,0===arguments.length)Ae.call(this,Ae.DEFAULT_NODE_CAPACITY);else if(1===arguments.length){var t=arguments[0];h.isTrue(t>1,"Node capacity must be greater than 1"),this.nodeCapacity=t}}function Fe(){}function Ge(){}function qe(){if(0===arguments.length)qe.call(this,qe.DEFAULT_NODE_CAPACITY);else if(1===arguments.length){var t=arguments[0];Ae.call(this,t)}}function Be(){var t=arguments[0];Me.call(this,t)}function Ve(){}function ze(){this.segString=null,this.coord=null,this.segmentIndex=null,this.segmentOctant=null,this._isInterior=null;var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];this.segString=t,this.coord=new c(e),this.segmentIndex=n,this.segmentOctant=i,this._isInterior=!e.equals2D(t.getCoordinate(n))}function ke(){this.nodeMap=new et,this.edge=null;var t=arguments[0];this.edge=t}function Ye(){this.nodeList=null,this.edge=null,this.nodeIt=null,this.currNode=null,this.nextNode=null,this.currSegIndex=0;var t=arguments[0];this.nodeList=t,this.edge=t.getEdge(),this.nodeIt=t.iterator(),this.readNextNode()}function Ue(){}function Xe(){this.nodeList=new ke(this),this.pts=null,this.data=null;var t=arguments[0],e=arguments[1];this.pts=t,this.data=e}function He(){this.tempEnv1=new I,this.tempEnv2=new I,this.overlapSeg1=new ae,this.overlapSeg2=new ae}function We(){this.pts=null,this.start=null,this.end=null,this.env=null,this.context=null,this.id=null;var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];this.pts=t,this.start=e,this.end=n,this.context=i}function je(){}function Ke(){}function Ze(){}function Qe(){if(this.segInt=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.setSegmentIntersector(t)}}function Je(){if(this.monoChains=new x,this.index=new qe,this.idCounter=0,this.nodedSegStrings=null,this.nOverlaps=0,0===arguments.length);else if(1===arguments.length){var t=arguments[0];Qe.call(this,t)}}function $e(){He.apply(this),this.si=null;var t=arguments[0];this.si=t}function tn(){if(this.pt=null,1===arguments.length){var t=arguments[0];u.call(this,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];u.call(this,tn.msgWithCoord(e,n)),this.name="TopologyException",this.pt=new c(n)}}function en(){}function nn(){this.findAllIntersections=!1,this.isCheckEndSegmentsOnly=!1,this.li=null,this.interiorIntersection=null,this.intSegments=null,this.intersections=new x,this.intersectionCount=0,this.keepIntersections=!0;var t=arguments[0];this.li=t,this.interiorIntersection=null}function rn(){this.li=new ie,this.segStrings=null,this.findAllIntersections=!1,this.segInt=null,this._isValid=!0;var t=arguments[0];this.segStrings=t}function sn(){this.nv=null;var t=arguments[0];this.nv=new rn(sn.toSegmentStrings(t))}function on(){this.mapOp=null;var t=arguments[0];this.mapOp=t}function an(){}function un(){if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];this.init(t.length)}else if(Number.isInteger(arguments[0])){var e=arguments[0];this.init(1),this.location[an.ON]=e}else if(arguments[0]instanceof un){var n=arguments[0];if(this.init(n.location.length),null!==n)for(var i=0;i<this.location.length;i++)this.location[i]=n.location[i]}}else if(3===arguments.length){var r=arguments[0],s=arguments[1],o=arguments[2];this.init(3),this.location[an.ON]=r,this.location[an.LEFT]=s,this.location[an.RIGHT]=o}}function ln(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){var t=arguments[0];this.elt[0]=new un(t),this.elt[1]=new un(t)}else if(arguments[0]instanceof ln){var e=arguments[0];this.elt[0]=new un(e.elt[0]),this.elt[1]=new un(e.elt[1])}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.elt[0]=new un(S.NONE),this.elt[1]=new un(S.NONE),this.elt[n].setLocation(i)}else if(3===arguments.length){var r=arguments[0],s=arguments[1],o=arguments[2];this.elt[0]=new un(r,s,o),this.elt[1]=new un(r,s,o)}else if(4===arguments.length){var a=arguments[0],u=arguments[1],l=arguments[2],h=arguments[3];this.elt[0]=new un(S.NONE,S.NONE,S.NONE),this.elt[1]=new un(S.NONE,S.NONE,S.NONE),this.elt[a].setLocations(u,l,h)}}function hn(){this.startDe=null,this.maxNodeDegree=-1,this.edges=new x,this.pts=new x,this.label=new ln(S.NONE),this.ring=null,this._isHole=null,this.shell=null,this.holes=new x,this.geometryFactory=null;var t=arguments[0],e=arguments[1];this.geometryFactory=e,this.computePoints(t),this.computeRing()}function cn(){var t=arguments[0],e=arguments[1];hn.call(this,t,e)}function fn(){var t=arguments[0],e=arguments[1];hn.call(this,t,e)}function gn(){if(this.label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.label=t}}function dn(){gn.apply(this),this.coord=null,this.edges=null;var t=arguments[0],e=arguments[1];this.coord=t,this.edges=e,this.label=new ln(0,S.NONE)}function pn(){this.nodeMap=new et,this.nodeFact=null;var t=arguments[0];this.nodeFact=t}function mn(){if(this.edge=null,this.label=null,this.node=null,this.p0=null,this.p1=null,this.dx=null,this.dy=null,this.quadrant=null,1===arguments.length){var t=arguments[0];this.edge=t}else if(3===arguments.length){var e=arguments[0],n=arguments[1],i=arguments[2];mn.call(this,e,n,i,null)}else if(4===arguments.length){var r=arguments[0],s=arguments[1],o=arguments[2],a=arguments[3];mn.call(this,r),this.init(s,o),this.label=a}}function vn(){this._isForward=null,this._isInResult=!1,this._isVisited=!1,this.sym=null,this.next=null,this.nextMin=null,this.edgeRing=null,this.minEdgeRing=null,this.depth=[0,-999,-999];var t=arguments[0],e=arguments[1];if(mn.call(this,t),this._isForward=e,e)this.init(t.getCoordinate(0),t.getCoordinate(1));else{var n=t.getNumPoints()-1;this.init(t.getCoordinate(n),t.getCoordinate(n-1))}this.computeDirectedLabel()}function yn(){}function xn(){if(this.edges=new x,this.nodes=null,this.edgeEndList=new x,0===arguments.length)this.nodes=new pn(new yn);else if(1===arguments.length){var t=arguments[0];this.nodes=new pn(t)}}function En(){this.geometryFactory=null,this.shellList=new x;var t=arguments[0];this.geometryFactory=t}function In(){this.op=null,this.geometryFactory=null,this.ptLocator=null,this.lineEdgesList=new x,this.resultLineList=new x;var t=arguments[0],e=arguments[1],n=arguments[2];this.op=t,this.geometryFactory=e,this.ptLocator=n}function Nn(){this.op=null,this.geometryFactory=null,this.resultPointList=new x;var t=arguments[0],e=arguments[1];arguments[2];this.op=t,this.geometryFactory=e}function Cn(){}function Sn(){this.geom=null;var t=arguments[0];this.geom=t}function Ln(){this.edgeMap=new et,this.edgeList=null,this.ptInAreaLocation=[S.NONE,S.NONE]}function wn(){Ln.apply(this),this.resultAreaEdgeList=null,this.label=null,this.SCANNING_FOR_INCOMING=1,this.LINKING_TO_OUTGOING=2}function Rn(){yn.apply(this)}function Tn(){this.mce=null,this.chainIndex=null;var t=arguments[0],e=arguments[1];this.mce=t,this.chainIndex=e}function On(){if(this.label=null,this.xValue=null,this.eventType=null,this.insertEvent=null,this.deleteEventIndex=null,this.obj=null,2===arguments.length){var t=arguments[0],e=arguments[1];this.eventType=On.DELETE,this.xValue=t,this.insertEvent=e}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this.eventType=On.INSERT,this.label=n,this.xValue=i,this.obj=r}}function Pn(){}function bn(){this._hasIntersection=!1,this.hasProper=!1,this.hasProperInterior=!1,this.properIntersectionPoint=null,this.li=null,this.includeProper=null,this.recordIsolated=null,this.isSelfIntersection=null,this.numIntersections=0,this.numTests=0,this.bdyNodes=null,this._isDone=!1,this.isDoneWhenProperInt=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this.li=t,this.includeProper=e,this.recordIsolated=n}function _n(){Pn.apply(this),this.events=new x,this.nOverlaps=null}function Mn(){this.min=i.POSITIVE_INFINITY,this.max=i.NEGATIVE_INFINITY}function Dn(){}function An(){Mn.apply(this),this.item=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.min=t,this.max=e,this.item=n}function Fn(){Mn.apply(this),this.node1=null,this.node2=null;var t=arguments[0],e=arguments[1];this.node1=t,this.node2=e,this.buildExtent(this.node1,this.node2)}function Gn(){this.leaves=new x,this.root=null,this.level=0}function qn(){if(this.lines=null,this.isForcedToLineString=!1,1===arguments.length){var t=arguments[0];this.lines=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.lines=e,this.isForcedToLineString=n}}function Bn(){this.items=new x}function Vn(){this.index=null;var t=arguments[0];if(!oo(t,St))throw new n("Argument must be Polygonal");this.index=new kn(t)}function zn(){this.counter=null;var t=arguments[0];this.counter=t}function kn(){this.index=new Gn;var t=arguments[0];this.init(t)}function Yn(){this.coord=null,this.segmentIndex=null,this.dist=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.coord=new c(t),this.segmentIndex=e,this.dist=n}function Un(){this.nodeMap=new et,this.edge=null;var t=arguments[0];this.edge=t}function Xn(){}function Hn(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new I,this.env2=new I;var t=arguments[0];this.e=t,this.pts=t.getCoordinates();var e=new Xn;this.startIndex=e.getChainStartIndices(this.pts)}function Wn(){this.depth=Array(2).fill().map(function(){return Array(3)});for(var t=0;t<2;t++)for(var e=0;e<3;e++)this.depth[t][e]=Wn.NULL_VALUE}function jn(){if(gn.apply(this),this.pts=null,this.env=null,this.eiList=new Un(this),this.name=null,this.mce=null,this._isIsolated=!0,this.depth=new Wn,this.depthDelta=0,1===arguments.length){var t=arguments[0];jn.call(this,t,null)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.pts=e,this.label=n}}function Kn(){if(xn.apply(this),this.parentGeom=null,this.lineEdgeMap=new Zt,this.boundaryNodeRule=null,this.useBoundaryDeterminationRule=!0,this.argIndex=null,this.boundaryNodes=null,this._hasTooFewPoints=!1,this.invalidPoint=null,this.areaPtLocator=null,this.ptLocator=new Se,2===arguments.length){var t=arguments[0],e=arguments[1];Kn.call(this,t,e,q.OGC_SFS_BOUNDARY_RULE)}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this.argIndex=n,this.parentGeom=i,this.boundaryNodeRule=r,null!==i&&this.add(i)}}function Zn(){if(this.li=new ie,this.resultPrecisionModel=null,this.arg=null,1===arguments.length){var t=arguments[0];this.setComputationPrecision(t.getPrecisionModel()),this.arg=new Array(1).fill(null),this.arg[0]=new Kn(0,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];Zn.call(this,e,n,q.OGC_SFS_BOUNDARY_RULE)}else if(3===arguments.length){var i=arguments[0],r=arguments[1],s=arguments[2];i.getPrecisionModel().compareTo(r.getPrecisionModel())>=0?this.setComputationPrecision(i.getPrecisionModel()):this.setComputationPrecision(r.getPrecisionModel()),this.arg=new Array(2).fill(null),this.arg[0]=new Kn(0,i,s),this.arg[1]=new Kn(1,r,s)}}function Qn(){this.pts=null,this._orientation=null;var t=arguments[0];this.pts=t,this._orientation=Qn.orientation(t)}function Jn(){this.edges=new x,this.ocaMap=new et}function $n(){this.ptLocator=new Se,this.geomFact=null,this.resultGeom=null,this.graph=null,this.edgeList=new Jn,this.resultPolyList=new x,this.resultLineList=new x,this.resultPointList=new x;var t=arguments[0],e=arguments[1];Zn.call(this,t,e),this.graph=new xn(new Rn),this.geomFact=t.getFactory()}function ti(){this.geom=new Array(2).fill(null),this.snapTolerance=null,this.cbr=null;var t=arguments[0],e=arguments[1];this.geom[0]=t,this.geom[1]=e,this.computeSnapTolerance()}function ei(){this.geom=new Array(2).fill(null);var t=arguments[0],e=arguments[1];this.geom[0]=t,this.geom[1]=e}function ni(){this.factory=null,this.interiorPoint=null,this.maxWidth=0;var t=arguments[0];this.factory=t.getFactory(),this.add(t)}function ii(){this.poly=null,this.centreY=null,this.hiY=i.MAX_VALUE,this.loY=-i.MAX_VALUE;var t=arguments[0];this.poly=t,this.hiY=t.getEnvelopeInternal().getMaxY(),this.loY=t.getEnvelopeInternal().getMinY(),this.centreY=ni.avg(this.loY,this.hiY)}function ri(){this.centroid=null,this.minDistance=i.MAX_VALUE,this.interiorPoint=null;var t=arguments[0];this.centroid=t.getCentroid().getCoordinate(),this.addInterior(t),null===this.interiorPoint&&this.addEndpoints(t)}function si(){this.centroid=null,this.minDistance=i.MAX_VALUE,this.interiorPoint=null;var t=arguments[0];this.centroid=t.getCentroid().getCoordinate(),this.add(t)}function oi(){this.tempEnv1=new I,this.selectedSegment=new ae}function ai(){this.items=new x,this.subnode=[null,null]}function ui(){if(this.min=null,this.max=null,0===arguments.length)this.min=0,this.max=0;else if(1===arguments.length){var t=arguments[0];this.init(t.min,t.max)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.init(e,n)}}function li(){}function hi(t,e){var n,i,r,s,o={32:{d:127,c:128,b:0,a:0},64:{d:32752,c:0,b:0,a:0}},a={32:8,64:11}[t];if(s||(n=e<0||1/e<0,isFinite(e)||(s=o[t],n&&(s.d+=1<<t/4-1),i=Math.pow(2,a)-1,r=0)),!s){for(i={32:127,64:1023}[t],r=Math.abs(e);r>=2;)i++,r/=2;for(;r<1&&i>0;)i--,r*=2;i<=0&&(r/=2),32===t&&i>254&&(s={d:n?255:127,c:128,b:0,a:0},i=Math.pow(2,a)-1,r=0)}return i}function ci(){this.pt=0,this.level=0,this.interval=null;var t=arguments[0];this.computeKey(t)}function fi(){ai.apply(this),this.interval=null,this.centre=null,this.level=null;var t=arguments[0],e=arguments[1];this.interval=t,this.level=e,this.centre=(t.getMin()+t.getMax())/2}function gi(){}function di(){ai.apply(this)}function pi(){this.root=null,this.minExtent=1,this.root=new di}function mi(){}function vi(){this.ring=null,this.tree=null,this.crossings=0,this.interval=new ui;var t=arguments[0];this.ring=t,this.buildIndex()}function yi(){oi.apply(this),this.mcp=null,this.p=null;var t=arguments[0],e=arguments[1];this.mcp=t,this.p=e}function xi(){}function Ei(){this.p0=null,this.p1=null,this.p2=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.p0=t,this.p1=e,this.p2=n}function Ii(){this.input=null,this.extremalPts=null,this.centre=null,this.radius=0;var t=arguments[0];this.input=t}function Ni(){if(this.inputGeom=null,this.isConvex=null,this.convexHullPts=null,this.minBaseSeg=new ae,this.minWidthPt=null,this.minPtIndex=null,this.minWidth=0,1===arguments.length){var t=arguments[0];Ni.call(this,t,!1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.inputGeom=e,this.isConvex=n}}function Ci(){this.inputGeom=null,this.distanceTolerance=null;var t=arguments[0];this.inputGeom=t}function Si(){pe.apply(this),this.distanceTolerance=null;var t=arguments[0];this.distanceTolerance=t}function Li(){this._orig=null,this._sym=null,this._next=null;var t=arguments[0];this._orig=t}function wi(){this._isMarked=!1;var t=arguments[0];Li.call(this,t)}function Ri(){this.vertexMap=new Zt}function Ti(){this._isStart=!1;var t=arguments[0];wi.call(this,t)}function Oi(){Ri.apply(this)}function Pi(){this.result=null,this.factory=null,this.graph=null,this.lines=new x,this.nodeEdgeStack=new ce,this.ringStartEdge=null,this.graph=new Oi}function bi(){this.items=new x,this.subnode=new Array(4).fill(null)}function _i(){this.pt=new c,this.level=0,this.env=null;var t=arguments[0];this.computeKey(t)}function Mi(){bi.apply(this),this.env=null,this.centrex=null,this.centrey=null,this.level=null;var t=arguments[0],e=arguments[1];this.env=t,this.level=e,this.centrex=(t.getMinX()+t.getMaxX())/2,this.centrey=(t.getMinY()+t.getMaxY())/2}function Di(){bi.apply(this)}function Ai(){this.root=null,this.minExtent=1,this.root=new Di}function Fi(t){this.geometryFactory=t||new $t}function Gi(t){this.geometryFactory=t||new $t,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new Fi(this.geometryFactory)}function qi(){this.parser=new Fi(this.geometryFactory)}function Bi(t){this.geometryFactory=t||new $t,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new te(this.geometryFactory)}function Vi(t){return[t.x,t.y]}function zi(t,e){this.geometryFactory=t||new $t,this.ol=e||"undefined"!=typeof ol&&ol}function ki(){if(this.noder=null,this.scaleFactor=null,this.offsetX=null,this.offsetY=null,this.isScaled=!1,2===arguments.length){var t=arguments[0],e=arguments[1];ki.call(this,t,e,0,0)}else if(4===arguments.length){var n=arguments[0],i=arguments[1];arguments[2],arguments[3];this.noder=n,this.scaleFactor=i,this.isScaled=!this.isIntegerPrecision()}}function Yi(){if(this.inputGeom=null,this.isClosedEndpointsInInterior=!0,this.nonSimpleLocation=null,1===arguments.length){var t=arguments[0];this.inputGeom=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.inputGeom=e,this.isClosedEndpointsInInterior=!n.isInBoundary(2)}}function Ui(){this.pt=null,this.isClosed=null,this.degree=null;var t=arguments[0];this.pt=t,this.isClosed=!1,this.degree=0}function Xi(){if(this.quadrantSegments=Xi.DEFAULT_QUADRANT_SEGMENTS,this.endCapStyle=Xi.CAP_ROUND,this.joinStyle=Xi.JOIN_ROUND,this.mitreLimit=Xi.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,
this.simplifyFactor=Xi.DEFAULT_SIMPLIFY_FACTOR,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.setQuadrantSegments(t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.setQuadrantSegments(e),this.setEndCapStyle(n)}else if(4===arguments.length){var i=arguments[0],r=arguments[1],s=arguments[2],o=arguments[3];this.setQuadrantSegments(i),this.setEndCapStyle(r),this.setJoinStyle(s),this.setMitreLimit(o)}}function Hi(){this.minIndex=-1,this.minCoord=null,this.minDe=null,this.orientedDe=null}function Wi(){this.array_=[]}function ji(){this.finder=null,this.dirEdgeList=new x,this.nodes=new x,this.rightMostCoord=null,this.env=null,this.finder=new Hi}function Ki(){this.inputLine=null,this.distanceTol=null,this.isDeleted=null,this.angleOrientation=oe.COUNTERCLOCKWISE;var t=arguments[0];this.inputLine=t}function Zi(){this.ptList=null,this.precisionModel=null,this.minimimVertexDistance=0,this.ptList=new x}function Qi(){this.maxCurveSegmentError=0,this.filletAngleQuantum=null,this.closingSegLengthFactor=1,this.segList=null,this.distance=0,this.precisionModel=null,this.bufParams=null,this.li=null,this.s0=null,this.s1=null,this.s2=null,this.seg0=new ae,this.seg1=new ae,this.offset0=new ae,this.offset1=new ae,this.side=0,this._hasNarrowConcaveAngle=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this.precisionModel=t,this.bufParams=e,this.li=new ie,this.filletAngleQuantum=Math.PI/2/e.getQuadrantSegments(),e.getQuadrantSegments()>=8&&e.getJoinStyle()===Xi.JOIN_ROUND&&(this.closingSegLengthFactor=Qi.MAX_CLOSING_SEG_LEN_FACTOR),this.init(n)}function Ji(){this.distance=0,this.precisionModel=null,this.bufParams=null;var t=arguments[0],e=arguments[1];this.precisionModel=t,this.bufParams=e}function $i(){this.subgraphs=null,this.seg=new ae,this.cga=new oe;var t=arguments[0];this.subgraphs=t}function tr(){this.upwardSeg=null,this.leftDepth=null;var t=arguments[0],e=arguments[1];this.upwardSeg=new ae(t),this.leftDepth=e}function er(){this.inputGeom=null,this.distance=null,this.curveBuilder=null,this.curveList=new x;var t=arguments[0],e=arguments[1],n=arguments[2];this.inputGeom=t,this.distance=e,this.curveBuilder=n}function nr(){this._hasIntersection=!1,this.hasProper=!1,this.hasProperInterior=!1,this.hasInterior=!1,this.properIntersectionPoint=null,this.li=null,this.isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var t=arguments[0];this.li=t}function ir(){this.bufParams=null,this.workingPrecisionModel=null,this.workingNoder=null,this.geomFact=null,this.graph=null,this.edgeList=new Jn;var t=arguments[0];this.bufParams=t}function rr(){this.li=new ie,this.segStrings=null;var t=arguments[0];this.segStrings=t}function sr(){this.li=null,this.pt=null,this.originalPt=null,this.ptScaled=null,this.p0Scaled=null,this.p1Scaled=null,this.scaleFactor=null,this.minx=null,this.maxx=null,this.miny=null,this.maxy=null,this.corner=new Array(4).fill(null),this.safeEnv=null;var t=arguments[0],e=arguments[1],i=arguments[2];if(this.originalPt=t,this.pt=t,this.scaleFactor=e,this.li=i,e<=0)throw new n("Scale factor must be non-zero");1!==e&&(this.pt=new c(this.scale(t.x),this.scale(t.y)),this.p0Scaled=new c,this.p1Scaled=new c),this.initCorners(this.pt)}function or(){this.index=null;var t=arguments[0];this.index=t}function ar(){oi.apply(this),this.hotPixel=null,this.parentEdge=null,this.hotPixelVertexIndex=null,this._isNodeAdded=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this.hotPixel=t,this.parentEdge=e,this.hotPixelVertexIndex=n}function ur(){this.li=null,this.interiorIntersections=null;var t=arguments[0];this.li=t,this.interiorIntersections=new x}function lr(){this.pm=null,this.li=null,this.scaleFactor=null,this.noder=null,this.pointSnapper=null,this.nodedSegStrings=null;var t=arguments[0];this.pm=t,this.li=new ie,this.li.setPrecisionModel(t),this.scaleFactor=t.getScale()}function hr(){if(this.argGeom=null,this.distance=null,this.bufParams=new Xi,this.resultGeometry=null,this.saveException=null,1===arguments.length){var t=arguments[0];this.argGeom=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.argGeom=e,this.bufParams=n}}function cr(){this.comps=null;var t=arguments[0];this.comps=t}function fr(){if(this.component=null,this.segIndex=null,this.pt=null,2===arguments.length){var t=arguments[0],e=arguments[1];fr.call(this,t,fr.INSIDE_AREA,e)}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this.component=n,this.segIndex=i,this.pt=r}}function gr(){this.pts=null;var t=arguments[0];this.pts=t}function dr(){this.locations=null;var t=arguments[0];this.locations=t}function pr(){if(this.geom=null,this.terminateDistance=0,this.ptLocator=new Se,this.minDistanceLocation=null,this.minDistance=i.MAX_VALUE,2===arguments.length){var t=arguments[0],e=arguments[1];pr.call(this,t,e,0)}else if(3===arguments.length){var n=arguments[0],r=arguments[1],s=arguments[2];this.geom=new Array(2).fill(null),this.geom[0]=n,this.geom[1]=r,this.terminateDistance=s}}function mr(){this.factory=null,this.directedEdges=new x,this.coordinates=null;var t=arguments[0];this.factory=t}function vr(){this._isMarked=!1,this._isVisited=!1,this.data=null}function yr(){vr.apply(this),this.parentEdge=null,this.from=null,this.to=null,this.p0=null,this.p1=null,this.sym=null,this.edgeDirection=null,this.quadrant=null,this.angle=null;var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];this.from=t,this.to=e,this.edgeDirection=i,this.p0=t.getCoordinate(),this.p1=n;var r=this.p1.x-this.p0.x,s=this.p1.y-this.p0.y;this.quadrant=je.quadrant(r,s),this.angle=Math.atan2(s,r)}function xr(){var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];yr.call(this,t,e,n,i)}function Er(){if(vr.apply(this),this.dirEdge=null,0===arguments.length);else if(2===arguments.length){var t=arguments[0],e=arguments[1];this.setDirectedEdges(t,e)}}function Ir(){this.outEdges=new x,this.sorted=!1}function Nr(){if(vr.apply(this),this.pt=null,this.deStar=null,1===arguments.length){var t=arguments[0];Nr.call(this,t,new Ir)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.pt=e,this.deStar=n}}function Cr(){Er.apply(this),this.line=null;var t=arguments[0];this.line=t}function Sr(){this.nodeMap=new et}function Lr(){this.edges=new K,this.dirEdges=new K,this.nodeMap=new Sr}function wr(){Lr.apply(this)}function Rr(){this.graph=new wr,this.mergedLineStrings=null,this.factory=null,this.edgeStrings=null}function Tr(){this.edgeRing=null,this.next=null,this.label=-1;var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];yr.call(this,t,e,n,i)}function Or(){Er.apply(this),this.line=null;var t=arguments[0];this.line=t}function Pr(){this.geometryFactory=new $t,this.geomGraph=null,this.disconnectedRingcoord=null;var t=arguments[0];this.geomGraph=t}function br(){}function _r(){if(this.edgeEnds=new x,1===arguments.length){var t=arguments[0];_r.call(this,null,t)}else if(2===arguments.length){var e=(arguments[0],arguments[1]);mn.call(this,e.getEdge(),e.getCoordinate(),e.getDirectedCoordinate(),new ln(e.getLabel())),this.insert(e)}}function Mr(){Ln.apply(this)}function Dr(){var t=arguments[0],e=arguments[1];dn.call(this,t,e)}function Ar(){yn.apply(this)}function Fr(){this.nodes=new pn(new Ar)}function Gr(){this.li=new ie,this.geomGraph=null,this.nodeGraph=new Fr,this.invalidPoint=null;var t=arguments[0];this.geomGraph=t}function qr(){this.graph=null,this.rings=new x,this.totalEnv=new I,this.index=null,this.nestedPt=null;var t=arguments[0];this.graph=t}function Br(){if(this.errorType=null,this.pt=null,1===arguments.length){var t=arguments[0];Br.call(this,t,null)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.errorType=e,null!==n&&(this.pt=n.copy())}}function Vr(){this.parentGeometry=null,this.isSelfTouchingRingFormingHoleValid=!1,this.validErr=null;var t=arguments[0];this.parentGeometry=t}function zr(){this.factory=null,this.deList=new x,this.lowestEdge=null,this.ring=null,this.ringPts=null,this.holes=null,this.shell=null,this._isHole=null,this._isProcessed=!1,this._isIncludedSet=!1,this._isIncluded=!1;var t=arguments[0];this.factory=t}function kr(){}function Yr(){Lr.apply(this),this.factory=null;var t=arguments[0];this.factory=t}function Ur(){if(this.lineStringAdder=new Xr(this),this.graph=null,this.dangles=new x,this.cutEdges=new x,this.invalidRingLines=new x,this.holeList=null,this.shellList=null,this.polyList=null,this.isCheckingRingsValid=!0,this.extractOnlyPolygonal=null,this.geomFactory=null,0===arguments.length)Ur.call(this,!1);else if(1===arguments.length){var t=arguments[0];this.extractOnlyPolygonal=t}}function Xr(){this.p=null;var t=arguments[0];this.p=t}function Hr(){this.li=new ie,this.ptLocator=new Se,this.arg=null,this.nodes=new pn(new Ar),this.im=null,this.isolatedEdges=new x,this.invalidPoint=null;var t=arguments[0];this.arg=t}function Wr(){this.rectEnv=null;var t=arguments[0];this.rectEnv=t.getEnvelopeInternal()}function jr(){this.li=new ie,this.rectEnv=null,this.diagUp0=null,this.diagUp1=null,this.diagDown0=null,this.diagDown1=null;var t=arguments[0];this.rectEnv=t,this.diagUp0=new c(t.getMinX(),t.getMinY()),this.diagUp1=new c(t.getMaxX(),t.getMaxY()),this.diagDown0=new c(t.getMinX(),t.getMaxY()),this.diagDown1=new c(t.getMaxX(),t.getMinY())}function Kr(){this._isDone=!1}function Zr(){this.rectangle=null,this.rectEnv=null;var t=arguments[0];this.rectangle=t,this.rectEnv=t.getEnvelopeInternal()}function Qr(){Kr.apply(this),this.rectEnv=null,this._intersects=!1;var t=arguments[0];this.rectEnv=t}function Jr(){Kr.apply(this),this.rectSeq=null,this.rectEnv=null,this._containsPoint=!1;var t=arguments[0];this.rectSeq=t.getExteriorRing().getCoordinateSequence(),this.rectEnv=t.getEnvelopeInternal()}function $r(){Kr.apply(this),this.rectEnv=null,this.rectIntersector=null,this.hasIntersection=!1,this.p0=new c,this.p1=new c;var t=arguments[0];this.rectEnv=t.getEnvelopeInternal(),this.rectIntersector=new jr(this.rectEnv)}function ts(){if(this._relate=null,2===arguments.length){var t=arguments[0],e=arguments[1];Zn.call(this,t,e),this._relate=new Hr(this.arg)}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];Zn.call(this,n,i,r),this._relate=new Hr(this.arg)}}function es(){this.geomFactory=null,this.skipEmpty=!1,this.inputGeoms=null;var t=arguments[0];this.geomFactory=es.extractFactory(t),this.inputGeoms=t}function ns(){this.pointGeom=null,this.otherGeom=null,this.geomFact=null;var t=arguments[0],e=arguments[1];this.pointGeom=t,this.otherGeom=e,this.geomFact=e.getFactory()}function is(){this.sortIndex=-1,this.comps=null;var t=arguments[0],e=arguments[1];this.sortIndex=t,this.comps=e}function rs(){this.inputPolys=null,this.geomFactory=null;var t=arguments[0];this.inputPolys=t,null===this.inputPolys&&(this.inputPolys=new x)}function ss(){if(this.polygons=new x,this.lines=new x,this.points=new x,this.geomFact=null,1===arguments.length){if(oo(arguments[0],d)){var t=arguments[0];this.extract(t)}else if(arguments[0]instanceof F){var e=arguments[0];this.extract(e)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.geomFact=i,this.extract(n)}}function os(){Ot.CoordinateOperation.apply(this),this.targetPM=null,this.removeCollapsed=!0;var t=arguments[0],e=arguments[1];this.targetPM=t,this.removeCollapsed=e}function as(){this.targetPM=null,this.removeCollapsed=!0,this.changePrecisionModel=!1,this.isPointwise=!1;var t=arguments[0];this.targetPM=t}function us(){this.pts=null,this.usePt=null,this.distanceTolerance=null,this.seg=new ae;var t=arguments[0];this.pts=t}function ls(){this.inputGeom=null,this.distanceTolerance=null,this.isEnsureValidTopology=!0;var t=arguments[0];this.inputGeom=t}function hs(){pe.apply(this),this.isEnsureValidTopology=!0,this.distanceTolerance=null;var t=arguments[0],e=arguments[1];this.isEnsureValidTopology=t,this.distanceTolerance=e}function cs(){if(this.parent=null,this.index=null,2===arguments.length){var t=arguments[0],e=arguments[1];cs.call(this,t,e,null,-1)}else if(4===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2],s=arguments[3];ae.call(this,n,i),this.parent=r,this.index=s}}function fs(){if(this.parentLine=null,this.segs=null,this.resultSegs=new x,this.minimumSize=null,1===arguments.length){var t=arguments[0];fs.call(this,t,2)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.parentLine=e,this.minimumSize=n,this.init()}}function gs(){this.index=new Ai}function ds(){this.querySeg=null,this.items=new x;var t=arguments[0];this.querySeg=t}function ps(){this.li=new ie,this.inputIndex=new gs,this.outputIndex=new gs,this.line=null,this.linePts=null,this.distanceTolerance=0;var t=arguments[0],e=arguments[1];this.inputIndex=t,this.outputIndex=e}function ms(){this.inputIndex=new gs,this.outputIndex=new gs,this.distanceTolerance=0}function vs(){this.inputGeom=null,this.lineSimplifier=new ms,this.linestringMap=null;var t=arguments[0];this.inputGeom=t}function ys(){pe.apply(this),this.linestringMap=null;var t=arguments[0];this.linestringMap=t}function xs(){this.tps=null;var t=arguments[0];this.tps=t}function Es(){this.seg=null,this.segLen=null,this.splitPt=null,this.minimumLen=0;var t=arguments[0];this.seg=t,this.segLen=t.getLength()}function Is(){}function Ns(){}function Cs(){}function Ss(){if(this.p=null,1===arguments.length){var t=arguments[0];this.p=new c(t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.p=new c(e,n)}else if(3===arguments.length){var i=arguments[0],r=arguments[1],s=arguments[2];this.p=new c(i,r,s)}}function Ls(){this._isOnConstraint=null,this.constraint=null;var t=arguments[0];Ss.call(this,t)}function ws(){this._rot=null,this.vertex=null,this.next=null,this.data=null}function Rs(){this.subdiv=null,this.isUsingTolerance=!1;var t=arguments[0];this.subdiv=t,this.isUsingTolerance=t.getTolerance()>0}function Ts(){}function Os(){this.subdiv=null,this.lastEdge=null;var t=arguments[0];this.subdiv=t,this.init()}function Ps(){if(this.seg=null,1===arguments.length){if("string"==typeof arguments[0]){var t=arguments[0];u.call(this,t)}else if(arguments[0]instanceof ae){var e=arguments[0];u.call(this,"Locate failed to converge (at edge: "+e+").  Possible causes include invalid Subdivision topology or very close sites"),this.seg=new ae(e)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];u.call(this,Ps.msgWithSpatial(n,i)),this.seg=new ae(i)}}function bs(){}function _s(){this.visitedKey=0,this.quadEdges=new x,this.startingEdge=null,this.tolerance=null,this.edgeCoincidenceTolerance=null,this.frameVertex=new Array(3).fill(null),this.frameEnv=null,this.locator=null,this.seg=new ae,this.triEdges=new Array(3).fill(null);var t=arguments[0],e=arguments[1];this.tolerance=e,this.edgeCoincidenceTolerance=e/_s.EDGE_COINCIDENCE_TOL_FACTOR,this.createFrame(t),this.startingEdge=this.initSubdiv(),this.locator=new Os(this)}function Ms(){}function Ds(){this.triList=new x}function As(){this.triList=new x}function Fs(){this.coordList=new E,this.triCoords=new x}function Gs(){if(this.ls=null,this.data=null,2===arguments.length){var t=arguments[0],e=arguments[1];this.ls=new ae(t,e)}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this.ls=new ae(n,i),this.data=r}else if(6===arguments.length){var s=arguments[0],o=arguments[1],a=arguments[2],u=arguments[3],l=arguments[4],h=arguments[5];Gs.call(this,new c(s,o,a),new c(u,l,h))}else if(7===arguments.length){var f=arguments[0],g=arguments[1],d=arguments[2],p=arguments[3],m=arguments[4],v=arguments[5],y=arguments[6];Gs.call(this,new c(f,g,d),new c(p,m,v),y)}}function qs(){}function Bs(){if(this.p=null,this.data=null,this.left=null,this.right=null,this.count=null,2===arguments.length){var t=arguments[0],e=arguments[1];this.p=new c(t),this.left=null,this.right=null,this.count=1,this.data=e}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this.p=new c(n,i),this.left=null,this.right=null,this.count=1,this.data=r}}function Vs(){if(this.root=null,this.numberOfNodes=null,this.tolerance=null,0===arguments.length)Vs.call(this,0);else if(1===arguments.length){var t=arguments[0];this.tolerance=t}}function zs(){this.tolerance=null,this.matchNode=null,this.matchDist=0,this.p=null;var t=arguments[0],e=arguments[1];this.p=t,this.tolerance=e}function ks(){this.initialVertices=null,this.segVertices=null,this.segments=new x,this.subdiv=null,this.incDel=null,this.convexHull=null,this.splitFinder=new Ns,this.kdt=null,this.vertexFactory=null,this.computeAreaEnv=null,this.splitPt=null,this.tolerance=null;var t=arguments[0],e=arguments[1];this.initialVertices=new x(t),this.tolerance=e,this.kdt=new Vs(e)}function Ys(){this.siteCoords=null,this.tolerance=0,this.subdiv=null}function Us(){this.siteCoords=null,this.constraintLines=null,this.tolerance=0,this.subdiv=null,this.constraintVertexMap=new et}function Xs(){this.siteCoords=null,this.tolerance=0,this.subdiv=null,this.clipEnv=null,this.diagramEnv=null}function Hs(){if(this.componentIndex=0,this.segmentIndex=0,this.segmentFraction=0,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.componentIndex=t.componentIndex,this.segmentIndex=t.segmentIndex,this.segmentFraction=t.segmentFraction}else if(2===arguments.length){var e=arguments[0],n=arguments[1];Hs.call(this,0,e,n)}else if(3===arguments.length){var i=arguments[0],r=arguments[1],s=arguments[2];this.componentIndex=i,this.segmentIndex=r,this.segmentFraction=s,this.normalize()}else if(4===arguments.length){var o=arguments[0],a=arguments[1],u=arguments[2],l=arguments[3];this.componentIndex=o,this.segmentIndex=a,this.segmentFraction=u,l&&this.normalize()}}function Ws(){if(this.linearGeom=null,this.numLines=null,this.currentLine=null,this.componentIndex=0,this.vertexIndex=0,1===arguments.length){var t=arguments[0];Ws.call(this,t,0,0)}else if(2===arguments.length){var e=arguments[0],i=arguments[1];Ws.call(this,e,i.getComponentIndex(),Ws.segmentEndVertexIndex(i))}else if(3===arguments.length){var r=arguments[0],s=arguments[1],o=arguments[2];if(!oo(r,nt))throw new n("Lineal geometry is required");this.linearGeom=r,this.numLines=r.getNumGeometries(),this.componentIndex=s,this.vertexIndex=o,this.loadCurrentLine()}}function js(){this.linearGeom=null;var t=arguments[0];this.linearGeom=t}function Ks(){this.linearGeom=null;var t=arguments[0];this.linearGeom=t}function Zs(){this.geomFact=null,this.lines=new x,this.coordList=null,this.ignoreInvalidLines=!1,this.fixInvalidLines=!1,this.lastPt=null;var t=arguments[0];this.geomFact=t}function Qs(){this.line=null;var t=arguments[0];this.line=t}function Js(){this.linearGeom=null;var t=arguments[0];this.linearGeom=t,this.checkGeometryType()}function $s(){this.linearGeom=null;var t=arguments[0];this.linearGeom=t}function to(){this.linearGeom=null;var t=arguments[0];this.linearGeom=t}function eo(){this.linearGeom=null;var t=arguments[0];this.linearGeom=t}function no(){}"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(t){if(void 0===this||null===this)throw new TypeError(this+" is not an object");var e=Object(this),n=Math.max(Math.min(e.length,9007199254740991),0)||0,i=1 in arguments?parseInt(Number(arguments[1]),10)||0:0;i=i<0?Math.max(n+i,0):Math.min(i,n);var r=2 in arguments&&void 0!==arguments[2]?parseInt(Number(arguments[2]),10)||0:n;for(r=r<0?Math.max(n+arguments[2],0):Math.min(r,n);i<r;)e[i]=t,++i;return e},writable:!0}),Number.isFinite=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)},Number.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(t){return t!==t},Math.trunc=Math.trunc||function(t){return t<0?Math.ceil(t):Math.floor(t)};var io=function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};io(e.prototype,{interfaces_:function(){return[]},getClass:function(){return e}}),e.equalsWithTolerance=function(t,e,n){return Math.abs(t-e)<=n},i.isNaN=function(t){return Number.isNaN(t)},i.doubleToLongBits=function(t){return t},i.longBitsToDouble=function(t){return t},i.isInfinite=function(t){return!Number.isFinite(t)},i.MAX_VALUE=Number.MAX_VALUE,u.prototype=Object.create(Error.prototype),u.prototype.constructor=Error;var ro=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t};ro(l,u),io(l.prototype,{interfaces_:function(){return[]},getClass:function(){return l}}),io(h.prototype,{interfaces_:function(){return[]},getClass:function(){return h}}),h.shouldNeverReachHere=function(){if(0===arguments.length)h.shouldNeverReachHere(null);else if(1===arguments.length){var t=arguments[0];throw new l("Should never reach here"+(null!==t?": "+t:""))}},h.isTrue=function(){if(1===arguments.length){var t=arguments[0];h.isTrue(t,null)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!e)throw null===n?new l:new l(n)}},h.equals=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];h.equals(t,e,null)}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];if(!i.equals(n))throw new l("Expected "+n+" but encountered "+i+(null!==r?": "+r:""))}},io(c.prototype,{setOrdinate:function(t,e){switch(t){case c.X:this.x=e;break;case c.Y:this.y=e;break;case c.Z:this.z=e;break;default:throw new n("Invalid ordinate index: "+t)}},equals2D:function(){if(1===arguments.length){var t=arguments[0];return this.x===t.x&&this.y===t.y}if(2===arguments.length){var n=arguments[0],i=arguments[1];return!!e.equalsWithTolerance(this.x,n.x,i)&&!!e.equalsWithTolerance(this.y,n.y,i)}},getOrdinate:function(t){switch(t){case c.X:return this.x;case c.Y:return this.y;case c.Z:return this.z}throw new n("Invalid ordinate index: "+t)},equals3D:function(t){return this.x===t.x&&this.y===t.y&&(this.z===t.z||i.isNaN(this.z)&&i.isNaN(t.z))},equals:function(t){return t instanceof c&&this.equals2D(t)},equalInZ:function(t,n){return e.equalsWithTolerance(this.z,t.z,n)},compareTo:function(t){var e=t;return this.x<e.x?-1:this.x>e.x?1:this.y<e.y?-1:this.y>e.y?1:0},clone:function(){try{return null}catch(t){if(t instanceof CloneNotSupportedException)return h.shouldNeverReachHere("this shouldn't happen because this class is Cloneable"),null;throw t}},copy:function(){return new c(this)},toString:function(){return"("+this.x+", "+this.y+", "+this.z+")"},distance3D:function(t){var e=this.x-t.x,n=this.y-t.y,i=this.z-t.z;return Math.sqrt(e*e+n*n+i*i)},distance:function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)},hashCode:function(){var t=17;return t=37*t+c.hashCode(this.x),t=37*t+c.hashCode(this.y)},setCoordinate:function(t){this.x=t.x,this.y=t.y,this.z=t.z},interfaces_:function(){return[r,s,a]},getClass:function(){return c}}),c.hashCode=function(){if(1===arguments.length){var t=arguments[0],e=i.doubleToLongBits(t);return Math.trunc(e^e>>>32)}},io(f.prototype,{compare:function(t,e){var n=t,i=e,r=f.compare(n.x,i.x);if(0!==r)return r;var s=f.compare(n.y,i.y);return 0!==s?s:this.dimensionsToTest<=2?0:f.compare(n.z,i.z)},interfaces_:function(){return[o]},getClass:function(){return f}}),f.compare=function(t,e){return t<e?-1:t>e?1:i.isNaN(t)?i.isNaN(e)?0:-1:i.isNaN(e)?1:0},c.DimensionalComparator=f,c.serialVersionUID=0x5cbf2c235c7e5800,c.NULL_ORDINATE=i.NaN,c.X=0,c.Y=1,c.Z=2,g.prototype.hasNext=function(){},g.prototype.next=function(){},g.prototype.remove=function(){},d.prototype.add=function(){},d.prototype.addAll=function(){},d.prototype.isEmpty=function(){},d.prototype.iterator=function(){},d.prototype.size=function(){},d.prototype.toArray=function(){},d.prototype.remove=function(){},p.prototype=new Error,p.prototype.name="IndexOutOfBoundsException",m.prototype=Object.create(d.prototype),m.prototype.constructor=m,m.prototype.get=function(){},m.prototype.set=function(){},m.prototype.isEmpty=function(){},v.prototype=new Error,v.prototype.name="NoSuchElementException",y.prototype=new Error,y.prototype.name="OperationNotSupported",x.prototype=Object.create(m.prototype),x.prototype.constructor=x,x.prototype.ensureCapacity=function(){},x.prototype.interfaces_=function(){return[m,d]},x.prototype.add=function(t){return 1===arguments.length?this.array_.push(t):this.array_.splice(arguments[0],arguments[1]),!0},x.prototype.clear=function(){this.array_=[]},x.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},x.prototype.set=function(t,e){var n=this.array_[t];return this.array_[t]=e,n},x.prototype.iterator=function(){return new so(this)},x.prototype.get=function(t){if(t<0||t>=this.size())throw new p;return this.array_[t]},x.prototype.isEmpty=function(){return 0===this.array_.length},x.prototype.size=function(){return this.array_.length},x.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},x.prototype.remove=function(t){for(var e=!1,n=0,i=this.array_.length;n<i;n++)if(this.array_[n]===t){this.array_.splice(n,1),e=!0;break}return e};var so=function(t){this.arrayList_=t,this.position_=0};so.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new v;return this.arrayList_.get(this.position_++)},so.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},so.prototype.set=function(t){return this.arrayList_.set(this.position_-1,t)},so.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},ro(E,x),io(E.prototype,{getCoordinate:function(t){return this.get(t)},addAll:function(){if(2===arguments.length){for(var t=arguments[0],e=arguments[1],n=!1,i=t.iterator();i.hasNext();)this.add(i.next(),e),n=!0;return n}return x.prototype.addAll.apply(this,arguments)},clone:function(){for(var t=x.prototype.clone.call(this),e=0;e<this.size();e++)t.add(e,this.get(e).copy());return t},toCoordinateArray:function(){return this.toArray(E.coordArrayType)},add:function(){if(1===arguments.length){var t=arguments[0];x.prototype.add.call(this,t)}else if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var e=arguments[0],n=arguments[1];return this.add(e,n,!0),!0}if(arguments[0]instanceof c&&"boolean"==typeof arguments[1]){var i=arguments[0],r=arguments[1];if(!r&&this.size()>=1){var s=this.get(this.size()-1);if(s.equals2D(i))return null}x.prototype.add.call(this,i)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1]){var o=arguments[0],a=arguments[1];return this.add(o,a),!0}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var u=arguments[0],l=arguments[1],h=arguments[2];if(h)for(var f=0;f<u.length;f++)this.add(u[f],l);else for(var f=u.length-1;f>=0;f--)this.add(u[f],l);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof c){var g=arguments[0],d=arguments[1],p=arguments[2];if(!p){var m=this.size();if(m>0){if(g>0){var v=this.get(g-1);if(v.equals2D(d))return null}if(g<m){var y=this.get(g);if(y.equals2D(d))return null}}}x.prototype.add.call(this,g,d)}}else if(4===arguments.length){var E=arguments[0],I=arguments[1],N=arguments[2],C=arguments[3],S=1;N>C&&(S=-1);for(var f=N;f!==C;f+=S)this.add(E[f],I);return!0}},closeRing:function(){this.size()>0&&this.add(new c(this.get(0)),!1)},interfaces_:function(){return[]},getClass:function(){return E}}),E.coordArrayType=new Array(0).fill(null),io(I.prototype,{getArea:function(){return this.getWidth()*this.getHeight()},equals:function(t){if(!(t instanceof I))return!1;var e=t;return this.isNull()?e.isNull():this.maxx===e.getMaxX()&&this.maxy===e.getMaxY()&&this.minx===e.getMinX()&&this.miny===e.getMinY()},intersection:function(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new I;var e=this.minx>t.minx?this.minx:t.minx,n=this.miny>t.miny?this.miny:t.miny;return new I(e,this.maxx<t.maxx?this.maxx:t.maxx,n,this.maxy<t.maxy?this.maxy:t.maxy)},isNull:function(){return this.maxx<this.minx},getMaxX:function(){return this.maxx},covers:function(){if(1===arguments.length){if(arguments[0]instanceof c){var t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof I){var e=arguments[0];return!this.isNull()&&!e.isNull()&&(e.getMinX()>=this.minx&&e.getMaxX()<=this.maxx&&e.getMinY()>=this.miny&&e.getMaxY()<=this.maxy)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];return!this.isNull()&&(n>=this.minx&&n<=this.maxx&&i>=this.miny&&i<=this.maxy)}},intersects:function(){if(1===arguments.length){if(arguments[0]instanceof I){var t=arguments[0];return!this.isNull()&&!t.isNull()&&!(t.minx>this.maxx||t.maxx<this.minx||t.miny>this.maxy||t.maxy<this.miny)}if(arguments[0]instanceof c){var e=arguments[0];return this.intersects(e.x,e.y)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];return!this.isNull()&&!(n>this.maxx||n<this.minx||i>this.maxy||i<this.miny)}},getMinY:function(){return this.miny},getMinX:function(){return this.minx},expandToInclude:function(){if(1===arguments.length){if(arguments[0]instanceof c){var t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof I){var e=arguments[0];if(e.isNull())return null;this.isNull()?(this.minx=e.getMinX(),this.maxx=e.getMaxX(),this.miny=e.getMinY(),this.maxy=e.getMaxY()):(e.minx<this.minx&&(this.minx=e.minx),e.maxx>this.maxx&&(this.maxx=e.maxx),e.miny<this.miny&&(this.miny=e.miny),e.maxy>this.maxy&&(this.maxy=e.maxy))}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.isNull()?(this.minx=n,this.maxx=n,this.miny=i,this.maxy=i):(n<this.minx&&(this.minx=n),n>this.maxx&&(this.maxx=n),i<this.miny&&(this.miny=i),i>this.maxy&&(this.maxy=i))}},minExtent:function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t<e?t:e},getWidth:function(){return this.isNull()?0:this.maxx-this.minx},compareTo:function(t){var e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this.minx<e.minx?-1:this.minx>e.minx?1:this.miny<e.miny?-1:this.miny>e.miny?1:this.maxx<e.maxx?-1:this.maxx>e.maxx?1:this.maxy<e.maxy?-1:this.maxy>e.maxy?1:0},translate:function(t,e){if(this.isNull())return null;this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)},toString:function(){return"Env["+this.minx+" : "+this.maxx+", "+this.miny+" : "+this.maxy+"]"},setToNull:function(){this.minx=0,this.maxx=-1,this.miny=0,this.maxy=-1},getHeight:function(){return this.isNull()?0:this.maxy-this.miny},maxExtent:function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t>e?t:e},expandBy:function(){if(1===arguments.length){var t=arguments[0];this.expandBy(t,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this.isNull())return null;this.minx-=e,this.maxx+=e,this.miny-=n,this.maxy+=n,(this.minx>this.maxx||this.miny>this.maxy)&&this.setToNull()}},contains:function(){if(1===arguments.length){if(arguments[0]instanceof I){var t=arguments[0];return this.covers(t)}if(arguments[0]instanceof c){var e=arguments[0];return this.covers(e)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];return this.covers(n,i)}},centre:function(){return this.isNull()?null:new c((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},init:function(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof c){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof I){var e=arguments[0];this.minx=e.minx,this.maxx=e.maxx,this.miny=e.miny,this.maxy=e.maxy}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.init(n.x,i.x,n.y,i.y)}else if(4===arguments.length){var r=arguments[0],s=arguments[1],o=arguments[2],a=arguments[3];r<s?(this.minx=r,this.maxx=s):(this.minx=s,this.maxx=r),o<a?(this.miny=o,this.maxy=a):(this.miny=a,this.maxy=o)}},getMaxY:function(){return this.maxy},distance:function(t){if(this.intersects(t))return 0;var e=0
;this.maxx<t.minx?e=t.minx-this.maxx:this.minx>t.maxx&&(e=this.minx-t.maxx);var n=0;return this.maxy<t.miny?n=t.miny-this.maxy:this.miny>t.maxy&&(n=this.miny-t.maxy),0===e?n:0===n?e:Math.sqrt(e*e+n*n)},hashCode:function(){var t=17;return t=37*t+c.hashCode(this.minx),t=37*t+c.hashCode(this.maxx),t=37*t+c.hashCode(this.miny),t=37*t+c.hashCode(this.maxy)},interfaces_:function(){return[r,a]},getClass:function(){return I}}),I.intersects=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2];return n.x>=(t.x<e.x?t.x:e.x)&&n.x<=(t.x>e.x?t.x:e.x)&&n.y>=(t.y<e.y?t.y:e.y)&&n.y<=(t.y>e.y?t.y:e.y)}if(4===arguments.length){var i=arguments[0],r=arguments[1],s=arguments[2],o=arguments[3],a=Math.min(s.x,o.x),u=Math.max(s.x,o.x),l=Math.min(i.x,r.x),h=Math.max(i.x,r.x);return!(l>u)&&(!(h<a)&&(a=Math.min(s.y,o.y),u=Math.max(s.y,o.y),l=Math.min(i.y,r.y),h=Math.max(i.y,r.y),!(l>u)&&!(h<a)))}},I.serialVersionUID=0x51845cd552189800,ro(C,N),io(C.prototype,{interfaces_:function(){return[]},getClass:function(){return C}}),io(S.prototype,{interfaces_:function(){return[]},getClass:function(){return S}}),S.toLocationSymbol=function(t){switch(t){case S.EXTERIOR:return"e";case S.BOUNDARY:return"b";case S.INTERIOR:return"i";case S.NONE:return"-"}throw new n("Unknown location value: "+t)},S.INTERIOR=0,S.BOUNDARY=1,S.EXTERIOR=2,S.NONE=-1;var oo=function(t,e){return t.interfaces_&&t.interfaces_().indexOf(e)>-1};io(L.prototype,{interfaces_:function(){return[]},getClass:function(){return L}}),L.log10=function(t){var e=Math.log(t);return i.isInfinite(e)?e:i.isNaN(e)?e:e/L.LOG_10},L.min=function(t,e,n,i){var r=t;return e<r&&(r=e),n<r&&(r=n),i<r&&(r=i),r},L.clamp=function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1],n=arguments[2];return t<e?e:t>n?n:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var i=arguments[0],r=arguments[1],s=arguments[2];return i<r?r:i>s?s:i}},L.wrap=function(t,e){return t<0?e- -t%e:t%e},L.max=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],i=t;return e>i&&(i=e),n>i&&(i=n),i}if(4===arguments.length){var r=arguments[0],s=arguments[1],o=arguments[2],a=arguments[3],i=r;return s>i&&(i=s),o>i&&(i=o),a>i&&(i=a),i}},L.average=function(t,e){return(t+e)/2},L.LOG_10=Math.log(10),w.prototype.append=function(t){this.str+=t},w.prototype.setCharAt=function(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)},w.prototype.toString=function(t){return this.str},R.prototype.intValue=function(){return this.value},R.prototype.compareTo=function(t){return this.value<t?-1:this.value>t?1:0},R.isNaN=function(t){return Number.isNaN(t)},T.isWhitespace=function(t){return t<=32&&t>=0||127==t},T.toUpperCase=function(t){return t.toUpperCase()},io(O.prototype,{le:function(t){return this.hi<t.hi||this.hi===t.hi&&this.lo<=t.lo},extractSignificantDigits:function(t,e){var n=this.abs(),i=O.magnitude(n.hi),r=O.TEN.pow(i);n=n.divide(r),n.gt(O.TEN)?(n=n.divide(O.TEN),i+=1):n.lt(O.ONE)&&(n=n.multiply(O.TEN),i-=1);for(var s=i+1,o=new w,a=O.MAX_PRINT_DIGITS-1,u=0;u<=a;u++){t&&u===s&&o.append(".");var l=Math.trunc(n.hi);if(l<0)break;var h=!1,c=0;l>9?(h=!0,c="9"):c="0"+l,o.append(c),n=n.subtract(O.valueOf(l)).multiply(O.TEN),h&&n.selfAdd(O.TEN);var f=!0,g=O.magnitude(n.hi);if(g<0&&Math.abs(g)>=a-u&&(f=!1),!f)break}return e[0]=i,o.toString()},sqr:function(){return this.multiply(this)},doubleValue:function(){return this.hi+this.lo},subtract:function(){if(arguments[0]instanceof O){var t=arguments[0];return this.add(t.negate())}if("number"==typeof arguments[0]){var e=arguments[0];return this.add(-e)}},equals:function(){if(1===arguments.length){var t=arguments[0];return this.hi===t.hi&&this.lo===t.lo}},isZero:function(){return 0===this.hi&&0===this.lo},selfSubtract:function(){if(arguments[0]instanceof O){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t.hi,-t.lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e,0)}},getSpecialNumberString:function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},min:function(t){return this.le(t)?this:t},selfDivide:function(){if(1===arguments.length){if(arguments[0]instanceof O){var t=arguments[0];return this.selfDivide(t.hi,t.lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfDivide(e,0)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1],r=null,s=null,o=null,a=null,u=null,l=null,h=null,c=null;return u=this.hi/n,l=O.SPLIT*u,r=l-u,c=O.SPLIT*n,r=l-r,s=u-r,o=c-n,h=u*n,o=c-o,a=n-o,c=r*o-h+r*a+s*o+s*a,l=(this.hi-h-c+this.lo-u*i)/n,c=u+l,this.hi=c,this.lo=u-c+l,this}},dump:function(){return"DD<"+this.hi+", "+this.lo+">"},divide:function(){if(arguments[0]instanceof O){var t=arguments[0],e=null,n=null,r=null,s=null,o=null,a=null,u=null,l=null;o=this.hi/t.hi,a=O.SPLIT*o,e=a-o,l=O.SPLIT*t.hi,e=a-e,n=o-e,r=l-t.hi,u=o*t.hi,r=l-r,s=t.hi-r,l=e*r-u+e*s+n*r+n*s,a=(this.hi-u-l+this.lo-o*t.lo)/t.hi,l=o+a;return new O(l,o-l+a)}if("number"==typeof arguments[0]){var h=arguments[0];return i.isNaN(h)?O.createNaN():O.copy(this).selfDivide(h,0)}},ge:function(t){return this.hi>t.hi||this.hi===t.hi&&this.lo>=t.lo},pow:function(t){if(0===t)return O.valueOf(1);var e=new O(this),n=O.valueOf(1),i=Math.abs(t);if(i>1)for(;i>0;)i%2==1&&n.selfMultiply(e),(i/=2)>0&&(e=e.sqr());else n=e;return t<0?n.reciprocal():n},ceil:function(){if(this.isNaN())return O.NaN;var t=Math.ceil(this.hi),e=0;return t===this.hi&&(e=Math.ceil(this.lo)),new O(t,e)},compareTo:function(t){var e=t;return this.hi<e.hi?-1:this.hi>e.hi?1:this.lo<e.lo?-1:this.lo>e.lo?1:0},rint:function(){return this.isNaN()?this:this.add(.5).floor()},setValue:function(){if(arguments[0]instanceof O){var t=arguments[0];return this.init(t),this}if("number"==typeof arguments[0]){var e=arguments[0];return this.init(e),this}},max:function(t){return this.ge(t)?this:t},sqrt:function(){if(this.isZero())return O.valueOf(0);if(this.isNegative())return O.NaN;var t=1/Math.sqrt(this.hi),e=this.hi*t,n=O.valueOf(e),i=this.subtract(n.sqr()),r=i.hi*(.5*t);return n.add(r)},selfAdd:function(){if(1===arguments.length){if(arguments[0]instanceof O){var t=arguments[0];return this.selfAdd(t.hi,t.lo)}if("number"==typeof arguments[0]){var e=arguments[0],n=null,i=null,r=null,s=null,o=null,a=null;return r=this.hi+e,o=r-this.hi,s=r-o,s=e-o+(this.hi-s),a=s+this.lo,n=r+a,i=a+(r-n),this.hi=n+i,this.lo=i+(n-this.hi),this}}else if(2===arguments.length){var u=arguments[0],l=arguments[1],n=null,i=null,h=null,c=null,r=null,s=null,o=null,a=null;r=this.hi+u,h=this.lo+l,o=r-this.hi,a=h-this.lo,s=r-o,c=h-a,s=u-o+(this.hi-s),c=l-a+(this.lo-c),o=s+h,n=r+o,i=o+(r-n),o=c+i;var f=n+o,g=o+(n-f);return this.hi=f,this.lo=g,this}},selfMultiply:function(){if(1===arguments.length){if(arguments[0]instanceof O){var t=arguments[0];return this.selfMultiply(t.hi,t.lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfMultiply(e,0)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1],r=null,s=null,o=null,a=null,u=null,l=null;u=O.SPLIT*this.hi,r=u-this.hi,l=O.SPLIT*n,r=u-r,s=this.hi-r,o=l-n,u=this.hi*n,o=l-o,a=n-o,l=r*o-u+r*a+s*o+s*a+(this.hi*i+this.lo*n);var h=u+l;r=u-h;var c=l+r;return this.hi=h,this.lo=c,this}},selfSqr:function(){return this.selfMultiply(this)},floor:function(){if(this.isNaN())return O.NaN;var t=Math.floor(this.hi),e=0;return t===this.hi&&(e=Math.floor(this.lo)),new O(t,e)},negate:function(){return this.isNaN()?this:new O(-this.hi,-this.lo)},clone:function(){try{return null}catch(t){if(t instanceof CloneNotSupportedException)return null;throw t}},multiply:function(){if(arguments[0]instanceof O){var t=arguments[0];return t.isNaN()?O.createNaN():O.copy(this).selfMultiply(t)}if("number"==typeof arguments[0]){var e=arguments[0];return i.isNaN(e)?O.createNaN():O.copy(this).selfMultiply(e,0)}},isNaN:function(){return i.isNaN(this.hi)},intValue:function(){return Math.trunc(this.hi)},toString:function(){var t=O.magnitude(this.hi);return t>=-3&&t<=20?this.toStandardNotation():this.toSciNotation()},toStandardNotation:function(){var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!0,e),i=e[0]+1,r=n;if("."===n.charAt(0))r="0"+n;else if(i<0)r="0."+O.stringOfChar("0",-i)+n;else if(-1===n.indexOf(".")){var s=i-n.length,o=O.stringOfChar("0",s);r=n+o+".0"}return this.isNegative()?"-"+r:r},reciprocal:function(){var t=null,e=null,n=null,i=null,r=null,s=null,o=null,a=null;r=1/this.hi,s=O.SPLIT*r,t=s-r,a=O.SPLIT*this.hi,t=s-t,e=r-t,n=a-this.hi,o=r*this.hi,n=a-n,i=this.hi-n,a=t*n-o+t*i+e*n+e*i,s=(1-o-a-r*this.lo)/this.hi;var u=r+s;return new O(u,r-u+s)},toSciNotation:function(){if(this.isZero())return O.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!1,e),i=O.SCI_NOT_EXPONENT_CHAR+e[0];if("0"===n.charAt(0))throw new IllegalStateException("Found leading zero: "+n);var r="";n.length>1&&(r=n.substring(1));var s=n.charAt(0)+"."+r;return this.isNegative()?"-"+s+i:s+i},abs:function(){return this.isNaN()?O.NaN:this.isNegative()?this.negate():new O(this)},isPositive:function(){return this.hi>0||0===this.hi&&this.lo>0},lt:function(t){return this.hi<t.hi||this.hi===t.hi&&this.lo<t.lo},add:function(){if(arguments[0]instanceof O){var t=arguments[0];return O.copy(this).selfAdd(t)}if("number"==typeof arguments[0]){var e=arguments[0];return O.copy(this).selfAdd(e)}},init:function(){if(1===arguments.length){if("number"==typeof arguments[0]){var t=arguments[0];this.hi=t,this.lo=0}else if(arguments[0]instanceof O){var e=arguments[0];this.hi=e.hi,this.lo=e.lo}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.hi=n,this.lo=i}},gt:function(t){return this.hi>t.hi||this.hi===t.hi&&this.lo>t.lo},isNegative:function(){return this.hi<0||0===this.hi&&this.lo<0},trunc:function(){return this.isNaN()?O.NaN:this.isPositive()?this.floor():this.ceil()},signum:function(){return this.hi>0?1:this.hi<0?-1:this.lo>0?1:this.lo<0?-1:0},interfaces_:function(){return[a,r,s]},getClass:function(){return O}}),O.sqr=function(t){return O.valueOf(t).selfMultiply(t)},O.valueOf=function(){if("string"==typeof arguments[0]){var t=arguments[0];return O.parse(t)}if("number"==typeof arguments[0]){return new O(arguments[0])}},O.sqrt=function(t){return O.valueOf(t).sqrt()},O.parse=function(t){for(var e=0,n=t.length;T.isWhitespace(t.charAt(e));)e++;var i=!1;if(e<n){var r=t.charAt(e);"-"!==r&&"+"!==r||(e++,"-"===r&&(i=!0))}for(var s=new O,o=0,a=0,u=0;;){if(e>=n)break;var l=t.charAt(e);if(e++,T.isDigit(l)){var h=l-"0";s.selfMultiply(O.TEN),s.selfAdd(h),o++}else{if("."!==l){if("e"===l||"E"===l){var c=t.substring(e);try{u=R.parseInt(c)}catch(e){throw e instanceof NumberFormatException?new NumberFormatException("Invalid exponent "+c+" in string "+t):e}break}throw new NumberFormatException("Unexpected character '"+l+"' at position "+e+" in string "+t)}a=o}}var f=s,g=o-a-u;if(0===g)f=s;else if(g>0){var d=O.TEN.pow(g);f=s.divide(d)}else if(g<0){var d=O.TEN.pow(-g);f=s.multiply(d)}return i?f.negate():f},O.createNaN=function(){return new O(i.NaN,i.NaN)},O.copy=function(t){return new O(t)},O.magnitude=function(t){var e=Math.abs(t),n=Math.log(e)/Math.log(10),i=Math.trunc(Math.floor(n));return 10*Math.pow(10,i)<=e&&(i+=1),i},O.stringOfChar=function(t,e){for(var n=new w,i=0;i<e;i++)n.append(t);return n.toString()},O.PI=new O(3.141592653589793,1.2246467991473532e-16),O.TWO_PI=new O(6.283185307179586,2.4492935982947064e-16),O.PI_2=new O(1.5707963267948966,6.123233995736766e-17),O.E=new O(2.718281828459045,1.4456468917292502e-16),O.NaN=new O(i.NaN,i.NaN),O.EPS=1.23259516440783e-32,O.SPLIT=134217729,O.MAX_PRINT_DIGITS=32,O.TEN=O.valueOf(10),O.ONE=O.valueOf(1),O.SCI_NOT_EXPONENT_CHAR="E",O.SCI_NOT_ZERO="0.0E0",io(P.prototype,{interfaces_:function(){return[]},getClass:function(){return P}}),P.orientationIndex=function(t,e,n){var i=P.orientationIndexFilter(t,e,n);if(i<=1)return i;var r=O.valueOf(e.x).selfAdd(-t.x),s=O.valueOf(e.y).selfAdd(-t.y),o=O.valueOf(n.x).selfAdd(-e.x),a=O.valueOf(n.y).selfAdd(-e.y);return r.selfMultiply(a).selfSubtract(s.selfMultiply(o)).signum()},P.signOfDet2x2=function(t,e,n,i){return t.multiply(i).selfSubtract(e.multiply(n)).signum()},P.intersection=function(t,e,n,i){var r=O.valueOf(i.y).selfSubtract(n.y).selfMultiply(O.valueOf(e.x).selfSubtract(t.x)),s=O.valueOf(i.x).selfSubtract(n.x).selfMultiply(O.valueOf(e.y).selfSubtract(t.y)),o=r.subtract(s),a=O.valueOf(i.x).selfSubtract(n.x).selfMultiply(O.valueOf(t.y).selfSubtract(n.y)),u=O.valueOf(i.y).selfSubtract(n.y).selfMultiply(O.valueOf(t.x).selfSubtract(n.x)),l=a.subtract(u),h=l.selfDivide(o).doubleValue(),f=O.valueOf(t.x).selfAdd(O.valueOf(e.x).selfSubtract(t.x).selfMultiply(h)).doubleValue(),g=O.valueOf(e.x).selfSubtract(t.x).selfMultiply(O.valueOf(t.y).selfSubtract(n.y)),d=O.valueOf(e.y).selfSubtract(t.y).selfMultiply(O.valueOf(t.x).selfSubtract(n.x)),p=g.subtract(d),m=p.selfDivide(o).doubleValue();return new c(f,O.valueOf(n.y).selfAdd(O.valueOf(i.y).selfSubtract(n.y).selfMultiply(m)).doubleValue())},P.orientationIndexFilter=function(t,e,n){var i=null,r=(t.x-n.x)*(e.y-n.y),s=(t.y-n.y)*(e.x-n.x),o=r-s;if(r>0){if(s<=0)return P.signum(o);i=r+s}else{if(!(r<0))return P.signum(o);if(s>=0)return P.signum(o);i=-r-s}var a=P.DP_SAFE_EPSILON*i;return o>=a||-o>=a?P.signum(o):2},P.signum=function(t){return t>0?1:t<0?-1:0},P.DP_SAFE_EPSILON=1e-15,io(b.prototype,{setOrdinate:function(t,e,n){},size:function(){},getOrdinate:function(t,e){},getCoordinate:function(){if(1===arguments.length){arguments[0]}else if(2===arguments.length){arguments[0],arguments[1]}},getCoordinateCopy:function(t){},getDimension:function(){},getX:function(t){},clone:function(){},expandEnvelope:function(t){},copy:function(){},getY:function(t){},toCoordinateArray:function(){},interfaces_:function(){return[s]},getClass:function(){return b}}),b.X=0,b.Y=1,b.Z=2,b.M=3,_.arraycopy=function(t,e,n,i,r){for(var s=0,o=e;o<e+r;o++)n[i+s]=t[o],s++},_.getProperty=function(t){return{"line.separator":"\n"}[t]},io(M.prototype,{getY:function(){var t=this.y/this.w;if(i.isNaN(t)||i.isInfinite(t))throw new C;return t},getX:function(){var t=this.x/this.w;if(i.isNaN(t)||i.isInfinite(t))throw new C;return t},getCoordinate:function(){var t=new c;return t.x=this.getX(),t.y=this.getY(),t},interfaces_:function(){return[]},getClass:function(){return M}}),M.intersection=function(t,e,n,r){var s=t.y-e.y,o=e.x-t.x,a=t.x*e.y-e.x*t.y,u=n.y-r.y,l=r.x-n.x,h=n.x*r.y-r.x*n.y,f=o*h-l*a,g=u*a-s*h,d=s*l-u*o,p=f/d,m=g/d;if(i.isNaN(p)||i.isInfinite(p)||i.isNaN(m)||i.isInfinite(m))throw new C;return new c(p,m)},io(D.prototype,{create:function(){if(1===arguments.length){if(arguments[0]instanceof Array){arguments[0]}else if(oo(arguments[0],b)){arguments[0]}}else if(2===arguments.length){arguments[0],arguments[1]}},interfaces_:function(){return[]},getClass:function(){return D}}),io(A.prototype,{filter:function(t){},interfaces_:function(){return[]},getClass:function(){return A}}),io(F.prototype,{isGeometryCollection:function(){return this.getSortIndex()===F.SORTINDEX_GEOMETRYCOLLECTION},getFactory:function(){return this.factory},getGeometryN:function(t){return this},getArea:function(){return 0},isRectangle:function(){return!1},equals:function(){if(1===arguments.length){if(arguments[0]instanceof F){var t=arguments[0];return null!==t&&this.equalsTopo(t)}if(arguments[0]instanceof Object){var e=arguments[0];if(!(e instanceof F))return!1;var n=e;return this.equalsExact(n)}}},equalsExact:function(t){return this===t||this.equalsExact(t,0)},geometryChanged:function(){this.apply(F.geometryChangedFilter)},geometryChangedAction:function(){this.envelope=null},equalsNorm:function(t){return null!==t&&this.norm().equalsExact(t.norm())},getLength:function(){return 0},getNumGeometries:function(){return 1},compareTo:function(){if(1===arguments.length){var t=arguments[0],e=t;return this.getSortIndex()!==e.getSortIndex()?this.getSortIndex()-e.getSortIndex():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(t)}if(2===arguments.length){var n=arguments[0],i=arguments[1],e=n;return this.getSortIndex()!==e.getSortIndex()?this.getSortIndex()-e.getSortIndex():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(n,i)}},getUserData:function(){return this.userData},getSRID:function(){return this.SRID},getEnvelope:function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},checkNotGeometryCollection:function(t){if(t.getSortIndex()===F.SORTINDEX_GEOMETRYCOLLECTION)throw new n("This method does not support GeometryCollection arguments")},equal:function(t,e,n){return 0===n?t.equals(e):t.distance(e)<=n},norm:function(){var t=this.copy();return t.normalize(),t},getPrecisionModel:function(){return this.factory.getPrecisionModel()},getEnvelopeInternal:function(){return null===this.envelope&&(this.envelope=this.computeEnvelopeInternal()),new I(this.envelope)},setSRID:function(t){this.SRID=t},setUserData:function(t){this.userData=t},compare:function(t,e){for(var n=t.iterator(),i=e.iterator();n.hasNext()&&i.hasNext();){var r=n.next(),s=i.next(),o=r.compareTo(s);if(0!==o)return o}return n.hasNext()?1:i.hasNext()?-1:0},hashCode:function(){return this.getEnvelopeInternal().hashCode()},isGeometryCollectionOrDerived:function(){return this.getSortIndex()===F.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===F.SORTINDEX_MULTIPOINT||this.getSortIndex()===F.SORTINDEX_MULTILINESTRING||this.getSortIndex()===F.SORTINDEX_MULTIPOLYGON},interfaces_:function(){return[s,r,a]},getClass:function(){return F}}),F.hasNonEmptyElements=function(t){for(var e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1},F.hasNullElements=function(t){for(var e=0;e<t.length;e++)if(null===t[e])return!0;return!1},F.serialVersionUID=0x799ea46522854c00,F.SORTINDEX_POINT=0,F.SORTINDEX_MULTIPOINT=1,F.SORTINDEX_LINESTRING=2,F.SORTINDEX_LINEARRING=3,F.SORTINDEX_MULTILINESTRING=4,F.SORTINDEX_POLYGON=5,F.SORTINDEX_MULTIPOLYGON=6,F.SORTINDEX_GEOMETRYCOLLECTION=7,F.geometryChangedFilter={interfaces_:function(){return[A]},filter:function(t){t.geometryChangedAction()}},io(G.prototype,{filter:function(t){},interfaces_:function(){return[]},getClass:function(){return G}}),io(q.prototype,{isInBoundary:function(t){},interfaces_:function(){return[]},getClass:function(){return q}}),io(B.prototype,{isInBoundary:function(t){return t%2==1},interfaces_:function(){return[q]},getClass:function(){return B}}),io(V.prototype,{isInBoundary:function(t){return t>0},interfaces_:function(){return[q]},getClass:function(){return V}}),io(z.prototype,{isInBoundary:function(t){return t>1},interfaces_:function(){return[q]},getClass:function(){return z}}),io(k.prototype,{isInBoundary:function(t){return 1===t},interfaces_:function(){return[q]},getClass:function(){return k}}),q.Mod2BoundaryNodeRule=B,q.EndPointBoundaryNodeRule=V,q.MultiValentEndPointBoundaryNodeRule=z,q.MonoValentEndPointBoundaryNodeRule=k,q.MOD2_BOUNDARY_RULE=new B,q.ENDPOINT_BOUNDARY_RULE=new V,q.MULTIVALENT_ENDPOINT_BOUNDARY_RULE=new z,q.MONOVALENT_ENDPOINT_BOUNDARY_RULE=new k,q.OGC_SFS_BOUNDARY_RULE=q.MOD2_BOUNDARY_RULE,io(Y.prototype,{interfaces_:function(){return[]},getClass:function(){return Y}}),Y.isRing=function(t){return!(t.length<4)&&!!t[0].equals2D(t[t.length-1])},Y.ptNotInList=function(t,e){for(var n=0;n<t.length;n++){var i=t[n];if(Y.indexOf(i,e)<0)return i}return null},Y.scroll=function(t,e){var n=Y.indexOf(e,t);if(n<0)return null;var i=new Array(t.length).fill(null);_.arraycopy(t,n,i,0,t.length-n),_.arraycopy(t,0,i,t.length-n,n),_.arraycopy(i,0,t,0,t.length)},Y.equals=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(t===e)return!0;if(null===t||null===e)return!1;if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].equals(e[n]))return!1;return!0}if(3===arguments.length){var i=arguments[0],r=arguments[1],s=arguments[2];if(i===r)return!0;if(null===i||null===r)return!1;if(i.length!==r.length)return!1;for(var n=0;n<i.length;n++)if(0!==s.compare(i[n],r[n]))return!1;return!0}},Y.intersection=function(t,e){for(var n=new E,i=0;i<t.length;i++)e.intersects(t[i])&&n.add(t[i],!0);return n.toCoordinateArray()},Y.hasRepeatedPoints=function(t){for(var e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1},Y.removeRepeatedPoints=function(t){return Y.hasRepeatedPoints(t)?new E(t,!1).toCoordinateArray():t},Y.reverse=function(t){for(var e=t.length-1,n=Math.trunc(e/2),i=0;i<=n;i++){var r=t[i];t[i]=t[e-i],t[e-i]=r}},Y.removeNull=function(t){for(var e=0,n=0;n<t.length;n++)null!==t[n]&&e++;var i=new Array(e).fill(null);if(0===e)return i;for(var r=0,n=0;n<t.length;n++)null!==t[n]&&(i[r++]=t[n]);return i},Y.copyDeep=function(){if(1===arguments.length){for(var t=arguments[0],e=new Array(t.length).fill(null),n=0;n<t.length;n++)e[n]=new c(t[n]);return e}if(5===arguments.length)for(var i=arguments[0],r=arguments[1],s=arguments[2],o=arguments[3],a=arguments[4],n=0;n<a;n++)s[o+n]=new c(i[r+n])},Y.isEqualReversed=function(t,e){for(var n=0;n<t.length;n++){var i=t[n],r=e[t.length-n-1];if(0!==i.compareTo(r))return!1}return!0},Y.envelope=function(t){for(var e=new I,n=0;n<t.length;n++)e.expandToInclude(t[n]);return e},Y.toCoordinateArray=function(t){return t.toArray(Y.coordArrayType)},Y.atLeastNCoordinatesOrNothing=function(t,e){return e.length>=t?e:[]},Y.indexOf=function(t,e){for(var n=0;n<e.length;n++)if(t.equals(e[n]))return n;return-1},Y.increasingDirection=function(t){for(var e=0;e<Math.trunc(t.length/2);e++){var n=t.length-1-e,i=t[e].compareTo(t[n]);if(0!==i)return i}return 1},Y.compare=function(t,e){for(var n=0;n<t.length&&n<e.length;){var i=t[n].compareTo(e[n]);if(0!==i)return i;n++}return n<e.length?-1:n<t.length?1:0},Y.minCoordinate=function(t){for(var e=null,n=0;n<t.length;n++)(null===e||e.compareTo(t[n])>0)&&(e=t[n]);return e},Y.extract=function(t,e,n){e=L.clamp(e,0,t.length),n=L.clamp(n,-1,t.length);var i=n-e+1;n<0&&(i=0),e>=t.length&&(i=0),n<e&&(i=0);var r=new Array(i).fill(null);if(0===i)return r;for(var s=0,o=e;o<=n;o++)r[s++]=t[o];return r},io(U.prototype,{compare:function(t,e){var n=t,i=e;return Y.compare(n,i)},interfaces_:function(){return[o]},getClass:function(){return U}}),io(X.prototype,{compare:function(t,e){var n=t,i=e;if(n.length<i.length)return-1;if(n.length>i.length)return 1;if(0===n.length)return 0;var r=Y.compare(n,i);return Y.isEqualReversed(n,i)?0:r},OLDcompare:function(t,e){var n=t,i=e;if(n.length<i.length)return-1;if(n.length>i.length)return 1;if(0===n.length)return 0;for(var r=Y.increasingDirection(n),s=Y.increasingDirection(i),o=r>0?0:n.length-1,a=s>0?0:n.length-1,u=0;u<n.length;u++){var l=n[o].compareTo(i[a]);if(0!==l)return l;o+=r,a+=s}return 0},interfaces_:function(){return[o]},getClass:function(){return X}}),Y.ForwardComparator=U,Y.BidirectionalComparator=X,Y.coordArrayType=new Array(0).fill(null),H.prototype.get=function(){},H.prototype.put=function(){},H.prototype.size=function(){},H.prototype.values=function(){},H.prototype.entrySet=function(){},W.prototype=new H,j.prototype=new d,j.prototype.contains=function(){},K.prototype=new j,K.prototype.contains=function(t){for(var e=0,n=this.array_.length;e<n;e++){if(this.array_[e]===t)return!0}return!1},K.prototype.add=function(t){return!this.contains(t)&&(this.array_.push(t),!0)},K.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},K.prototype.remove=function(t){throw new javascript.util.OperationNotSupported},K.prototype.size=function(){return this.array_.length},K.prototype.isEmpty=function(){return 0===this.array_.length},K.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},K.prototype.iterator=function(){return new ao(this)};var ao=function(t){this.hashSet_=t,this.position_=0};ao.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new v;return this.hashSet_.array_[this.position_++]},ao.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},ao.prototype.remove=function(){throw new y};var uo=0;et.prototype=new W,et.prototype.get=function(t){for(var e=this.root_;null!==e;){var n=t.compareTo(e.key);if(n<0)e=e.left;else{if(!(n>0))return e.value;e=e.right}}return null},et.prototype.put=function(t,e){if(null===this.root_)return this.root_={key:t,value:e,left:null,right:null,parent:null,color:uo,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var n,i,r=this.root_;do{if(n=r,(i=t.compareTo(r.key))<0)r=r.left;else{if(!(i>0)){var s=r.value;return r.value=e,s}r=r.right}}while(null!==r);var o={key:t,left:null,right:null,value:e,parent:n,color:uo,getValue:function(){return this.value},getKey:function(){return this.key}};return i<0?n.left=o:n.right=o,this.fixAfterInsertion(o),this.size_++,null},et.prototype.fixAfterInsertion=function(t){for(t.color=1;null!=t&&t!=this.root_&&1==t.parent.color;)if(Q(t)==$(Q(Q(t)))){var e=tt(Q(Q(t)));1==Z(e)?(J(Q(t),uo),J(e,uo),J(Q(Q(t)),1),t=Q(Q(t))):(t==tt(Q(t))&&(t=Q(t),this.rotateLeft(t)),J(Q(t),uo),J(Q(Q(t)),1),this.rotateRight(Q(Q(t))))}else{var e=$(Q(Q(t)));1==Z(e)?(J(Q(t),uo),J(e,uo),J(Q(Q(t)),1),t=Q(Q(t))):(t==$(Q(t))&&(t=Q(t),this.rotateRight(t)),J(Q(t),uo),J(Q(Q(t)),1),this.rotateLeft(Q(Q(t))))}this.root_.color=uo},et.prototype.values=function(){var t=new x,e=this.getFirstEntry();if(null!==e)for(t.add(e.value);null!==(e=et.successor(e));)t.add(e.value);return t},et.prototype.entrySet=function(){var t=new K,e=this.getFirstEntry();if(null!==e)for(t.add(e);null!==(e=et.successor(e));)t.add(e);return t},et.prototype.rotateLeft=function(t){if(null!=t){var e=t.right;t.right=e.left,null!=e.left&&(e.left.parent=t),e.parent=t.parent,null==t.parent?this.root_=e:t.parent.left==t?t.parent.left=e:t.parent.right=e,e.left=t,t.parent=e}},et.prototype.rotateRight=function(t){if(null!=t){var e=t.left;t.left=e.right,null!=e.right&&(e.right.parent=t),e.parent=t.parent,null==t.parent?this.root_=e:t.parent.right==t?t.parent.right=e:t.parent.left=e,e.right=t,t.parent=e}},et.prototype.getFirstEntry=function(){var t=this.root_;if(null!=t)for(;null!=t.left;)t=t.left;return t},et.successor=function(t){if(null===t)return null;if(null!==t.right){for(var e=t.right;null!==e.left;)e=e.left;return e}for(var e=t.parent,n=t;null!==e&&n===e.right;)n=e,e=e.parent;return e},et.prototype.size=function(){return this.size_},io(nt.prototype,{interfaces_:function(){return[]},getClass:function(){return nt}}),it.prototype=new j,rt.prototype=new it,rt.prototype.contains=function(t){for(var e=0,n=this.array_.length;e<n;e++){if(0===this.array_[e].compareTo(t))return!0}return!1},rt.prototype.add=function(t){if(this.contains(t))return!1;for(var e=0,n=this.array_.length;e<n;e++){if(1===this.array_[e].compareTo(t))return this.array_.splice(e,0,t),!0}return this.array_.push(t),!0},rt.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},rt.prototype.remove=function(t){throw new y},rt.prototype.size=function(){return this.array_.length},rt.prototype.isEmpty=function(){return 0===this.array_.length},rt.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},rt.prototype.iterator=function(){return new lo(this)};var lo=function(t){this.treeSet_=t,this.position_=0};lo.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new v;return this.treeSet_.array_[this.position_++]},lo.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},lo.prototype.remove=function(){throw new y},st.sort=function(){var t,e,n,i,r=arguments[0];if(1===arguments.length)return i=function(t,e){return t.compareTo(e)},void r.sort(i);if(2===arguments.length)n=arguments[1],i=function(t,e){return n.compare(t,e)},r.sort(i);else{if(3===arguments.length){e=r.slice(arguments[1],arguments[2]),e.sort();var s=r.slice(0,arguments[1]).concat(e,r.slice(arguments[2],r.length));for(r.splice(0,r.length),t=0;t<s.length;t++)r.push(s[t]);return}if(4===arguments.length){for(e=r.slice(arguments[1],arguments[2]),n=arguments[3],i=function(t,e){return n.compare(t,e)},e.sort(i),s=r.slice(0,arguments[1]).concat(e,r.slice(arguments[2],r.length)),r.splice(0,r.length),t=0;t<s.length;t++)r.push(s[t]);return}}},st.asList=function(t){for(var e=new x,n=0,i=t.length;n<i;n++)e.add(t[n]);return e},io(ot.prototype,{interfaces_:function(){return[]},getClass:function(){return ot}}),ot.toDimensionSymbol=function(t){switch(t){case ot.FALSE:return ot.SYM_FALSE;case ot.TRUE:return ot.SYM_TRUE;case ot.DONTCARE:return ot.SYM_DONTCARE;case ot.P:return ot.SYM_P;case ot.L:return ot.SYM_L;case ot.A:return ot.SYM_A}throw new n("Unknown dimension value: "+t)},ot.toDimensionValue=function(t){switch(T.toUpperCase(t)){case ot.SYM_FALSE:return ot.FALSE;case ot.SYM_TRUE:return ot.TRUE;case ot.SYM_DONTCARE:return ot.DONTCARE;case ot.SYM_P:return ot.P;case ot.SYM_L:return ot.L;case ot.SYM_A:return ot.A}throw new n("Unknown dimension symbol: "+t)},ot.P=0,ot.L=1,ot.A=2,ot.FALSE=-1,ot.TRUE=-2,ot.DONTCARE=-3,ot.SYM_FALSE="F",ot.SYM_TRUE="T",ot.SYM_DONTCARE="*",ot.SYM_P="0",ot.SYM_L="1",ot.SYM_A="2",io(at.prototype,{filter:function(t){},interfaces_:function(){return[]},getClass:function(){return at}}),io(ut.prototype,{filter:function(t,e){},isDone:function(){},isGeometryChanged:function(){},interfaces_:function(){return[]},getClass:function(){return ut}}),ro(lt,F),io(lt.prototype,{computeEnvelopeInternal:function(){for(var t=new I,e=0;e<this.geometries.length;e++)t.expandToInclude(this.geometries[e].getEnvelopeInternal());return t},getGeometryN:function(t){return this.geometries[t]},getSortIndex:function(){return F.SORTINDEX_GEOMETRYCOLLECTION},getCoordinates:function(){for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=0;n<this.geometries.length;n++)for(var i=this.geometries[n].getCoordinates(),r=0;r<i.length;r++)e++,t[e]=i[r];return t},getArea:function(){for(var t=0,e=0;e<this.geometries.length;e++)t+=this.geometries[e].getArea();return t},equalsExact:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(!this.isEquivalentClass(t))return!1;var n=t;if(this.geometries.length!==n.geometries.length)return!1;for(var i=0;i<this.geometries.length;i++)if(!this.geometries[i].equalsExact(n.geometries[i],e))return!1;return!0}return F.prototype.equalsExact.apply(this,arguments)},normalize:function(){for(var t=0;t<this.geometries.length;t++)this.geometries[t].normalize();st.sort(this.geometries)},getCoordinate:function(){return this.isEmpty()?null:this.geometries[0].getCoordinate()},getBoundaryDimension:function(){for(var t=ot.FALSE,e=0;e<this.geometries.length;e++)t=Math.max(t,this.geometries[e].getBoundaryDimension());return t},getDimension:function(){for(var t=ot.FALSE,e=0;e<this.geometries.length;e++)t=Math.max(t,this.geometries[e].getDimension());return t},getLength:function(){for(var t=0,e=0;e<this.geometries.length;e++)t+=this.geometries[e].getLength();return t},getNumPoints:function(){for(var t=0,e=0;e<this.geometries.length;e++)t+=this.geometries[e].getNumPoints();return t},getNumGeometries:function(){return this.geometries.length},reverse:function(){for(var t=this.geometries.length,e=new Array(t).fill(null),n=0;n<this.geometries.length;n++)e[n]=this.geometries[n].reverse();return this.getFactory().createGeometryCollection(e)},compareToSameClass:function(){if(1===arguments.length){var t=arguments[0],e=new rt(st.asList(this.geometries)),n=new rt(st.asList(t.geometries));return this.compare(e,n)}if(2===arguments.length){for(var i=arguments[0],r=arguments[1],s=i,o=this.getNumGeometries(),a=s.getNumGeometries(),u=0;u<o&&u<a;){var l=this.getGeometryN(u),h=s.getGeometryN(u),c=l.compareToSameClass(h,r);if(0!==c)return c;u++}return u<o?1:u<a?-1:0}},apply:function(){if(oo(arguments[0],G))for(var t=arguments[0],e=0;e<this.geometries.length;e++)this.geometries[e].apply(t);else if(oo(arguments[0],ut)){
var n=arguments[0];if(0===this.geometries.length)return null;for(var e=0;e<this.geometries.length&&(this.geometries[e].apply(n),!n.isDone());e++);n.isGeometryChanged()&&this.geometryChanged()}else if(oo(arguments[0],at)){var i=arguments[0];i.filter(this);for(var e=0;e<this.geometries.length;e++)this.geometries[e].apply(i)}else if(oo(arguments[0],A)){var r=arguments[0];r.filter(this);for(var e=0;e<this.geometries.length;e++)this.geometries[e].apply(r)}},getBoundary:function(){return this.checkNotGeometryCollection(this),h.shouldNeverReachHere(),null},clone:function(){var t=F.prototype.clone.call(this);t.geometries=new Array(this.geometries.length).fill(null);for(var e=0;e<this.geometries.length;e++)t.geometries[e]=this.geometries[e].clone();return t},getGeometryType:function(){return"GeometryCollection"},copy:function(){for(var t=new Array(this.geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this.geometries[e].copy();return new lt(t,this.factory)},isEmpty:function(){for(var t=0;t<this.geometries.length;t++)if(!this.geometries[t].isEmpty())return!1;return!0},interfaces_:function(){return[]},getClass:function(){return lt}}),lt.serialVersionUID=-0x4f07bcb1f857d800,ro(ht,lt),io(ht.prototype,{getSortIndex:function(){return F.SORTINDEX_MULTILINESTRING},equalsExact:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&lt.prototype.equalsExact.call(this,t,e)}return lt.prototype.equalsExact.apply(this,arguments)},getBoundaryDimension:function(){return this.isClosed()?ot.FALSE:0},isClosed:function(){if(this.isEmpty())return!1;for(var t=0;t<this.geometries.length;t++)if(!this.geometries[t].isClosed())return!1;return!0},getDimension:function(){return 1},reverse:function(){for(var t=this.geometries.length,e=new Array(t).fill(null),n=0;n<this.geometries.length;n++)e[t-1-n]=this.geometries[n].reverse();return this.getFactory().createMultiLineString(e)},getBoundary:function(){return new ct(this).getBoundary()},getGeometryType:function(){return"MultiLineString"},copy:function(){for(var t=new Array(this.geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this.geometries[e].copy();return new ht(t,this.factory)},interfaces_:function(){return[nt]},getClass:function(){return ht}}),ht.serialVersionUID=0x7155d2ab4afa8000,io(ct.prototype,{boundaryMultiLineString:function(t){if(this.geom.isEmpty())return this.getEmptyMultiPoint();var e=this.computeBoundaryCoordinates(t);return 1===e.length?this.geomFact.createPoint(e[0]):this.geomFact.createMultiPointFromCoords(e)},getBoundary:function(){return this.geom instanceof It?this.boundaryLineString(this.geom):this.geom instanceof ht?this.boundaryMultiLineString(this.geom):this.geom.getBoundary()},boundaryLineString:function(t){if(this.geom.isEmpty())return this.getEmptyMultiPoint();if(t.isClosed()){return this.bnRule.isInBoundary(2)?t.getStartPoint():this.geomFact.createMultiPoint()}return this.geomFact.createMultiPoint([t.getStartPoint(),t.getEndPoint()])},getEmptyMultiPoint:function(){return this.geomFact.createMultiPoint()},computeBoundaryCoordinates:function(t){var e=new x;this.endpointMap=new et;for(var n=0;n<t.getNumGeometries();n++){var i=t.getGeometryN(n);0!==i.getNumPoints()&&(this.addEndpoint(i.getCoordinateN(0)),this.addEndpoint(i.getCoordinateN(i.getNumPoints()-1)))}for(var r=this.endpointMap.entrySet().iterator();r.hasNext();){var s=r.next(),o=s.getValue(),a=o.count;this.bnRule.isInBoundary(a)&&e.add(s.getKey())}return Y.toCoordinateArray(e)},addEndpoint:function(t){var e=this.endpointMap.get(t);null===e&&(e=new ft,this.endpointMap.put(t,e)),e.count++},interfaces_:function(){return[]},getClass:function(){return ct}}),ct.getBoundary=function(){if(1===arguments.length){var t=arguments[0],e=new ct(t);return e.getBoundary()}if(2===arguments.length){var n=arguments[0],i=arguments[1],e=new ct(n,i);return e.getBoundary()}},io(ft.prototype,{interfaces_:function(){return[]},getClass:function(){return ft}}),io(xt.prototype,{interfaces_:function(){return[]},getClass:function(){return xt}}),xt.chars=function(t,e){for(var n=new Array(e).fill(null),i=0;i<e;i++)n[i]=t;return new String(n)},xt.getStackTrace=function(){if(1===arguments.length){var t=arguments[0],e=new mt,n=new gt(e);return t.printStackTrace(n),e.toString()}if(2===arguments.length){for(var i=arguments[0],r=arguments[1],s="",o=new dt(xt.getStackTrace(i)),a=new yt(o),u=0;u<r;u++)try{s+=a.readLine()+xt.NEWLINE}catch(t){if(!(t instanceof vt))throw t;h.shouldNeverReachHere()}return s}},xt.split=function(t,e){for(var n=e.length,i=new x,r=""+t,s=r.indexOf(e);s>=0;){var o=r.substring(0,s);i.add(o),r=r.substring(s+n),s=r.indexOf(e)}r.length>0&&i.add(r);for(var a=new Array(i.size()).fill(null),u=0;u<a.length;u++)a[u]=i.get(u);return a},xt.toString=function(){if(1===arguments.length){var t=arguments[0];return xt.SIMPLE_ORDINATE_FORMAT.format(t)}},xt.spaces=function(t){return xt.chars(" ",t)},xt.NEWLINE=_.getProperty("line.separator"),xt.SIMPLE_ORDINATE_FORMAT=new pt("0.#"),io(Et.prototype,{interfaces_:function(){return[]},getClass:function(){return Et}}),Et.copyCoord=function(t,e,n,i){for(var r=Math.min(t.getDimension(),n.getDimension()),s=0;s<r;s++)n.setOrdinate(i,s,t.getOrdinate(e,s))},Et.isRing=function(t){var e=t.size();return 0===e||!(e<=3)&&(t.getOrdinate(0,b.X)===t.getOrdinate(e-1,b.X)&&t.getOrdinate(0,b.Y)===t.getOrdinate(e-1,b.Y))},Et.isEqual=function(t,e){var n=t.size();if(n!==e.size())return!1;for(var r=Math.min(t.getDimension(),e.getDimension()),s=0;s<n;s++)for(var o=0;o<r;o++){var a=t.getOrdinate(s,o),u=e.getOrdinate(s,o);if(t.getOrdinate(s,o)!==e.getOrdinate(s,o)&&(!i.isNaN(a)||!i.isNaN(u)))return!1}return!0},Et.extend=function(t,e,n){var i=t.create(n,e.getDimension()),r=e.size();if(Et.copy(e,0,i,0,r),r>0)for(var s=r;s<n;s++)Et.copy(e,r-1,i,s,1);return i},Et.reverse=function(t){for(var e=t.size()-1,n=Math.trunc(e/2),i=0;i<=n;i++)Et.swap(t,i,e-i)},Et.swap=function(t,e,n){if(e===n)return null;for(var i=0;i<t.getDimension();i++){var r=t.getOrdinate(e,i);t.setOrdinate(e,i,t.getOrdinate(n,i)),t.setOrdinate(n,i,r)}},Et.copy=function(t,e,n,i,r){for(var s=0;s<r;s++)Et.copyCoord(t,e+s,n,i+s)},Et.toString=function(){if(1===arguments.length){var t=arguments[0],e=t.size();if(0===e)return"()";var n=t.getDimension(),i=new w;i.append("(");for(var r=0;r<e;r++){r>0&&i.append(" ");for(var s=0;s<n;s++)s>0&&i.append(","),i.append(xt.toString(t.getOrdinate(r,s)))}return i.append(")"),i.toString()}},Et.ensureValidRing=function(t,e){var n=e.size();return 0===n?e:n<=3?Et.createClosedRing(t,e,4):e.getOrdinate(0,b.X)===e.getOrdinate(n-1,b.X)&&e.getOrdinate(0,b.Y)===e.getOrdinate(n-1,b.Y)?e:Et.createClosedRing(t,e,n+1)},Et.createClosedRing=function(t,e,n){var i=t.create(n,e.getDimension()),r=e.size();Et.copy(e,0,i,0,r);for(var s=r;s<n;s++)Et.copy(e,0,i,s,1);return i},ro(It,F),io(It.prototype,{computeEnvelopeInternal:function(){return this.isEmpty()?new I:this.points.expandEnvelope(new I)},isRing:function(){return this.isClosed()&&this.isSimple()},getSortIndex:function(){return F.SORTINDEX_LINESTRING},getCoordinates:function(){return this.points.toCoordinateArray()},equalsExact:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(!this.isEquivalentClass(t))return!1;var n=t;if(this.points.size()!==n.points.size())return!1;for(var i=0;i<this.points.size();i++)if(!this.equal(this.points.getCoordinate(i),n.points.getCoordinate(i),e))return!1;return!0}return F.prototype.equalsExact.apply(this,arguments)},normalize:function(){for(var t=0;t<Math.trunc(this.points.size()/2);t++){var e=this.points.size()-1-t;if(!this.points.getCoordinate(t).equals(this.points.getCoordinate(e)))return this.points.getCoordinate(t).compareTo(this.points.getCoordinate(e))>0&&Et.reverse(this.points),null}},getCoordinate:function(){return this.isEmpty()?null:this.points.getCoordinate(0)},getBoundaryDimension:function(){return this.isClosed()?ot.FALSE:0},isClosed:function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},getEndPoint:function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},getDimension:function(){return 1},getLength:function(){return oe.computeLength(this.points)},getNumPoints:function(){return this.points.size()},reverse:function(){var t=this.points.copy();return Et.reverse(t),this.getFactory().createLineString(t)},compareToSameClass:function(){if(1===arguments.length){for(var t=arguments[0],e=t,n=0,i=0;n<this.points.size()&&i<e.points.size();){var r=this.points.getCoordinate(n).compareTo(e.points.getCoordinate(i));if(0!==r)return r;n++,i++}return n<this.points.size()?1:i<e.points.size()?-1:0}if(2===arguments.length){var s=arguments[0],o=arguments[1],e=s;return o.compare(this.points,e.points)}},apply:function(){if(oo(arguments[0],G))for(var t=arguments[0],e=0;e<this.points.size();e++)t.filter(this.points.getCoordinate(e));else if(oo(arguments[0],ut)){var n=arguments[0];if(0===this.points.size())return null;for(var e=0;e<this.points.size()&&(n.filter(this.points,e),!n.isDone());e++);n.isGeometryChanged()&&this.geometryChanged()}else if(oo(arguments[0],at)){var i=arguments[0];i.filter(this)}else if(oo(arguments[0],A)){var r=arguments[0];r.filter(this)}},getBoundary:function(){return new ct(this).getBoundary()},isEquivalentClass:function(t){return t instanceof It},clone:function(){var t=F.prototype.clone.call(this);return t.points=this.points.clone(),t},getCoordinateN:function(t){return this.points.getCoordinate(t)},getGeometryType:function(){return"LineString"},copy:function(){return new It(this.points.copy(),this.factory)},getCoordinateSequence:function(){return this.points},isEmpty:function(){return 0===this.points.size()},init:function(t){if(null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),1===t.size())throw new n("Invalid number of points in LineString (found "+t.size()+" - must be 0 or >= 2)");this.points=t},isCoordinate:function(t){for(var e=0;e<this.points.size();e++)if(this.points.getCoordinate(e).equals(t))return!0;return!1},getStartPoint:function(){return this.isEmpty()?null:this.getPointN(0)},getPointN:function(t){return this.getFactory().createPoint(this.points.getCoordinate(t))},interfaces_:function(){return[nt]},getClass:function(){return It}}),It.serialVersionUID=0x2b2b51ba435c8e00,io(Nt.prototype,{interfaces_:function(){return[]},getClass:function(){return Nt}}),ro(Ct,F),io(Ct.prototype,{computeEnvelopeInternal:function(){if(this.isEmpty())return new I;var t=new I;return t.expandToInclude(this.coordinates.getX(0),this.coordinates.getY(0)),t},getSortIndex:function(){return F.SORTINDEX_POINT},getCoordinates:function(){return this.isEmpty()?[]:[this.getCoordinate()]},equalsExact:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&(!(!this.isEmpty()||!t.isEmpty())||this.isEmpty()===t.isEmpty()&&this.equal(t.getCoordinate(),this.getCoordinate(),e))}return F.prototype.equalsExact.apply(this,arguments)},normalize:function(){},getCoordinate:function(){return 0!==this.coordinates.size()?this.coordinates.getCoordinate(0):null},getBoundaryDimension:function(){return ot.FALSE},getDimension:function(){return 0},getNumPoints:function(){return this.isEmpty()?0:1},reverse:function(){return this.copy()},getX:function(){if(null===this.getCoordinate())throw new IllegalStateException("getX called on empty Point");return this.getCoordinate().x},compareToSameClass:function(){if(1===arguments.length){var t=arguments[0],e=t;return this.getCoordinate().compareTo(e.getCoordinate())}if(2===arguments.length){var n=arguments[0],i=arguments[1],e=n;return i.compare(this.coordinates,e.coordinates)}},apply:function(){if(oo(arguments[0],G)){var t=arguments[0];if(this.isEmpty())return null;t.filter(this.getCoordinate())}else if(oo(arguments[0],ut)){var e=arguments[0];if(this.isEmpty())return null;e.filter(this.coordinates,0),e.isGeometryChanged()&&this.geometryChanged()}else if(oo(arguments[0],at)){var n=arguments[0];n.filter(this)}else if(oo(arguments[0],A)){var i=arguments[0];i.filter(this)}},getBoundary:function(){return this.getFactory().createGeometryCollection(null)},clone:function(){var t=F.prototype.clone.call(this);return t.coordinates=this.coordinates.clone(),t},getGeometryType:function(){return"Point"},copy:function(){return new Ct(this.coordinates.copy(),this.factory)},getCoordinateSequence:function(){return this.coordinates},getY:function(){if(null===this.getCoordinate())throw new IllegalStateException("getY called on empty Point");return this.getCoordinate().y},isEmpty:function(){return 0===this.coordinates.size()},init:function(t){null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),h.isTrue(t.size()<=1),this.coordinates=t},isSimple:function(){return!0},interfaces_:function(){return[Nt]},getClass:function(){return Ct}}),Ct.serialVersionUID=0x44077bad161cbc00,io(St.prototype,{interfaces_:function(){return[]},getClass:function(){return St}}),ro(Lt,F),io(Lt.prototype,{computeEnvelopeInternal:function(){return this.shell.getEnvelopeInternal()},getSortIndex:function(){return F.SORTINDEX_POLYGON},getCoordinates:function(){if(this.isEmpty())return[];for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=this.shell.getCoordinates(),i=0;i<n.length;i++)e++,t[e]=n[i];for(var r=0;r<this.holes.length;r++)for(var s=this.holes[r].getCoordinates(),o=0;o<s.length;o++)e++,t[e]=s[o];return t},getArea:function(){var t=0;t+=Math.abs(oe.signedArea(this.shell.getCoordinateSequence()));for(var e=0;e<this.holes.length;e++)t-=Math.abs(oe.signedArea(this.holes[e].getCoordinateSequence()));return t},isRectangle:function(){if(0!==this.getNumInteriorRing())return!1;if(null===this.shell)return!1;if(5!==this.shell.getNumPoints())return!1;for(var t=this.shell.getCoordinateSequence(),e=this.getEnvelopeInternal(),n=0;n<5;n++){var i=t.getX(n);if(i!==e.getMinX()&&i!==e.getMaxX())return!1;var r=t.getY(n);if(r!==e.getMinY()&&r!==e.getMaxY())return!1}for(var s=t.getX(0),o=t.getY(0),n=1;n<=4;n++){var i=t.getX(n),r=t.getY(n);if(i!==s===(r!==o))return!1;s=i,o=r}return!0},equalsExact:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(!this.isEquivalentClass(t))return!1;var n=t,i=this.shell,r=n.shell;if(!i.equalsExact(r,e))return!1;if(this.holes.length!==n.holes.length)return!1;for(var s=0;s<this.holes.length;s++)if(!this.holes[s].equalsExact(n.holes[s],e))return!1;return!0}return F.prototype.equalsExact.apply(this,arguments)},normalize:function(){if(0===arguments.length){this.normalize(this.shell,!0);for(var t=0;t<this.holes.length;t++)this.normalize(this.holes[t],!1);st.sort(this.holes)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(e.isEmpty())return null;var i=new Array(e.getCoordinates().length-1).fill(null);_.arraycopy(e.getCoordinates(),0,i,0,i.length);var r=Y.minCoordinate(e.getCoordinates());Y.scroll(i,r),_.arraycopy(i,0,e.getCoordinates(),0,i.length),e.getCoordinates()[i.length]=i[0],oe.isCCW(e.getCoordinates())===n&&Y.reverse(e.getCoordinates())}},getCoordinate:function(){return this.shell.getCoordinate()},getNumInteriorRing:function(){return this.holes.length},getBoundaryDimension:function(){return 1},getDimension:function(){return 2},getLength:function(){var t=0;t+=this.shell.getLength();for(var e=0;e<this.holes.length;e++)t+=this.holes[e].getLength();return t},getNumPoints:function(){for(var t=this.shell.getNumPoints(),e=0;e<this.holes.length;e++)t+=this.holes[e].getNumPoints();return t},reverse:function(){var t=this.copy();t.shell=this.shell.copy().reverse(),t.holes=new Array(this.holes.length).fill(null);for(var e=0;e<this.holes.length;e++)t.holes[e]=this.holes[e].copy().reverse();return t},convexHull:function(){return this.getExteriorRing().convexHull()},compareToSameClass:function(){if(1===arguments.length){var t=arguments[0],e=this.shell,n=t.shell;return e.compareToSameClass(n)}if(2===arguments.length){var i=arguments[0],r=arguments[1],s=i,e=this.shell,n=s.shell,o=e.compareToSameClass(n,r);if(0!==o)return o;for(var a=this.getNumInteriorRing(),u=s.getNumInteriorRing(),l=0;l<a&&l<u;){var h=this.getInteriorRingN(l),c=s.getInteriorRingN(l),f=h.compareToSameClass(c,r);if(0!==f)return f;l++}return l<a?1:l<u?-1:0}},apply:function(){if(oo(arguments[0],G)){var t=arguments[0];this.shell.apply(t);for(var e=0;e<this.holes.length;e++)this.holes[e].apply(t)}else if(oo(arguments[0],ut)){var n=arguments[0];if(this.shell.apply(n),!n.isDone())for(var e=0;e<this.holes.length&&(this.holes[e].apply(n),!n.isDone());e++);n.isGeometryChanged()&&this.geometryChanged()}else if(oo(arguments[0],at)){var i=arguments[0];i.filter(this)}else if(oo(arguments[0],A)){var r=arguments[0];r.filter(this),this.shell.apply(r);for(var e=0;e<this.holes.length;e++)this.holes[e].apply(r)}},getBoundary:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var t=new Array(this.holes.length+1).fill(null);t[0]=this.shell;for(var e=0;e<this.holes.length;e++)t[e+1]=this.holes[e];return t.length<=1?this.getFactory().createLinearRing(t[0].getCoordinateSequence()):this.getFactory().createMultiLineString(t)},clone:function(){var t=F.prototype.clone.call(this);t.shell=this.shell.clone(),t.holes=new Array(this.holes.length).fill(null);for(var e=0;e<this.holes.length;e++)t.holes[e]=this.holes[e].clone();return t},getGeometryType:function(){return"Polygon"},copy:function(){for(var t=this.shell.copy(),e=new Array(this.holes.length).fill(null),n=0;n<e.length;n++)e[n]=this.holes[n].copy();return new Lt(t,e,this.factory)},getExteriorRing:function(){return this.shell},isEmpty:function(){return this.shell.isEmpty()},getInteriorRingN:function(t){return this.holes[t]},interfaces_:function(){return[St]},getClass:function(){return Lt}}),Lt.serialVersionUID=-0x307ffefd8dc97200,ro(wt,lt),io(wt.prototype,{getSortIndex:function(){return F.SORTINDEX_MULTIPOINT},isValid:function(){return!0},equalsExact:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&lt.prototype.equalsExact.call(this,t,e)}return lt.prototype.equalsExact.apply(this,arguments)},getCoordinate:function(){if(1===arguments.length){var t=arguments[0];return this.geometries[t].getCoordinate()}return lt.prototype.getCoordinate.apply(this,arguments)},getBoundaryDimension:function(){return ot.FALSE},getDimension:function(){return 0},getBoundary:function(){return this.getFactory().createGeometryCollection(null)},getGeometryType:function(){return"MultiPoint"},copy:function(){for(var t=new Array(this.geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this.geometries[e].copy();return new wt(t,this.factory)},interfaces_:function(){return[Nt]},getClass:function(){return wt}}),wt.serialVersionUID=-0x6fb1ed4162e0fc00,ro(Rt,It),io(Rt.prototype,{getSortIndex:function(){return F.SORTINDEX_LINEARRING},getBoundaryDimension:function(){return ot.FALSE},isClosed:function(){return!!this.isEmpty()||It.prototype.isClosed.call(this)},reverse:function(){var t=this.points.copy();return Et.reverse(t),this.getFactory().createLinearRing(t)},validateConstruction:function(){if(!this.isEmpty()&&!It.prototype.isClosed.call(this))throw new n("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<Rt.MINIMUM_VALID_SIZE)throw new n("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},getGeometryType:function(){return"LinearRing"},copy:function(){return new Rt(this.points.copy(),this.factory)},interfaces_:function(){return[]},getClass:function(){return Rt}}),Rt.MINIMUM_VALID_SIZE=4,Rt.serialVersionUID=-0x3b229e262367a600,ro(Tt,lt),io(Tt.prototype,{getSortIndex:function(){return F.SORTINDEX_MULTIPOLYGON},equalsExact:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&lt.prototype.equalsExact.call(this,t,e)}return lt.prototype.equalsExact.apply(this,arguments)},getBoundaryDimension:function(){return 1},getDimension:function(){return 2},reverse:function(){for(var t=this.geometries.length,e=new Array(t).fill(null),n=0;n<this.geometries.length;n++)e[n]=this.geometries[n].reverse();return this.getFactory().createMultiPolygon(e)},getBoundary:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var t=new x,e=0;e<this.geometries.length;e++)for(var n=this.geometries[e],i=n.getBoundary(),r=0;r<i.getNumGeometries();r++)t.add(i.getGeometryN(r));var s=new Array(t.size()).fill(null);return this.getFactory().createMultiLineString(t.toArray(s))},getGeometryType:function(){return"MultiPolygon"},copy:function(){for(var t=new Array(this.geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this.geometries[e].copy();return new Tt(t,this.factory)},interfaces_:function(){return[St]},getClass:function(){return Tt}}),Tt.serialVersionUID=-0x7a5aa1369171980,io(Ot.prototype,{setCopyUserData:function(t){this.isUserDataCopied=t},edit:function(t,e){if(null===t)return null;var n=this.editInternal(t,e);return this.isUserDataCopied&&n.setUserData(t.getUserData()),n},editInternal:function(t,e){return null===this.factory&&(this.factory=t.getFactory()),t instanceof lt?this.editGeometryCollection(t,e):t instanceof Lt?this.editPolygon(t,e):t instanceof Ct?e.edit(t,this.factory):t instanceof It?e.edit(t,this.factory):(h.shouldNeverReachHere("Unsupported Geometry class: "+t.getClass().getName()),null)},editGeometryCollection:function(t,e){for(var n=e.edit(t,this.factory),i=new x,r=0;r<n.getNumGeometries();r++){var s=this.edit(n.getGeometryN(r),e);null===s||s.isEmpty()||i.add(s)}return n.getClass()===wt?this.factory.createMultiPoint(i.toArray([])):n.getClass()===ht?this.factory.createMultiLineString(i.toArray([])):n.getClass()===Tt?this.factory.createMultiPolygon(i.toArray([])):this.factory.createGeometryCollection(i.toArray([]))},editPolygon:function(t,e){var n=e.edit(t,this.factory);if(null===n&&(n=this.factory.createPolygon(null)),n.isEmpty())return n;var i=this.edit(n.getExteriorRing(),e);if(null===i||i.isEmpty())return this.factory.createPolygon();for(var r=new x,s=0;s<n.getNumInteriorRing();s++){var o=this.edit(n.getInteriorRingN(s),e);null===o||o.isEmpty()||r.add(o)}return this.factory.createPolygon(i,r.toArray([]))},interfaces_:function(){return[]},getClass:function(){return Ot}}),Ot.GeometryEditorOperation=Pt,io(bt.prototype,{edit:function(t,e){return t},interfaces_:function(){return[Pt]},getClass:function(){return bt}}),io(_t.prototype,{edit:function(t,e){var n=this.editCoordinates(t.getCoordinates(),t);return null===n?t:t instanceof Rt?e.createLinearRing(n):t instanceof It?e.createLineString(n):t instanceof Ct?n.length>0?e.createPoint(n[0]):e.createPoint():t},interfaces_:function(){return[Pt]},getClass:function(){return _t}}),io(Mt.prototype,{edit:function(t,e){return t instanceof Rt?e.createLinearRing(this.edit(t.getCoordinateSequence(),t)):t instanceof It?e.createLineString(this.edit(t.getCoordinateSequence(),t)):t instanceof Ct?e.createPoint(this.edit(t.getCoordinateSequence(),t)):t},interfaces_:function(){return[Pt]},getClass:function(){return Mt}}),Ot.NoOpGeometryOperation=bt,Ot.CoordinateOperation=_t,Ot.CoordinateSequenceOperation=Mt,io(Dt.prototype,{setOrdinate:function(t,e,i){switch(e){case b.X:this.coordinates[t].x=i;break;case b.Y:this.coordinates[t].y=i;break;case b.Z:this.coordinates[t].z=i;break;default:throw new n("invalid ordinateIndex")}},size:function(){return this.coordinates.length},getOrdinate:function(t,e){switch(e){case b.X:return this.coordinates[t].x;case b.Y:return this.coordinates[t].y;case b.Z:return this.coordinates[t].z}return i.NaN},getCoordinate:function(){if(1===arguments.length){var t=arguments[0];return this.coordinates[t]}if(2===arguments.length){var e=arguments[0],n=arguments[1];n.x=this.coordinates[e].x,n.y=this.coordinates[e].y,n.z=this.coordinates[e].z}},getCoordinateCopy:function(t){return new c(this.coordinates[t])},getDimension:function(){return this.dimension},getX:function(t){return this.coordinates[t].x},clone:function(){for(var t=new Array(this.size()).fill(null),e=0;e<this.coordinates.length;e++)t[e]=this.coordinates[e].clone();return new Dt(t,this.dimension)},expandEnvelope:function(t){for(var e=0;e<this.coordinates.length;e++)t.expandToInclude(this.coordinates[e]);return t},copy:function(){for(var t=new Array(this.size()).fill(null),e=0;e<this.coordinates.length;e++)t[e]=this.coordinates[e].copy();return new Dt(t,this.dimension)},toString:function(){if(this.coordinates.length>0){var t=new w(17*this.coordinates.length);t.append("("),t.append(this.coordinates[0]);for(var e=1;e<this.coordinates.length;e++)t.append(", "),t.append(this.coordinates[e]);return t.append(")"),t.toString()}return"()"},getY:function(t){return this.coordinates[t].y},toCoordinateArray:function(){return this.coordinates},interfaces_:function(){return[b,a]},getClass:function(){return Dt}}),Dt.serialVersionUID=-0xcb44a778db18e00,io(At.prototype,{readResolve:function(){return At.instance()},create:function(){if(1===arguments.length){if(arguments[0]instanceof Array){return new Dt(arguments[0])}if(oo(arguments[0],b)){return new Dt(arguments[0])}}else if(2===arguments.length){var t=arguments[0],e=arguments[1];return e>3&&(e=3),e<2?new Dt(t):new Dt(t,e)}},interfaces_:function(){return[D,a]},getClass:function(){return At}}),At.instance=function(){return At.instanceObject},At.serialVersionUID=-0x38e49fa6cf6f2e00,At.instanceObject=new At;var ho,co=Object.defineProperty,fo=function(t,e){function n(t){if(!this||this.constructor!==n)return new n(t);this._keys=[],this._values=[],this._itp=[],this.objectOnly=e,t&&Gt.call(this,t)}return e||co(t,"size",{get:jt}),t.constructor=n,n.prototype=t,n}({delete:qt,has:zt,get:Bt,set:kt,keys:Ut,values:Xt,entries:Ht,forEach:Kt,clear:Yt}),go="undefined"!=typeof Map&&Map.prototype.values?Map:fo;Zt.prototype=new H,Zt.prototype.get=function(t){return this.map_.get(t)||null},Zt.prototype.put=function(t,e){return this.map_.set(t,e),e},Zt.prototype.values=function(){for(var t=new x,e=this.map_.values(),n=e.next();!n.done;)t.add(n.value),n=e.next();return t},Zt.prototype.entrySet=function(){var t=new K;return this.map_.entries().forEach(function(e){return t.add(e)}),t},Zt.prototype.size=function(){return this.map_.size()},io(Qt.prototype,{equals:function(t){if(!(t instanceof Qt))return!1;var e=t;return this.modelType===e.modelType&&this.scale===e.scale},compareTo:function(t){var e=t,n=this.getMaximumSignificantDigits(),i=e.getMaximumSignificantDigits();return new R(n).compareTo(new R(i))},getScale:function(){return this.scale},isFloating:function(){return this.modelType===Qt.FLOATING||this.modelType===Qt.FLOATING_SINGLE},getType:function(){return this.modelType},toString:function(){var t="UNKNOWN";return this.modelType===Qt.FLOATING?t="Floating":this.modelType===Qt.FLOATING_SINGLE?t="Floating-Single":this.modelType===Qt.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t},makePrecise:function(){if("number"==typeof arguments[0]){var t=arguments[0];if(i.isNaN(t))return t;if(this.modelType===Qt.FLOATING_SINGLE){return t}return this.modelType===Qt.FIXED?Math.round(t*this.scale)/this.scale:t}if(arguments[0]instanceof c){var e=arguments[0];if(this.modelType===Qt.FLOATING)return null;e.x=this.makePrecise(e.x),e.y=this.makePrecise(e.y)}},getMaximumSignificantDigits:function(){var t=16;return this.modelType===Qt.FLOATING?t=16:this.modelType===Qt.FLOATING_SINGLE?t=6:this.modelType===Qt.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t},setScale:function(t){this.scale=Math.abs(t)},interfaces_:function(){return[a,r]},getClass:function(){return Qt}}),Qt.mostPrecise=function(t,e){return t.compareTo(e)>=0?t:e},io(Jt.prototype,{readResolve:function(){return Jt.nameToTypeMap.get(this.name)},toString:function(){return this.name},interfaces_:function(){return[a]},getClass:function(){return Jt}}),Jt.serialVersionUID=-552860263173159e4,Jt.nameToTypeMap=new Zt,Qt.Type=Jt,Qt.serialVersionUID=0x6bee6404e9a25c00,Qt.FIXED=new Jt("FIXED"),Qt.FLOATING=new Jt("FLOATING"),Qt.FLOATING_SINGLE=new Jt("FLOATING SINGLE"),Qt.maximumPreciseValue=9007199254740992,io($t.prototype,{toGeometry:function(t){return t.isNull()?this.createPoint(null):t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new c(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new c(t.getMinX(),t.getMinY()),new c(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new c(t.getMinX(),t.getMinY()),new c(t.getMinX(),t.getMaxY()),new c(t.getMaxX(),t.getMaxY()),new c(t.getMaxX(),t.getMinY()),new c(t.getMinX(),t.getMinY())]),null)},createLineString:function(){if(0===arguments.length)return this.createLineString(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLineString(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(oo(arguments[0],b)){return new It(arguments[0],this)}}},createMultiLineString:function(){if(0===arguments.length)return new ht(null,this);if(1===arguments.length){return new ht(arguments[0],this)}},buildGeometry:function(t){for(var e=null,n=!1,i=!1,r=t.iterator();r.hasNext();){var s=r.next(),o=s.getClass();null===e&&(e=o),o!==e&&(n=!0),s.isGeometryCollectionOrDerived()&&(i=!0)}if(null===e)return this.createGeometryCollection();if(n||i)return this.createGeometryCollection($t.toGeometryArray(t));var a=t.iterator().next();if(t.size()>1){if(a instanceof Lt)return this.createMultiPolygon($t.toPolygonArray(t));if(a instanceof It)return this.createMultiLineString($t.toLineStringArray(t));if(a instanceof Ct)return this.createMultiPoint($t.toPointArray(t));h.shouldNeverReachHere("Unhandled class: "+a.getClass().getName())}return a},createMultiPointFromCoords:function(t){return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)},createPoint:function(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof c){var t=arguments[0];return this.createPoint(null!==t?this.getCoordinateSequenceFactory().create([t]):null)}if(oo(arguments[0],b)){return new Ct(arguments[0],this)}}},getCoordinateSequenceFactory:function(){return this.coordinateSequenceFactory},createPolygon:function(){if(0===arguments.length)return new Lt(null,null,this);if(1===arguments.length){if(oo(arguments[0],b)){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof Array){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}if(arguments[0]instanceof Rt){var n=arguments[0];return this.createPolygon(n,null)}}else if(2===arguments.length){var i=arguments[0],r=arguments[1];return new Lt(i,r,this)}},getSRID:function(){return this.SRID},createGeometryCollection:function(){if(0===arguments.length)return new lt(null,this);if(1===arguments.length){return new lt(arguments[0],this)}},createGeometry:function(t){return new Ot(this).edit(t,{edit:function(){if(2===arguments.length){var t=arguments[0];return arguments[1],this.coordinateSequenceFactory.create(t)}}})},getPrecisionModel:function(){return this.precisionModel},createLinearRing:function(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(oo(arguments[0],b)){return new Rt(arguments[0],this)}}},createMultiPolygon:function(){if(0===arguments.length)return new Tt(null,this);if(1===arguments.length){return new Tt(arguments[0],this)}},createMultiPoint:function(){if(0===arguments.length)return new wt(null,this);if(1===arguments.length){if(arguments[0]instanceof Array){return new wt(arguments[0],this)}if(arguments[0]instanceof Array){var t=arguments[0]
;return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(oo(arguments[0],b)){var e=arguments[0];if(null===e)return this.createMultiPoint(new Array(0).fill(null));for(var n=new Array(e.size()).fill(null),i=0;i<e.size();i++){var r=this.getCoordinateSequenceFactory().create(1,e.getDimension());Et.copy(e,i,r,0,1),n[i]=this.createPoint(r)}return this.createMultiPoint(n)}}},interfaces_:function(){return[a]},getClass:function(){return $t}}),$t.toMultiPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},$t.toGeometryArray=function(t){if(null===t)return null;var e=new Array(t.size()).fill(null);return t.toArray(e)},$t.getDefaultCoordinateSequenceFactory=function(){return At.instance()},$t.toMultiLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},$t.toLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},$t.toMultiPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},$t.toLinearRingArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},$t.toPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},$t.toPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},$t.createPointFromInternalCoord=function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)},$t.serialVersionUID=-0x5ea75f2051eeb400;var po={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/};io(te.prototype,{read:function(t){var e,n,i;t=t.replace(/[\n\r]/g," ");var r=po.typeStr.exec(t);if(-1!==t.search("EMPTY")&&(r=po.emptyTypeStr.exec(t),r[2]=void 0),r&&(n=r[1].toLowerCase(),i=r[2],vo[n]&&(e=vo[n].apply(this,[i]))),void 0===e)throw new Error("Could not parse WKT "+t);return e},write:function(t){return this.extractGeometry(t)},extractGeometry:function(t){var e=t.getGeometryType().toLowerCase();if(!mo[e])return null;var n=e.toUpperCase();return t.isEmpty()?n+" EMPTY":n+"("+mo[e].apply(this,[t])+")"}});var mo={coordinate:function(t){return t.x+" "+t.y},point:function(t){return mo.coordinate.call(this,t.coordinates.coordinates[0])},multipoint:function(t){for(var e=[],n=0,i=t.geometries.length;n<i;++n)e.push("("+mo.point.apply(this,[t.geometries[n]])+")");return e.join(",")},linestring:function(t){for(var e=[],n=0,i=t.points.coordinates.length;n<i;++n)e.push(mo.coordinate.apply(this,[t.points.coordinates[n]]));return e.join(",")},linearring:function(t){for(var e=[],n=0,i=t.points.coordinates.length;n<i;++n)e.push(mo.coordinate.apply(this,[t.points.coordinates[n]]));return e.join(",")},multilinestring:function(t){for(var e=[],n=0,i=t.geometries.length;n<i;++n)e.push("("+mo.linestring.apply(this,[t.geometries[n]])+")");return e.join(",")},polygon:function(t){var e=[];e.push("("+mo.linestring.apply(this,[t.shell])+")");for(var n=0,i=t.holes.length;n<i;++n)e.push("("+mo.linestring.apply(this,[t.holes[n]])+")");return e.join(",")},multipolygon:function(t){for(var e=[],n=0,i=t.geometries.length;n<i;++n)e.push("("+mo.polygon.apply(this,[t.geometries[n]])+")");return e.join(",")},geometrycollection:function(t){for(var e=[],n=0,i=t.geometries.length;n<i;++n)e.push(this.extractGeometry(t.geometries[n]));return e.join(",")}},vo={point:function(t){if(void 0===t)return this.geometryFactory.createPoint();var e=t.trim().split(po.spaces);return this.geometryFactory.createPoint(new c(Number.parseFloat(e[0]),Number.parseFloat(e[1])))},multipoint:function(t){if(void 0===t)return this.geometryFactory.createMultiPoint();for(var e,n=t.trim().split(","),i=[],r=0,s=n.length;r<s;++r)e=n[r].replace(po.trimParens,"$1"),i.push(vo.point.apply(this,[e]));return this.geometryFactory.createMultiPoint(i)},linestring:function(t){if(void 0===t)return this.geometryFactory.createLineString();for(var e,n=t.trim().split(","),i=[],r=0,s=n.length;r<s;++r)e=n[r].trim().split(po.spaces),i.push(new c(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLineString(i)},linearring:function(t){if(void 0===t)return this.geometryFactory.createLinearRing();for(var e,n=t.trim().split(","),i=[],r=0,s=n.length;r<s;++r)e=n[r].trim().split(po.spaces),i.push(new c(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLinearRing(i)},multilinestring:function(t){if(void 0===t)return this.geometryFactory.createMultiLineString();for(var e,n=t.trim().split(po.parenComma),i=[],r=0,s=n.length;r<s;++r)e=n[r].replace(po.trimParens,"$1"),i.push(vo.linestring.apply(this,[e]));return this.geometryFactory.createMultiLineString(i)},polygon:function(t){if(void 0===t)return this.geometryFactory.createPolygon();for(var e,n,i,r,s=t.trim().split(po.parenComma),o=[],a=0,u=s.length;a<u;++a)e=s[a].replace(po.trimParens,"$1"),n=vo.linestring.apply(this,[e]),i=this.geometryFactory.createLinearRing(n.points),0===a?r=i:o.push(i);return this.geometryFactory.createPolygon(r,o)},multipolygon:function(t){if(void 0===t)return this.geometryFactory.createMultiPolygon();for(var e,n=t.trim().split(po.doubleParenComma),i=[],r=0,s=n.length;r<s;++r)e=n[r].replace(po.trimParens,"$1"),i.push(vo.polygon.apply(this,[e]));return this.geometryFactory.createMultiPolygon(i)},geometrycollection:function(t){if(void 0===t)return this.geometryFactory.createGeometryCollection();t=t.replace(/,\s*([A-Za-z])/g,"|$1");for(var e=t.trim().split("|"),n=[],i=0,r=e.length;i<r;++i)n.push(this.read(e[i]));return this.geometryFactory.createGeometryCollection(n)}};io(ee.prototype,{write:function(t){return this.parser.write(t)}}),io(ee,{toLineString:function(t,e){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+e.x+" "+e.y+" )"}}),io(ne.prototype,{getIndexAlongSegment:function(t,e){return this.computeIntLineIndex(),this.intLineIndex[t][e]},getTopologySummary:function(){var t=new w;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()},computeIntersection:function(t,e,n,i){this.inputLines[0][0]=t,this.inputLines[0][1]=e,this.inputLines[1][0]=n,this.inputLines[1][1]=i,this.result=this.computeIntersect(t,e,n,i)},getIntersectionNum:function(){return this.result},computeIntLineIndex:function(){if(0===arguments.length)null===this.intLineIndex&&(this.intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){var t=arguments[0],e=this.getEdgeDistance(t,0),n=this.getEdgeDistance(t,1);e>n?(this.intLineIndex[t][0]=0,this.intLineIndex[t][1]=1):(this.intLineIndex[t][0]=1,this.intLineIndex[t][1]=0)}},isProper:function(){return this.hasIntersection()&&this._isProper},setPrecisionModel:function(t){this.precisionModel=t},isInteriorIntersection:function(){if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var t=arguments[0],e=0;e<this.result;e++)if(!this.intPt[e].equals2D(this.inputLines[t][0])&&!this.intPt[e].equals2D(this.inputLines[t][1]))return!0;return!1}},getIntersection:function(t){return this.intPt[t]},isEndPoint:function(){return this.hasIntersection()&&!this._isProper},hasIntersection:function(){return this.result!==ne.NO_INTERSECTION},getEdgeDistance:function(t,e){return ne.computeEdgeDistance(this.intPt[e],this.inputLines[t][0],this.inputLines[t][1])},isCollinear:function(){return this.result===ne.COLLINEAR_INTERSECTION},toString:function(){return ee.toLineString(this.inputLines[0][0],this.inputLines[0][1])+" - "+ee.toLineString(this.inputLines[1][0],this.inputLines[1][1])+this.getTopologySummary()},getEndpoint:function(t,e){return this.inputLines[t][e]},isIntersection:function(t){for(var e=0;e<this.result;e++)if(this.intPt[e].equals2D(t))return!0;return!1},getIntersectionAlongSegment:function(t,e){return this.computeIntLineIndex(),this.intPt[this.intLineIndex[t][e]]},interfaces_:function(){return[]},getClass:function(){return ne}}),ne.computeEdgeDistance=function(t,e,n){var i=Math.abs(n.x-e.x),r=Math.abs(n.y-e.y),s=-1;if(t.equals(e))s=0;else if(t.equals(n))s=i>r?i:r;else{var o=Math.abs(t.x-e.x),a=Math.abs(t.y-e.y);s=i>r?o:a,0!==s||t.equals(e)||(s=Math.max(o,a))}return h.isTrue(!(0===s&&!t.equals(e)),"Bad distance calculation"),s},ne.nonRobustComputeEdgeDistance=function(t,e,n){var i=t.x-e.x,r=t.y-e.y,s=Math.sqrt(i*i+r*r);return h.isTrue(!(0===s&&!t.equals(e)),"Invalid distance calculation"),s},ne.DONT_INTERSECT=0,ne.DO_INTERSECT=1,ne.COLLINEAR=2,ne.NO_INTERSECTION=0,ne.POINT_INTERSECTION=1,ne.COLLINEAR_INTERSECTION=2,ro(ie,ne),io(ie.prototype,{isInSegmentEnvelopes:function(t){var e=new I(this.inputLines[0][0],this.inputLines[0][1]),n=new I(this.inputLines[1][0],this.inputLines[1][1]);return e.contains(t)&&n.contains(t)},computeIntersection:function(){if(3!==arguments.length)return ne.prototype.computeIntersection.apply(this,arguments);var t=arguments[0],e=arguments[1],n=arguments[2];if(this._isProper=!1,I.intersects(e,n,t)&&0===oe.orientationIndex(e,n,t)&&0===oe.orientationIndex(n,e,t))return this._isProper=!0,(t.equals(e)||t.equals(n))&&(this._isProper=!1),this.result=ne.POINT_INTERSECTION,null;this.result=ne.NO_INTERSECTION},normalizeToMinimum:function(t,e,n,i,r){r.x=this.smallestInAbsValue(t.x,e.x,n.x,i.x),r.y=this.smallestInAbsValue(t.y,e.y,n.y,i.y),t.x-=r.x,t.y-=r.y,e.x-=r.x,e.y-=r.y,n.x-=r.x,n.y-=r.y,i.x-=r.x,i.y-=r.y},safeHCoordinateIntersection:function(t,e,n,i){var r=null;try{r=M.intersection(t,e,n,i)}catch(s){if(!(s instanceof C))throw s;r=ie.nearestEndpoint(t,e,n,i)}return r},intersection:function(t,e,n,i){var r=this.intersectionWithNormalization(t,e,n,i);return this.isInSegmentEnvelopes(r)||(r=new c(ie.nearestEndpoint(t,e,n,i))),null!==this.precisionModel&&this.precisionModel.makePrecise(r),r},smallestInAbsValue:function(t,e,n,i){var r=t,s=Math.abs(r);return Math.abs(e)<s&&(r=e,s=Math.abs(e)),Math.abs(n)<s&&(r=n,s=Math.abs(n)),Math.abs(i)<s&&(r=i),r},checkDD:function(t,e,n,i,r){var s=P.intersection(t,e,n,i),o=this.isInSegmentEnvelopes(s);_.out.println("DD in env = "+o+"  --------------------- "+s),r.distance(s)>1e-4&&_.out.println("Distance = "+r.distance(s))},intersectionWithNormalization:function(t,e,n,i){var r=new c(t),s=new c(e),o=new c(n),a=new c(i),u=new c;this.normalizeToEnvCentre(r,s,o,a,u);var l=this.safeHCoordinateIntersection(r,s,o,a);return l.x+=u.x,l.y+=u.y,l},computeCollinearIntersection:function(t,e,n,i){var r=I.intersects(t,e,n),s=I.intersects(t,e,i),o=I.intersects(n,i,t),a=I.intersects(n,i,e);return r&&s?(this.intPt[0]=n,this.intPt[1]=i,ne.COLLINEAR_INTERSECTION):o&&a?(this.intPt[0]=t,this.intPt[1]=e,ne.COLLINEAR_INTERSECTION):r&&o?(this.intPt[0]=n,this.intPt[1]=t,!n.equals(t)||s||a?ne.COLLINEAR_INTERSECTION:ne.POINT_INTERSECTION):r&&a?(this.intPt[0]=n,this.intPt[1]=e,!n.equals(e)||s||o?ne.COLLINEAR_INTERSECTION:ne.POINT_INTERSECTION):s&&o?(this.intPt[0]=i,this.intPt[1]=t,!i.equals(t)||r||a?ne.COLLINEAR_INTERSECTION:ne.POINT_INTERSECTION):s&&a?(this.intPt[0]=i,this.intPt[1]=e,!i.equals(e)||r||o?ne.COLLINEAR_INTERSECTION:ne.POINT_INTERSECTION):ne.NO_INTERSECTION},normalizeToEnvCentre:function(t,e,n,i,r){var s=t.x<e.x?t.x:e.x,o=t.y<e.y?t.y:e.y,a=t.x>e.x?t.x:e.x,u=t.y>e.y?t.y:e.y,l=n.x<i.x?n.x:i.x,h=n.y<i.y?n.y:i.y,c=n.x>i.x?n.x:i.x,f=n.y>i.y?n.y:i.y,g=s>l?s:l,d=a<c?a:c,p=o>h?o:h,m=u<f?u:f,v=(g+d)/2,y=(p+m)/2;r.x=v,r.y=y,t.x-=r.x,t.y-=r.y,e.x-=r.x,e.y-=r.y,n.x-=r.x,n.y-=r.y,i.x-=r.x,i.y-=r.y},computeIntersect:function(t,e,n,i){if(this._isProper=!1,!I.intersects(t,e,n,i))return ne.NO_INTERSECTION;var r=oe.orientationIndex(t,e,n),s=oe.orientationIndex(t,e,i);if(r>0&&s>0||r<0&&s<0)return ne.NO_INTERSECTION;var o=oe.orientationIndex(n,i,t),a=oe.orientationIndex(n,i,e);return o>0&&a>0||o<0&&a<0?ne.NO_INTERSECTION:0===r&&0===s&&0===o&&0===a?this.computeCollinearIntersection(t,e,n,i):(0===r||0===s||0===o||0===a?(this._isProper=!1,t.equals2D(n)||t.equals2D(i)?this.intPt[0]=t:e.equals2D(n)||e.equals2D(i)?this.intPt[0]=e:0===r?this.intPt[0]=new c(n):0===s?this.intPt[0]=new c(i):0===o?this.intPt[0]=new c(t):0===a&&(this.intPt[0]=new c(e))):(this._isProper=!0,this.intPt[0]=this.intersection(t,e,n,i)),ne.POINT_INTERSECTION)},interfaces_:function(){return[]},getClass:function(){return ie}}),ie.nearestEndpoint=function(t,e,n,i){var r=t,s=oe.distancePointLine(t,n,i),o=oe.distancePointLine(e,n,i);return o<s&&(s=o,r=e),o=oe.distancePointLine(n,t,e),o<s&&(s=o,r=n),o=oe.distancePointLine(i,t,e),o<s&&(s=o,r=i),r},io(re.prototype,{interfaces_:function(){return[]},getClass:function(){return re}}),re.orientationIndex=function(t,e,n){var i=e.x-t.x,r=e.y-t.y,s=n.x-e.x,o=n.y-e.y;return re.signOfDet2x2(i,r,s,o)},re.signOfDet2x2=function(t,e,n,i){var r=null,s=null,o=null,a=0;if(r=1,0===t||0===i)return 0===e||0===n?0:e>0?n>0?-r:r:n>0?r:-r;if(0===e||0===n)return i>0?t>0?r:-r:t>0?-r:r;if(0<e?0<i?e<=i||(r=-r,s=t,t=n,n=s,s=e,e=i,i=s):e<=-i?(r=-r,n=-n,i=-i):(s=t,t=-n,n=s,s=e,e=-i,i=s):0<i?-e<=i?(r=-r,t=-t,e=-e):(s=-t,t=n,n=s,s=-e,e=i,i=s):e>=i?(t=-t,e=-e,n=-n,i=-i):(r=-r,s=-t,t=-n,n=s,s=-e,e=-i,i=s),0<t){if(!(0<n))return r;if(!(t<=n))return r}else{if(0<n)return-r;if(!(t>=n))return-r;r=-r,t=-t,n=-n}for(;;){if(a+=1,o=Math.floor(n/t),n-=o*t,(i-=o*e)<0)return-r;if(i>e)return r;if(t>n+n){if(e<i+i)return r}else{if(e>i+i)return-r;n=t-n,i=e-i,r=-r}if(0===i)return 0===n?0:-r;if(0===n)return r;if(o=Math.floor(t/n),t-=o*n,(e-=o*i)<0)return r;if(e>i)return-r;if(n>t+t){if(i<e+e)return-r}else{if(i>e+e)return r;t=n-t,e=i-e,r=-r}if(0===e)return 0===t?0:r;if(0===t)return-r}},io(se.prototype,{countSegment:function(t,e){if(t.x<this.p.x&&e.x<this.p.x)return null;if(this.p.x===e.x&&this.p.y===e.y)return this.isPointOnSegment=!0,null;if(t.y===this.p.y&&e.y===this.p.y){var n=t.x,i=e.x;return n>i&&(n=e.x,i=t.x),this.p.x>=n&&this.p.x<=i&&(this.isPointOnSegment=!0),null}if(t.y>this.p.y&&e.y<=this.p.y||e.y>this.p.y&&t.y<=this.p.y){var r=t.x-this.p.x,s=t.y-this.p.y,o=e.x-this.p.x,a=e.y-this.p.y,u=re.signOfDet2x2(r,s,o,a);if(0===u)return this.isPointOnSegment=!0,null;a<s&&(u=-u),u>0&&this.crossingCount++}},isPointInPolygon:function(){return this.getLocation()!==S.EXTERIOR},getLocation:function(){return this.isPointOnSegment?S.BOUNDARY:this.crossingCount%2==1?S.INTERIOR:S.EXTERIOR},isOnSegment:function(){return this.isPointOnSegment},interfaces_:function(){return[]},getClass:function(){return se}}),se.locatePointInRing=function(){if(arguments[0]instanceof c&&oo(arguments[1],b)){for(var t=arguments[0],e=arguments[1],n=new se(t),i=new c,r=new c,s=1;s<e.size();s++)if(e.getCoordinate(s,i),e.getCoordinate(s-1,r),n.countSegment(i,r),n.isOnSegment())return n.getLocation();return n.getLocation()}if(arguments[0]instanceof c&&arguments[1]instanceof Array){for(var o=arguments[0],a=arguments[1],n=new se(o),s=1;s<a.length;s++){var i=a[s],r=a[s-1];if(n.countSegment(i,r),n.isOnSegment())return n.getLocation()}return n.getLocation()}},io(oe.prototype,{interfaces_:function(){return[]},getClass:function(){return oe}}),oe.orientationIndex=function(t,e,n){return P.orientationIndex(t,e,n)},oe.signedArea=function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var e=0,n=t[0].x,i=1;i<t.length-1;i++){var r=t[i].x-n,s=t[i+1].y;e+=r*(t[i-1].y-s)}return e/2}if(oo(arguments[0],b)){var o=arguments[0],a=o.size();if(a<3)return 0;var u=new c,l=new c,h=new c;o.getCoordinate(0,l),o.getCoordinate(1,h);var n=l.x;h.x-=n;for(var e=0,i=1;i<a-1;i++)u.y=l.y,l.x=h.x,l.y=h.y,o.getCoordinate(i+1,h),h.x-=n,e+=l.x*(u.y-h.y);return e/2}},oe.distanceLineLine=function(t,e,n,i){if(t.equals(e))return oe.distancePointLine(t,n,i);if(n.equals(i))return oe.distancePointLine(i,t,e);var r=!1;if(I.intersects(t,e,n,i)){var s=(e.x-t.x)*(i.y-n.y)-(e.y-t.y)*(i.x-n.x);if(0===s)r=!0;else{var o=(t.y-n.y)*(i.x-n.x)-(t.x-n.x)*(i.y-n.y),a=(t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y),u=a/s,l=o/s;(l<0||l>1||u<0||u>1)&&(r=!0)}}else r=!0;return r?L.min(oe.distancePointLine(t,n,i),oe.distancePointLine(e,n,i),oe.distancePointLine(n,t,e),oe.distancePointLine(i,t,e)):0},oe.isPointInRing=function(t,e){return oe.locatePointInRing(t,e)!==S.EXTERIOR},oe.computeLength=function(t){var e=t.size();if(e<=1)return 0;var n=0,i=new c;t.getCoordinate(0,i);for(var r=i.x,s=i.y,o=1;o<e;o++){t.getCoordinate(o,i);var a=i.x,u=i.y,l=a-r,h=u-s;n+=Math.sqrt(l*l+h*h),r=a,s=u}return n},oe.isCCW=function(t){var e=t.length-1;if(e<3)throw new n("Ring has fewer than 4 points, so orientation cannot be determined");for(var i=t[0],r=0,s=1;s<=e;s++){var o=t[s];o.y>i.y&&(i=o,r=s)}var a=r;do{(a-=1)<0&&(a=e)}while(t[a].equals2D(i)&&a!==r);var u=r;do{u=(u+1)%e}while(t[u].equals2D(i)&&u!==r);var l=t[a],h=t[u];if(l.equals2D(i)||h.equals2D(i)||l.equals2D(h))return!1;var c=oe.computeOrientation(l,i,h);return 0===c?l.x>h.x:c>0},oe.locatePointInRing=function(t,e){return se.locatePointInRing(t,e)},oe.distancePointLinePerpendicular=function(t,e,n){var i=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y),r=((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/i;return Math.abs(r)*Math.sqrt(i)},oe.computeOrientation=function(t,e,n){return oe.orientationIndex(t,e,n)},oe.distancePointLine=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(0===e.length)throw new n("Line array must contain at least one vertex");for(var i=t.distance(e[0]),r=0;r<e.length-1;r++){var s=oe.distancePointLine(t,e[r],e[r+1]);s<i&&(i=s)}return i}if(3===arguments.length){var o=arguments[0],a=arguments[1],u=arguments[2];if(a.x===u.x&&a.y===u.y)return o.distance(a);var l=(u.x-a.x)*(u.x-a.x)+(u.y-a.y)*(u.y-a.y),h=((o.x-a.x)*(u.x-a.x)+(o.y-a.y)*(u.y-a.y))/l;if(h<=0)return o.distance(a);if(h>=1)return o.distance(u);var c=((a.y-o.y)*(u.x-a.x)-(a.x-o.x)*(u.y-a.y))/l;return Math.abs(c)*Math.sqrt(l)}},oe.isOnLine=function(t,e){for(var n=new ie,i=1;i<e.length;i++){var r=e[i-1],s=e[i];if(n.computeIntersection(t,r,s),n.hasIntersection())return!0}return!1},oe.CLOCKWISE=-1,oe.RIGHT=oe.CLOCKWISE,oe.COUNTERCLOCKWISE=1,oe.LEFT=oe.COUNTERCLOCKWISE,oe.COLLINEAR=0,oe.STRAIGHT=oe.COLLINEAR,io(ae.prototype,{minX:function(){return Math.min(this.p0.x,this.p1.x)},orientationIndex:function(){if(arguments[0]instanceof ae){var t=arguments[0],e=oe.orientationIndex(this.p0,this.p1,t.p0),n=oe.orientationIndex(this.p0,this.p1,t.p1);return e>=0&&n>=0?Math.max(e,n):e<=0&&n<=0?Math.max(e,n):0}if(arguments[0]instanceof c){var i=arguments[0];return oe.orientationIndex(this.p0,this.p1,i)}},toGeometry:function(t){return t.createLineString([this.p0,this.p1])},isVertical:function(){return this.p0.x===this.p1.x},equals:function(t){if(!(t instanceof ae))return!1;var e=t;return this.p0.equals(e.p0)&&this.p1.equals(e.p1)},intersection:function(t){var e=new ie;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null},project:function(){if(arguments[0]instanceof c){var t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new c(t);var e=this.projectionFactor(t),n=new c;return n.x=this.p0.x+e*(this.p1.x-this.p0.x),n.y=this.p0.y+e*(this.p1.y-this.p0.y),n}if(arguments[0]instanceof ae){var i=arguments[0],r=this.projectionFactor(i.p0),s=this.projectionFactor(i.p1);if(r>=1&&s>=1)return null;if(r<=0&&s<=0)return null;var o=this.project(i.p0);r<0&&(o=this.p0),r>1&&(o=this.p1);var a=this.project(i.p1);return s<0&&(a=this.p0),s>1&&(a=this.p1),new ae(o,a)}},normalize:function(){this.p1.compareTo(this.p0)<0&&this.reverse()},angle:function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},getCoordinate:function(t){return 0===t?this.p0:this.p1},distancePerpendicular:function(t){return oe.distancePointLinePerpendicular(t,this.p0,this.p1)},minY:function(){return Math.min(this.p0.y,this.p1.y)},midPoint:function(){return ae.midPoint(this.p0,this.p1)},projectionFactor:function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,r=e*e+n*n;return r<=0?i.NaN:((t.x-this.p0.x)*e+(t.y-this.p0.y)*n)/r},closestPoints:function(t){var e=this.intersection(t);if(null!==e)return[e,e];var n=new Array(2).fill(null),r=i.MAX_VALUE,s=null,o=this.closestPoint(t.p0);r=o.distance(t.p0),n[0]=o,n[1]=t.p0;var a=this.closestPoint(t.p1);(s=a.distance(t.p1))<r&&(r=s,n[0]=a,n[1]=t.p1);var u=t.closestPoint(this.p0);(s=u.distance(this.p0))<r&&(r=s,n[0]=this.p0,n[1]=u);var l=t.closestPoint(this.p1);return s=l.distance(this.p1),s<r&&(r=s,n[0]=this.p1,n[1]=l),n},closestPoint:function(t){var e=this.projectionFactor(t);return e>0&&e<1?this.project(t):this.p0.distance(t)<this.p1.distance(t)?this.p0:this.p1},maxX:function(){return Math.max(this.p0.x,this.p1.x)},getLength:function(){return this.p0.distance(this.p1)},compareTo:function(t){var e=t,n=this.p0.compareTo(e.p0);return 0!==n?n:this.p1.compareTo(e.p1)},reverse:function(){var t=this.p0;this.p0=this.p1,this.p1=t},equalsTopo:function(t){return this.p0.equals(t.p0)&&this.p1.equals(t.p1)||this.p0.equals(t.p1)&&this.p1.equals(t.p0)},lineIntersection:function(t){try{return M.intersection(this.p0,this.p1,t.p0,t.p1)}catch(t){if(!(t instanceof C))throw t}return null},maxY:function(){return Math.max(this.p0.y,this.p1.y)},pointAlongOffset:function(t,e){var n=this.p0.x+t*(this.p1.x-this.p0.x),i=this.p0.y+t*(this.p1.y-this.p0.y),r=this.p1.x-this.p0.x,s=this.p1.y-this.p0.y,o=Math.sqrt(r*r+s*s),a=0,u=0;if(0!==e){if(o<=0)throw new IllegalStateException("Cannot compute offset from zero-length line segment");a=e*r/o,u=e*s/o}return new c(n-u,i+a)},setCoordinates:function(){if(1===arguments.length){var t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.p0.x=e.x,this.p0.y=e.y,this.p1.x=n.x,this.p1.y=n.y}},segmentFraction:function(t){var e=this.projectionFactor(t);return e<0?e=0:(e>1||i.isNaN(e))&&(e=1),e},toString:function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},isHorizontal:function(){return this.p0.y===this.p1.y},distance:function(){if(arguments[0]instanceof ae){var t=arguments[0];return oe.distanceLineLine(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof c){var e=arguments[0];return oe.distancePointLine(e,this.p0,this.p1)}},pointAlong:function(t){var e=new c;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e},hashCode:function(){var t=java.lang.Double.doubleToLongBits(this.p0.x);t^=31*java.lang.Double.doubleToLongBits(this.p0.y);var e=Math.trunc(t)^Math.trunc(t>>32),n=java.lang.Double.doubleToLongBits(this.p1.x);return n^=31*java.lang.Double.doubleToLongBits(this.p1.y),e^Math.trunc(n)^Math.trunc(n>>32)},interfaces_:function(){return[r,a]},getClass:function(){return ae}}),ae.midPoint=function(t,e){return new c((t.x+e.x)/2,(t.y+e.y)/2)},ae.serialVersionUID=0x2d2172135f411c00,io(ue.prototype,{isIntersects:function(){return!this.isDisjoint()},isCovers:function(){return(ue.isTrue(this.matrix[S.INTERIOR][S.INTERIOR])||ue.isTrue(this.matrix[S.INTERIOR][S.BOUNDARY])||ue.isTrue(this.matrix[S.BOUNDARY][S.INTERIOR])||ue.isTrue(this.matrix[S.BOUNDARY][S.BOUNDARY]))&&this.matrix[S.EXTERIOR][S.INTERIOR]===ot.FALSE&&this.matrix[S.EXTERIOR][S.BOUNDARY]===ot.FALSE},isCoveredBy:function(){return(ue.isTrue(this.matrix[S.INTERIOR][S.INTERIOR])||ue.isTrue(this.matrix[S.INTERIOR][S.BOUNDARY])||ue.isTrue(this.matrix[S.BOUNDARY][S.INTERIOR])||ue.isTrue(this.matrix[S.BOUNDARY][S.BOUNDARY]))&&this.matrix[S.INTERIOR][S.EXTERIOR]===ot.FALSE&&this.matrix[S.BOUNDARY][S.EXTERIOR]===ot.FALSE},set:function(){if(1===arguments.length)for(var t=arguments[0],e=0;e<t.length;e++){var n=Math.trunc(e/3),i=e%3;this.matrix[n][i]=ot.toDimensionValue(t.charAt(e))}else if(3===arguments.length){var r=arguments[0],s=arguments[1],o=arguments[2];this.matrix[r][s]=o}},isContains:function(){return ue.isTrue(this.matrix[S.INTERIOR][S.INTERIOR])&&this.matrix[S.EXTERIOR][S.INTERIOR]===ot.FALSE&&this.matrix[S.EXTERIOR][S.BOUNDARY]===ot.FALSE},setAtLeast:function(){if(1===arguments.length)for(var t=arguments[0],e=0;e<t.length;e++){var n=Math.trunc(e/3),i=e%3;this.setAtLeast(n,i,ot.toDimensionValue(t.charAt(e)))}else if(3===arguments.length){var r=arguments[0],s=arguments[1],o=arguments[2];this.matrix[r][s]<o&&(this.matrix[r][s]=o)}},setAtLeastIfValid:function(t,e,n){t>=0&&e>=0&&this.setAtLeast(t,e,n)},isWithin:function(){return ue.isTrue(this.matrix[S.INTERIOR][S.INTERIOR])&&this.matrix[S.INTERIOR][S.EXTERIOR]===ot.FALSE&&this.matrix[S.BOUNDARY][S.EXTERIOR]===ot.FALSE},isTouches:function(t,e){return t>e?this.isTouches(e,t):(t===ot.A&&e===ot.A||t===ot.L&&e===ot.L||t===ot.L&&e===ot.A||t===ot.P&&e===ot.A||t===ot.P&&e===ot.L)&&(this.matrix[S.INTERIOR][S.INTERIOR]===ot.FALSE&&(ue.isTrue(this.matrix[S.INTERIOR][S.BOUNDARY])||ue.isTrue(this.matrix[S.BOUNDARY][S.INTERIOR])||ue.isTrue(this.matrix[S.BOUNDARY][S.BOUNDARY])))},isOverlaps:function(t,e){return t===ot.P&&e===ot.P||t===ot.A&&e===ot.A?ue.isTrue(this.matrix[S.INTERIOR][S.INTERIOR])&&ue.isTrue(this.matrix[S.INTERIOR][S.EXTERIOR])&&ue.isTrue(this.matrix[S.EXTERIOR][S.INTERIOR]):t===ot.L&&e===ot.L&&(1===this.matrix[S.INTERIOR][S.INTERIOR]&&ue.isTrue(this.matrix[S.INTERIOR][S.EXTERIOR])&&ue.isTrue(this.matrix[S.EXTERIOR][S.INTERIOR]))},isEquals:function(t,e){return t===e&&(ue.isTrue(this.matrix[S.INTERIOR][S.INTERIOR])&&this.matrix[S.INTERIOR][S.EXTERIOR]===ot.FALSE&&this.matrix[S.BOUNDARY][S.EXTERIOR]===ot.FALSE&&this.matrix[S.EXTERIOR][S.INTERIOR]===ot.FALSE&&this.matrix[S.EXTERIOR][S.BOUNDARY]===ot.FALSE)},toString:function(){for(var t=new w("123456789"),e=0;e<3;e++)for(var n=0;n<3;n++)t.setCharAt(3*e+n,ot.toDimensionSymbol(this.matrix[e][n]));return t.toString()},setAll:function(t){for(var e=0;e<3;e++)for(var n=0;n<3;n++)this.matrix[e][n]=t},get:function(t,e){return this.matrix[t][e]},transpose:function(){var t=this.matrix[1][0];return this.matrix[1][0]=this.matrix[0][1],this.matrix[0][1]=t,t=this.matrix[2][0],this.matrix[2][0]=this.matrix[0][2],this.matrix[0][2]=t,t=this.matrix[2][1],this.matrix[2][1]=this.matrix[1][2],this.matrix[1][2]=t,this},matches:function(t){if(9!==t.length)throw new n("Should be length 9: "+t);for(var e=0;e<3;e++)for(var i=0;i<3;i++)if(!ue.matches(this.matrix[e][i],t.charAt(3*e+i)))return!1;return!0},add:function(t){for(var e=0;e<3;e++)for(var n=0;n<3;n++)this.setAtLeast(e,n,t.get(e,n))},isDisjoint:function(){return this.matrix[S.INTERIOR][S.INTERIOR]===ot.FALSE&&this.matrix[S.INTERIOR][S.BOUNDARY]===ot.FALSE&&this.matrix[S.BOUNDARY][S.INTERIOR]===ot.FALSE&&this.matrix[S.BOUNDARY][S.BOUNDARY]===ot.FALSE},isCrosses:function(t,e){return t===ot.P&&e===ot.L||t===ot.P&&e===ot.A||t===ot.L&&e===ot.A?ue.isTrue(this.matrix[S.INTERIOR][S.INTERIOR])&&ue.isTrue(this.matrix[S.INTERIOR][S.EXTERIOR]):t===ot.L&&e===ot.P||t===ot.A&&e===ot.P||t===ot.A&&e===ot.L?ue.isTrue(this.matrix[S.INTERIOR][S.INTERIOR])&&ue.isTrue(this.matrix[S.EXTERIOR][S.INTERIOR]):t===ot.L&&e===ot.L&&0===this.matrix[S.INTERIOR][S.INTERIOR]},interfaces_:function(){return[s]},getClass:function(){return ue}}),ue.matches=function(){if(Number.isInteger(arguments[0])&&"string"==typeof arguments[1]){var t=arguments[0],e=arguments[1];return e===ot.SYM_DONTCARE||(e===ot.SYM_TRUE&&(t>=0||t===ot.TRUE)||(e===ot.SYM_FALSE&&t===ot.FALSE||(e===ot.SYM_P&&t===ot.P||(e===ot.SYM_L&&t===ot.L||e===ot.SYM_A&&t===ot.A))))}if("string"==typeof arguments[0]&&"string"==typeof arguments[1]){var n=arguments[0],i=arguments[1];return new ue(n).matches(i)}},ue.isTrue=function(t){return t>=0||t===ot.TRUE};var yo=Object.freeze({Coordinate:c,CoordinateList:E,Envelope:I,LineSegment:ae,GeometryFactory:$t,Geometry:F,Point:Ct,LineString:It,LinearRing:Rt,Polygon:Lt,GeometryCollection:lt,MultiPoint:wt,MultiLineString:ht,MultiPolygon:Tt,Dimension:ot,IntersectionMatrix:ue,PrecisionModel:Qt});io(le.prototype,{addPoint:function(t){this.ptCount+=1,this.ptCentSum.x+=t.x,this.ptCentSum.y+=t.y},setBasePoint:function(t){null===this.areaBasePt&&(this.areaBasePt=t)},addLineSegments:function(t){for(var e=0,n=0;n<t.length-1;n++){var i=t[n].distance(t[n+1]);if(0!==i){e+=i;var r=(t[n].x+t[n+1].x)/2;this.lineCentSum.x+=i*r;var s=(t[n].y+t[n+1].y)/2;this.lineCentSum.y+=i*s}}this.totalLength+=e,0===e&&t.length>0&&this.addPoint(t[0])},addHole:function(t){for(var e=oe.isCCW(t),n=0;n<t.length-1;n++)this.addTriangle(this.areaBasePt,t[n],t[n+1],e);this.addLineSegments(t)},getCentroid:function(){var t=new c;if(Math.abs(this.areasum2)>0)t.x=this.cg3.x/3/this.areasum2,t.y=this.cg3.y/3/this.areasum2;else if(this.totalLength>0)t.x=this.lineCentSum.x/this.totalLength,t.y=this.lineCentSum.y/this.totalLength;else{if(!(this.ptCount>0))return null;t.x=this.ptCentSum.x/this.ptCount,t.y=this.ptCentSum.y/this.ptCount}return t},addShell:function(t){t.length>0&&this.setBasePoint(t[0]);for(var e=!oe.isCCW(t),n=0;n<t.length-1;n++)this.addTriangle(this.areaBasePt,t[n],t[n+1],e);this.addLineSegments(t)},addTriangle:function(t,e,n,i){var r=i?1:-1;le.centroid3(t,e,n,this.triangleCent3);var s=le.area2(t,e,n);this.cg3.x+=r*s*this.triangleCent3.x,this.cg3.y+=r*s*this.triangleCent3.y,this.areasum2+=r*s},add:function(){if(arguments[0]instanceof Lt){var t=arguments[0];this.addShell(t.getExteriorRing().getCoordinates());for(var e=0;e<t.getNumInteriorRing();e++)this.addHole(t.getInteriorRingN(e).getCoordinates())}else if(arguments[0]instanceof F){var n=arguments[0];if(n.isEmpty())return null;if(n instanceof Ct)this.addPoint(n.getCoordinate());else if(n instanceof It)this.addLineSegments(n.getCoordinates());else if(n instanceof Lt){var i=n;this.add(i)}else if(n instanceof lt)for(var r=n,e=0;e<r.getNumGeometries();e++)this.add(r.getGeometryN(e))}},interfaces_:function(){return[]},getClass:function(){return le}}),le.area2=function(t,e,n){return(e.x-t.x)*(n.y-t.y)-(n.x-t.x)*(e.y-t.y)},le.centroid3=function(t,e,n,i){return i.x=t.x+e.x+n.x,i.y=t.y+e.y+n.y,null},le.getCentroid=function(t){return new le(t).getCentroid()},he.prototype=new Error,he.prototype.name="EmptyStackException",ce.prototype=new m,ce.prototype.add=function(t){return this.array_.push(t),!0},ce.prototype.get=function(t){if(t<0||t>=this.size())throw new IndexOutOfBoundsException;return this.array_[t]},ce.prototype.push=function(t){return this.array_.push(t),t},ce.prototype.pop=function(t){if(0===this.array_.length)throw new he;return this.array_.pop()},ce.prototype.peek=function(){if(0===this.array_.length)throw new he;return this.array_[this.array_.length-1]},ce.prototype.empty=function(){return 0===this.array_.length},ce.prototype.isEmpty=function(){return this.empty()},ce.prototype.search=function(t){return this.array_.indexOf(t)},ce.prototype.size=function(){return this.array_.length},ce.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},io(fe.prototype,{filter:function(t){this.treeSet.contains(t)||(this.list.add(t),this.treeSet.add(t))},getCoordinates:function(){var t=new Array(this.list.size()).fill(null);return this.list.toArray(t)},interfaces_:function(){return[G]},getClass:function(){return fe}}),fe.filterCoordinates=function(t){for(var e=new fe,n=0;n<t.length;n++)e.filter(t[n]);return e.getCoordinates()},io(ge.prototype,{preSort:function(t){for(var e=null,n=1;n<t.length;n++)(t[n].y<t[0].y||t[n].y===t[0].y&&t[n].x<t[0].x)&&(e=t[0],t[0]=t[n],t[n]=e);return st.sort(t,1,t.length,new de(t[0])),t},computeOctRing:function(t){var e=this.computeOctPts(t),n=new E;return n.add(e,!1),n.size()<3?null:(n.closeRing(),n.toCoordinateArray())},lineOrPolygon:function(t){if(t=this.cleanRing(t),3===t.length)return this.geomFactory.createLineString([t[0],t[1]]);var e=this.geomFactory.createLinearRing(t);return this.geomFactory.createPolygon(e,null)},cleanRing:function(t){h.equals(t[0],t[t.length-1]);for(var e=new x,n=null,i=0;i<=t.length-2;i++){var r=t[i],s=t[i+1];r.equals(s)||(null!==n&&this.isBetween(n,r,s)||(e.add(r),n=r))}e.add(t[t.length-1]);var o=new Array(e.size()).fill(null);return e.toArray(o)},isBetween:function(t,e,n){if(0!==oe.computeOrientation(t,e,n))return!1;if(t.x!==n.x){
if(t.x<=e.x&&e.x<=n.x)return!0;if(n.x<=e.x&&e.x<=t.x)return!0}if(t.y!==n.y){if(t.y<=e.y&&e.y<=n.y)return!0;if(n.y<=e.y&&e.y<=t.y)return!0}return!1},reduce:function(t){var e=this.computeOctRing(t);if(null===e)return t;for(var n=new rt,i=0;i<e.length;i++)n.add(e[i]);for(var i=0;i<t.length;i++)oe.isPointInRing(t[i],e)||n.add(t[i]);var r=Y.toCoordinateArray(n);return r.length<3?this.padArray3(r):r},getConvexHull:function(){if(0===this.inputPts.length)return this.geomFactory.createGeometryCollection(null);if(1===this.inputPts.length)return this.geomFactory.createPoint(this.inputPts[0]);if(2===this.inputPts.length)return this.geomFactory.createLineString(this.inputPts);var t=this.inputPts;this.inputPts.length>50&&(t=this.reduce(this.inputPts));var e=this.preSort(t),n=this.grahamScan(e),i=this.toCoordinateArray(n);return this.lineOrPolygon(i)},padArray3:function(t){for(var e=new Array(3).fill(null),n=0;n<e.length;n++)n<t.length?e[n]=t[n]:e[n]=t[0];return e},computeOctPts:function(t){for(var e=new Array(8).fill(null),n=0;n<e.length;n++)e[n]=t[0];for(var i=1;i<t.length;i++)t[i].x<e[0].x&&(e[0]=t[i]),t[i].x-t[i].y<e[1].x-e[1].y&&(e[1]=t[i]),t[i].y>e[2].y&&(e[2]=t[i]),t[i].x+t[i].y>e[3].x+e[3].y&&(e[3]=t[i]),t[i].x>e[4].x&&(e[4]=t[i]),t[i].x-t[i].y>e[5].x-e[5].y&&(e[5]=t[i]),t[i].y<e[6].y&&(e[6]=t[i]),t[i].x+t[i].y<e[7].x+e[7].y&&(e[7]=t[i]);return e},toCoordinateArray:function(t){for(var e=new Array(t.size()).fill(null),n=0;n<t.size();n++){var i=t.get(n);e[n]=i}return e},grahamScan:function(t){var e=null,n=new ce;e=n.push(t[0]),e=n.push(t[1]),e=n.push(t[2]);for(var i=3;i<t.length;i++){for(e=n.pop();!n.empty()&&oe.computeOrientation(n.peek(),e,t[i])>0;)e=n.pop();e=n.push(e),e=n.push(t[i])}return e=n.push(t[0]),n},interfaces_:function(){return[]},getClass:function(){return ge}}),ge.extractCoordinates=function(t){var e=new fe;return t.apply(e),e.getCoordinates()},io(de.prototype,{compare:function(t,e){var n=t,i=e;return de.polarCompare(this.origin,n,i)},interfaces_:function(){return[o]},getClass:function(){return de}}),de.polarCompare=function(t,e,n){var i=e.x-t.x,r=e.y-t.y,s=n.x-t.x,o=n.y-t.y,a=oe.computeOrientation(t,e,n);if(a===oe.COUNTERCLOCKWISE)return 1;if(a===oe.CLOCKWISE)return-1;var u=i*i+r*r,l=s*s+o*o;return u<l?-1:u>l?1:0},ge.RadialComparator=de,io(pe.prototype,{transformPoint:function(t,e){return this.factory.createPoint(this.transformCoordinates(t.getCoordinateSequence(),t))},transformPolygon:function(t,e){var n=!0,i=this.transformLinearRing(t.getExteriorRing(),t);null!==i&&i instanceof Rt&&!i.isEmpty()||(n=!1);for(var r=new x,s=0;s<t.getNumInteriorRing();s++){var o=this.transformLinearRing(t.getInteriorRingN(s),t);null===o||o.isEmpty()||(o instanceof Rt||(n=!1),r.add(o))}if(n)return this.factory.createPolygon(i,r.toArray([]));var a=new x;return null!==i&&a.add(i),a.addAll(r),this.factory.buildGeometry(a)},createCoordinateSequence:function(t){return this.factory.getCoordinateSequenceFactory().create(t)},getInputGeometry:function(){return this.inputGeom},transformMultiLineString:function(t,e){for(var n=new x,i=0;i<t.getNumGeometries();i++){var r=this.transformLineString(t.getGeometryN(i),t);null!==r&&(r.isEmpty()||n.add(r))}return this.factory.buildGeometry(n)},transformCoordinates:function(t,e){return this.copy(t)},transformLineString:function(t,e){return this.factory.createLineString(this.transformCoordinates(t.getCoordinateSequence(),t))},transformMultiPoint:function(t,e){for(var n=new x,i=0;i<t.getNumGeometries();i++){var r=this.transformPoint(t.getGeometryN(i),t);null!==r&&(r.isEmpty()||n.add(r))}return this.factory.buildGeometry(n)},transformMultiPolygon:function(t,e){for(var n=new x,i=0;i<t.getNumGeometries();i++){var r=this.transformPolygon(t.getGeometryN(i),t);null!==r&&(r.isEmpty()||n.add(r))}return this.factory.buildGeometry(n)},copy:function(t){return t.copy()},transformGeometryCollection:function(t,e){for(var n=new x,i=0;i<t.getNumGeometries();i++){var r=this.transform(t.getGeometryN(i));null!==r&&(this.pruneEmptyGeometry&&r.isEmpty()||n.add(r))}return this.preserveGeometryCollectionType?this.factory.createGeometryCollection($t.toGeometryArray(n)):this.factory.buildGeometry(n)},transform:function(t){if(this.inputGeom=t,this.factory=t.getFactory(),t instanceof Ct)return this.transformPoint(t,null);if(t instanceof wt)return this.transformMultiPoint(t,null);if(t instanceof Rt)return this.transformLinearRing(t,null);if(t instanceof It)return this.transformLineString(t,null);if(t instanceof ht)return this.transformMultiLineString(t,null);if(t instanceof Lt)return this.transformPolygon(t,null);if(t instanceof Tt)return this.transformMultiPolygon(t,null);if(t instanceof lt)return this.transformGeometryCollection(t,null);throw new n("Unknown Geometry subtype: "+t.getClass().getName())},transformLinearRing:function(t,e){var n=this.transformCoordinates(t.getCoordinateSequence(),t);if(null===n)return this.factory.createLinearRing(null);var i=n.size();return i>0&&i<4&&!this.preserveType?this.factory.createLineString(n):this.factory.createLinearRing(n)},interfaces_:function(){return[]},getClass:function(){return pe}}),io(me.prototype,{snapVertices:function(t,e){for(var n=this._isClosed?t.size()-1:t.size(),i=0;i<n;i++){var r=t.get(i),s=this.findSnapForVertex(r,e);null!==s&&(t.set(i,new c(s)),0===i&&this._isClosed&&t.set(t.size()-1,new c(s)))}},findSnapForVertex:function(t,e){for(var n=0;n<e.length;n++){if(t.equals2D(e[n]))return null;if(t.distance(e[n])<this.snapTolerance)return e[n]}return null},snapTo:function(t){var e=new E(this.srcPts);return this.snapVertices(e,t),this.snapSegments(e,t),e.toCoordinateArray()},snapSegments:function(t,e){if(0===e.length)return null;var n=e.length;e[0].equals2D(e[e.length-1])&&(n=e.length-1);for(var i=0;i<n;i++){var r=e[i],s=this.findSegmentIndexToSnap(r,t);s>=0&&t.add(s+1,new c(r),!1)}},findSegmentIndexToSnap:function(t,e){for(var n=i.MAX_VALUE,r=-1,s=0;s<e.size()-1;s++){if(this.seg.p0=e.get(s),this.seg.p1=e.get(s+1),this.seg.p0.equals2D(t)||this.seg.p1.equals2D(t)){if(this.allowSnappingToSourceVertices)continue;return-1}var o=this.seg.distance(t);o<this.snapTolerance&&o<n&&(n=o,r=s)}return r},setAllowSnappingToSourceVertices:function(t){this.allowSnappingToSourceVertices=t},interfaces_:function(){return[]},getClass:function(){return me}}),me.isClosed=function(t){return!(t.length<=1)&&t[0].equals2D(t[t.length-1])},io(ve.prototype,{snapTo:function(t,e){return new ye(e,this.extractTargetCoordinates(t)).transform(this.srcGeom)},snapToSelf:function(t,e){var n=this.extractTargetCoordinates(this.srcGeom),i=new ye(t,n,!0),r=i.transform(this.srcGeom),s=r;return e&&oo(s,St)&&(s=r.buffer(0)),s},computeSnapTolerance:function(t){return this.computeMinimumSegmentLength(t)/10},extractTargetCoordinates:function(t){for(var e=new rt,n=t.getCoordinates(),i=0;i<n.length;i++)e.add(n[i]);return e.toArray(new Array(0).fill(null))},computeMinimumSegmentLength:function(t){for(var e=i.MAX_VALUE,n=0;n<t.length-1;n++){var r=t[n].distance(t[n+1]);r<e&&(e=r)}return e},interfaces_:function(){return[]},getClass:function(){return ve}}),ve.snap=function(t,e,n){var i=new Array(2).fill(null),r=new ve(t);i[0]=r.snapTo(e,n);var s=new ve(e);return i[1]=s.snapTo(i[0],n),i},ve.computeOverlaySnapTolerance=function(){if(1===arguments.length){var t=arguments[0],e=ve.computeSizeBasedSnapTolerance(t),n=t.getPrecisionModel();if(n.getType()===Qt.FIXED){var i=1/n.getScale()*2/1.415;i>e&&(e=i)}return e}if(2===arguments.length){var r=arguments[0],s=arguments[1];return Math.min(ve.computeOverlaySnapTolerance(r),ve.computeOverlaySnapTolerance(s))}},ve.computeSizeBasedSnapTolerance=function(t){var e=t.getEnvelopeInternal();return Math.min(e.getHeight(),e.getWidth())*ve.SNAP_PRECISION_FACTOR},ve.snapToSelf=function(t,e,n){return new ve(t).snapToSelf(e,n)},ve.SNAP_PRECISION_FACTOR=1e-9,ro(ye,pe),io(ye.prototype,{snapLine:function(t,e){var n=new me(t,this.snapTolerance);return n.setAllowSnappingToSourceVertices(this.isSelfSnap),n.snapTo(e)},transformCoordinates:function(t,e){var n=t.toCoordinateArray(),i=this.snapLine(n,this.snapPts);return this.factory.getCoordinateSequenceFactory().create(i)},interfaces_:function(){return[]},getClass:function(){return ye}}),io(xe.prototype,{getCommon:function(){return i.longBitsToDouble(this.commonBits)},add:function(t){var e=i.doubleToLongBits(t);return this.isFirst?(this.commonBits=e,this.commonSignExp=xe.signExpBits(this.commonBits),this.isFirst=!1,null):xe.signExpBits(e)!==this.commonSignExp?(this.commonBits=0,null):(this.commonMantissaBitsCount=xe.numCommonMostSigMantissaBits(this.commonBits,e),void(this.commonBits=xe.zeroLowerBits(this.commonBits,64-(12+this.commonMantissaBitsCount))))},toString:function(){if(1===arguments.length){var t=arguments[0],e=i.longBitsToDouble(t),n=Long.toBinaryString(t),r="0000000000000000000000000000000000000000000000000000000000000000"+n,s=r.substring(r.length-64);return s.substring(0,1)+"  "+s.substring(1,12)+"(exp) "+s.substring(12)+" [ "+e+" ]"}},interfaces_:function(){return[]},getClass:function(){return xe}}),xe.getBit=function(t,e){return 0!=(t&1<<e)?1:0},xe.signExpBits=function(t){return t>>52},xe.zeroLowerBits=function(t,e){return t&~((1<<e)-1)},xe.numCommonMostSigMantissaBits=function(t,e){for(var n=0,i=52;i>=0;i--){if(xe.getBit(t,i)!==xe.getBit(e,i))return n;n++}return 52},io(Ee.prototype,{addCommonBits:function(t){var e=new Ne(this.commonCoord);t.apply(e),t.geometryChanged()},removeCommonBits:function(t){if(0===this.commonCoord.x&&0===this.commonCoord.y)return t;var e=new c(this.commonCoord);e.x=-e.x,e.y=-e.y;var n=new Ne(e);return t.apply(n),t.geometryChanged(),t},getCommonCoordinate:function(){return this.commonCoord},add:function(t){t.apply(this.ccFilter),this.commonCoord=this.ccFilter.getCommonCoordinate()},interfaces_:function(){return[]},getClass:function(){return Ee}}),io(Ie.prototype,{filter:function(t){this.commonBitsX.add(t.x),this.commonBitsY.add(t.y)},getCommonCoordinate:function(){return new c(this.commonBitsX.getCommon(),this.commonBitsY.getCommon())},interfaces_:function(){return[G]},getClass:function(){return Ie}}),io(Ne.prototype,{filter:function(t,e){var n=t.getOrdinate(e,0)+this.trans.x,i=t.getOrdinate(e,1)+this.trans.y;t.setOrdinate(e,0,n),t.setOrdinate(e,1,i)},isDone:function(){return!1},isGeometryChanged:function(){return!0},interfaces_:function(){return[ut]},getClass:function(){return Ne}}),Ee.CommonCoordinateFilter=Ie,Ee.Translater=Ne,io(Ce.prototype,{next:function(){if(this.atStart)return this.atStart=!1,Ce.isAtomic(this.parent)&&this.index++,this.parent;if(null!==this.subcollectionIterator){if(this.subcollectionIterator.hasNext())return this.subcollectionIterator.next();this.subcollectionIterator=null}if(this.index>=this.max)throw new v;var t=this.parent.getGeometryN(this.index++);return t instanceof lt?(this.subcollectionIterator=new Ce(t),this.subcollectionIterator.next()):t},remove:function(){throw new UnsupportedOperationException(this.getClass().getName())},hasNext:function(){if(this.atStart)return!0;if(null!==this.subcollectionIterator){if(this.subcollectionIterator.hasNext())return!0;this.subcollectionIterator=null}return!(this.index>=this.max)},interfaces_:function(){return[g]},getClass:function(){return Ce}}),Ce.isAtomic=function(t){return!(t instanceof lt)},io(Se.prototype,{locateInternal:function(){if(arguments[0]instanceof c&&arguments[1]instanceof Lt){var t=arguments[0],e=arguments[1];if(e.isEmpty())return S.EXTERIOR;var n=e.getExteriorRing(),i=this.locateInPolygonRing(t,n);if(i===S.EXTERIOR)return S.EXTERIOR;if(i===S.BOUNDARY)return S.BOUNDARY;for(var r=0;r<e.getNumInteriorRing();r++){var s=e.getInteriorRingN(r),o=this.locateInPolygonRing(t,s);if(o===S.INTERIOR)return S.EXTERIOR;if(o===S.BOUNDARY)return S.BOUNDARY}return S.INTERIOR}if(arguments[0]instanceof c&&arguments[1]instanceof It){var a=arguments[0],u=arguments[1];if(!u.getEnvelopeInternal().intersects(a))return S.EXTERIOR;var l=u.getCoordinates();return u.isClosed()||!a.equals(l[0])&&!a.equals(l[l.length-1])?oe.isOnLine(a,l)?S.INTERIOR:S.EXTERIOR:S.BOUNDARY}if(arguments[0]instanceof c&&arguments[1]instanceof Ct){var h=arguments[0];return arguments[1].getCoordinate().equals2D(h)?S.INTERIOR:S.EXTERIOR}},locateInPolygonRing:function(t,e){return e.getEnvelopeInternal().intersects(t)?oe.locatePointInRing(t,e.getCoordinates()):S.EXTERIOR},intersects:function(t,e){return this.locate(t,e)!==S.EXTERIOR},updateLocationInfo:function(t){t===S.INTERIOR&&(this.isIn=!0),t===S.BOUNDARY&&this.numBoundaries++},computeLocation:function(t,e){if(e instanceof Ct&&this.updateLocationInfo(this.locateInternal(t,e)),e instanceof It)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof Lt)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof ht)for(var n=e,i=0;i<n.getNumGeometries();i++){var r=n.getGeometryN(i);this.updateLocationInfo(this.locateInternal(t,r))}else if(e instanceof Tt)for(var s=e,i=0;i<s.getNumGeometries();i++){var o=s.getGeometryN(i);this.updateLocationInfo(this.locateInternal(t,o))}else if(e instanceof lt)for(var a=new Ce(e);a.hasNext();){var u=a.next();u!==e&&this.computeLocation(t,u)}},locate:function(t,e){return e.isEmpty()?S.EXTERIOR:e instanceof It?this.locateInternal(t,e):e instanceof Lt?this.locateInternal(t,e):(this.isIn=!1,this.numBoundaries=0,this.computeLocation(t,e),this.boundaryRule.isInBoundary(this.numBoundaries)?S.BOUNDARY:this.numBoundaries>0||this.isIn?S.INTERIOR:S.EXTERIOR)},interfaces_:function(){return[]},getClass:function(){return Se}}),io(Le.prototype,{interfaces_:function(){return[]},getClass:function(){return Le}}),Le.octant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new n("Cannot compute the octant for point ( "+t+", "+e+" )");var i=Math.abs(t),r=Math.abs(e);return t>=0?e>=0?i>=r?0:1:i>=r?7:6:e>=0?i>=r?3:2:i>=r?4:5}if(arguments[0]instanceof c&&arguments[1]instanceof c){var s=arguments[0],o=arguments[1],a=o.x-s.x,u=o.y-s.y;if(0===a&&0===u)throw new n("Cannot compute the octant for two identical points "+s);return Le.octant(a,u)}},io(we.prototype,{getCoordinates:function(){},size:function(){},getCoordinate:function(t){},isClosed:function(){},setData:function(t){},getData:function(){},interfaces_:function(){return[]},getClass:function(){return we}}),io(Re.prototype,{getCoordinates:function(){return this.pts},size:function(){return this.pts.length},getCoordinate:function(t){return this.pts[t]},isClosed:function(){return this.pts[0].equals(this.pts[this.pts.length-1])},getSegmentOctant:function(t){return t===this.pts.length-1?-1:Le.octant(this.getCoordinate(t),this.getCoordinate(t+1))},setData:function(t){this.data=t},getData:function(){return this.data},toString:function(){return ee.toLineString(new Dt(this.pts))},interfaces_:function(){return[we]},getClass:function(){return Re}}),io(Te.prototype,{getBounds:function(){},interfaces_:function(){return[]},getClass:function(){return Te}}),io(Oe.prototype,{getItem:function(){return this.item},getBounds:function(){return this.bounds},interfaces_:function(){return[Te,a]},getClass:function(){return Oe}}),io(Pe.prototype,{poll:function(){if(this.isEmpty())return null;var t=this.items.get(1);return this.items.set(1,this.items.get(this._size)),this._size-=1,this.reorder(1),t},size:function(){return this._size},reorder:function(t){for(var e=null,n=this.items.get(t);2*t<=this._size&&(e=2*t,e!==this._size&&this.items.get(e+1).compareTo(this.items.get(e))<0&&e++,this.items.get(e).compareTo(n)<0);t=e)this.items.set(t,this.items.get(e));this.items.set(t,n)},clear:function(){this._size=0,this.items.clear()},isEmpty:function(){return 0===this._size},add:function(t){this.items.add(null),this._size+=1;var e=this._size;for(this.items.set(0,t);t.compareTo(this.items.get(Math.trunc(e/2)))<0;e/=2)this.items.set(e,this.items.get(Math.trunc(e/2)));this.items.set(e,t)},interfaces_:function(){return[]},getClass:function(){return Pe}}),io(be.prototype,{visitItem:function(t){},interfaces_:function(){return[]},getClass:function(){return be}}),io(_e.prototype,{insert:function(t,e){},remove:function(t,e){},query:function(){if(1===arguments.length){arguments[0]}else if(2===arguments.length){arguments[0],arguments[1]}},interfaces_:function(){return[]},getClass:function(){return _e}}),io(Me.prototype,{getLevel:function(){return this.level},size:function(){return this.childBoundables.size()},getChildBoundables:function(){return this.childBoundables},addChildBoundable:function(t){h.isTrue(null===this.bounds),this.childBoundables.add(t)},isEmpty:function(){return this.childBoundables.isEmpty()},getBounds:function(){return null===this.bounds&&(this.bounds=this.computeBounds()),this.bounds},interfaces_:function(){return[Te,a]},getClass:function(){return Me}}),Me.serialVersionUID=0x5a1e55ec41369800;var xo={reverseOrder:function(){return{compare:function(t,e){return e.compareTo(t)}}},min:function(t){return xo.sort(t),t.get(0)},sort:function(t,e){var n=t.toArray();e?st.sort(n,e):st.sort(n);for(var i=t.iterator(),r=0,s=n.length;r<s;r++)i.next(),i.set(n[r])},singletonList:function(t){var e=new x;return e.add(t),e}};io(De.prototype,{expandToQueue:function(t,e){var i=De.isComposite(this.boundable1),r=De.isComposite(this.boundable2);if(i&&r)return De.area(this.boundable1)>De.area(this.boundable2)?(this.expand(this.boundable1,this.boundable2,t,e),null):(this.expand(this.boundable2,this.boundable1,t,e),null);if(i)return this.expand(this.boundable1,this.boundable2,t,e),null;if(r)return this.expand(this.boundable2,this.boundable1,t,e),null;throw new n("neither boundable is composite")},isLeaves:function(){return!(De.isComposite(this.boundable1)||De.isComposite(this.boundable2))},compareTo:function(t){var e=t;return this._distance<e._distance?-1:this._distance>e._distance?1:0},expand:function(t,e,n,i){for(var r=t.getChildBoundables(),s=r.iterator();s.hasNext();){var o=s.next(),a=new De(o,e,this.itemDistance);a.getDistance()<i&&n.add(a)}},getBoundable:function(t){return 0===t?this.boundable1:this.boundable2},getDistance:function(){return this._distance},distance:function(){return this.isLeaves()?this.itemDistance.distance(this.boundable1,this.boundable2):this.boundable1.getBounds().distance(this.boundable2.getBounds())},interfaces_:function(){return[r]},getClass:function(){return De}}),De.area=function(t){return t.getBounds().getArea()},De.isComposite=function(t){return t instanceof Me},io(Ae.prototype,{getNodeCapacity:function(){return this.nodeCapacity},lastNode:function(t){return t.get(t.size()-1)},size:function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this.root));if(1===arguments.length){for(var t=arguments[0],e=0,n=t.getChildBoundables().iterator();n.hasNext();){var i=n.next();i instanceof Me?e+=this.size(i):i instanceof Oe&&(e+=1)}return e}},removeItem:function(t,e){for(var n=null,i=t.getChildBoundables().iterator();i.hasNext();){var r=i.next();r instanceof Oe&&r.getItem()===e&&(n=r)}return null!==n&&(t.getChildBoundables().remove(n),!0)},itemsTree:function(){if(0===arguments.length){this.build();var t=this.itemsTree(this.root);return null===t?new x:t}if(1===arguments.length){for(var e=arguments[0],n=new x,i=e.getChildBoundables().iterator();i.hasNext();){var r=i.next();if(r instanceof Me){var s=this.itemsTree(r);null!==s&&n.add(s)}else r instanceof Oe?n.add(r.getItem()):h.shouldNeverReachHere()}return n.size()<=0?null:n}},insert:function(t,e){h.isTrue(!this.built,"Cannot insert items into an STR packed R-tree after it has been built."),this.itemBoundables.add(new Oe(t,e))},boundablesAtLevel:function(){if(1===arguments.length){var t=arguments[0],e=new x;return this.boundablesAtLevel(t,this.root,e),e}if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];if(h.isTrue(n>-2),i.getLevel()===n)return r.add(i),null;for(var s=i.getChildBoundables().iterator();s.hasNext();){var o=s.next();o instanceof Me?this.boundablesAtLevel(n,o,r):(h.isTrue(o instanceof Oe),-1===n&&r.add(o))}return null}},query:function(){if(1===arguments.length){var t=arguments[0];this.build();var e=new x;return this.isEmpty()?e:(this.getIntersectsOp().intersects(this.root.getBounds(),t)&&this.query(t,this.root,e),e)}if(2===arguments.length){var n=arguments[0],i=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this.root.getBounds(),n)&&this.query(n,this.root,i)}else if(3===arguments.length)if(oo(arguments[2],be)&&arguments[0]instanceof Object&&arguments[1]instanceof Me)for(var r=arguments[0],s=arguments[1],o=arguments[2],a=s.getChildBoundables(),u=0;u<a.size();u++){var l=a.get(u);this.getIntersectsOp().intersects(l.getBounds(),r)&&(l instanceof Me?this.query(r,l,o):l instanceof Oe?o.visitItem(l.getItem()):h.shouldNeverReachHere())}else if(oo(arguments[2],m)&&arguments[0]instanceof Object&&arguments[1]instanceof Me)for(var c=arguments[0],f=arguments[1],g=arguments[2],a=f.getChildBoundables(),u=0;u<a.size();u++){var l=a.get(u);this.getIntersectsOp().intersects(l.getBounds(),c)&&(l instanceof Me?this.query(c,l,g):l instanceof Oe?g.add(l.getItem()):h.shouldNeverReachHere())}},build:function(){if(this.built)return null;this.root=this.itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this.itemBoundables,-1),this.itemBoundables=null,this.built=!0},getRoot:function(){return this.build(),this.root},remove:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this.root.getBounds(),t)&&this.remove(t,this.root,e)}if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2],s=this.removeItem(i,r);if(s)return!0;for(var o=null,a=i.getChildBoundables().iterator();a.hasNext();){var u=a.next();if(this.getIntersectsOp().intersects(u.getBounds(),n)&&(u instanceof Me&&(s=this.remove(n,u,r)))){o=u;break}}return null!==o&&o.getChildBoundables().isEmpty()&&i.getChildBoundables().remove(o),s}},createHigherLevels:function(t,e){h.isTrue(!t.isEmpty());var n=this.createParentBoundables(t,e+1);return 1===n.size()?n.get(0):this.createHigherLevels(n,e+1)},depth:function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this.root));if(1===arguments.length){for(var t=arguments[0],e=0,n=t.getChildBoundables().iterator();n.hasNext();){var i=n.next();if(i instanceof Me){var r=this.depth(i);r>e&&(e=r)}}return e+1}},createParentBoundables:function(t,e){h.isTrue(!t.isEmpty());var n=new x;n.add(this.createNode(e));var i=new x(t);xo.sort(i,this.getComparator());for(var r=i.iterator();r.hasNext();){var s=r.next();this.lastNode(n).getChildBoundables().size()===this.getNodeCapacity()&&n.add(this.createNode(e)),this.lastNode(n).addChildBoundable(s)}return n},isEmpty:function(){return this.built?this.root.isEmpty():this.itemBoundables.isEmpty()},interfaces_:function(){return[a]},getClass:function(){return Ae}}),Ae.compareDoubles=function(t,e){return t>e?1:t<e?-1:0},Ae.IntersectsOp=Fe,Ae.serialVersionUID=-0x35ef64c82d4c5400,Ae.DEFAULT_NODE_CAPACITY=10,io(Ge.prototype,{distance:function(t,e){},interfaces_:function(){return[]},getClass:function(){return Ge}}),ro(qe,Ae),io(qe.prototype,{createParentBoundablesFromVerticalSlices:function(t,e){h.isTrue(t.length>0);for(var n=new x,i=0;i<t.length;i++)n.addAll(this.createParentBoundablesFromVerticalSlice(t[i],e));return n},createNode:function(t){return new Be(t)},size:function(){return 0===arguments.length?Ae.prototype.size.call(this):Ae.prototype.size.apply(this,arguments)},insert:function(){if(2!==arguments.length)return Ae.prototype.insert.apply(this,arguments);var t=arguments[0],e=arguments[1];if(t.isNull())return null;Ae.prototype.insert.call(this,t,e)},getIntersectsOp:function(){return qe.intersectsOp},verticalSlices:function(t,e){for(var n=Math.trunc(Math.ceil(t.size()/e)),i=new Array(e).fill(null),r=t.iterator(),s=0;s<e;s++){i[s]=new x;for(var o=0;r.hasNext()&&o<n;){var a=r.next();i[s].add(a),o++}}return i},query:function(){if(1===arguments.length){var t=arguments[0];return Ae.prototype.query.call(this,t)}if(2===arguments.length){var e=arguments[0],n=arguments[1];Ae.prototype.query.call(this,e,n)}else if(3===arguments.length)if(oo(arguments[2],be)&&arguments[0]instanceof Object&&arguments[1]instanceof Me){var i=arguments[0],r=arguments[1],s=arguments[2];Ae.prototype.query.call(this,i,r,s)}else if(oo(arguments[2],m)&&arguments[0]instanceof Object&&arguments[1]instanceof Me){var o=arguments[0],a=arguments[1],u=arguments[2];Ae.prototype.query.call(this,o,a,u)}},getComparator:function(){return qe.yComparator},createParentBoundablesFromVerticalSlice:function(t,e){return Ae.prototype.createParentBoundables.call(this,t,e)},remove:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return Ae.prototype.remove.call(this,t,e)}return Ae.prototype.remove.apply(this,arguments)},depth:function(){return 0===arguments.length?Ae.prototype.depth.call(this):Ae.prototype.depth.apply(this,arguments)},createParentBoundables:function(t,e){h.isTrue(!t.isEmpty());var n=Math.trunc(Math.ceil(t.size()/this.getNodeCapacity())),i=new x(t);xo.sort(i,qe.xComparator);var r=this.verticalSlices(i,Math.trunc(Math.ceil(Math.sqrt(n))));return this.createParentBoundablesFromVerticalSlices(r,e)},nearestNeighbour:function(){if(1===arguments.length){if(oo(arguments[0],Ge)){var t=arguments[0],e=new De(this.getRoot(),this.getRoot(),t);return this.nearestNeighbour(e)}if(arguments[0]instanceof De){var n=arguments[0];return this.nearestNeighbour(n,i.POSITIVE_INFINITY)}}else if(2===arguments.length){if(arguments[0]instanceof qe&&oo(arguments[1],Ge)){var r=arguments[0],s=arguments[1],e=new De(this.getRoot(),r.getRoot(),s);return this.nearestNeighbour(e)}if(arguments[0]instanceof De&&"number"==typeof arguments[1]){var o=arguments[0],a=arguments[1],u=a,l=null,h=new Pe;for(h.add(o);!h.isEmpty()&&u>0;){var c=h.poll(),f=c.getDistance();if(f>=u)break;c.isLeaves()?(u=f,l=c):c.expandToQueue(h,u)}return[l.getBoundable(0).getItem(),l.getBoundable(1).getItem()]}}else if(3===arguments.length){var g=arguments[0],d=arguments[1],p=arguments[2],m=new Oe(g,d),e=new De(this.getRoot(),m,p);return this.nearestNeighbour(e)[0]}},interfaces_:function(){return[_e,a]},getClass:function(){return qe}}),qe.centreX=function(t){return qe.avg(t.getMinX(),t.getMaxX())},qe.avg=function(t,e){return(t+e)/2},qe.centreY=function(t){return qe.avg(t.getMinY(),t.getMaxY())},ro(Be,Me),io(Be.prototype,{computeBounds:function(){for(var t=null,e=this.getChildBoundables().iterator();e.hasNext();){var n=e.next();null===t?t=new I(n.getBounds()):t.expandToInclude(n.getBounds())}return t},interfaces_:function(){return[]},getClass:function(){return Be}}),qe.STRtreeNode=Be,qe.serialVersionUID=0x39920f7d5f261e0,qe.xComparator={interfaces_:function(){return[o]},compare:function(t,e){return Ae.compareDoubles(qe.centreX(t.getBounds()),qe.centreX(e.getBounds()))}},qe.yComparator={interfaces_:function(){return[o]},compare:function(t,e){return Ae.compareDoubles(qe.centreY(t.getBounds()),qe.centreY(e.getBounds()))}},qe.intersectsOp={interfaces_:function(){return[IntersectsOp]},intersects:function(t,e){return t.intersects(e)}},qe.DEFAULT_NODE_CAPACITY=10,io(Ve.prototype,{interfaces_:function(){return[]},getClass:function(){return Ve}}),Ve.relativeSign=function(t,e){return t<e?-1:t>e?1:0},Ve.compare=function(t,e,n){if(e.equals2D(n))return 0;var i=Ve.relativeSign(e.x,n.x),r=Ve.relativeSign(e.y,n.y);switch(t){case 0:return Ve.compareValue(i,r);case 1:return Ve.compareValue(r,i);case 2:return Ve.compareValue(r,-i);case 3:return Ve.compareValue(-i,r);case 4:return Ve.compareValue(-i,-r);case 5:return Ve.compareValue(-r,-i);case 6:return Ve.compareValue(-r,i);case 7:return Ve.compareValue(i,-r)}return h.shouldNeverReachHere("invalid octant value"),0},Ve.compareValue=function(t,e){return t<0?-1:t>0?1:e<0?-1:e>0?1:0},io(ze.prototype,{getCoordinate:function(){return this.coord},print:function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex)},compareTo:function(t){var e=t;return this.segmentIndex<e.segmentIndex?-1:this.segmentIndex>e.segmentIndex?1:this.coord.equals2D(e.coord)?0:Ve.compare(this.segmentOctant,this.coord,e.coord)},isEndPoint:function(t){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===t},isInterior:function(){return this._isInterior},interfaces_:function(){return[r]},getClass:function(){return ze}}),io(ke.prototype,{getSplitCoordinates:function(){var t=new E;this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var i=e.next();this.addEdgeCoordinates(n,i,t),n=i}return t.toCoordinateArray()},addCollapsedNodes:function(){var t=new x;this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(var e=t.iterator();e.hasNext();){var n=e.next().intValue();this.add(this.edge.getCoordinate(n),n)}},print:function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();){e.next().print(t)}},findCollapsesFromExistingVertices:function(t){for(var e=0;e<this.edge.size()-2;e++){var n=this.edge.getCoordinate(e),i=(this.edge.getCoordinate(e+1),this.edge.getCoordinate(e+2));n.equals2D(i)&&t.add(new R(e+1))}},addEdgeCoordinates:function(t,e,n){var i=e.segmentIndex-t.segmentIndex+2,r=this.edge.getCoordinate(e.segmentIndex),s=e.isInterior()||!e.coord.equals2D(r);s||i--;n.add(new c(t.coord),!1);for(var o=t.segmentIndex+1;o<=e.segmentIndex;o++)n.add(this.edge.getCoordinate(o));s&&n.add(new c(e.coord))},iterator:function(){return this.nodeMap.values().iterator()},addSplitEdges:function(t){this.addEndpoints(),this.addCollapsedNodes();for(var e=this.iterator(),n=e.next();e.hasNext();){var i=e.next(),r=this.createSplitEdge(n,i);t.add(r),n=i}},findCollapseIndex:function(t,e,n){if(!t.coord.equals2D(e.coord))return!1;var i=e.segmentIndex-t.segmentIndex;return e.isInterior()||i--,1===i&&(n[0]=t.segmentIndex+1,!0)},findCollapsesFromInsertedNodes:function(t){for(var e=new Array(1).fill(null),n=this.iterator(),i=n.next();n.hasNext();){var r=n.next();this.findCollapseIndex(i,r,e)&&t.add(new R(e[0])),i=r}},getEdge:function(){return this.edge},addEndpoints:function(){var t=this.edge.size()-1;this.add(this.edge.getCoordinate(0),0),this.add(this.edge.getCoordinate(t),t)},createSplitEdge:function(t,e){var n=e.segmentIndex-t.segmentIndex+2,i=this.edge.getCoordinate(e.segmentIndex),r=e.isInterior()||!e.coord.equals2D(i);r||n--;var s=new Array(n).fill(null),o=0;s[o++]=new c(t.coord);for(var a=t.segmentIndex+1;a<=e.segmentIndex;a++)s[o++]=this.edge.getCoordinate(a);return r&&(s[o]=new c(e.coord)),new Xe(s,this.edge.getData())},add:function(t,e){var n=new ze(this.edge,t,e,this.edge.getSegmentOctant(e)),i=this.nodeMap.get(n);return null!==i?(h.isTrue(i.coord.equals2D(t),"Found equal nodes with different coordinates"),i):(this.nodeMap.put(n,n),n)},checkSplitEdgesCorrectness:function(t){var e=this.edge.getCoordinates(),n=t.get(0),i=n.getCoordinate(0);if(!i.equals2D(e[0]))throw new u("bad split edge start point at "+i);var r=t.get(t.size()-1),s=r.getCoordinates(),o=s[s.length-1];if(!o.equals2D(e[e.length-1]))throw new u("bad split edge end point at "+o)},interfaces_:function(){return[]},getClass:function(){return ke}}),io(Ye.prototype,{next:function(){return null===this.currNode?(this.currNode=this.nextNode,this.currSegIndex=this.currNode.segmentIndex,this.readNextNode(),this.currNode):null===this.nextNode?null:this.nextNode.segmentIndex===this.currNode.segmentIndex?(this.currNode=this.nextNode,this.currSegIndex=this.currNode.segmentIndex,this.readNextNode(),this.currNode):(this.nextNode.segmentIndex,this.currNode.segmentIndex,null)},remove:function(){throw new UnsupportedOperationException(this.getClass().getName())},hasNext:function(){return null!==this.nextNode},readNextNode:function(){this.nodeIt.hasNext()?this.nextNode=this.nodeIt.next():this.nextNode=null},interfaces_:function(){return[g]},getClass:function(){return Ye}}),io(Ue.prototype,{addIntersection:function(t,e){},interfaces_:function(){return[we]},getClass:function(){return Ue}}),
io(Xe.prototype,{getCoordinates:function(){return this.pts},size:function(){return this.pts.length},getCoordinate:function(t){return this.pts[t]},isClosed:function(){return this.pts[0].equals(this.pts[this.pts.length-1])},getSegmentOctant:function(t){return t===this.pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))},setData:function(t){this.data=t},safeOctant:function(t,e){return t.equals2D(e)?0:Le.octant(t,e)},getData:function(){return this.data},addIntersection:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.addIntersectionNode(t,e)}else if(4===arguments.length){var n=arguments[0],i=arguments[1],r=(arguments[2],arguments[3]),s=new c(n.getIntersection(r));this.addIntersection(s,i)}},toString:function(){return ee.toLineString(new Dt(this.pts))},getNodeList:function(){return this.nodeList},addIntersectionNode:function(t,e){var n=e,i=n+1;if(i<this.pts.length){var r=this.pts[i];t.equals2D(r)&&(n=i)}return this.nodeList.add(t,n)},addIntersections:function(t,e,n){for(var i=0;i<t.getIntersectionNum();i++)this.addIntersection(t,e,n,i)},interfaces_:function(){return[Ue]},getClass:function(){return Xe}}),Xe.getNodedSubstrings=function(){if(1===arguments.length){var t=arguments[0],e=new x;return Xe.getNodedSubstrings(t,e),e}if(2===arguments.length)for(var n=arguments[0],i=arguments[1],r=n.iterator();r.hasNext();){var s=r.next();s.getNodeList().addSplitEdges(i)}},io(He.prototype,{overlap:function(){if(2===arguments.length){arguments[0],arguments[1]}else if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];t.getLineSegment(e,this.overlapSeg1),n.getLineSegment(i,this.overlapSeg2),this.overlap(this.overlapSeg1,this.overlapSeg2)}},interfaces_:function(){return[]},getClass:function(){return He}}),io(We.prototype,{getLineSegment:function(t,e){e.p0=this.pts[t],e.p1=this.pts[t+1]},computeSelect:function(t,e,n,i){var r=this.pts[e],s=this.pts[n];if(i.tempEnv1.init(r,s),n-e==1)return i.select(this,e),null;if(!t.intersects(i.tempEnv1))return null;var o=Math.trunc((e+n)/2);e<o&&this.computeSelect(t,e,o,i),o<n&&this.computeSelect(t,o,n,i)},getCoordinates:function(){for(var t=new Array(this.end-this.start+1).fill(null),e=0,n=this.start;n<=this.end;n++)t[e++]=this.pts[n];return t},computeOverlaps:function(t,e){this.computeOverlapsInternal(this.start,this.end,t,t.start,t.end,e)},setId:function(t){this.id=t},select:function(t,e){this.computeSelect(t,this.start,this.end,e)},getEnvelope:function(){if(null===this.env){var t=this.pts[this.start],e=this.pts[this.end];this.env=new I(t,e)}return this.env},getEndIndex:function(){return this.end},getStartIndex:function(){return this.start},getContext:function(){return this.context},getId:function(){return this.id},computeOverlapsInternal:function(t,e,n,i,r,s){var o=this.pts[t],a=this.pts[e],u=n.pts[i],l=n.pts[r];if(e-t==1&&r-i==1)return s.overlap(this,t,n,i),null;if(s.tempEnv1.init(o,a),s.tempEnv2.init(u,l),!s.tempEnv1.intersects(s.tempEnv2))return null;var h=Math.trunc((t+e)/2),c=Math.trunc((i+r)/2);t<h&&(i<c&&this.computeOverlapsInternal(t,h,n,i,c,s),c<r&&this.computeOverlapsInternal(t,h,n,c,r,s)),h<e&&(i<c&&this.computeOverlapsInternal(h,e,n,i,c,s),c<r&&this.computeOverlapsInternal(h,e,n,c,r,s))},interfaces_:function(){return[]},getClass:function(){return We}}),io(je.prototype,{interfaces_:function(){return[]},getClass:function(){return je}}),je.isNorthern=function(t){return t===je.NE||t===je.NW},je.isOpposite=function(t,e){return t!==e&&2==(t-e+4)%4},je.commonHalfPlane=function(t,e){if(t===e)return t;if(2==(t-e+4)%4)return-1;var n=t<e?t:e,i=t>e?t:e;return 0===n&&3===i?3:n},je.isInHalfPlane=function(t,e){return e===je.SE?t===je.SE||t===je.SW:t===e||t===e+1},je.quadrant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new n("Cannot compute the quadrant for point ( "+t+", "+e+" )");return t>=0?e>=0?je.NE:je.SE:e>=0?je.NW:je.SW}if(arguments[0]instanceof c&&arguments[1]instanceof c){var i=arguments[0],r=arguments[1];if(r.x===i.x&&r.y===i.y)throw new n("Cannot compute the quadrant for two identical points "+i);return r.x>=i.x?r.y>=i.y?je.NE:je.SE:r.y>=i.y?je.NW:je.SW}},je.NE=0,je.NW=1,je.SW=2,je.SE=3,io(Ke.prototype,{interfaces_:function(){return[]},getClass:function(){return Ke}}),Ke.getChainStartIndices=function(t){var e=0,n=new x;n.add(new R(e));do{var i=Ke.findChainEnd(t,e);n.add(new R(i)),e=i}while(e<t.length-1);return Ke.toIntArray(n)},Ke.findChainEnd=function(t,e){for(var n=e;n<t.length-1&&t[n].equals2D(t[n+1]);)n++;if(n>=t.length-1)return t.length-1;for(var i=je.quadrant(t[n],t[n+1]),r=e+1;r<t.length;){if(!t[r-1].equals2D(t[r])){if(je.quadrant(t[r-1],t[r])!==i)break}r++}return r-1},Ke.getChains=function(){if(1===arguments.length){var t=arguments[0];return Ke.getChains(t,null)}if(2===arguments.length){for(var e=arguments[0],n=arguments[1],i=new x,r=Ke.getChainStartIndices(e),s=0;s<r.length-1;s++){var o=new We(e,r[s],r[s+1],n);i.add(o)}return i}},Ke.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e},io(Ze.prototype,{computeNodes:function(t){},getNodedSubstrings:function(){},interfaces_:function(){return[]},getClass:function(){return Ze}}),io(Qe.prototype,{setSegmentIntersector:function(t){this.segInt=t},interfaces_:function(){return[Ze]},getClass:function(){return Qe}}),ro(Je,Qe),io(Je.prototype,{getMonotoneChains:function(){return this.monoChains},getNodedSubstrings:function(){return Xe.getNodedSubstrings(this.nodedSegStrings)},getIndex:function(){return this.index},add:function(t){for(var e=Ke.getChains(t.getCoordinates(),t),n=e.iterator();n.hasNext();){var i=n.next();i.setId(this.idCounter++),this.index.insert(i.getEnvelope(),i),this.monoChains.add(i)}},computeNodes:function(t){this.nodedSegStrings=t;for(var e=t.iterator();e.hasNext();)this.add(e.next());this.intersectChains()},intersectChains:function(){for(var t=new $e(this.segInt),e=this.monoChains.iterator();e.hasNext();)for(var n=e.next(),i=this.index.query(n.getEnvelope()),r=i.iterator();r.hasNext();){var s=r.next();if(s.getId()>n.getId()&&(n.computeOverlaps(s,t),this.nOverlaps++),this.segInt.isDone())return null}},interfaces_:function(){return[]},getClass:function(){return Je}}),ro($e,He),io($e.prototype,{overlap:function(){if(4!==arguments.length)return He.prototype.overlap.apply(this,arguments);var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3],r=t.getContext(),s=n.getContext();this.si.processIntersections(r,e,s,i)},interfaces_:function(){return[]},getClass:function(){return $e}}),Je.SegmentOverlapAction=$e,ro(tn,u),io(tn.prototype,{getCoordinate:function(){return this.pt},interfaces_:function(){return[]},getClass:function(){return tn}}),tn.msgWithCoord=function(t,e){return null!==e?t+" [ "+e+" ]":t},io(en.prototype,{processIntersections:function(t,e,n,i){},isDone:function(){},interfaces_:function(){return[]},getClass:function(){return en}}),io(nn.prototype,{getInteriorIntersection:function(){return this.interiorIntersection},setCheckEndSegmentsOnly:function(t){this.isCheckEndSegmentsOnly=t},getIntersectionSegments:function(){return this.intSegments},count:function(){return this.intersectionCount},getIntersections:function(){return this.intersections},setFindAllIntersections:function(t){this.findAllIntersections=t},setKeepIntersections:function(t){this.keepIntersections=t},processIntersections:function(t,e,n,i){if(!this.findAllIntersections&&this.hasIntersection())return null;if(t===n&&e===i)return null;if(this.isCheckEndSegmentsOnly){if(!(this.isEndSegment(t,e)||this.isEndSegment(n,i)))return null}var r=t.getCoordinates()[e],s=t.getCoordinates()[e+1],o=n.getCoordinates()[i],a=n.getCoordinates()[i+1];this.li.computeIntersection(r,s,o,a),this.li.hasIntersection()&&this.li.isInteriorIntersection()&&(this.intSegments=new Array(4).fill(null),this.intSegments[0]=r,this.intSegments[1]=s,this.intSegments[2]=o,this.intSegments[3]=a,this.interiorIntersection=this.li.getIntersection(0),this.keepIntersections&&this.intersections.add(this.interiorIntersection),this.intersectionCount++)},isEndSegment:function(t,e){return 0===e||e>=t.size()-2},hasIntersection:function(){return null!==this.interiorIntersection},isDone:function(){return!this.findAllIntersections&&null!==this.interiorIntersection},interfaces_:function(){return[en]},getClass:function(){return nn}}),nn.createAllIntersectionsFinder=function(t){var e=new nn(t);return e.setFindAllIntersections(!0),e},nn.createAnyIntersectionFinder=function(t){return new nn(t)},nn.createIntersectionCounter=function(t){var e=new nn(t);return e.setFindAllIntersections(!0),e.setKeepIntersections(!1),e},io(rn.prototype,{execute:function(){if(null!==this.segInt)return null;this.checkInteriorIntersections()},getIntersections:function(){return this.segInt.getIntersections()},isValid:function(){return this.execute(),this._isValid},setFindAllIntersections:function(t){this.findAllIntersections=t},checkInteriorIntersections:function(){this._isValid=!0,this.segInt=new nn(this.li),this.segInt.setFindAllIntersections(this.findAllIntersections);var t=new Je;if(t.setSegmentIntersector(this.segInt),t.computeNodes(this.segStrings),this.segInt.hasIntersection())return this._isValid=!1,null},checkValid:function(){if(this.execute(),!this._isValid)throw new tn(this.getErrorMessage(),this.segInt.getInteriorIntersection())},getErrorMessage:function(){if(this._isValid)return"no intersections found";var t=this.segInt.getIntersectionSegments();return"found non-noded intersection between "+ee.toLineString(t[0],t[1])+" and "+ee.toLineString(t[2],t[3])},interfaces_:function(){return[]},getClass:function(){return rn}}),rn.computeIntersections=function(t){var e=new rn(t);return e.setFindAllIntersections(!0),e.isValid(),e.getIntersections()},io(sn.prototype,{checkValid:function(){this.nv.checkValid()},interfaces_:function(){return[]},getClass:function(){return sn}}),sn.toSegmentStrings=function(t){for(var e=new x,n=t.iterator();n.hasNext();){var i=n.next();e.add(new Re(i.getCoordinates(),i))}return e},sn.checkValid=function(t){new sn(t).checkValid()},io(on.prototype,{map:function(t){for(var e=new x,n=0;n<t.getNumGeometries();n++){var i=this.mapOp.map(t.getGeometryN(n));i.isEmpty()||e.add(i)}return t.getFactory().createGeometryCollection($t.toGeometryArray(e))},interfaces_:function(){return[]},getClass:function(){return on}}),on.map=function(t,e){return new on(e).map(t)},io(an.prototype,{interfaces_:function(){return[]},getClass:function(){return an}}),an.opposite=function(t){return t===an.LEFT?an.RIGHT:t===an.RIGHT?an.LEFT:t},an.ON=0,an.LEFT=1,an.RIGHT=2,io(un.prototype,{setAllLocations:function(t){for(var e=0;e<this.location.length;e++)this.location[e]=t},isNull:function(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==S.NONE)return!1;return!0},setAllLocationsIfNull:function(t){for(var e=0;e<this.location.length;e++)this.location[e]===S.NONE&&(this.location[e]=t)},isLine:function(){return 1===this.location.length},merge:function(t){if(t.location.length>this.location.length){var e=new Array(3).fill(null);e[an.ON]=this.location[an.ON],e[an.LEFT]=S.NONE,e[an.RIGHT]=S.NONE,this.location=e}for(var n=0;n<this.location.length;n++)this.location[n]===S.NONE&&n<t.location.length&&(this.location[n]=t.location[n])},getLocations:function(){return this.location},flip:function(){if(this.location.length<=1)return null;var t=this.location[an.LEFT];this.location[an.LEFT]=this.location[an.RIGHT],this.location[an.RIGHT]=t},toString:function(){var t=new w;return this.location.length>1&&t.append(S.toLocationSymbol(this.location[an.LEFT])),t.append(S.toLocationSymbol(this.location[an.ON])),this.location.length>1&&t.append(S.toLocationSymbol(this.location[an.RIGHT])),t.toString()},setLocations:function(t,e,n){this.location[an.ON]=t,this.location[an.LEFT]=e,this.location[an.RIGHT]=n},get:function(t){return t<this.location.length?this.location[t]:S.NONE},isArea:function(){return this.location.length>1},isAnyNull:function(){for(var t=0;t<this.location.length;t++)if(this.location[t]===S.NONE)return!0;return!1},setLocation:function(){if(1===arguments.length){var t=arguments[0];this.setLocation(an.ON,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.location[e]=n}},init:function(t){this.location=new Array(t).fill(null),this.setAllLocations(S.NONE)},isEqualOnSide:function(t,e){return this.location[e]===t.location[e]},allPositionsEqual:function(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0},interfaces_:function(){return[]},getClass:function(){return un}}),io(ln.prototype,{getGeometryCount:function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t},setAllLocations:function(t,e){this.elt[t].setAllLocations(e)},isNull:function(t){return this.elt[t].isNull()},setAllLocationsIfNull:function(){if(1===arguments.length){var t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.elt[e].setAllLocationsIfNull(n)}},isLine:function(t){return this.elt[t].isLine()},merge:function(t){for(var e=0;e<2;e++)null===this.elt[e]&&null!==t.elt[e]?this.elt[e]=new un(t.elt[e]):this.elt[e].merge(t.elt[e])},flip:function(){this.elt[0].flip(),this.elt[1].flip()},getLocation:function(){if(1===arguments.length){var t=arguments[0];return this.elt[t].get(an.ON)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return this.elt[e].get(n)}},toString:function(){var t=new w;return null!==this.elt[0]&&(t.append("A:"),t.append(this.elt[0].toString())),null!==this.elt[1]&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()},isArea:function(){if(0===arguments.length)return this.elt[0].isArea()||this.elt[1].isArea();if(1===arguments.length){var t=arguments[0];return this.elt[t].isArea()}},isAnyNull:function(t){return this.elt[t].isAnyNull()},setLocation:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.elt[t].setLocation(an.ON,e)}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this.elt[n].setLocation(i,r)}},isEqualOnSide:function(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)},allPositionsEqual:function(t,e){return this.elt[t].allPositionsEqual(e)},toLine:function(t){this.elt[t].isArea()&&(this.elt[t]=new un(this.elt[t].location[0]))},interfaces_:function(){return[]},getClass:function(){return ln}}),ln.toLineLabel=function(t){for(var e=new ln(S.NONE),n=0;n<2;n++)e.setLocation(n,t.getLocation(n));return e},io(hn.prototype,{computeRing:function(){if(null!==this.ring)return null;for(var t=new Array(this.pts.size()).fill(null),e=0;e<this.pts.size();e++)t[e]=this.pts.get(e);this.ring=this.geometryFactory.createLinearRing(t),this._isHole=oe.isCCW(this.ring.getCoordinates())},isIsolated:function(){return 1===this.label.getGeometryCount()},computePoints:function(t){this.startDe=t;var e=t,n=!0;do{if(null===e)throw new tn("Found null DirectedEdge");if(e.getEdgeRing()===this)throw new tn("Directed Edge visited twice during ring-building at "+e.getCoordinate());this.edges.add(e);var i=e.getLabel();h.isTrue(i.isArea()),this.mergeLabel(i),this.addPoints(e.getEdge(),e.isForward(),n),n=!1,this.setEdgeRing(e,this),e=this.getNext(e)}while(e!==this.startDe)},getLinearRing:function(){return this.ring},getCoordinate:function(t){return this.pts.get(t)},computeMaxNodeDegree:function(){this.maxNodeDegree=0;var t=this.startDe;do{var e=t.getNode(),n=e.getEdges().getOutgoingDegree(this);n>this.maxNodeDegree&&(this.maxNodeDegree=n),t=this.getNext(t)}while(t!==this.startDe);this.maxNodeDegree*=2},addPoints:function(t,e,n){var i=t.getCoordinates();if(e){var r=1;n&&(r=0);for(var s=r;s<i.length;s++)this.pts.add(i[s])}else{var r=i.length-2;n&&(r=i.length-1);for(var s=r;s>=0;s--)this.pts.add(i[s])}},isHole:function(){return this._isHole},setInResult:function(){var t=this.startDe;do{t.getEdge().setInResult(!0),t=t.getNext()}while(t!==this.startDe)},containsPoint:function(t){var e=this.getLinearRing();if(!e.getEnvelopeInternal().contains(t))return!1;if(!oe.isPointInRing(t,e.getCoordinates()))return!1;for(var n=this.holes.iterator();n.hasNext();){if(n.next().containsPoint(t))return!1}return!0},addHole:function(t){this.holes.add(t)},isShell:function(){return null===this.shell},getLabel:function(){return this.label},getEdges:function(){return this.edges},getMaxNodeDegree:function(){return this.maxNodeDegree<0&&this.computeMaxNodeDegree(),this.maxNodeDegree},getShell:function(){return this.shell},mergeLabel:function(){if(1===arguments.length){var t=arguments[0];this.mergeLabel(t,0),this.mergeLabel(t,1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],i=e.getLocation(n,an.RIGHT);if(i===S.NONE)return null;if(this.label.getLocation(n)===S.NONE)return this.label.setLocation(n,i),null}},setShell:function(t){this.shell=t,null!==t&&t.addHole(this)},toPolygon:function(t){for(var e=new Array(this.holes.size()).fill(null),n=0;n<this.holes.size();n++)e[n]=this.holes.get(n).getLinearRing();return t.createPolygon(this.getLinearRing(),e)},interfaces_:function(){return[]},getClass:function(){return hn}}),ro(cn,hn),io(cn.prototype,{setEdgeRing:function(t,e){t.setMinEdgeRing(e)},getNext:function(t){return t.getNextMin()},interfaces_:function(){return[]},getClass:function(){return cn}}),ro(fn,hn),io(fn.prototype,{buildMinimalRings:function(){var t=new x,e=this.startDe;do{if(null===e.getMinEdgeRing()){var n=new cn(e,this.geometryFactory);t.add(n)}e=e.getNext()}while(e!==this.startDe);return t},setEdgeRing:function(t,e){t.setEdgeRing(e)},linkDirectedEdgesForMinimalEdgeRings:function(){var t=this.startDe;do{t.getNode().getEdges().linkMinimalDirectedEdges(this),t=t.getNext()}while(t!==this.startDe)},getNext:function(t){return t.getNext()},interfaces_:function(){return[]},getClass:function(){return fn}}),io(gn.prototype,{setVisited:function(t){this._isVisited=t},setInResult:function(t){this._isInResult=t},isCovered:function(){return this._isCovered},isCoveredSet:function(){return this._isCoveredSet},setLabel:function(t){this.label=t},getLabel:function(){return this.label},setCovered:function(t){this._isCovered=t,this._isCoveredSet=!0},updateIM:function(t){h.isTrue(this.label.getGeometryCount()>=2,"found partial label"),this.computeIM(t)},isInResult:function(){return this._isInResult},isVisited:function(){return this._isVisited},interfaces_:function(){return[]},getClass:function(){return gn}}),ro(dn,gn),io(dn.prototype,{isIncidentEdgeInResult:function(){for(var t=this.getEdges().getEdges().iterator();t.hasNext();){if(t.next().getEdge().isInResult())return!0}return!1},isIsolated:function(){return 1===this.label.getGeometryCount()},getCoordinate:function(){return this.coord},print:function(t){t.println("node "+this.coord+" lbl: "+this.label)},computeIM:function(t){},computeMergedLocation:function(t,e){var n=S.NONE;if(n=this.label.getLocation(e),!t.isNull(e)){var i=t.getLocation(e);n!==S.BOUNDARY&&(n=i)}return n},setLabel:function(){if(2!==arguments.length)return gn.prototype.setLabel.apply(this,arguments);var t=arguments[0],e=arguments[1];null===this.label?this.label=new ln(t,e):this.label.setLocation(t,e)},getEdges:function(){return this.edges},mergeLabel:function(){if(arguments[0]instanceof dn){var t=arguments[0];this.mergeLabel(t.label)}else if(arguments[0]instanceof ln)for(var e=arguments[0],n=0;n<2;n++){var i=this.computeMergedLocation(e,n),r=this.label.getLocation(n);r===S.NONE&&this.label.setLocation(n,i)}},add:function(t){this.edges.insert(t),t.setNode(this)},setLabelBoundary:function(t){if(null===this.label)return null;var e=S.NONE;null!==this.label&&(e=this.label.getLocation(t));var n=null;switch(e){case S.BOUNDARY:n=S.INTERIOR;break;case S.INTERIOR:default:n=S.BOUNDARY}this.label.setLocation(t,n)},interfaces_:function(){return[]},getClass:function(){return dn}}),io(pn.prototype,{find:function(t){return this.nodeMap.get(t)},addNode:function(){if(arguments[0]instanceof c){var t=arguments[0],e=this.nodeMap.get(t);return null===e&&(e=this.nodeFact.createNode(t),this.nodeMap.put(t,e)),e}if(arguments[0]instanceof dn){var n=arguments[0],e=this.nodeMap.get(n.getCoordinate());return null===e?(this.nodeMap.put(n.getCoordinate(),n),n):(e.mergeLabel(n),e)}},print:function(t){for(var e=this.iterator();e.hasNext();){e.next().print(t)}},iterator:function(){return this.nodeMap.values().iterator()},values:function(){return this.nodeMap.values()},getBoundaryNodes:function(t){for(var e=new x,n=this.iterator();n.hasNext();){var i=n.next();i.getLabel().getLocation(t)===S.BOUNDARY&&e.add(i)}return e},add:function(t){var e=t.getCoordinate();this.addNode(e).add(t)},interfaces_:function(){return[]},getClass:function(){return pn}}),io(mn.prototype,{compareDirection:function(t){return this.dx===t.dx&&this.dy===t.dy?0:this.quadrant>t.quadrant?1:this.quadrant<t.quadrant?-1:oe.computeOrientation(t.p0,t.p1,this.p1)},getDy:function(){return this.dy},getCoordinate:function(){return this.p0},setNode:function(t){this.node=t},print:function(t){var e=Math.atan2(this.dy,this.dx),n=this.getClass().getName(),i=n.lastIndexOf("."),r=n.substring(i+1);t.print("  "+r+": "+this.p0+" - "+this.p1+" "+this.quadrant+":"+e+"   "+this.label)},compareTo:function(t){var e=t;return this.compareDirection(e)},getDirectedCoordinate:function(){return this.p1},getDx:function(){return this.dx},getLabel:function(){return this.label},getEdge:function(){return this.edge},getQuadrant:function(){return this.quadrant},getNode:function(){return this.node},toString:function(){var t=Math.atan2(this.dy,this.dx),e=this.getClass().getName(),n=e.lastIndexOf(".");return"  "+e.substring(n+1)+": "+this.p0+" - "+this.p1+" "+this.quadrant+":"+t+"   "+this.label},computeLabel:function(t){},init:function(t,e){this.p0=t,this.p1=e,this.dx=e.x-t.x,this.dy=e.y-t.y,this.quadrant=je.quadrant(this.dx,this.dy),h.isTrue(!(0===this.dx&&0===this.dy),"EdgeEnd with identical endpoints found")},interfaces_:function(){return[r]},getClass:function(){return mn}}),ro(vn,mn),io(vn.prototype,{getNextMin:function(){return this.nextMin},getDepth:function(t){return this.depth[t]},setVisited:function(t){this._isVisited=t},computeDirectedLabel:function(){this.label=new ln(this.edge.getLabel()),this._isForward||this.label.flip()},getNext:function(){return this.next},setDepth:function(t,e){if(-999!==this.depth[t]&&this.depth[t]!==e)throw new tn("assigned depths do not match",this.getCoordinate());this.depth[t]=e},isInteriorAreaEdge:function(){for(var t=!0,e=0;e<2;e++)this.label.isArea(e)&&this.label.getLocation(e,an.LEFT)===S.INTERIOR&&this.label.getLocation(e,an.RIGHT)===S.INTERIOR||(t=!1);return t},setNextMin:function(t){this.nextMin=t},print:function(t){mn.prototype.print.call(this,t),t.print(" "+this.depth[an.LEFT]+"/"+this.depth[an.RIGHT]),t.print(" ("+this.getDepthDelta()+")"),this._isInResult&&t.print(" inResult")},setMinEdgeRing:function(t){this.minEdgeRing=t},isLineEdge:function(){var t=this.label.isLine(0)||this.label.isLine(1),e=!this.label.isArea(0)||this.label.allPositionsEqual(0,S.EXTERIOR),n=!this.label.isArea(1)||this.label.allPositionsEqual(1,S.EXTERIOR);return t&&e&&n},setEdgeRing:function(t){this.edgeRing=t},getMinEdgeRing:function(){return this.minEdgeRing},getDepthDelta:function(){var t=this.edge.getDepthDelta();return this._isForward||(t=-t),t},setInResult:function(t){this._isInResult=t},getSym:function(){return this.sym},isForward:function(){return this._isForward},getEdge:function(){return this.edge},printEdge:function(t){this.print(t),t.print(" "),this._isForward?this.edge.print(t):this.edge.printReverse(t)},setSym:function(t){this.sym=t},setVisitedEdge:function(t){this.setVisited(t),this.sym.setVisited(t)},setEdgeDepths:function(t,e){var n=this.getEdge().getDepthDelta();this._isForward||(n=-n);var i=1;t===an.LEFT&&(i=-1);var r=an.opposite(t),s=n*i,o=e+s;this.setDepth(t,e),this.setDepth(r,o)},getEdgeRing:function(){return this.edgeRing},isInResult:function(){return this._isInResult},setNext:function(t){this.next=t},isVisited:function(){return this._isVisited},interfaces_:function(){return[]},getClass:function(){return vn}}),vn.depthFactor=function(t,e){return t===S.EXTERIOR&&e===S.INTERIOR?1:t===S.INTERIOR&&e===S.EXTERIOR?-1:0},io(yn.prototype,{createNode:function(t){return new dn(t,null)},interfaces_:function(){return[]},getClass:function(){return yn}}),io(xn.prototype,{printEdges:function(t){t.println("Edges:");for(var e=0;e<this.edges.size();e++){t.println("edge "+e+":");var n=this.edges.get(e);n.print(t),n.eiList.print(t)}},find:function(t){return this.nodes.find(t)},addNode:function(){if(arguments[0]instanceof dn){var t=arguments[0];return this.nodes.addNode(t)}if(arguments[0]instanceof c){var e=arguments[0];return this.nodes.addNode(e)}},getNodeIterator:function(){return this.nodes.iterator()},linkResultDirectedEdges:function(){for(var t=this.nodes.iterator();t.hasNext();){t.next().getEdges().linkResultDirectedEdges()}},debugPrintln:function(t){_.out.println(t)},isBoundaryNode:function(t,e){var n=this.nodes.find(e);if(null===n)return!1;var i=n.getLabel();return null!==i&&i.getLocation(t)===S.BOUNDARY},linkAllDirectedEdges:function(){for(var t=this.nodes.iterator();t.hasNext();){t.next().getEdges().linkAllDirectedEdges()}},matchInSameDirection:function(t,e,n,i){return!!t.equals(n)&&(oe.computeOrientation(t,e,i)===oe.COLLINEAR&&je.quadrant(t,e)===je.quadrant(n,i))},getEdgeEnds:function(){return this.edgeEndList},debugPrint:function(t){_.out.print(t)},getEdgeIterator:function(){return this.edges.iterator()},findEdgeInSameDirection:function(t,e){for(var n=0;n<this.edges.size();n++){var i=this.edges.get(n),r=i.getCoordinates();if(this.matchInSameDirection(t,e,r[0],r[1]))return i;if(this.matchInSameDirection(t,e,r[r.length-1],r[r.length-2]))return i}return null},insertEdge:function(t){this.edges.add(t)},findEdgeEnd:function(t){for(var e=this.getEdgeEnds().iterator();e.hasNext();){var n=e.next();if(n.getEdge()===t)return n}return null},addEdges:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.edges.add(n);var i=new vn(n,!0),r=new vn(n,!1);i.setSym(r),r.setSym(i),this.add(i),this.add(r)}},add:function(t){this.nodes.add(t),this.edgeEndList.add(t)},getNodes:function(){return this.nodes.values()},findEdge:function(t,e){for(var n=0;n<this.edges.size();n++){var i=this.edges.get(n),r=i.getCoordinates();if(t.equals(r[0])&&e.equals(r[1]))return i}return null},interfaces_:function(){return[]},getClass:function(){return xn}}),xn.linkResultDirectedEdges=function(t){for(var e=t.iterator();e.hasNext();){e.next().getEdges().linkResultDirectedEdges()}},io(En.prototype,{sortShellsAndHoles:function(t,e,n){for(var i=t.iterator();i.hasNext();){var r=i.next();r.isHole()?n.add(r):e.add(r)}},computePolygons:function(t){for(var e=new x,n=t.iterator();n.hasNext();){var i=n.next(),r=i.toPolygon(this.geometryFactory);e.add(r)}return e},placeFreeHoles:function(t,e){for(var n=e.iterator();n.hasNext();){var i=n.next();if(null===i.getShell()){var r=this.findEdgeRingContaining(i,t);if(null===r)throw new tn("unable to assign hole to a shell",i.getCoordinate(0));i.setShell(r)}}},buildMinimalEdgeRings:function(t,e,n){for(var i=new x,r=t.iterator();r.hasNext();){var s=r.next();if(s.getMaxNodeDegree()>2){s.linkDirectedEdgesForMinimalEdgeRings();var o=s.buildMinimalRings(),a=this.findShell(o);null!==a?(this.placePolygonHoles(a,o),e.add(a)):n.addAll(o)}else i.add(s)}return i},containsPoint:function(t){for(var e=this.shellList.iterator();e.hasNext();){if(e.next().containsPoint(t))return!0}return!1},buildMaximalEdgeRings:function(t){for(var e=new x,n=t.iterator();n.hasNext();){var i=n.next();if(i.isInResult()&&i.getLabel().isArea()&&null===i.getEdgeRing()){var r=new fn(i,this.geometryFactory);e.add(r),r.setInResult()}}return e},placePolygonHoles:function(t,e){for(var n=e.iterator();n.hasNext();){var i=n.next();i.isHole()&&i.setShell(t)}},getPolygons:function(){return this.computePolygons(this.shellList)},findEdgeRingContaining:function(t,e){for(var n=t.getLinearRing(),i=n.getEnvelopeInternal(),r=n.getCoordinateN(0),s=null,o=null,a=e.iterator();a.hasNext();){var u=a.next(),l=u.getLinearRing(),h=l.getEnvelopeInternal();null!==s&&(o=s.getLinearRing().getEnvelopeInternal());var c=!1;h.contains(i)&&oe.isPointInRing(r,l.getCoordinates())&&(c=!0),c&&(null===s||o.contains(h))&&(s=u)}return s},findShell:function(t){for(var e=0,n=null,i=t.iterator();i.hasNext();){var r=i.next();r.isHole()||(n=r,e++)}return h.isTrue(e<=1,"found two shells in MinimalEdgeRing list"),n},add:function(){if(1===arguments.length){var t=arguments[0];this.add(t.getEdgeEnds(),t.getNodes())}else if(2===arguments.length){var e=arguments[0],n=arguments[1];xn.linkResultDirectedEdges(n);var i=this.buildMaximalEdgeRings(e),r=new x,s=this.buildMinimalEdgeRings(i,this.shellList,r);this.sortShellsAndHoles(s,this.shellList,r),this.placeFreeHoles(this.shellList,r)}},interfaces_:function(){return[]},getClass:function(){return En}}),io(In.prototype,{collectLines:function(t){for(var e=this.op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next();this.collectLineEdge(n,t,this.lineEdgesList),this.collectBoundaryTouchEdge(n,t,this.lineEdgesList)}},labelIsolatedLine:function(t,e){var n=this.ptLocator.locate(t.getCoordinate(),this.op.getArgGeometry(e));t.getLabel().setLocation(e,n)},build:function(t){return this.findCoveredLineEdges(),this.collectLines(t),this.buildLines(t),this.resultLineList},collectLineEdge:function(t,e,n){var i=t.getLabel(),r=t.getEdge();t.isLineEdge()&&(t.isVisited()||!$n.isResultOfOp(i,e)||r.isCovered()||(n.add(r),t.setVisitedEdge(!0)))},findCoveredLineEdges:function(){for(var t=this.op.getGraph().getNodes().iterator();t.hasNext();){t.next().getEdges().findCoveredLineEdges()}for(var e=this.op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next(),i=n.getEdge();if(n.isLineEdge()&&!i.isCoveredSet()){var r=this.op.isCoveredByA(n.getCoordinate());i.setCovered(r)}}},labelIsolatedLines:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),i=n.getLabel();n.isIsolated()&&(i.isNull(0)?this.labelIsolatedLine(n,0):this.labelIsolatedLine(n,1))}},buildLines:function(t){for(var e=this.lineEdgesList.iterator();e.hasNext();){var n=e.next(),i=(n.getLabel(),this.geometryFactory.createLineString(n.getCoordinates()));this.resultLineList.add(i),n.setInResult(!0)}},collectBoundaryTouchEdge:function(t,e,n){var i=t.getLabel();return t.isLineEdge()?null:t.isVisited()?null:t.isInteriorAreaEdge()?null:t.getEdge().isInResult()?null:(h.isTrue(!(t.isInResult()||t.getSym().isInResult())||!t.getEdge().isInResult()),void($n.isResultOfOp(i,e)&&e===$n.INTERSECTION&&(n.add(t.getEdge()),t.setVisitedEdge(!0))))},interfaces_:function(){return[]},getClass:function(){return In}}),io(Nn.prototype,{filterCoveredNodeToPoint:function(t){var e=t.getCoordinate();if(!this.op.isCoveredByLA(e)){var n=this.geometryFactory.createPoint(e);this.resultPointList.add(n)}},extractNonCoveredResultNodes:function(t){for(var e=this.op.getGraph().getNodes().iterator();e.hasNext();){var n=e.next();if(!n.isInResult()&&(!n.isIncidentEdgeInResult()&&(0===n.getEdges().getDegree()||t===$n.INTERSECTION))){var i=n.getLabel();$n.isResultOfOp(i,t)&&this.filterCoveredNodeToPoint(n)}}},build:function(t){return this.extractNonCoveredResultNodes(t),this.resultPointList},interfaces_:function(){return[]},getClass:function(){return Nn}}),io(Cn.prototype,{locate:function(t){},interfaces_:function(){return[]},getClass:function(){return Cn}}),io(Sn.prototype,{locate:function(t){return Sn.locate(t,this.geom)},interfaces_:function(){return[Cn]},getClass:function(){return Sn}}),Sn.isPointInRing=function(t,e){return!!e.getEnvelopeInternal().intersects(t)&&oe.isPointInRing(t,e.getCoordinates())},Sn.containsPointInPolygon=function(t,e){if(e.isEmpty())return!1;var n=e.getExteriorRing();if(!Sn.isPointInRing(t,n))return!1
;for(var i=0;i<e.getNumInteriorRing();i++){var r=e.getInteriorRingN(i);if(Sn.isPointInRing(t,r))return!1}return!0},Sn.containsPoint=function(t,e){if(e instanceof Lt)return Sn.containsPointInPolygon(t,e);if(e instanceof lt)for(var n=new Ce(e);n.hasNext();){var i=n.next();if(i!==e&&Sn.containsPoint(t,i))return!0}return!1},Sn.locate=function(t,e){return e.isEmpty()?S.EXTERIOR:Sn.containsPoint(t,e)?S.INTERIOR:S.EXTERIOR},io(Ln.prototype,{getNextCW:function(t){this.getEdges();var e=this.edgeList.indexOf(t),n=e-1;return 0===e&&(n=this.edgeList.size()-1),this.edgeList.get(n)},propagateSideLabels:function(t){for(var e=S.NONE,n=this.iterator();n.hasNext();){var i=n.next(),r=i.getLabel();r.isArea(t)&&r.getLocation(t,an.LEFT)!==S.NONE&&(e=r.getLocation(t,an.LEFT))}if(e===S.NONE)return null;for(var s=e,n=this.iterator();n.hasNext();){var i=n.next(),r=i.getLabel();if(r.getLocation(t,an.ON)===S.NONE&&r.setLocation(t,an.ON,s),r.isArea(t)){var o=r.getLocation(t,an.LEFT),a=r.getLocation(t,an.RIGHT);if(a!==S.NONE){if(a!==s)throw new tn("side location conflict",i.getCoordinate());o===S.NONE&&h.shouldNeverReachHere("found single null side (at "+i.getCoordinate()+")"),s=o}else h.isTrue(r.getLocation(t,an.LEFT)===S.NONE,"found single null side"),r.setLocation(t,an.RIGHT,s),r.setLocation(t,an.LEFT,s)}}},getCoordinate:function(){var t=this.iterator();return t.hasNext()?t.next().getCoordinate():null},print:function(t){_.out.println("EdgeEndStar:   "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){e.next().print(t)}},isAreaLabelsConsistent:function(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},checkAreaLabelsConsistent:function(t){var e=this.getEdges();if(e.size()<=0)return!0;var n=e.size()-1,i=e.get(n).getLabel(),r=i.getLocation(t,an.LEFT);h.isTrue(r!==S.NONE,"Found unlabelled area edge");for(var s=r,o=this.iterator();o.hasNext();){var a=o.next(),u=a.getLabel();h.isTrue(u.isArea(t),"Found non-area edge");var l=u.getLocation(t,an.LEFT),c=u.getLocation(t,an.RIGHT);if(l===c)return!1;if(c!==s)return!1;s=l}return!0},findIndex:function(t){this.iterator();for(var e=0;e<this.edgeList.size();e++){if(this.edgeList.get(e)===t)return e}return-1},iterator:function(){return this.getEdges().iterator()},getEdges:function(){return null===this.edgeList&&(this.edgeList=new x(this.edgeMap.values())),this.edgeList},getLocation:function(t,e,n){return this.ptInAreaLocation[t]===S.NONE&&(this.ptInAreaLocation[t]=Sn.locate(e,n[t].getGeometry())),this.ptInAreaLocation[t]},toString:function(){var t=new w;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append("\n");for(var e=this.iterator();e.hasNext();){var n=e.next();t.append(n),t.append("\n")}return t.toString()},computeEdgeEndLabels:function(t){for(var e=this.iterator();e.hasNext();){e.next().computeLabel(t)}},computeLabelling:function(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var e=[!1,!1],n=this.iterator();n.hasNext();)for(var i=n.next(),r=i.getLabel(),s=0;s<2;s++)r.isLine(s)&&r.getLocation(s)===S.BOUNDARY&&(e[s]=!0);for(var n=this.iterator();n.hasNext();)for(var i=n.next(),r=i.getLabel(),s=0;s<2;s++)if(r.isAnyNull(s)){var o=S.NONE;if(e[s])o=S.EXTERIOR;else{var a=i.getCoordinate();o=this.getLocation(s,a,t)}r.setAllLocationsIfNull(s,o)}},getDegree:function(){return this.edgeMap.size()},insertEdgeEnd:function(t,e){this.edgeMap.put(t,e),this.edgeList=null},interfaces_:function(){return[]},getClass:function(){return Ln}}),ro(wn,Ln),io(wn.prototype,{linkResultDirectedEdges:function(){this.getResultAreaEdges();for(var t=null,e=null,n=this.SCANNING_FOR_INCOMING,i=0;i<this.resultAreaEdgeList.size();i++){var r=this.resultAreaEdgeList.get(i),s=r.getSym();if(r.getLabel().isArea())switch(null===t&&r.isInResult()&&(t=r),n){case this.SCANNING_FOR_INCOMING:if(!s.isInResult())continue;e=s,n=this.LINKING_TO_OUTGOING;break;case this.LINKING_TO_OUTGOING:if(!r.isInResult())continue;e.setNext(r),n=this.SCANNING_FOR_INCOMING}}if(n===this.LINKING_TO_OUTGOING){if(null===t)throw new tn("no outgoing dirEdge found",this.getCoordinate());h.isTrue(t.isInResult(),"unable to link last incoming dirEdge"),e.setNext(t)}},insert:function(t){var e=t;this.insertEdgeEnd(e,e)},getRightmostEdge:function(){var t=this.getEdges(),e=t.size();if(e<1)return null;var n=t.get(0);if(1===e)return n;var i=t.get(e-1),r=n.getQuadrant(),s=i.getQuadrant();if(je.isNorthern(r)&&je.isNorthern(s))return n;if(!je.isNorthern(r)&&!je.isNorthern(s))return i;return 0!==n.getDy()?n:0!==i.getDy()?i:(h.shouldNeverReachHere("found two horizontal edges incident on node"),null)},print:function(t){_.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){var n=e.next();t.print("out "),n.print(t),t.println(),t.print("in "),n.getSym().print(t),t.println()}},getResultAreaEdges:function(){if(null!==this.resultAreaEdgeList)return this.resultAreaEdgeList;this.resultAreaEdgeList=new x;for(var t=this.iterator();t.hasNext();){var e=t.next();(e.isInResult()||e.getSym().isInResult())&&this.resultAreaEdgeList.add(e)}return this.resultAreaEdgeList},updateLabelling:function(t){for(var e=this.iterator();e.hasNext();){var n=e.next(),i=n.getLabel();i.setAllLocationsIfNull(0,t.getLocation(0)),i.setAllLocationsIfNull(1,t.getLocation(1))}},linkAllDirectedEdges:function(){this.getEdges();for(var t=null,e=null,n=this.edgeList.size()-1;n>=0;n--){var i=this.edgeList.get(n),r=i.getSym();null===e&&(e=r),null!==t&&r.setNext(t),t=i}e.setNext(t)},computeDepths:function(){if(1===arguments.length){var t=arguments[0],e=this.findIndex(t),n=(t.getLabel(),t.getDepth(an.LEFT)),i=t.getDepth(an.RIGHT),r=this.computeDepths(e+1,this.edgeList.size(),n);if(this.computeDepths(0,e,r)!==i)throw new tn("depth mismatch at "+t.getCoordinate())}else if(3===arguments.length){for(var s=arguments[0],o=arguments[1],a=arguments[2],u=a,l=s;l<o;l++){var h=this.edgeList.get(l);h.getLabel();h.setEdgeDepths(an.RIGHT,u),u=h.getDepth(an.LEFT)}return u}},mergeSymLabels:function(){for(var t=this.iterator();t.hasNext();){var e=t.next();e.getLabel().merge(e.getSym().getLabel())}},linkMinimalDirectedEdges:function(t){for(var e=null,n=null,i=this.SCANNING_FOR_INCOMING,r=this.resultAreaEdgeList.size()-1;r>=0;r--){var s=this.resultAreaEdgeList.get(r),o=s.getSym();switch(null===e&&s.getEdgeRing()===t&&(e=s),i){case this.SCANNING_FOR_INCOMING:if(o.getEdgeRing()!==t)continue;n=o,i=this.LINKING_TO_OUTGOING;break;case this.LINKING_TO_OUTGOING:if(s.getEdgeRing()!==t)continue;n.setNextMin(s),i=this.SCANNING_FOR_INCOMING}}i===this.LINKING_TO_OUTGOING&&(h.isTrue(null!==e,"found null for first outgoing dirEdge"),h.isTrue(e.getEdgeRing()===t,"unable to link last incoming dirEdge"),n.setNextMin(e))},getOutgoingDegree:function(){if(0===arguments.length){for(var t=0,e=this.iterator();e.hasNext();){var n=e.next();n.isInResult()&&t++}return t}if(1===arguments.length){for(var i=arguments[0],t=0,e=this.iterator();e.hasNext();){var n=e.next();n.getEdgeRing()===i&&t++}return t}},getLabel:function(){return this.label},findCoveredLineEdges:function(){for(var t=S.NONE,e=this.iterator();e.hasNext();){var n=e.next(),i=n.getSym();if(!n.isLineEdge()){if(n.isInResult()){t=S.INTERIOR;break}if(i.isInResult()){t=S.EXTERIOR;break}}}if(t===S.NONE)return null;for(var r=t,e=this.iterator();e.hasNext();){var n=e.next(),i=n.getSym();n.isLineEdge()?n.getEdge().setCovered(r===S.INTERIOR):(n.isInResult()&&(r=S.EXTERIOR),i.isInResult()&&(r=S.INTERIOR))}},computeLabelling:function(t){Ln.prototype.computeLabelling.call(this,t),this.label=new ln(S.NONE);for(var e=this.iterator();e.hasNext();)for(var n=e.next(),i=n.getEdge(),r=i.getLabel(),s=0;s<2;s++){var o=r.getLocation(s);o!==S.INTERIOR&&o!==S.BOUNDARY||this.label.setLocation(s,S.INTERIOR)}},interfaces_:function(){return[]},getClass:function(){return wn}}),ro(Rn,yn),io(Rn.prototype,{createNode:function(t){return new dn(t,new wn)},interfaces_:function(){return[]},getClass:function(){return Rn}}),io(Tn.prototype,{computeIntersections:function(t,e){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,e)},interfaces_:function(){return[]},getClass:function(){return Tn}}),io(On.prototype,{isDelete:function(){return this.eventType===On.DELETE},setDeleteEventIndex:function(t){this.deleteEventIndex=t},getObject:function(){return this.obj},compareTo:function(t){var e=t;return this.xValue<e.xValue?-1:this.xValue>e.xValue?1:this.eventType<e.eventType?-1:this.eventType>e.eventType?1:0},getInsertEvent:function(){return this.insertEvent},isInsert:function(){return this.eventType===On.INSERT},isSameLabel:function(t){return null!==this.label&&this.label===t.label},getDeleteEventIndex:function(){return this.deleteEventIndex},interfaces_:function(){return[r]},getClass:function(){return On}}),On.INSERT=1,On.DELETE=2,io(Pn.prototype,{interfaces_:function(){return[]},getClass:function(){return Pn}}),io(bn.prototype,{isTrivialIntersection:function(t,e,n,i){if(t===n&&1===this.li.getIntersectionNum()){if(bn.isAdjacentSegments(e,i))return!0;if(t.isClosed()){var r=t.getNumPoints()-1;if(0===e&&i===r||0===i&&e===r)return!0}}return!1},getProperIntersectionPoint:function(){return this.properIntersectionPoint},setIsDoneIfProperInt:function(t){this.isDoneWhenProperInt=t},hasProperInteriorIntersection:function(){return this.hasProperInterior},isBoundaryPointInternal:function(t,e){for(var n=e.iterator();n.hasNext();){var i=n.next(),r=i.getCoordinate();if(t.isIntersection(r))return!0}return!1},hasProperIntersection:function(){return this.hasProper},hasIntersection:function(){return this._hasIntersection},isDone:function(){return this._isDone},isBoundaryPoint:function(t,e){return null!==e&&(!!this.isBoundaryPointInternal(t,e[0])||!!this.isBoundaryPointInternal(t,e[1]))},setBoundaryNodes:function(t,e){this.bdyNodes=new Array(2).fill(null),this.bdyNodes[0]=t,this.bdyNodes[1]=e},addIntersections:function(t,e,n,i){if(t===n&&e===i)return null;this.numTests++;var r=t.getCoordinates()[e],s=t.getCoordinates()[e+1],o=n.getCoordinates()[i],a=n.getCoordinates()[i+1];this.li.computeIntersection(r,s,o,a),this.li.hasIntersection()&&(this.recordIsolated&&(t.setIsolated(!1),n.setIsolated(!1)),this.numIntersections++,this.isTrivialIntersection(t,e,n,i)||(this._hasIntersection=!0,!this.includeProper&&this.li.isProper()||(t.addIntersections(this.li,e,0),n.addIntersections(this.li,i,1)),this.li.isProper()&&(this.properIntersectionPoint=this.li.getIntersection(0).copy(),this.hasProper=!0,this.isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this.li,this.bdyNodes)||(this.hasProperInterior=!0))))},interfaces_:function(){return[]},getClass:function(){return bn}}),bn.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)},ro(_n,Pn),io(_n.prototype,{prepareEvents:function(){xo.sort(this.events);for(var t=0;t<this.events.size();t++){var e=this.events.get(t);e.isDelete()&&e.getInsertEvent().setDeleteEventIndex(t)}},computeIntersections:function(){if(1===arguments.length){var t=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var e=0;e<this.events.size();e++){var n=this.events.get(e);if(n.isInsert()&&this.processOverlaps(e,n.getDeleteEventIndex(),n,t),t.isDone())break}}else if(3===arguments.length)if(arguments[2]instanceof bn&&oo(arguments[0],m)&&oo(arguments[1],m)){var i=arguments[0],r=arguments[1],s=arguments[2];this.addEdges(i,i),this.addEdges(r,r),this.computeIntersections(s)}else if("boolean"==typeof arguments[2]&&oo(arguments[0],m)&&arguments[1]instanceof bn){var o=arguments[0],a=arguments[1],u=arguments[2];u?this.addEdges(o,null):this.addEdges(o),this.computeIntersections(a)}},addEdge:function(t,e){for(var n=t.getMonotoneChainEdge(),i=n.getStartIndexes(),r=0;r<i.length-1;r++){var s=new Tn(n,r),o=new On(e,n.getMinX(r),s);this.events.add(o),this.events.add(new On(n.getMaxX(r),o))}},processOverlaps:function(t,e,n,i){for(var r=n.getObject(),s=t;s<e;s++){var o=this.events.get(s);if(o.isInsert()){var a=o.getObject();n.isSameLabel(o)||(r.computeIntersections(a,i),this.nOverlaps++)}}},addEdges:function(){if(1===arguments.length)for(var t=arguments[0],e=t.iterator();e.hasNext();){var n=e.next();this.addEdge(n,n)}else if(2===arguments.length)for(var i=arguments[0],r=arguments[1],e=i.iterator();e.hasNext();){var n=e.next();this.addEdge(n,r)}},interfaces_:function(){return[]},getClass:function(){return _n}}),io(Mn.prototype,{getMin:function(){return this.min},intersects:function(t,e){return!(this.min>e||this.max<t)},getMax:function(){return this.max},toString:function(){return ee.toLineString(new c(this.min,0),new c(this.max,0))},interfaces_:function(){return[]},getClass:function(){return Mn}}),io(Dn.prototype,{compare:function(t,e){var n=t,i=e,r=(n.min+n.max)/2,s=(i.min+i.max)/2;return r<s?-1:r>s?1:0},interfaces_:function(){return[o]},getClass:function(){return Dn}}),Mn.NodeComparator=Dn,ro(An,Mn),io(An.prototype,{query:function(t,e,n){if(!this.intersects(t,e))return null;n.visitItem(this.item)},interfaces_:function(){return[]},getClass:function(){return An}}),ro(Fn,Mn),io(Fn.prototype,{buildExtent:function(t,e){this.min=Math.min(t.min,e.min),this.max=Math.max(t.max,e.max)},query:function(t,e,n){if(!this.intersects(t,e))return null;null!==this.node1&&this.node1.query(t,e,n),null!==this.node2&&this.node2.query(t,e,n)},interfaces_:function(){return[]},getClass:function(){return Fn}}),io(Gn.prototype,{buildTree:function(){xo.sort(this.leaves,new IntervalRTreeNode.NodeComparator);for(var t=this.leaves,e=null,n=new x;;){if(this.buildLevel(t,n),1===n.size())return n.get(0);e=t,t=n,n=e}},insert:function(t,e,n){if(null!==this.root)throw new IllegalStateException("Index cannot be added to once it has been queried");this.leaves.add(new An(t,e,n))},query:function(t,e,n){this.init(),this.root.query(t,e,n)},buildRoot:function(){if(null!==this.root)return null;this.root=this.buildTree()},printNode:function(t){_.out.println(ee.toLineString(new c(t.min,this.level),new c(t.max,this.level)))},init:function(){if(null!==this.root)return null;this.buildRoot()},buildLevel:function(t,e){this.level++,e.clear();for(var n=0;n<t.size();n+=2){var i=t.get(n);if(null===(n+1<t.size()?t.get(n):null))e.add(i);else{var r=new Fn(t.get(n),t.get(n+1));e.add(r)}}},interfaces_:function(){return[]},getClass:function(){return Gn}}),io(qn.prototype,{filter:function(t){if(this.isForcedToLineString&&t instanceof Rt){var e=t.getFactory().createLineString(t.getCoordinateSequence());return this.lines.add(e),null}t instanceof It&&this.lines.add(t)},setForceToLineString:function(t){this.isForcedToLineString=t},interfaces_:function(){return[A]},getClass:function(){return qn}}),qn.getGeometry=function(){if(1===arguments.length){var t=arguments[0];return t.getFactory().buildGeometry(qn.getLines(t))}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().buildGeometry(qn.getLines(e,n))}},qn.getLines=function(){if(1===arguments.length){var t=arguments[0];return qn.getLines(t,!1)}if(2===arguments.length){if(oo(arguments[0],d)&&oo(arguments[1],d)){for(var e=arguments[0],n=arguments[1],i=e.iterator();i.hasNext();){var r=i.next();qn.getLines(r,n)}return n}if(arguments[0]instanceof F&&"boolean"==typeof arguments[1]){var s=arguments[0],o=arguments[1],a=new x;return s.apply(new qn(a,o)),a}if(arguments[0]instanceof F&&oo(arguments[1],d)){var u=arguments[0],l=arguments[1];return u instanceof It?l.add(u):u.apply(new qn(l)),l}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&oo(arguments[0],d)&&oo(arguments[1],d)){for(var h=arguments[0],c=arguments[1],f=arguments[2],i=h.iterator();i.hasNext();){var r=i.next();qn.getLines(r,c,f)}return c}if("boolean"==typeof arguments[2]&&arguments[0]instanceof F&&oo(arguments[1],d)){var g=arguments[0],p=arguments[1],m=arguments[2];return g.apply(new qn(p,m)),p}}},io(Bn.prototype,{visitItem:function(t){this.items.add(t)},getItems:function(){return this.items},interfaces_:function(){return[be]},getClass:function(){return Bn}}),io(Vn.prototype,{locate:function(t){var e=new se(t),n=new zn(e);return this.index.query(t.y,t.y,n),e.getLocation()},interfaces_:function(){return[Cn]},getClass:function(){return Vn}}),io(zn.prototype,{visitItem:function(t){var e=t;this.counter.countSegment(e.getCoordinate(0),e.getCoordinate(1))},interfaces_:function(){return[be]},getClass:function(){return zn}}),io(kn.prototype,{init:function(t){for(var e=qn.getLines(t),n=e.iterator();n.hasNext();){var i=n.next(),r=i.getCoordinates();this.addLine(r)}},addLine:function(t){for(var e=1;e<t.length;e++){var n=new ae(t[e-1],t[e]),i=Math.min(n.p0.y,n.p1.y),r=Math.max(n.p0.y,n.p1.y);this.index.insert(i,r,n)}},query:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new Bn;return this.index.query(t,e,n),n.getItems()}if(3===arguments.length){var i=arguments[0],r=arguments[1],s=arguments[2];this.index.query(i,r,s)}},interfaces_:function(){return[]},getClass:function(){return kn}}),Vn.SegmentVisitor=zn,Vn.IntervalIndexedGeometry=kn,io(Yn.prototype,{getSegmentIndex:function(){return this.segmentIndex},getCoordinate:function(){return this.coord},print:function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)},compareTo:function(t){var e=t;return this.compare(e.segmentIndex,e.dist)},isEndPoint:function(t){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===t},toString:function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},getDistance:function(){return this.dist},compare:function(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0},interfaces_:function(){return[r]},getClass:function(){return Yn}}),io(Un.prototype,{print:function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();){e.next().print(t)}},iterator:function(){return this.nodeMap.values().iterator()},addSplitEdges:function(t){this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var i=e.next(),r=this.createSplitEdge(n,i);t.add(r),n=i}},addEndpoints:function(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)},createSplitEdge:function(t,e){var n=e.segmentIndex-t.segmentIndex+2,i=this.edge.pts[e.segmentIndex],r=e.dist>0||!e.coord.equals2D(i);r||n--;var s=new Array(n).fill(null),o=0;s[o++]=new c(t.coord);for(var a=t.segmentIndex+1;a<=e.segmentIndex;a++)s[o++]=this.edge.pts[a];return r&&(s[o]=e.coord),new jn(s,new ln(this.edge.label))},add:function(t,e,n){var i=new Yn(t,e,n),r=this.nodeMap.get(i);return null!==r?r:(this.nodeMap.put(i,i),i)},isIntersection:function(t){for(var e=this.iterator();e.hasNext();){if(e.next().coord.equals(t))return!0}return!1},interfaces_:function(){return[]},getClass:function(){return Un}}),io(Xn.prototype,{getChainStartIndices:function(t){var e=0,n=new x;n.add(new R(e));do{var i=this.findChainEnd(t,e);n.add(new R(i)),e=i}while(e<t.length-1);return Xn.toIntArray(n)},findChainEnd:function(t,e){for(var n=je.quadrant(t[e],t[e+1]),i=e+1;i<t.length;){if(je.quadrant(t[i-1],t[i])!==n)break;i++}return i-1},interfaces_:function(){return[]},getClass:function(){return Xn}}),Xn.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e},io(Hn.prototype,{getCoordinates:function(){return this.pts},getMaxX:function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e>n?e:n},getMinX:function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e<n?e:n},computeIntersectsForChain:function(){if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[n],e.startIndex[n+1],i)}else if(6===arguments.length){var r=arguments[0],s=arguments[1],o=arguments[2],a=arguments[3],u=arguments[4],l=arguments[5],h=this.pts[r],c=this.pts[s],f=o.pts[a],g=o.pts[u];if(s-r==1&&u-a==1)return l.addIntersections(this.e,r,o.e,a),null;if(this.env1.init(h,c),this.env2.init(f,g),!this.env1.intersects(this.env2))return null;var d=Math.trunc((r+s)/2),p=Math.trunc((a+u)/2);r<d&&(a<p&&this.computeIntersectsForChain(r,d,o,a,p,l),p<u&&this.computeIntersectsForChain(r,d,o,p,u,l)),d<s&&(a<p&&this.computeIntersectsForChain(d,s,o,a,p,l),p<u&&this.computeIntersectsForChain(d,s,o,p,u,l))}},getStartIndexes:function(){return this.startIndex},computeIntersects:function(t,e){for(var n=0;n<this.startIndex.length-1;n++)for(var i=0;i<t.startIndex.length-1;i++)this.computeIntersectsForChain(n,t,i,e)},interfaces_:function(){return[]},getClass:function(){return Hn}}),io(Wn.prototype,{getDepth:function(t,e){return this.depth[t][e]},setDepth:function(t,e,n){this.depth[t][e]=n},isNull:function(){if(0===arguments.length){for(var t=0;t<2;t++)for(var e=0;e<3;e++)if(this.depth[t][e]!==Wn.NULL_VALUE)return!1;return!0}if(1===arguments.length){var n=arguments[0];return this.depth[n][1]===Wn.NULL_VALUE}if(2===arguments.length){var i=arguments[0],r=arguments[1];return this.depth[i][r]===Wn.NULL_VALUE}},normalize:function(){for(var t=0;t<2;t++)if(!this.isNull(t)){var e=this.depth[t][1];this.depth[t][2]<e&&(e=this.depth[t][2]),e<0&&(e=0);for(var n=1;n<3;n++){var i=0;this.depth[t][n]>e&&(i=1),this.depth[t][n]=i}}},getDelta:function(t){return this.depth[t][an.RIGHT]-this.depth[t][an.LEFT]},getLocation:function(t,e){return this.depth[t][e]<=0?S.EXTERIOR:S.INTERIOR},toString:function(){return"A: "+this.depth[0][1]+","+this.depth[0][2]+" B: "+this.depth[1][1]+","+this.depth[1][2]},add:function(){if(1===arguments.length)for(var t=arguments[0],e=0;e<2;e++)for(var n=1;n<3;n++){var i=t.getLocation(e,n);i!==S.EXTERIOR&&i!==S.INTERIOR||(this.isNull(e,n)?this.depth[e][n]=Wn.depthAtLocation(i):this.depth[e][n]+=Wn.depthAtLocation(i))}else if(3===arguments.length){var r=arguments[0],s=arguments[1],o=arguments[2];o===S.INTERIOR&&this.depth[r][s]++}},interfaces_:function(){return[]},getClass:function(){return Wn}}),Wn.depthAtLocation=function(t){return t===S.EXTERIOR?0:t===S.INTERIOR?1:Wn.NULL_VALUE},Wn.NULL_VALUE=-1,ro(jn,gn),io(jn.prototype,{getDepth:function(){return this.depth},getCollapsedEdge:function(){var t=new Array(2).fill(null);return t[0]=this.pts[0],t[1]=this.pts[1],new jn(t,ln.toLineLabel(this.label))},isIsolated:function(){return this._isIsolated},getCoordinates:function(){return this.pts},setIsolated:function(t){this._isIsolated=t},setName:function(t){this.name=t},equals:function(t){if(!(t instanceof jn))return!1;var e=t;if(this.pts.length!==e.pts.length)return!1;for(var n=!0,i=!0,r=this.pts.length,s=0;s<this.pts.length;s++)if(this.pts[s].equals2D(e.pts[s])||(n=!1),this.pts[s].equals2D(e.pts[--r])||(i=!1),!n&&!i)return!1;return!0},getCoordinate:function(){if(0===arguments.length)return this.pts.length>0?this.pts[0]:null;if(1===arguments.length){var t=arguments[0];return this.pts[t]}},print:function(t){t.print("edge "+this.name+": "),t.print("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.print(","),t.print(this.pts[e].x+" "+this.pts[e].y);t.print(")  "+this.label+" "+this.depthDelta)},computeIM:function(t){jn.updateIM(this.label,t)},isCollapsed:function(){return!!this.label.isArea()&&(3===this.pts.length&&!!this.pts[0].equals(this.pts[2]))},isClosed:function(){return this.pts[0].equals(this.pts[this.pts.length-1])},getMaximumSegmentIndex:function(){return this.pts.length-1},getDepthDelta:function(){return this.depthDelta},getNumPoints:function(){return this.pts.length},printReverse:function(t){t.print("edge "+this.name+": ");for(var e=this.pts.length-1;e>=0;e--)t.print(this.pts[e]+" ");t.println("")},getMonotoneChainEdge:function(){return null===this.mce&&(this.mce=new Hn(this)),this.mce},getEnvelope:function(){if(null===this.env){this.env=new I;for(var t=0;t<this.pts.length;t++)this.env.expandToInclude(this.pts[t])}return this.env},addIntersection:function(t,e,n,i){var r=new c(t.getIntersection(i)),s=e,o=t.getEdgeDistance(n,i),a=s+1;if(a<this.pts.length){var u=this.pts[a];r.equals2D(u)&&(s=a,o=0)}this.eiList.add(r,s,o)},toString:function(){var t=new w;t.append("edge "+this.name+": "),t.append("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.append(","),t.append(this.pts[e].x+" "+this.pts[e].y);return t.append(")  "+this.label+" "+this.depthDelta),t.toString()},isPointwiseEqual:function(t){if(this.pts.length!==t.pts.length)return!1;for(var e=0;e<this.pts.length;e++)if(!this.pts[e].equals2D(t.pts[e]))return!1;return!0},setDepthDelta:function(t){this.depthDelta=t},getEdgeIntersectionList:function(){return this.eiList},addIntersections:function(t,e,n){for(var i=0;i<t.getIntersectionNum();i++)this.addIntersection(t,e,n,i)},interfaces_:function(){return[]},getClass:function(){return jn}}),jn.updateIM=function(){if(2!==arguments.length)return gn.prototype.updateIM.apply(this,arguments);var t=arguments[0],e=arguments[1];e.setAtLeastIfValid(t.getLocation(0,an.ON),t.getLocation(1,an.ON),1),t.isArea()&&(e.setAtLeastIfValid(t.getLocation(0,an.LEFT),t.getLocation(1,an.LEFT),2),e.setAtLeastIfValid(t.getLocation(0,an.RIGHT),t.getLocation(1,an.RIGHT),2))},ro(Kn,xn),io(Kn.prototype,{insertBoundaryPoint:function(t,e){var n=this.nodes.addNode(e),i=n.getLabel(),r=1,s=S.NONE;(s=i.getLocation(t,an.ON))===S.BOUNDARY&&r++;var o=Kn.determineBoundary(this.boundaryNodeRule,r);i.setLocation(t,o)},computeSelfNodes:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.computeSelfNodes(t,e,!1)}if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2],s=new bn(n,!0,!1);s.setIsDoneIfProperInt(r);var o=this.createEdgeSetIntersector(),a=this.parentGeom instanceof Rt||this.parentGeom instanceof Lt||this.parentGeom instanceof Tt,u=i||!a;return o.computeIntersections(this.edges,s,u),this.addSelfIntersectionNodes(this.argIndex),s}},computeSplitEdges:function(t){for(var e=this.edges.iterator();e.hasNext();){e.next().eiList.addSplitEdges(t)}},computeEdgeIntersections:function(t,e,n){var i=new bn(e,n,!0);return i.setBoundaryNodes(this.getBoundaryNodes(),t.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this.edges,t.edges,i),i},getGeometry:function(){return this.parentGeom},getBoundaryNodeRule:function(){return this.boundaryNodeRule},hasTooFewPoints:function(){return this._hasTooFewPoints},addPoint:function(){if(arguments[0]instanceof Ct){var t=arguments[0],e=t.getCoordinate();this.insertPoint(this.argIndex,e,S.INTERIOR)}else if(arguments[0]instanceof c){var n=arguments[0];this.insertPoint(this.argIndex,n,S.INTERIOR)}},addPolygon:function(t){this.addPolygonRing(t.getExteriorRing(),S.EXTERIOR,S.INTERIOR);for(var e=0;e<t.getNumInteriorRing();e++){var n=t.getInteriorRingN(e);this.addPolygonRing(n,S.INTERIOR,S.EXTERIOR)}},addEdge:function(t){this.insertEdge(t);var e=t.getCoordinates();this.insertPoint(this.argIndex,e[0],S.BOUNDARY),this.insertPoint(this.argIndex,e[e.length-1],S.BOUNDARY)},addLineString:function(t){var e=Y.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return this._hasTooFewPoints=!0,this.invalidPoint=e[0],null;var n=new jn(e,new ln(this.argIndex,S.INTERIOR));this.lineEdgeMap.put(t,n),this.insertEdge(n),h.isTrue(e.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this.argIndex,e[0]),this.insertBoundaryPoint(this.argIndex,e[e.length-1])},getInvalidPoint:function(){return this.invalidPoint},getBoundaryPoints:function(){for(var t=this.getBoundaryNodes(),e=new Array(t.size()).fill(null),n=0,i=t.iterator();i.hasNext();){var r=i.next();e[n++]=r.getCoordinate().copy()}return e},getBoundaryNodes:function(){return null===this.boundaryNodes&&(this.boundaryNodes=this.nodes.getBoundaryNodes(this.argIndex)),this.boundaryNodes},addSelfIntersectionNode:function(t,e,n){if(this.isBoundaryNode(t,e))return null;n===S.BOUNDARY&&this.useBoundaryDeterminationRule?this.insertBoundaryPoint(t,e):this.insertPoint(t,e,n)},addPolygonRing:function(t,e,n){if(t.isEmpty())return null;var i=Y.removeRepeatedPoints(t.getCoordinates());if(i.length<4)return this._hasTooFewPoints=!0,this.invalidPoint=i[0],null;var r=e,s=n;oe.isCCW(i)&&(r=n,s=e);var o=new jn(i,new ln(this.argIndex,S.BOUNDARY,r,s));this.lineEdgeMap.put(t,o),this.insertEdge(o),this.insertPoint(this.argIndex,i[0],S.BOUNDARY)},insertPoint:function(t,e,n){var i=this.nodes.addNode(e),r=i.getLabel();null===r?i.label=new ln(t,n):r.setLocation(t,n)},createEdgeSetIntersector:function(){return new _n},addSelfIntersectionNodes:function(t){for(var e=this.edges.iterator();e.hasNext();)for(var n=e.next(),i=n.getLabel().getLocation(t),r=n.eiList.iterator();r.hasNext();){var s=r.next();this.addSelfIntersectionNode(t,s.coord,i)}},add:function(){if(1!==arguments.length)return xn.prototype.add.apply(this,arguments);var t=arguments[0];if(t.isEmpty())return null;if(t instanceof Tt&&(this.useBoundaryDeterminationRule=!1),t instanceof Lt)this.addPolygon(t);else if(t instanceof It)this.addLineString(t);else if(t instanceof Ct)this.addPoint(t);else if(t instanceof wt)this.addCollection(t);else if(t instanceof ht)this.addCollection(t);else if(t instanceof Tt)this.addCollection(t);else{if(!(t instanceof lt))throw new UnsupportedOperationException(t.getClass().getName());this.addCollection(t)}},addCollection:function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},locate:function(t){return oo(this.parentGeom,St)&&this.parentGeom.getNumGeometries()>50?(null===this.areaPtLocator&&(this.areaPtLocator=new Vn(this.parentGeom)),this.areaPtLocator.locate(t)):this.ptLocator.locate(t,this.parentGeom)},findEdge:function(){if(1===arguments.length){var t=arguments[0];return this.lineEdgeMap.get(t)}return xn.prototype.findEdge.apply(this,arguments)},interfaces_:function(){return[]},getClass:function(){return Kn}}),Kn.determineBoundary=function(t,e){return t.isInBoundary(e)?S.BOUNDARY:S.INTERIOR},io(Zn.prototype,{getArgGeometry:function(t){return this.arg[t].getGeometry()},setComputationPrecision:function(t){this.resultPrecisionModel=t,this.li.setPrecisionModel(this.resultPrecisionModel)},interfaces_:function(){return[]},getClass:function(){return Zn}}),io(Qn.prototype,{compareTo:function(t){var e=t;return Qn.compareOriented(this.pts,this._orientation,e.pts,e._orientation)},interfaces_:function(){return[r]},getClass:function(){return Qn}}),Qn.orientation=function(t){return 1===Y.increasingDirection(t)},Qn.compareOriented=function(t,e,n,i){for(var r=e?1:-1,s=i?1:-1,o=e?t.length:-1,a=i?n.length:-1,u=e?0:t.length-1,l=i?0:n.length-1;;){var h=t[u].compareTo(n[l]);if(0!==h)return h;u+=r,l+=s;var c=u===o,f=l===a;if(c&&!f)return-1;if(!c&&f)return 1;if(c&&f)return 0}},io(Jn.prototype,{print:function(t){t.print("MULTILINESTRING ( ");for(var e=0;e<this.edges.size();e++){var n=this.edges.get(e);e>0&&t.print(","),t.print("(");for(var i=n.getCoordinates(),r=0;r<i.length;r++)r>0&&t.print(","),t.print(i[r].x+" "+i[r].y);t.println(")")}t.print(")  ")},addAll:function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next())},findEdgeIndex:function(t){for(var e=0;e<this.edges.size();e++)if(this.edges.get(e).equals(t))return e;return-1},iterator:function(){return this.edges.iterator()},getEdges:function(){return this.edges},get:function(t){return this.edges.get(t)},findEqualEdge:function(t){var e=new Qn(t.getCoordinates());return this.ocaMap.get(e)},add:function(t){this.edges.add(t);var e=new Qn(t.getCoordinates());this.ocaMap.put(e,t)},interfaces_:function(){return[]},getClass:function(){return Jn}}),ro($n,Zn),io($n.prototype,{insertUniqueEdge:function(t){var e=this.edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),i=t.getLabel();e.isPointwiseEqual(t)||(i=new ln(t.getLabel()),i.flip());var r=e.getDepth();r.isNull()&&r.add(n),r.add(i),n.merge(i)}else this.edgeList.add(t)},getGraph:function(){return this.graph},cancelDuplicateResultEdges:function(){for(var t=this.graph.getEdgeEnds().iterator();t.hasNext();){var e=t.next(),n=e.getSym();e.isInResult()&&n.isInResult()&&(e.setInResult(!1),n.setInResult(!1))}},isCoveredByLA:function(t){
return!!this.isCovered(t,this.resultLineList)||!!this.isCovered(t,this.resultPolyList)},computeGeometry:function(t,e,n,i){var r=new x;return r.addAll(t),r.addAll(e),r.addAll(n),r.isEmpty()?$n.createEmptyResult(i,this.arg[0].getGeometry(),this.arg[1].getGeometry(),this.geomFact):this.geomFact.buildGeometry(r)},mergeSymLabels:function(){for(var t=this.graph.getNodes().iterator();t.hasNext();){t.next().getEdges().mergeSymLabels()}},isCovered:function(t,e){for(var n=e.iterator();n.hasNext();){var i=n.next();if(this.ptLocator.locate(t,i)!==S.EXTERIOR)return!0}return!1},replaceCollapsedEdges:function(){for(var t=new x,e=this.edgeList.iterator();e.hasNext();){var n=e.next();n.isCollapsed()&&(e.remove(),t.add(n.getCollapsedEdge()))}this.edgeList.addAll(t)},updateNodeLabelling:function(){for(var t=this.graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getEdges().getLabel();e.getLabel().merge(n)}},getResultGeometry:function(t){return this.computeOverlay(t),this.resultGeom},insertUniqueEdges:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.insertUniqueEdge(n)}},computeOverlay:function(t){this.copyPoints(0),this.copyPoints(1),this.arg[0].computeSelfNodes(this.li,!1),this.arg[1].computeSelfNodes(this.li,!1),this.arg[0].computeEdgeIntersections(this.arg[1],this.li,!0);var e=new x;this.arg[0].computeSplitEdges(e),this.arg[1].computeSplitEdges(e);this.insertUniqueEdges(e),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),sn.checkValid(this.edgeList.getEdges()),this.graph.addEdges(this.edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(t),this.cancelDuplicateResultEdges();var n=new En(this.geomFact);n.add(this.graph),this.resultPolyList=n.getPolygons();var i=new In(this,this.geomFact,this.ptLocator);this.resultLineList=i.build(t);var r=new Nn(this,this.geomFact,this.ptLocator);this.resultPointList=r.build(t),this.resultGeom=this.computeGeometry(this.resultPointList,this.resultLineList,this.resultPolyList,t)},labelIncompleteNode:function(t,e){var n=this.ptLocator.locate(t.getCoordinate(),this.arg[e].getGeometry());t.getLabel().setLocation(e,n)},copyPoints:function(t){for(var e=this.arg[t].getNodeIterator();e.hasNext();){var n=e.next();this.graph.addNode(n.getCoordinate()).setLabel(t,n.getLabel().getLocation(t))}},findResultAreaEdges:function(t){for(var e=this.graph.getEdgeEnds().iterator();e.hasNext();){var n=e.next(),i=n.getLabel();i.isArea()&&!n.isInteriorAreaEdge()&&$n.isResultOfOp(i.getLocation(0,an.RIGHT),i.getLocation(1,an.RIGHT),t)&&n.setInResult(!0)}},computeLabelsFromDepths:function(){for(var t=this.edgeList.iterator();t.hasNext();){var e=t.next(),n=e.getLabel(),i=e.getDepth();if(!i.isNull()){i.normalize();for(var r=0;r<2;r++)n.isNull(r)||!n.isArea()||i.isNull(r)||(0===i.getDelta(r)?n.toLine(r):(h.isTrue(!i.isNull(r,an.LEFT),"depth of LEFT side has not been initialized"),n.setLocation(r,an.LEFT,i.getLocation(r,an.LEFT)),h.isTrue(!i.isNull(r,an.RIGHT),"depth of RIGHT side has not been initialized"),n.setLocation(r,an.RIGHT,i.getLocation(r,an.RIGHT))))}}},computeLabelling:function(){for(var t=this.graph.getNodes().iterator();t.hasNext();){t.next().getEdges().computeLabelling(this.arg)}this.mergeSymLabels(),this.updateNodeLabelling()},labelIncompleteNodes:function(){for(var t=0,e=this.graph.getNodes().iterator();e.hasNext();){var n=e.next(),i=n.getLabel();n.isIsolated()&&(t++,i.isNull(0)?this.labelIncompleteNode(n,0):this.labelIncompleteNode(n,1)),n.getEdges().updateLabelling(i)}},isCoveredByA:function(t){return!!this.isCovered(t,this.resultPolyList)},interfaces_:function(){return[]},getClass:function(){return $n}}),$n.overlayOp=function(t,e,n){return new $n(t,e).getResultGeometry(n)},$n.intersection=function(t,e){if(t.isEmpty()||e.isEmpty())return $n.createEmptyResult($n.INTERSECTION,t,e,t.getFactory());if(t.isGeometryCollection()){var n=e;return on.map(t,{interfaces_:function(){return[MapOp]},map:function(t){return t.intersection(n)}})}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),ei.overlayOp(t,e,$n.INTERSECTION)},$n.symDifference=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return $n.createEmptyResult($n.SYMDIFFERENCE,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),ei.overlayOp(t,e,$n.SYMDIFFERENCE)},$n.resultDimension=function(t,e,n){var i=e.getDimension(),r=n.getDimension(),s=-1;switch(t){case $n.INTERSECTION:s=Math.min(i,r);break;case $n.UNION:s=Math.max(i,r);break;case $n.DIFFERENCE:s=i;break;case $n.SYMDIFFERENCE:s=Math.max(i,r)}return s},$n.createEmptyResult=function(t,e,n,i){var r=null;switch($n.resultDimension(t,e,n)){case-1:r=i.createGeometryCollection(new Array(0).fill(null));break;case 0:r=i.createPoint();break;case 1:r=i.createLineString();break;case 2:r=i.createPolygon()}return r},$n.difference=function(t,e){return t.isEmpty()?$n.createEmptyResult($n.DIFFERENCE,t,e,t.getFactory()):e.isEmpty()?t.copy():(t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),ei.overlayOp(t,e,$n.DIFFERENCE))},$n.isResultOfOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=t.getLocation(0),i=t.getLocation(1);return $n.isResultOfOp(n,i,e)}if(3===arguments.length){var r=arguments[0],s=arguments[1],o=arguments[2];switch(r===S.BOUNDARY&&(r=S.INTERIOR),s===S.BOUNDARY&&(s=S.INTERIOR),o){case $n.INTERSECTION:return r===S.INTERIOR&&s===S.INTERIOR;case $n.UNION:return r===S.INTERIOR||s===S.INTERIOR;case $n.DIFFERENCE:return r===S.INTERIOR&&s!==S.INTERIOR;case $n.SYMDIFFERENCE:return r===S.INTERIOR&&s!==S.INTERIOR||r!==S.INTERIOR&&s===S.INTERIOR}return!1}},$n.INTERSECTION=1,$n.UNION=2,$n.DIFFERENCE=3,$n.SYMDIFFERENCE=4,io(ti.prototype,{selfSnap:function(t){return new ve(t).snapTo(t,this.snapTolerance)},removeCommonBits:function(t){this.cbr=new Ee,this.cbr.add(t[0]),this.cbr.add(t[1]);var e=new Array(2).fill(null);return e[0]=this.cbr.removeCommonBits(t[0].copy()),e[1]=this.cbr.removeCommonBits(t[1].copy()),e},prepareResult:function(t){return this.cbr.addCommonBits(t),t},getResultGeometry:function(t){var e=this.snap(this.geom),n=$n.overlayOp(e[0],e[1],t);return this.prepareResult(n)},checkValid:function(t){t.isValid()||_.out.println("Snapped geometry is invalid")},computeSnapTolerance:function(){this.snapTolerance=ve.computeOverlaySnapTolerance(this.geom[0],this.geom[1])},snap:function(t){var e=this.removeCommonBits(t);return ve.snap(e[0],e[1],this.snapTolerance)},interfaces_:function(){return[]},getClass:function(){return ti}}),ti.overlayOp=function(t,e,n){return new ti(t,e).getResultGeometry(n)},ti.union=function(t,e){return ti.overlayOp(t,e,$n.UNION)},ti.intersection=function(t,e){return ti.overlayOp(t,e,$n.INTERSECTION)},ti.symDifference=function(t,e){return ti.overlayOp(t,e,$n.SYMDIFFERENCE)},ti.difference=function(t,e){return ti.overlayOp(t,e,$n.DIFFERENCE)},io(ei.prototype,{getResultGeometry:function(t){var e=null,n=!1,i=null;try{e=$n.overlayOp(this.geom[0],this.geom[1],t);n=!0}catch(t){if(!(t instanceof u))throw t;i=t}if(!n)try{e=ti.overlayOp(this.geom[0],this.geom[1],t)}catch(t){throw t instanceof u?i:t}return e},interfaces_:function(){return[]},getClass:function(){return ei}}),ei.overlayOp=function(t,e,n){return new ei(t,e).getResultGeometry(n)},ei.union=function(t,e){return ei.overlayOp(t,e,$n.UNION)},ei.intersection=function(t,e){return ei.overlayOp(t,e,$n.INTERSECTION)},ei.symDifference=function(t,e){return ei.overlayOp(t,e,$n.SYMDIFFERENCE)},ei.difference=function(t,e){return ei.overlayOp(t,e,$n.DIFFERENCE)},io(ni.prototype,{addPolygon:function(t){if(t.isEmpty())return null;var e=null,n=0,i=this.horizontalBisector(t);if(0===i.getLength())n=0,e=i.getCoordinate();else{var r=ei.overlayOp(i,t,$n.INTERSECTION),s=this.widestGeometry(r);n=s.getEnvelopeInternal().getWidth(),e=ni.centre(s.getEnvelopeInternal())}(null===this.interiorPoint||n>this.maxWidth)&&(this.interiorPoint=e,this.maxWidth=n)},getInteriorPoint:function(){return this.interiorPoint},widestGeometry:function(){if(arguments[0]instanceof lt){var t=arguments[0];if(t.isEmpty())return t;for(var e=t.getGeometryN(0),n=1;n<t.getNumGeometries();n++)t.getGeometryN(n).getEnvelopeInternal().getWidth()>e.getEnvelopeInternal().getWidth()&&(e=t.getGeometryN(n));return e}if(arguments[0]instanceof F){var i=arguments[0];return i instanceof lt?this.widestGeometry(i):i}},horizontalBisector:function(t){var e=t.getEnvelopeInternal(),n=ii.getBisectorY(t);return this.factory.createLineString([new c(e.getMinX(),n),new c(e.getMaxX(),n)])},add:function(t){if(t instanceof Lt)this.addPolygon(t);else if(t instanceof lt)for(var e=t,n=0;n<e.getNumGeometries();n++)this.add(e.getGeometryN(n))},interfaces_:function(){return[]},getClass:function(){return ni}}),ni.centre=function(t){return new c(ni.avg(t.getMinX(),t.getMaxX()),ni.avg(t.getMinY(),t.getMaxY()))},ni.avg=function(t,e){return(t+e)/2},io(ii.prototype,{updateInterval:function(t){t<=this.centreY?t>this.loY&&(this.loY=t):t>this.centreY&&t<this.hiY&&(this.hiY=t)},getBisectorY:function(){this.process(this.poly.getExteriorRing());for(var t=0;t<this.poly.getNumInteriorRing();t++)this.process(this.poly.getInteriorRingN(t));return ni.avg(this.hiY,this.loY)},process:function(t){for(var e=t.getCoordinateSequence(),n=0;n<e.size();n++){var i=e.getY(n);this.updateInterval(i)}},interfaces_:function(){return[]},getClass:function(){return ii}}),ii.getBisectorY=function(t){return new ii(t).getBisectorY()},ni.SafeBisectorFinder=ii,io(ri.prototype,{addEndpoints:function(){if(arguments[0]instanceof F){var t=arguments[0];if(t instanceof It)this.addEndpoints(t.getCoordinates());else if(t instanceof lt)for(var e=t,n=0;n<e.getNumGeometries();n++)this.addEndpoints(e.getGeometryN(n))}else if(arguments[0]instanceof Array){var i=arguments[0];this.add(i[0]),this.add(i[i.length-1])}},getInteriorPoint:function(){return this.interiorPoint},addInterior:function(){if(arguments[0]instanceof F){var t=arguments[0];if(t instanceof It)this.addInterior(t.getCoordinates());else if(t instanceof lt)for(var e=t,n=0;n<e.getNumGeometries();n++)this.addInterior(e.getGeometryN(n))}else if(arguments[0]instanceof Array)for(var i=arguments[0],n=1;n<i.length-1;n++)this.add(i[n])},add:function(t){var e=t.distance(this.centroid);e<this.minDistance&&(this.interiorPoint=new c(t),this.minDistance=e)},interfaces_:function(){return[]},getClass:function(){return ri}}),io(si.prototype,{getInteriorPoint:function(){return this.interiorPoint},add:function(){if(arguments[0]instanceof F){var t=arguments[0];if(t instanceof Ct)this.add(t.getCoordinate());else if(t instanceof lt)for(var e=t,n=0;n<e.getNumGeometries();n++)this.add(e.getGeometryN(n))}else if(arguments[0]instanceof c){var i=arguments[0],r=i.distance(this.centroid);r<this.minDistance&&(this.interiorPoint=new c(i),this.minDistance=r)}},interfaces_:function(){return[]},getClass:function(){return si}}),io(oi.prototype,{select:function(){if(1===arguments.length){arguments[0]}else if(2===arguments.length){var t=arguments[0],e=arguments[1];t.getLineSegment(e,this.selectedSegment),this.select(this.selectedSegment)}},interfaces_:function(){return[]},getClass:function(){return oi}}),io(ai.prototype,{hasChildren:function(){for(var t=0;t<2;t++)if(null!==this.subnode[t])return!0;return!1},isPrunable:function(){return!(this.hasChildren()||this.hasItems())},addAllItems:function(t){t.addAll(this.items);for(var e=0;e<2;e++)null!==this.subnode[e]&&this.subnode[e].addAllItems(t);return t},size:function(){for(var t=0,e=0;e<2;e++)null!==this.subnode[e]&&(t+=this.subnode[e].size());return t+this.items.size()},addAllItemsFromOverlapping:function(t,e){if(null!==t&&!this.isSearchMatch(t))return null;e.addAll(this.items),null!==this.subnode[0]&&this.subnode[0].addAllItemsFromOverlapping(t,e),null!==this.subnode[1]&&this.subnode[1].addAllItemsFromOverlapping(t,e)},hasItems:function(){return!this.items.isEmpty()},remove:function(t,e){if(!this.isSearchMatch(t))return!1;for(var n=!1,i=0;i<2;i++)if(null!==this.subnode[i]&&(n=this.subnode[i].remove(t,e))){this.subnode[i].isPrunable()&&(this.subnode[i]=null);break}return n||(n=this.items.remove(e))},getItems:function(){return this.items},depth:function(){for(var t=0,e=0;e<2;e++)if(null!==this.subnode[e]){var n=this.subnode[e].depth();n>t&&(t=n)}return t+1},nodeSize:function(){for(var t=0,e=0;e<2;e++)null!==this.subnode[e]&&(t+=this.subnode[e].nodeSize());return t+1},add:function(t){this.items.add(t)},interfaces_:function(){return[]},getClass:function(){return ai}}),ai.getSubnodeIndex=function(t,e){var n=-1;return t.min>=e&&(n=1),t.max<=e&&(n=0),n},io(ui.prototype,{expandToInclude:function(t){t.max>this.max&&(this.max=t.max),t.min<this.min&&(this.min=t.min)},getWidth:function(){return this.max-this.min},overlaps:function(){if(1===arguments.length){var t=arguments[0];return this.overlaps(t.min,t.max)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return!(this.min>n||this.max<e)}},getMin:function(){return this.min},toString:function(){return"["+this.min+", "+this.max+"]"},contains:function(){if(1===arguments.length){if(arguments[0]instanceof ui){var t=arguments[0];return this.contains(t.min,t.max)}if("number"==typeof arguments[0]){var e=arguments[0];return e>=this.min&&e<=this.max}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];return n>=this.min&&i<=this.max}},init:function(t,e){this.min=t,this.max=e,t>e&&(this.min=e,this.max=t)},getMax:function(){return this.max},interfaces_:function(){return[]},getClass:function(){return ui}}),li.exponent=function(t){return hi(64,t)-1023},li.powerOf2=function(t){return Math.pow(2,t)},io(ci.prototype,{getInterval:function(){return this.interval},getLevel:function(){return this.level},computeKey:function(t){for(this.level=ci.computeLevel(t),this.interval=new ui,this.computeInterval(this.level,t);!this.interval.contains(t);)this.level+=1,this.computeInterval(this.level,t)},computeInterval:function(t,e){var n=li.powerOf2(t);this.pt=Math.floor(e.getMin()/n)*n,this.interval.init(this.pt,this.pt+n)},getPoint:function(){return this.pt},interfaces_:function(){return[]},getClass:function(){return ci}}),ci.computeLevel=function(t){var e=t.getWidth();return li.exponent(e)+1},ro(fi,ai),io(fi.prototype,{getInterval:function(){return this.interval},find:function(t){var e=ai.getSubnodeIndex(t,this.centre);if(-1===e)return this;if(null!==this.subnode[e]){return this.subnode[e].find(t)}return this},insert:function(t){h.isTrue(null===this.interval||this.interval.contains(t.interval));var e=ai.getSubnodeIndex(t.interval,this.centre);if(t.level===this.level-1)this.subnode[e]=t;else{var n=this.createSubnode(e);n.insert(t),this.subnode[e]=n}},isSearchMatch:function(t){return t.overlaps(this.interval)},getSubnode:function(t){return null===this.subnode[t]&&(this.subnode[t]=this.createSubnode(t)),this.subnode[t]},getNode:function(t){var e=ai.getSubnodeIndex(t,this.centre);if(-1!==e){return this.getSubnode(e).getNode(t)}return this},createSubnode:function(t){var e=0,n=0;switch(t){case 0:e=this.interval.getMin(),n=this.centre;break;case 1:e=this.centre,n=this.interval.getMax()}return new fi(new ui(e,n),this.level-1)},interfaces_:function(){return[]},getClass:function(){return fi}}),fi.createNode=function(t){var e=new ci(t);return new fi(e.getInterval(),e.getLevel())},fi.createExpanded=function(t,e){var n=new ui(e);null!==t&&n.expandToInclude(t.interval);var i=fi.createNode(n);return null!==t&&i.insert(t),i},io(gi.prototype,{interfaces_:function(){return[]},getClass:function(){return gi}});gi.isZeroWidth=function(t,e){var n=e-t;if(0===n)return!0;var i=Math.max(Math.abs(t),Math.abs(e)),r=n/i;return li.exponent(r)<=gi.MIN_BINARY_EXPONENT},gi.MIN_BINARY_EXPONENT=-50,ro(di,ai),io(di.prototype,{insert:function(t,e){var n=ai.getSubnodeIndex(t,di.origin);if(-1===n)return this.add(e),null;var i=this.subnode[n];if(null===i||!i.getInterval().contains(t)){var r=fi.createExpanded(i,t);this.subnode[n]=r}this.insertContained(this.subnode[n],t,e)},isSearchMatch:function(t){return!0},insertContained:function(t,e,n){h.isTrue(t.getInterval().contains(e));var i=gi.isZeroWidth(e.getMin(),e.getMax()),r=null;r=i?t.find(e):t.getNode(e),r.add(n)},interfaces_:function(){return[]},getClass:function(){return di}}),di.origin=0,io(pi.prototype,{size:function(){return null!==this.root?this.root.size():0},insert:function(t,e){this.collectStats(t);var n=pi.ensureExtent(t,this.minExtent);this.root.insert(n,e)},query:function(){if(1===arguments.length){if("number"==typeof arguments[0]){var t=arguments[0];return this.query(new ui(t,t))}if(arguments[0]instanceof ui){var e=arguments[0],n=new x;return this.query(e,n),n}}else if(2===arguments.length){var i=arguments[0],r=arguments[1];this.root.addAllItemsFromOverlapping(i,r)}},iterator:function(){var t=new x;return this.root.addAllItems(t),t.iterator()},remove:function(t,e){var n=pi.ensureExtent(t,this.minExtent);return this.root.remove(n,e)},collectStats:function(t){var e=t.getWidth();e<this.minExtent&&e>0&&(this.minExtent=e)},depth:function(){return null!==this.root?this.root.depth():0},nodeSize:function(){return null!==this.root?this.root.nodeSize():0},interfaces_:function(){return[]},getClass:function(){return pi}}),pi.ensureExtent=function(t,e){var n=t.getMin(),i=t.getMax();return n!==i?t:(n===i&&(n-=e/2,i=n+e/2),new ui(n,i))},io(mi.prototype,{isInside:function(t){},interfaces_:function(){return[]},getClass:function(){return mi}}),io(vi.prototype,{testLineSegment:function(t,e){var n=null,i=null,r=null,s=null,o=e.p0,a=e.p1;n=o.x-t.x,i=o.y-t.y,r=a.x-t.x,s=a.y-t.y,(i>0&&s<=0||s>0&&i<=0)&&0<re.signOfDet2x2(n,i,r,s)/(s-i)&&this.crossings++},buildIndex:function(){this.tree=new pi;for(var t=Y.removeRepeatedPoints(this.ring.getCoordinates()),e=Ke.getChains(t),n=0;n<e.size();n++){var i=e.get(n),r=i.getEnvelope();this.interval.min=r.getMinY(),this.interval.max=r.getMaxY(),this.tree.insert(this.interval,i)}},testMonotoneChain:function(t,e,n){n.select(t,e)},isInside:function(t){this.crossings=0;var e=new I(i.NEGATIVE_INFINITY,i.POSITIVE_INFINITY,t.y,t.y);this.interval.min=t.y,this.interval.max=t.y;for(var n=this.tree.query(this.interval),r=new yi(this,t),s=n.iterator();s.hasNext();){var o=s.next();this.testMonotoneChain(e,r,o)}return this.crossings%2==1},interfaces_:function(){return[mi]},getClass:function(){return vi}}),ro(yi,oi),io(yi.prototype,{select:function(){if(1!==arguments.length)return oi.prototype.select.apply(this,arguments);var t=arguments[0];this.mcp.testLineSegment(this.p,t)},interfaces_:function(){return[]},getClass:function(){return yi}}),vi.MCSelecter=yi,io(xi.prototype,{interfaces_:function(){return[]},getClass:function(){return xi}}),xi.toDegrees=function(t){return 180*t/Math.PI},xi.normalize=function(t){for(;t>Math.PI;)t-=xi.PI_TIMES_2;for(;t<=-Math.PI;)t+=xi.PI_TIMES_2;return t},xi.angle=function(){if(1===arguments.length){var t=arguments[0];return Math.atan2(t.y,t.x)}if(2===arguments.length){var e=arguments[0],n=arguments[1],i=n.x-e.x,r=n.y-e.y;return Math.atan2(r,i)}},xi.isAcute=function(t,e,n){var i=t.x-e.x,r=t.y-e.y;return i*(n.x-e.x)+r*(n.y-e.y)>0},xi.isObtuse=function(t,e,n){var i=t.x-e.x,r=t.y-e.y;return i*(n.x-e.x)+r*(n.y-e.y)<0},xi.interiorAngle=function(t,e,n){var i=xi.angle(e,t),r=xi.angle(e,n);return Math.abs(r-i)},xi.normalizePositive=function(t){if(t<0){for(;t<0;)t+=xi.PI_TIMES_2;t>=xi.PI_TIMES_2&&(t=0)}else{for(;t>=xi.PI_TIMES_2;)t-=xi.PI_TIMES_2;t<0&&(t=0)}return t},xi.angleBetween=function(t,e,n){var i=xi.angle(e,t),r=xi.angle(e,n);return xi.diff(i,r)},xi.diff=function(t,e){var n=null;return n=t<e?e-t:t-e,n>Math.PI&&(n=2*Math.PI-n),n},xi.toRadians=function(t){return t*Math.PI/180},xi.getTurn=function(t,e){var n=Math.sin(e-t);return n>0?xi.COUNTERCLOCKWISE:n<0?xi.CLOCKWISE:xi.NONE},xi.angleBetweenOriented=function(t,e,n){var i=xi.angle(e,t),r=xi.angle(e,n),s=r-i;return s<=-Math.PI?s+xi.PI_TIMES_2:s>Math.PI?s-xi.PI_TIMES_2:s},xi.PI_TIMES_2=2*Math.PI,xi.PI_OVER_2=Math.PI/2,xi.PI_OVER_4=Math.PI/4,xi.COUNTERCLOCKWISE=oe.COUNTERCLOCKWISE,xi.CLOCKWISE=oe.CLOCKWISE,xi.NONE=oe.COLLINEAR,io(Ei.prototype,{area:function(){return Ei.area(this.p0,this.p1,this.p2)},signedArea:function(){return Ei.signedArea(this.p0,this.p1,this.p2)},interpolateZ:function(t){if(null===t)throw new n("Supplied point is null.");return Ei.interpolateZ(t,this.p0,this.p1,this.p2)},longestSideLength:function(){return Ei.longestSideLength(this.p0,this.p1,this.p2)},isAcute:function(){return Ei.isAcute(this.p0,this.p1,this.p2)},circumcentre:function(){return Ei.circumcentre(this.p0,this.p1,this.p2)},area3D:function(){return Ei.area3D(this.p0,this.p1,this.p2)},centroid:function(){return Ei.centroid(this.p0,this.p1,this.p2)},inCentre:function(){return Ei.inCentre(this.p0,this.p1,this.p2)},interfaces_:function(){return[]},getClass:function(){return Ei}}),Ei.area=function(t,e,n){return Math.abs(((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2)},Ei.signedArea=function(t,e,n){return((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2},Ei.det=function(t,e,n,i){return t*i-e*n},Ei.interpolateZ=function(t,e,n,i){var r=e.x,s=e.y,o=n.x-r,a=i.x-r,u=n.y-s,l=i.y-s,h=o*l-a*u,c=t.x-r,f=t.y-s,g=(l*c-a*f)/h,d=(-u*c+o*f)/h;return e.z+g*(n.z-e.z)+d*(i.z-e.z)},Ei.longestSideLength=function(t,e,n){var i=t.distance(e),r=e.distance(n),s=n.distance(t),o=i;return r>o&&(o=r),s>o&&(o=s),o},Ei.isAcute=function(t,e,n){return!!xi.isAcute(t,e,n)&&(!!xi.isAcute(e,n,t)&&!!xi.isAcute(n,t,e))},Ei.circumcentre=function(t,e,n){var i=n.x,r=n.y,s=t.x-i,o=t.y-r,a=e.x-i,u=e.y-r,l=2*Ei.det(s,o,a,u);return new c(i-Ei.det(o,s*s+o*o,u,a*a+u*u)/l,r+Ei.det(s,s*s+o*o,a,a*a+u*u)/l)},Ei.perpendicularBisector=function(t,e){var n=e.x-t.x,i=e.y-t.y;return new M(new M(t.x+n/2,t.y+i/2,1),new M(t.x-i+n/2,t.y+n+i/2,1))},Ei.angleBisector=function(t,e,n){var i=e.distance(t),r=e.distance(n),s=i/(i+r),o=n.x-t.x,a=n.y-t.y;return new c(t.x+s*o,t.y+s*a)},Ei.area3D=function(t,e,n){var i=e.x-t.x,r=e.y-t.y,s=e.z-t.z,o=n.x-t.x,a=n.y-t.y,u=n.z-t.z,l=r*u-s*a,h=s*o-i*u,c=i*a-r*o,f=l*l+h*h+c*c;return Math.sqrt(f)/2},Ei.centroid=function(t,e,n){return new c((t.x+e.x+n.x)/3,(t.y+e.y+n.y)/3)},Ei.inCentre=function(t,e,n){var i=e.distance(n),r=t.distance(n),s=t.distance(e),o=i+r+s;return new c((i*t.x+r*e.x+s*n.x)/o,(i*t.y+r*e.y+s*n.y)/o)},io(Ii.prototype,{getRadius:function(){return this.compute(),this.radius},getDiameter:function(){switch(this.compute(),this.extremalPts.length){case 0:return this.input.getFactory().createLineString();case 1:return this.input.getFactory().createPoint(this.centre)}var t=this.extremalPts[0],e=this.extremalPts[1];return this.input.getFactory().createLineString([t,e])},getExtremalPoints:function(){return this.compute(),this.extremalPts},computeCirclePoints:function(){if(this.input.isEmpty())return this.extremalPts=new Array(0).fill(null),null;if(1===this.input.getNumPoints()){var t=this.input.getCoordinates();return this.extremalPts=[new c(t[0])],null}var e=this.input.convexHull(),n=e.getCoordinates(),t=n;if(n[0].equals2D(n[n.length-1])&&(t=new Array(n.length-1).fill(null),Y.copyDeep(n,0,t,0,n.length-1)),t.length<=2)return this.extremalPts=Y.copyDeep(t),null;for(var i=Ii.lowestPoint(t),r=Ii.pointWitMinAngleWithX(t,i),s=0;s<t.length;s++){var o=Ii.pointWithMinAngleWithSegment(t,i,r);if(xi.isObtuse(i,o,r))return this.extremalPts=[new c(i),new c(r)],null;if(xi.isObtuse(o,i,r))i=o;else{if(!xi.isObtuse(o,r,i))return this.extremalPts=[new c(i),new c(r),new c(o)],null;r=o}}h.shouldNeverReachHere("Logic failure in Minimum Bounding Circle algorithm!")},compute:function(){if(null!==this.extremalPts)return null;this.computeCirclePoints(),this.computeCentre(),null!==this.centre&&(this.radius=this.centre.distance(this.extremalPts[0]))},getFarthestPoints:function(){switch(this.compute(),this.extremalPts.length){case 0:return this.input.getFactory().createLineString();case 1:return this.input.getFactory().createPoint(this.centre)}var t=this.extremalPts[0],e=this.extremalPts[this.extremalPts.length-1];return this.input.getFactory().createLineString([t,e])},getCircle:function(){if(this.compute(),null===this.centre)return this.input.getFactory().createPolygon();var t=this.input.getFactory().createPoint(this.centre);return 0===this.radius?t:t.buffer(this.radius)},getCentre:function(){return this.compute(),this.centre},computeCentre:function(){switch(this.extremalPts.length){case 0:this.centre=null;break;case 1:this.centre=this.extremalPts[0];break;case 2:this.centre=new c((this.extremalPts[0].x+this.extremalPts[1].x)/2,(this.extremalPts[0].y+this.extremalPts[1].y)/2);break;case 3:this.centre=Ei.circumcentre(this.extremalPts[0],this.extremalPts[1],this.extremalPts[2])}},interfaces_:function(){return[]},getClass:function(){return Ii}}),Ii.pointWitMinAngleWithX=function(t,e){for(var n=i.MAX_VALUE,r=null,s=0;s<t.length;s++){var o=t[s];if(o!==e){var a=o.x-e.x,u=o.y-e.y;u<0&&(u=-u);var l=Math.sqrt(a*a+u*u),h=u/l;h<n&&(n=h,r=o)}}return r},Ii.lowestPoint=function(t){for(var e=t[0],n=1;n<t.length;n++)t[n].y<e.y&&(e=t[n]);return e},Ii.pointWithMinAngleWithSegment=function(t,e,n){for(var r=i.MAX_VALUE,s=null,o=0;o<t.length;o++){var a=t[o];if(a!==e&&a!==n){var u=xi.angleBetween(e,a,n);u<r&&(r=u,s=a)}}return s},io(Ni.prototype,{getWidthCoordinate:function(){return this.computeMinimumDiameter(),this.minWidthPt},getSupportingSegment:function(){return this.computeMinimumDiameter(),this.inputGeom.getFactory().createLineString([this.minBaseSeg.p0,this.minBaseSeg.p1])},getDiameter:function(){if(this.computeMinimumDiameter(),null===this.minWidthPt)return this.inputGeom.getFactory().createLineString(null);var t=this.minBaseSeg.project(this.minWidthPt);return this.inputGeom.getFactory().createLineString([t,this.minWidthPt])},computeWidthConvex:function(t){this.convexHullPts=t instanceof Lt?t.getExteriorRing().getCoordinates():t.getCoordinates(),0===this.convexHullPts.length?(this.minWidth=0,this.minWidthPt=null,this.minBaseSeg=null):1===this.convexHullPts.length?(this.minWidth=0,this.minWidthPt=this.convexHullPts[0],this.minBaseSeg.p0=this.convexHullPts[0],this.minBaseSeg.p1=this.convexHullPts[0]):2===this.convexHullPts.length||3===this.convexHullPts.length?(this.minWidth=0,this.minWidthPt=this.convexHullPts[0],this.minBaseSeg.p0=this.convexHullPts[0],this.minBaseSeg.p1=this.convexHullPts[1]):this.computeConvexRingMinDiameter(this.convexHullPts)},computeConvexRingMinDiameter:function(t){this.minWidth=i.MAX_VALUE;for(var e=1,n=new ae,r=0;r<t.length-1;r++)n.p0=t[r],n.p1=t[r+1],e=this.findMaxPerpDistance(t,n,e)},computeMinimumDiameter:function(){if(null!==this.minWidthPt)return null;if(this.isConvex)this.computeWidthConvex(this.inputGeom);else{var t=new ge(this.inputGeom).getConvexHull();this.computeWidthConvex(t)}},getLength:function(){return this.computeMinimumDiameter(),this.minWidth},findMaxPerpDistance:function(t,e,n){for(var i=e.distancePerpendicular(t[n]),r=i,s=n,o=s;r>=i;)i=r,s=o,o=Ni.nextIndex(t,s),r=e.distancePerpendicular(t[o]);return i<this.minWidth&&(this.minPtIndex=s,this.minWidth=i,this.minWidthPt=t[this.minPtIndex],this.minBaseSeg=new ae(e)),s},getMinimumRectangle:function(){if(this.computeMinimumDiameter(),0===this.minWidth)return this.minBaseSeg.p0.equals2D(this.minBaseSeg.p1)?this.inputGeom.getFactory().createPoint(this.minBaseSeg.p0):this.minBaseSeg.toGeometry(this.inputGeom.getFactory());for(var t=this.minBaseSeg.p1.x-this.minBaseSeg.p0.x,e=this.minBaseSeg.p1.y-this.minBaseSeg.p0.y,n=i.MAX_VALUE,r=-i.MAX_VALUE,s=i.MAX_VALUE,o=-i.MAX_VALUE,a=0;a<this.convexHullPts.length;a++){var u=Ni.computeC(t,e,this.convexHullPts[a]);u>r&&(r=u),u<n&&(n=u);var l=Ni.computeC(-e,t,this.convexHullPts[a]);l>o&&(o=l),l<s&&(s=l)}var h=Ni.computeSegmentForLine(-t,-e,o),c=Ni.computeSegmentForLine(-t,-e,s),f=Ni.computeSegmentForLine(-e,t,r),g=Ni.computeSegmentForLine(-e,t,n),d=f.lineIntersection(h),p=g.lineIntersection(h),m=g.lineIntersection(c),v=f.lineIntersection(c),y=this.inputGeom.getFactory().createLinearRing([d,p,m,v,d]);return this.inputGeom.getFactory().createPolygon(y,null)},interfaces_:function(){return[]},getClass:function(){return Ni}}),Ni.nextIndex=function(t,e){return e++,e>=t.length&&(e=0),e},Ni.computeC=function(t,e,n){return t*n.y-e*n.x},Ni.getMinimumDiameter=function(t){return new Ni(t).getDiameter()},Ni.getMinimumRectangle=function(t){return new Ni(t).getMinimumRectangle()},Ni.computeSegmentForLine=function(t,e,n){var i=null,r=null;return Math.abs(e)>Math.abs(t)?(i=new c(0,n/e),r=new c(1,n/e-t/e)):(i=new c(n/t,0),r=new c(n/t-e/t,1)),new ae(i,r)};var Eo=Object.freeze({Centroid:le,CGAlgorithms:oe,ConvexHull:ge,InteriorPointArea:ni,InteriorPointLine:ri,InteriorPointPoint:si,RobustLineIntersector:ie,MCPointInRing:vi,MinimumBoundingCircle:Ii,MinimumDiameter:Ni});io(Ci.prototype,{getResultGeometry:function(){return new Si(this.distanceTolerance).transform(this.inputGeom)},setDistanceTolerance:function(t){if(t<=0)throw new n("Tolerance must be positive");this.distanceTolerance=t},interfaces_:function(){return[]},getClass:function(){return Ci}}),Ci.densifyPoints=function(t,e,n){for(var i=new ae,r=new E,s=0;s<t.length-1;s++){i.p0=t[s],i.p1=t[s+1],r.add(i.p0,!1);var o=i.getLength(),a=Math.trunc(o/e)+1;if(a>1)for(var u=o/a,l=1;l<a;l++){var h=l*u/o,c=i.pointAlong(h);n.makePrecise(c),r.add(c,!1)}}return r.add(t[t.length-1],!1),r.toCoordinateArray()},Ci.densify=function(t,e){var n=new Ci(t);return n.setDistanceTolerance(e),n.getResultGeometry()},ro(Si,pe),io(Si.prototype,{transformMultiPolygon:function(t,e){var n=pe.prototype.transformMultiPolygon.call(this,t,e);return this.createValidArea(n)},transformPolygon:function(t,e){var n=pe.prototype.transformPolygon.call(this,t,e);return e instanceof Tt?n:this.createValidArea(n)},transformCoordinates:function(t,e){var n=t.toCoordinateArray(),i=Ci.densifyPoints(n,this.distanceTolerance,e.getPrecisionModel());return e instanceof It&&1===i.length&&(i=new Array(0).fill(null)),this.factory.getCoordinateSequenceFactory().create(i)},createValidArea:function(t){return t.buffer(0)},interfaces_:function(){return[]},getClass:function(){return Si}}),Ci.DensifyTransformer=Si;var Io=Object.freeze({Densifier:Ci});io(Li.prototype,{find:function(t){var e=this;do{if(null===e)return null;if(e.dest().equals2D(t))return e;e=e.oNext()}while(e!==this);return null},dest:function(){return this._sym._orig},oNext:function(){return this._sym._next},insert:function(t){if(this.oNext()===this)return this.insertAfter(t),null;var e=this.compareTo(t),n=this;do{var i=n.oNext();if(i.compareTo(t)!==e||i===this)return n.insertAfter(t),null;n=i}while(n!==this);h.shouldNeverReachHere()},insertAfter:function(t){h.equals(this._orig,t.orig());var e=this.oNext();this._sym.setNext(t),t.sym().setNext(e)},degree:function(){var t=0,e=this;do{t++,e=e.oNext()}while(e!==this);return t},equals:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this._orig.equals2D(t)&&this._sym._orig.equals(e)}},deltaY:function(){return this._sym._orig.y-this._orig.y},sym:function(){return this._sym},prev:function(){return this._sym.next()._sym},compareAngularDirection:function(t){var e=this.deltaX(),n=this.deltaY(),i=t.deltaX(),r=t.deltaY();if(e===i&&n===r)return 0;var s=je.quadrant(e,n),o=je.quadrant(i,r);return s>o?1:s<o?-1:oe.computeOrientation(t._orig,t.dest(),this.dest())},prevNode:function(){for(var t=this;2===t.degree();)if((t=t.prev())===this)return null;return t},compareTo:function(t){var e=t;return this.compareAngularDirection(e)},next:function(){return this._next},setSym:function(t){this._sym=t},orig:function(){return this._orig},toString:function(){return"HE("+this._orig.x+" "+this._orig.y+", "+this._sym._orig.x+" "+this._sym._orig.y+")"},setNext:function(t){this._next=t},init:function(t){this.setSym(t),t.setSym(this),this.setNext(t),t.setNext(this)},deltaX:function(){return this._sym._orig.x-this._orig.x},interfaces_:function(){return[]},getClass:function(){return Li}}),Li.init=function(t,e){
if(null!==t._sym||null!==e._sym||null!==t._next||null!==e._next)throw new IllegalStateException("Edges are already initialized");return t.init(e),t},Li.create=function(t,e){var n=new Li(t),i=new Li(e);return n.init(i),n},ro(wi,Li),io(wi.prototype,{mark:function(){this._isMarked=!0},setMark:function(t){this._isMarked=t},isMarked:function(){return this._isMarked},interfaces_:function(){return[]},getClass:function(){return wi}}),wi.setMarkBoth=function(t,e){t.setMark(e),t.sym().setMark(e)},wi.isMarked=function(t){return t.isMarked()},wi.setMark=function(t,e){t.setMark(e)},wi.markBoth=function(t){t.mark(),t.sym().mark()},wi.mark=function(t){t.mark()},io(Ri.prototype,{insert:function(t,e,n){var i=this.create(t,e);null!==n?n.insert(i):this.vertexMap.put(t,i);var r=this.vertexMap.get(e);return null!==r?r.insert(i.sym()):this.vertexMap.put(e,i.sym()),i},create:function(t,e){var n=this.createEdge(t),i=this.createEdge(e);return Li.init(n,i),n},createEdge:function(t){return new Li(t)},addEdge:function(t,e){if(!Ri.isValidEdge(t,e))return null;var n=this.vertexMap.get(t),i=null;return null!==n&&(i=n.find(e)),null!==i?i:this.insert(t,e,n)},getVertexEdges:function(){return this.vertexMap.values()},findEdge:function(t,e){var n=this.vertexMap.get(t);return null===n?null:n.find(e)},interfaces_:function(){return[]},getClass:function(){return Ri}}),Ri.isValidEdge=function(t,e){return 0!==e.compareTo(t)},ro(Ti,wi),io(Ti.prototype,{setStart:function(){this._isStart=!0},isStart:function(){return this._isStart},interfaces_:function(){return[]},getClass:function(){return Ti}}),ro(Oi,Ri),io(Oi.prototype,{createEdge:function(t){return new Ti(t)},interfaces_:function(){return[]},getClass:function(){return Oi}}),io(Pi.prototype,{addLine:function(t){this.lines.add(this.factory.createLineString(t.toCoordinateArray()))},updateRingStartEdge:function(t){return t.isStart()||(t=t.sym(),t.isStart())?null===this.ringStartEdge?(this.ringStartEdge=t,null):void(t.orig().compareTo(this.ringStartEdge.orig())<0&&(this.ringStartEdge=t)):null},getResult:function(){return null===this.result&&this.computeResult(),this.result},process:function(t){var e=t.prevNode();null===e&&(e=t),this.stackEdges(e),this.buildLines()},buildRing:function(t){var e=new E,n=t;for(e.add(n.orig().copy(),!1);2===n.sym().degree();){var i=n.next();if(i===t)break;e.add(i.orig().copy(),!1),n=i}e.add(n.dest().copy(),!1),this.addLine(e)},buildLine:function(t){var e=new E,n=t;for(this.ringStartEdge=null,wi.markBoth(n),e.add(n.orig().copy(),!1);2===n.sym().degree();){this.updateRingStartEdge(n);var i=n.next();if(i===t)return this.buildRing(this.ringStartEdge),null;e.add(i.orig().copy(),!1),n=i,wi.markBoth(n)}e.add(n.dest().copy(),!1),this.stackEdges(n.sym()),this.addLine(e)},stackEdges:function(t){var e=t;do{wi.isMarked(e)||this.nodeEdgeStack.add(e),e=e.oNext()}while(e!==t)},computeResult:function(){for(var t=this.graph.getVertexEdges(),e=t.iterator();e.hasNext();){var n=e.next();wi.isMarked(n)||this.process(n)}this.result=this.factory.buildGeometry(this.lines)},buildLines:function(){for(;!this.nodeEdgeStack.empty();){var t=this.nodeEdgeStack.pop();wi.isMarked(t)||this.buildLine(t)}},add:function(){if(arguments[0]instanceof F){arguments[0].apply({interfaces_:function(){return[A]},filter:function(t){t instanceof It&&this.add(t)}})}else if(oo(arguments[0],d))for(var t=arguments[0],e=t.iterator();e.hasNext();){var n=e.next();this.add(n)}else if(arguments[0]instanceof It){var i=arguments[0];null===this.factory&&(this.factory=i.getFactory());for(var r=i.getCoordinateSequence(),s=!1,e=1;e<r.size();e++){var o=this.graph.addEdge(r.getCoordinate(e-1),r.getCoordinate(e));null!==o&&(s||(o.setStart(),s=!0))}}},interfaces_:function(){return[]},getClass:function(){return Pi}}),Pi.dissolve=function(t){var e=new Pi;return e.add(t),e.getResult()};var No=Object.freeze({LineDissolver:Pi}),Co=Object.freeze({GeometryGraph:Kn});io(bi.prototype,{hasChildren:function(){for(var t=0;t<4;t++)if(null!==this.subnode[t])return!0;return!1},isPrunable:function(){return!(this.hasChildren()||this.hasItems())},addAllItems:function(t){t.addAll(this.items);for(var e=0;e<4;e++)null!==this.subnode[e]&&this.subnode[e].addAllItems(t);return t},getNodeCount:function(){for(var t=0,e=0;e<4;e++)null!==this.subnode[e]&&(t+=this.subnode[e].size());return t+1},size:function(){for(var t=0,e=0;e<4;e++)null!==this.subnode[e]&&(t+=this.subnode[e].size());return t+this.items.size()},addAllItemsFromOverlapping:function(t,e){if(!this.isSearchMatch(t))return null;e.addAll(this.items);for(var n=0;n<4;n++)null!==this.subnode[n]&&this.subnode[n].addAllItemsFromOverlapping(t,e)},visitItems:function(t,e){for(var n=this.items.iterator();n.hasNext();)e.visitItem(n.next())},hasItems:function(){return!this.items.isEmpty()},remove:function(t,e){if(!this.isSearchMatch(t))return!1;for(var n=!1,i=0;i<4;i++)if(null!==this.subnode[i]&&(n=this.subnode[i].remove(t,e))){this.subnode[i].isPrunable()&&(this.subnode[i]=null);break}return n||(n=this.items.remove(e))},visit:function(t,e){if(!this.isSearchMatch(t))return null;this.visitItems(t,e);for(var n=0;n<4;n++)null!==this.subnode[n]&&this.subnode[n].visit(t,e)},getItems:function(){return this.items},depth:function(){for(var t=0,e=0;e<4;e++)if(null!==this.subnode[e]){var n=this.subnode[e].depth();n>t&&(t=n)}return t+1},isEmpty:function(){var t=!0;this.items.isEmpty()||(t=!1);for(var e=0;e<4;e++)null!==this.subnode[e]&&(this.subnode[e].isEmpty()||(t=!1));return t},add:function(t){this.items.add(t)},interfaces_:function(){return[a]},getClass:function(){return bi}}),bi.getSubnodeIndex=function(t,e,n){var i=-1;return t.getMinX()>=e&&(t.getMinY()>=n&&(i=3),t.getMaxY()<=n&&(i=1)),t.getMaxX()<=e&&(t.getMinY()>=n&&(i=2),t.getMaxY()<=n&&(i=0)),i},io(_i.prototype,{getLevel:function(){return this.level},computeKey:function(){if(1===arguments.length){var t=arguments[0];for(this.level=_i.computeQuadLevel(t),this.env=new I,this.computeKey(this.level,t);!this.env.contains(t);)this.level+=1,this.computeKey(this.level,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],i=li.powerOf2(e);this.pt.x=Math.floor(n.getMinX()/i)*i,this.pt.y=Math.floor(n.getMinY()/i)*i,this.env.init(this.pt.x,this.pt.x+i,this.pt.y,this.pt.y+i)}},getEnvelope:function(){return this.env},getCentre:function(){return new c((this.env.getMinX()+this.env.getMaxX())/2,(this.env.getMinY()+this.env.getMaxY())/2)},getPoint:function(){return this.pt},interfaces_:function(){return[]},getClass:function(){return _i}}),_i.computeQuadLevel=function(t){var e=t.getWidth(),n=t.getHeight(),i=e>n?e:n;return li.exponent(i)+1},ro(Mi,bi),io(Mi.prototype,{find:function(t){var e=bi.getSubnodeIndex(t,this.centrex,this.centrey);if(-1===e)return this;if(null!==this.subnode[e]){return this.subnode[e].find(t)}return this},isSearchMatch:function(t){return this.env.intersects(t)},getSubnode:function(t){return null===this.subnode[t]&&(this.subnode[t]=this.createSubnode(t)),this.subnode[t]},getEnvelope:function(){return this.env},getNode:function(t){var e=bi.getSubnodeIndex(t,this.centrex,this.centrey);if(-1!==e){return this.getSubnode(e).getNode(t)}return this},createSubnode:function(t){var e=0,n=0,i=0,r=0;switch(t){case 0:e=this.env.getMinX(),n=this.centrex,i=this.env.getMinY(),r=this.centrey;break;case 1:e=this.centrex,n=this.env.getMaxX(),i=this.env.getMinY(),r=this.centrey;break;case 2:e=this.env.getMinX(),n=this.centrex,i=this.centrey,r=this.env.getMaxY();break;case 3:e=this.centrex,n=this.env.getMaxX(),i=this.centrey,r=this.env.getMaxY()}return new Mi(new I(e,n,i,r),this.level-1)},insertNode:function(t){h.isTrue(null===this.env||this.env.contains(t.env));var e=bi.getSubnodeIndex(t.env,this.centrex,this.centrey);if(t.level===this.level-1)this.subnode[e]=t;else{var n=this.createSubnode(e);n.insertNode(t),this.subnode[e]=n}},interfaces_:function(){return[]},getClass:function(){return Mi}}),Mi.createNode=function(t){var e=new _i(t);return new Mi(e.getEnvelope(),e.getLevel())},Mi.createExpanded=function(t,e){var n=new I(e);null!==t&&n.expandToInclude(t.env);var i=Mi.createNode(n);return null!==t&&i.insertNode(t),i},ro(Di,bi),io(Di.prototype,{insert:function(t,e){var n=bi.getSubnodeIndex(t,Di.origin.x,Di.origin.y);if(-1===n)return this.add(e),null;var i=this.subnode[n];if(null===i||!i.getEnvelope().contains(t)){var r=Mi.createExpanded(i,t);this.subnode[n]=r}this.insertContained(this.subnode[n],t,e)},isSearchMatch:function(t){return!0},insertContained:function(t,e,n){h.isTrue(t.getEnvelope().contains(e));var i=gi.isZeroWidth(e.getMinX(),e.getMaxX()),r=gi.isZeroWidth(e.getMinY(),e.getMaxY()),s=null;s=i||r?t.find(e):t.getNode(e),s.add(n)},interfaces_:function(){return[]},getClass:function(){return Di}}),Di.origin=new c(0,0),io(Ai.prototype,{size:function(){return null!==this.root?this.root.size():0},insert:function(t,e){this.collectStats(t);var n=Ai.ensureExtent(t,this.minExtent);this.root.insert(n,e)},query:function(){if(1===arguments.length){var t=arguments[0],e=new Bn;return this.query(t,e),e.getItems()}if(2===arguments.length){var n=arguments[0],i=arguments[1];this.root.visit(n,i)}},queryAll:function(){var t=new x;return this.root.addAllItems(t),t},remove:function(t,e){var n=Ai.ensureExtent(t,this.minExtent);return this.root.remove(n,e)},collectStats:function(t){var e=t.getWidth();e<this.minExtent&&e>0&&(this.minExtent=e);var n=t.getHeight();n<this.minExtent&&n>0&&(this.minExtent=n)},depth:function(){return null!==this.root?this.root.depth():0},isEmpty:function(){return null===this.root},interfaces_:function(){return[_e,a]},getClass:function(){return Ai}}),Ai.ensureExtent=function(t,e){var n=t.getMinX(),i=t.getMaxX(),r=t.getMinY(),s=t.getMaxY();return n!==i&&r!==s?t:(n===i&&(n-=e/2,i=n+e/2),r===s&&(r-=e/2,s=r+e/2),new I(n,i,r,s))},Ai.serialVersionUID=-0x678b60c967a25400;var So=Object.freeze({Quadtree:Ai}),Lo=Object.freeze({STRtree:qe}),wo=Object.freeze({quadtree:So,strtree:Lo}),Ro=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"];io(Fi.prototype,{read:function(t){var e=void 0;e="string"==typeof t?JSON.parse(t):t;var n=e.type;if(!To[n])throw new Error("Unknown GeoJSON type: "+e.type);return-1!==Ro.indexOf(n)?To[n].apply(this,[e.coordinates]):"GeometryCollection"===n?To[n].apply(this,[e.geometries]):To[n].apply(this,[e])},write:function(t){var e=t.getGeometryType();if(!Oo[e])throw new Error("Geometry is not supported");return Oo[e].apply(this,[t])}});var To={Feature:function(t){var e={};for(var n in t)e[n]=t[n];if(t.geometry){var i=t.geometry.type;if(!To[i])throw new Error("Unknown GeoJSON type: "+t.type);e.geometry=this.read(t.geometry)}return t.bbox&&(e.bbox=To.bbox.apply(this,[t.bbox])),e},FeatureCollection:function(t){var e={};if(t.features){e.features=[];for(var n=0;n<t.features.length;++n)e.features.push(this.read(t.features[n]))}return t.bbox&&(e.bbox=this.parse.bbox.apply(this,[t.bbox])),e},coordinates:function(t){for(var e=[],n=0;n<t.length;++n){var i=t[n];e.push(new c(i[0],i[1]))}return e},bbox:function(t){return this.geometryFactory.createLinearRing([new c(t[0],t[1]),new c(t[2],t[1]),new c(t[2],t[3]),new c(t[0],t[3]),new c(t[0],t[1])])},Point:function(t){var e=new c(t[0],t[1]);return this.geometryFactory.createPoint(e)},MultiPoint:function(t){for(var e=[],n=0;n<t.length;++n)e.push(To.Point.apply(this,[t[n]]));return this.geometryFactory.createMultiPoint(e)},LineString:function(t){var e=To.coordinates.apply(this,[t]);return this.geometryFactory.createLineString(e)},MultiLineString:function(t){for(var e=[],n=0;n<t.length;++n)e.push(To.LineString.apply(this,[t[n]]));return this.geometryFactory.createMultiLineString(e)},Polygon:function(t){for(var e=To.coordinates.apply(this,[t[0]]),n=this.geometryFactory.createLinearRing(e),i=[],r=1;r<t.length;++r){var s=t[r],o=To.coordinates.apply(this,[s]),a=this.geometryFactory.createLinearRing(o);i.push(a)}return this.geometryFactory.createPolygon(n,i)},MultiPolygon:function(t){for(var e=[],n=0;n<t.length;++n){var i=t[n];e.push(To.Polygon.apply(this,[i]))}return this.geometryFactory.createMultiPolygon(e)},GeometryCollection:function(t){for(var e=[],n=0;n<t.length;++n){var i=t[n];e.push(this.read(i))}return this.geometryFactory.createGeometryCollection(e)}},Oo={coordinate:function(t){return[t.x,t.y]},Point:function(t){return{type:"Point",coordinates:Oo.coordinate.apply(this,[t.getCoordinate()])}},MultiPoint:function(t){for(var e=[],n=0;n<t.geometries.length;++n){var i=t.geometries[n],r=Oo.Point.apply(this,[i]);e.push(r.coordinates)}return{type:"MultiPoint",coordinates:e}},LineString:function(t){for(var e=[],n=t.getCoordinates(),i=0;i<n.length;++i){var r=n[i];e.push(Oo.coordinate.apply(this,[r]))}return{type:"LineString",coordinates:e}},MultiLineString:function(t){for(var e=[],n=0;n<t.geometries.length;++n){var i=t.geometries[n],r=Oo.LineString.apply(this,[i]);e.push(r.coordinates)}return{type:"MultiLineString",coordinates:e}},Polygon:function(t){var e=[],n=Oo.LineString.apply(this,[t.shell]);e.push(n.coordinates);for(var i=0;i<t.holes.length;++i){var r=t.holes[i],s=Oo.LineString.apply(this,[r]);e.push(s.coordinates)}return{type:"Polygon",coordinates:e}},MultiPolygon:function(t){for(var e=[],n=0;n<t.geometries.length;++n){var i=t.geometries[n],r=Oo.Polygon.apply(this,[i]);e.push(r.coordinates)}return{type:"MultiPolygon",coordinates:e}},GeometryCollection:function(t){for(var e=[],n=0;n<t.geometries.length;++n){var i=t.geometries[n],r=i.getGeometryType();e.push(Oo[r].apply(this,[i]))}return{type:"GeometryCollection",geometries:e}}};io(Gi.prototype,{read:function(t){var e=this.parser.read(t);return this.precisionModel.getType()===Qt.FIXED&&this.reducePrecision(e),e},reducePrecision:function(t){var e,n;if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(e=0,n=t.points.length;e<n;e++)this.precisionModel.makePrecise(t.points[e]);else if(t.geometries)for(e=0,n=t.geometries.length;e<n;e++)this.reducePrecision(t.geometries[e])}}),io(qi.prototype,{write:function(t){return this.parser.write(t)}}),io(Bi.prototype,{read:function(t){var e=this.parser.read(t);return this.precisionModel.getType()===Qt.FIXED&&this.reducePrecision(e),e},reducePrecision:function(t){if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(var e=0,n=t.points.coordinates.length;e<n;e++)this.precisionModel.makePrecise(t.points.coordinates[e]);else if(t.geometries)for(var i=0,r=t.geometries.length;i<r;i++)this.reducePrecision(t.geometries[i])}}),io(zi.prototype,{read:function(t){var e=this.ol;return t instanceof e.geom.Point?this.convertFromPoint(t):t instanceof e.geom.LineString?this.convertFromLineString(t):t instanceof e.geom.LinearRing?this.convertFromLinearRing(t):t instanceof e.geom.Polygon?this.convertFromPolygon(t):t instanceof e.geom.MultiPoint?this.convertFromMultiPoint(t):t instanceof e.geom.MultiLineString?this.convertFromMultiLineString(t):t instanceof e.geom.MultiPolygon?this.convertFromMultiPolygon(t):t instanceof e.geom.GeometryCollection?this.convertFromCollection(t):void 0},convertFromPoint:function(t){var e=t.getCoordinates();return this.geometryFactory.createPoint(new c(e[0],e[1]))},convertFromLineString:function(t){return this.geometryFactory.createLineString(t.getCoordinates().map(function(t){return new c(t[0],t[1])}))},convertFromLinearRing:function(t){return this.geometryFactory.createLinearRing(t.getCoordinates().map(function(t){return new c(t[0],t[1])}))},convertFromPolygon:function(t){for(var e=t.getLinearRings(),n=null,i=[],r=0;r<e.length;r++){var s=this.convertFromLinearRing(e[r]);0===r?n=s:i.push(s)}return this.geometryFactory.createPolygon(n,i)},convertFromMultiPoint:function(t){var e=t.getPoints().map(function(t){return this.convertFromPoint(t)},this);return this.geometryFactory.createMultiPoint(e)},convertFromMultiLineString:function(t){var e=t.getLineStrings().map(function(t){return this.convertFromLineString(t)},this);return this.geometryFactory.createMultiLineString(e)},convertFromMultiPolygon:function(t){var e=t.getPolygons().map(function(t){return this.convertFromPolygon(t)},this);return this.geometryFactory.createMultiPolygon(e)},convertFromCollection:function(t){var e=t.getGeometries().map(function(t){return this.read(t)},this);return this.geometryFactory.createGeometryCollection(e)},write:function(t){return"Point"===t.getGeometryType()?this.convertToPoint(t.getCoordinate()):"LineString"===t.getGeometryType()?this.convertToLineString(t):"LinearRing"===t.getGeometryType()?this.convertToLinearRing(t):"Polygon"===t.getGeometryType()?this.convertToPolygon(t):"MultiPoint"===t.getGeometryType()?this.convertToMultiPoint(t):"MultiLineString"===t.getGeometryType()?this.convertToMultiLineString(t):"MultiPolygon"===t.getGeometryType()?this.convertToMultiPolygon(t):"GeometryCollection"===t.getGeometryType()?this.convertToCollection(t):void 0},convertToPoint:function(t){return new this.ol.geom.Point([t.x,t.y])},convertToLineString:function(t){var e=t.points.coordinates.map(Vi);return new this.ol.geom.LineString(e)},convertToLinearRing:function(t){var e=t.points.coordinates.map(Vi);return new this.ol.geom.LinearRing(e)},convertToPolygon:function(t){for(var e=[t.shell.points.coordinates.map(Vi)],n=0;n<t.holes.length;n++)e.push(t.holes[n].points.coordinates.map(Vi));return new this.ol.geom.Polygon(e)},convertToMultiPoint:function(t){return new this.ol.geom.MultiPoint(t.getCoordinates().map(Vi))},convertToMultiLineString:function(t){for(var e=[],n=0;n<t.geometries.length;n++)e.push(this.convertToLineString(t.geometries[n]).getCoordinates());return new this.ol.geom.MultiLineString(e)},convertToMultiPolygon:function(t){for(var e=[],n=0;n<t.geometries.length;n++)e.push(this.convertToPolygon(t.geometries[n]).getCoordinates());return new this.ol.geom.MultiPolygon(e)},convertToCollection:function(t){for(var e=[],n=0;n<t.geometries.length;n++){var i=t.geometries[n];e.push(this.write(i))}return new this.ol.geom.GeometryCollection(e)}});var Po=Object.freeze({GeoJSONReader:Gi,GeoJSONWriter:qi,OL3Parser:zi,WKTReader:Bi,WKTWriter:ee});io(ki.prototype,{rescale:function(){if(oo(arguments[0],d))for(var t=arguments[0],e=t.iterator();e.hasNext();){var n=e.next();this.rescale(n.getCoordinates())}else if(arguments[0]instanceof Array){var i=arguments[0];2===i.length&&(new c(i[0]),new c(i[1]));for(var e=0;e<i.length;e++)i[e].x=i[e].x/this.scaleFactor+this.offsetX,i[e].y=i[e].y/this.scaleFactor+this.offsetY;2===i.length&&i[0].equals2D(i[1])&&_.out.println(i)}},scale:function(){if(oo(arguments[0],d)){for(var t=arguments[0],e=new x,n=t.iterator();n.hasNext();){var i=n.next();e.add(new Xe(this.scale(i.getCoordinates()),i.getData()))}return e}if(arguments[0]instanceof Array){for(var r=arguments[0],s=new Array(r.length).fill(null),n=0;n<r.length;n++)s[n]=new c(Math.round((r[n].x-this.offsetX)*this.scaleFactor),Math.round((r[n].y-this.offsetY)*this.scaleFactor),r[n].z);return Y.removeRepeatedPoints(s)}},isIntegerPrecision:function(){return 1===this.scaleFactor},getNodedSubstrings:function(){var t=this.noder.getNodedSubstrings();return this.isScaled&&this.rescale(t),t},computeNodes:function(t){var e=t;this.isScaled&&(e=this.scale(t)),this.noder.computeNodes(e)},interfaces_:function(){return[Ze]},getClass:function(){return ki}});var bo=Object.freeze({MCIndexNoder:Je,ScaledNoder:ki,SegmentString:we});io(Yi.prototype,{isSimpleMultiPoint:function(t){if(t.isEmpty())return!0;for(var e=new rt,n=0;n<t.getNumGeometries();n++){var i=t.getGeometryN(n),r=i.getCoordinate();if(e.contains(r))return this.nonSimpleLocation=r,!1;e.add(r)}return!0},isSimplePolygonal:function(t){for(var e=qn.getLines(t),n=e.iterator();n.hasNext();){var i=n.next();if(!this.isSimpleLinearGeometry(i))return!1}return!0},hasClosedEndpointIntersection:function(t){for(var e=new et,n=t.getEdgeIterator();n.hasNext();){var i=n.next(),r=(i.getMaximumSegmentIndex(),i.isClosed()),s=i.getCoordinate(0);this.addEndpoint(e,s,r);var o=i.getCoordinate(i.getNumPoints()-1);this.addEndpoint(e,o,r)}for(var n=e.values().iterator();n.hasNext();){var a=n.next();if(a.isClosed&&2!==a.degree)return this.nonSimpleLocation=a.getCoordinate(),!0}return!1},getNonSimpleLocation:function(){return this.nonSimpleLocation},isSimpleLinearGeometry:function(t){if(t.isEmpty())return!0;var e=new Kn(0,t),n=new ie,i=e.computeSelfNodes(n,!0);return!i.hasIntersection()||(i.hasProperIntersection()?(this.nonSimpleLocation=i.getProperIntersectionPoint(),!1):!this.hasNonEndpointIntersection(e)&&(!this.isClosedEndpointsInInterior||!this.hasClosedEndpointIntersection(e)))},hasNonEndpointIntersection:function(t){for(var e=t.getEdgeIterator();e.hasNext();)for(var n=e.next(),i=n.getMaximumSegmentIndex(),r=n.getEdgeIntersectionList().iterator();r.hasNext();){var s=r.next();if(!s.isEndPoint(i))return this.nonSimpleLocation=s.getCoordinate(),!0}return!1},addEndpoint:function(t,e,n){var i=t.get(e);null===i&&(i=new Ui(e),t.put(e,i)),i.addEndpoint(n)},computeSimple:function(t){return this.nonSimpleLocation=null,!!t.isEmpty()||(t instanceof It?this.isSimpleLinearGeometry(t):t instanceof ht?this.isSimpleLinearGeometry(t):t instanceof wt?this.isSimpleMultiPoint(t):oo(t,St)?this.isSimplePolygonal(t):!(t instanceof lt)||this.isSimpleGeometryCollection(t))},isSimple:function(){return this.nonSimpleLocation=null,this.computeSimple(this.inputGeom)},isSimpleGeometryCollection:function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);if(!this.computeSimple(n))return!1}return!0},interfaces_:function(){return[]},getClass:function(){return Yi}}),io(Ui.prototype,{addEndpoint:function(t){this.degree++,this.isClosed|=t},getCoordinate:function(){return this.pt},interfaces_:function(){return[]},getClass:function(){return Ui}}),Yi.EndpointInfo=Ui,io(Xi.prototype,{getEndCapStyle:function(){return this.endCapStyle},isSingleSided:function(){return this._isSingleSided},setQuadrantSegments:function(t){this.quadrantSegments=t,0===this.quadrantSegments&&(this.joinStyle=Xi.JOIN_BEVEL),this.quadrantSegments<0&&(this.joinStyle=Xi.JOIN_MITRE,this.mitreLimit=Math.abs(this.quadrantSegments)),t<=0&&(this.quadrantSegments=1),this.joinStyle!==Xi.JOIN_ROUND&&(this.quadrantSegments=Xi.DEFAULT_QUADRANT_SEGMENTS)},getJoinStyle:function(){return this.joinStyle},setJoinStyle:function(t){this.joinStyle=t},setSimplifyFactor:function(t){this.simplifyFactor=t<0?0:t},getSimplifyFactor:function(){return this.simplifyFactor},getQuadrantSegments:function(){return this.quadrantSegments},setEndCapStyle:function(t){this.endCapStyle=t},getMitreLimit:function(){return this.mitreLimit},setMitreLimit:function(t){this.mitreLimit=t},setSingleSided:function(t){this._isSingleSided=t},interfaces_:function(){return[]},getClass:function(){return Xi}}),Xi.bufferDistanceError=function(t){var e=Math.PI/2/t;return 1-Math.cos(e/2)},Xi.CAP_ROUND=1,Xi.CAP_FLAT=2,Xi.CAP_SQUARE=3,Xi.JOIN_ROUND=1,Xi.JOIN_MITRE=2,Xi.JOIN_BEVEL=3,Xi.DEFAULT_QUADRANT_SEGMENTS=8,Xi.DEFAULT_MITRE_LIMIT=5,Xi.DEFAULT_SIMPLIFY_FACTOR=.01,io(Hi.prototype,{getCoordinate:function(){return this.minCoord},getRightmostSide:function(t,e){var n=this.getRightmostSideOfSegment(t,e);return n<0&&(n=this.getRightmostSideOfSegment(t,e-1)),n<0&&(this.minCoord=null,this.checkForRightmostCoordinate(t)),n},findRightmostEdgeAtVertex:function(){var t=this.minDe.getEdge().getCoordinates();h.isTrue(this.minIndex>0&&this.minIndex<t.length,"rightmost point expected to be interior vertex of edge");var e=t[this.minIndex-1],n=t[this.minIndex+1],i=oe.computeOrientation(this.minCoord,n,e),r=!1;e.y<this.minCoord.y&&n.y<this.minCoord.y&&i===oe.COUNTERCLOCKWISE?r=!0:e.y>this.minCoord.y&&n.y>this.minCoord.y&&i===oe.CLOCKWISE&&(r=!0),r&&(this.minIndex=this.minIndex-1)},getRightmostSideOfSegment:function(t,e){var n=t.getEdge(),i=n.getCoordinates();if(e<0||e+1>=i.length)return-1;if(i[e].y===i[e+1].y)return-1;var r=an.LEFT;return i[e].y<i[e+1].y&&(r=an.RIGHT),r},getEdge:function(){return this.orientedDe},checkForRightmostCoordinate:function(t){for(var e=t.getEdge().getCoordinates(),n=0;n<e.length-1;n++)(null===this.minCoord||e[n].x>this.minCoord.x)&&(this.minDe=t,this.minIndex=n,this.minCoord=e[n])},findRightmostEdgeAtNode:function(){var t=this.minDe.getNode(),e=t.getEdges();this.minDe=e.getRightmostEdge(),this.minDe.isForward()||(this.minDe=this.minDe.getSym(),this.minIndex=this.minDe.getEdge().getCoordinates().length-1)},findEdge:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();n.isForward()&&this.checkForRightmostCoordinate(n)}h.isTrue(0!==this.minIndex||this.minCoord.equals(this.minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this.minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this.orientedDe=this.minDe,this.getRightmostSide(this.minDe,this.minIndex)===an.LEFT&&(this.orientedDe=this.minDe.getSym())},interfaces_:function(){return[]},getClass:function(){return Hi}}),Wi.prototype.addLast=function(t){this.array_.push(t)},Wi.prototype.removeFirst=function(){return this.array_.shift()},Wi.prototype.isEmpty=function(){return 0===this.array_.length},io(ji.prototype,{clearVisitedEdges:function(){for(var t=this.dirEdgeList.iterator();t.hasNext();){t.next().setVisited(!1)}},getRightmostCoordinate:function(){return this.rightMostCoord},computeNodeDepth:function(t){for(var e=null,n=t.getEdges().iterator();n.hasNext();){var i=n.next();if(i.isVisited()||i.getSym().isVisited()){e=i;break}}if(null===e)throw new tn("unable to find edge to compute depths at "+t.getCoordinate());t.getEdges().computeDepths(e);for(var n=t.getEdges().iterator();n.hasNext();){var i=n.next();i.setVisited(!0),this.copySymDepths(i)}},computeDepth:function(t){this.clearVisitedEdges();var e=this.finder.getEdge();e.getNode(),e.getLabel();e.setEdgeDepths(an.RIGHT,t),this.copySymDepths(e),this.computeDepths(e)},create:function(t){this.addReachable(t),this.finder.findEdge(this.dirEdgeList),this.rightMostCoord=this.finder.getCoordinate()},findResultEdges:function(){for(var t=this.dirEdgeList.iterator();t.hasNext();){var e=t.next();e.getDepth(an.RIGHT)>=1&&e.getDepth(an.LEFT)<=0&&!e.isInteriorAreaEdge()&&e.setInResult(!0)}},computeDepths:function(t){var e=new K,n=new Wi,i=t.getNode();for(n.addLast(i),e.add(i),t.setVisited(!0);!n.isEmpty();){var r=n.removeFirst();e.add(r),this.computeNodeDepth(r);for(var s=r.getEdges().iterator();s.hasNext();){var o=s.next(),a=o.getSym();if(!a.isVisited()){var u=a.getNode();e.contains(u)||(n.addLast(u),e.add(u))}}}},compareTo:function(t){var e=t;return this.rightMostCoord.x<e.rightMostCoord.x?-1:this.rightMostCoord.x>e.rightMostCoord.x?1:0},getEnvelope:function(){if(null===this.env){for(var t=new I,e=this.dirEdgeList.iterator();e.hasNext();)for(var n=e.next(),i=n.getEdge().getCoordinates(),r=0;r<i.length-1;r++)t.expandToInclude(i[r]);this.env=t}return this.env},addReachable:function(t){var e=new ce;for(e.add(t);!e.empty();){var n=e.pop();this.add(n,e)}},copySymDepths:function(t){var e=t.getSym();e.setDepth(an.LEFT,t.getDepth(an.RIGHT)),e.setDepth(an.RIGHT,t.getDepth(an.LEFT))},add:function(t,e){t.setVisited(!0),this.nodes.add(t);for(var n=t.getEdges().iterator();n.hasNext();){var i=n.next();this.dirEdgeList.add(i);var r=i.getSym(),s=r.getNode();s.isVisited()||e.push(s)}},getNodes:function(){return this.nodes},getDirectedEdges:function(){return this.dirEdgeList},interfaces_:function(){return[r]},getClass:function(){return ji}}),io(Ki.prototype,{isDeletable:function(t,e,n,i){var r=this.inputLine[t],s=this.inputLine[e],o=this.inputLine[n];return!!this.isConcave(r,s,o)&&(!!this.isShallow(r,s,o,i)&&this.isShallowSampled(r,s,t,n,i))},deleteShallowConcavities:function(){for(var t=1,e=(this.inputLine.length,this.findNextNonDeletedIndex(t)),n=this.findNextNonDeletedIndex(e),i=!1;n<this.inputLine.length;){var r=!1;this.isDeletable(t,e,n,this.distanceTol)&&(this.isDeleted[e]=Ki.DELETE,r=!0,i=!0),t=r?n:e,e=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(e)}return i},isShallowConcavity:function(t,e,n,i){return oe.computeOrientation(t,e,n)===this.angleOrientation&&oe.distancePointLine(e,t,n)<i},isShallowSampled:function(t,e,n,i,r){var s=Math.trunc((i-n)/Ki.NUM_PTS_TO_CHECK);s<=0&&(s=1);for(var o=n;o<i;o+=s)if(!this.isShallow(t,e,this.inputLine[o],r))return!1;return!0},isConcave:function(t,e,n){return oe.computeOrientation(t,e,n)===this.angleOrientation},simplify:function(t){this.distanceTol=Math.abs(t),t<0&&(this.angleOrientation=oe.CLOCKWISE),this.isDeleted=new Array(this.inputLine.length).fill(null);var e=!1;do{e=this.deleteShallowConcavities()}while(e);return this.collapseLine()},findNextNonDeletedIndex:function(t){for(var e=t+1;e<this.inputLine.length&&this.isDeleted[e]===Ki.DELETE;)e++;return e},isShallow:function(t,e,n,i){return oe.distancePointLine(e,t,n)<i},collapseLine:function(){for(var t=new E,e=0;e<this.inputLine.length;e++)this.isDeleted[e]!==Ki.DELETE&&t.add(this.inputLine[e]);return t.toCoordinateArray()},interfaces_:function(){return[]},getClass:function(){return Ki}}),Ki.simplify=function(t,e){return new Ki(t).simplify(e)},Ki.INIT=0,Ki.DELETE=1,Ki.KEEP=1,Ki.NUM_PTS_TO_CHECK=10,io(Zi.prototype,{getCoordinates:function(){return this.ptList.toArray(Zi.COORDINATE_ARRAY_TYPE)},setPrecisionModel:function(t){this.precisionModel=t},addPt:function(t){var e=new c(t);if(this.precisionModel.makePrecise(e),this.isRedundant(e))return null;this.ptList.add(e)},reverse:function(){},addPts:function(t,e){if(e)for(var n=0;n<t.length;n++)this.addPt(t[n]);else for(var n=t.length-1;n>=0;n--)this.addPt(t[n])},isRedundant:function(t){if(this.ptList.size()<1)return!1;var e=this.ptList.get(this.ptList.size()-1);return t.distance(e)<this.minimimVertexDistance},toString:function(){return(new $t).createLineString(this.getCoordinates()).toString()},closeRing:function(){if(this.ptList.size()<1)return null;var t=new c(this.ptList.get(0)),e=this.ptList.get(this.ptList.size()-1);if(this.ptList.size()>=2&&this.ptList.get(this.ptList.size()-2),t.equals(e))return null;this.ptList.add(t)},setMinimumVertexDistance:function(t){this.minimimVertexDistance=t},interfaces_:function(){return[]},getClass:function(){return Zi}}),Zi.COORDINATE_ARRAY_TYPE=new Array(0).fill(null),io(Qi.prototype,{addNextSegment:function(t,e){if(this.s0=this.s1,this.s1=this.s2,this.s2=t,this.seg0.setCoordinates(this.s0,this.s1),this.computeOffsetSegment(this.seg0,this.side,this.distance,this.offset0),this.seg1.setCoordinates(this.s1,this.s2),this.computeOffsetSegment(this.seg1,this.side,this.distance,this.offset1),this.s1.equals(this.s2))return null;var n=oe.computeOrientation(this.s0,this.s1,this.s2),i=n===oe.CLOCKWISE&&this.side===an.LEFT||n===oe.COUNTERCLOCKWISE&&this.side===an.RIGHT;0===n?this.addCollinear(e):i?this.addOutsideTurn(n,e):this.addInsideTurn(n,e)},addLineEndCap:function(t,e){var n=new ae(t,e),i=new ae;this.computeOffsetSegment(n,an.LEFT,this.distance,i);var r=new ae;this.computeOffsetSegment(n,an.RIGHT,this.distance,r);var s=e.x-t.x,o=e.y-t.y,a=Math.atan2(o,s);switch(this.bufParams.getEndCapStyle()){case Xi.CAP_ROUND:this.segList.addPt(i.p1),this.addFilletArc(e,a+Math.PI/2,a-Math.PI/2,oe.CLOCKWISE,this.distance),this.segList.addPt(r.p1);break;case Xi.CAP_FLAT:this.segList.addPt(i.p1),this.segList.addPt(r.p1);break;case Xi.CAP_SQUARE:var u=new c;u.x=Math.abs(this.distance)*Math.cos(a),u.y=Math.abs(this.distance)*Math.sin(a);var l=new c(i.p1.x+u.x,i.p1.y+u.y),h=new c(r.p1.x+u.x,r.p1.y+u.y);this.segList.addPt(l),this.segList.addPt(h)}},getCoordinates:function(){return this.segList.getCoordinates()},addMitreJoin:function(t,e,n,i){var r=!0,s=null;try{s=M.intersection(e.p0,e.p1,n.p0,n.p1);(i<=0?1:s.distance(t)/Math.abs(i))>this.bufParams.getMitreLimit()&&(r=!1)}catch(t){if(!(t instanceof C))throw t;s=new c(0,0),r=!1}r?this.segList.addPt(s):this.addLimitedMitreJoin(e,n,i,this.bufParams.getMitreLimit())},addFilletCorner:function(t,e,n,i,r){var s=e.x-t.x,o=e.y-t.y,a=Math.atan2(o,s),u=n.x-t.x,l=n.y-t.y,h=Math.atan2(l,u);i===oe.CLOCKWISE?a<=h&&(a+=2*Math.PI):a>=h&&(a-=2*Math.PI),this.segList.addPt(e),this.addFilletArc(t,a,h,i,r),this.segList.addPt(n)},
addOutsideTurn:function(t,e){if(this.offset0.p1.distance(this.offset1.p0)<this.distance*Qi.OFFSET_SEGMENT_SEPARATION_FACTOR)return this.segList.addPt(this.offset0.p1),null;this.bufParams.getJoinStyle()===Xi.JOIN_MITRE?this.addMitreJoin(this.s1,this.offset0,this.offset1,this.distance):this.bufParams.getJoinStyle()===Xi.JOIN_BEVEL?this.addBevelJoin(this.offset0,this.offset1):(e&&this.segList.addPt(this.offset0.p1),this.addFilletCorner(this.s1,this.offset0.p1,this.offset1.p0,t,this.distance),this.segList.addPt(this.offset1.p0))},createSquare:function(t){this.segList.addPt(new c(t.x+this.distance,t.y+this.distance)),this.segList.addPt(new c(t.x+this.distance,t.y-this.distance)),this.segList.addPt(new c(t.x-this.distance,t.y-this.distance)),this.segList.addPt(new c(t.x-this.distance,t.y+this.distance)),this.segList.closeRing()},addSegments:function(t,e){this.segList.addPts(t,e)},addFirstSegment:function(){this.segList.addPt(this.offset1.p0)},addLastSegment:function(){this.segList.addPt(this.offset1.p1)},initSideSegments:function(t,e,n){this.s1=t,this.s2=e,this.side=n,this.seg1.setCoordinates(t,e),this.computeOffsetSegment(this.seg1,n,this.distance,this.offset1)},addLimitedMitreJoin:function(t,e,n,i){var r=this.seg0.p1,s=xi.angle(r,this.seg0.p0),o=(xi.angle(r,this.seg1.p1),xi.angleBetweenOriented(this.seg0.p0,r,this.seg1.p1)),a=o/2,u=xi.normalize(s+a),l=xi.normalize(u+Math.PI),h=i*n,f=h*Math.abs(Math.sin(a)),g=n-f,d=r.x+h*Math.cos(l),p=r.y+h*Math.sin(l),m=new c(d,p),v=new ae(r,m),y=v.pointAlongOffset(1,g),x=v.pointAlongOffset(1,-g);this.side===an.LEFT?(this.segList.addPt(y),this.segList.addPt(x)):(this.segList.addPt(x),this.segList.addPt(y))},computeOffsetSegment:function(t,e,n,i){var r=e===an.LEFT?1:-1,s=t.p1.x-t.p0.x,o=t.p1.y-t.p0.y,a=Math.sqrt(s*s+o*o),u=r*n*s/a,l=r*n*o/a;i.p0.x=t.p0.x-l,i.p0.y=t.p0.y+u,i.p1.x=t.p1.x-l,i.p1.y=t.p1.y+u},addFilletArc:function(t,e,n,i,r){var s=i===oe.CLOCKWISE?-1:1,o=Math.abs(e-n),a=Math.trunc(o/this.filletAngleQuantum+.5);if(a<1)return null;var u=null,l=null;u=0,l=o/a;for(var h=u,f=new c;h<o;){var g=e+s*h;f.x=t.x+r*Math.cos(g),f.y=t.y+r*Math.sin(g),this.segList.addPt(f),h+=l}},addInsideTurn:function(t,e){if(this.li.computeIntersection(this.offset0.p0,this.offset0.p1,this.offset1.p0,this.offset1.p1),this.li.hasIntersection())this.segList.addPt(this.li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this.offset0.p1.distance(this.offset1.p0)<this.distance*Qi.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this.segList.addPt(this.offset0.p1);else{if(this.segList.addPt(this.offset0.p1),this.closingSegLengthFactor>0){var n=new c((this.closingSegLengthFactor*this.offset0.p1.x+this.s1.x)/(this.closingSegLengthFactor+1),(this.closingSegLengthFactor*this.offset0.p1.y+this.s1.y)/(this.closingSegLengthFactor+1));this.segList.addPt(n);var i=new c((this.closingSegLengthFactor*this.offset1.p0.x+this.s1.x)/(this.closingSegLengthFactor+1),(this.closingSegLengthFactor*this.offset1.p0.y+this.s1.y)/(this.closingSegLengthFactor+1));this.segList.addPt(i)}else this.segList.addPt(this.s1);this.segList.addPt(this.offset1.p0)}},createCircle:function(t){var e=new c(t.x+this.distance,t.y);this.segList.addPt(e),this.addFilletArc(t,0,2*Math.PI,-1,this.distance),this.segList.closeRing()},addBevelJoin:function(t,e){this.segList.addPt(t.p1),this.segList.addPt(e.p0)},init:function(t){this.distance=t,this.maxCurveSegmentError=t*(1-Math.cos(this.filletAngleQuantum/2)),this.segList=new Zi,this.segList.setPrecisionModel(this.precisionModel),this.segList.setMinimumVertexDistance(t*Qi.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},addCollinear:function(t){this.li.computeIntersection(this.s0,this.s1,this.s1,this.s2),this.li.getIntersectionNum()>=2&&(this.bufParams.getJoinStyle()===Xi.JOIN_BEVEL||this.bufParams.getJoinStyle()===Xi.JOIN_MITRE?(t&&this.segList.addPt(this.offset0.p1),this.segList.addPt(this.offset1.p0)):this.addFilletCorner(this.s1,this.offset0.p1,this.offset1.p0,oe.CLOCKWISE,this.distance))},closeRing:function(){this.segList.closeRing()},hasNarrowConcaveAngle:function(){return this._hasNarrowConcaveAngle},interfaces_:function(){return[]},getClass:function(){return Qi}}),Qi.OFFSET_SEGMENT_SEPARATION_FACTOR=.001,Qi.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR=.001,Qi.CURVE_VERTEX_SNAP_DISTANCE_FACTOR=1e-6,Qi.MAX_CLOSING_SEG_LEN_FACTOR=80,io(Ji.prototype,{getOffsetCurve:function(t,e){if(this.distance=e,0===e)return null;var n=e<0,i=Math.abs(e),r=this.getSegGen(i);t.length<=1?this.computePointCurve(t[0],r):this.computeOffsetCurve(t,n,r);var s=r.getCoordinates();return n&&Y.reverse(s),s},computeSingleSidedBufferCurve:function(t,e,n){var i=this.simplifyTolerance(this.distance);if(e){n.addSegments(t,!0);var r=Ki.simplify(t,-i),s=r.length-1;n.initSideSegments(r[s],r[s-1],an.LEFT),n.addFirstSegment();for(var o=s-2;o>=0;o--)n.addNextSegment(r[o],!0)}else{n.addSegments(t,!1);var a=Ki.simplify(t,i),u=a.length-1;n.initSideSegments(a[0],a[1],an.LEFT),n.addFirstSegment();for(var o=2;o<=u;o++)n.addNextSegment(a[o],!0)}n.addLastSegment(),n.closeRing()},computeRingBufferCurve:function(t,e,n){var i=this.simplifyTolerance(this.distance);e===an.RIGHT&&(i=-i);var r=Ki.simplify(t,i),s=r.length-1;n.initSideSegments(r[s-1],r[0],e);for(var o=1;o<=s;o++){var a=1!==o;n.addNextSegment(r[o],a)}n.closeRing()},computeLineBufferCurve:function(t,e){var n=this.simplifyTolerance(this.distance),i=Ki.simplify(t,n),r=i.length-1;e.initSideSegments(i[0],i[1],an.LEFT);for(var s=2;s<=r;s++)e.addNextSegment(i[s],!0);e.addLastSegment(),e.addLineEndCap(i[r-1],i[r]);var o=Ki.simplify(t,-n),a=o.length-1;e.initSideSegments(o[a],o[a-1],an.LEFT);for(var s=a-2;s>=0;s--)e.addNextSegment(o[s],!0);e.addLastSegment(),e.addLineEndCap(o[1],o[0]),e.closeRing()},computePointCurve:function(t,e){switch(this.bufParams.getEndCapStyle()){case Xi.CAP_ROUND:e.createCircle(t);break;case Xi.CAP_SQUARE:e.createSquare(t)}},getLineCurve:function(t,e){if(this.distance=e,e<0&&!this.bufParams.isSingleSided())return null;if(0===e)return null;var n=Math.abs(e),i=this.getSegGen(n);if(t.length<=1)this.computePointCurve(t[0],i);else if(this.bufParams.isSingleSided()){var r=e<0;this.computeSingleSidedBufferCurve(t,r,i)}else this.computeLineBufferCurve(t,i);return i.getCoordinates()},getBufferParameters:function(){return this.bufParams},simplifyTolerance:function(t){return t*this.bufParams.getSimplifyFactor()},getRingCurve:function(t,e,n){if(this.distance=n,t.length<=2)return this.getLineCurve(t,n);if(0===n)return Ji.copyCoordinates(t);var i=this.getSegGen(n);return this.computeRingBufferCurve(t,e,i),i.getCoordinates()},computeOffsetCurve:function(t,e,n){var i=this.simplifyTolerance(this.distance);if(e){var r=Ki.simplify(t,-i),s=r.length-1;n.initSideSegments(r[s],r[s-1],an.LEFT),n.addFirstSegment();for(var o=s-2;o>=0;o--)n.addNextSegment(r[o],!0)}else{var a=Ki.simplify(t,i),u=a.length-1;n.initSideSegments(a[0],a[1],an.LEFT),n.addFirstSegment();for(var o=2;o<=u;o++)n.addNextSegment(a[o],!0)}n.addLastSegment()},getSegGen:function(t){return new Qi(this.precisionModel,this.bufParams,t)},interfaces_:function(){return[]},getClass:function(){return Ji}}),Ji.copyCoordinates=function(t){for(var e=new Array(t.length).fill(null),n=0;n<e.length;n++)e[n]=new c(t[n]);return e},io($i.prototype,{findStabbedSegments:function(){if(1===arguments.length){for(var t=arguments[0],e=new x,n=this.subgraphs.iterator();n.hasNext();){var i=n.next(),r=i.getEnvelope();t.y<r.getMinY()||t.y>r.getMaxY()||this.findStabbedSegments(t,i.getDirectedEdges(),e)}return e}if(3===arguments.length)if(oo(arguments[2],m)&&arguments[0]instanceof c&&arguments[1]instanceof vn)for(var s=arguments[0],o=arguments[1],a=arguments[2],u=o.getEdge().getCoordinates(),n=0;n<u.length-1;n++){this.seg.p0=u[n],this.seg.p1=u[n+1],this.seg.p0.y>this.seg.p1.y&&this.seg.reverse();var l=Math.max(this.seg.p0.x,this.seg.p1.x);if(!(l<s.x)&&!(this.seg.isHorizontal()||s.y<this.seg.p0.y||s.y>this.seg.p1.y||oe.computeOrientation(this.seg.p0,this.seg.p1,s)===oe.RIGHT)){var h=o.getDepth(an.LEFT);this.seg.p0.equals(u[n])||(h=o.getDepth(an.RIGHT));var f=new tr(this.seg,h);a.add(f)}}else if(oo(arguments[2],m)&&arguments[0]instanceof c&&oo(arguments[1],m))for(var g=arguments[0],d=arguments[1],p=arguments[2],n=d.iterator();n.hasNext();){var v=n.next();v.isForward()&&this.findStabbedSegments(g,v,p)}},getDepth:function(t){var e=this.findStabbedSegments(t);return 0===e.size()?0:xo.min(e).leftDepth},interfaces_:function(){return[]},getClass:function(){return $i}}),io(tr.prototype,{compareTo:function(t){var e=t;if(this.upwardSeg.minX()>=e.upwardSeg.maxX())return 1;if(this.upwardSeg.maxX()<=e.upwardSeg.minX())return-1;var n=this.upwardSeg.orientationIndex(e.upwardSeg);return 0!==n?n:(n=-1*e.upwardSeg.orientationIndex(this.upwardSeg),0!==n?n:this.upwardSeg.compareTo(e.upwardSeg))},compareX:function(t,e){var n=t.p0.compareTo(e.p0);return 0!==n?n:t.p1.compareTo(e.p1)},toString:function(){return this.upwardSeg.toString()},interfaces_:function(){return[r]},getClass:function(){return tr}}),$i.DepthSegment=tr,io(er.prototype,{addPoint:function(t){if(this.distance<=0)return null;var e=t.getCoordinates(),n=this.curveBuilder.getLineCurve(e,this.distance);this.addCurve(n,S.EXTERIOR,S.INTERIOR)},addPolygon:function(t){var e=this.distance,n=an.LEFT;this.distance<0&&(e=-this.distance,n=an.RIGHT);var i=t.getExteriorRing(),r=Y.removeRepeatedPoints(i.getCoordinates());if(this.distance<0&&this.isErodedCompletely(i,this.distance))return null;if(this.distance<=0&&r.length<3)return null;this.addPolygonRing(r,e,n,S.EXTERIOR,S.INTERIOR);for(var s=0;s<t.getNumInteriorRing();s++){var o=t.getInteriorRingN(s),a=Y.removeRepeatedPoints(o.getCoordinates());this.distance>0&&this.isErodedCompletely(o,-this.distance)||this.addPolygonRing(a,e,an.opposite(n),S.INTERIOR,S.EXTERIOR)}},isTriangleErodedCompletely:function(t,e){var n=new Ei(t[0],t[1],t[2]),i=n.inCentre();return oe.distancePointLine(i,n.p0,n.p1)<Math.abs(e)},addLineString:function(t){if(this.distance<=0&&!this.curveBuilder.getBufferParameters().isSingleSided())return null;var e=Y.removeRepeatedPoints(t.getCoordinates()),n=this.curveBuilder.getLineCurve(e,this.distance);this.addCurve(n,S.EXTERIOR,S.INTERIOR)},addCurve:function(t,e,n){if(null===t||t.length<2)return null;var i=new Xe(t,new ln(0,S.BOUNDARY,e,n));this.curveList.add(i)},getCurves:function(){return this.add(this.inputGeom),this.curveList},addPolygonRing:function(t,e,n,i,r){if(0===e&&t.length<Rt.MINIMUM_VALID_SIZE)return null;var s=i,o=r;t.length>=Rt.MINIMUM_VALID_SIZE&&oe.isCCW(t)&&(s=r,o=i,n=an.opposite(n));var a=this.curveBuilder.getRingCurve(t,n,e);this.addCurve(a,s,o)},add:function(t){if(t.isEmpty())return null;if(t instanceof Lt)this.addPolygon(t);else if(t instanceof It)this.addLineString(t);else if(t instanceof Ct)this.addPoint(t);else if(t instanceof wt)this.addCollection(t);else if(t instanceof ht)this.addCollection(t);else if(t instanceof Tt)this.addCollection(t);else{if(!(t instanceof lt))throw new UnsupportedOperationException(t.getClass().getName());this.addCollection(t)}},isErodedCompletely:function(t,e){var n=t.getCoordinates();if(n.length<4)return e<0;if(4===n.length)return this.isTriangleErodedCompletely(n,e);var i=t.getEnvelopeInternal(),r=Math.min(i.getHeight(),i.getWidth());return e<0&&2*Math.abs(e)>r},addCollection:function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},interfaces_:function(){return[]},getClass:function(){return er}}),io(nr.prototype,{isTrivialIntersection:function(t,e,n,i){if(t===n&&1===this.li.getIntersectionNum()){if(nr.isAdjacentSegments(e,i))return!0;if(t.isClosed()){var r=t.size()-1;if(0===e&&i===r||0===i&&e===r)return!0}}return!1},getProperIntersectionPoint:function(){return this.properIntersectionPoint},hasProperInteriorIntersection:function(){return this.hasProperInterior},getLineIntersector:function(){return this.li},hasProperIntersection:function(){return this.hasProper},processIntersections:function(t,e,n,i){if(t===n&&e===i)return null;this.numTests++;var r=t.getCoordinates()[e],s=t.getCoordinates()[e+1],o=n.getCoordinates()[i],a=n.getCoordinates()[i+1];this.li.computeIntersection(r,s,o,a),this.li.hasIntersection()&&(this.numIntersections++,this.li.isInteriorIntersection()&&(this.numInteriorIntersections++,this.hasInterior=!0),this.isTrivialIntersection(t,e,n,i)||(this._hasIntersection=!0,t.addIntersections(this.li,e,0),n.addIntersections(this.li,i,1),this.li.isProper()&&(this.numProperIntersections++,this.hasProper=!0,this.hasProperInterior=!0)))},hasIntersection:function(){return this._hasIntersection},isDone:function(){return!1},hasInteriorIntersection:function(){return this.hasInterior},interfaces_:function(){return[en]},getClass:function(){return nr}}),nr.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)},io(ir.prototype,{setWorkingPrecisionModel:function(t){this.workingPrecisionModel=t},insertUniqueEdge:function(t){var e=this.edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),i=t.getLabel();e.isPointwiseEqual(t)||(i=new ln(t.getLabel()),i.flip()),n.merge(i);var r=ir.depthDelta(i),s=e.getDepthDelta(),o=s+r;e.setDepthDelta(o)}else this.edgeList.add(t),t.setDepthDelta(ir.depthDelta(t.getLabel()))},buildSubgraphs:function(t,e){for(var n=new x,i=t.iterator();i.hasNext();){var r=i.next(),s=r.getRightmostCoordinate(),o=new $i(n),a=o.getDepth(s);r.computeDepth(a),r.findResultEdges(),n.add(r),e.add(r.getDirectedEdges(),r.getNodes())}},createSubgraphs:function(t){for(var e=new x,n=t.getNodes().iterator();n.hasNext();){var i=n.next();if(!i.isVisited()){var r=new ji;r.create(i),e.add(r)}}return xo.sort(e,xo.reverseOrder()),e},createEmptyResultGeometry:function(){return this.geomFact.createPolygon()},getNoder:function(t){if(null!==this.workingNoder)return this.workingNoder;var e=new Je,n=new ie;return n.setPrecisionModel(t),e.setSegmentIntersector(new nr(n)),e},buffer:function(t,e){var n=this.workingPrecisionModel;null===n&&(n=t.getPrecisionModel()),this.geomFact=t.getFactory();var i=new Ji(n,this.bufParams),r=new er(t,e,i),s=r.getCurves();if(s.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(s,n),this.graph=new xn(new Rn),this.graph.addEdges(this.edgeList.getEdges());var o=this.createSubgraphs(this.graph),a=new En(this.geomFact);this.buildSubgraphs(o,a);var u=a.getPolygons();return u.size()<=0?this.createEmptyResultGeometry():this.geomFact.buildGeometry(u)},computeNodedEdges:function(t,e){var n=this.getNoder(e);n.computeNodes(t);for(var i=n.getNodedSubstrings(),r=i.iterator();r.hasNext();){var s=r.next(),o=s.getCoordinates();if(2!==o.length||!o[0].equals2D(o[1])){var a=s.getData(),u=new jn(s.getCoordinates(),new ln(a));this.insertUniqueEdge(u)}}},setNoder:function(t){this.workingNoder=t},interfaces_:function(){return[]},getClass:function(){return ir}}),ir.depthDelta=function(t){var e=t.getLocation(0,an.LEFT),n=t.getLocation(0,an.RIGHT);return e===S.INTERIOR&&n===S.EXTERIOR?1:e===S.EXTERIOR&&n===S.INTERIOR?-1:0},ir.convertSegStrings=function(t){for(var e=new $t,n=new x;t.hasNext();){var i=t.next(),r=e.createLineString(i.getCoordinates());n.add(r)}return e.buildGeometry(n)},io(rr.prototype,{checkEndPtVertexIntersections:function(){if(0===arguments.length)for(var t=this.segStrings.iterator();t.hasNext();){var e=t.next(),n=e.getCoordinates();this.checkEndPtVertexIntersections(n[0],this.segStrings),this.checkEndPtVertexIntersections(n[n.length-1],this.segStrings)}else if(2===arguments.length)for(var i=arguments[0],r=arguments[1],t=r.iterator();t.hasNext();)for(var e=t.next(),n=e.getCoordinates(),s=1;s<n.length-1;s++)if(n[s].equals(i))throw new u("found endpt/interior pt intersection at index "+s+" :pt "+i)},checkInteriorIntersections:function(){if(0===arguments.length)for(var t=this.segStrings.iterator();t.hasNext();)for(var e=t.next(),n=this.segStrings.iterator();n.hasNext();){var i=n.next();this.checkInteriorIntersections(e,i)}else if(2===arguments.length)for(var r=arguments[0],s=arguments[1],o=r.getCoordinates(),a=s.getCoordinates(),l=0;l<o.length-1;l++)for(var h=0;h<a.length-1;h++)this.checkInteriorIntersections(r,l,s,h);else if(4===arguments.length){var c=arguments[0],f=arguments[1],g=arguments[2],d=arguments[3];if(c===g&&f===d)return null;var p=c.getCoordinates()[f],m=c.getCoordinates()[f+1],v=g.getCoordinates()[d],y=g.getCoordinates()[d+1];if(this.li.computeIntersection(p,m,v,y),this.li.hasIntersection()&&(this.li.isProper()||this.hasInteriorIntersection(this.li,p,m)||this.hasInteriorIntersection(this.li,v,y)))throw new u("found non-noded intersection at "+p+"-"+m+" and "+v+"-"+y)}},checkValid:function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},checkCollapses:function(){if(0===arguments.length)for(var t=this.segStrings.iterator();t.hasNext();){var e=t.next();this.checkCollapses(e)}else if(1===arguments.length)for(var n=arguments[0],i=n.getCoordinates(),t=0;t<i.length-2;t++)this.checkCollapse(i[t],i[t+1],i[t+2])},hasInteriorIntersection:function(t,e,n){for(var i=0;i<t.getIntersectionNum();i++){var r=t.getIntersection(i);if(!r.equals(e)&&!r.equals(n))return!0}return!1},checkCollapse:function(t,e,n){if(t.equals(n))throw new u("found non-noded collapse at "+rr.fact.createLineString([t,e,n]))},interfaces_:function(){return[]},getClass:function(){return rr}}),rr.fact=new $t,io(sr.prototype,{intersectsScaled:function(t,e){var n=Math.min(t.x,e.x),i=Math.max(t.x,e.x),r=Math.min(t.y,e.y),s=Math.max(t.y,e.y),o=this.maxx<n||this.minx>i||this.maxy<r||this.miny>s;if(o)return!1;var a=this.intersectsToleranceSquare(t,e);return h.isTrue(!(o&&a),"Found bad envelope test"),a},initCorners:function(t){this.minx=t.x-.5,this.maxx=t.x+.5,this.miny=t.y-.5,this.maxy=t.y+.5,this.corner[0]=new c(this.maxx,this.maxy),this.corner[1]=new c(this.minx,this.maxy),this.corner[2]=new c(this.minx,this.miny),this.corner[3]=new c(this.maxx,this.miny)},intersects:function(t,e){return 1===this.scaleFactor?this.intersectsScaled(t,e):(this.copyScaled(t,this.p0Scaled),this.copyScaled(e,this.p1Scaled),this.intersectsScaled(this.p0Scaled,this.p1Scaled))},scale:function(t){return Math.round(t*this.scaleFactor)},getCoordinate:function(){return this.originalPt},copyScaled:function(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)},getSafeEnvelope:function(){if(null===this.safeEnv){var t=sr.SAFE_ENV_EXPANSION_FACTOR/this.scaleFactor;this.safeEnv=new I(this.originalPt.x-t,this.originalPt.x+t,this.originalPt.y-t,this.originalPt.y+t)}return this.safeEnv},intersectsPixelClosure:function(t,e){return this.li.computeIntersection(t,e,this.corner[0],this.corner[1]),!!this.li.hasIntersection()||(this.li.computeIntersection(t,e,this.corner[1],this.corner[2]),!!this.li.hasIntersection()||(this.li.computeIntersection(t,e,this.corner[2],this.corner[3]),!!this.li.hasIntersection()||(this.li.computeIntersection(t,e,this.corner[3],this.corner[0]),!!this.li.hasIntersection())))},intersectsToleranceSquare:function(t,e){var n=!1,i=!1;return this.li.computeIntersection(t,e,this.corner[0],this.corner[1]),!!this.li.isProper()||(this.li.computeIntersection(t,e,this.corner[1],this.corner[2]),!!this.li.isProper()||(this.li.hasIntersection()&&(n=!0),this.li.computeIntersection(t,e,this.corner[2],this.corner[3]),!!this.li.isProper()||(this.li.hasIntersection()&&(i=!0),this.li.computeIntersection(t,e,this.corner[3],this.corner[0]),!!this.li.isProper()||(!(!n||!i)||(!!t.equals(this.pt)||!!e.equals(this.pt))))))},addSnappedNode:function(t,e){var n=t.getCoordinate(e),i=t.getCoordinate(e+1);return!!this.intersects(n,i)&&(t.addIntersection(this.getCoordinate(),e),!0)},interfaces_:function(){return[]},getClass:function(){return sr}}),sr.SAFE_ENV_EXPANSION_FACTOR=.75,io(or.prototype,{snap:function(){if(1===arguments.length){var t=arguments[0];return this.snap(t,null,-1)}if(3===arguments.length){var e=arguments[0],n=arguments[1],i=arguments[2],r=e.getSafeEnvelope(),s=new ar(e,n,i);return this.index.query(r,{interfaces_:function(){return[be]},visitItem:function(t){t.select(r,s)}}),s.isNodeAdded()}},interfaces_:function(){return[]},getClass:function(){return or}}),ro(ar,oi),io(ar.prototype,{isNodeAdded:function(){return this._isNodeAdded},select:function(){if(2!==arguments.length)return oi.prototype.select.apply(this,arguments);var t=arguments[0],e=arguments[1],n=t.getContext();if(null!==this.parentEdge&&n===this.parentEdge&&e===this.hotPixelVertexIndex)return null;this._isNodeAdded=this.hotPixel.addSnappedNode(n,e)},interfaces_:function(){return[]},getClass:function(){return ar}}),or.HotPixelSnapAction=ar,io(ur.prototype,{processIntersections:function(t,e,n,i){if(t===n&&e===i)return null;var r=t.getCoordinates()[e],s=t.getCoordinates()[e+1],o=n.getCoordinates()[i],a=n.getCoordinates()[i+1];if(this.li.computeIntersection(r,s,o,a),this.li.hasIntersection()&&this.li.isInteriorIntersection()){for(var u=0;u<this.li.getIntersectionNum();u++)this.interiorIntersections.add(this.li.getIntersection(u));t.addIntersections(this.li,e,0),n.addIntersections(this.li,i,1)}},isDone:function(){return!1},getInteriorIntersections:function(){return this.interiorIntersections},interfaces_:function(){return[en]},getClass:function(){return ur}}),io(lr.prototype,{checkCorrectness:function(t){var e=Xe.getNodedSubstrings(t),n=new rr(e);try{n.checkValid()}catch(t){if(!(t instanceof N))throw t;t.printStackTrace()}},getNodedSubstrings:function(){return Xe.getNodedSubstrings(this.nodedSegStrings)},snapRound:function(t,e){var n=this.findInteriorIntersections(t,e);this.computeIntersectionSnaps(n),this.computeVertexSnaps(t)},findInteriorIntersections:function(t,e){var n=new ur(e);return this.noder.setSegmentIntersector(n),this.noder.computeNodes(t),n.getInteriorIntersections()},computeVertexSnaps:function(){if(oo(arguments[0],d))for(var t=arguments[0],e=t.iterator();e.hasNext();){var n=e.next();this.computeVertexSnaps(n)}else if(arguments[0]instanceof Xe)for(var i=arguments[0],r=i.getCoordinates(),s=0;s<r.length;s++){var o=new sr(r[s],this.scaleFactor,this.li),a=this.pointSnapper.snap(o,i,s);a&&i.addIntersection(r[s],s)}},computeNodes:function(t){this.nodedSegStrings=t,this.noder=new Je,this.pointSnapper=new or(this.noder.getIndex()),this.snapRound(t,this.li)},computeIntersectionSnaps:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),i=new sr(n,this.scaleFactor,this.li);this.pointSnapper.snap(i)}},interfaces_:function(){return[Ze]},getClass:function(){return lr}}),io(hr.prototype,{bufferFixedPrecision:function(t){var e=new ki(new lr(new Qt(1)),t.getScale()),n=new ir(this.bufParams);n.setWorkingPrecisionModel(t),n.setNoder(e),this.resultGeometry=n.buffer(this.argGeom,this.distance)},bufferReducedPrecision:function(){if(0===arguments.length){for(var t=hr.MAX_PRECISION_DIGITS;t>=0;t--){try{this.bufferReducedPrecision(t)}catch(t){if(!(t instanceof tn))throw t;this.saveException=t}if(null!==this.resultGeometry)return null}throw this.saveException}if(1===arguments.length){var e=arguments[0],n=hr.precisionScaleFactor(this.argGeom,this.distance,e),i=new Qt(n);this.bufferFixedPrecision(i)}},computeGeometry:function(){if(this.bufferOriginalPrecision(),null!==this.resultGeometry)return null;var t=this.argGeom.getFactory().getPrecisionModel();t.getType()===Qt.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()},setQuadrantSegments:function(t){this.bufParams.setQuadrantSegments(t)},bufferOriginalPrecision:function(){try{var t=new ir(this.bufParams);this.resultGeometry=t.buffer(this.argGeom,this.distance)}catch(t){if(!(t instanceof u))throw t;this.saveException=t}},getResultGeometry:function(t){return this.distance=t,this.computeGeometry(),this.resultGeometry},setEndCapStyle:function(t){this.bufParams.setEndCapStyle(t)},interfaces_:function(){return[]},getClass:function(){return hr}}),hr.bufferOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new hr(t),i=n.getResultGeometry(e);return i}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof F&&"number"==typeof arguments[1]){var r=arguments[0],s=arguments[1],o=arguments[2],a=new hr(r);a.setQuadrantSegments(o);var i=a.getResultGeometry(s);return i}if(arguments[2]instanceof Xi&&arguments[0]instanceof F&&"number"==typeof arguments[1]){var u=arguments[0],l=arguments[1],h=arguments[2],a=new hr(u,h),i=a.getResultGeometry(l);return i}}else if(4===arguments.length){var c=arguments[0],f=arguments[1],g=arguments[2],d=arguments[3],a=new hr(c);a.setQuadrantSegments(g),a.setEndCapStyle(d);var i=a.getResultGeometry(f);return i}},hr.precisionScaleFactor=function(t,e,n){var i=t.getEnvelopeInternal(),r=L.max(Math.abs(i.getMaxX()),Math.abs(i.getMaxY()),Math.abs(i.getMinX()),Math.abs(i.getMinY())),s=e>0?e:0,o=r+2*s,a=Math.trunc(Math.log(o)/Math.log(10)+1),u=n-a;return Math.pow(10,u)},hr.CAP_ROUND=Xi.CAP_ROUND,hr.CAP_BUTT=Xi.CAP_FLAT,hr.CAP_FLAT=Xi.CAP_FLAT,hr.CAP_SQUARE=Xi.CAP_SQUARE,hr.MAX_PRECISION_DIGITS=12;var _o=Object.freeze({BufferOp:hr,BufferParameters:Xi});io(cr.prototype,{filter:function(t){t instanceof Lt&&this.comps.add(t)},interfaces_:function(){return[at]},getClass:function(){return cr}}),cr.getPolygons=function(){if(1===arguments.length){var t=arguments[0];return cr.getPolygons(t,new x)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof Lt?n.add(e):e instanceof lt&&e.apply(new cr(n)),n}},io(fr.prototype,{isInsideArea:function(){return this.segIndex===fr.INSIDE_AREA},getCoordinate:function(){return this.pt},getGeometryComponent:function(){return this.component},getSegmentIndex:function(){return this.segIndex},interfaces_:function(){return[]},getClass:function(){return fr}}),fr.INSIDE_AREA=-1,io(gr.prototype,{filter:function(t){t instanceof Ct&&this.pts.add(t)},interfaces_:function(){return[at]},getClass:function(){return gr}}),gr.getPoints=function(){if(1===arguments.length){var t=arguments[0];return t instanceof Ct?xo.singletonList(t):gr.getPoints(t,new x)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof Ct?n.add(e):e instanceof lt&&e.apply(new gr(n)),n}},io(dr.prototype,{filter:function(t){(t instanceof Ct||t instanceof It||t instanceof Lt)&&this.locations.add(new fr(t,0,t.getCoordinate()))},interfaces_:function(){return[at]},getClass:function(){return dr}}),dr.getLocations=function(t){var e=new x;return t.apply(new dr(e)),e},io(pr.prototype,{computeContainmentDistance:function(){if(0===arguments.length){var t=new Array(2).fill(null);if(this.computeContainmentDistance(0,t),this.minDistance<=this.terminateDistance)return null;this.computeContainmentDistance(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],i=1-e,r=cr.getPolygons(this.geom[e]);if(r.size()>0){var s=dr.getLocations(this.geom[i]);if(this.computeContainmentDistance(s,r,n),this.minDistance<=this.terminateDistance)return this.minDistanceLocation[i]=n[0],this.minDistanceLocation[e]=n[1],null}}else if(3===arguments.length)if(arguments[2]instanceof Array&&oo(arguments[0],m)&&oo(arguments[1],m)){for(var o=arguments[0],a=arguments[1],u=arguments[2],l=0;l<o.size();l++)for(var h=o.get(l),c=0;c<a.size();c++)if(this.computeContainmentDistance(h,a.get(c),u),this.minDistance<=this.terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof fr&&arguments[1]instanceof Lt){var f=arguments[0],g=arguments[1],d=arguments[2],p=f.getCoordinate();if(S.EXTERIOR!==this.ptLocator.locate(p,g))return this.minDistance=0,d[0]=f,d[1]=new fr(g,p),null}},computeMinDistanceLinesPoints:function(t,e,n){for(var i=0;i<t.size();i++)for(var r=t.get(i),s=0;s<e.size();s++){var o=e.get(s);if(this.computeMinDistance(r,o,n),this.minDistance<=this.terminateDistance)return null}},computeFacetDistance:function(){var t=new Array(2).fill(null),e=qn.getLines(this.geom[0]),n=qn.getLines(this.geom[1]),i=gr.getPoints(this.geom[0]),r=gr.getPoints(this.geom[1]);return this.computeMinDistanceLines(e,n,t),this.updateMinDistance(t,!1),this.minDistance<=this.terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(e,r,t),this.updateMinDistance(t,!1),this.minDistance<=this.terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(n,i,t),this.updateMinDistance(t,!0),this.minDistance<=this.terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistancePoints(i,r,t),void this.updateMinDistance(t,!1))))},nearestLocations:function(){return this.computeMinDistance(),this.minDistanceLocation},updateMinDistance:function(t,e){if(null===t[0])return null;e?(this.minDistanceLocation[0]=t[1],this.minDistanceLocation[1]=t[0]):(this.minDistanceLocation[0]=t[0],this.minDistanceLocation[1]=t[1])},nearestPoints:function(){return this.computeMinDistance(),[this.minDistanceLocation[0].getCoordinate(),this.minDistanceLocation[1].getCoordinate()]},computeMinDistance:function(){if(0===arguments.length){if(null!==this.minDistanceLocation)return null;if(this.minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this.minDistance<=this.terminateDistance)return null;this.computeFacetDistance()}else if(3===arguments.length)if(arguments[2]instanceof Array&&arguments[0]instanceof It&&arguments[1]instanceof Ct){var t=arguments[0],e=arguments[1],n=arguments[2];if(t.getEnvelopeInternal().distance(e.getEnvelopeInternal())>this.minDistance)return null;for(var i=t.getCoordinates(),r=e.getCoordinate(),s=0;s<i.length-1;s++){var o=oe.distancePointLine(r,i[s],i[s+1]);if(o<this.minDistance){this.minDistance=o;var a=new ae(i[s],i[s+1]),u=a.closestPoint(r);n[0]=new fr(t,s,u),n[1]=new fr(e,0,r)}if(this.minDistance<=this.terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof It&&arguments[1]instanceof It){var l=arguments[0],h=arguments[1],c=arguments[2];if(l.getEnvelopeInternal().distance(h.getEnvelopeInternal())>this.minDistance)return null;for(var i=l.getCoordinates(),f=h.getCoordinates(),s=0;s<i.length-1;s++)for(var g=0;g<f.length-1;g++){var o=oe.distanceLineLine(i[s],i[s+1],f[g],f[g+1]);if(o<this.minDistance){this.minDistance=o;var d=new ae(i[s],i[s+1]),p=new ae(f[g],f[g+1]),m=d.closestPoints(p);c[0]=new fr(l,s,m[0]),c[1]=new fr(h,g,m[1])}if(this.minDistance<=this.terminateDistance)return null}}},computeMinDistancePoints:function(t,e,n){for(var i=0;i<t.size();i++)for(var r=t.get(i),s=0;s<e.size();s++){var o=e.get(s),a=r.getCoordinate().distance(o.getCoordinate());if(a<this.minDistance&&(this.minDistance=a,n[0]=new fr(r,0,r.getCoordinate()),n[1]=new fr(o,0,o.getCoordinate())),this.minDistance<=this.terminateDistance)return null}},distance:function(){if(null===this.geom[0]||null===this.geom[1])throw new n("null geometries are not supported");return this.geom[0].isEmpty()||this.geom[1].isEmpty()?0:(this.computeMinDistance(),this.minDistance)},computeMinDistanceLines:function(t,e,n){for(var i=0;i<t.size();i++)for(var r=t.get(i),s=0;s<e.size();s++){var o=e.get(s);if(this.computeMinDistance(r,o,n),this.minDistance<=this.terminateDistance)return null}},interfaces_:function(){return[]},getClass:function(){return pr}}),pr.distance=function(t,e){return new pr(t,e).distance()},pr.isWithinDistance=function(t,e,n){return new pr(t,e,n).distance()<=n},pr.nearestPoints=function(t,e){return new pr(t,e).nearestPoints()};var Mo=Object.freeze({DistanceOp:pr});io(mr.prototype,{getCoordinates:function(){if(null===this.coordinates){for(var t=0,e=0,n=new E,i=this.directedEdges.iterator();i.hasNext();){var r=i.next();r.getEdgeDirection()?t++:e++,n.add(r.getEdge().getLine().getCoordinates(),!1,r.getEdgeDirection())}this.coordinates=n.toCoordinateArray(),e>t&&Y.reverse(this.coordinates)}return this.coordinates},toLineString:function(){return this.factory.createLineString(this.getCoordinates())},add:function(t){this.directedEdges.add(t)},interfaces_:function(){return[]},getClass:function(){return mr}}),io(vr.prototype,{setVisited:function(t){this._isVisited=t},isMarked:function(){return this._isMarked},setData:function(t){this.data=t},getData:function(){return this.data},setMarked:function(t){this._isMarked=t},getContext:function(){return this.data},isVisited:function(){
return this._isVisited},setContext:function(t){this.data=t},interfaces_:function(){return[]},getClass:function(){return vr}}),vr.getComponentWithVisitedState=function(t,e){for(;t.hasNext();){var n=t.next();if(n.isVisited()===e)return n}return null},vr.setVisited=function(t,e){for(;t.hasNext();){t.next().setVisited(e)}},vr.setMarked=function(t,e){for(;t.hasNext();){t.next().setMarked(e)}},ro(yr,vr),io(yr.prototype,{isRemoved:function(){return null===this.parentEdge},compareDirection:function(t){return this.quadrant>t.quadrant?1:this.quadrant<t.quadrant?-1:oe.computeOrientation(t.p0,t.p1,this.p1)},getCoordinate:function(){return this.from.getCoordinate()},print:function(t){var e=this.getClass().getName(),n=e.lastIndexOf("."),i=e.substring(n+1);t.print("  "+i+": "+this.p0+" - "+this.p1+" "+this.quadrant+":"+this.angle)},getDirectionPt:function(){return this.p1},getAngle:function(){return this.angle},compareTo:function(t){var e=t;return this.compareDirection(e)},getFromNode:function(){return this.from},getSym:function(){return this.sym},setEdge:function(t){this.parentEdge=t},remove:function(){this.sym=null,this.parentEdge=null},getEdge:function(){return this.parentEdge},getQuadrant:function(){return this.quadrant},setSym:function(t){this.sym=t},getToNode:function(){return this.to},getEdgeDirection:function(){return this.edgeDirection},interfaces_:function(){return[r]},getClass:function(){return yr}}),yr.toEdges=function(t){for(var e=new x,n=t.iterator();n.hasNext();)e.add(n.next().parentEdge);return e},ro(xr,yr),io(xr.prototype,{getNext:function(){return 2!==this.getToNode().getDegree()?null:this.getToNode().getOutEdges().getEdges().get(0)===this.getSym()?this.getToNode().getOutEdges().getEdges().get(1):(h.isTrue(this.getToNode().getOutEdges().getEdges().get(1)===this.getSym()),this.getToNode().getOutEdges().getEdges().get(0))},interfaces_:function(){return[]},getClass:function(){return xr}}),ro(Er,vr),io(Er.prototype,{isRemoved:function(){return null===this.dirEdge},setDirectedEdges:function(t,e){this.dirEdge=[t,e],t.setEdge(this),e.setEdge(this),t.setSym(e),e.setSym(t),t.getFromNode().addOutEdge(t),e.getFromNode().addOutEdge(e)},getDirEdge:function(){if(Number.isInteger(arguments[0])){var t=arguments[0];return this.dirEdge[t]}if(arguments[0]instanceof Nr){var e=arguments[0];return this.dirEdge[0].getFromNode()===e?this.dirEdge[0]:this.dirEdge[1].getFromNode()===e?this.dirEdge[1]:null}},remove:function(){this.dirEdge=null},getOppositeNode:function(t){return this.dirEdge[0].getFromNode()===t?this.dirEdge[0].getToNode():this.dirEdge[1].getFromNode()===t?this.dirEdge[1].getToNode():null},interfaces_:function(){return[]},getClass:function(){return Er}}),io(Ir.prototype,{getNextEdge:function(t){var e=this.getIndex(t);return this.outEdges.get(this.getIndex(e+1))},getCoordinate:function(){var t=this.iterator();return t.hasNext()?t.next().getCoordinate():null},iterator:function(){return this.sortEdges(),this.outEdges.iterator()},sortEdges:function(){this.sorted||(xo.sort(this.outEdges),this.sorted=!0)},remove:function(t){this.outEdges.remove(t)},getEdges:function(){return this.sortEdges(),this.outEdges},getNextCWEdge:function(t){var e=this.getIndex(t);return this.outEdges.get(this.getIndex(e-1))},getIndex:function(){if(arguments[0]instanceof Er){var t=arguments[0];this.sortEdges();for(var e=0;e<this.outEdges.size();e++){var n=this.outEdges.get(e);if(n.getEdge()===t)return e}return-1}if(arguments[0]instanceof yr){var i=arguments[0];this.sortEdges();for(var e=0;e<this.outEdges.size();e++){var n=this.outEdges.get(e);if(n===i)return e}return-1}if(Number.isInteger(arguments[0])){var r=arguments[0],s=r%this.outEdges.size();return s<0&&(s+=this.outEdges.size()),s}},add:function(t){this.outEdges.add(t),this.sorted=!1},getDegree:function(){return this.outEdges.size()},interfaces_:function(){return[]},getClass:function(){return Ir}}),ro(Nr,vr),io(Nr.prototype,{isRemoved:function(){return null===this.pt},addOutEdge:function(t){this.deStar.add(t)},getCoordinate:function(){return this.pt},getOutEdges:function(){return this.deStar},remove:function(){if(0===arguments.length)this.pt=null;else if(1===arguments.length){var t=arguments[0];this.deStar.remove(t)}},getIndex:function(t){return this.deStar.getIndex(t)},getDegree:function(){return this.deStar.getDegree()},interfaces_:function(){return[]},getClass:function(){return Nr}}),Nr.getEdgesBetween=function(t,e){var n=yr.toEdges(t.getOutEdges().getEdges()),i=new K(n),r=yr.toEdges(e.getOutEdges().getEdges());return i.retainAll(r),i},ro(Cr,Er),io(Cr.prototype,{getLine:function(){return this.line},interfaces_:function(){return[]},getClass:function(){return Cr}}),io(Sr.prototype,{find:function(t){return this.nodeMap.get(t)},iterator:function(){return this.nodeMap.values().iterator()},remove:function(t){return this.nodeMap.remove(t)},values:function(){return this.nodeMap.values()},add:function(t){return this.nodeMap.put(t.getCoordinate(),t),t},interfaces_:function(){return[]},getClass:function(){return Sr}}),io(Lr.prototype,{findNodesOfDegree:function(t){for(var e=new x,n=this.nodeIterator();n.hasNext();){var i=n.next();i.getDegree()===t&&e.add(i)}return e},dirEdgeIterator:function(){return this.dirEdges.iterator()},edgeIterator:function(){return this.edges.iterator()},remove:function(){if(arguments[0]instanceof Er){var t=arguments[0];this.remove(t.getDirEdge(0)),this.remove(t.getDirEdge(1)),this.edges.remove(t),t.remove()}else if(arguments[0]instanceof yr){var e=arguments[0],n=e.getSym();null!==n&&n.setSym(null),e.getFromNode().remove(e),e.remove(),this.dirEdges.remove(e)}else if(arguments[0]instanceof Nr){for(var i=arguments[0],r=i.getOutEdges().getEdges(),s=r.iterator();s.hasNext();){var o=s.next(),n=o.getSym();null!==n&&this.remove(n),this.dirEdges.remove(o);var a=o.getEdge();null!==a&&this.edges.remove(a)}this.nodeMap.remove(i.getCoordinate()),i.remove()}},findNode:function(t){return this.nodeMap.find(t)},getEdges:function(){return this.edges},nodeIterator:function(){return this.nodeMap.iterator()},contains:function(){if(arguments[0]instanceof Er){var t=arguments[0];return this.edges.contains(t)}if(arguments[0]instanceof yr){var e=arguments[0];return this.dirEdges.contains(e)}},add:function(){if(arguments[0]instanceof Nr){var t=arguments[0];this.nodeMap.add(t)}else if(arguments[0]instanceof Er){var e=arguments[0];this.edges.add(e),this.add(e.getDirEdge(0)),this.add(e.getDirEdge(1))}else if(arguments[0]instanceof yr){var n=arguments[0];this.dirEdges.add(n)}},getNodes:function(){return this.nodeMap.values()},interfaces_:function(){return[]},getClass:function(){return Lr}}),ro(wr,Lr),io(wr.prototype,{addEdge:function(t){if(t.isEmpty())return null;var e=Y.removeRepeatedPoints(t.getCoordinates());if(e.length<=1)return null;var n=e[0],i=e[e.length-1],r=this.getNode(n),s=this.getNode(i),o=new xr(r,s,e[1],!0),a=new xr(s,r,e[e.length-2],!1),u=new Cr(t);u.setDirectedEdges(o,a),this.add(u)},getNode:function(t){var e=this.findNode(t);return null===e&&(e=new Nr(t),this.add(e)),e},interfaces_:function(){return[]},getClass:function(){return wr}}),io(Rr.prototype,{buildEdgeStringsForUnprocessedNodes:function(){for(var t=this.graph.getNodes().iterator();t.hasNext();){var e=t.next();e.isMarked()||(h.isTrue(2===e.getDegree()),this.buildEdgeStringsStartingAt(e),e.setMarked(!0))}},buildEdgeStringsForNonDegree2Nodes:function(){for(var t=this.graph.getNodes().iterator();t.hasNext();){var e=t.next();2!==e.getDegree()&&(this.buildEdgeStringsStartingAt(e),e.setMarked(!0))}},buildEdgeStringsForObviousStartNodes:function(){this.buildEdgeStringsForNonDegree2Nodes()},getMergedLineStrings:function(){return this.merge(),this.mergedLineStrings},buildEdgeStringsStartingAt:function(t){for(var e=t.getOutEdges().iterator();e.hasNext();){var n=e.next();n.getEdge().isMarked()||this.edgeStrings.add(this.buildEdgeStringStartingWith(n))}},merge:function(){if(null!==this.mergedLineStrings)return null;vr.setMarked(this.graph.nodeIterator(),!1),vr.setMarked(this.graph.edgeIterator(),!1),this.edgeStrings=new x,this.buildEdgeStringsForObviousStartNodes(),this.buildEdgeStringsForIsolatedLoops(),this.mergedLineStrings=new x;for(var t=this.edgeStrings.iterator();t.hasNext();){var e=t.next();this.mergedLineStrings.add(e.toLineString())}},buildEdgeStringStartingWith:function(t){var e=new mr(this.factory),n=t;do{e.add(n),n.getEdge().setMarked(!0),n=n.getNext()}while(null!==n&&n!==t);return e},add:function(){if(arguments[0]instanceof F){arguments[0].apply({interfaces_:function(){return[A]},filter:function(t){t instanceof It&&this.add(t)}})}else if(oo(arguments[0],d)){var t=arguments[0];this.mergedLineStrings=null;for(var e=t.iterator();e.hasNext();){var n=e.next();this.add(n)}}else if(arguments[0]instanceof It){var i=arguments[0];null===this.factory&&(this.factory=i.getFactory()),this.graph.addEdge(i)}},buildEdgeStringsForIsolatedLoops:function(){this.buildEdgeStringsForUnprocessedNodes()},interfaces_:function(){return[]},getClass:function(){return Rr}});var Do=Object.freeze({LineMerger:Rr}),Ao=Object.freeze({OverlayOp:$n});ro(Tr,yr),io(Tr.prototype,{getNext:function(){return this.next},isInRing:function(){return null!==this.edgeRing},setRing:function(t){this.edgeRing=t},setLabel:function(t){this.label=t},getLabel:function(){return this.label},setNext:function(t){this.next=t},getRing:function(){return this.edgeRing},interfaces_:function(){return[]},getClass:function(){return Tr}}),ro(Or,Er),io(Or.prototype,{getLine:function(){return this.line},interfaces_:function(){return[]},getClass:function(){return Or}}),io(Pr.prototype,{visitInteriorRing:function(t,e){var n=t.getCoordinates(),i=n[0],r=Pr.findDifferentPoint(n,i),s=e.findEdgeInSameDirection(i,r),o=e.findEdgeEnd(s),a=null;o.getLabel().getLocation(0,an.RIGHT)===S.INTERIOR?a=o:o.getSym().getLabel().getLocation(0,an.RIGHT)===S.INTERIOR&&(a=o.getSym()),h.isTrue(null!==a,"unable to find dirEdge with Interior on RHS"),this.visitLinkedDirectedEdges(a)},visitShellInteriors:function(t,e){if(t instanceof Lt){var n=t;this.visitInteriorRing(n.getExteriorRing(),e)}if(t instanceof Tt)for(var i=t,r=0;r<i.getNumGeometries();r++){var n=i.getGeometryN(r);this.visitInteriorRing(n.getExteriorRing(),e)}},getCoordinate:function(){return this.disconnectedRingcoord},setInteriorEdgesInResult:function(t){for(var e=t.getEdgeEnds().iterator();e.hasNext();){var n=e.next();n.getLabel().getLocation(0,an.RIGHT)===S.INTERIOR&&n.setInResult(!0)}},visitLinkedDirectedEdges:function(t){var e=t,n=t;do{h.isTrue(null!==n,"found null Directed Edge"),n.setVisited(!0),n=n.getNext()}while(n!==e)},buildEdgeRings:function(t){for(var e=new x,n=t.iterator();n.hasNext();){var i=n.next();if(i.isInResult()&&null===i.getEdgeRing()){var r=new fn(i,this.geometryFactory);r.linkDirectedEdgesForMinimalEdgeRings();var s=r.buildMinimalRings();e.addAll(s)}}return e},hasUnvisitedShellEdge:function(t){for(var e=0;e<t.size();e++){var n=t.get(e);if(!n.isHole()){var i=n.getEdges(),r=i.get(0);if(r.getLabel().getLocation(0,an.RIGHT)===S.INTERIOR)for(var s=0;s<i.size();s++)if(r=i.get(s),!r.isVisited())return this.disconnectedRingcoord=r.getCoordinate(),!0}}return!1},isInteriorsConnected:function(){var t=new x;this.geomGraph.computeSplitEdges(t);var e=new xn(new Rn);e.addEdges(t),this.setInteriorEdgesInResult(e),e.linkResultDirectedEdges();var n=this.buildEdgeRings(e.getEdgeEnds());return this.visitShellInteriors(this.geomGraph.getGeometry(),e),!this.hasUnvisitedShellEdge(n)},interfaces_:function(){return[]},getClass:function(){return Pr}}),Pr.findDifferentPoint=function(t,e){for(var n=0;n<t.length;n++)if(!t[n].equals(e))return t[n];return null},io(br.prototype,{createEdgeEndForNext:function(t,e,n,i){var r=n.segmentIndex+1;if(r>=t.getNumPoints()&&null===i)return null;var s=t.getCoordinate(r);null!==i&&i.segmentIndex===n.segmentIndex&&(s=i.coord);var o=new mn(t,n.coord,s,new ln(t.getLabel()));e.add(o)},createEdgeEndForPrev:function(t,e,n,i){var r=n.segmentIndex;if(0===n.dist){if(0===r)return null;r--}var s=t.getCoordinate(r);null!==i&&i.segmentIndex>=r&&(s=i.coord);var o=new ln(t.getLabel());o.flip();var a=new mn(t,n.coord,s,o);e.add(a)},computeEdgeEnds:function(){if(1===arguments.length){for(var t=arguments[0],e=new x,n=t;n.hasNext();){var i=n.next();this.computeEdgeEnds(i,e)}return e}if(2===arguments.length){var r=arguments[0],s=arguments[1],o=r.getEdgeIntersectionList();o.addEndpoints();var a=o.iterator(),u=null,l=null;if(!a.hasNext())return null;var h=a.next();do{u=l,l=h,h=null,a.hasNext()&&(h=a.next()),null!==l&&(this.createEdgeEndForPrev(r,s,l,u),this.createEdgeEndForNext(r,s,l,h))}while(null!==l)}},interfaces_:function(){return[]},getClass:function(){return br}}),ro(_r,mn),io(_r.prototype,{insert:function(t){this.edgeEnds.add(t)},print:function(t){t.println("EdgeEndBundle--\x3e Label: "+this.label);for(var e=this.iterator();e.hasNext();){e.next().print(t),t.println()}},iterator:function(){return this.edgeEnds.iterator()},getEdgeEnds:function(){return this.edgeEnds},computeLabelOn:function(t,e){for(var n=0,i=!1,r=this.iterator();r.hasNext();){var s=r.next(),o=s.getLabel().getLocation(t);o===S.BOUNDARY&&n++,o===S.INTERIOR&&(i=!0)}var o=S.NONE;i&&(o=S.INTERIOR),n>0&&(o=Kn.determineBoundary(e,n)),this.label.setLocation(t,o)},computeLabelSide:function(t,e){for(var n=this.iterator();n.hasNext();){var i=n.next();if(i.getLabel().isArea()){var r=i.getLabel().getLocation(t,e);if(r===S.INTERIOR)return this.label.setLocation(t,e,S.INTERIOR),null;r===S.EXTERIOR&&this.label.setLocation(t,e,S.EXTERIOR)}}},getLabel:function(){return this.label},computeLabelSides:function(t){this.computeLabelSide(t,an.LEFT),this.computeLabelSide(t,an.RIGHT)},updateIM:function(t){jn.updateIM(this.label,t)},computeLabel:function(t){for(var e=!1,n=this.iterator();n.hasNext();){n.next().getLabel().isArea()&&(e=!0)}this.label=e?new ln(S.NONE,S.NONE,S.NONE):new ln(S.NONE);for(var i=0;i<2;i++)this.computeLabelOn(i,t),e&&this.computeLabelSides(i)},interfaces_:function(){return[]},getClass:function(){return _r}}),ro(Mr,Ln),io(Mr.prototype,{updateIM:function(t){for(var e=this.iterator();e.hasNext();){e.next().updateIM(t)}},insert:function(t){var e=this.edgeMap.get(t);null===e?(e=new _r(t),this.insertEdgeEnd(t,e)):e.insert(t)},interfaces_:function(){return[]},getClass:function(){return Mr}}),ro(Dr,dn),io(Dr.prototype,{updateIMFromEdges:function(t){this.edges.updateIM(t)},computeIM:function(t){t.setAtLeastIfValid(this.label.getLocation(0),this.label.getLocation(1),0)},interfaces_:function(){return[]},getClass:function(){return Dr}}),ro(Ar,yn),io(Ar.prototype,{createNode:function(t){return new Dr(t,new Mr)},interfaces_:function(){return[]},getClass:function(){return Ar}}),io(Fr.prototype,{insertEdgeEnds:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.nodes.add(n)}},getNodeIterator:function(){return this.nodes.iterator()},copyNodesAndLabels:function(t,e){for(var n=t.getNodeIterator();n.hasNext();){var i=n.next();this.nodes.addNode(i.getCoordinate()).setLabel(e,i.getLabel().getLocation(e))}},build:function(t){this.computeIntersectionNodes(t,0),this.copyNodesAndLabels(t,0);var e=new br,n=e.computeEdgeEnds(t.getEdgeIterator());this.insertEdgeEnds(n)},computeIntersectionNodes:function(t,e){for(var n=t.getEdgeIterator();n.hasNext();)for(var i=n.next(),r=i.getLabel().getLocation(e),s=i.getEdgeIntersectionList().iterator();s.hasNext();){var o=s.next(),a=this.nodes.addNode(o.coord);r===S.BOUNDARY?a.setLabelBoundary(e):a.getLabel().isNull(e)&&a.setLabel(e,S.INTERIOR)}},interfaces_:function(){return[]},getClass:function(){return Fr}}),io(Gr.prototype,{isNodeEdgeAreaLabelsConsistent:function(){for(var t=this.nodeGraph.getNodeIterator();t.hasNext();){var e=t.next();if(!e.getEdges().isAreaLabelsConsistent(this.geomGraph))return this.invalidPoint=e.getCoordinate().copy(),!1}return!0},getInvalidPoint:function(){return this.invalidPoint},hasDuplicateRings:function(){for(var t=this.nodeGraph.getNodeIterator();t.hasNext();)for(var e=t.next(),n=e.getEdges().iterator();n.hasNext();){var i=n.next();if(i.getEdgeEnds().size()>1)return this.invalidPoint=i.getEdge().getCoordinate(0),!0}return!1},isNodeConsistentArea:function(){var t=this.geomGraph.computeSelfNodes(this.li,!0,!0);return t.hasProperIntersection()?(this.invalidPoint=t.getProperIntersectionPoint(),!1):(this.nodeGraph.build(this.geomGraph),this.isNodeEdgeAreaLabelsConsistent())},interfaces_:function(){return[]},getClass:function(){return Gr}}),io(qr.prototype,{buildIndex:function(){this.index=new qe;for(var t=0;t<this.rings.size();t++){var e=this.rings.get(t),n=e.getEnvelopeInternal();this.index.insert(n,e)}},getNestedPoint:function(){return this.nestedPt},isNonNested:function(){this.buildIndex();for(var t=0;t<this.rings.size();t++)for(var e=this.rings.get(t),n=e.getCoordinates(),i=this.index.query(e.getEnvelopeInternal()),r=0;r<i.size();r++){var s=i.get(r),o=s.getCoordinates();if(e!==s&&e.getEnvelopeInternal().intersects(s.getEnvelopeInternal())){var a=Vr.findPtNotNode(n,s,this.graph);if(null!==a){var u=oe.isPointInRing(a,o);if(u)return this.nestedPt=a,!1}}}return!0},add:function(t){this.rings.add(t),this.totalEnv.expandToInclude(t.getEnvelopeInternal())},interfaces_:function(){return[]},getClass:function(){return qr}}),io(Br.prototype,{getErrorType:function(){return this.errorType},getMessage:function(){return Br.errMsg[this.errorType]},getCoordinate:function(){return this.pt},toString:function(){var t="";return null!==this.pt&&(t=" at or near point "+this.pt),this.getMessage()+t},interfaces_:function(){return[]},getClass:function(){return Br}}),Br.ERROR=0,Br.REPEATED_POINT=1,Br.HOLE_OUTSIDE_SHELL=2,Br.NESTED_HOLES=3,Br.DISCONNECTED_INTERIOR=4,Br.SELF_INTERSECTION=5,Br.RING_SELF_INTERSECTION=6,Br.NESTED_SHELLS=7,Br.DUPLICATE_RINGS=8,Br.TOO_FEW_POINTS=9,Br.INVALID_COORDINATE=10,Br.RING_NOT_CLOSED=11,Br.errMsg=["Topology Validation Error","Repeated Point","Hole lies outside shell","Holes are nested","Interior is disconnected","Self-intersection","Ring Self-intersection","Nested shells","Duplicate Rings","Too few distinct points in geometry component","Invalid Coordinate","Ring is not closed"],io(Vr.prototype,{checkInvalidCoordinates:function(){if(arguments[0]instanceof Array){for(var t=arguments[0],e=0;e<t.length;e++)if(!Vr.isValid(t[e]))return this.validErr=new Br(Br.INVALID_COORDINATE,t[e]),null}else if(arguments[0]instanceof Lt){var n=arguments[0];if(this.checkInvalidCoordinates(n.getExteriorRing().getCoordinates()),null!==this.validErr)return null;for(var e=0;e<n.getNumInteriorRing();e++)if(this.checkInvalidCoordinates(n.getInteriorRingN(e).getCoordinates()),null!==this.validErr)return null}},checkHolesNotNested:function(t,e){for(var n=new qr(e),i=0;i<t.getNumInteriorRing();i++){var r=t.getInteriorRingN(i);n.add(r)}n.isNonNested()||(this.validErr=new Br(Br.NESTED_HOLES,n.getNestedPoint()))},checkConsistentArea:function(t){var e=new Gr(t);if(!e.isNodeConsistentArea())return this.validErr=new Br(Br.SELF_INTERSECTION,e.getInvalidPoint()),null;e.hasDuplicateRings()&&(this.validErr=new Br(Br.DUPLICATE_RINGS,e.getInvalidPoint()))},isValid:function(){return this.checkValid(this.parentGeometry),null===this.validErr},checkShellInsideHole:function(t,e,n){var i=t.getCoordinates(),r=e.getCoordinates(),s=Vr.findPtNotNode(i,e,n);if(null!==s){if(!oe.isPointInRing(s,r))return s}var o=Vr.findPtNotNode(r,t,n);if(null!==o){return oe.isPointInRing(o,i)?o:null}return h.shouldNeverReachHere("points in shell and hole appear to be equal"),null},checkNoSelfIntersectingRings:function(t){for(var e=t.getEdgeIterator();e.hasNext();){var n=e.next();if(this.checkNoSelfIntersectingRing(n.getEdgeIntersectionList()),null!==this.validErr)return null}},checkConnectedInteriors:function(t){var e=new Pr(t);e.isInteriorsConnected()||(this.validErr=new Br(Br.DISCONNECTED_INTERIOR,e.getCoordinate()))},checkNoSelfIntersectingRing:function(t){for(var e=new rt,n=!0,i=t.iterator();i.hasNext();){var r=i.next();if(n)n=!1;else{if(e.contains(r.coord))return this.validErr=new Br(Br.RING_SELF_INTERSECTION,r.coord),null;e.add(r.coord)}}},checkHolesInShell:function(t,e){for(var n=t.getExteriorRing(),i=new vi(n),r=0;r<t.getNumInteriorRing();r++){var s=t.getInteriorRingN(r),o=Vr.findPtNotNode(s.getCoordinates(),n,e);if(null===o)return null;if(!i.isInside(o))return this.validErr=new Br(Br.HOLE_OUTSIDE_SHELL,o),null}},checkTooFewPoints:function(t){if(t.hasTooFewPoints())return this.validErr=new Br(Br.TOO_FEW_POINTS,t.getInvalidPoint()),null},getValidationError:function(){return this.checkValid(this.parentGeometry),this.validErr},checkValid:function(){if(arguments[0]instanceof Ct){var t=arguments[0];this.checkInvalidCoordinates(t.getCoordinates())}else if(arguments[0]instanceof wt){var e=arguments[0];this.checkInvalidCoordinates(e.getCoordinates())}else if(arguments[0]instanceof Rt){var n=arguments[0];if(this.checkInvalidCoordinates(n.getCoordinates()),null!==this.validErr)return null;if(this.checkClosedRing(n),null!==this.validErr)return null;var i=new Kn(0,n);if(this.checkTooFewPoints(i),null!==this.validErr)return null;var r=new ie;i.computeSelfNodes(r,!0,!0),this.checkNoSelfIntersectingRings(i)}else if(arguments[0]instanceof It){var s=arguments[0];if(this.checkInvalidCoordinates(s.getCoordinates()),null!==this.validErr)return null;var i=new Kn(0,s);this.checkTooFewPoints(i)}else if(arguments[0]instanceof Lt){var o=arguments[0];if(this.checkInvalidCoordinates(o),null!==this.validErr)return null;if(this.checkClosedRings(o),null!==this.validErr)return null;var i=new Kn(0,o);if(this.checkTooFewPoints(i),null!==this.validErr)return null;if(this.checkConsistentArea(i),null!==this.validErr)return null;if(!this.isSelfTouchingRingFormingHoleValid&&(this.checkNoSelfIntersectingRings(i),null!==this.validErr))return null;if(this.checkHolesInShell(o,i),null!==this.validErr)return null;if(this.checkHolesNotNested(o,i),null!==this.validErr)return null;this.checkConnectedInteriors(i)}else if(arguments[0]instanceof Tt){for(var a=arguments[0],u=0;u<a.getNumGeometries();u++){var l=a.getGeometryN(u);if(this.checkInvalidCoordinates(l),null!==this.validErr)return null;if(this.checkClosedRings(l),null!==this.validErr)return null}var i=new Kn(0,a);if(this.checkTooFewPoints(i),null!==this.validErr)return null;if(this.checkConsistentArea(i),null!==this.validErr)return null;if(!this.isSelfTouchingRingFormingHoleValid&&(this.checkNoSelfIntersectingRings(i),null!==this.validErr))return null;for(var u=0;u<a.getNumGeometries();u++){var l=a.getGeometryN(u);if(this.checkHolesInShell(l,i),null!==this.validErr)return null}for(var u=0;u<a.getNumGeometries();u++){var l=a.getGeometryN(u);if(this.checkHolesNotNested(l,i),null!==this.validErr)return null}if(this.checkShellsNotNested(a,i),null!==this.validErr)return null;this.checkConnectedInteriors(i)}else if(arguments[0]instanceof lt)for(var h=arguments[0],u=0;u<h.getNumGeometries();u++){var c=h.getGeometryN(u);if(this.checkValid(c),null!==this.validErr)return null}else if(arguments[0]instanceof F){var f=arguments[0];if(this.validErr=null,f.isEmpty())return null;if(f instanceof Ct)this.checkValid(f);else if(f instanceof wt)this.checkValid(f);else if(f instanceof Rt)this.checkValid(f);else if(f instanceof It)this.checkValid(f);else if(f instanceof Lt)this.checkValid(f);else if(f instanceof Tt)this.checkValid(f);else{if(!(f instanceof lt))throw new UnsupportedOperationException(f.getClass().getName());this.checkValid(f)}}},setSelfTouchingRingFormingHoleValid:function(t){this.isSelfTouchingRingFormingHoleValid=t},checkShellNotNested:function(t,e,n){var i=t.getCoordinates(),r=e.getExteriorRing(),s=r.getCoordinates(),o=Vr.findPtNotNode(i,r,n);if(null===o)return null;if(!oe.isPointInRing(o,s))return null;if(e.getNumInteriorRing()<=0)return this.validErr=new Br(Br.NESTED_SHELLS,o),null;for(var a=null,u=0;u<e.getNumInteriorRing();u++){var l=e.getInteriorRingN(u);if(null===(a=this.checkShellInsideHole(t,l,n)))return null}this.validErr=new Br(Br.NESTED_SHELLS,a)},checkClosedRings:function(t){if(this.checkClosedRing(t.getExteriorRing()),null!==this.validErr)return null;for(var e=0;e<t.getNumInteriorRing();e++)if(this.checkClosedRing(t.getInteriorRingN(e)),null!==this.validErr)return null},checkClosedRing:function(t){if(!t.isClosed()){var e=null;t.getNumPoints()>=1&&(e=t.getCoordinateN(0)),this.validErr=new Br(Br.RING_NOT_CLOSED,e)}},checkShellsNotNested:function(t,e){for(var n=0;n<t.getNumGeometries();n++)for(var i=t.getGeometryN(n),r=i.getExteriorRing(),s=0;s<t.getNumGeometries();s++)if(n!==s){var o=t.getGeometryN(s);if(this.checkShellNotNested(r,o,e),null!==this.validErr)return null}},interfaces_:function(){return[]},getClass:function(){return Vr}}),Vr.findPtNotNode=function(t,e,n){for(var i=n.findEdge(e),r=i.getEdgeIntersectionList(),s=0;s<t.length;s++){var o=t[s];if(!r.isIntersection(o))return o}return null},Vr.isValid=function(){if(arguments[0]instanceof F){return new Vr(arguments[0]).isValid()}if(arguments[0]instanceof c){var t=arguments[0];return!i.isNaN(t.x)&&(!i.isInfinite(t.x)&&(!i.isNaN(t.y)&&!i.isInfinite(t.y)))}},io(zr.prototype,{isIncluded:function(){return this._isIncluded},getCoordinates:function(){if(null===this.ringPts){for(var t=new E,e=this.deList.iterator();e.hasNext();){var n=e.next(),i=n.getEdge();zr.addEdge(i.getLine().getCoordinates(),n.getEdgeDirection(),t)}this.ringPts=t.toCoordinateArray()}return this.ringPts},isIncludedSet:function(){return this._isIncludedSet},isValid:function(){return this.getCoordinates(),!(this.ringPts.length<=3)&&(this.getRing(),Vr.isValid(this.ring))},build:function(t){var e=t;do{this.add(e),e.setRing(this),e=e.getNext(),h.isTrue(null!==e,"found null DE in ring"),h.isTrue(e===t||!e.isInRing(),"found DE already in ring")}while(e!==t)},isOuterHole:function(){return!!this._isHole&&!this.hasShell()},getPolygon:function(){var t=null;if(null!==this.holes){t=new Array(this.holes.size()).fill(null);for(var e=0;e<this.holes.size();e++)t[e]=this.holes.get(e)}return this.factory.createPolygon(this.ring,t)},isHole:function(){return this._isHole},isProcessed:function(){return this._isProcessed},addHole:function(){if(arguments[0]instanceof Rt){var t=arguments[0];null===this.holes&&(this.holes=new x),this.holes.add(t)}else if(arguments[0]instanceof zr){var e=arguments[0];e.setShell(this);var n=e.getRing();null===this.holes&&(this.holes=new x),this.holes.add(n)}},setIncluded:function(t){this._isIncluded=t,this._isIncludedSet=!0},getOuterHole:function(){if(this.isHole())return null;for(var t=0;t<this.deList.size();t++){var e=this.deList.get(t),n=e.getSym().getRing();if(n.isOuterHole())return n}return null},computeHole:function(){var t=this.getRing();this._isHole=oe.isCCW(t.getCoordinates())},hasShell:function(){return null!==this.shell},isOuterShell:function(){return null!==this.getOuterHole()},getLineString:function(){return this.getCoordinates(),this.factory.createLineString(this.ringPts)},toString:function(){return ee.toLineString(new Dt(this.getCoordinates()))},getShell:function(){return this.isHole()?this.shell:this},add:function(t){this.deList.add(t)},getRing:function(){if(null!==this.ring)return this.ring;this.getCoordinates(),this.ringPts.length<3&&_.out.println(this.ringPts);try{this.ring=this.factory.createLinearRing(this.ringPts)}catch(t){if(!(t instanceof N))throw t;_.out.println(this.ringPts)}return this.ring},updateIncluded:function(){if(this.isHole())return null;for(var t=0;t<this.deList.size();t++){var e=this.deList.get(t),n=e.getSym().getRing().getShell();if(null!==n&&n.isIncludedSet())return this.setIncluded(!n.isIncluded()),null}},setShell:function(t){this.shell=t},setProcessed:function(t){this._isProcessed=t},interfaces_:function(){return[]},getClass:function(){return zr}}),zr.findDirEdgesInRing=function(t){var e=t,n=new x;do{n.add(e),e=e.getNext(),h.isTrue(null!==e,"found null DE in ring"),h.isTrue(e===t||!e.isInRing(),"found DE already in ring")}while(e!==t);return n},zr.addEdge=function(t,e,n){if(e)for(var i=0;i<t.length;i++)n.add(t[i],!1);else for(var i=t.length-1;i>=0;i--)n.add(t[i],!1)},zr.findEdgeRingContaining=function(t,e){for(var n=t.getRing(),i=n.getEnvelopeInternal(),r=n.getCoordinateN(0),s=null,o=null,a=e.iterator();a.hasNext();){var u=a.next(),l=u.getRing(),h=l.getEnvelopeInternal();if(!h.equals(i)&&h.contains(i)){r=Y.ptNotInList(n.getCoordinates(),l.getCoordinates());var c=!1;oe.isPointInRing(r,l.getCoordinates())&&(c=!0),c&&(null===s||o.contains(h))&&(s=u,o=s.getRing().getEnvelopeInternal())}}return s},io(kr.prototype,{compare:function(t,e){var n=t,i=e;return n.getRing().getEnvelope().compareTo(i.getRing().getEnvelope())},interfaces_:function(){return[o]},getClass:function(){return kr}}),zr.EnvelopeComparator=kr,ro(Yr,Lr),io(Yr.prototype,{findEdgeRing:function(t){var e=new zr(this.factory);return e.build(t),e},computeDepthParity:function(){if(0===arguments.length)for(;;){return null}else if(1===arguments.length){arguments[0]}},computeNextCWEdges:function(){for(var t=this.nodeIterator();t.hasNext();){var e=t.next();Yr.computeNextCWEdges(e)}},addEdge:function(t){if(t.isEmpty())return null;var e=Y.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return null;var n=e[0],i=e[e.length-1],r=this.getNode(n),s=this.getNode(i),o=new Tr(r,s,e[1],!0),a=new Tr(s,r,e[e.length-2],!1),u=new Or(t);u.setDirectedEdges(o,a),this.add(u)},deleteCutEdges:function(){this.computeNextCWEdges(),Yr.findLabeledEdgeRings(this.dirEdges);for(var t=new x,e=this.dirEdges.iterator();e.hasNext();){var n=e.next();if(!n.isMarked()){var i=n.getSym();if(n.getLabel()===i.getLabel()){n.setMarked(!0),i.setMarked(!0);var r=n.getEdge();t.add(r.getLine())}}}return t},getEdgeRings:function(){this.computeNextCWEdges(),Yr.label(this.dirEdges,-1);var t=Yr.findLabeledEdgeRings(this.dirEdges);this.convertMaximalToMinimalEdgeRings(t);for(var e=new x,n=this.dirEdges.iterator();n.hasNext();){var i=n.next();if(!i.isMarked()&&!i.isInRing()){var r=this.findEdgeRing(i);e.add(r)}}return e},getNode:function(t){var e=this.findNode(t);return null===e&&(e=new Nr(t),this.add(e)),e},convertMaximalToMinimalEdgeRings:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),i=n.getLabel(),r=Yr.findIntersectionNodes(n,i);if(null!==r)for(var s=r.iterator();s.hasNext();){var o=s.next();Yr.computeNextCCWEdges(o,i)}}},deleteDangles:function(){for(var t=this.findNodesOfDegree(1),e=new K,n=new ce,i=t.iterator();i.hasNext();)n.push(i.next());for(;!n.isEmpty();){var r=n.pop();Yr.deleteAllEdges(r);for(var s=r.getOutEdges().getEdges(),i=s.iterator();i.hasNext();){var o=i.next();o.setMarked(!0);var a=o.getSym();null!==a&&a.setMarked(!0);var u=o.getEdge();e.add(u.getLine());var l=o.getToNode();1===Yr.getDegreeNonDeleted(l)&&n.push(l)}}return e},interfaces_:function(){return[]},getClass:function(){return Yr}}),Yr.findLabeledEdgeRings=function(t){for(var e=new x,n=1,i=t.iterator();i.hasNext();){var r=i.next();if(!r.isMarked()&&!(r.getLabel()>=0)){e.add(r);var s=zr.findDirEdgesInRing(r);Yr.label(s,n),n++}}return e},Yr.getDegreeNonDeleted=function(t){for(var e=t.getOutEdges().getEdges(),n=0,i=e.iterator();i.hasNext();){i.next().isMarked()||n++}return n},Yr.deleteAllEdges=function(t){for(var e=t.getOutEdges().getEdges(),n=e.iterator();n.hasNext();){var i=n.next();i.setMarked(!0);var r=i.getSym();null!==r&&r.setMarked(!0)}},Yr.label=function(t,e){for(var n=t.iterator();n.hasNext();){n.next().setLabel(e)}},Yr.computeNextCWEdges=function(t){for(var e=t.getOutEdges(),n=null,i=null,r=e.getEdges().iterator();r.hasNext();){var s=r.next();if(!s.isMarked()){if(null===n&&(n=s),null!==i){var o=i.getSym();o.setNext(s)}i=s}}if(null!==i){var o=i.getSym();o.setNext(n)}},Yr.computeNextCCWEdges=function(t,e){for(var n=t.getOutEdges(),i=null,r=null,s=n.getEdges(),o=s.size()-1;o>=0;o--){var a=s.get(o),u=a.getSym(),l=null;a.getLabel()===e&&(l=a);var c=null;u.getLabel()===e&&(c=u),null===l&&null===c||(null!==c&&(r=c),null!==l&&(null!==r&&(r.setNext(l),r=null),null===i&&(i=l)))}null!==r&&(h.isTrue(null!==i),r.setNext(i))},Yr.getDegree=function(t,e){
for(var n=t.getOutEdges().getEdges(),i=0,r=n.iterator();r.hasNext();){r.next().getLabel()===e&&i++}return i},Yr.findIntersectionNodes=function(t,e){var n=t,i=null;do{var r=n.getFromNode();Yr.getDegree(r,e)>1&&(null===i&&(i=new x),i.add(r)),n=n.getNext(),h.isTrue(null!==n,"found null DE in ring"),h.isTrue(n===t||!n.isInRing(),"found DE already in ring")}while(n!==t);return i},io(Ur.prototype,{getGeometry:function(){return null===this.geomFactory&&(this.geomFactory=new $t),this.polygonize(),this.extractOnlyPolygonal?this.geomFactory.buildGeometry(this.polyList):this.geomFactory.createGeometryCollection($t.toGeometryArray(this.polyList))},getInvalidRingLines:function(){return this.polygonize(),this.invalidRingLines},findValidRings:function(t,e,n){for(var i=t.iterator();i.hasNext();){var r=i.next();r.isValid()?e.add(r):n.add(r.getLineString())}},polygonize:function(){if(null!==this.polyList)return null;if(this.polyList=new x,null===this.graph)return null;this.dangles=this.graph.deleteDangles(),this.cutEdges=this.graph.deleteCutEdges();var t=this.graph.getEdgeRings(),e=new x;this.invalidRingLines=new x,this.isCheckingRingsValid?this.findValidRings(t,e,this.invalidRingLines):e=t,this.findShellsAndHoles(e),Ur.assignHolesToShells(this.holeList,this.shellList),xo.sort(this.shellList,new zr.EnvelopeComparator);var n=!0;this.extractOnlyPolygonal&&(Ur.findDisjointShells(this.shellList),n=!1),this.polyList=Ur.extractPolygons(this.shellList,n)},getDangles:function(){return this.polygonize(),this.dangles},getCutEdges:function(){return this.polygonize(),this.cutEdges},getPolygons:function(){return this.polygonize(),this.polyList},add:function(){if(oo(arguments[0],d))for(var t=arguments[0],e=t.iterator();e.hasNext();){var n=e.next();this.add(n)}else if(arguments[0]instanceof It){var i=arguments[0];this.geomFactory=i.getFactory(),null===this.graph&&(this.graph=new Yr(this.geomFactory)),this.graph.addEdge(i)}else if(arguments[0]instanceof F){var r=arguments[0];r.apply(this.lineStringAdder)}},setCheckRingsValid:function(t){this.isCheckingRingsValid=t},findShellsAndHoles:function(t){this.holeList=new x,this.shellList=new x;for(var e=t.iterator();e.hasNext();){var n=e.next();n.computeHole(),n.isHole()?this.holeList.add(n):this.shellList.add(n)}},interfaces_:function(){return[]},getClass:function(){return Ur}}),Ur.findOuterShells=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),i=n.getOuterHole();null===i||i.isProcessed()||(n.setIncluded(!0),i.setProcessed(!0))}},Ur.extractPolygons=function(t,e){for(var n=new x,i=t.iterator();i.hasNext();){var r=i.next();(e||r.isIncluded())&&n.add(r.getPolygon())}return n},Ur.assignHolesToShells=function(t,e){for(var n=t.iterator();n.hasNext();){var i=n.next();Ur.assignHoleToShell(i,e)}},Ur.assignHoleToShell=function(t,e){var n=zr.findEdgeRingContaining(t,e);null!==n&&n.addHole(t)},Ur.findDisjointShells=function(t){Ur.findOuterShells(t);var e=null;do{e=!1;for(var n=t.iterator();n.hasNext();){var i=n.next();i.isIncludedSet()||(i.updateIncluded(),i.isIncludedSet()||(e=!0))}}while(e)},io(Xr.prototype,{filter:function(t){t instanceof It&&this.p.add(t)},interfaces_:function(){return[A]},getClass:function(){return Xr}}),Ur.LineStringAdder=Xr;var Fo=Object.freeze({Polygonizer:Ur});io(Hr.prototype,{insertEdgeEnds:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.nodes.add(n)}},computeProperIntersectionIM:function(t,e){var n=this.arg[0].getGeometry().getDimension(),i=this.arg[1].getGeometry().getDimension(),r=t.hasProperIntersection(),s=t.hasProperInteriorIntersection();2===n&&2===i?r&&e.setAtLeast("212101212"):2===n&&1===i?(r&&e.setAtLeast("FFF0FFFF2"),s&&e.setAtLeast("1FFFFF1FF")):1===n&&2===i?(r&&e.setAtLeast("F0FFFFFF2"),s&&e.setAtLeast("1F1FFFFFF")):1===n&&1===i&&s&&e.setAtLeast("0FFFFFFFF")},labelIsolatedEdges:function(t,e){for(var n=this.arg[t].getEdgeIterator();n.hasNext();){var i=n.next();i.isIsolated()&&(this.labelIsolatedEdge(i,e,this.arg[e].getGeometry()),this.isolatedEdges.add(i))}},labelIsolatedEdge:function(t,e,n){if(n.getDimension()>0){var i=this.ptLocator.locate(t.getCoordinate(),n);t.getLabel().setAllLocations(e,i)}else t.getLabel().setAllLocations(e,S.EXTERIOR)},computeIM:function(){var t=new ue;if(t.set(S.EXTERIOR,S.EXTERIOR,2),!this.arg[0].getGeometry().getEnvelopeInternal().intersects(this.arg[1].getGeometry().getEnvelopeInternal()))return this.computeDisjointIM(t),t;this.arg[0].computeSelfNodes(this.li,!1),this.arg[1].computeSelfNodes(this.li,!1);var e=this.arg[0].computeEdgeIntersections(this.arg[1],this.li,!1);this.computeIntersectionNodes(0),this.computeIntersectionNodes(1),this.copyNodesAndLabels(0),this.copyNodesAndLabels(1),this.labelIsolatedNodes(),this.computeProperIntersectionIM(e,t);var n=new br,i=n.computeEdgeEnds(this.arg[0].getEdgeIterator());this.insertEdgeEnds(i);var r=n.computeEdgeEnds(this.arg[1].getEdgeIterator());return this.insertEdgeEnds(r),this.labelNodeEdges(),this.labelIsolatedEdges(0,1),this.labelIsolatedEdges(1,0),this.updateIM(t),t},labelNodeEdges:function(){for(var t=this.nodes.iterator();t.hasNext();){t.next().getEdges().computeLabelling(this.arg)}},copyNodesAndLabels:function(t){for(var e=this.arg[t].getNodeIterator();e.hasNext();){var n=e.next();this.nodes.addNode(n.getCoordinate()).setLabel(t,n.getLabel().getLocation(t))}},labelIntersectionNodes:function(t){for(var e=this.arg[t].getEdgeIterator();e.hasNext();)for(var n=e.next(),i=n.getLabel().getLocation(t),r=n.getEdgeIntersectionList().iterator();r.hasNext();){var s=r.next(),o=this.nodes.find(s.coord);o.getLabel().isNull(t)&&(i===S.BOUNDARY?o.setLabelBoundary(t):o.setLabel(t,S.INTERIOR))}},labelIsolatedNode:function(t,e){var n=this.ptLocator.locate(t.getCoordinate(),this.arg[e].getGeometry());t.getLabel().setAllLocations(e,n)},computeIntersectionNodes:function(t){for(var e=this.arg[t].getEdgeIterator();e.hasNext();)for(var n=e.next(),i=n.getLabel().getLocation(t),r=n.getEdgeIntersectionList().iterator();r.hasNext();){var s=r.next(),o=this.nodes.addNode(s.coord);i===S.BOUNDARY?o.setLabelBoundary(t):o.getLabel().isNull(t)&&o.setLabel(t,S.INTERIOR)}},labelIsolatedNodes:function(){for(var t=this.nodes.iterator();t.hasNext();){var e=t.next(),n=e.getLabel();h.isTrue(n.getGeometryCount()>0,"node with empty label found"),e.isIsolated()&&(n.isNull(0)?this.labelIsolatedNode(e,0):this.labelIsolatedNode(e,1))}},updateIM:function(t){for(var e=this.isolatedEdges.iterator();e.hasNext();){e.next().updateIM(t)}for(var n=this.nodes.iterator();n.hasNext();){var i=n.next();i.updateIM(t),i.updateIMFromEdges(t)}},computeDisjointIM:function(t){var e=this.arg[0].getGeometry();e.isEmpty()||(t.set(S.INTERIOR,S.EXTERIOR,e.getDimension()),t.set(S.BOUNDARY,S.EXTERIOR,e.getBoundaryDimension()));var n=this.arg[1].getGeometry();n.isEmpty()||(t.set(S.EXTERIOR,S.INTERIOR,n.getDimension()),t.set(S.EXTERIOR,S.BOUNDARY,n.getBoundaryDimension()))},interfaces_:function(){return[]},getClass:function(){return Hr}}),io(Wr.prototype,{isContainedInBoundary:function(t){if(t instanceof Lt)return!1;if(t instanceof Ct)return this.isPointContainedInBoundary(t);if(t instanceof It)return this.isLineStringContainedInBoundary(t);for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);if(!this.isContainedInBoundary(n))return!1}return!0},isLineSegmentContainedInBoundary:function(t,e){if(t.equals(e))return this.isPointContainedInBoundary(t);if(t.x===e.x){if(t.x===this.rectEnv.getMinX()||t.x===this.rectEnv.getMaxX())return!0}else if(t.y===e.y&&(t.y===this.rectEnv.getMinY()||t.y===this.rectEnv.getMaxY()))return!0;return!1},isLineStringContainedInBoundary:function(t){for(var e=t.getCoordinateSequence(),n=new c,i=new c,r=0;r<e.size()-1;r++)if(e.getCoordinate(r,n),e.getCoordinate(r+1,i),!this.isLineSegmentContainedInBoundary(n,i))return!1;return!0},isPointContainedInBoundary:function(){if(arguments[0]instanceof Ct){var t=arguments[0];return this.isPointContainedInBoundary(t.getCoordinate())}if(arguments[0]instanceof c){var e=arguments[0];return e.x===this.rectEnv.getMinX()||e.x===this.rectEnv.getMaxX()||e.y===this.rectEnv.getMinY()||e.y===this.rectEnv.getMaxY()}},contains:function(t){return!!this.rectEnv.contains(t.getEnvelopeInternal())&&!this.isContainedInBoundary(t)},interfaces_:function(){return[]},getClass:function(){return Wr}}),Wr.contains=function(t,e){return new Wr(t).contains(e)},io(jr.prototype,{intersects:function(t,e){var n=new I(t,e);if(!this.rectEnv.intersects(n))return!1;if(this.rectEnv.intersects(t))return!0;if(this.rectEnv.intersects(e))return!0;if(t.compareTo(e)>0){var i=t;t=e,e=i}var r=!1;return e.y>t.y&&(r=!0),r?this.li.computeIntersection(t,e,this.diagDown0,this.diagDown1):this.li.computeIntersection(t,e,this.diagUp0,this.diagUp1),!!this.li.hasIntersection()},interfaces_:function(){return[]},getClass:function(){return jr}}),io(Kr.prototype,{applyTo:function(t){for(var e=0;e<t.getNumGeometries()&&!this._isDone;e++){var n=t.getGeometryN(e);if(n instanceof lt)this.applyTo(n);else if(this.visit(n),this.isDone())return this._isDone=!0,null}},interfaces_:function(){return[]},getClass:function(){return Kr}}),io(Zr.prototype,{intersects:function(t){if(!this.rectEnv.intersects(t.getEnvelopeInternal()))return!1;var e=new Qr(this.rectEnv);if(e.applyTo(t),e.intersects())return!0;var n=new Jr(this.rectangle);if(n.applyTo(t),n.containsPoint())return!0;var i=new $r(this.rectangle);return i.applyTo(t),!!i.intersects()},interfaces_:function(){return[]},getClass:function(){return Zr}}),Zr.intersects=function(t,e){return new Zr(t).intersects(e)},ro(Qr,Kr),io(Qr.prototype,{isDone:function(){return!0===this._intersects},visit:function(t){var e=t.getEnvelopeInternal();return this.rectEnv.intersects(e)?this.rectEnv.contains(e)?(this._intersects=!0,null):e.getMinX()>=this.rectEnv.getMinX()&&e.getMaxX()<=this.rectEnv.getMaxX()?(this._intersects=!0,null):e.getMinY()>=this.rectEnv.getMinY()&&e.getMaxY()<=this.rectEnv.getMaxY()?(this._intersects=!0,null):void 0:null},intersects:function(){return this._intersects},interfaces_:function(){return[]},getClass:function(){return Qr}}),ro(Jr,Kr),io(Jr.prototype,{isDone:function(){return!0===this._containsPoint},visit:function(t){if(!(t instanceof Lt))return null;var e=t.getEnvelopeInternal();if(!this.rectEnv.intersects(e))return null;for(var n=new c,i=0;i<4;i++)if(this.rectSeq.getCoordinate(i,n),e.contains(n)&&Sn.containsPointInPolygon(n,t))return this._containsPoint=!0,null},containsPoint:function(){return this._containsPoint},interfaces_:function(){return[]},getClass:function(){return Jr}}),ro($r,Kr),io($r.prototype,{intersects:function(){return this.hasIntersection},isDone:function(){return!0===this.hasIntersection},visit:function(t){var e=t.getEnvelopeInternal();if(!this.rectEnv.intersects(e))return null;var n=qn.getLines(t);this.checkIntersectionWithLineStrings(n)},checkIntersectionWithLineStrings:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();if(this.checkIntersectionWithSegments(n),this.hasIntersection)return null}},checkIntersectionWithSegments:function(t){for(var e=t.getCoordinateSequence(),n=1;n<e.size();n++)if(e.getCoordinate(n-1,this.p0),e.getCoordinate(n,this.p1),this.rectIntersector.intersects(this.p0,this.p1))return this.hasIntersection=!0,null},interfaces_:function(){return[]},getClass:function(){return $r}}),ro(ts,Zn),io(ts.prototype,{getIntersectionMatrix:function(){return this._relate.computeIM()},interfaces_:function(){return[]},getClass:function(){return ts}}),ts.covers=function(t,e){return!!t.getEnvelopeInternal().covers(e.getEnvelopeInternal())&&(!!t.isRectangle()||ts.relate(t,e).isCovers())},ts.intersects=function(t,e){return!!t.getEnvelopeInternal().intersects(e.getEnvelopeInternal())&&(t.isRectangle()?Zr.intersects(t,e):e.isRectangle()?Zr.intersects(e,t):ts.relate(t,e).isIntersects())},ts.touches=function(t,e){return!!t.getEnvelopeInternal().intersects(e.getEnvelopeInternal())&&ts.relate(t,e).isTouches(t.getDimension(),e.getDimension())},ts.within=function(t,e){return e.contains(t)},ts.coveredBy=function(t,e){return ts.covers(e,t)},ts.relate=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new ts(t,e),i=n.getIntersectionMatrix();return i}if(3===arguments.length){if("string"==typeof arguments[2]&&arguments[0]instanceof F&&arguments[1]instanceof F){var r=arguments[0],s=arguments[1],o=arguments[2];return ts.relateWithCheck(r,s).matches(o)}if(oo(arguments[2],q)&&arguments[0]instanceof F&&arguments[1]instanceof F){var a=arguments[0],u=arguments[1],l=arguments[2],n=new ts(a,u,l),i=n.getIntersectionMatrix();return i}}},ts.overlaps=function(t,e){return!!t.getEnvelopeInternal().intersects(e.getEnvelopeInternal())&&ts.relate(t,e).isOverlaps(t.getDimension(),e.getDimension())},ts.disjoint=function(t,e){return!t.intersects(e)},ts.relateWithCheck=function(t,e){return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),ts.relate(t,e)},ts.crosses=function(t,e){return!!t.getEnvelopeInternal().intersects(e.getEnvelopeInternal())&&ts.relate(t,e).isCrosses(t.getDimension(),e.getDimension())},ts.contains=function(t,e){return!!t.getEnvelopeInternal().contains(e.getEnvelopeInternal())&&(t.isRectangle()?Wr.contains(t,e):ts.relate(t,e).isContains())};var Go=Object.freeze({RelateOp:ts});io(es.prototype,{extractElements:function(t,e){if(null===t)return null;for(var n=0;n<t.getNumGeometries();n++){var i=t.getGeometryN(n);this.skipEmpty&&i.isEmpty()||e.add(i)}},combine:function(){for(var t=new x,e=this.inputGeoms.iterator();e.hasNext();){var n=e.next();this.extractElements(n,t)}return 0===t.size()?null!==this.geomFactory?this.geomFactory.createGeometryCollection(null):null:this.geomFactory.buildGeometry(t)},interfaces_:function(){return[]},getClass:function(){return es}}),es.combine=function(){if(1===arguments.length){var t=arguments[0],e=new es(t);return e.combine()}if(2===arguments.length){var n=arguments[0],i=arguments[1],e=new es(es.createList(n,i));return e.combine()}if(3===arguments.length){var r=arguments[0],s=arguments[1],o=arguments[2],e=new es(es.createList(r,s,o));return e.combine()}},es.extractFactory=function(t){return t.isEmpty()?null:t.iterator().next().getFactory()},es.createList=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new x;return n.add(t),n.add(e),n}if(3===arguments.length){var i=arguments[0],r=arguments[1],s=arguments[2],n=new x;return n.add(i),n.add(r),n.add(s),n}},io(ns.prototype,{union:function(){for(var t=new Se,e=new rt,n=0;n<this.pointGeom.getNumGeometries();n++){var i=this.pointGeom.getGeometryN(n),r=i.getCoordinate();t.locate(r,this.otherGeom)===S.EXTERIOR&&e.add(r)}if(0===e.size())return this.otherGeom;var s=null,o=Y.toCoordinateArray(e);return s=1===o.length?this.geomFact.createPoint(o[0]):this.geomFact.createMultiPointFromCoords(o),es.combine(s,this.otherGeom)},interfaces_:function(){return[]},getClass:function(){return ns}}),ns.union=function(t,e){return new ns(t,e).union()},io(is.prototype,{filter:function(t){-1!==this.sortIndex&&t.getSortIndex()!==this.sortIndex||this.comps.add(t)},interfaces_:function(){return[at]},getClass:function(){return is}}),is.extract=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return is.extract(t,e,new x)}if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];return n.getSortIndex()===i?r.add(n):n instanceof lt&&n.apply(new is(i,r)),r}},io(rs.prototype,{reduceToGeometries:function(t){for(var e=new x,n=t.iterator();n.hasNext();){var i=n.next(),r=null;oo(i,m)?r=this.unionTree(i):i instanceof F&&(r=i),e.add(r)}return e},extractByEnvelope:function(t,e,n){for(var i=new x,r=0;r<e.getNumGeometries();r++){var s=e.getGeometryN(r);s.getEnvelopeInternal().intersects(t)?i.add(s):n.add(s)}return this.geomFactory.buildGeometry(i)},unionOptimized:function(t,e){var n=t.getEnvelopeInternal(),i=e.getEnvelopeInternal();if(!n.intersects(i)){return es.combine(t,e)}if(t.getNumGeometries()<=1&&e.getNumGeometries()<=1)return this.unionActual(t,e);var r=n.intersection(i);return this.unionUsingEnvelopeIntersection(t,e,r)},union:function(){if(null===this.inputPolys)throw new IllegalStateException("union() method cannot be called twice");if(this.inputPolys.isEmpty())return null;this.geomFactory=this.inputPolys.iterator().next().getFactory();for(var t=new qe(rs.STRTREE_NODE_CAPACITY),e=this.inputPolys.iterator();e.hasNext();){var n=e.next();t.insert(n.getEnvelopeInternal(),n)}this.inputPolys=null;var i=t.itemsTree();return this.unionTree(i)},binaryUnion:function(){if(1===arguments.length){var t=arguments[0];return this.binaryUnion(t,0,t.size())}if(3===arguments.length){var e=arguments[0],n=arguments[1],i=arguments[2];if(i-n<=1){var r=rs.getGeometry(e,n);return this.unionSafe(r,null)}if(i-n==2)return this.unionSafe(rs.getGeometry(e,n),rs.getGeometry(e,n+1));var s=Math.trunc((i+n)/2),r=this.binaryUnion(e,n,s),o=this.binaryUnion(e,s,i);return this.unionSafe(r,o)}},repeatedUnion:function(t){for(var e=null,n=t.iterator();n.hasNext();){var i=n.next();e=null===e?i.copy():e.union(i)}return e},unionSafe:function(t,e){return null===t&&null===e?null:null===t?e.copy():null===e?t.copy():this.unionOptimized(t,e)},unionActual:function(t,e){return rs.restrictToPolygons(t.union(e))},unionTree:function(t){var e=this.reduceToGeometries(t);return this.binaryUnion(e)},unionUsingEnvelopeIntersection:function(t,e,n){var i=new x,r=this.extractByEnvelope(n,t,i),s=this.extractByEnvelope(n,e,i),o=this.unionActual(r,s);return i.add(o),es.combine(i)},bufferUnion:function(){if(1===arguments.length){var t=arguments[0],e=t.get(0).getFactory(),n=e.buildGeometry(t),i=n.buffer(0);return i}if(2===arguments.length){var r=arguments[0],s=arguments[1],e=r.getFactory(),n=e.createGeometryCollection([r,s]),i=n.buffer(0);return i}},interfaces_:function(){return[]},getClass:function(){return rs}}),rs.restrictToPolygons=function(t){if(oo(t,St))return t;var e=cr.getPolygons(t);return 1===e.size()?e.get(0):t.getFactory().createMultiPolygon($t.toPolygonArray(e))},rs.getGeometry=function(t,e){return e>=t.size()?null:t.get(e)},rs.union=function(t){return new rs(t).union()},rs.STRTREE_NODE_CAPACITY=4,io(ss.prototype,{unionNoOpt:function(t){var e=this.geomFact.createPoint();return ei.overlayOp(t,e,$n.UNION)},unionWithNull:function(t,e){return null===t&&null===e?null:null===e?t:null===t?e:t.union(e)},extract:function(){if(oo(arguments[0],d))for(var t=arguments[0],e=t.iterator();e.hasNext();){var n=e.next();this.extract(n)}else if(arguments[0]instanceof F){var i=arguments[0];null===this.geomFact&&(this.geomFact=i.getFactory()),is.extract(i,F.SORTINDEX_POLYGON,this.polygons),is.extract(i,F.SORTINDEX_LINESTRING,this.lines),is.extract(i,F.SORTINDEX_POINT,this.points)}},union:function(){if(null===this.geomFact)return null;var t=null;if(this.points.size()>0){var e=this.geomFact.buildGeometry(this.points);t=this.unionNoOpt(e)}var n=null;if(this.lines.size()>0){var i=this.geomFact.buildGeometry(this.lines);n=this.unionNoOpt(i)}var r=null;this.polygons.size()>0&&(r=rs.union(this.polygons));var s=this.unionWithNull(n,r),o=null;return o=null===t?s:null===s?t:ns.union(t,s),null===o?this.geomFact.createGeometryCollection():o},interfaces_:function(){return[]},getClass:function(){return ss}}),ss.union=function(){if(1===arguments.length){if(oo(arguments[0],d)){var t=arguments[0],e=new ss(t);return e.union()}if(arguments[0]instanceof F){var n=arguments[0],e=new ss(n);return e.union()}}else if(2===arguments.length){var i=arguments[0],r=arguments[1],e=new ss(i,r);return e.union()}};var qo=Object.freeze({UnaryUnionOp:ss}),Bo=Object.freeze({IsValidOp:Vr,ConsistentAreaTester:Gr}),Vo=Object.freeze({BoundaryOp:ct,IsSimpleOp:Yi,buffer:_o,distance:Mo,linemerge:Do,overlay:Ao,polygonize:Fo,relate:Go,union:qo,valid:Bo});ro(os,Ot.CoordinateOperation),io(os.prototype,{editCoordinates:function(t,e){if(0===t.length)return null;for(var n=new Array(t.length).fill(null),i=0;i<t.length;i++){var r=new c(t[i]);this.targetPM.makePrecise(r),n[i]=r}var s=new E(n,!1),o=s.toCoordinateArray(),a=0;e instanceof It&&(a=2),e instanceof Rt&&(a=4);var u=n;return this.removeCollapsed&&(u=null),o.length<a?u:o},interfaces_:function(){return[]},getClass:function(){return os}}),io(as.prototype,{fixPolygonalTopology:function(t){var e=t;this.changePrecisionModel||(e=this.changePM(t,this.targetPM));var n=e.buffer(0),i=n;return this.changePrecisionModel||(i=this.changePM(n,t.getPrecisionModel())),i},reducePointwise:function(t){var e=null;if(this.changePrecisionModel){e=new Ot(this.createFactory(t.getFactory(),this.targetPM))}else e=new Ot;var n=this.removeCollapsed;return t.getDimension()>=2&&(n=!0),e.edit(t,new os(this.targetPM,n))},changePM:function(t,e){return this.createEditor(t.getFactory(),e).edit(t,new Ot.NoOpGeometryOperation)},setRemoveCollapsedComponents:function(t){this.removeCollapsed=t},createFactory:function(t,e){return new $t(e,t.getSRID(),t.getCoordinateSequenceFactory())},setChangePrecisionModel:function(t){this.changePrecisionModel=t},reduce:function(t){var e=this.reducePointwise(t);return this.isPointwise?e:oo(e,St)?e.isValid()?e:this.fixPolygonalTopology(e):e},setPointwise:function(t){this.isPointwise=t},createEditor:function(t,e){return t.getPrecisionModel()===e?new Ot:new Ot(this.createFactory(t,e))},interfaces_:function(){return[]},getClass:function(){return as}}),as.reduce=function(t,e){return new as(e).reduce(t)},as.reducePointwise=function(t,e){var n=new as(e);return n.setPointwise(!0),n.reduce(t)};var zo=Object.freeze({GeometryPrecisionReducer:as});io(us.prototype,{simplifySection:function(t,e){if(t+1===e)return null;this.seg.p0=this.pts[t],this.seg.p1=this.pts[e];for(var n=-1,i=t,r=t+1;r<e;r++){var s=this.seg.distance(this.pts[r]);s>n&&(n=s,i=r)}if(n<=this.distanceTolerance)for(var r=t+1;r<e;r++)this.usePt[r]=!1;else this.simplifySection(t,i),this.simplifySection(i,e)},setDistanceTolerance:function(t){this.distanceTolerance=t},simplify:function(){this.usePt=new Array(this.pts.length).fill(null);for(var t=0;t<this.pts.length;t++)this.usePt[t]=!0;this.simplifySection(0,this.pts.length-1);for(var e=new E,t=0;t<this.pts.length;t++)this.usePt[t]&&e.add(new c(this.pts[t]));return e.toCoordinateArray()},interfaces_:function(){return[]},getClass:function(){return us}}),us.simplify=function(t,e){var n=new us(t);return n.setDistanceTolerance(e),n.simplify()},io(ls.prototype,{setEnsureValid:function(t){this.isEnsureValidTopology=t},getResultGeometry:function(){return this.inputGeom.isEmpty()?this.inputGeom.copy():new hs(this.isEnsureValidTopology,this.distanceTolerance).transform(this.inputGeom)},setDistanceTolerance:function(t){if(t<0)throw new n("Tolerance must be non-negative");this.distanceTolerance=t},interfaces_:function(){return[]},getClass:function(){return ls}}),ls.simplify=function(t,e){var n=new ls(t);return n.setDistanceTolerance(e),n.getResultGeometry()},ro(hs,pe),io(hs.prototype,{transformPolygon:function(t,e){if(t.isEmpty())return null;var n=pe.prototype.transformPolygon.call(this,t,e);return e instanceof Tt?n:this.createValidArea(n)},createValidArea:function(t){return this.isEnsureValidTopology?t.buffer(0):t},transformCoordinates:function(t,e){var n=t.toCoordinateArray(),i=null;return i=0===n.length?new Array(0).fill(null):us.simplify(n,this.distanceTolerance),this.factory.getCoordinateSequenceFactory().create(i)},transformMultiPolygon:function(t,e){var n=pe.prototype.transformMultiPolygon.call(this,t,e);return this.createValidArea(n)},transformLinearRing:function(t,e){var n=e instanceof Lt,i=pe.prototype.transformLinearRing.call(this,t,e);return!n||i instanceof Rt?i:null},interfaces_:function(){return[]},getClass:function(){return hs}}),ls.DPTransformer=hs,ro(cs,ae),io(cs.prototype,{getIndex:function(){return this.index},getParent:function(){return this.parent},interfaces_:function(){return[]},getClass:function(){return cs}}),io(fs.prototype,{addToResult:function(t){this.resultSegs.add(t)},asLineString:function(){return this.parentLine.getFactory().createLineString(fs.extractCoordinates(this.resultSegs))},getResultSize:function(){var t=this.resultSegs.size();return 0===t?0:t+1},getParent:function(){return this.parentLine},getSegment:function(t){return this.segs[t]},getParentCoordinates:function(){return this.parentLine.getCoordinates()},getMinimumSize:function(){return this.minimumSize},asLinearRing:function(){return this.parentLine.getFactory().createLinearRing(fs.extractCoordinates(this.resultSegs))},getSegments:function(){return this.segs},init:function(){var t=this.parentLine.getCoordinates();this.segs=new Array(t.length-1).fill(null);for(var e=0;e<t.length-1;e++){var n=new cs(t[e],t[e+1],this.parentLine,e);this.segs[e]=n}},getResultCoordinates:function(){return fs.extractCoordinates(this.resultSegs)},interfaces_:function(){return[]},getClass:function(){return fs}}),fs.extractCoordinates=function(t){for(var e=new Array(t.size()+1).fill(null),n=null,i=0;i<t.size();i++)n=t.get(i),e[i]=n.p0;return e[e.length-1]=n.p1,e},io(gs.prototype,{remove:function(t){this.index.remove(new I(t.p0,t.p1),t)},add:function(){if(arguments[0]instanceof fs)for(var t=arguments[0],e=t.getSegments(),n=0;n<e.length;n++){var i=e[n];this.add(i)}else if(arguments[0]instanceof ae){var r=arguments[0];this.index.insert(new I(r.p0,r.p1),r)}},query:function(t){var e=new I(t.p0,t.p1),n=new ds(t);return this.index.query(e,n),n.getItems()},interfaces_:function(){return[]},getClass:function(){return gs}}),io(ds.prototype,{visitItem:function(t){var e=t;I.intersects(e.p0,e.p1,this.querySeg.p0,this.querySeg.p1)&&this.items.add(t)},getItems:function(){return this.items},interfaces_:function(){return[be]},getClass:function(){return ds}}),io(ps.prototype,{flatten:function(t,e){var n=this.linePts[t],i=this.linePts[e],r=new ae(n,i);return this.remove(this.line,t,e),this.outputIndex.add(r),r},hasBadIntersection:function(t,e,n){return!!this.hasBadOutputIntersection(n)||!!this.hasBadInputIntersection(t,e,n)},setDistanceTolerance:function(t){this.distanceTolerance=t},simplifySection:function(t,e,n){n+=1;var i=new Array(2).fill(null);if(t+1===e){var r=this.line.getSegment(t);return this.line.addToResult(r),null}var s=!0;if(this.line.getResultSize()<this.line.getMinimumSize()){n+1<this.line.getMinimumSize()&&(s=!1)}var o=new Array(1).fill(null),a=this.findFurthestPoint(this.linePts,t,e,o);o[0]>this.distanceTolerance&&(s=!1);var u=new ae;if(u.p0=this.linePts[t],u.p1=this.linePts[e],i[0]=t,i[1]=e,this.hasBadIntersection(this.line,i,u)&&(s=!1),s){var r=this.flatten(t,e);return this.line.addToResult(r),null}this.simplifySection(t,a,n),this.simplifySection(a,e,n)},hasBadOutputIntersection:function(t){for(var e=this.outputIndex.query(t),n=e.iterator();n.hasNext();){var i=n.next();if(this.hasInteriorIntersection(i,t))return!0}return!1},findFurthestPoint:function(t,e,n,i){var r=new ae;r.p0=t[e],r.p1=t[n];for(var s=-1,o=e,a=e+1;a<n;a++){var u=t[a],l=r.distance(u);l>s&&(s=l,o=a)}return i[0]=s,o},simplify:function(t){this.line=t,this.linePts=t.getParentCoordinates(),this.simplifySection(0,this.linePts.length-1,0)},remove:function(t,e,n){for(var i=e;i<n;i++){var r=t.getSegment(i);this.inputIndex.remove(r)}},hasInteriorIntersection:function(t,e){return this.li.computeIntersection(t.p0,t.p1,e.p0,e.p1),this.li.isInteriorIntersection()},hasBadInputIntersection:function(t,e,n){for(var i=this.inputIndex.query(n),r=i.iterator();r.hasNext();){var s=r.next();if(this.hasInteriorIntersection(s,n)){if(ps.isInLineSection(t,e,s))continue;return!0}}return!1},interfaces_:function(){return[]},getClass:function(){return ps}}),ps.isInLineSection=function(t,e,n){if(n.getParent()!==t.getParent())return!1;var i=n.getIndex();return i>=e[0]&&i<e[1]},io(ms.prototype,{setDistanceTolerance:function(t){this.distanceTolerance=t},simplify:function(t){for(var e=t.iterator();e.hasNext();)this.inputIndex.add(e.next());for(var e=t.iterator();e.hasNext();){var n=new ps(this.inputIndex,this.outputIndex);n.setDistanceTolerance(this.distanceTolerance),n.simplify(e.next())}},interfaces_:function(){return[]},getClass:function(){return ms}}),io(vs.prototype,{getResultGeometry:function(){return this.inputGeom.isEmpty()?this.inputGeom.copy():(this.linestringMap=new Zt,this.inputGeom.apply(new xs(this)),this.lineSimplifier.simplify(this.linestringMap.values()),new ys(this.linestringMap).transform(this.inputGeom))},setDistanceTolerance:function(t){if(t<0)throw new n("Tolerance must be non-negative");this.lineSimplifier.setDistanceTolerance(t)},interfaces_:function(){return[]},getClass:function(){return vs}}),vs.simplify=function(t,e){var n=new vs(t);return n.setDistanceTolerance(e),n.getResultGeometry()},ro(ys,pe),io(ys.prototype,{transformCoordinates:function(t,e){if(0===t.size())return null;if(e instanceof It){var n=this.linestringMap.get(e);return this.createCoordinateSequence(n.getResultCoordinates())}return pe.prototype.transformCoordinates.call(this,t,e)},interfaces_:function(){return[]},getClass:function(){return ys}}),io(xs.prototype,{filter:function(t){if(t instanceof It){var e=t;if(e.isEmpty())return null;var n=e.isClosed()?4:2,i=new fs(e,n);this.tps.linestringMap.put(e,i)}},interfaces_:function(){return[A]},getClass:function(){return xs}}),vs.LineStringTransformer=ys,vs.LineStringMapBuilderFilter=xs;var ko=Object.freeze({DouglasPeuckerSimplifier:ls,TopologyPreservingSimplifier:vs});io(Es.prototype,{splitAt:function(){if(1===arguments.length){var t=arguments[0],e=this.minimumLen/this.segLen;if(t.distance(this.seg.p0)<this.minimumLen)return this.splitPt=this.seg.pointAlong(e),null;if(t.distance(this.seg.p1)<this.minimumLen)return this.splitPt=Es.pointAlongReverse(this.seg,e),null;this.splitPt=t}else if(2===arguments.length){var n=arguments[0],i=arguments[1],r=this.getConstrainedLength(n),s=r/this.segLen;i.equals2D(this.seg.p0)?this.splitPt=this.seg.pointAlong(s):this.splitPt=Es.pointAlongReverse(this.seg,s)}},setMinimumLength:function(t){this.minimumLen=t},getConstrainedLength:function(t){return t<this.minimumLen?this.minimumLen:t},getSplitPoint:function(){return this.splitPt},interfaces_:function(){return[]},getClass:function(){return Es}}),Es.pointAlongReverse=function(t,e){var n=new c;return n.x=t.p1.x-e*(t.p1.x-t.p0.x),n.y=t.p1.y-e*(t.p1.y-t.p0.y),n},io(Is.prototype,{findSplitPoint:function(t,e){},interfaces_:function(){return[]},getClass:function(){return Is}}),io(Ns.prototype,{findSplitPoint:function(t,e){var n=t.getLineSegment(),i=n.getLength(),r=i/2,s=new Es(n),o=Ns.projectedSplitPoint(t,e),a=2*o.distance(e)*.8,u=a;return u>r&&(u=r),s.setMinimumLength(u),s.splitAt(o),s.getSplitPoint()},interfaces_:function(){return[Is]},getClass:function(){return Ns}}),Ns.projectedSplitPoint=function(t,e){return t.getLineSegment().project(e)},io(Cs.prototype,{interfaces_:function(){return[]},getClass:function(){return Cs}}),Cs.triArea=function(t,e,n){return(e.x-t.x)*(n.y-t.y)-(e.y-t.y)*(n.x-t.x)},Cs.isInCircleDDNormalized=function(t,e,n,i){var r=O.valueOf(t.x).selfSubtract(i.x),s=O.valueOf(t.y).selfSubtract(i.y),o=O.valueOf(e.x).selfSubtract(i.x),a=O.valueOf(e.y).selfSubtract(i.y),u=O.valueOf(n.x).selfSubtract(i.x),l=O.valueOf(n.y).selfSubtract(i.y),h=r.multiply(a).selfSubtract(o.multiply(s)),c=o.multiply(l).selfSubtract(u.multiply(a)),f=u.multiply(s).selfSubtract(r.multiply(l)),g=r.multiply(r).selfAdd(s.multiply(s)),d=o.multiply(o).selfAdd(a.multiply(a)),p=u.multiply(u).selfAdd(l.multiply(l));return g.selfMultiply(c).selfAdd(d.selfMultiply(f)).selfAdd(p.selfMultiply(h)).doubleValue()>0},Cs.checkRobustInCircle=function(t,e,n,i){var r=Cs.isInCircleNonRobust(t,e,n,i),s=Cs.isInCircleDDSlow(t,e,n,i),o=Cs.isInCircleCC(t,e,n,i),a=Ei.circumcentre(t,e,n);_.out.println("p radius diff a = "+Math.abs(i.distance(a)-t.distance(a))/t.distance(a)),r===s&&r===o||(_.out.println("inCircle robustness failure (double result = "+r+", DD result = "+s+", CC result = "+o+")"),_.out.println(ee.toLineString(new Dt([t,e,n,i]))),_.out.println("Circumcentre = "+ee.toPoint(a)+" radius = "+t.distance(a)),_.out.println("p radius diff a = "+Math.abs(i.distance(a)/t.distance(a)-1)),
_.out.println("p radius diff b = "+Math.abs(i.distance(a)/e.distance(a)-1)),_.out.println("p radius diff c = "+Math.abs(i.distance(a)/n.distance(a)-1)),_.out.println())},Cs.isInCircleDDFast=function(t,e,n,i){var r=O.sqr(t.x).selfAdd(O.sqr(t.y)).selfMultiply(Cs.triAreaDDFast(e,n,i)),s=O.sqr(e.x).selfAdd(O.sqr(e.y)).selfMultiply(Cs.triAreaDDFast(t,n,i)),o=O.sqr(n.x).selfAdd(O.sqr(n.y)).selfMultiply(Cs.triAreaDDFast(t,e,i)),a=O.sqr(i.x).selfAdd(O.sqr(i.y)).selfMultiply(Cs.triAreaDDFast(t,e,n));return r.selfSubtract(s).selfAdd(o).selfSubtract(a).doubleValue()>0},Cs.isInCircleCC=function(t,e,n,i){var r=Ei.circumcentre(t,e,n),s=t.distance(r);return i.distance(r)-s<=0},Cs.isInCircleNormalized=function(t,e,n,i){var r=t.x-i.x,s=t.y-i.y,o=e.x-i.x,a=e.y-i.y,u=n.x-i.x,l=n.y-i.y;return(r*r+s*s)*(o*l-u*a)+(o*o+a*a)*(u*s-r*l)+(u*u+l*l)*(r*a-o*s)>0},Cs.isInCircleDDSlow=function(t,e,n,i){var r=O.valueOf(i.x),s=O.valueOf(i.y),o=O.valueOf(t.x),a=O.valueOf(t.y),u=O.valueOf(e.x),l=O.valueOf(e.y),h=O.valueOf(n.x),c=O.valueOf(n.y),f=o.multiply(o).add(a.multiply(a)).multiply(Cs.triAreaDDSlow(u,l,h,c,r,s)),g=u.multiply(u).add(l.multiply(l)).multiply(Cs.triAreaDDSlow(o,a,h,c,r,s)),d=h.multiply(h).add(c.multiply(c)).multiply(Cs.triAreaDDSlow(o,a,u,l,r,s)),p=r.multiply(r).add(s.multiply(s)).multiply(Cs.triAreaDDSlow(o,a,u,l,h,c));return f.subtract(g).add(d).subtract(p).doubleValue()>0},Cs.isInCircleNonRobust=function(t,e,n,i){return(t.x*t.x+t.y*t.y)*Cs.triArea(e,n,i)-(e.x*e.x+e.y*e.y)*Cs.triArea(t,n,i)+(n.x*n.x+n.y*n.y)*Cs.triArea(t,e,i)-(i.x*i.x+i.y*i.y)*Cs.triArea(t,e,n)>0},Cs.isInCircleRobust=function(t,e,n,i){return Cs.isInCircleNormalized(t,e,n,i)},Cs.triAreaDDSlow=function(t,e,n,i,r,s){return n.subtract(t).multiply(s.subtract(e)).subtract(i.subtract(e).multiply(r.subtract(t)))},Cs.triAreaDDFast=function(t,e,n){var i=O.valueOf(e.x).selfSubtract(t.x).selfMultiply(O.valueOf(n.y).selfSubtract(t.y)),r=O.valueOf(e.y).selfSubtract(t.y).selfMultiply(O.valueOf(n.x).selfSubtract(t.x));return i.selfSubtract(r)},io(Ss.prototype,{circleCenter:function(t,e){var n=new Ss(this.getX(),this.getY()),i=this.bisector(n,t),r=this.bisector(t,e),s=new M(i,r),o=null;try{o=new Ss(s.getX(),s.getY())}catch(i){if(!(i instanceof C))throw i;_.err.println("a: "+n+"  b: "+t+"  c: "+e),_.err.println(i)}return o},dot:function(t){return this.p.x*t.getX()+this.p.y*t.getY()},magn:function(){return Math.sqrt(this.p.x*this.p.x+this.p.y*this.p.y)},getZ:function(){return this.p.z},bisector:function(t,e){var n=e.getX()-t.getX(),i=e.getY()-t.getY();return new M(new M(t.getX()+n/2,t.getY()+i/2,1),new M(t.getX()-i+n/2,t.getY()+n+i/2,1))},equals:function(){if(1===arguments.length){var t=arguments[0];return this.p.x===t.getX()&&this.p.y===t.getY()}if(2===arguments.length){var e=arguments[0],n=arguments[1];return this.p.distance(e.getCoordinate())<n}},getCoordinate:function(){return this.p},isInCircle:function(t,e,n){return Cs.isInCircleRobust(t.p,e.p,n.p,this.p)},interpolateZValue:function(t,e,n){var i=t.getX(),r=t.getY(),s=e.getX()-i,o=n.getX()-i,a=e.getY()-r,u=n.getY()-r,l=s*u-o*a,h=this.getX()-i,c=this.getY()-r,f=(u*h-o*c)/l,g=(-a*h+s*c)/l;return t.getZ()+f*(e.getZ()-t.getZ())+g*(n.getZ()-t.getZ())},midPoint:function(t){return new Ss((this.p.x+t.getX())/2,(this.p.y+t.getY())/2,(this.p.z+t.getZ())/2)},rightOf:function(t){return this.isCCW(t.dest(),t.orig())},isCCW:function(t,e){return(t.p.x-this.p.x)*(e.p.y-this.p.y)-(t.p.y-this.p.y)*(e.p.x-this.p.x)>0},getX:function(){return this.p.x},crossProduct:function(t){return this.p.x*t.getY()-this.p.y*t.getX()},setZ:function(t){this.p.z=t},times:function(t){return new Ss(t*this.p.x,t*this.p.y)},cross:function(){return new Ss(this.p.y,-this.p.x)},leftOf:function(t){return this.isCCW(t.orig(),t.dest())},toString:function(){return"POINT ("+this.p.x+" "+this.p.y+")"},sub:function(t){return new Ss(this.p.x-t.getX(),this.p.y-t.getY())},getY:function(){return this.p.y},classify:function(t,e){var n=this,i=e.sub(t),r=n.sub(t),s=i.crossProduct(r);return s>0?Ss.LEFT:s<0?Ss.RIGHT:i.getX()*r.getX()<0||i.getY()*r.getY()<0?Ss.BEHIND:i.magn()<r.magn()?Ss.BEYOND:t.equals(n)?Ss.ORIGIN:e.equals(n)?Ss.DESTINATION:Ss.BETWEEN},sum:function(t){return new Ss(this.p.x+t.getX(),this.p.y+t.getY())},distance:function(t,e){return Math.sqrt(Math.pow(e.getX()-t.getX(),2)+Math.pow(e.getY()-t.getY(),2))},circumRadiusRatio:function(t,e){var n=this.circleCenter(t,e),i=this.distance(n,t),r=this.distance(this,t),s=this.distance(t,e);return s<r&&(r=s),s=this.distance(e,this),s<r&&(r=s),i/r},interfaces_:function(){return[]},getClass:function(){return Ss}}),Ss.interpolateZ=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],i=e.distance(n),r=t.distance(e),s=n.z-e.z;return e.z+s*(r/i)}if(4===arguments.length){var o=arguments[0],a=arguments[1],u=arguments[2],l=arguments[3],h=a.x,c=a.y,f=u.x-h,g=l.x-h,d=u.y-c,p=l.y-c,m=f*p-g*d,v=o.x-h,y=o.y-c,x=(p*v-g*y)/m,E=(-d*v+f*y)/m;return a.z+x*(u.z-a.z)+E*(l.z-a.z)}},Ss.LEFT=0,Ss.RIGHT=1,Ss.BEYOND=2,Ss.BEHIND=3,Ss.BETWEEN=4,Ss.ORIGIN=5,Ss.DESTINATION=6,ro(Ls,Ss),io(Ls.prototype,{getConstraint:function(){return this.constraint},setOnConstraint:function(t){this._isOnConstraint=t},merge:function(t){t._isOnConstraint&&(this._isOnConstraint=!0,this.constraint=t.constraint)},isOnConstraint:function(){return this._isOnConstraint},setConstraint:function(t){this._isOnConstraint=!0,this.constraint=t},interfaces_:function(){return[]},getClass:function(){return Ls}}),io(ws.prototype,{equalsNonOriented:function(t){return!!this.equalsOriented(t)||!!this.equalsOriented(t.sym())},toLineSegment:function(){return new ae(this.vertex.getCoordinate(),this.dest().getCoordinate())},dest:function(){return this.sym().orig()},oNext:function(){return this.next},equalsOriented:function(t){return!(!this.orig().getCoordinate().equals2D(t.orig().getCoordinate())||!this.dest().getCoordinate().equals2D(t.dest().getCoordinate()))},dNext:function(){return this.sym().oNext().sym()},lPrev:function(){return this.next.sym()},rPrev:function(){return this.sym().oNext()},rot:function(){return this._rot},oPrev:function(){return this._rot.next._rot},sym:function(){return this._rot._rot},setOrig:function(t){this.vertex=t},lNext:function(){return this.invRot().oNext().rot()},getLength:function(){return this.orig().getCoordinate().distance(this.dest().getCoordinate())},invRot:function(){return this._rot.sym()},setDest:function(t){this.sym().setOrig(t)},setData:function(t){this.data=t},getData:function(){return this.data},delete:function(){this._rot=null},orig:function(){return this.vertex},rNext:function(){return this._rot.next.invRot()},toString:function(){var t=this.vertex.getCoordinate(),e=this.dest().getCoordinate();return ee.toLineString(t,e)},isLive:function(){return null!==this._rot},getPrimary:function(){return this.orig().getCoordinate().compareTo(this.dest().getCoordinate())<=0?this:this.sym()},dPrev:function(){return this.invRot().oNext().invRot()},setNext:function(t){this.next=t},interfaces_:function(){return[]},getClass:function(){return ws}}),ws.makeEdge=function(t,e){var n=new ws,i=new ws,r=new ws,s=new ws;n._rot=i,i._rot=r,r._rot=s,s._rot=n,n.setNext(n),i.setNext(s),r.setNext(r),s.setNext(i);var o=n;return o.setOrig(t),o.setDest(e),o},ws.swap=function(t){var e=t.oPrev(),n=t.sym().oPrev();ws.splice(t,e),ws.splice(t.sym(),n),ws.splice(t,e.lNext()),ws.splice(t.sym(),n.lNext()),t.setOrig(e.dest()),t.setDest(n.dest())},ws.splice=function(t,e){var n=t.oNext().rot(),i=e.oNext().rot(),r=e.oNext(),s=t.oNext(),o=i.oNext(),a=n.oNext();t.setNext(r),e.setNext(s),n.setNext(o),i.setNext(a)},ws.connect=function(t,e){var n=ws.makeEdge(t.dest(),e.orig());return ws.splice(n,t.lNext()),ws.splice(n.sym(),e),n},io(Rs.prototype,{insertSite:function(t){var e=this.subdiv.locate(t);if(this.subdiv.isVertexOfEdge(e,t))return e;this.subdiv.isOnEdge(e,t.getCoordinate())&&(e=e.oPrev(),this.subdiv.delete(e.oNext()));var n=this.subdiv.makeEdge(e.orig(),t);ws.splice(n,e);var i=n;do{n=this.subdiv.connect(e,n.sym()),e=n.oPrev()}while(e.lNext()!==i);for(;;){var r=e.oPrev();if(r.dest().rightOf(e)&&t.isInCircle(e.orig(),r.dest(),e.dest()))ws.swap(e),e=e.oPrev();else{if(e.oNext()===i)return n;e=e.oNext().lPrev()}}},insertSites:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.insertSite(n)}},interfaces_:function(){return[]},getClass:function(){return Rs}}),io(Ts.prototype,{locate:function(t){},interfaces_:function(){return[]},getClass:function(){return Ts}}),io(Os.prototype,{init:function(){this.lastEdge=this.findEdge()},locate:function(t){this.lastEdge.isLive()||this.init();var e=this.subdiv.locateFromEdge(t,this.lastEdge);return this.lastEdge=e,e},findEdge:function(){return this.subdiv.getEdges().iterator().next()},interfaces_:function(){return[Ts]},getClass:function(){return Os}}),ro(Ps,u),io(Ps.prototype,{getSegment:function(){return this.seg},interfaces_:function(){return[]},getClass:function(){return Ps}}),Ps.msgWithSpatial=function(t,e){return null!==e?t+" [ "+e+" ]":t},io(bs.prototype,{visit:function(t){},interfaces_:function(){return[]},getClass:function(){return bs}}),io(_s.prototype,{getTriangleVertices:function(t){var e=new As;return this.visitTriangles(e,t),e.getTriangleVertices()},isFrameVertex:function(t){return!!t.equals(this.frameVertex[0])||(!!t.equals(this.frameVertex[1])||!!t.equals(this.frameVertex[2]))},isVertexOfEdge:function(t,e){return!(!e.equals(t.orig(),this.tolerance)&&!e.equals(t.dest(),this.tolerance))},connect:function(t,e){var n=ws.connect(t,e);return this.quadEdges.add(n),n},getVoronoiCellPolygon:function(t,e){var n=new x,i=t;do{var r=t.rot().orig().getCoordinate();n.add(r),t=t.oPrev()}while(t!==i);var s=new E;s.addAll(n,!1),s.closeRing(),s.size()<4&&(_.out.println(s),s.add(s.get(s.size()-1),!0));var o=s.toCoordinateArray(),a=e.createPolygon(e.createLinearRing(o),null),u=i.orig();return a.setUserData(u.getCoordinate()),a},setLocator:function(t){this.locator=t},initSubdiv:function(){var t=this.makeEdge(this.frameVertex[0],this.frameVertex[1]),e=this.makeEdge(this.frameVertex[1],this.frameVertex[2]);ws.splice(t.sym(),e);var n=this.makeEdge(this.frameVertex[2],this.frameVertex[0]);return ws.splice(e.sym(),n),ws.splice(n.sym(),t),t},isFrameBorderEdge:function(t){var e=new Array(3).fill(null);_s.getTriangleEdges(t,e);var n=new Array(3).fill(null);_s.getTriangleEdges(t.sym(),n);var i=t.lNext().dest();if(this.isFrameVertex(i))return!0;var r=t.sym().lNext().dest();return!!this.isFrameVertex(r)},makeEdge:function(t,e){var n=ws.makeEdge(t,e);return this.quadEdges.add(n),n},visitTriangles:function(t,e){this.visitedKey++;var n=new ce;n.push(this.startingEdge);for(var i=new K;!n.empty();){var r=n.pop();if(!i.contains(r)){var s=this.fetchTriangleToVisit(r,n,e,i);null!==s&&t.visit(s)}}},isFrameEdge:function(t){return!(!this.isFrameVertex(t.orig())&&!this.isFrameVertex(t.dest()))},isOnEdge:function(t,e){return this.seg.setCoordinates(t.orig().getCoordinate(),t.dest().getCoordinate()),this.seg.distance(e)<this.edgeCoincidenceTolerance},getEnvelope:function(){return new I(this.frameEnv)},createFrame:function(t){var e=t.getWidth(),n=t.getHeight(),i=0;i=e>n?10*e:10*n,this.frameVertex[0]=new Ss((t.getMaxX()+t.getMinX())/2,t.getMaxY()+i),this.frameVertex[1]=new Ss(t.getMinX()-i,t.getMinY()-i),this.frameVertex[2]=new Ss(t.getMaxX()+i,t.getMinY()-i),this.frameEnv=new I(this.frameVertex[0].getCoordinate(),this.frameVertex[1].getCoordinate()),this.frameEnv.expandToInclude(this.frameVertex[2].getCoordinate())},getTriangleCoordinates:function(t){var e=new Fs;return this.visitTriangles(e,t),e.getTriangles()},getVertices:function(t){for(var e=new K,n=this.quadEdges.iterator();n.hasNext();){var i=n.next(),r=i.orig();!t&&this.isFrameVertex(r)||e.add(r);var s=i.dest();!t&&this.isFrameVertex(s)||e.add(s)}return e},fetchTriangleToVisit:function(t,e,n,i){var r=t,s=0,o=!1;do{this.triEdges[s]=r,this.isFrameEdge(r)&&(o=!0);var a=r.sym();i.contains(a)||e.push(a),i.add(r),s++,r=r.lNext()}while(r!==t);return o&&!n?null:this.triEdges},getEdges:function(){if(0===arguments.length)return this.quadEdges;if(1===arguments.length){for(var t=arguments[0],e=this.getPrimaryEdges(!1),n=new Array(e.size()).fill(null),i=0,r=e.iterator();r.hasNext();){var s=r.next();n[i++]=t.createLineString([s.orig().getCoordinate(),s.dest().getCoordinate()])}return t.createMultiLineString(n)}},getVertexUniqueEdges:function(t){for(var e=new x,n=new K,i=this.quadEdges.iterator();i.hasNext();){var r=i.next(),s=r.orig();n.contains(s)||(n.add(s),!t&&this.isFrameVertex(s)||e.add(r));var o=r.sym(),a=o.orig();n.contains(a)||(n.add(a),!t&&this.isFrameVertex(a)||e.add(o))}return e},getTriangleEdges:function(t){var e=new Ds;return this.visitTriangles(e,t),e.getTriangleEdges()},getPrimaryEdges:function(t){this.visitedKey++;var e=new x,n=new ce;n.push(this.startingEdge);for(var i=new K;!n.empty();){var r=n.pop();if(!i.contains(r)){var s=r.getPrimary();!t&&this.isFrameEdge(s)||e.add(s),n.push(r.oNext()),n.push(r.sym().oNext()),i.add(r),i.add(r.sym())}}return e},delete:function(t){ws.splice(t,t.oPrev()),ws.splice(t.sym(),t.sym().oPrev());var e=t.sym(),n=t.rot(),i=t.rot().sym();this.quadEdges.remove(t),this.quadEdges.remove(e),this.quadEdges.remove(n),this.quadEdges.remove(i),t.delete(),e.delete(),n.delete(),i.delete()},locateFromEdge:function(t,e){for(var n=0,i=this.quadEdges.size(),r=e;;){if(++n>i)throw new Ps(r.toLineSegment());if(t.equals(r.orig())||t.equals(r.dest()))break;if(t.rightOf(r))r=r.sym();else if(t.rightOf(r.oNext())){if(t.rightOf(r.dPrev()))break;r=r.dPrev()}else r=r.oNext()}return r},getTolerance:function(){return this.tolerance},getVoronoiCellPolygons:function(t){this.visitTriangles(new Ms,!0);for(var e=new x,n=this.getVertexUniqueEdges(!1),i=n.iterator();i.hasNext();){var r=i.next();e.add(this.getVoronoiCellPolygon(r,t))}return e},getVoronoiDiagram:function(t){var e=this.getVoronoiCellPolygons(t);return t.createGeometryCollection($t.toGeometryArray(e))},getTriangles:function(t){for(var e=this.getTriangleCoordinates(!1),n=new Array(e.size()).fill(null),i=0,r=e.iterator();r.hasNext();){var s=r.next();n[i++]=t.createPolygon(t.createLinearRing(s),null)}return t.createGeometryCollection(n)},insertSite:function(t){var e=this.locate(t);if(t.equals(e.orig(),this.tolerance)||t.equals(e.dest(),this.tolerance))return e;var n=this.makeEdge(e.orig(),t);ws.splice(n,e);var i=n;do{n=this.connect(e,n.sym()),e=n.oPrev()}while(e.lNext()!==i);return i},locate:function(){if(1===arguments.length){if(arguments[0]instanceof Ss){var t=arguments[0];return this.locator.locate(t)}if(arguments[0]instanceof c){var e=arguments[0];return this.locator.locate(new Ss(e))}}else if(2===arguments.length){var n=arguments[0],i=arguments[1],r=this.locator.locate(new Ss(n));if(null===r)return null;var s=r;r.dest().getCoordinate().equals2D(n)&&(s=r.sym());var o=s;do{if(o.dest().getCoordinate().equals2D(i))return o;o=o.oNext()}while(o!==s);return null}},interfaces_:function(){return[]},getClass:function(){return _s}}),_s.getTriangleEdges=function(t,e){if(e[0]=t,e[1]=e[0].lNext(),e[2]=e[1].lNext(),e[2].lNext()!==e[0])throw new n("Edges do not form a triangle")},io(Ms.prototype,{visit:function(t){for(var e=t[0].orig().getCoordinate(),n=t[1].orig().getCoordinate(),i=t[2].orig().getCoordinate(),r=Ei.circumcentre(e,n,i),s=new Ss(r),o=0;o<3;o++)t[o].rot().setOrig(s)},interfaces_:function(){return[bs]},getClass:function(){return Ms}}),io(Ds.prototype,{getTriangleEdges:function(){return this.triList},visit:function(t){this.triList.add(t.clone())},interfaces_:function(){return[bs]},getClass:function(){return Ds}}),io(As.prototype,{visit:function(t){this.triList.add([t[0].orig(),t[1].orig(),t[2].orig()])},getTriangleVertices:function(){return this.triList},interfaces_:function(){return[bs]},getClass:function(){return As}}),io(Fs.prototype,{checkTriangleSize:function(t){t.length>=2?ee.toLineString(t[0],t[1]):t.length>=1&&ee.toPoint(t[0])},visit:function(t){this.coordList.clear();for(var e=0;e<3;e++){var n=t[e].orig();this.coordList.add(n.getCoordinate())}if(this.coordList.size()>0){this.coordList.closeRing();var i=this.coordList.toCoordinateArray();if(4!==i.length)return null;this.triCoords.add(i)}},getTriangles:function(){return this.triCoords},interfaces_:function(){return[bs]},getClass:function(){return Fs}}),_s.TriangleCircumcentreVisitor=Ms,_s.TriangleEdgesListVisitor=Ds,_s.TriangleVertexListVisitor=As,_s.TriangleCoordinatesVisitor=Fs,_s.EDGE_COINCIDENCE_TOL_FACTOR=1e3,io(Gs.prototype,{getLineSegment:function(){return this.ls},getEndZ:function(){return this.ls.getCoordinate(1).z},getStartZ:function(){return this.ls.getCoordinate(0).z},intersection:function(t){return this.ls.intersection(t.getLineSegment())},getStart:function(){return this.ls.getCoordinate(0)},getEnd:function(){return this.ls.getCoordinate(1)},getEndY:function(){return this.ls.getCoordinate(1).y},getStartX:function(){return this.ls.getCoordinate(0).x},equalsTopo:function(t){return this.ls.equalsTopo(t.getLineSegment())},getStartY:function(){return this.ls.getCoordinate(0).y},setData:function(t){this.data=t},getData:function(){return this.data},getEndX:function(){return this.ls.getCoordinate(1).x},toString:function(){return this.ls.toString()},interfaces_:function(){return[]},getClass:function(){return Gs}}),io(qs.prototype,{visit:function(t){},interfaces_:function(){return[]},getClass:function(){return qs}}),io(Bs.prototype,{isRepeated:function(){return this.count>1},getRight:function(){return this.right},getCoordinate:function(){return this.p},setLeft:function(t){this.left=t},getX:function(){return this.p.x},getData:function(){return this.data},getCount:function(){return this.count},getLeft:function(){return this.left},getY:function(){return this.p.y},increment:function(){this.count=this.count+1},setRight:function(t){this.right=t},interfaces_:function(){return[]},getClass:function(){return Bs}}),io(Vs.prototype,{insert:function(){if(1===arguments.length){var t=arguments[0];return this.insert(t,null)}if(2===arguments.length){var e=arguments[0],n=arguments[1];if(null===this.root)return this.root=new Bs(e,n),this.root;if(this.tolerance>0){var i=this.findBestMatchNode(e);if(null!==i)return i.increment(),i}return this.insertExact(e,n)}},query:function(){if(1===arguments.length){var t=arguments[0],e=new x;return this.query(t,e),e}if(2===arguments.length)if(arguments[0]instanceof I&&oo(arguments[1],m)){var n=arguments[0],i=arguments[1];this.queryNode(this.root,n,!0,{interfaces_:function(){return[qs]},visit:function(t){i.add(t)}})}else if(arguments[0]instanceof I&&oo(arguments[1],qs)){var r=arguments[0],s=arguments[1];this.queryNode(this.root,r,!0,s)}},queryNode:function(t,e,n,i){if(null===t)return null;var r=null,s=null,o=null;n?(r=e.getMinX(),s=e.getMaxX(),o=t.getX()):(r=e.getMinY(),s=e.getMaxY(),o=t.getY());var a=r<o,u=o<=s;a&&this.queryNode(t.getLeft(),e,!n,i),e.contains(t.getCoordinate())&&i.visit(t),u&&this.queryNode(t.getRight(),e,!n,i)},findBestMatchNode:function(t){var e=new zs(t,this.tolerance);return this.query(e.queryEnvelope(),e),e.getNode()},isEmpty:function(){return null===this.root},insertExact:function(t,e){for(var n=this.root,i=this.root,r=!0,s=!0;null!==n;){if(null!==n){if(t.distance(n.getCoordinate())<=this.tolerance)return n.increment(),n}s=r?t.x<n.getX():t.y<n.getY(),i=n,n=s?n.getLeft():n.getRight(),r=!r}this.numberOfNodes=this.numberOfNodes+1;var o=new Bs(t,e);return s?i.setLeft(o):i.setRight(o),o},interfaces_:function(){return[]},getClass:function(){return Vs}}),Vs.toCoordinates=function(){if(1===arguments.length){var t=arguments[0];return Vs.toCoordinates(t,!1)}if(2===arguments.length){for(var e=arguments[0],n=arguments[1],i=new E,r=e.iterator();r.hasNext();)for(var s=r.next(),o=n?s.getCount():1,a=0;a<o;a++)i.add(s.getCoordinate(),!0);return i.toCoordinateArray()}},io(zs.prototype,{visit:function(t){var e=this.p.distance(t.getCoordinate());if(!(e<=this.tolerance))return null;var n=!1;(null===this.matchNode||e<this.matchDist||null!==this.matchNode&&e===this.matchDist&&t.getCoordinate().compareTo(this.matchNode.getCoordinate())<1)&&(n=!0),n&&(this.matchNode=t,this.matchDist=e)},queryEnvelope:function(){var t=new I(this.p);return t.expandBy(this.tolerance),t},getNode:function(){return this.matchNode},interfaces_:function(){return[qs]},getClass:function(){return zs}}),Vs.BestMatchVisitor=zs,io(ks.prototype,{getInitialVertices:function(){return this.initialVertices},getKDT:function(){return this.kdt},enforceConstraints:function(){this.addConstraintVertices();var t=0,e=0;do{e=this.enforceGabriel(this.segments),t++}while(e>0&&t<ks.MAX_SPLIT_ITER)},insertSites:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.insertSite(n)}},getVertexFactory:function(){return this.vertexFactory},getPointArray:function(){for(var t=new Array(this.initialVertices.size()+this.segVertices.size()).fill(null),e=0,n=this.initialVertices.iterator();n.hasNext();){var i=n.next();t[e++]=i.getCoordinate()}for(var r=this.segVertices.iterator();r.hasNext();){var i=r.next();t[e++]=i.getCoordinate()}return t},setConstraints:function(t,e){this.segments=t,this.segVertices=e},computeConvexHull:function(){var t=new $t,e=this.getPointArray(),n=new ge(e,t);this.convexHull=n.getConvexHull()},addConstraintVertices:function(){this.computeConvexHull(),this.insertSites(this.segVertices)},findNonGabrielPoint:function(t){var e=t.getStart(),n=t.getEnd(),r=new c((e.x+n.x)/2,(e.y+n.y)/2),s=e.distance(r),o=new I(r);o.expandBy(s);for(var a=this.kdt.query(o),u=null,l=i.MAX_VALUE,h=a.iterator();h.hasNext();){var f=h.next(),g=f.getCoordinate();if(!g.equals2D(e)&&!g.equals2D(n)){var d=r.distance(g);if(d<s){var p=d;(null===u||p<l)&&(u=g,l=p)}}}return u},getConstraintSegments:function(){return this.segments},setSplitPointFinder:function(t){this.splitFinder=t},getConvexHull:function(){return this.convexHull},getTolerance:function(){return this.tolerance},enforceGabriel:function(t){for(var e=new x,n=0,i=new x,r=t.iterator();r.hasNext();){var s=r.next(),o=this.findNonGabrielPoint(s);if(null!==o){this.splitPt=this.splitFinder.findSplitPoint(s,o);var a=this.createVertex(this.splitPt,s),u=(this.insertSite(a),new Gs(s.getStartX(),s.getStartY(),s.getStartZ(),a.getX(),a.getY(),a.getZ(),s.getData())),l=new Gs(a.getX(),a.getY(),a.getZ(),s.getEndX(),s.getEndY(),s.getEndZ(),s.getData());e.add(u),e.add(l),i.add(s),n+=1}}return t.removeAll(i),t.addAll(e),n},createVertex:function(){if(1===arguments.length){var t=arguments[0],e=null;return e=null!==this.vertexFactory?this.vertexFactory.createVertex(t,null):new Ls(t)}if(2===arguments.length){var n=arguments[0],i=arguments[1],e=null;return e=null!==this.vertexFactory?this.vertexFactory.createVertex(n,i):new Ls(n),e.setOnConstraint(!0),e}},getSubdivision:function(){return this.subdiv},computeBoundingBox:function(){var t=ks.computeVertexEnvelope(this.initialVertices),e=ks.computeVertexEnvelope(this.segVertices),n=new I(t);n.expandToInclude(e);var i=.2*n.getWidth(),r=.2*n.getHeight(),s=Math.max(i,r);this.computeAreaEnv=new I(n),this.computeAreaEnv.expandBy(s)},setVertexFactory:function(t){this.vertexFactory=t},formInitialDelaunay:function(){this.computeBoundingBox(),this.subdiv=new _s(this.computeAreaEnv,this.tolerance),this.subdiv.setLocator(new Os(this.subdiv)),this.incDel=new Rs(this.subdiv),this.insertSites(this.initialVertices)},insertSite:function(){if(arguments[0]instanceof Ls){var t=arguments[0],e=this.kdt.insert(t.getCoordinate(),t);if(e.isRepeated()){var n=e.getData();return n.merge(t),n}return this.incDel.insertSite(t),t}if(arguments[0]instanceof c){var i=arguments[0];this.insertSite(this.createVertex(i))}},interfaces_:function(){return[]},getClass:function(){return ks}}),ks.computeVertexEnvelope=function(t){for(var e=new I,n=t.iterator();n.hasNext();){var i=n.next();e.expandToInclude(i.getCoordinate())}return e},ks.MAX_SPLIT_ITER=99,io(Ys.prototype,{create:function(){if(null!==this.subdiv)return null;var t=Ys.envelope(this.siteCoords),e=Ys.toVertices(this.siteCoords);this.subdiv=new _s(t,this.tolerance),new Rs(this.subdiv).insertSites(e)},setTolerance:function(t){this.tolerance=t},setSites:function(){if(arguments[0]instanceof F){var t=arguments[0];this.siteCoords=Ys.extractUniqueCoordinates(t)}else if(oo(arguments[0],d)){var e=arguments[0];this.siteCoords=Ys.unique(Y.toCoordinateArray(e))}},getEdges:function(t){return this.create(),this.subdiv.getEdges(t)},getSubdivision:function(){return this.create(),this.subdiv},getTriangles:function(t){return this.create(),this.subdiv.getTriangles(t)},interfaces_:function(){return[]},getClass:function(){return Ys}}),Ys.extractUniqueCoordinates=function(t){if(null===t)return new E;var e=t.getCoordinates();return Ys.unique(e)},Ys.envelope=function(t){for(var e=new I,n=t.iterator();n.hasNext();){var i=n.next();e.expandToInclude(i)}return e},Ys.unique=function(t){var e=Y.copyDeep(t);return st.sort(e),new E(e,!1)},Ys.toVertices=function(t){for(var e=new x,n=t.iterator();n.hasNext();){var i=n.next();e.add(new Ss(i))}return e},io(Us.prototype,{createSiteVertices:function(t){for(var e=new x,n=t.iterator();n.hasNext();){var i=n.next();this.constraintVertexMap.containsKey(i)||e.add(new Ls(i))}return e},create:function(){if(null!==this.subdiv)return null;var t=Ys.envelope(this.siteCoords),e=new x;null!==this.constraintLines&&(t.expandToInclude(this.constraintLines.getEnvelopeInternal()),this.createVertices(this.constraintLines),e=Us.createConstraintSegments(this.constraintLines));var n=this.createSiteVertices(this.siteCoords),i=new ks(n,this.tolerance);i.setConstraints(e,new x(this.constraintVertexMap.values())),i.formInitialDelaunay(),i.enforceConstraints(),this.subdiv=i.getSubdivision()},setTolerance:function(t){this.tolerance=t},setConstraints:function(t){this.constraintLines=t},setSites:function(t){this.siteCoords=Ys.extractUniqueCoordinates(t)},getEdges:function(t){return this.create(),this.subdiv.getEdges(t)},getSubdivision:function(){return this.create(),this.subdiv},getTriangles:function(t){return this.create(),this.subdiv.getTriangles(t)},createVertices:function(t){for(var e=t.getCoordinates(),n=0;n<e.length;n++){var i=new Ls(e[n]);this.constraintVertexMap.put(e[n],i)}},interfaces_:function(){return[]},getClass:function(){return Us}}),Us.createConstraintSegments=function(){if(1===arguments.length){for(var t=arguments[0],e=qn.getLines(t),n=new x,i=e.iterator();i.hasNext();){var r=i.next();Us.createConstraintSegments(r,n)}return n}if(2===arguments.length)for(var s=arguments[0],o=arguments[1],a=s.getCoordinates(),i=1;i<a.length;i++)o.add(new Gs(a[i-1],a[i]))},io(Xs.prototype,{create:function(){if(null!==this.subdiv)return null;var t=Ys.envelope(this.siteCoords);this.diagramEnv=t;var e=Math.max(this.diagramEnv.getWidth(),this.diagramEnv.getHeight());this.diagramEnv.expandBy(e),null!==this.clipEnv&&this.diagramEnv.expandToInclude(this.clipEnv);var n=Ys.toVertices(this.siteCoords);this.subdiv=new _s(t,this.tolerance),new Rs(this.subdiv).insertSites(n)},getDiagram:function(t){this.create();var e=this.subdiv.getVoronoiDiagram(t);return Xs.clipGeometryCollection(e,this.diagramEnv)},setTolerance:function(t){this.tolerance=t},setSites:function(){if(arguments[0]instanceof F){var t=arguments[0];this.siteCoords=Ys.extractUniqueCoordinates(t)}else if(oo(arguments[0],d)){var e=arguments[0];this.siteCoords=Ys.unique(Y.toCoordinateArray(e))}},setClipEnvelope:function(t){this.clipEnv=t},getSubdivision:function(){return this.create(),this.subdiv},interfaces_:function(){return[]},getClass:function(){return Xs}}),Xs.clipGeometryCollection=function(t,e){for(var n=t.getFactory().toGeometry(e),i=new x,r=0;r<t.getNumGeometries();r++){var s=t.getGeometryN(r),o=null;e.contains(s.getEnvelopeInternal())?o=s:e.intersects(s.getEnvelopeInternal())&&(o=n.intersection(s),o.setUserData(s.getUserData())),null===o||o.isEmpty()||i.add(o)}return t.getFactory().createGeometryCollection($t.toGeometryArray(i))};var Yo=Object.freeze({Vertex:Ss}),Uo=Object.freeze({ConformingDelaunayTriangulationBuilder:Us,DelaunayTriangulationBuilder:Ys,VoronoiDiagramBuilder:Xs,quadedge:Yo});io(Hs.prototype,{getSegmentIndex:function(){return this.segmentIndex},getComponentIndex:function(){return this.componentIndex},isEndpoint:function(t){var e=t.getGeometryN(this.componentIndex),n=e.getNumPoints()-1;return this.segmentIndex>=n||this.segmentIndex===n&&this.segmentFraction>=1},isValid:function(t){if(this.componentIndex<0||this.componentIndex>=t.getNumGeometries())return!1;var e=t.getGeometryN(this.componentIndex);return!(this.segmentIndex<0||this.segmentIndex>e.getNumPoints())&&((this.segmentIndex!==e.getNumPoints()||0===this.segmentFraction)&&!(this.segmentFraction<0||this.segmentFraction>1))},normalize:function(){this.segmentFraction<0&&(this.segmentFraction=0),this.segmentFraction>1&&(this.segmentFraction=1),this.componentIndex<0&&(this.componentIndex=0,this.segmentIndex=0,this.segmentFraction=0),this.segmentIndex<0&&(this.segmentIndex=0,this.segmentFraction=0),1===this.segmentFraction&&(this.segmentFraction=0,this.segmentIndex+=1)},toLowest:function(t){var e=t.getGeometryN(this.componentIndex),n=e.getNumPoints()-1;return this.segmentIndex<n?this:new Hs(this.componentIndex,n,1,!1)},getCoordinate:function(t){var e=t.getGeometryN(this.componentIndex),n=e.getCoordinateN(this.segmentIndex);if(this.segmentIndex>=e.getNumPoints()-1)return n;var i=e.getCoordinateN(this.segmentIndex+1);return Hs.pointAlongSegmentByFraction(n,i,this.segmentFraction)},getSegmentFraction:function(){return this.segmentFraction},getSegment:function(t){var e=t.getGeometryN(this.componentIndex),n=e.getCoordinateN(this.segmentIndex);if(this.segmentIndex>=e.getNumPoints()-1){return new ae(e.getCoordinateN(e.getNumPoints()-2),n)}return new ae(n,e.getCoordinateN(this.segmentIndex+1))},clamp:function(t){if(this.componentIndex>=t.getNumGeometries())return this.setToEnd(t),null;if(this.segmentIndex>=t.getNumPoints()){var e=t.getGeometryN(this.componentIndex);this.segmentIndex=e.getNumPoints()-1,this.segmentFraction=1}},setToEnd:function(t){this.componentIndex=t.getNumGeometries()-1;var e=t.getGeometryN(this.componentIndex);this.segmentIndex=e.getNumPoints()-1,this.segmentFraction=1},compareTo:function(t){var e=t;return this.componentIndex<e.componentIndex?-1:this.componentIndex>e.componentIndex?1:this.segmentIndex<e.segmentIndex?-1:this.segmentIndex>e.segmentIndex?1:this.segmentFraction<e.segmentFraction?-1:this.segmentFraction>e.segmentFraction?1:0},clone:function(){return new Hs(this.componentIndex,this.segmentIndex,this.segmentFraction)},toString:function(){return"LinearLoc["+this.componentIndex+", "+this.segmentIndex+", "+this.segmentFraction+"]"},isOnSameSegment:function(t){return this.componentIndex===t.componentIndex&&(this.segmentIndex===t.segmentIndex||(t.segmentIndex-this.segmentIndex==1&&0===t.segmentFraction||this.segmentIndex-t.segmentIndex==1&&0===this.segmentFraction))},snapToVertex:function(t,e){if(this.segmentFraction<=0||this.segmentFraction>=1)return null;var n=this.getSegmentLength(t),i=this.segmentFraction*n,r=n-i;i<=r&&i<e?this.segmentFraction=0:r<=i&&r<e&&(this.segmentFraction=1)},compareLocationValues:function(t,e,n){return this.componentIndex<t?-1:this.componentIndex>t?1:this.segmentIndex<e?-1:this.segmentIndex>e?1:this.segmentFraction<n?-1:this.segmentFraction>n?1:0},getSegmentLength:function(t){var e=t.getGeometryN(this.componentIndex),n=this.segmentIndex;this.segmentIndex>=e.getNumPoints()-1&&(n=e.getNumPoints()-2);var i=e.getCoordinateN(n),r=e.getCoordinateN(n+1);return i.distance(r)},isVertex:function(){return this.segmentFraction<=0||this.segmentFraction>=1},interfaces_:function(){return[r]},getClass:function(){return Hs}}),Hs.getEndLocation=function(t){var e=new Hs;return e.setToEnd(t),e},Hs.pointAlongSegmentByFraction=function(t,e,n){return n<=0?t:n>=1?e:new c((e.x-t.x)*n+t.x,(e.y-t.y)*n+t.y,(e.z-t.z)*n+t.z)},Hs.compareLocationValues=function(t,e,n,i,r,s){return t<i?-1:t>i?1:e<r?-1:e>r?1:n<s?-1:n>s?1:0},io(Ws.prototype,{getComponentIndex:function(){
return this.componentIndex},getLine:function(){return this.currentLine},getVertexIndex:function(){return this.vertexIndex},getSegmentEnd:function(){return this.vertexIndex<this.getLine().getNumPoints()-1?this.currentLine.getCoordinateN(this.vertexIndex+1):null},next:function(){if(!this.hasNext())return null;++this.vertexIndex>=this.currentLine.getNumPoints()&&(this.componentIndex++,this.loadCurrentLine(),this.vertexIndex=0)},loadCurrentLine:function(){if(this.componentIndex>=this.numLines)return this.currentLine=null,null;this.currentLine=this.linearGeom.getGeometryN(this.componentIndex)},getSegmentStart:function(){return this.currentLine.getCoordinateN(this.vertexIndex)},isEndOfLine:function(){return!(this.componentIndex>=this.numLines)&&!(this.vertexIndex<this.currentLine.getNumPoints()-1)},hasNext:function(){return!(this.componentIndex>=this.numLines)&&!(this.componentIndex===this.numLines-1&&this.vertexIndex>=this.currentLine.getNumPoints())},interfaces_:function(){return[]},getClass:function(){return Ws}}),Ws.segmentEndVertexIndex=function(t){return t.getSegmentFraction()>0?t.getSegmentIndex()+1:t.getSegmentIndex()},io(js.prototype,{indexOf:function(t){return this.indexOfFromStart(t,null)},indexOfFromStart:function(t,e){for(var n=i.MAX_VALUE,r=0,s=0,o=-1,a=new ae,u=new Ws(this.linearGeom);u.hasNext();u.next())if(!u.isEndOfLine()){a.p0=u.getSegmentStart(),a.p1=u.getSegmentEnd();var l=a.distance(t),h=a.segmentFraction(t),c=u.getComponentIndex(),f=u.getVertexIndex();l<n&&(null===e||e.compareLocationValues(c,f,h)<0)&&(r=c,s=f,o=h,n=l)}return n===i.MAX_VALUE?new Hs(e):new Hs(r,s,o)},indexOfAfter:function(t,e){if(null===e)return this.indexOf(t);var n=Hs.getEndLocation(this.linearGeom);if(n.compareTo(e)<=0)return n;var i=this.indexOfFromStart(t,e);return h.isTrue(i.compareTo(e)>=0,"computed location is before specified minimum location"),i},interfaces_:function(){return[]},getClass:function(){return js}}),js.indexOf=function(t,e){return new js(t).indexOf(e)},js.indexOfAfter=function(t,e,n){return new js(t).indexOfAfter(e,n)},io(Ks.prototype,{indicesOf:function(t){var e=t.getGeometryN(0).getCoordinateN(0),n=t.getGeometryN(t.getNumGeometries()-1),i=n.getCoordinateN(n.getNumPoints()-1),r=new js(this.linearGeom),s=new Array(2).fill(null);return s[0]=r.indexOf(e),0===t.getLength()?s[1]=s[0].clone():s[1]=r.indexOfAfter(i,s[0]),s},interfaces_:function(){return[]},getClass:function(){return Ks}}),Ks.indicesOf=function(t,e){return new Ks(t).indicesOf(e)},io(Zs.prototype,{getGeometry:function(){return this.endLine(),this.geomFact.buildGeometry(this.lines)},getLastCoordinate:function(){return this.lastPt},endLine:function(){if(null===this.coordList)return null;if(this.ignoreInvalidLines&&this.coordList.size()<2)return this.coordList=null,null;var t=this.coordList.toCoordinateArray(),e=t;this.fixInvalidLines&&(e=this.validCoordinateSequence(t)),this.coordList=null;var i=null;try{i=this.geomFact.createLineString(e)}catch(t){if(!(t instanceof n))throw t;if(!this.ignoreInvalidLines)throw t}null!==i&&this.lines.add(i)},setFixInvalidLines:function(t){this.fixInvalidLines=t},add:function(){if(1===arguments.length){var t=arguments[0];this.add(t,!0)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];null===this.coordList&&(this.coordList=new E),this.coordList.add(e,n),this.lastPt=e}},setIgnoreInvalidLines:function(t){this.ignoreInvalidLines=t},validCoordinateSequence:function(t){return t.length>=2?t:[t[0],t[0]]},interfaces_:function(){return[]},getClass:function(){return Zs}}),io(Qs.prototype,{computeLinear:function(t,e){var n=new Zs(this.line.getFactory());n.setFixInvalidLines(!0),t.isVertex()||n.add(t.getCoordinate(this.line));for(var i=new Ws(this.line,t);i.hasNext()&&!(e.compareLocationValues(i.getComponentIndex(),i.getVertexIndex(),0)<0);i.next()){var r=i.getSegmentStart();n.add(r),i.isEndOfLine()&&n.endLine()}return e.isVertex()||n.add(e.getCoordinate(this.line)),n.getGeometry()},computeLine:function(t,e){var n=this.line.getCoordinates(),i=new E,r=t.getSegmentIndex();t.getSegmentFraction()>0&&(r+=1);var s=e.getSegmentIndex();1===e.getSegmentFraction()&&(s+=1),s>=n.length&&(s=n.length-1),t.isVertex()||i.add(t.getCoordinate(this.line));for(var o=r;o<=s;o++)i.add(n[o]);e.isVertex()||i.add(e.getCoordinate(this.line)),i.size()<=0&&i.add(t.getCoordinate(this.line));var a=i.toCoordinateArray();return a.length<=1&&(a=[a[0],a[0]]),this.line.getFactory().createLineString(a)},extract:function(t,e){return e.compareTo(t)<0?this.reverse(this.computeLinear(e,t)):this.computeLinear(t,e)},reverse:function(t){return t instanceof It?t.reverse():t instanceof ht?t.reverse():(h.shouldNeverReachHere("non-linear geometry encountered"),null)},interfaces_:function(){return[]},getClass:function(){return Qs}}),Qs.extract=function(t,e,n){return new Qs(t).extract(e,n)},io(Js.prototype,{clampIndex:function(t){var e=t.clone();return e.clamp(this.linearGeom),e},project:function(t){return js.indexOf(this.linearGeom,t)},checkGeometryType:function(){if(!(this.linearGeom instanceof It||this.linearGeom instanceof ht))throw new n("Input geometry must be linear")},extractPoint:function(){if(1===arguments.length){return arguments[0].getCoordinate(this.linearGeom)}if(2===arguments.length){var t=arguments[0],e=arguments[1],n=t.toLowest(this.linearGeom);return n.getSegment(this.linearGeom).pointAlongOffset(n.getSegmentFraction(),e)}},isValidIndex:function(t){return t.isValid(this.linearGeom)},getEndIndex:function(){return Hs.getEndLocation(this.linearGeom)},getStartIndex:function(){return new Hs},indexOfAfter:function(t,e){return js.indexOfAfter(this.linearGeom,t,e)},extractLine:function(t,e){return Qs.extract(this.linearGeom,t,e)},indexOf:function(t){return js.indexOf(this.linearGeom,t)},indicesOf:function(t){return Ks.indicesOf(this.linearGeom,t)},interfaces_:function(){return[]},getClass:function(){return Js}}),io($s.prototype,{indexOf:function(t){return this.indexOfFromStart(t,-1)},indexOfFromStart:function(t,e){for(var n=i.MAX_VALUE,r=e,s=0,o=new ae,a=new Ws(this.linearGeom);a.hasNext();){if(!a.isEndOfLine()){o.p0=a.getSegmentStart(),o.p1=a.getSegmentEnd();var u=o.distance(t),l=this.segmentNearestMeasure(o,t,s);u<n&&l>e&&(r=l,n=u),s+=o.getLength()}a.next()}return r},indexOfAfter:function(t,e){if(e<0)return this.indexOf(t);var n=this.linearGeom.getLength();if(n<e)return n;var i=this.indexOfFromStart(t,e);return h.isTrue(i>=e,"computed index is before specified minimum index"),i},segmentNearestMeasure:function(t,e,n){var i=t.projectionFactor(e);return i<=0?n:i<=1?n+i*t.getLength():n+t.getLength()},interfaces_:function(){return[]},getClass:function(){return $s}}),$s.indexOf=function(t,e){return new $s(t).indexOf(e)},$s.indexOfAfter=function(t,e,n){return new $s(t).indexOfAfter(e,n)},io(to.prototype,{getLength:function(t){for(var e=0,n=new Ws(this.linearGeom);n.hasNext();){if(!n.isEndOfLine()){var i=n.getSegmentStart(),r=n.getSegmentEnd(),s=r.distance(i);if(t.getComponentIndex()===n.getComponentIndex()&&t.getSegmentIndex()===n.getVertexIndex())return e+s*t.getSegmentFraction();e+=s}n.next()}return e},resolveHigher:function(t){if(!t.isEndpoint(this.linearGeom))return t;var e=t.getComponentIndex();if(e>=this.linearGeom.getNumGeometries()-1)return t;do{e++}while(e<this.linearGeom.getNumGeometries()-1&&0===this.linearGeom.getGeometryN(e).getLength());return new Hs(e,0,0)},getLocation:function(){if(1===arguments.length){var t=arguments[0];return this.getLocation(t,!0)}if(2===arguments.length){var e=arguments[0],n=arguments[1],i=e;if(e<0){i=this.linearGeom.getLength()+e}var r=this.getLocationForward(i);return n?r:this.resolveHigher(r)}},getLocationForward:function(t){if(t<=0)return new Hs;for(var e=0,n=new Ws(this.linearGeom);n.hasNext();){if(n.isEndOfLine()){if(e===t){var i=n.getComponentIndex(),r=n.getVertexIndex();return new Hs(i,r,0)}}else{var s=n.getSegmentStart(),o=n.getSegmentEnd(),a=o.distance(s);if(e+a>t){var u=(t-e)/a,i=n.getComponentIndex(),r=n.getVertexIndex();return new Hs(i,r,u)}e+=a}n.next()}return Hs.getEndLocation(this.linearGeom)},interfaces_:function(){return[]},getClass:function(){return to}}),to.getLength=function(t,e){return new to(t).getLength(e)},to.getLocation=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new to(t);return n.getLocation(e)}if(3===arguments.length){var i=arguments[0],r=arguments[1],s=arguments[2],n=new to(i);return n.getLocation(r,s)}},io(eo.prototype,{clampIndex:function(t){var e=this.positiveIndex(t),n=this.getStartIndex();if(e<n)return n;var i=this.getEndIndex();return e>i?i:e},locationOf:function(){if(1===arguments.length){var t=arguments[0];return to.getLocation(this.linearGeom,t)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return to.getLocation(this.linearGeom,e,n)}},project:function(t){return $s.indexOf(this.linearGeom,t)},positiveIndex:function(t){return t>=0?t:this.linearGeom.getLength()+t},extractPoint:function(){if(1===arguments.length){var t=arguments[0],e=to.getLocation(this.linearGeom,t);return e.getCoordinate(this.linearGeom)}if(2===arguments.length){var n=arguments[0],i=arguments[1],e=to.getLocation(this.linearGeom,n),r=e.toLowest(this.linearGeom);return r.getSegment(this.linearGeom).pointAlongOffset(r.getSegmentFraction(),i)}},isValidIndex:function(t){return t>=this.getStartIndex()&&t<=this.getEndIndex()},getEndIndex:function(){return this.linearGeom.getLength()},getStartIndex:function(){return 0},indexOfAfter:function(t,e){return $s.indexOfAfter(this.linearGeom,t,e)},extractLine:function(t,e){var n=(new Js(this.linearGeom),this.clampIndex(t)),i=this.clampIndex(e),r=n===i,s=this.locationOf(n,r),o=this.locationOf(i);return Qs.extract(this.linearGeom,s,o)},indexOf:function(t){return $s.indexOf(this.linearGeom,t)},indicesOf:function(t){var e=Ks.indicesOf(this.linearGeom,t);return[to.getLength(this.linearGeom,e[0]),to.getLength(this.linearGeom,e[1])]},interfaces_:function(){return[]},getClass:function(){return eo}});var Xo=Object.freeze({LengthIndexedLine:eo,LengthLocationMap:to,LinearGeometryBuilder:Zs,LinearIterator:Ws,LinearLocation:Hs,LocationIndexedLine:Js});io(no.prototype,{interfaces_:function(){return[]},getClass:function(){return no}}),no.union=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return $n.createEmptyResult($n.UNION,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),ei.overlayOp(t,e,$n.UNION)},io(F.prototype,{equalsTopo:function(t){return!!this.getEnvelopeInternal().equals(t.getEnvelopeInternal())&&ts.relate(this,t).isEquals(this.getDimension(),t.getDimension())},union:function(){if(0===arguments.length)return ss.union(this);if(1===arguments.length){var t=arguments[0];return no.union(this,t)}},isValid:function(){return Vr.isValid(this)},intersection:function(t){if(this.isEmpty()||t.isEmpty())return $n.createEmptyResult($n.INTERSECTION,this,t,this.factory);if(this.isGeometryCollection()){var e=t;return on.map(this,{interfaces_:function(){return[MapOp]},map:function(t){return t.intersection(e)}})}return this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(t),ei.overlayOp(this,t,$n.INTERSECTION)},covers:function(t){return ts.covers(this,t)},coveredBy:function(t){return ts.coveredBy(this,t)},touches:function(t){return ts.touches(this,t)},intersects:function(t){return ts.intersects(this,t)},within:function(t){return ts.within(this,t)},overlaps:function(t){return ts.overlaps(this,t)},disjoint:function(t){return ts.disjoint(this,t)},crosses:function(t){return ts.crosses(this,t)},buffer:function(){if(1===arguments.length){var t=arguments[0];return hr.bufferOp(this,t)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return hr.bufferOp(this,e,n)}if(3===arguments.length){var i=arguments[0],r=arguments[1],s=arguments[2];return hr.bufferOp(this,i,r,s)}},convexHull:function(){return new ge(this).getConvexHull()},relate:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return ts.relate.apply(ts,[this].concat(e))},getCentroid:function(){if(this.isEmpty())return this.factory.createPoint();var t=le.getCentroid(this);return this.createPointFromInternalCoord(t,this)},getInteriorPoint:function(){if(this.isEmpty())return this.factory.createPoint();var t=null,e=this.getDimension();if(0===e){var n=new si(this);t=n.getInteriorPoint()}else if(1===e){var n=new ri(this);t=n.getInteriorPoint()}else{var n=new ni(this);t=n.getInteriorPoint()}return this.createPointFromInternalCoord(t,this)},symDifference:function(t){if(this.isEmpty()||t.isEmpty()){if(this.isEmpty()&&t.isEmpty())return $n.createEmptyResult($n.SYMDIFFERENCE,this,t,this.factory);if(this.isEmpty())return t.copy();if(t.isEmpty())return this.copy()}return this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(t),ei.overlayOp(this,t,$n.SYMDIFFERENCE)},createPointFromInternalCoord:function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)},toText:function(){return(new ee).write(this)},toString:function(){this.toText()},contains:function(t){return ts.contains(this,t)},difference:function(t){return this.isEmpty()?$n.createEmptyResult($n.DIFFERENCE,this,t,this.factory):t.isEmpty()?this.copy():(this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(t),ei.overlayOp(this,t,$n.DIFFERENCE))},isSimple:function(){return new Yi(this).isSimple()},isWithinDistance:function(t,e){return!(this.getEnvelopeInternal().distance(t.getEnvelopeInternal())>e)&&pr.isWithinDistance(this,t,e)},distance:function(t){return pr.distance(this,t)},isEquivalentClass:function(t){return this.getClass()===t.getClass()}});t.version="1.4.0 (93f117d)",t.algorithm=Eo,t.densify=Io,t.dissolve=No,t.geom=yo,t.geomgraph=Co,t.index=wo,t.io=Po,t.noding=bo,t.operation=Vo,t.precision=zo,t.simplify=ko,t.triangulate=Uo,t.linearref=Xo,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=jsts.min.js.map

/* Copyright jQuery Foundation and other contributors; Licensed MIT */
(function(factory){if(typeof define==="function"&&define.amd){define(["jquery"],factory)}else{factory(jQuery)}})(function($){$.ui=$.ui||{};$.extend($.ui,{version:"1.11.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}});$.fn.extend({scrollParent:function(includeHidden){var position=this.css("position"),excludeStaticParent=position==="absolute",overflowRegex=includeHidden?/(auto|scroll|hidden)/:/(auto|scroll)/,scrollParent=this.parents().filter(function(){var parent=$(this);if(excludeStaticParent&&parent.css("position")==="static"){return false}return overflowRegex.test(parent.css("overflow")+parent.css("overflow-y")+parent.css("overflow-x"))}).eq(0);return position==="fixed"||!scrollParent.length?$(this[0].ownerDocument||document):scrollParent},uniqueId:function(){var uuid=0;return function(){return this.each(function(){if(!this.id){this.id="ui-id-"+ ++uuid}})}}(),removeUniqueId:function(){return this.each(function(){if(/^ui-id-\d+$/.test(this.id)){$(this).removeAttr("id")}})}});function focusable(element,isTabIndexNotNaN){var map,mapName,img,nodeName=element.nodeName.toLowerCase();if("area"===nodeName){map=element.parentNode;mapName=map.name;if(!element.href||!mapName||map.nodeName.toLowerCase()!=="map"){return false}img=$("img[usemap='#"+mapName+"']")[0];return!!img&&visible(img)}return(/^(input|select|textarea|button|object)$/.test(nodeName)?!element.disabled:"a"===nodeName?element.href||isTabIndexNotNaN:isTabIndexNotNaN)&&visible(element)}function visible(element){return $.expr.filters.visible(element)&&!$(element).parents().addBack().filter(function(){return $.css(this,"visibility")==="hidden"}).length}$.extend($.expr[":"],{data:$.expr.createPseudo?$.expr.createPseudo(function(dataName){return function(elem){return!!$.data(elem,dataName)}}):function(elem,i,match){return!!$.data(elem,match[3])},focusable:function(element){return focusable(element,!isNaN($.attr(element,"tabindex")))},tabbable:function(element){var tabIndex=$.attr(element,"tabindex"),isTabIndexNaN=isNaN(tabIndex);return(isTabIndexNaN||tabIndex>=0)&&focusable(element,!isTabIndexNaN)}});if(!$("<a>").outerWidth(1).jquery){$.each(["Width","Height"],function(i,name){var side=name==="Width"?["Left","Right"]:["Top","Bottom"],type=name.toLowerCase(),orig={innerWidth:$.fn.innerWidth,innerHeight:$.fn.innerHeight,outerWidth:$.fn.outerWidth,outerHeight:$.fn.outerHeight};function reduce(elem,size,border,margin){$.each(side,function(){size-=parseFloat($.css(elem,"padding"+this))||0;if(border){size-=parseFloat($.css(elem,"border"+this+"Width"))||0}if(margin){size-=parseFloat($.css(elem,"margin"+this))||0}});return size}$.fn["inner"+name]=function(size){if(size===undefined){return orig["inner"+name].call(this)}return this.each(function(){$(this).css(type,reduce(this,size)+"px")})};$.fn["outer"+name]=function(size,margin){if(typeof size!=="number"){return orig["outer"+name].call(this,size)}return this.each(function(){$(this).css(type,reduce(this,size,true,margin)+"px")})}})}if(!$.fn.addBack){$.fn.addBack=function(selector){return this.add(selector==null?this.prevObject:this.prevObject.filter(selector))}}if($("<a>").data("a-b","a").removeData("a-b").data("a-b")){$.fn.removeData=function(removeData){return function(key){if(arguments.length){return removeData.call(this,$.camelCase(key))}else{return removeData.call(this)}}}($.fn.removeData)}$.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());$.fn.extend({focus:function(orig){return function(delay,fn){return typeof delay==="number"?this.each(function(){var elem=this;setTimeout(function(){$(elem).focus();if(fn){fn.call(elem)}},delay)}):orig.apply(this,arguments)}}($.fn.focus),disableSelection:function(){var eventType="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(eventType+".ui-disableSelection",function(event){event.preventDefault()})}}(),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(zIndex){if(zIndex!==undefined){return this.css("zIndex",zIndex)}if(this.length){var elem=$(this[0]),position,value;while(elem.length&&elem[0]!==document){position=elem.css("position");if(position==="absolute"||position==="relative"||position==="fixed"){value=parseInt(elem.css("zIndex"),10);if(!isNaN(value)&&value!==0){return value}}elem=elem.parent()}}return 0}});$.ui.plugin={add:function(module,option,set){var i,proto=$.ui[module].prototype;for(i in set){proto.plugins[i]=proto.plugins[i]||[];proto.plugins[i].push([option,set[i]])}},call:function(instance,name,args,allowDisconnected){var i,set=instance.plugins[name];if(!set){return}if(!allowDisconnected&&(!instance.element[0].parentNode||instance.element[0].parentNode.nodeType===11)){return}for(i=0;i<set.length;i++){if(instance.options[set[i][0]]){set[i][1].apply(instance.element,args)}}}};var widget_uuid=0,widget_slice=Array.prototype.slice;$.cleanData=function(orig){return function(elems){var events,elem,i;for(i=0;(elem=elems[i])!=null;i++){try{events=$._data(elem,"events");if(events&&events.remove){$(elem).triggerHandler("remove")}}catch(e){}}orig(elems)}}($.cleanData);$.widget=function(name,base,prototype){var fullName,existingConstructor,constructor,basePrototype,proxiedPrototype={},namespace=name.split(".")[0];name=name.split(".")[1];fullName=namespace+"-"+name;if(!prototype){prototype=base;base=$.Widget}$.expr[":"][fullName.toLowerCase()]=function(elem){return!!$.data(elem,fullName)};$[namespace]=$[namespace]||{};existingConstructor=$[namespace][name];constructor=$[namespace][name]=function(options,element){if(!this._createWidget){return new constructor(options,element)}if(arguments.length){this._createWidget(options,element)}};$.extend(constructor,existingConstructor,{version:prototype.version,_proto:$.extend({},prototype),_childConstructors:[]});basePrototype=new base;basePrototype.options=$.widget.extend({},basePrototype.options);$.each(prototype,function(prop,value){if(!$.isFunction(value)){proxiedPrototype[prop]=value;return}proxiedPrototype[prop]=function(){var _super=function(){return base.prototype[prop].apply(this,arguments)},_superApply=function(args){return base.prototype[prop].apply(this,args)};return function(){var __super=this._super,__superApply=this._superApply,returnValue;this._super=_super;this._superApply=_superApply;returnValue=value.apply(this,arguments);this._super=__super;this._superApply=__superApply;return returnValue}}()});constructor.prototype=$.widget.extend(basePrototype,{widgetEventPrefix:existingConstructor?basePrototype.widgetEventPrefix||name:name},proxiedPrototype,{constructor:constructor,namespace:namespace,widgetName:name,widgetFullName:fullName});if(existingConstructor){$.each(existingConstructor._childConstructors,function(i,child){var childPrototype=child.prototype;$.widget(childPrototype.namespace+"."+childPrototype.widgetName,constructor,child._proto)});delete existingConstructor._childConstructors}else{base._childConstructors.push(constructor)}$.widget.bridge(name,constructor);return constructor};$.widget.extend=function(target){var input=widget_slice.call(arguments,1),inputIndex=0,inputLength=input.length,key,value;for(;inputIndex<inputLength;inputIndex++){for(key in input[inputIndex]){value=input[inputIndex][key];if(input[inputIndex].hasOwnProperty(key)&&value!==undefined){if($.isPlainObject(value)){target[key]=$.isPlainObject(target[key])?$.widget.extend({},target[key],value):$.widget.extend({},value)}else{target[key]=value}}}}return target};$.widget.bridge=function(name,object){var fullName=object.prototype.widgetFullName||name;$.fn[name]=function(options){var isMethodCall=typeof options==="string",args=widget_slice.call(arguments,1),returnValue=this;if(isMethodCall){this.each(function(){var methodValue,instance=$.data(this,fullName);if(options==="instance"){returnValue=instance;return false}if(!instance){return $.error("cannot call methods on "+name+" prior to initialization; "+"attempted to call method '"+options+"'")}if(!$.isFunction(instance[options])||options.charAt(0)==="_"){return $.error("no such method '"+options+"' for "+name+" widget instance")}methodValue=instance[options].apply(instance,args);if(methodValue!==instance&&methodValue!==undefined){returnValue=methodValue&&methodValue.jquery?returnValue.pushStack(methodValue.get()):methodValue;return false}})}else{if(args.length){options=$.widget.extend.apply(null,[options].concat(args))}this.each(function(){var instance=$.data(this,fullName);if(instance){instance.option(options||{});if(instance._init){instance._init()}}else{$.data(this,fullName,new object(options,this))}})}return returnValue}};$.Widget=function(){};$.Widget._childConstructors=[];$.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:false,create:null},_createWidget:function(options,element){element=$(element||this.defaultElement||this)[0];this.element=$(element);this.uuid=widget_uuid++;this.eventNamespace="."+this.widgetName+this.uuid;this.bindings=$();this.hoverable=$();this.focusable=$();if(element!==this){$.data(element,this.widgetFullName,this);this._on(true,this.element,{remove:function(event){if(event.target===element){this.destroy()}}});this.document=$(element.style?element.ownerDocument:element.document||element);this.window=$(this.document[0].defaultView||this.document[0].parentWindow)}this.options=$.widget.extend({},this.options,this._getCreateOptions(),options);this._create();this._trigger("create",null,this._getCreateEventData());this._init()},_getCreateOptions:$.noop,_getCreateEventData:$.noop,_create:$.noop,_init:$.noop,destroy:function(){this._destroy();this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData($.camelCase(this.widgetFullName));this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled");this.bindings.unbind(this.eventNamespace);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")},_destroy:$.noop,widget:function(){return this.element},option:function(key,value){var options=key,parts,curOption,i;if(arguments.length===0){return $.widget.extend({},this.options)}if(typeof key==="string"){options={};parts=key.split(".");key=parts.shift();if(parts.length){curOption=options[key]=$.widget.extend({},this.options[key]);for(i=0;i<parts.length-1;i++){curOption[parts[i]]=curOption[parts[i]]||{};curOption=curOption[parts[i]]}key=parts.pop();if(arguments.length===1){return curOption[key]===undefined?null:curOption[key]}curOption[key]=value}else{if(arguments.length===1){return this.options[key]===undefined?null:this.options[key]}options[key]=value}}this._setOptions(options);return this},_setOptions:function(options){var key;for(key in options){this._setOption(key,options[key])}return this},_setOption:function(key,value){this.options[key]=value;if(key==="disabled"){this.widget().toggleClass(this.widgetFullName+"-disabled",!!value);if(value){this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")}}return this},enable:function(){return this._setOptions({disabled:false})},disable:function(){return this._setOptions({disabled:true})},_on:function(suppressDisabledCheck,element,handlers){var delegateElement,instance=this;if(typeof suppressDisabledCheck!=="boolean"){handlers=element;element=suppressDisabledCheck;suppressDisabledCheck=false}if(!handlers){handlers=element;element=this.element;delegateElement=this.widget()}else{element=delegateElement=$(element);this.bindings=this.bindings.add(element)}$.each(handlers,function(event,handler){function handlerProxy(){if(!suppressDisabledCheck&&(instance.options.disabled===true||$(this).hasClass("ui-state-disabled"))){return}return(typeof handler==="string"?instance[handler]:handler).apply(instance,arguments)}if(typeof handler!=="string"){handlerProxy.guid=handler.guid=handler.guid||handlerProxy.guid||$.guid++}var match=event.match(/^([\w:-]*)\s*(.*)$/),eventName=match[1]+instance.eventNamespace,selector=match[2];if(selector){delegateElement.delegate(selector,eventName,handlerProxy)}else{element.bind(eventName,handlerProxy)}})},_off:function(element,eventName){eventName=(eventName||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;element.unbind(eventName).undelegate(eventName);this.bindings=$(this.bindings.not(element).get());this.focusable=$(this.focusable.not(element).get());this.hoverable=$(this.hoverable.not(element).get())},_delay:function(handler,delay){function handlerProxy(){return(typeof handler==="string"?instance[handler]:handler).apply(instance,arguments)}var instance=this;return setTimeout(handlerProxy,delay||0)},_hoverable:function(element){this.hoverable=this.hoverable.add(element);this._on(element,{mouseenter:function(event){$(event.currentTarget).addClass("ui-state-hover")},mouseleave:function(event){$(event.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(element){this.focusable=this.focusable.add(element);this._on(element,{focusin:function(event){$(event.currentTarget).addClass("ui-state-focus")},focusout:function(event){$(event.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(type,event,data){var prop,orig,callback=this.options[type];data=data||{};event=$.Event(event);event.type=(type===this.widgetEventPrefix?type:this.widgetEventPrefix+type).toLowerCase();event.target=this.element[0];orig=event.originalEvent;if(orig){for(prop in orig){if(!(prop in event)){event[prop]=orig[prop]}}}this.element.trigger(event,data);return!($.isFunction(callback)&&callback.apply(this.element[0],[event].concat(data))===false||event.isDefaultPrevented())}};$.each({show:"fadeIn",hide:"fadeOut"},function(method,defaultEffect){$.Widget.prototype["_"+method]=function(element,options,callback){if(typeof options==="string"){options={effect:options}}var hasOptions,effectName=!options?method:options===true||typeof options==="number"?defaultEffect:options.effect||defaultEffect;options=options||{};if(typeof options==="number"){options={duration:options}}hasOptions=!$.isEmptyObject(options);options.complete=callback;if(options.delay){element.delay(options.delay)}if(hasOptions&&$.effects&&$.effects.effect[effectName]){element[method](options)}else if(effectName!==method&&element[effectName]){element[effectName](options.duration,options.easing,callback)}else{element.queue(function(next){$(this)[method]();if(callback){callback.call(element[0])}next()})}}});var widget=$.widget;var mouseHandled=false;$(document).mouseup(function(){mouseHandled=false});var mouse=$.widget("ui.mouse",{version:"1.11.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var that=this;this.element.bind("mousedown."+this.widgetName,function(event){return that._mouseDown(event)}).bind("click."+this.widgetName,function(event){if(true===$.data(event.target,that.widgetName+".preventClickEvent")){$.removeData(event.target,that.widgetName+".preventClickEvent");event.stopImmediatePropagation();return false}});this.started=false},_mouseDestroy:function(){this.element.unbind("."+this.widgetName);if(this._mouseMoveDelegate){this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)}},_mouseDown:function(event){if(mouseHandled){return}this._mouseMoved=false;this._mouseStarted&&this._mouseUp(event);this._mouseDownEvent=event;var that=this,btnIsLeft=event.which===1,elIsCancel=typeof this.options.cancel==="string"&&event.target.nodeName?$(event.target).closest(this.options.cancel).length:false;if(!btnIsLeft||elIsCancel||!this._mouseCapture(event)){return true}this.mouseDelayMet=!this.options.delay;if(!this.mouseDelayMet){this._mouseDelayTimer=setTimeout(function(){that.mouseDelayMet=true},this.options.delay)}if(this._mouseDistanceMet(event)&&this._mouseDelayMet(event)){this._mouseStarted=this._mouseStart(event)!==false;if(!this._mouseStarted){event.preventDefault();return true}}if(true===$.data(event.target,this.widgetName+".preventClickEvent")){$.removeData(event.target,this.widgetName+".preventClickEvent")}this._mouseMoveDelegate=function(event){return that._mouseMove(event)};this._mouseUpDelegate=function(event){return that._mouseUp(event)};this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);event.preventDefault();mouseHandled=true;return true},_mouseMove:function(event){if(this._mouseMoved){if($.ui.ie&&(!document.documentMode||document.documentMode<9)&&!event.button){return this._mouseUp(event)}else if(!event.which){return this._mouseUp(event)}}if(event.which||event.button){this._mouseMoved=true}if(this._mouseStarted){this._mouseDrag(event);return event.preventDefault()}if(this._mouseDistanceMet(event)&&this._mouseDelayMet(event)){this._mouseStarted=this._mouseStart(this._mouseDownEvent,event)!==false;this._mouseStarted?this._mouseDrag(event):this._mouseUp(event)}return!this._mouseStarted},_mouseUp:function(event){this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted){this._mouseStarted=false;if(event.target===this._mouseDownEvent.target){$.data(event.target,this.widgetName+".preventClickEvent",true)}this._mouseStop(event)}mouseHandled=false;return false},_mouseDistanceMet:function(event){return Math.max(Math.abs(this._mouseDownEvent.pageX-event.pageX),Math.abs(this._mouseDownEvent.pageY-event.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return true}});(function(){$.ui=$.ui||{};var cachedScrollbarWidth,supportsOffsetFractions,max=Math.max,abs=Math.abs,round=Math.round,rhorizontal=/left|center|right/,rvertical=/top|center|bottom/,roffset=/[\+\-]\d+(\.[\d]+)?%?/,rposition=/^\w+/,rpercent=/%$/,_position=$.fn.position;function getOffsets(offsets,width,height){return[parseFloat(offsets[0])*(rpercent.test(offsets[0])?width/100:1),parseFloat(offsets[1])*(rpercent.test(offsets[1])?height/100:1)]}function parseCss(element,property){return parseInt($.css(element,property),10)||0}function getDimensions(elem){var raw=elem[0];if(raw.nodeType===9){return{width:elem.width(),height:elem.height(),offset:{top:0,left:0}}}if($.isWindow(raw)){return{width:elem.width(),height:elem.height(),offset:{top:elem.scrollTop(),left:elem.scrollLeft()}}}if(raw.preventDefault){return{width:0,height:0,offset:{top:raw.pageY,left:raw.pageX}}}return{width:elem.outerWidth(),height:elem.outerHeight(),offset:elem.offset()}}$.position={scrollbarWidth:function(){if(cachedScrollbarWidth!==undefined){return cachedScrollbarWidth}var w1,w2,div=$("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),innerDiv=div.children()[0];$("body").append(div);w1=innerDiv.offsetWidth;div.css("overflow","scroll");w2=innerDiv.offsetWidth;if(w1===w2){w2=div[0].clientWidth}div.remove();return cachedScrollbarWidth=w1-w2},getScrollInfo:function(within){var overflowX=within.isWindow||within.isDocument?"":within.element.css("overflow-x"),overflowY=within.isWindow||within.isDocument?"":within.element.css("overflow-y"),hasOverflowX=overflowX==="scroll"||overflowX==="auto"&&within.width<within.element[0].scrollWidth,hasOverflowY=overflowY==="scroll"||overflowY==="auto"&&within.height<within.element[0].scrollHeight;return{width:hasOverflowY?$.position.scrollbarWidth():0,height:hasOverflowX?$.position.scrollbarWidth():0}},getWithinInfo:function(element){var withinElement=$(element||window),isWindow=$.isWindow(withinElement[0]),isDocument=!!withinElement[0]&&withinElement[0].nodeType===9;return{element:withinElement,isWindow:isWindow,isDocument:isDocument,offset:withinElement.offset()||{left:0,top:0},scrollLeft:withinElement.scrollLeft(),scrollTop:withinElement.scrollTop(),width:isWindow||isDocument?withinElement.width():withinElement.outerWidth(),height:isWindow||isDocument?withinElement.height():withinElement.outerHeight()}}};$.fn.position=function(options){if(!options||!options.of){return _position.apply(this,arguments)}options=$.extend({},options);var atOffset,targetWidth,targetHeight,targetOffset,basePosition,dimensions,target=$(options.of),within=$.position.getWithinInfo(options.within),scrollInfo=$.position.getScrollInfo(within),collision=(options.collision||"flip").split(" "),offsets={};dimensions=getDimensions(target);if(target[0].preventDefault){options.at="left top"}targetWidth=dimensions.width;targetHeight=dimensions.height;targetOffset=dimensions.offset;basePosition=$.extend({},targetOffset);$.each(["my","at"],function(){var pos=(options[this]||"").split(" "),horizontalOffset,verticalOffset;if(pos.length===1){pos=rhorizontal.test(pos[0])?pos.concat(["center"]):rvertical.test(pos[0])?["center"].concat(pos):["center","center"]}pos[0]=rhorizontal.test(pos[0])?pos[0]:"center";pos[1]=rvertical.test(pos[1])?pos[1]:"center";horizontalOffset=roffset.exec(pos[0]);verticalOffset=roffset.exec(pos[1]);offsets[this]=[horizontalOffset?horizontalOffset[0]:0,verticalOffset?verticalOffset[0]:0];options[this]=[rposition.exec(pos[0])[0],rposition.exec(pos[1])[0]]});if(collision.length===1){collision[1]=collision[0]}if(options.at[0]==="right"){basePosition.left+=targetWidth}else if(options.at[0]==="center"){basePosition.left+=targetWidth/2}if(options.at[1]==="bottom"){basePosition.top+=targetHeight}else if(options.at[1]==="center"){basePosition.top+=targetHeight/2}atOffset=getOffsets(offsets.at,targetWidth,targetHeight);basePosition.left+=atOffset[0];basePosition.top+=atOffset[1];return this.each(function(){var collisionPosition,using,elem=$(this),elemWidth=elem.outerWidth(),elemHeight=elem.outerHeight(),marginLeft=parseCss(this,"marginLeft"),marginTop=parseCss(this,"marginTop"),collisionWidth=elemWidth+marginLeft+parseCss(this,"marginRight")+scrollInfo.width,collisionHeight=elemHeight+marginTop+parseCss(this,"marginBottom")+scrollInfo.height,position=$.extend({},basePosition),myOffset=getOffsets(offsets.my,elem.outerWidth(),elem.outerHeight());if(options.my[0]==="right"){position.left-=elemWidth}else if(options.my[0]==="center"){position.left-=elemWidth/2}if(options.my[1]==="bottom"){position.top-=elemHeight}else if(options.my[1]==="center"){position.top-=elemHeight/2}position.left+=myOffset[0];position.top+=myOffset[1];if(!supportsOffsetFractions){position.left=round(position.left);position.top=round(position.top)}collisionPosition={marginLeft:marginLeft,marginTop:marginTop};$.each(["left","top"],function(i,dir){if($.ui.position[collision[i]]){$.ui.position[collision[i]][dir](position,{targetWidth:targetWidth,targetHeight:targetHeight,elemWidth:elemWidth,elemHeight:elemHeight,collisionPosition:collisionPosition,collisionWidth:collisionWidth,collisionHeight:collisionHeight,offset:[atOffset[0]+myOffset[0],atOffset[1]+myOffset[1]],my:options.my,at:options.at,within:within,elem:elem})}});if(options.using){using=function(props){var left=targetOffset.left-position.left,right=left+targetWidth-elemWidth,top=targetOffset.top-position.top,bottom=top+targetHeight-elemHeight,feedback={target:{element:target,left:targetOffset.left,top:targetOffset.top,width:targetWidth,height:targetHeight},element:{element:elem,left:position.left,top:position.top,width:elemWidth,height:elemHeight},horizontal:right<0?"left":left>0?"right":"center",vertical:bottom<0?"top":top>0?"bottom":"middle"};if(targetWidth<elemWidth&&abs(left+right)<targetWidth){feedback.horizontal="center"}if(targetHeight<elemHeight&&abs(top+bottom)<targetHeight){feedback.vertical="middle"}if(max(abs(left),abs(right))>max(abs(top),abs(bottom))){feedback.important="horizontal"}else{feedback.important="vertical"}options.using.call(this,props,feedback)}}elem.offset($.extend(position,{using:using}))})};$.ui.position={fit:{left:function(position,data){var within=data.within,withinOffset=within.isWindow?within.scrollLeft:within.offset.left,outerWidth=within.width,collisionPosLeft=position.left-data.collisionPosition.marginLeft,overLeft=withinOffset-collisionPosLeft,overRight=collisionPosLeft+data.collisionWidth-outerWidth-withinOffset,newOverRight;if(data.collisionWidth>outerWidth){if(overLeft>0&&overRight<=0){newOverRight=position.left+overLeft+data.collisionWidth-outerWidth-withinOffset;position.left+=overLeft-newOverRight}else if(overRight>0&&overLeft<=0){position.left=withinOffset}else{if(overLeft>overRight){position.left=withinOffset+outerWidth-data.collisionWidth}else{position.left=withinOffset}}}else if(overLeft>0){position.left+=overLeft}else if(overRight>0){position.left-=overRight}else{position.left=max(position.left-collisionPosLeft,position.left)}},top:function(position,data){var within=data.within,withinOffset=within.isWindow?within.scrollTop:within.offset.top,outerHeight=data.within.height,collisionPosTop=position.top-data.collisionPosition.marginTop,overTop=withinOffset-collisionPosTop,overBottom=collisionPosTop+data.collisionHeight-outerHeight-withinOffset,newOverBottom;if(data.collisionHeight>outerHeight){if(overTop>0&&overBottom<=0){newOverBottom=position.top+overTop+data.collisionHeight-outerHeight-withinOffset;position.top+=overTop-newOverBottom}else if(overBottom>0&&overTop<=0){position.top=withinOffset}else{if(overTop>overBottom){position.top=withinOffset+outerHeight-data.collisionHeight}else{position.top=withinOffset}}}else if(overTop>0){position.top+=overTop}else if(overBottom>0){position.top-=overBottom}else{position.top=max(position.top-collisionPosTop,position.top)}}},flip:{left:function(position,data){var within=data.within,withinOffset=within.offset.left+within.scrollLeft,outerWidth=within.width,offsetLeft=within.isWindow?within.scrollLeft:within.offset.left,collisionPosLeft=position.left-data.collisionPosition.marginLeft,overLeft=collisionPosLeft-offsetLeft,overRight=collisionPosLeft+data.collisionWidth-outerWidth-offsetLeft,myOffset=data.my[0]==="left"?-data.elemWidth:data.my[0]==="right"?data.elemWidth:0,atOffset=data.at[0]==="left"?data.targetWidth:data.at[0]==="right"?-data.targetWidth:0,offset=-2*data.offset[0],newOverRight,newOverLeft;if(overLeft<0){newOverRight=position.left+myOffset+atOffset+offset+data.collisionWidth-outerWidth-withinOffset;if(newOverRight<0||newOverRight<abs(overLeft)){position.left+=myOffset+atOffset+offset}}else if(overRight>0){newOverLeft=position.left-data.collisionPosition.marginLeft+myOffset+atOffset+offset-offsetLeft;if(newOverLeft>0||abs(newOverLeft)<overRight){position.left+=myOffset+atOffset+offset}}},top:function(position,data){var within=data.within,withinOffset=within.offset.top+within.scrollTop,outerHeight=within.height,offsetTop=within.isWindow?within.scrollTop:within.offset.top,collisionPosTop=position.top-data.collisionPosition.marginTop,overTop=collisionPosTop-offsetTop,overBottom=collisionPosTop+data.collisionHeight-outerHeight-offsetTop,top=data.my[1]==="top",myOffset=top?-data.elemHeight:data.my[1]==="bottom"?data.elemHeight:0,atOffset=data.at[1]==="top"?data.targetHeight:data.at[1]==="bottom"?-data.targetHeight:0,offset=-2*data.offset[1],newOverTop,newOverBottom;if(overTop<0){newOverBottom=position.top+myOffset+atOffset+offset+data.collisionHeight-outerHeight-withinOffset;if(newOverBottom<0||newOverBottom<abs(overTop)){position.top+=myOffset+atOffset+offset}}else if(overBottom>0){newOverTop=position.top-data.collisionPosition.marginTop+myOffset+atOffset+offset-offsetTop;if(newOverTop>0||abs(newOverTop)<overBottom){position.top+=myOffset+atOffset+offset}}}},flipfit:{left:function(){$.ui.position.flip.left.apply(this,arguments);$.ui.position.fit.left.apply(this,arguments)},top:function(){$.ui.position.flip.top.apply(this,arguments);$.ui.position.fit.top.apply(this,arguments)}}};(function(){var testElement,testElementParent,testElementStyle,offsetLeft,i,body=document.getElementsByTagName("body")[0],div=document.createElement("div");testElement=document.createElement(body?"div":"body");testElementStyle={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"};if(body){$.extend(testElementStyle,{position:"absolute",left:"-1000px",top:"-1000px"})}for(i in testElementStyle){testElement.style[i]=testElementStyle[i]}testElement.appendChild(div);testElementParent=body||document.documentElement;testElementParent.insertBefore(testElement,testElementParent.firstChild);div.style.cssText="position: absolute; left: 10.7432222px;";offsetLeft=$(div).offset().left;supportsOffsetFractions=offsetLeft>10&&offsetLeft<11;testElement.innerHTML="";testElementParent.removeChild(testElement)})()})();var position=$.ui.position;$.extend($.ui,{datepicker:{version:"1.11.4"}});var datepicker_instActive;function datepicker_getZindex(elem){var position,value;while(elem.length&&elem[0]!==document){position=elem.css("position");if(position==="absolute"||position==="relative"||position==="fixed"){value=parseInt(elem.css("zIndex"),10);if(!isNaN(value)&&value!==0){return value}}elem=elem.parent()}return 0}function Datepicker(){this._curInst=null;this._keyEvent=false;this._disabledInputs=[];this._datepickerShowing=false;this._inDialog=false;this._mainDivId="ui-datepicker-div";this._inlineClass="ui-datepicker-inline";this._appendClass="ui-datepicker-append";this._triggerClass="ui-datepicker-trigger";this._dialogClass="ui-datepicker-dialog";this._disableClass="ui-datepicker-disabled";this._unselectableClass="ui-datepicker-unselectable";this._currentClass="ui-datepicker-current-day";this._dayOverClass="ui-datepicker-days-cell-over";this.regional=[];this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:false,showMonthAfterYear:false,yearSuffix:""};this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:false,hideIfNoPrevNext:false,navigationAsDateFormat:false,gotoCurrent:false,changeMonth:false,changeYear:false,yearRange:"c-10:c+10",showOtherMonths:false,selectOtherMonths:false,showWeek:false,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:true,showButtonPanel:false,autoSize:false,disabled:false};$.extend(this._defaults,this.regional[""]);this.regional.en=$.extend(true,{},this.regional[""]);this.regional["en-US"]=$.extend(true,{},this.regional.en);this.dpDiv=datepicker_bindHover($("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}$.extend(Datepicker.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(settings){datepicker_extendRemove(this._defaults,settings||{});return this},_attachDatepicker:function(target,settings){var nodeName,inline,inst;nodeName=target.nodeName.toLowerCase();inline=nodeName==="div"||nodeName==="span";if(!target.id){this.uuid+=1;target.id="dp"+this.uuid}inst=this._newInst($(target),inline);inst.settings=$.extend({},settings||{});if(nodeName==="input"){this._connectDatepicker(target,inst)}else if(inline){this._inlineDatepicker(target,inst)}},_newInst:function(target,inline){var id=target[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");
return{id:id,input:target,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:inline,dpDiv:!inline?this.dpDiv:datepicker_bindHover($("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}},_connectDatepicker:function(target,inst){var input=$(target);inst.append=$([]);inst.trigger=$([]);if(input.hasClass(this.markerClassName)){return}this._attachments(input,inst);input.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp);this._autoSize(inst);$.data(target,"datepicker",inst);if(inst.settings.disabled){this._disableDatepicker(target)}},_attachments:function(input,inst){var showOn,buttonText,buttonImage,appendText=this._get(inst,"appendText"),isRTL=this._get(inst,"isRTL");if(inst.append){inst.append.remove()}if(appendText){inst.append=$("<span class='"+this._appendClass+"'>"+appendText+"</span>");input[isRTL?"before":"after"](inst.append)}input.unbind("focus",this._showDatepicker);if(inst.trigger){inst.trigger.remove()}showOn=this._get(inst,"showOn");if(showOn==="focus"||showOn==="both"){input.focus(this._showDatepicker)}if(showOn==="button"||showOn==="both"){buttonText=this._get(inst,"buttonText");buttonImage=this._get(inst,"buttonImage");inst.trigger=$(this._get(inst,"buttonImageOnly")?$("<img/>").addClass(this._triggerClass).attr({src:buttonImage,alt:buttonText,title:buttonText}):$("<button type='button'></button>").addClass(this._triggerClass).html(!buttonImage?buttonText:$("<img/>").attr({src:buttonImage,alt:buttonText,title:buttonText})));input[isRTL?"before":"after"](inst.trigger);inst.trigger.click(function(){if($.datepicker._datepickerShowing&&$.datepicker._lastInput===input[0]){$.datepicker._hideDatepicker()}else if($.datepicker._datepickerShowing&&$.datepicker._lastInput!==input[0]){$.datepicker._hideDatepicker();$.datepicker._showDatepicker(input[0])}else{$.datepicker._showDatepicker(input[0])}return false})}},_autoSize:function(inst){if(this._get(inst,"autoSize")&&!inst.inline){var findMax,max,maxI,i,date=new Date(2009,12-1,20),dateFormat=this._get(inst,"dateFormat");if(dateFormat.match(/[DM]/)){findMax=function(names){max=0;maxI=0;for(i=0;i<names.length;i++){if(names[i].length>max){max=names[i].length;maxI=i}}return maxI};date.setMonth(findMax(this._get(inst,dateFormat.match(/MM/)?"monthNames":"monthNamesShort")));date.setDate(findMax(this._get(inst,dateFormat.match(/DD/)?"dayNames":"dayNamesShort"))+20-date.getDay())}inst.input.attr("size",this._formatDate(inst,date).length)}},_inlineDatepicker:function(target,inst){var divSpan=$(target);if(divSpan.hasClass(this.markerClassName)){return}divSpan.addClass(this.markerClassName).append(inst.dpDiv);$.data(target,"datepicker",inst);this._setDate(inst,this._getDefaultDate(inst),true);this._updateDatepicker(inst);this._updateAlternate(inst);if(inst.settings.disabled){this._disableDatepicker(target)}inst.dpDiv.css("display","block")},_dialogDatepicker:function(input,date,onSelect,settings,pos){var id,browserWidth,browserHeight,scrollX,scrollY,inst=this._dialogInst;if(!inst){this.uuid+=1;id="dp"+this.uuid;this._dialogInput=$("<input type='text' id='"+id+"' style='position: absolute; top: -100px; width: 0px;'/>");this._dialogInput.keydown(this._doKeyDown);$("body").append(this._dialogInput);inst=this._dialogInst=this._newInst(this._dialogInput,false);inst.settings={};$.data(this._dialogInput[0],"datepicker",inst)}datepicker_extendRemove(inst.settings,settings||{});date=date&&date.constructor===Date?this._formatDate(inst,date):date;this._dialogInput.val(date);this._pos=pos?pos.length?pos:[pos.pageX,pos.pageY]:null;if(!this._pos){browserWidth=document.documentElement.clientWidth;browserHeight=document.documentElement.clientHeight;scrollX=document.documentElement.scrollLeft||document.body.scrollLeft;scrollY=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[browserWidth/2-100+scrollX,browserHeight/2-150+scrollY]}this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px");inst.settings.onSelect=onSelect;this._inDialog=true;this.dpDiv.addClass(this._dialogClass);this._showDatepicker(this._dialogInput[0]);if($.blockUI){$.blockUI(this.dpDiv)}$.data(this._dialogInput[0],"datepicker",inst);return this},_destroyDatepicker:function(target){var nodeName,$target=$(target),inst=$.data(target,"datepicker");if(!$target.hasClass(this.markerClassName)){return}nodeName=target.nodeName.toLowerCase();$.removeData(target,"datepicker");if(nodeName==="input"){inst.append.remove();inst.trigger.remove();$target.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)}else if(nodeName==="div"||nodeName==="span"){$target.removeClass(this.markerClassName).empty()}if(datepicker_instActive===inst){datepicker_instActive=null}},_enableDatepicker:function(target){var nodeName,inline,$target=$(target),inst=$.data(target,"datepicker");if(!$target.hasClass(this.markerClassName)){return}nodeName=target.nodeName.toLowerCase();if(nodeName==="input"){target.disabled=false;inst.trigger.filter("button").each(function(){this.disabled=false}).end().filter("img").css({opacity:"1.0",cursor:""})}else if(nodeName==="div"||nodeName==="span"){inline=$target.children("."+this._inlineClass);inline.children().removeClass("ui-state-disabled");inline.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",false)}this._disabledInputs=$.map(this._disabledInputs,function(value){return value===target?null:value})},_disableDatepicker:function(target){var nodeName,inline,$target=$(target),inst=$.data(target,"datepicker");if(!$target.hasClass(this.markerClassName)){return}nodeName=target.nodeName.toLowerCase();if(nodeName==="input"){target.disabled=true;inst.trigger.filter("button").each(function(){this.disabled=true}).end().filter("img").css({opacity:"0.5",cursor:"default"})}else if(nodeName==="div"||nodeName==="span"){inline=$target.children("."+this._inlineClass);inline.children().addClass("ui-state-disabled");inline.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",true)}this._disabledInputs=$.map(this._disabledInputs,function(value){return value===target?null:value});this._disabledInputs[this._disabledInputs.length]=target},_isDisabledDatepicker:function(target){if(!target){return false}for(var i=0;i<this._disabledInputs.length;i++){if(this._disabledInputs[i]===target){return true}}return false},_getInst:function(target){try{return $.data(target,"datepicker")}catch(err){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(target,name,value){var settings,date,minDate,maxDate,inst=this._getInst(target);if(arguments.length===2&&typeof name==="string"){return name==="defaults"?$.extend({},$.datepicker._defaults):inst?name==="all"?$.extend({},inst.settings):this._get(inst,name):null}settings=name||{};if(typeof name==="string"){settings={};settings[name]=value}if(inst){if(this._curInst===inst){this._hideDatepicker()}date=this._getDateDatepicker(target,true);minDate=this._getMinMaxDate(inst,"min");maxDate=this._getMinMaxDate(inst,"max");datepicker_extendRemove(inst.settings,settings);if(minDate!==null&&settings.dateFormat!==undefined&&settings.minDate===undefined){inst.settings.minDate=this._formatDate(inst,minDate)}if(maxDate!==null&&settings.dateFormat!==undefined&&settings.maxDate===undefined){inst.settings.maxDate=this._formatDate(inst,maxDate)}if("disabled"in settings){if(settings.disabled){this._disableDatepicker(target)}else{this._enableDatepicker(target)}}this._attachments($(target),inst);this._autoSize(inst);this._setDate(inst,date);this._updateAlternate(inst);this._updateDatepicker(inst)}},_changeDatepicker:function(target,name,value){this._optionDatepicker(target,name,value)},_refreshDatepicker:function(target){var inst=this._getInst(target);if(inst){this._updateDatepicker(inst)}},_setDateDatepicker:function(target,date){var inst=this._getInst(target);if(inst){this._setDate(inst,date);this._updateDatepicker(inst);this._updateAlternate(inst)}},_getDateDatepicker:function(target,noDefault){var inst=this._getInst(target);if(inst&&!inst.inline){this._setDateFromField(inst,noDefault)}return inst?this._getDate(inst):null},_doKeyDown:function(event){var onSelect,dateStr,sel,inst=$.datepicker._getInst(event.target),handled=true,isRTL=inst.dpDiv.is(".ui-datepicker-rtl");inst._keyEvent=true;if($.datepicker._datepickerShowing){switch(event.keyCode){case 9:$.datepicker._hideDatepicker();handled=false;break;case 13:sel=$("td."+$.datepicker._dayOverClass+":not(."+$.datepicker._currentClass+")",inst.dpDiv);if(sel[0]){$.datepicker._selectDay(event.target,inst.selectedMonth,inst.selectedYear,sel[0])}onSelect=$.datepicker._get(inst,"onSelect");if(onSelect){dateStr=$.datepicker._formatDate(inst);onSelect.apply(inst.input?inst.input[0]:null,[dateStr,inst])}else{$.datepicker._hideDatepicker()}return false;case 27:$.datepicker._hideDatepicker();break;case 33:$.datepicker._adjustDate(event.target,event.ctrlKey?-$.datepicker._get(inst,"stepBigMonths"):-$.datepicker._get(inst,"stepMonths"),"M");break;case 34:$.datepicker._adjustDate(event.target,event.ctrlKey?+$.datepicker._get(inst,"stepBigMonths"):+$.datepicker._get(inst,"stepMonths"),"M");break;case 35:if(event.ctrlKey||event.metaKey){$.datepicker._clearDate(event.target)}handled=event.ctrlKey||event.metaKey;break;case 36:if(event.ctrlKey||event.metaKey){$.datepicker._gotoToday(event.target)}handled=event.ctrlKey||event.metaKey;break;case 37:if(event.ctrlKey||event.metaKey){$.datepicker._adjustDate(event.target,isRTL?+1:-1,"D")}handled=event.ctrlKey||event.metaKey;if(event.originalEvent.altKey){$.datepicker._adjustDate(event.target,event.ctrlKey?-$.datepicker._get(inst,"stepBigMonths"):-$.datepicker._get(inst,"stepMonths"),"M")}break;case 38:if(event.ctrlKey||event.metaKey){$.datepicker._adjustDate(event.target,-7,"D")}handled=event.ctrlKey||event.metaKey;break;case 39:if(event.ctrlKey||event.metaKey){$.datepicker._adjustDate(event.target,isRTL?-1:+1,"D")}handled=event.ctrlKey||event.metaKey;if(event.originalEvent.altKey){$.datepicker._adjustDate(event.target,event.ctrlKey?+$.datepicker._get(inst,"stepBigMonths"):+$.datepicker._get(inst,"stepMonths"),"M")}break;case 40:if(event.ctrlKey||event.metaKey){$.datepicker._adjustDate(event.target,+7,"D")}handled=event.ctrlKey||event.metaKey;break;default:handled=false}}else if(event.keyCode===36&&event.ctrlKey){$.datepicker._showDatepicker(this)}else{handled=false}if(handled){event.preventDefault();event.stopPropagation()}},_doKeyPress:function(event){var chars,chr,inst=$.datepicker._getInst(event.target);if($.datepicker._get(inst,"constrainInput")){chars=$.datepicker._possibleChars($.datepicker._get(inst,"dateFormat"));chr=String.fromCharCode(event.charCode==null?event.keyCode:event.charCode);return event.ctrlKey||event.metaKey||(chr<" "||!chars||chars.indexOf(chr)>-1)}},_doKeyUp:function(event){var date,inst=$.datepicker._getInst(event.target);if(inst.input.val()!==inst.lastVal){try{date=$.datepicker.parseDate($.datepicker._get(inst,"dateFormat"),inst.input?inst.input.val():null,$.datepicker._getFormatConfig(inst));if(date){$.datepicker._setDateFromField(inst);$.datepicker._updateAlternate(inst);$.datepicker._updateDatepicker(inst)}}catch(err){}}return true},_showDatepicker:function(input){input=input.target||input;if(input.nodeName.toLowerCase()!=="input"){input=$("input",input.parentNode)[0]}if($.datepicker._isDisabledDatepicker(input)||$.datepicker._lastInput===input){return}var inst,beforeShow,beforeShowSettings,isFixed,offset,showAnim,duration;inst=$.datepicker._getInst(input);if($.datepicker._curInst&&$.datepicker._curInst!==inst){$.datepicker._curInst.dpDiv.stop(true,true);if(inst&&$.datepicker._datepickerShowing){$.datepicker._hideDatepicker($.datepicker._curInst.input[0])}}beforeShow=$.datepicker._get(inst,"beforeShow");beforeShowSettings=beforeShow?beforeShow.apply(input,[input,inst]):{};if(beforeShowSettings===false){return}datepicker_extendRemove(inst.settings,beforeShowSettings);inst.lastVal=null;$.datepicker._lastInput=input;$.datepicker._setDateFromField(inst);if($.datepicker._inDialog){input.value=""}if(!$.datepicker._pos){$.datepicker._pos=$.datepicker._findPos(input);$.datepicker._pos[1]+=input.offsetHeight}isFixed=false;$(input).parents().each(function(){isFixed|=$(this).css("position")==="fixed";return!isFixed});offset={left:$.datepicker._pos[0],top:$.datepicker._pos[1]};$.datepicker._pos=null;inst.dpDiv.empty();inst.dpDiv.css({position:"absolute",display:"block",top:"-1000px"});$.datepicker._updateDatepicker(inst);offset=$.datepicker._checkOffset(inst,offset,isFixed);inst.dpDiv.css({position:$.datepicker._inDialog&&$.blockUI?"static":isFixed?"fixed":"absolute",display:"none",left:offset.left+"px",top:offset.top+"px"});if(!inst.inline){showAnim=$.datepicker._get(inst,"showAnim");duration=$.datepicker._get(inst,"duration");inst.dpDiv.css("z-index",datepicker_getZindex($(input))+1);$.datepicker._datepickerShowing=true;if($.effects&&$.effects.effect[showAnim]){inst.dpDiv.show(showAnim,$.datepicker._get(inst,"showOptions"),duration)}else{inst.dpDiv[showAnim||"show"](showAnim?duration:null)}if($.datepicker._shouldFocusInput(inst)){inst.input.focus()}$.datepicker._curInst=inst}},_updateDatepicker:function(inst){this.maxRows=4;datepicker_instActive=inst;inst.dpDiv.empty().append(this._generateHTML(inst));this._attachHandlers(inst);var origyearshtml,numMonths=this._getNumberOfMonths(inst),cols=numMonths[1],width=17,activeCell=inst.dpDiv.find("."+this._dayOverClass+" a");if(activeCell.length>0){datepicker_handleMouseover.apply(activeCell.get(0))}inst.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width("");if(cols>1){inst.dpDiv.addClass("ui-datepicker-multi-"+cols).css("width",width*cols+"em")}inst.dpDiv[(numMonths[0]!==1||numMonths[1]!==1?"add":"remove")+"Class"]("ui-datepicker-multi");inst.dpDiv[(this._get(inst,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl");if(inst===$.datepicker._curInst&&$.datepicker._datepickerShowing&&$.datepicker._shouldFocusInput(inst)){inst.input.focus()}if(inst.yearshtml){origyearshtml=inst.yearshtml;setTimeout(function(){if(origyearshtml===inst.yearshtml&&inst.yearshtml){inst.dpDiv.find("select.ui-datepicker-year:first").replaceWith(inst.yearshtml)}origyearshtml=inst.yearshtml=null},0)}},_shouldFocusInput:function(inst){return inst.input&&inst.input.is(":visible")&&!inst.input.is(":disabled")&&!inst.input.is(":focus")},_checkOffset:function(inst,offset,isFixed){var dpWidth=inst.dpDiv.outerWidth(),dpHeight=inst.dpDiv.outerHeight(),inputWidth=inst.input?inst.input.outerWidth():0,inputHeight=inst.input?inst.input.outerHeight():0,viewWidth=document.documentElement.clientWidth+(isFixed?0:$(document).scrollLeft()),viewHeight=document.documentElement.clientHeight+(isFixed?0:$(document).scrollTop());offset.left-=this._get(inst,"isRTL")?dpWidth-inputWidth:0;offset.left-=isFixed&&offset.left===inst.input.offset().left?$(document).scrollLeft():0;offset.top-=isFixed&&offset.top===inst.input.offset().top+inputHeight?$(document).scrollTop():0;offset.left-=Math.min(offset.left,offset.left+dpWidth>viewWidth&&viewWidth>dpWidth?Math.abs(offset.left+dpWidth-viewWidth):0);offset.top-=Math.min(offset.top,offset.top+dpHeight>viewHeight&&viewHeight>dpHeight?Math.abs(dpHeight+inputHeight):0);return offset},_findPos:function(obj){var position,inst=this._getInst(obj),isRTL=this._get(inst,"isRTL");while(obj&&(obj.type==="hidden"||obj.nodeType!==1||$.expr.filters.hidden(obj))){obj=obj[isRTL?"previousSibling":"nextSibling"]}position=$(obj).offset();return[position.left,position.top]},_hideDatepicker:function(input){var showAnim,duration,postProcess,onClose,inst=this._curInst;if(!inst||input&&inst!==$.data(input,"datepicker")){return}if(this._datepickerShowing){showAnim=this._get(inst,"showAnim");duration=this._get(inst,"duration");postProcess=function(){$.datepicker._tidyDialog(inst)};if($.effects&&($.effects.effect[showAnim]||$.effects[showAnim])){inst.dpDiv.hide(showAnim,$.datepicker._get(inst,"showOptions"),duration,postProcess)}else{inst.dpDiv[showAnim==="slideDown"?"slideUp":showAnim==="fadeIn"?"fadeOut":"hide"](showAnim?duration:null,postProcess)}if(!showAnim){postProcess()}this._datepickerShowing=false;onClose=this._get(inst,"onClose");if(onClose){onClose.apply(inst.input?inst.input[0]:null,[inst.input?inst.input.val():"",inst])}this._lastInput=null;if(this._inDialog){this._dialogInput.css({position:"absolute",left:"0",top:"-100px"});if($.blockUI){$.unblockUI();$("body").append(this.dpDiv)}}this._inDialog=false}},_tidyDialog:function(inst){inst.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(event){if(!$.datepicker._curInst){return}var $target=$(event.target),inst=$.datepicker._getInst($target[0]);if($target[0].id!==$.datepicker._mainDivId&&$target.parents("#"+$.datepicker._mainDivId).length===0&&!$target.hasClass($.datepicker.markerClassName)&&!$target.closest("."+$.datepicker._triggerClass).length&&$.datepicker._datepickerShowing&&!($.datepicker._inDialog&&$.blockUI)||$target.hasClass($.datepicker.markerClassName)&&$.datepicker._curInst!==inst){$.datepicker._hideDatepicker()}},_adjustDate:function(id,offset,period){var target=$(id),inst=this._getInst(target[0]);if(this._isDisabledDatepicker(target[0])){return}this._adjustInstDate(inst,offset+(period==="M"?this._get(inst,"showCurrentAtPos"):0),period);this._updateDatepicker(inst)},_gotoToday:function(id){var date,target=$(id),inst=this._getInst(target[0]);if(this._get(inst,"gotoCurrent")&&inst.currentDay){inst.selectedDay=inst.currentDay;inst.drawMonth=inst.selectedMonth=inst.currentMonth;inst.drawYear=inst.selectedYear=inst.currentYear}else{date=new Date;inst.selectedDay=date.getDate();inst.drawMonth=inst.selectedMonth=date.getMonth();inst.drawYear=inst.selectedYear=date.getFullYear()}this._notifyChange(inst);this._adjustDate(target)},_selectMonthYear:function(id,select,period){var target=$(id),inst=this._getInst(target[0]);inst["selected"+(period==="M"?"Month":"Year")]=inst["draw"+(period==="M"?"Month":"Year")]=parseInt(select.options[select.selectedIndex].value,10);this._notifyChange(inst);this._adjustDate(target)},_selectDay:function(id,month,year,td){var inst,target=$(id);if($(td).hasClass(this._unselectableClass)||this._isDisabledDatepicker(target[0])){return}inst=this._getInst(target[0]);inst.selectedDay=inst.currentDay=$("a",td).html();inst.selectedMonth=inst.currentMonth=month;inst.selectedYear=inst.currentYear=year;this._selectDate(id,this._formatDate(inst,inst.currentDay,inst.currentMonth,inst.currentYear))},_clearDate:function(id){var target=$(id);this._selectDate(target,"")},_selectDate:function(id,dateStr){var onSelect,target=$(id),inst=this._getInst(target[0]);dateStr=dateStr!=null?dateStr:this._formatDate(inst);if(inst.input){inst.input.val(dateStr)}this._updateAlternate(inst);onSelect=this._get(inst,"onSelect");if(onSelect){onSelect.apply(inst.input?inst.input[0]:null,[dateStr,inst])}else if(inst.input){inst.input.trigger("change")}if(inst.inline){this._updateDatepicker(inst)}else{this._hideDatepicker();this._lastInput=inst.input[0];if(typeof inst.input[0]!=="object"){inst.input.focus()}this._lastInput=null}},_updateAlternate:function(inst){var altFormat,date,dateStr,altField=this._get(inst,"altField");if(altField){altFormat=this._get(inst,"altFormat")||this._get(inst,"dateFormat");date=this._getDate(inst);dateStr=this.formatDate(altFormat,date,this._getFormatConfig(inst));$(altField).each(function(){$(this).val(dateStr)})}},noWeekends:function(date){var day=date.getDay();return[day>0&&day<6,""]},iso8601Week:function(date){var time,checkDate=new Date(date.getTime());checkDate.setDate(checkDate.getDate()+4-(checkDate.getDay()||7));time=checkDate.getTime();checkDate.setMonth(0);checkDate.setDate(1);return Math.floor(Math.round((time-checkDate)/864e5)/7)+1},parseDate:function(format,value,settings){if(format==null||value==null){throw"Invalid arguments"}value=typeof value==="object"?value.toString():value+"";if(value===""){return null}var iFormat,dim,extra,iValue=0,shortYearCutoffTemp=(settings?settings.shortYearCutoff:null)||this._defaults.shortYearCutoff,shortYearCutoff=typeof shortYearCutoffTemp!=="string"?shortYearCutoffTemp:(new Date).getFullYear()%100+parseInt(shortYearCutoffTemp,10),dayNamesShort=(settings?settings.dayNamesShort:null)||this._defaults.dayNamesShort,dayNames=(settings?settings.dayNames:null)||this._defaults.dayNames,monthNamesShort=(settings?settings.monthNamesShort:null)||this._defaults.monthNamesShort,monthNames=(settings?settings.monthNames:null)||this._defaults.monthNames,year=-1,month=-1,day=-1,doy=-1,literal=false,date,lookAhead=function(match){var matches=iFormat+1<format.length&&format.charAt(iFormat+1)===match;if(matches){iFormat++}return matches},getNumber=function(match){var isDoubled=lookAhead(match),size=match==="@"?14:match==="!"?20:match==="y"&&isDoubled?4:match==="o"?3:2,minSize=match==="y"?size:1,digits=new RegExp("^\\d{"+minSize+","+size+"}"),num=value.substring(iValue).match(digits);if(!num){throw"Missing number at position "+iValue}iValue+=num[0].length;return parseInt(num[0],10)},getName=function(match,shortNames,longNames){var index=-1,names=$.map(lookAhead(match)?longNames:shortNames,function(v,k){return[[k,v]]}).sort(function(a,b){return-(a[1].length-b[1].length)});$.each(names,function(i,pair){var name=pair[1];if(value.substr(iValue,name.length).toLowerCase()===name.toLowerCase()){index=pair[0];iValue+=name.length;return false}});if(index!==-1){return index+1}else{throw"Unknown name at position "+iValue}},checkLiteral=function(){if(value.charAt(iValue)!==format.charAt(iFormat)){throw"Unexpected literal at position "+iValue}iValue++};for(iFormat=0;iFormat<format.length;iFormat++){if(literal){if(format.charAt(iFormat)==="'"&&!lookAhead("'")){literal=false}else{checkLiteral()}}else{switch(format.charAt(iFormat)){case"d":day=getNumber("d");break;case"D":getName("D",dayNamesShort,dayNames);break;case"o":doy=getNumber("o");break;case"m":month=getNumber("m");break;case"M":month=getName("M",monthNamesShort,monthNames);break;case"y":year=getNumber("y");break;case"@":date=new Date(getNumber("@"));year=date.getFullYear();month=date.getMonth()+1;day=date.getDate();break;case"!":date=new Date((getNumber("!")-this._ticksTo1970)/1e4);year=date.getFullYear();month=date.getMonth()+1;day=date.getDate();break;case"'":if(lookAhead("'")){checkLiteral()}else{literal=true}break;default:checkLiteral()}}}if(iValue<value.length){extra=value.substr(iValue);if(!/^\s+/.test(extra)){throw"Extra/unparsed characters found in date: "+extra}}if(year===-1){year=(new Date).getFullYear()}else if(year<100){year+=(new Date).getFullYear()-(new Date).getFullYear()%100+(year<=shortYearCutoff?0:-100)}if(doy>-1){month=1;day=doy;do{dim=this._getDaysInMonth(year,month-1);if(day<=dim){break}month++;day-=dim}while(true)}date=this._daylightSavingAdjust(new Date(year,month-1,day));if(date.getFullYear()!==year||date.getMonth()+1!==month||date.getDate()!==day){throw"Invalid date"}return date},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:((1970-1)*365+Math.floor(1970/4)-Math.floor(1970/100)+Math.floor(1970/400))*24*60*60*1e7,formatDate:function(format,date,settings){if(!date){return""}var iFormat,dayNamesShort=(settings?settings.dayNamesShort:null)||this._defaults.dayNamesShort,dayNames=(settings?settings.dayNames:null)||this._defaults.dayNames,monthNamesShort=(settings?settings.monthNamesShort:null)||this._defaults.monthNamesShort,monthNames=(settings?settings.monthNames:null)||this._defaults.monthNames,lookAhead=function(match){var matches=iFormat+1<format.length&&format.charAt(iFormat+1)===match;if(matches){iFormat++}return matches},formatNumber=function(match,value,len){var num=""+value;if(lookAhead(match)){while(num.length<len){num="0"+num}}return num},formatName=function(match,value,shortNames,longNames){return lookAhead(match)?longNames[value]:shortNames[value]},output="",literal=false;if(date){for(iFormat=0;iFormat<format.length;iFormat++){if(literal){if(format.charAt(iFormat)==="'"&&!lookAhead("'")){literal=false}else{output+=format.charAt(iFormat)}}else{switch(format.charAt(iFormat)){case"d":output+=formatNumber("d",date.getDate(),2);break;case"D":output+=formatName("D",date.getDay(),dayNamesShort,dayNames);break;case"o":output+=formatNumber("o",Math.round((new Date(date.getFullYear(),date.getMonth(),date.getDate()).getTime()-new Date(date.getFullYear(),0,0).getTime())/864e5),3);break;case"m":output+=formatNumber("m",date.getMonth()+1,2);break;case"M":output+=formatName("M",date.getMonth(),monthNamesShort,monthNames);break;case"y":output+=lookAhead("y")?date.getFullYear():(date.getYear()%100<10?"0":"")+date.getYear()%100;break;case"@":output+=date.getTime();break;case"!":output+=date.getTime()*1e4+this._ticksTo1970;break;case"'":if(lookAhead("'")){output+="'"}else{literal=true}break;default:output+=format.charAt(iFormat)}}}}return output},_possibleChars:function(format){var iFormat,chars="",literal=false,lookAhead=function(match){var matches=iFormat+1<format.length&&format.charAt(iFormat+1)===match;if(matches){iFormat++}return matches};for(iFormat=0;iFormat<format.length;iFormat++){if(literal){if(format.charAt(iFormat)==="'"&&!lookAhead("'")){literal=false}else{chars+=format.charAt(iFormat)}}else{switch(format.charAt(iFormat)){case"d":case"m":case"y":case"@":chars+="0123456789";break;case"D":case"M":return null;case"'":if(lookAhead("'")){chars+="'"}else{literal=true}break;default:chars+=format.charAt(iFormat)}}}return chars},_get:function(inst,name){return inst.settings[name]!==undefined?inst.settings[name]:this._defaults[name]},_setDateFromField:function(inst,noDefault){if(inst.input.val()===inst.lastVal){return}var dateFormat=this._get(inst,"dateFormat"),dates=inst.lastVal=inst.input?inst.input.val():null,defaultDate=this._getDefaultDate(inst),date=defaultDate,settings=this._getFormatConfig(inst);try{date=this.parseDate(dateFormat,dates,settings)||defaultDate}catch(event){dates=noDefault?"":dates}inst.selectedDay=date.getDate();inst.drawMonth=inst.selectedMonth=date.getMonth();inst.drawYear=inst.selectedYear=date.getFullYear();inst.currentDay=dates?date.getDate():0;inst.currentMonth=dates?date.getMonth():0;inst.currentYear=dates?date.getFullYear():0;this._adjustInstDate(inst)},_getDefaultDate:function(inst){return this._restrictMinMax(inst,this._determineDate(inst,this._get(inst,"defaultDate"),new Date))},_determineDate:function(inst,date,defaultDate){var offsetNumeric=function(offset){var date=new Date;date.setDate(date.getDate()+offset);return date},offsetString=function(offset){try{return $.datepicker.parseDate($.datepicker._get(inst,"dateFormat"),offset,$.datepicker._getFormatConfig(inst))}catch(e){}var date=(offset.toLowerCase().match(/^c/)?$.datepicker._getDate(inst):null)||new Date,year=date.getFullYear(),month=date.getMonth(),day=date.getDate(),pattern=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,matches=pattern.exec(offset);while(matches){switch(matches[2]||"d"){case"d":case"D":day+=parseInt(matches[1],10);break;case"w":case"W":day+=parseInt(matches[1],10)*7;break;case"m":case"M":month+=parseInt(matches[1],10);day=Math.min(day,$.datepicker._getDaysInMonth(year,month));break;case"y":case"Y":year+=parseInt(matches[1],10);day=Math.min(day,$.datepicker._getDaysInMonth(year,month));break}matches=pattern.exec(offset)}return new Date(year,month,day)},newDate=date==null||date===""?defaultDate:typeof date==="string"?offsetString(date):typeof date==="number"?isNaN(date)?defaultDate:offsetNumeric(date):new Date(date.getTime());newDate=newDate&&newDate.toString()==="Invalid Date"?defaultDate:newDate;if(newDate){newDate.setHours(0);newDate.setMinutes(0);newDate.setSeconds(0);newDate.setMilliseconds(0)}return this._daylightSavingAdjust(newDate)},_daylightSavingAdjust:function(date){if(!date){return null}date.setHours(date.getHours()>12?date.getHours()+2:0);return date},_setDate:function(inst,date,noChange){var clear=!date,origMonth=inst.selectedMonth,origYear=inst.selectedYear,newDate=this._restrictMinMax(inst,this._determineDate(inst,date,new Date));inst.selectedDay=inst.currentDay=newDate.getDate();inst.drawMonth=inst.selectedMonth=inst.currentMonth=newDate.getMonth();inst.drawYear=inst.selectedYear=inst.currentYear=newDate.getFullYear();if((origMonth!==inst.selectedMonth||origYear!==inst.selectedYear)&&!noChange){this._notifyChange(inst)}this._adjustInstDate(inst);if(inst.input){inst.input.val(clear?"":this._formatDate(inst))}},_getDate:function(inst){var startDate=!inst.currentYear||inst.input&&inst.input.val()===""?null:this._daylightSavingAdjust(new Date(inst.currentYear,inst.currentMonth,inst.currentDay));return startDate},_attachHandlers:function(inst){var stepMonths=this._get(inst,"stepMonths"),id="#"+inst.id.replace(/\\\\/g,"\\");inst.dpDiv.find("[data-handler]").map(function(){var handler={prev:function(){$.datepicker._adjustDate(id,-stepMonths,"M")},next:function(){$.datepicker._adjustDate(id,+stepMonths,"M")},hide:function(){$.datepicker._hideDatepicker()},today:function(){$.datepicker._gotoToday(id)},selectDay:function(){$.datepicker._selectDay(id,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this);return false},selectMonth:function(){$.datepicker._selectMonthYear(id,this,"M");return false},selectYear:function(){$.datepicker._selectMonthYear(id,this,"Y");return false}};$(this).bind(this.getAttribute("data-event"),handler[this.getAttribute("data-handler")])})},_generateHTML:function(inst){var maxDraw,prevText,prev,nextText,next,currentText,gotoDate,controls,buttonPanel,firstDay,showWeek,dayNames,dayNamesMin,monthNames,monthNamesShort,beforeShowDay,showOtherMonths,selectOtherMonths,defaultDate,html,dow,row,group,col,selectedDate,cornerClass,calender,thead,day,daysInMonth,leadDays,curRows,numRows,printDate,dRow,tbody,daySettings,otherMonth,unselectable,tempDate=new Date,today=this._daylightSavingAdjust(new Date(tempDate.getFullYear(),tempDate.getMonth(),tempDate.getDate())),isRTL=this._get(inst,"isRTL"),showButtonPanel=this._get(inst,"showButtonPanel"),hideIfNoPrevNext=this._get(inst,"hideIfNoPrevNext"),navigationAsDateFormat=this._get(inst,"navigationAsDateFormat"),numMonths=this._getNumberOfMonths(inst),showCurrentAtPos=this._get(inst,"showCurrentAtPos"),stepMonths=this._get(inst,"stepMonths"),isMultiMonth=numMonths[0]!==1||numMonths[1]!==1,currentDate=this._daylightSavingAdjust(!inst.currentDay?new Date(9999,9,9):new Date(inst.currentYear,inst.currentMonth,inst.currentDay)),minDate=this._getMinMaxDate(inst,"min"),maxDate=this._getMinMaxDate(inst,"max"),drawMonth=inst.drawMonth-showCurrentAtPos,drawYear=inst.drawYear;if(drawMonth<0){drawMonth+=12;drawYear--}if(maxDate){maxDraw=this._daylightSavingAdjust(new Date(maxDate.getFullYear(),maxDate.getMonth()-numMonths[0]*numMonths[1]+1,maxDate.getDate()));maxDraw=minDate&&maxDraw<minDate?minDate:maxDraw;while(this._daylightSavingAdjust(new Date(drawYear,drawMonth,1))>maxDraw){drawMonth--;if(drawMonth<0){drawMonth=11;drawYear--}}}inst.drawMonth=drawMonth;inst.drawYear=drawYear;prevText=this._get(inst,"prevText");prevText=!navigationAsDateFormat?prevText:this.formatDate(prevText,this._daylightSavingAdjust(new Date(drawYear,drawMonth-stepMonths,1)),this._getFormatConfig(inst));prev=this._canAdjustMonth(inst,-1,drawYear,drawMonth)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click'"+" title='"+prevText+"'><span class='ui-icon ui-icon-circle-triangle-"+(isRTL?"e":"w")+"'>"+prevText+"</span></a>":hideIfNoPrevNext?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+prevText+"'><span class='ui-icon ui-icon-circle-triangle-"+(isRTL?"e":"w")+"'>"+prevText+"</span></a>";
nextText=this._get(inst,"nextText");nextText=!navigationAsDateFormat?nextText:this.formatDate(nextText,this._daylightSavingAdjust(new Date(drawYear,drawMonth+stepMonths,1)),this._getFormatConfig(inst));next=this._canAdjustMonth(inst,+1,drawYear,drawMonth)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click'"+" title='"+nextText+"'><span class='ui-icon ui-icon-circle-triangle-"+(isRTL?"w":"e")+"'>"+nextText+"</span></a>":hideIfNoPrevNext?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+nextText+"'><span class='ui-icon ui-icon-circle-triangle-"+(isRTL?"w":"e")+"'>"+nextText+"</span></a>";currentText=this._get(inst,"currentText");gotoDate=this._get(inst,"gotoCurrent")&&inst.currentDay?currentDate:today;currentText=!navigationAsDateFormat?currentText:this.formatDate(currentText,gotoDate,this._getFormatConfig(inst));controls=!inst.inline?"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(inst,"closeText")+"</button>":"";buttonPanel=showButtonPanel?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(isRTL?controls:"")+(this._isInRange(inst,gotoDate)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'"+">"+currentText+"</button>":"")+(isRTL?"":controls)+"</div>":"";firstDay=parseInt(this._get(inst,"firstDay"),10);firstDay=isNaN(firstDay)?0:firstDay;showWeek=this._get(inst,"showWeek");dayNames=this._get(inst,"dayNames");dayNamesMin=this._get(inst,"dayNamesMin");monthNames=this._get(inst,"monthNames");monthNamesShort=this._get(inst,"monthNamesShort");beforeShowDay=this._get(inst,"beforeShowDay");showOtherMonths=this._get(inst,"showOtherMonths");selectOtherMonths=this._get(inst,"selectOtherMonths");defaultDate=this._getDefaultDate(inst);html="";dow;for(row=0;row<numMonths[0];row++){group="";this.maxRows=4;for(col=0;col<numMonths[1];col++){selectedDate=this._daylightSavingAdjust(new Date(drawYear,drawMonth,inst.selectedDay));cornerClass=" ui-corner-all";calender="";if(isMultiMonth){calender+="<div class='ui-datepicker-group";if(numMonths[1]>1){switch(col){case 0:calender+=" ui-datepicker-group-first";cornerClass=" ui-corner-"+(isRTL?"right":"left");break;case numMonths[1]-1:calender+=" ui-datepicker-group-last";cornerClass=" ui-corner-"+(isRTL?"left":"right");break;default:calender+=" ui-datepicker-group-middle";cornerClass="";break}}calender+="'>"}calender+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+cornerClass+"'>"+(/all|left/.test(cornerClass)&&row===0?isRTL?next:prev:"")+(/all|right/.test(cornerClass)&&row===0?isRTL?prev:next:"")+this._generateMonthYearHeader(inst,drawMonth,drawYear,minDate,maxDate,row>0||col>0,monthNames,monthNamesShort)+"</div><table class='ui-datepicker-calendar'><thead>"+"<tr>";thead=showWeek?"<th class='ui-datepicker-week-col'>"+this._get(inst,"weekHeader")+"</th>":"";for(dow=0;dow<7;dow++){day=(dow+firstDay)%7;thead+="<th scope='col'"+((dow+firstDay+6)%7>=5?" class='ui-datepicker-week-end'":"")+">"+"<span title='"+dayNames[day]+"'>"+dayNamesMin[day]+"</span></th>"}calender+=thead+"</tr></thead><tbody>";daysInMonth=this._getDaysInMonth(drawYear,drawMonth);if(drawYear===inst.selectedYear&&drawMonth===inst.selectedMonth){inst.selectedDay=Math.min(inst.selectedDay,daysInMonth)}leadDays=(this._getFirstDayOfMonth(drawYear,drawMonth)-firstDay+7)%7;curRows=Math.ceil((leadDays+daysInMonth)/7);numRows=isMultiMonth?this.maxRows>curRows?this.maxRows:curRows:curRows;this.maxRows=numRows;printDate=this._daylightSavingAdjust(new Date(drawYear,drawMonth,1-leadDays));for(dRow=0;dRow<numRows;dRow++){calender+="<tr>";tbody=!showWeek?"":"<td class='ui-datepicker-week-col'>"+this._get(inst,"calculateWeek")(printDate)+"</td>";for(dow=0;dow<7;dow++){daySettings=beforeShowDay?beforeShowDay.apply(inst.input?inst.input[0]:null,[printDate]):[true,""];otherMonth=printDate.getMonth()!==drawMonth;unselectable=otherMonth&&!selectOtherMonths||!daySettings[0]||minDate&&printDate<minDate||maxDate&&printDate>maxDate;tbody+="<td class='"+((dow+firstDay+6)%7>=5?" ui-datepicker-week-end":"")+(otherMonth?" ui-datepicker-other-month":"")+(printDate.getTime()===selectedDate.getTime()&&drawMonth===inst.selectedMonth&&inst._keyEvent||defaultDate.getTime()===printDate.getTime()&&defaultDate.getTime()===selectedDate.getTime()?" "+this._dayOverClass:"")+(unselectable?" "+this._unselectableClass+" ui-state-disabled":"")+(otherMonth&&!showOtherMonths?"":" "+daySettings[1]+(printDate.getTime()===currentDate.getTime()?" "+this._currentClass:"")+(printDate.getTime()===today.getTime()?" ui-datepicker-today":""))+"'"+((!otherMonth||showOtherMonths)&&daySettings[2]?" title='"+daySettings[2].replace(/'/g,"&#39;")+"'":"")+(unselectable?"":" data-handler='selectDay' data-event='click' data-month='"+printDate.getMonth()+"' data-year='"+printDate.getFullYear()+"'")+">"+(otherMonth&&!showOtherMonths?"&#xa0;":unselectable?"<span class='ui-state-default'>"+printDate.getDate()+"</span>":"<a class='ui-state-default"+(printDate.getTime()===today.getTime()?" ui-state-highlight":"")+(printDate.getTime()===currentDate.getTime()?" ui-state-active":"")+(otherMonth?" ui-priority-secondary":"")+"' href='#'>"+printDate.getDate()+"</a>")+"</td>";printDate.setDate(printDate.getDate()+1);printDate=this._daylightSavingAdjust(printDate)}calender+=tbody+"</tr>"}drawMonth++;if(drawMonth>11){drawMonth=0;drawYear++}calender+="</tbody></table>"+(isMultiMonth?"</div>"+(numMonths[0]>0&&col===numMonths[1]-1?"<div class='ui-datepicker-row-break'></div>":""):"");group+=calender}html+=group}html+=buttonPanel;inst._keyEvent=false;return html},_generateMonthYearHeader:function(inst,drawMonth,drawYear,minDate,maxDate,secondary,monthNames,monthNamesShort){var inMinYear,inMaxYear,month,years,thisYear,determineYear,year,endYear,changeMonth=this._get(inst,"changeMonth"),changeYear=this._get(inst,"changeYear"),showMonthAfterYear=this._get(inst,"showMonthAfterYear"),html="<div class='ui-datepicker-title'>",monthHtml="";if(secondary||!changeMonth){monthHtml+="<span class='ui-datepicker-month'>"+monthNames[drawMonth]+"</span>"}else{inMinYear=minDate&&minDate.getFullYear()===drawYear;inMaxYear=maxDate&&maxDate.getFullYear()===drawYear;monthHtml+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>";for(month=0;month<12;month++){if((!inMinYear||month>=minDate.getMonth())&&(!inMaxYear||month<=maxDate.getMonth())){monthHtml+="<option value='"+month+"'"+(month===drawMonth?" selected='selected'":"")+">"+monthNamesShort[month]+"</option>"}}monthHtml+="</select>"}if(!showMonthAfterYear){html+=monthHtml+(secondary||!(changeMonth&&changeYear)?"&#xa0;":"")}if(!inst.yearshtml){inst.yearshtml="";if(secondary||!changeYear){html+="<span class='ui-datepicker-year'>"+drawYear+"</span>"}else{years=this._get(inst,"yearRange").split(":");thisYear=(new Date).getFullYear();determineYear=function(value){var year=value.match(/c[+\-].*/)?drawYear+parseInt(value.substring(1),10):value.match(/[+\-].*/)?thisYear+parseInt(value,10):parseInt(value,10);return isNaN(year)?thisYear:year};year=determineYear(years[0]);endYear=Math.max(year,determineYear(years[1]||""));year=minDate?Math.max(year,minDate.getFullYear()):year;endYear=maxDate?Math.min(endYear,maxDate.getFullYear()):endYear;inst.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";for(;year<=endYear;year++){inst.yearshtml+="<option value='"+year+"'"+(year===drawYear?" selected='selected'":"")+">"+year+"</option>"}inst.yearshtml+="</select>";html+=inst.yearshtml;inst.yearshtml=null}}html+=this._get(inst,"yearSuffix");if(showMonthAfterYear){html+=(secondary||!(changeMonth&&changeYear)?"&#xa0;":"")+monthHtml}html+="</div>";return html},_adjustInstDate:function(inst,offset,period){var year=inst.drawYear+(period==="Y"?offset:0),month=inst.drawMonth+(period==="M"?offset:0),day=Math.min(inst.selectedDay,this._getDaysInMonth(year,month))+(period==="D"?offset:0),date=this._restrictMinMax(inst,this._daylightSavingAdjust(new Date(year,month,day)));inst.selectedDay=date.getDate();inst.drawMonth=inst.selectedMonth=date.getMonth();inst.drawYear=inst.selectedYear=date.getFullYear();if(period==="M"||period==="Y"){this._notifyChange(inst)}},_restrictMinMax:function(inst,date){var minDate=this._getMinMaxDate(inst,"min"),maxDate=this._getMinMaxDate(inst,"max"),newDate=minDate&&date<minDate?minDate:date;return maxDate&&newDate>maxDate?maxDate:newDate},_notifyChange:function(inst){var onChange=this._get(inst,"onChangeMonthYear");if(onChange){onChange.apply(inst.input?inst.input[0]:null,[inst.selectedYear,inst.selectedMonth+1,inst])}},_getNumberOfMonths:function(inst){var numMonths=this._get(inst,"numberOfMonths");return numMonths==null?[1,1]:typeof numMonths==="number"?[1,numMonths]:numMonths},_getMinMaxDate:function(inst,minMax){return this._determineDate(inst,this._get(inst,minMax+"Date"),null)},_getDaysInMonth:function(year,month){return 32-this._daylightSavingAdjust(new Date(year,month,32)).getDate()},_getFirstDayOfMonth:function(year,month){return new Date(year,month,1).getDay()},_canAdjustMonth:function(inst,offset,curYear,curMonth){var numMonths=this._getNumberOfMonths(inst),date=this._daylightSavingAdjust(new Date(curYear,curMonth+(offset<0?offset:numMonths[0]*numMonths[1]),1));if(offset<0){date.setDate(this._getDaysInMonth(date.getFullYear(),date.getMonth()))}return this._isInRange(inst,date)},_isInRange:function(inst,date){var yearSplit,currentYear,minDate=this._getMinMaxDate(inst,"min"),maxDate=this._getMinMaxDate(inst,"max"),minYear=null,maxYear=null,years=this._get(inst,"yearRange");if(years){yearSplit=years.split(":");currentYear=(new Date).getFullYear();minYear=parseInt(yearSplit[0],10);maxYear=parseInt(yearSplit[1],10);if(yearSplit[0].match(/[+\-].*/)){minYear+=currentYear}if(yearSplit[1].match(/[+\-].*/)){maxYear+=currentYear}}return(!minDate||date.getTime()>=minDate.getTime())&&(!maxDate||date.getTime()<=maxDate.getTime())&&(!minYear||date.getFullYear()>=minYear)&&(!maxYear||date.getFullYear()<=maxYear)},_getFormatConfig:function(inst){var shortYearCutoff=this._get(inst,"shortYearCutoff");shortYearCutoff=typeof shortYearCutoff!=="string"?shortYearCutoff:(new Date).getFullYear()%100+parseInt(shortYearCutoff,10);return{shortYearCutoff:shortYearCutoff,dayNamesShort:this._get(inst,"dayNamesShort"),dayNames:this._get(inst,"dayNames"),monthNamesShort:this._get(inst,"monthNamesShort"),monthNames:this._get(inst,"monthNames")}},_formatDate:function(inst,day,month,year){if(!day){inst.currentDay=inst.selectedDay;inst.currentMonth=inst.selectedMonth;inst.currentYear=inst.selectedYear}var date=day?typeof day==="object"?day:this._daylightSavingAdjust(new Date(year,month,day)):this._daylightSavingAdjust(new Date(inst.currentYear,inst.currentMonth,inst.currentDay));return this.formatDate(this._get(inst,"dateFormat"),date,this._getFormatConfig(inst))}});function datepicker_bindHover(dpDiv){var selector="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return dpDiv.delegate(selector,"mouseout",function(){$(this).removeClass("ui-state-hover");if(this.className.indexOf("ui-datepicker-prev")!==-1){$(this).removeClass("ui-datepicker-prev-hover")}if(this.className.indexOf("ui-datepicker-next")!==-1){$(this).removeClass("ui-datepicker-next-hover")}}).delegate(selector,"mouseover",datepicker_handleMouseover)}function datepicker_handleMouseover(){if(!$.datepicker._isDisabledDatepicker(datepicker_instActive.inline?datepicker_instActive.dpDiv.parent()[0]:datepicker_instActive.input[0])){$(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover");$(this).addClass("ui-state-hover");if(this.className.indexOf("ui-datepicker-prev")!==-1){$(this).addClass("ui-datepicker-prev-hover")}if(this.className.indexOf("ui-datepicker-next")!==-1){$(this).addClass("ui-datepicker-next-hover")}}}function datepicker_extendRemove(target,props){$.extend(target,props);for(var name in props){if(props[name]==null){target[name]=props[name]}}return target}$.fn.datepicker=function(options){if(!this.length){return this}if(!$.datepicker.initialized){$(document).mousedown($.datepicker._checkExternalClick);$.datepicker.initialized=true}if($("#"+$.datepicker._mainDivId).length===0){$("body").append($.datepicker.dpDiv)}var otherArgs=Array.prototype.slice.call(arguments,1);if(typeof options==="string"&&(options==="isDisabled"||options==="getDate"||options==="widget")){return $.datepicker["_"+options+"Datepicker"].apply($.datepicker,[this[0]].concat(otherArgs))}if(options==="option"&&arguments.length===2&&typeof arguments[1]==="string"){return $.datepicker["_"+options+"Datepicker"].apply($.datepicker,[this[0]].concat(otherArgs))}return this.each(function(){typeof options==="string"?$.datepicker["_"+options+"Datepicker"].apply($.datepicker,[this].concat(otherArgs)):$.datepicker._attachDatepicker(this,options)})};$.datepicker=new Datepicker;$.datepicker.initialized=false;$.datepicker.uuid=(new Date).getTime();$.datepicker.version="1.11.4";var datepicker=$.datepicker;var slider=$.widget("ui.slider",$.ui.mouse,{version:"1.11.4",widgetEventPrefix:"slide",options:{animate:false,distance:0,max:100,min:0,orientation:"horizontal",range:false,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=false;this._mouseSliding=false;this._animateOff=true;this._handleIndex=null;this._detectOrientation();this._mouseInit();this._calculateNewMax();this.element.addClass("ui-slider"+" ui-slider-"+this.orientation+" ui-widget"+" ui-widget-content"+" ui-corner-all");this._refresh();this._setOption("disabled",this.options.disabled);this._animateOff=false},_refresh:function(){this._createRange();this._createHandles();this._setupEvents();this._refreshValue()},_createHandles:function(){var i,handleCount,options=this.options,existingHandles=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),handle="<span class='ui-slider-handle ui-state-default ui-corner-all' tabindex='0'></span>",handles=[];handleCount=options.values&&options.values.length||1;if(existingHandles.length>handleCount){existingHandles.slice(handleCount).remove();existingHandles=existingHandles.slice(0,handleCount)}for(i=existingHandles.length;i<handleCount;i++){handles.push(handle)}this.handles=existingHandles.add($(handles.join("")).appendTo(this.element));this.handle=this.handles.eq(0);this.handles.each(function(i){$(this).data("ui-slider-handle-index",i)})},_createRange:function(){var options=this.options,classes="";if(options.range){if(options.range===true){if(!options.values){options.values=[this._valueMin(),this._valueMin()]}else if(options.values.length&&options.values.length!==2){options.values=[options.values[0],options.values[0]]}else if($.isArray(options.values)){options.values=options.values.slice(0)}}if(!this.range||!this.range.length){this.range=$("<div></div>").appendTo(this.element);classes="ui-slider-range"+" ui-widget-header ui-corner-all"}else{this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""})}this.range.addClass(classes+(options.range==="min"||options.range==="max"?" ui-slider-range-"+options.range:""))}else{if(this.range){this.range.remove()}this.range=null}},_setupEvents:function(){this._off(this.handles);this._on(this.handles,this._handleEvents);this._hoverable(this.handles);this._focusable(this.handles)},_destroy:function(){this.handles.remove();if(this.range){this.range.remove()}this.element.removeClass("ui-slider"+" ui-slider-horizontal"+" ui-slider-vertical"+" ui-widget"+" ui-widget-content"+" ui-corner-all");this._mouseDestroy()},_mouseCapture:function(event){var position,normValue,distance,closestHandle,index,allowed,offset,mouseOverHandle,that=this,o=this.options;if(o.disabled){return false}this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()};this.elementOffset=this.element.offset();position={x:event.pageX,y:event.pageY};normValue=this._normValueFromMouse(position);distance=this._valueMax()-this._valueMin()+1;this.handles.each(function(i){var thisDistance=Math.abs(normValue-that.values(i));if(distance>thisDistance||distance===thisDistance&&(i===that._lastChangedValue||that.values(i)===o.min)){distance=thisDistance;closestHandle=$(this);index=i}});allowed=this._start(event,index);if(allowed===false){return false}this._mouseSliding=true;this._handleIndex=index;closestHandle.addClass("ui-state-active").focus();offset=closestHandle.offset();mouseOverHandle=!$(event.target).parents().addBack().is(".ui-slider-handle");this._clickOffset=mouseOverHandle?{left:0,top:0}:{left:event.pageX-offset.left-closestHandle.width()/2,top:event.pageY-offset.top-closestHandle.height()/2-(parseInt(closestHandle.css("borderTopWidth"),10)||0)-(parseInt(closestHandle.css("borderBottomWidth"),10)||0)+(parseInt(closestHandle.css("marginTop"),10)||0)};if(!this.handles.hasClass("ui-state-hover")){this._slide(event,index,normValue)}this._animateOff=true;return true},_mouseStart:function(){return true},_mouseDrag:function(event){var position={x:event.pageX,y:event.pageY},normValue=this._normValueFromMouse(position);this._slide(event,this._handleIndex,normValue);return false},_mouseStop:function(event){this.handles.removeClass("ui-state-active");this._mouseSliding=false;this._stop(event,this._handleIndex);this._change(event,this._handleIndex);this._handleIndex=null;this._clickOffset=null;this._animateOff=false;return false},_detectOrientation:function(){this.orientation=this.options.orientation==="vertical"?"vertical":"horizontal"},_normValueFromMouse:function(position){var pixelTotal,pixelMouse,percentMouse,valueTotal,valueMouse;if(this.orientation==="horizontal"){pixelTotal=this.elementSize.width;pixelMouse=position.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)}else{pixelTotal=this.elementSize.height;pixelMouse=position.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)}percentMouse=pixelMouse/pixelTotal;if(percentMouse>1){percentMouse=1}if(percentMouse<0){percentMouse=0}if(this.orientation==="vertical"){percentMouse=1-percentMouse}valueTotal=this._valueMax()-this._valueMin();valueMouse=this._valueMin()+percentMouse*valueTotal;return this._trimAlignValue(valueMouse)},_start:function(event,index){var uiHash={handle:this.handles[index],value:this.value()};if(this.options.values&&this.options.values.length){uiHash.value=this.values(index);uiHash.values=this.values()}return this._trigger("start",event,uiHash)},_slide:function(event,index,newVal){var otherVal,newValues,allowed;if(this.options.values&&this.options.values.length){otherVal=this.values(index?0:1);if(this.options.values.length===2&&this.options.range===true&&(index===0&&newVal>otherVal||index===1&&newVal<otherVal)){newVal=otherVal}if(newVal!==this.values(index)){newValues=this.values();newValues[index]=newVal;allowed=this._trigger("slide",event,{handle:this.handles[index],value:newVal,values:newValues});otherVal=this.values(index?0:1);if(allowed!==false){this.values(index,newVal)}}}else{if(newVal!==this.value()){allowed=this._trigger("slide",event,{handle:this.handles[index],value:newVal});if(allowed!==false){this.value(newVal)}}}},_stop:function(event,index){var uiHash={handle:this.handles[index],value:this.value()};if(this.options.values&&this.options.values.length){uiHash.value=this.values(index);uiHash.values=this.values()}this._trigger("stop",event,uiHash)},_change:function(event,index){if(!this._keySliding&&!this._mouseSliding){var uiHash={handle:this.handles[index],value:this.value()};if(this.options.values&&this.options.values.length){uiHash.value=this.values(index);uiHash.values=this.values()}this._lastChangedValue=index;this._trigger("change",event,uiHash)}},value:function(newValue){if(arguments.length){this.options.value=this._trimAlignValue(newValue);this._refreshValue();this._change(null,0);return}return this._value()},values:function(index,newValue){var vals,newValues,i;if(arguments.length>1){this.options.values[index]=this._trimAlignValue(newValue);this._refreshValue();this._change(null,index);return}if(arguments.length){if($.isArray(arguments[0])){vals=this.options.values;newValues=arguments[0];for(i=0;i<vals.length;i+=1){vals[i]=this._trimAlignValue(newValues[i]);this._change(null,i)}this._refreshValue()}else{if(this.options.values&&this.options.values.length){return this._values(index)}else{return this.value()}}}else{return this._values()}},_setOption:function(key,value){var i,valsLength=0;if(key==="range"&&this.options.range===true){if(value==="min"){this.options.value=this._values(0);this.options.values=null}else if(value==="max"){this.options.value=this._values(this.options.values.length-1);this.options.values=null}}if($.isArray(this.options.values)){valsLength=this.options.values.length}if(key==="disabled"){this.element.toggleClass("ui-state-disabled",!!value)}this._super(key,value);switch(key){case"orientation":this._detectOrientation();this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation);this._refreshValue();this.handles.css(value==="horizontal"?"bottom":"left","");break;case"value":this._animateOff=true;this._refreshValue();this._change(null,0);this._animateOff=false;break;case"values":this._animateOff=true;this._refreshValue();for(i=0;i<valsLength;i+=1){this._change(null,i)}this._animateOff=false;break;case"step":case"min":case"max":this._animateOff=true;this._calculateNewMax();this._refreshValue();this._animateOff=false;break;case"range":this._animateOff=true;this._refresh();this._animateOff=false;break}},_value:function(){var val=this.options.value;val=this._trimAlignValue(val);return val},_values:function(index){var val,vals,i;if(arguments.length){val=this.options.values[index];val=this._trimAlignValue(val);return val}else if(this.options.values&&this.options.values.length){vals=this.options.values.slice();for(i=0;i<vals.length;i+=1){vals[i]=this._trimAlignValue(vals[i])}return vals}else{return[]}},_trimAlignValue:function(val){if(val<=this._valueMin()){return this._valueMin()}if(val>=this._valueMax()){return this._valueMax()}var step=this.options.step>0?this.options.step:1,valModStep=(val-this._valueMin())%step,alignValue=val-valModStep;if(Math.abs(valModStep)*2>=step){alignValue+=valModStep>0?step:-step}return parseFloat(alignValue.toFixed(5))},_calculateNewMax:function(){var max=this.options.max,min=this._valueMin(),step=this.options.step,aboveMin=Math.floor(+(max-min).toFixed(this._precision())/step)*step;max=aboveMin+min;this.max=parseFloat(max.toFixed(this._precision()))},_precision:function(){var precision=this._precisionOf(this.options.step);if(this.options.min!==null){precision=Math.max(precision,this._precisionOf(this.options.min))}return precision},_precisionOf:function(num){var str=num.toString(),decimal=str.indexOf(".");return decimal===-1?0:str.length-decimal-1},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshValue:function(){var lastValPercent,valPercent,value,valueMin,valueMax,oRange=this.options.range,o=this.options,that=this,animate=!this._animateOff?o.animate:false,_set={};if(this.options.values&&this.options.values.length){this.handles.each(function(i){valPercent=(that.values(i)-that._valueMin())/(that._valueMax()-that._valueMin())*100;_set[that.orientation==="horizontal"?"left":"bottom"]=valPercent+"%";$(this).stop(1,1)[animate?"animate":"css"](_set,o.animate);if(that.options.range===true){if(that.orientation==="horizontal"){if(i===0){that.range.stop(1,1)[animate?"animate":"css"]({left:valPercent+"%"},o.animate)}if(i===1){that.range[animate?"animate":"css"]({width:valPercent-lastValPercent+"%"},{queue:false,duration:o.animate})}}else{if(i===0){that.range.stop(1,1)[animate?"animate":"css"]({bottom:valPercent+"%"},o.animate)}if(i===1){that.range[animate?"animate":"css"]({height:valPercent-lastValPercent+"%"},{queue:false,duration:o.animate})}}}lastValPercent=valPercent})}else{value=this.value();valueMin=this._valueMin();valueMax=this._valueMax();valPercent=valueMax!==valueMin?(value-valueMin)/(valueMax-valueMin)*100:0;_set[this.orientation==="horizontal"?"left":"bottom"]=valPercent+"%";this.handle.stop(1,1)[animate?"animate":"css"](_set,o.animate);if(oRange==="min"&&this.orientation==="horizontal"){this.range.stop(1,1)[animate?"animate":"css"]({width:valPercent+"%"},o.animate)}if(oRange==="max"&&this.orientation==="horizontal"){this.range[animate?"animate":"css"]({width:100-valPercent+"%"},{queue:false,duration:o.animate})}if(oRange==="min"&&this.orientation==="vertical"){this.range.stop(1,1)[animate?"animate":"css"]({height:valPercent+"%"},o.animate)}if(oRange==="max"&&this.orientation==="vertical"){this.range[animate?"animate":"css"]({height:100-valPercent+"%"},{queue:false,duration:o.animate})}}},_handleEvents:{keydown:function(event){var allowed,curVal,newVal,step,index=$(event.target).data("ui-slider-handle-index");switch(event.keyCode){case $.ui.keyCode.HOME:case $.ui.keyCode.END:case $.ui.keyCode.PAGE_UP:case $.ui.keyCode.PAGE_DOWN:case $.ui.keyCode.UP:case $.ui.keyCode.RIGHT:case $.ui.keyCode.DOWN:case $.ui.keyCode.LEFT:event.preventDefault();if(!this._keySliding){this._keySliding=true;$(event.target).addClass("ui-state-active");allowed=this._start(event,index);if(allowed===false){return}}break}step=this.options.step;if(this.options.values&&this.options.values.length){curVal=newVal=this.values(index)}else{curVal=newVal=this.value()}switch(event.keyCode){case $.ui.keyCode.HOME:newVal=this._valueMin();break;case $.ui.keyCode.END:newVal=this._valueMax();break;case $.ui.keyCode.PAGE_UP:newVal=this._trimAlignValue(curVal+(this._valueMax()-this._valueMin())/this.numPages);break;case $.ui.keyCode.PAGE_DOWN:newVal=this._trimAlignValue(curVal-(this._valueMax()-this._valueMin())/this.numPages);break;case $.ui.keyCode.UP:case $.ui.keyCode.RIGHT:if(curVal===this._valueMax()){return}newVal=this._trimAlignValue(curVal+step);break;case $.ui.keyCode.DOWN:case $.ui.keyCode.LEFT:if(curVal===this._valueMin()){return}newVal=this._trimAlignValue(curVal-step);break}this._slide(event,index,newVal)},keyup:function(event){var index=$(event.target).data("ui-slider-handle-index");if(this._keySliding){this._keySliding=false;this._stop(event,index);this._change(event,index);$(event.target).removeClass("ui-state-active")}}}})});(function(factory){if(typeof define==="function"&&define.amd){define(["../datepicker"],factory)}else{factory(jQuery.datepicker)}})(function(datepicker){datepicker.regional["de"]={closeText:"Schließen",prevText:"&#x3C;Zurück",nextText:"Vor&#x3E;",currentText:"Heute",monthNames:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],monthNamesShort:["Jan","Feb","Mär","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],dayNames:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],dayNamesShort:["So","Mo","Di","Mi","Do","Fr","Sa"],dayNamesMin:["So","Mo","Di","Mi","Do","Fr","Sa"],weekHeader:"KW",dateFormat:"dd.mm.yy",firstDay:1,isRTL:false,showMonthAfterYear:false,yearSuffix:""};datepicker.setDefaults(datepicker.regional["de"]);return datepicker.regional["de"]});(function(factory){if(typeof define==="function"&&define.amd){define(["../datepicker"],factory)}else{factory(jQuery.datepicker)}})(function(datepicker){datepicker.regional["fr"]={closeText:"Fermer",prevText:"Précédent",nextText:"Suivant",currentText:"Aujourd'hui",monthNames:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"],monthNamesShort:["janv.","févr.","mars","avr.","mai","juin","juil.","août","sept.","oct.","nov.","déc."],dayNames:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],dayNamesShort:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],dayNamesMin:["D","L","M","M","J","V","S"],weekHeader:"Sem.",dateFormat:"dd/mm/yy",firstDay:1,isRTL:false,showMonthAfterYear:false,yearSuffix:""};datepicker.setDefaults(datepicker.regional["fr"]);return datepicker.regional["fr"]});

(function(){'use strict';var m,ba="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,d){if(d.get||d.set)throw new TypeError("ES3 does not support getters and setters.");a!=Array.prototype&&a!=Object.prototype&&(a[b]=d.value)},ca="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this;function da(){da=function(){};ca.Symbol||(ca.Symbol=fa)}var ga=0;function fa(a){return"jscomp_symbol_"+(a||"")+ga++}
function ha(){da();var a=ca.Symbol.iterator;a||(a=ca.Symbol.iterator=ca.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&ba(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return ia(this)}});ha=function(){}}function ia(a){var b=0;return ja(function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}})}function ja(a){ha();a={next:a};a[ca.Symbol.iterator]=function(){return this};return a}function ka(a){ha();var b=a[Symbol.iterator];return b?b.call(a):ia(a)}
function la(a){if(!(a instanceof Array)){a=ka(a);for(var b,d=[];!(b=a.next()).done;)d.push(b.value);a=d}return a}function ma(a,b){function d(){}d.prototype=b.prototype;a.prototype=new d;a.prototype.constructor=a;for(var e in b)if(Object.defineProperties){var f=Object.getOwnPropertyDescriptor(b,e);f&&Object.defineProperty(a,e,f)}else a[e]=b[e]}
function na(a,b){if(b){var d=ca;a=a.split(".");for(var e=0;e<a.length-1;e++){var f=a[e];f in d||(d[f]={});d=d[f]}a=a[a.length-1];e=d[a];b=b(e);b!=e&&null!=b&&ba(d,a,{configurable:!0,writable:!0,value:b})}}na("Math.cosh",function(a){if(a)return a;var b=Math.exp;return function(a){a=Number(a);return(b(a)+b(-a))/2}});na("Object.is",function(a){return a?a:function(a,d){return a===d?0!==a||1/a===1/d:a!==a&&d!==d}});
na("Array.prototype.find",function(a){return a?a:function(a,d){a:{var b=this;b instanceof String&&(b=String(b));for(var f=b.length,g=0;g<f;g++){var h=b[g];if(a.call(d,h,g,b)){a=h;break a}}a=void 0}return a}});var oa=this;function pa(a){return void 0!==a}
function ra(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var d=Object.prototype.toString.call(a);if("[object Window]"==d)return"object";if("[object Array]"==d||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==d||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function sa(a){return"array"==ra(a)}function ta(a){var b=ra(a);return"array"==b||"object"==b&&"number"==typeof a.length}function ua(a){return"string"==typeof a}function va(a){return"number"==typeof a}function wa(a){var b=typeof a;return"object"==b&&null!=a||"function"==b}function xa(a){return a[ya]||(a[ya]=++za)}var ya="closure_uid_"+(1E9*Math.random()>>>0),za=0;function Aa(a,b,d){return a.call.apply(a.bind,arguments)}
function Ba(a,b,d){if(!a)throw Error();if(2<arguments.length){var e=Array.prototype.slice.call(arguments,2);return function(){var d=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(d,e);return a.apply(b,d)}}return function(){return a.apply(b,arguments)}}function Ca(a,b,d){Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Ca=Aa:Ca=Ba;return Ca.apply(null,arguments)}
function Da(a,b){var d=Array.prototype.slice.call(arguments,1);return function(){var b=d.slice();b.push.apply(b,arguments);return a.apply(this,b)}}function Ea(a,b){a=a.split(".");var d=oa;a[0]in d||!d.execScript||d.execScript("var "+a[0]);for(var e;a.length&&(e=a.shift());)!a.length&&pa(b)?d[e]=b:d[e]&&d[e]!==Object.prototype[e]?d=d[e]:d=d[e]={}}
function Fa(a,b){function d(){}d.prototype=b.prototype;a.Oc=b.prototype;a.prototype=new d;a.prototype.constructor=a;a.Sr=function(a,d,g){for(var e=Array(arguments.length-2),f=2;f<arguments.length;f++)e[f-2]=arguments[f];return b.prototype[d].apply(a,e)}};function u(a,b){a.prototype=Object.create(b.prototype);a.prototype.constructor=a}function Ga(){}function v(a){return a.pp||(a.pp=++Ha)}var Ha=0;function Ia(a){this.message="Assertion failed. See https://openlayers.org/en/latest/doc/errors/#"+a+" for details.";this.code=a;this.name="AssertionError"}u(Ia,Error);function Ja(a,b){if(!a)throw new Ia(b);};var w="function"===typeof Object.assign?Object.assign:function(a,b){if(!a||null===a)throw new TypeError("Cannot convert undefined or null to object");for(var d=Object(a),e=1,f=arguments.length;e<f;++e){var g=arguments[e];if(void 0!==g&&null!==g)for(var h in g)g.hasOwnProperty(h)&&(d[h]=g[h])}return d};function Ka(a){for(var b in a)delete a[b]}function La(a){var b=[],d;for(d in a)b.push(a[d]);return b}function Ma(a){for(var b in a)return!1;return!b};function Na(a){function b(b){var d=a.listener,f=a.bindTo||a.target;a.bc&&A(a);return d.call(f,b)}return a.yh=b}function Oa(a,b,d,e){for(var f,g=0,h=a.length;g<h;++g)if(f=a[g],f.listener===b&&f.bindTo===d)return e&&(f.deleteIndex=g),f}function Pa(a,b){return(a=a.Oa)?a[b]:void 0}function Qa(a){var b=a.Oa;b||(b=a.Oa={});return b}
function Sa(a,b){var d=Pa(a,b);if(d){for(var e=0,f=d.length;e<f;++e)a.removeEventListener(b,d[e].yh),Ka(d[e]);d.length=0;if(d=a.Oa)delete d[b],Object.keys(d).length||delete a.Oa}}function B(a,b,d,e,f){var g=Qa(a),h=g[b];h||(h=g[b]=[]);(g=Oa(h,d,e,!1))?f||(g.bc=!1):(g={bindTo:e,bc:!!f,listener:d,target:a,type:b},a.addEventListener(b,Na(g)),h.push(g));return g}function Ta(a,b,d,e){(a=Pa(a,b))&&(d=Oa(a,d,e,!0))&&A(d)}
function A(a){if(a&&a.target){a.target.removeEventListener(a.type,a.yh);var b=Pa(a.target,a.type);if(b){var d="deleteIndex"in a?a.deleteIndex:b.indexOf(a);-1!==d&&b.splice(d,1);b.length||Sa(a.target,a.type)}Ka(a)}};function Ua(){}Ua.prototype.Bb=!1;Ua.prototype.Ua=function(){this.Bb||(this.Bb=!0,this.ja())};Ua.prototype.ja=Ga;function Va(a){this.type=a;this.target=null}Va.prototype.preventDefault=Va.prototype.stopPropagation=function(){this.Lp=!0};function Wa(a){a.stopPropagation()};function Xa(){this.ia={};this.R={};this.N={}}u(Xa,Ua);m=Xa.prototype;m.addEventListener=function(a,b){var d=this.N[a];d||(d=this.N[a]=[]);-1===d.indexOf(b)&&d.push(b)};
m.dispatchEvent=function(a){var b="string"===typeof a?new Va(a):a;a=b.type;b.target=this;var d=this.N[a],e;if(d){a in this.R||(this.R[a]=0,this.ia[a]=0);++this.R[a];for(var f=0,g=d.length;f<g;++f)if(!1===d[f].call(this,b)||b.Lp){e=!1;break}--this.R[a];if(!this.R[a]){b=this.ia[a];for(delete this.ia[a];b--;)this.removeEventListener(a,Ga);delete this.R[a]}return e}};m.ja=function(){var a=Qa(this),b;for(b in a)Sa(this,b)};m.hasListener=function(a){return a?a in this.N:0<Object.keys(this.N).length};
m.removeEventListener=function(a,b){var d=this.N[a];d&&(b=d.indexOf(b),a in this.ia?(d[b]=Ga,++this.ia[a]):(d.splice(b,1),d.length||delete this.N[a]))};function Ya(){Xa.call(this);this.g=0}u(Ya,Xa);function Za(a){if(Array.isArray(a))for(var b=0,d=a.length;b<d;++b)A(a[b]);else A(a)}Ya.prototype.c=function(){++this.g;this.dispatchEvent("change")};Ya.prototype.on=function(a,b,d){if(Array.isArray(a)){for(var e=a.length,f=Array(e),g=0;g<e;++g)f[g]=B(this,a[g],b,d);return f}return B(this,a,b,d)};Ya.prototype.once=function(a,b,d){if(Array.isArray(a)){for(var e=a.length,f=Array(e),g=0;g<e;++g)f[g]=B(this,a[g],b,d,!0);return f}return B(this,a,b,d,!0)};function $a(a){Ya.call(this);v(this);this.O={};void 0!==a&&this.Ea(a)}u($a,Ya);var bb={};function cb(a){return bb.hasOwnProperty(a)?bb[a]:bb[a]="change:"+a}$a.prototype.get=function(a){var b;this.O.hasOwnProperty(a)&&(b=this.O[a]);return b};function db(a){return w({},a.O)}$a.prototype.notify=function(a,b){var d;d=cb(a);this.dispatchEvent(new eb(d,a,b));this.dispatchEvent(new eb("propertychange",a,b))};$a.prototype.set=function(a,b,d){d?this.O[a]=b:(d=this.O[a],this.O[a]=b,d!==b&&this.notify(a,d))};
$a.prototype.Ea=function(a,b){for(var d in a)this.set(d,a[d],b)};function eb(a,b,d){Va.call(this,a);this.key=b;this.oldValue=d}u(eb,Va);function fb(a){for(var b=gb(),d=0,e=a.length;d<e;++d)hb(b,a[d]);return b}function ib(a,b,d){return d?(d[0]=a[0]-b,d[1]=a[1]-b,d[2]=a[2]+b,d[3]=a[3]+b,d):[a[0]-b,a[1]-b,a[2]+b,a[3]+b]}function jb(a,b){return b?(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b):a.slice()}function kb(a,b,d){b=b<a[0]?a[0]-b:a[2]<b?b-a[2]:0;a=d<a[1]?a[1]-d:a[3]<d?d-a[3]:0;return b*b+a*a}function lb(a,b){return a[0]<=b[0]&&b[2]<=a[2]&&a[1]<=b[1]&&b[3]<=a[3]}function mb(a,b,d){return a[0]<=b&&b<=a[2]&&a[1]<=d&&d<=a[3]}
function nb(a,b){var d=a[1],e=a[2],f=a[3],g=b[0];b=b[1];var h=0;g<a[0]?h|=16:g>e&&(h|=4);b<d?h|=8:b>f&&(h|=2);h||(h=1);return h}function gb(){return[Infinity,Infinity,-Infinity,-Infinity]}function ob(a,b,d,e,f){return f?(f[0]=a,f[1]=b,f[2]=d,f[3]=e,f):[a,b,d,e]}function pb(a){return ob(Infinity,Infinity,-Infinity,-Infinity,a)}function qb(a,b){var d=a[0];a=a[1];return ob(d,a,d,a,b)}function rb(a,b){return a[0]==b[0]&&a[2]==b[2]&&a[1]==b[1]&&a[3]==b[3]}
function sb(a,b){b[0]<a[0]&&(a[0]=b[0]);b[2]>a[2]&&(a[2]=b[2]);b[1]<a[1]&&(a[1]=b[1]);b[3]>a[3]&&(a[3]=b[3]);return a}function hb(a,b){b[0]<a[0]&&(a[0]=b[0]);b[0]>a[2]&&(a[2]=b[0]);b[1]<a[1]&&(a[1]=b[1]);b[1]>a[3]&&(a[3]=b[1])}function tb(a,b,d,e,f){for(;d<e;d+=f){var g=a,h=b[d],k=b[d+1];g[0]=Math.min(g[0],h);g[1]=Math.min(g[1],k);g[2]=Math.max(g[2],h);g[3]=Math.max(g[3],k)}return a}
function ub(a,b,d){var e;return(e=b.call(d,[a[0],a[1]]))||(e=b.call(d,[a[2],a[1]]))||(e=b.call(d,[a[2],a[3]]))?e:(e=b.call(d,[a[0],a[3]]))?e:!1}function vb(a){var b=0;wb(a)||(b=xb(a)*yb(a));return b}function zb(a){return[(a[0]+a[2])/2,(a[1]+a[3])/2]}
function Ab(a,b,d,e,f){var g=b*e[0]/2;e=b*e[1]/2;b=Math.cos(d);var h=Math.sin(d);d=g*b;g*=h;b*=e;var k=e*h,l=a[0],n=a[1];a=l-d+k;e=l-d-k;h=l+d-k;d=l+d+k;var k=n-g-b,l=n-g+b,p=n+g+b,g=n+g-b;return ob(Math.min(a,e,h,d),Math.min(k,l,p,g),Math.max(a,e,h,d),Math.max(k,l,p,g),f)}function yb(a){return a[3]-a[1]}function Bb(a,b){var d=gb();Cb(a,b)&&(d[0]=a[0]>b[0]?a[0]:b[0],d[1]=a[1]>b[1]?a[1]:b[1],d[2]=a[2]<b[2]?a[2]:b[2],d[3]=a[3]<b[3]?a[3]:b[3]);return d}function xb(a){return a[2]-a[0]}
function Cb(a,b){return a[0]<=b[2]&&a[2]>=b[0]&&a[1]<=b[3]&&a[3]>=b[1]}function wb(a){return a[2]<a[0]||a[3]<a[1]};function Db(){return!0}function Eb(){return!1};function Fb(a,b,d){return Math.min(Math.max(a,b),d)}var Gb=function(){var a;"cosh"in Math?a=Math.cosh:a=function(a){a=Math.exp(a);return(a+1/a)/2};return a}();function Hb(a,b,d,e){a=d-a;b=e-b;return a*a+b*b}function Ib(a){return a*Math.PI/180}function Jb(a,b){a%=b;return 0>a*b?a+b:a};/*

 Latitude/longitude spherical geodesy formulae taken from
 http://www.movable-type.co.uk/scripts/latlong.html
 Licensed under CC-BY-3.0.
*/
function Kb(a){this.radius=a}function Lb(a,b,d){var e=Ib(b[1]),f=Ib(d[1]),g=(f-e)/2;b=Ib(d[0]-b[0])/2;e=Math.sin(g)*Math.sin(g)+Math.sin(b)*Math.sin(b)*Math.cos(e)*Math.cos(f);return 2*a.radius*Math.atan2(Math.sqrt(e),Math.sqrt(1-e))}Kb.prototype.offset=function(a,b,d){var e=Ib(a[1]);b/=this.radius;var f=Math.asin(Math.sin(e)*Math.cos(b)+Math.cos(e)*Math.sin(b)*Math.cos(d));return[180*(Ib(a[0])+Math.atan2(Math.sin(d)*Math.sin(b)*Math.cos(e),Math.cos(b)-Math.sin(e)*Math.sin(f)))/Math.PI,180*f/Math.PI]};var Mb=new Kb(6370997);var Nb={};Nb.degrees=2*Math.PI*Mb.radius/360;Nb.ft=.3048;Nb.m=1;Nb["us-ft"]=1200/3937;var Ob=null;function Pb(){return Ob||window.proj4};function Qb(a){this.Ca=a.code;this.f=a.units;this.i=void 0!==a.extent?a.extent:null;this.c=void 0!==a.qf?a.qf:"enu";this.g=void 0!==a.global?a.global:!1;this.b=!(!this.g||!this.i);this.s=a.Zl;this.j=null;this.o=a.Si;var b=a.code,d=Pb();"function"==typeof d&&(b=d.defs(b),void 0!==b&&(void 0!==b.axis&&void 0===a.qf&&(this.c=b.axis),void 0===a.Si&&(this.o=b.to_meter),void 0===a.units&&(this.f=b.units)))}Qb.prototype.H=function(){return this.i};function Rb(a){return a.o||Nb[a.f]};function Sb(a){Qb.call(this,{code:a,units:"m",extent:Vb,global:!0,Vq:Wb,Zl:function(a,d){return a/Gb(d[1]/6378137)}})}u(Sb,Qb);var Xb=6378137*Math.PI,Vb=[-Xb,-Xb,Xb,Xb],Wb=[-180,-85,180,85],Yb="EPSG:3857 EPSG:102100 EPSG:102113 EPSG:900913 urn:ogc:def:crs:EPSG:6.18:3:3857 urn:ogc:def:crs:EPSG::3857 http://www.opengis.net/gml/srs/epsg.xml#3857".split(" ").map(function(a){return new Sb(a)});
function Zb(a,b,d){var e=a.length;d=1<d?d:2;void 0===b&&(2<d?b=a.slice():b=Array(e));for(var f=0;f<e;f+=d){b[f]=Xb*a[f]/180;var g=6378137*Math.log(Math.tan(Math.PI*(a[f+1]+90)/360));g>Xb?g=Xb:g<-Xb&&(g=-Xb);b[f+1]=g}return b}function $b(a,b,d){var e=a.length;d=1<d?d:2;void 0===b&&(2<d?b=a.slice():b=Array(e));for(var f=0;f<e;f+=d)b[f]=180*a[f]/Xb,b[f+1]=360*Math.atan(Math.exp(a[f+1]/6378137))/Math.PI-90;return b};var ac=new Kb(6378137);function bc(a,b){Qb.call(this,{code:a,units:"degrees",extent:cc,qf:b,global:!0,Si:dc,Vq:cc})}u(bc,Qb);var cc=[-180,-90,180,90],dc=Math.PI*ac.radius/180,ec=[new bc("CRS:84"),new bc("EPSG:4326","neu"),new bc("urn:ogc:def:crs:EPSG::4326","neu"),new bc("urn:ogc:def:crs:EPSG:6.6:4326","neu"),new bc("urn:ogc:def:crs:OGC:1.3:CRS84"),new bc("urn:ogc:def:crs:OGC:2:84"),new bc("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new bc("urn:x-ogc:def:crs:EPSG:4326","neu")];var fc={};var gc={};function hc(a,b,d){a=a.Ca;b=b.Ca;a in gc||(gc[a]={});gc[a][b]=d}function ic(a,b){var d;a in gc&&b in gc[a]&&(d=gc[a][b]);return d};function jc(a,b,d){var e=a.s;e?b=e(b,d):"degrees"!=a.f&&(e=kc(a,lc("EPSG:4326")),b=[d[0]-b/2,d[1],d[0]+b/2,d[1],d[0],d[1]-b/2,d[0],d[1]+b/2],b=e(b,b,2),b=(Lb(Mb,b.slice(0,2),b.slice(2,4))+Lb(Mb,b.slice(4,6),b.slice(6,8)))/2,a=Rb(a),void 0!==a&&(b/=a));return b}function mc(a){nc(a);a.forEach(function(b){a.forEach(function(a){b!==a&&hc(b,a,pc)})})}function qc(a){fc[a.Ca]=a;hc(a,a,pc)}function nc(a){var b=[];a.forEach(function(a){b.push(qc(a))})}
function rc(a){return a?"string"===typeof a?lc(a):a:lc("EPSG:3857")}function sc(a){return function(b,d,e){var f=b.length;e=void 0!==e?e:2;d=void 0!==d?d:Array(f);var g,h;for(h=0;h<f;h+=e)for(g=a([b[h],b[h+1]]),d[h]=g[0],d[h+1]=g[1],g=e-1;2<=g;--g)d[h+g]=b[h+g];return d}}function lc(a){var b=null;if(a instanceof Qb)b=a;else if("string"===typeof a){var b=fc[a]||null,d=Pb();b||"function"!=typeof d||void 0===d.defs(a)||(b=new Qb({code:a}),qc(b))}return b}
function tc(a,b){if(a===b)return!0;var d=a.f===b.f;return a.Ca===b.Ca?d:kc(a,b)===pc&&d}function uc(a,b){a=lc(a);b=lc(b);return kc(a,b)}function kc(a,b){var d=a.Ca,e=b.Ca,f=ic(d,e);if(!f){var g=Pb();if("function"==typeof g){var h=g.defs(d),k=g.defs(e);void 0!==h&&void 0!==k&&(h===k?mc([b,a]):(g=g(e,d),f=g.forward,g=g.inverse,b=lc(b),a=lc(a),hc(b,a,sc(f)),hc(a,b,sc(g))),f=ic(d,e))}}f||(f=vc);return f}function vc(a,b){if(void 0!==b&&a!==b){for(var d=0,e=a.length;d<e;++d)b[d]=a[d];a=b}return a}
function pc(a,b){if(void 0!==b){for(var d=0,e=a.length;d<e;++d)b[d]=a[d];a=b}else a=a.slice();return a}function wc(a,b,d){return uc(b,d)(a,void 0,a.length)}function xc(a,b,d){b=uc(b,d);a=[a[0],a[1],a[0],a[3],a[2],a[1],a[2],a[3]];b(a,a,2);d=[a[0],a[2],a[4],a[6]];var e=[a[1],a[3],a[5],a[7]];a=Math.min.apply(null,d);b=Math.min.apply(null,e);d=Math.max.apply(null,d);e=Math.max.apply(null,e);return ob(a,b,d,e,void 0)}mc(Yb);mc(ec);ec.forEach(function(a){Yb.forEach(function(b){hc(a,b,Zb);hc(b,a,$b)})});function yc(){$a.call(this);this.s=gb();this.B=-1;this.f={};this.o=this.i=0}u(yc,$a);function zc(a,b){var d=[NaN,NaN];a.tb(b[0],b[1],d,Infinity);return d}yc.prototype.X=function(a){return this.lc(a[0],a[1])};yc.prototype.lc=Eb;yc.prototype.H=function(a){this.B!=this.g&&(this.s=this.Vd(this.s),this.B=this.g);var b=this.s;a?(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3]):a=b;return a};yc.prototype.transform=function(a,b){this.Pd(uc(a,b));return this};var Ac=/^#(?:[0-9a-f]{3}){1,2}$/i,Bc=/^([a-z]*)$/i;function Cc(a){return Array.isArray(a)?a:Ec(a)}function Fc(a){if("string"!==typeof a){var b=a[0];b!=(b|0)&&(b=b+.5|0);var d=a[1];d!=(d|0)&&(d=d+.5|0);var e=a[2];e!=(e|0)&&(e=e+.5|0);a="rgba("+b+","+d+","+e+","+(void 0===a[3]?1:a[3])+")"}return a}
var Ec=function(){var a={},b=0;return function(d){var e;if(a.hasOwnProperty(d))e=a[d];else{if(1024<=b){e=0;for(var f in a)e++&3||(delete a[f],--b)}e=d;var g;Bc.exec(e)&&(f=document.createElement("div"),f.style.color=e,document.body.appendChild(f),e=getComputedStyle(f).color,document.body.removeChild(f));if(Ac.exec(e)){g=e.length-1;Ja(3==g||6==g,54);var h=3==g?1:2;g=parseInt(e.substr(1+0*h,h),16);f=parseInt(e.substr(1+1*h,h),16);e=parseInt(e.substr(1+2*h,h),16);1==h&&(g=(g<<4)+g,f=(f<<4)+f,e=(e<<4)+
e);g=[g,f,e,1]}else e.indexOf("rgba(")?e.indexOf("rgb(")?Ja(!1,14):(e=e.slice(4,-1).split(",").map(Number),e.push(1),g=Gc(e)):(e=e.slice(5,-1).split(",").map(Number),g=Gc(e));e=g;a[d]=e;++b}return e}}();function Gc(a){var b=[];b[0]=Fb(a[0]+.5|0,0,255);b[1]=Fb(a[1]+.5|0,0,255);b[2]=Fb(a[2]+.5|0,0,255);b[3]=Fb(a[3],0,1);return b};function Hc(a){return"string"===typeof a||a instanceof CanvasPattern||a instanceof CanvasGradient?a:Fc(a)};function Ic(a,b){var d=document.createElement("CANVAS");a&&(d.width=a);b&&(d.height=b);return d.getContext("2d")}function Jc(a){a&&a.parentNode&&a.parentNode.removeChild(a)};var Kc="undefined"!==typeof navigator?navigator.userAgent.toLowerCase():"",Lc=-1!==Kc.indexOf("firefox"),Mc=-1!==Kc.indexOf("safari")&&-1==Kc.indexOf("chrom"),Nc=-1!==Kc.indexOf("webkit")&&-1==Kc.indexOf("edge"),Oc=-1!==Kc.indexOf("macintosh"),Pc=window.devicePixelRatio||1,Qc=!1,Rc=function(){if(!("HTMLCanvasElement"in window))return!1;try{var a=document.createElement("CANVAS").getContext("2d");return a?(void 0!==a.setLineDash&&(Qc=!0),!0):!1}catch(b){return!1}}(),Sc="ontouchstart"in window,Tc="PointerEvent"in
window,Uc=!!navigator.msPointerEnabled;var Vc=[0,0,0,1],Wc=[],Xc=[0,0,0,1];function Yc(a,b,d,e){b&&(a.translate(d,e),a.rotate(b),a.translate(-d,-e))};function Zc(a){this.G=a.opacity;this.R=a.wb;this.j=a.rotation;this.ia=a.scale;this.u=a.sb}Zc.prototype.getOpacity=function(){return this.G};Zc.prototype.Ha=function(){return this.ia};Zc.prototype.zd=function(a){this.j=a};function $c(a){this.B=this.s=this.i=null;this.Ga=void 0!==a.fill?a.fill:null;this.O=[0,0];this.b=a.points;this.c=void 0!==a.radius?a.radius:a.Zr;this.f=void 0!==a.sd?a.sd:this.c;this.o=void 0!==a.angle?a.angle:0;this.La=void 0!==a.stroke?a.stroke:null;this.D=this.M=this.N=null;this.C=a.Qd;ad(this,this.C);Zc.call(this,{opacity:1,wb:void 0!==a.wb?a.wb:!1,rotation:void 0!==a.rotation?a.rotation:0,scale:1,sb:void 0!==a.sb?a.sb:!0})}u($c,Zc);m=$c.prototype;
m.clone=function(){var a=new $c({fill:this.la()?this.la().clone():void 0,points:this.f!==this.c?this.b/2:this.b,radius:this.c,sd:this.f,angle:this.o,sb:this.u,stroke:this.pa()?this.pa().clone():void 0,rotation:this.j,wb:this.R,Qd:this.C}),b=this.getOpacity();a.G=b;a.ia=this.Ha();return a};m.fe=function(){return this.N};m.la=function(){return this.Ga};m.sj=function(){return this.B};m.ea=function(){return this.s};m.cg=function(){return this.D};m.Ee=function(){return 2};m.Fe=function(){return this.O};
m.ha=function(){return this.M};m.pa=function(){return this.La};m.Li=function(){};m.load=function(){};m.gk=function(){};
function ad(a,b){var d="",e="",f=0,g=null,h,k=0;a.La&&(h=a.La.qa(),null===h&&(h=Xc),h=Hc(h),k=a.La.c,void 0===k&&(k=1),g=a.La.b,Qc||(g=null),e=a.La.i,void 0===e&&(e="round"),d=a.La.f,void 0===d&&(d="round"),f=a.La.j,void 0===f&&(f=10));var l=2*(a.c+k)+1,d={strokeStyle:h,strokeWidth:k,size:l,lineCap:d,ca:g,lineJoin:e,miterLimit:f};if(void 0===b){var n=Ic(l,l);a.s=n.canvas;b=l=a.s.width;a.Rh(d,n,0,0);a.Ga?a.B=a.s:(n=Ic(d.size,d.size),a.B=n.canvas,a.Qh(d,n,0,0))}else l=Math.round(l),(e=!a.Ga)&&(n=a.Qh.bind(a,
d)),a.La?(f=a.La,void 0===f.g&&(f.g="s",f.g=f.s?"string"===typeof f.s?f.g+f.s:f.g+v(f.s).toString():f.g+"-",f.g+=","+(void 0!==f.f?f.f.toString():"-")+","+(f.b?f.b.toString():"-")+","+(void 0!==f.o?f.o:"-")+","+(void 0!==f.i?f.i:"-")+","+(void 0!==f.j?f.j.toString():"-")+","+(void 0!==f.c?f.c.toString():"-")),f=f.g):f="-",a.Ga?(g=a.Ga,void 0===g.b&&(g.b=g.c instanceof CanvasPattern||g.c instanceof CanvasGradient?v(g.c).toString():"f"+(g.c?Fc(g.c):"-")),g=g.b):g="-",a.i&&f==a.i[1]&&g==a.i[2]&&a.c==
a.i[3]&&a.f==a.i[4]&&a.o==a.i[5]&&a.b==a.i[6]||(a.i=["r"+f+g+(void 0!==a.c?a.c.toString():"-")+(void 0!==a.f?a.f.toString():"-")+(void 0!==a.o?a.o.toString():"-")+(void 0!==a.b?a.b.toString():"-"),f,g,a.c,a.f,a.o,a.b]),n=b.add(a.i[0],l,l,a.Rh.bind(a,d),n),a.s=n.image,a.O=[n.offsetX,n.offsetY],b=n.image.width,e?a.B=n.Wr:a.B=a.s;a.N=[l/2,l/2];a.M=[l,l];a.D=[b,b]}
m.Rh=function(a,b,d,e){var f;b.setTransform(1,0,0,1,0,0);b.translate(d,e);b.beginPath();if(Infinity===this.b)b.arc(a.size/2,a.size/2,this.c,0,2*Math.PI,!0);else for(this.f!==this.c&&(this.b*=2),d=0;d<=this.b;d++)e=2*d*Math.PI/this.b-Math.PI/2+this.o,f=d%2?this.f:this.c,b.lineTo(a.size/2+f*Math.cos(e),a.size/2+f*Math.sin(e));this.Ga&&(d=this.Ga.qa(),null===d&&(d=Vc),b.fillStyle=Hc(d),b.fill());this.La&&(b.strokeStyle=a.strokeStyle,b.lineWidth=a.strokeWidth,a.ca&&b.setLineDash(a.ca),b.lineCap=a.lineCap,
b.lineJoin=a.lineJoin,b.miterLimit=a.miterLimit,b.stroke());b.closePath()};
m.Qh=function(a,b,d,e){b.setTransform(1,0,0,1,0,0);b.translate(d,e);b.beginPath();if(Infinity===this.b)b.arc(a.size/2,a.size/2,this.c,0,2*Math.PI,!0);else{this.f!==this.c&&(this.b*=2);var f;for(d=0;d<=this.b;d++)f=2*d*Math.PI/this.b-Math.PI/2+this.o,e=d%2?this.f:this.c,b.lineTo(a.size/2+e*Math.cos(f),a.size/2+e*Math.sin(f))}b.fillStyle=Vc;b.fill();this.La&&(b.strokeStyle=a.strokeStyle,b.lineWidth=a.strokeWidth,a.ca&&b.setLineDash(a.ca),b.stroke());b.closePath()};function bd(a){a=a||{};$c.call(this,{points:Infinity,fill:a.fill,radius:a.radius,sb:a.sb,stroke:a.stroke,Qd:a.Qd})}u(bd,$c);bd.prototype.clone=function(){var a=new bd({fill:this.la()?this.la().clone():void 0,stroke:this.pa()?this.pa().clone():void 0,radius:this.c,sb:this.u,Qd:this.C}),b=this.getOpacity();a.G=b;a.ia=this.Ha();return a};bd.prototype.setRadius=function(a){this.c=a;ad(this,this.C)};function cd(a){a=a||{};this.c=void 0!==a.color?a.color:null;this.b=void 0}cd.prototype.clone=function(){var a=this.qa();return new cd({color:a&&a.slice?a.slice():a||void 0})};cd.prototype.qa=function(){return this.c};cd.prototype.wd=function(a){this.c=a;this.b=void 0};function dd(a){a=a||{};this.s=void 0!==a.color?a.color:null;this.f=a.lineCap;this.b=void 0!==a.ca?a.ca:null;this.o=a.lineDashOffset;this.i=a.lineJoin;this.j=a.miterLimit;this.c=a.width;this.g=void 0}m=dd.prototype;m.clone=function(){var a=this.qa();return new dd({color:a&&a.slice?a.slice():a||void 0,lineCap:this.f,ca:this.b?this.b.slice():void 0,lineDashOffset:this.o,lineJoin:this.i,miterLimit:this.j,width:this.c})};m.qa=function(){return this.s};m.wd=function(a){this.s=a;this.g=void 0};
m.setLineDash=function(a){this.b=a;this.g=void 0};m.Ad=function(a){this.c=a;this.g=void 0};function D(a){a=a||{};this.dc=null;this.jb=ed;void 0!==a.geometry&&this.setGeometry(a.geometry);this.Ga=void 0!==a.fill?a.fill:null;this.K=void 0!==a.image?a.image:null;this.La=void 0!==a.stroke?a.stroke:null;this.ya=void 0!==a.text?a.text:null;this.tk=a.zIndex}m=D.prototype;
m.clone=function(){var a=this.getGeometry();a&&a.clone&&(a=a.clone());return new D({geometry:a,fill:this.la()?this.la().clone():void 0,image:this.ea()?this.ea().clone():void 0,stroke:this.pa()?this.pa().clone():void 0,text:this.za()?this.za().clone():void 0,zIndex:this.getZIndex()})};m.getGeometry=function(){return this.dc};m.la=function(){return this.Ga};m.Vj=function(a){this.Ga=a};m.ea=function(){return this.K};m.pa=function(){return this.La};m.Wj=function(a){this.La=a};m.za=function(){return this.ya};
m.Yj=function(a){this.ya=a};m.getZIndex=function(){return this.tk};m.setGeometry=function(a){"function"===typeof a?this.jb=a:"string"===typeof a?this.jb=function(b){return b.get(a)}:a?a&&(this.jb=function(){return a}):this.jb=ed;this.dc=a};m.setZIndex=function(a){this.tk=a};function fd(a){if("function"!==typeof a){var b;Array.isArray(a)?b=a:(Ja(a instanceof D,41),b=[a]);a=function(){return b}}return a}var gd=null;
function hd(){if(!gd){var a=new cd({color:"rgba(255,255,255,0.4)"}),b=new dd({color:"#3399CC",width:1.25});gd=[new D({image:new bd({fill:a,stroke:b,radius:5}),fill:a,stroke:b})]}return gd}
function id(){var a={},b=[255,255,255,1],d=[0,153,255,1];a.Polygon=[new D({fill:new cd({color:[255,255,255,.5]})})];a.MultiPolygon=a.Polygon;a.LineString=[new D({stroke:new dd({color:b,width:5})}),new D({stroke:new dd({color:d,width:3})})];a.MultiLineString=a.LineString;a.Circle=a.Polygon.concat(a.LineString);a.Point=[new D({image:new bd({radius:6,fill:new cd({color:d}),stroke:new dd({color:b,width:1.5})}),zIndex:Infinity})];a.MultiPoint=a.Point;a.GeometryCollection=a.Polygon.concat(a.LineString,
a.Point);return a}function ed(a){return a.getGeometry()};function jd(a){$a.call(this);this.f=void 0;this.b="geometry";this.o=null;this.i=void 0;this.j=null;B(this,cb(this.b),this.qe,this);void 0!==a&&(a instanceof yc||!a?this.setGeometry(a):this.Ea(a))}u(jd,$a);m=jd.prototype;m.clone=function(){var a=new jd(db(this));kd(a,this.b);var b=this.getGeometry();b&&a.setGeometry(b.clone());(b=this.getStyle())&&a.setStyle(b);return a};m.getGeometry=function(){return this.get(this.b)};m.getStyle=function(){return this.o};m.Ho=function(){this.c()};
m.qe=function(){this.j&&(A(this.j),this.j=null);var a=this.getGeometry();a&&(this.j=B(a,"change",this.Ho,this));this.c()};m.setGeometry=function(a){this.set(this.b,a)};m.setStyle=function(a){this.i=(this.o=a)?ld(a):void 0;this.c()};function md(a,b){a.f=b;a.c()}function kd(a,b){Ta(a,cb(a.b),a.qe,a);a.b=b;B(a,cb(a.b),a.qe,a);a.qe()}
function ld(a){var b;if("function"===typeof a)2==a.length?b=function(b){return a(this,b)}:b=a;else{var d;Array.isArray(a)?d=a:(Ja(a instanceof D,41),d=[a]);b=function(){return d}}return b};function nd(){this.i=this.ub=null}function od(a,b,d){var e;d&&(e={Mb:d.Mb?d.Mb:a.Me(b),ib:d.ib});return pd(a,e)}function pd(a,b){return w({Mb:a.ub,ib:a.i},b)}function qd(a,b,d){var e=d?lc(d.ib):null,f=d?lc(d.Mb):null,g;e&&f&&!tc(e,f)?a instanceof yc?g=(b?a.clone():a).transform(b?e:f,b?f:e):g=xc(b?a.slice():a,b?e:f,b?f:e):g=a;if(b&&d&&d.decimals){var h=Math.pow(10,d.decimals);a=function(a){for(var b=0,d=a.length;b<d;++b)a[b]=Math.round(a[b]*h)/h;return a};Array.isArray(g)?a(g):g.Pd(a)}return g};function rd(){nd.call(this)}u(rd,nd);function sd(a){return"string"===typeof a?a:""}m=rd.prototype;m.getType=function(){return"text"};m.readFeature=function(a,b){return td(this,sd(a),pd(this,b))};m.readFeatures=function(a,b){a=sd(a);pd(this,b);b=[];for(a=a.substring(1);0<a.length;){var d=a.indexOf(")"),e=td(this,a.substring(0,d+1));b.push(e);a=a.substring(d+1)}return b};m.readGeometry=function(a,b){return ud(this,sd(a),pd(this,b))};m.Me=function(){return this.ub};
m.writeFeature=function(a,b){return vd(this,a,pd(this,b))};m.writeFeatures=function(a,b){b=pd(this,b);var d=[];if(0<a.length){d.push("F");for(var e=0,f=a.length;e<f;++e)d.push(vd(this,a[e],b))}return d.join("")};m.writeGeometry=function(a,b){return wd(this,a,pd(this,b))};function xd(a,b){return a>b?1:a<b?-1:0}function yd(a,b){return 0<=a.indexOf(b)}function zd(a,b,d){var e=a.length;if(a[0]<=b)return 0;if(!(b<=a[e-1]))if(0<d)for(d=1;d<e;++d){if(a[d]<b)return d-1}else if(0>d)for(d=1;d<e;++d){if(a[d]<=b)return d}else for(d=1;d<e;++d){if(a[d]==b)return d;if(a[d]<b)return a[d-1]-b<b-a[d]?d-1:d}return e-1}function Ad(a,b){var d=Array.isArray(b)?b:[b],e=d.length;for(b=0;b<e;b++)a[a.length]=d[b]}function Bd(a,b){b=a.indexOf(b);var d=-1<b;d&&a.splice(b,1);return d}
function Cd(a,b){for(var d=a.length>>>0,e,f=0;f<d;f++)if(e=a[f],b(e,f,a))return e;return null}function Dd(a,b){var d=a.length;if(d!==b.length)return!1;for(var e=0;e<d;e++)if(a[e]!==b[e])return!1;return!0}function Ed(a){var b=Fd,d=a.length,e=Array(a.length),f;for(f=0;f<d;f++)e[f]={index:f,value:a[f]};e.sort(function(a,d){return b(a.value,d.value)||a.index-d.index});for(f=0;f<a.length;f++)a[f]=e[f].value}function Gd(a,b){var d;return a.every(function(e,f){d=f;return!b(e,f,a)})?-1:d}
function Hd(a,b){var d=b||xd;return a.every(function(b,f){if(!f)return!0;b=d(a[f-1],b);return!(0<b||0===b)})};function Id(a,b,d,e,f,g){for(var h=g?g:[],k=0;b<d;b+=e){var l=a[b],n=a[b+1];h[k++]=f[0]*l+f[2]*n+f[4];h[k++]=f[1]*l+f[3]*n+f[5]}g&&h.length!=k&&(h.length=k);return h};function Jd(){yc.call(this);this.layout="XY";this.F=2;this.v=null}u(Jd,yc);function Kd(a){var b;"XY"==a?b=2:"XYZ"==a||"XYM"==a?b=3:"XYZM"==a&&(b=4);return b}m=Jd.prototype;m.lc=Eb;m.Vd=function(a){var b=this.v,d=this.v.length,e=this.F;a=pb(a);return tb(a,b,0,d,e)};function Ld(a){return a.v.slice(a.v.length-a.F)}
m.mg=function(a){this.o!=this.g&&(Ka(this.f),this.i=0,this.o=this.g);if(0>a||this.i&&a<=this.i)return this;var b=a.toString();if(this.f.hasOwnProperty(b))return this.f[b];var d=this.Cc(a);if(d.v.length<this.v.length)return this.f[b]=d;this.i=a;return this};m.Cc=function(){return this};function Nd(a,b,d){a.F=Kd(b);a.layout=b;a.v=d}
m.xb=function(a,b,d){if(a)b=Kd(a);else{for(a=0;a<d;++a)if(b.length)b=b[0];else{this.layout="XY";this.F=2;return}b=b.length;var e;2==b?e="XY":3==b?e="XYZ":4==b&&(e="XYZM");a=e}this.layout=a;this.F=b};m.Pd=function(a){this.v&&(a(this.v,this.v,this.F),this.c())};
m.rotate=function(a,b){var d=this.v;if(d){var e=d.length,f=this.F,g=d?d:[],h=Math.cos(a);a=Math.sin(a);var k=b[0];b=b[1];for(var l=0,n=0;n<e;n+=f){var p=d[n]-k,q=d[n+1]-b;g[l++]=k+p*h-q*a;g[l++]=b+p*a+q*h;for(p=n+2;p<n+f;++p)g[l++]=d[p]}d&&g.length!=l&&(g.length=l);this.c()}};
m.scale=function(a,b,d){var e=b;void 0===e&&(e=a);var f=d;f||(f=zb(this.H()));if(d=this.v){b=d.length;for(var g=this.F,h=d?d:[],k=f[0],f=f[1],l=0,n=0;n<b;n+=g){var p=d[n]-k,q=d[n+1]-f;h[l++]=k+a*p;h[l++]=f+e*q;for(p=n+2;p<n+g;++p)h[l++]=d[p]}d&&h.length!=l&&(h.length=l);this.c()}};m.translate=function(a,b){var d=this.v;if(d){var e=d.length,f=this.F,g=d?d:[],h=0,k,l;for(k=0;k<e;k+=f)for(g[h++]=d[k]+a,g[h++]=d[k+1]+b,l=k+2;l<k+f;++l)g[h++]=d[l];d&&g.length!=h&&(g.length=h);this.c()}};function Od(a,b,d,e,f,g,h){var k=a[b],l=a[b+1],n=a[d]-k,p=a[d+1]-l;if(n||p)if(g=((f-k)*n+(g-l)*p)/(n*n+p*p),1<g)b=d;else if(0<g){for(f=0;f<e;++f)k=a[b+f],h[f]=k+g*(a[d+f]-k);h.length=e;return}for(f=0;f<e;++f)h[f]=a[b+f];h.length=e}function Pd(a,b,d,e,f){var g=a[b],h=a[b+1];for(b+=e;b<d;b+=e){var k=a[b],l=a[b+1],g=Hb(g,h,k,l);g>f&&(f=g);g=k;h=l}return f}function Qd(a,b,d,e,f){var g,h;g=0;for(h=d.length;g<h;++g){var k=d[g];f=Pd(a,b,k,e,f);b=k}return f}
function Rd(a,b,d,e,f,g,h,k,l,n,p){if(b==d)return n;var q;if(!f){q=Hb(h,k,a[b],a[b+1]);if(q<n){for(p=0;p<e;++p)l[p]=a[b+p];l.length=e;return q}return n}for(var r=p?p:[NaN,NaN],t=b+e;t<d;)if(Od(a,t-e,t,e,h,k,r),q=Hb(h,k,r[0],r[1]),q<n){n=q;for(p=0;p<e;++p)l[p]=r[p];l.length=e;t+=e}else t+=e*Math.max((Math.sqrt(q)-Math.sqrt(n))/f|0,1);if(g&&(Od(a,d-e,b,e,h,k,r),q=Hb(h,k,r[0],r[1]),q<n)){n=q;for(p=0;p<e;++p)l[p]=r[p];l.length=e}return n}
function Sd(a,b,d,e,f,g,h,k,l,n,p){p=p?p:[NaN,NaN];var q,r;q=0;for(r=d.length;q<r;++q){var t=d[q];n=Rd(a,b,t,e,f,g,h,k,l,n,p);b=t}return n};function Td(a,b){var d=0,e,f;e=0;for(f=b.length;e<f;++e)a[d++]=b[e];return d}function Ud(a,b,d,e){var f,g;f=0;for(g=d.length;f<g;++f){var h=d[f],k;for(k=0;k<e;++k)a[b++]=h[k]}return b}function Vd(a,b,d,e,f){f=f?f:[];var g=0,h,k;h=0;for(k=d.length;h<k;++h)b=Ud(a,b,d[h],e),f[g++]=b;f.length=g;return f};function Wd(a,b,d,e,f){f=void 0!==f?f:[];for(var g=0;b<d;b+=e)f[g++]=a.slice(b,b+e);f.length=g;return f}function Xd(a,b,d,e,f){f=void 0!==f?f:[];var g=0,h,k;h=0;for(k=d.length;h<k;++h){var l=d[h];f[g++]=Wd(a,b,l,e,f[g]);b=l}f.length=g;return f};function Yd(a,b,d,e,f){var g=NaN,h=NaN,k=(d-b)/e;if(1===k)g=a[b],h=a[b+1];else if(2==k)g=.5*a[b]+.5*a[b+e],h=.5*a[b+1]+.5*a[b+e+1];else if(k){var h=a[b],k=a[b+1],l=0,g=[0],n;for(n=b+e;n<d;n+=e){var p=a[n],q=a[n+1],l=l+Math.sqrt((p-h)*(p-h)+(q-k)*(q-k));g.push(l);h=p;k=q}d=.5*l;l=0;n=g.length;for(p=!1;l<n;)h=l+(n-l>>1),k=+xd(g[h],d),0>k?l=h+1:(n=h,p=!k);h=p?l:~l;0>h?(d=(d-g[-h-2])/(g[-h-1]-g[-h-2]),b+=(-h-2)*e,g=a[b],g+=d*(a[b+e]-g),h=a[b+1],h+=d*(a[b+e+1]-h)):(g=a[b+h*e],h=a[b+h*e+1])}return f?(f[0]=
g,f[1]=h,f):[g,h]};function Zd(a,b,d,e,f){return!ub(f,function(f){return!$d(a,b,d,e,f[0],f[1])})}function $d(a,b,d,e,f,g){for(var h=0,k=a[d-e],l=a[d-e+1];b<d;b+=e){var n=a[b],p=a[b+1];l<=g?p>g&&0<(n-k)*(g-l)-(f-k)*(p-l)&&h++:p<=g&&0>(n-k)*(g-l)-(f-k)*(p-l)&&h--;k=n;l=p}return!!h}function ae(a,b,d,e,f,g){if(!d.length||!$d(a,b,d[0],e,f,g))return!1;var h;b=1;for(h=d.length;b<h;++b)if($d(a,d[b-1],d[b],e,f,g))return!1;return!0};function be(a,b,d,e,f,g){for(var h=[a[b],a[b+1]],k=[],l;b+e<d;b+=e){k[0]=a[b+e];k[1]=a[b+e+1];if(l=f.call(g,h,k))return l;h[0]=k[0];h[1]=k[1]}return!1};function ce(a,b,d,e,f){var g=tb(gb(),a,b,d,e);return Cb(f,g)?lb(f,g)||g[0]>=f[0]&&g[2]<=f[2]||g[1]>=f[1]&&g[3]<=f[3]?!0:be(a,b,d,e,function(a,b){var d=!1,e=nb(f,a),g=nb(f,b);if(1===e||1===g)d=!0;else{var h=f[0],k=f[1],t=f[2],C=f[3],x=b[0];b=b[1];a=(b-a[1])/(x-a[0]);g&2&&!(e&2)&&(d=x-(b-C)/a,d=d>=h&&d<=t);d||!(g&4)||e&4||(d=b-(x-t)*a,d=d>=k&&d<=C);d||!(g&8)||e&8||(d=x-(b-k)/a,d=d>=h&&d<=t);d||!(g&16)||e&16||(d=b-(x-h)*a,d=d>=k&&d<=C)}return d}):!1}
function de(a,b,d,e,f){var g=d[0];if(!(ce(a,b,g,e,f)||$d(a,b,g,e,f[0],f[1])||$d(a,b,g,e,f[0],f[3])||$d(a,b,g,e,f[2],f[1])||$d(a,b,g,e,f[2],f[3])))return!1;if(1===d.length)return!0;b=1;for(g=d.length;b<g;++b)if(Zd(a,d[b-1],d[b],e,f))return!1;return!0};function ee(a,b,d,e,f,g,h){var k=(d-b)/e;if(3>k){for(;b<d;b+=e)g[h++]=a[b],g[h++]=a[b+1];return h}var l=Array(k);l[0]=1;l[k-1]=1;d=[b,d-e];for(var n=0,p;0<d.length;){var q=d.pop(),r=d.pop(),t=0,C=a[r],x=a[r+1],K=a[q],L=a[q+1];for(p=r+e;p<q;p+=e){var M;M=a[p];var N=a[p+1],G=C,Z=x,z=K-G,y=L-Z;if(z||y){var Q=((M-G)*z+(N-Z)*y)/(z*z+y*y);1<Q?(G=K,Z=L):0<Q&&(G+=z*Q,Z+=y*Q)}M=Hb(M,N,G,Z);M>t&&(n=p,t=M)}t>f&&(l[(n-b)/e]=1,r+e<n&&d.push(r,n),n+e<q&&d.push(n,q))}for(p=0;p<k;++p)l[p]&&(g[h++]=a[b+p*e],g[h++]=
a[b+p*e+1]);return h}
function fe(a,b,d,e,f,g,h,k){var l,n;l=0;for(n=d.length;l<n;++l){var p=d[l];a:{var q,r=a,t=p,C=e,x=f,K=g,L=h;if(b!=t){var M=x*Math.round(r[b]/x),N=x*Math.round(r[b+1]/x);b+=C;K[L++]=M;K[L++]=N;do if(q=x*Math.round(r[b]/x),h=x*Math.round(r[b+1]/x),b+=C,b==t){K[L++]=q;K[L++]=h;h=L;break a}while(q==M&&h==N);for(;b<t;){var G,Z;G=x*Math.round(r[b]/x);Z=x*Math.round(r[b+1]/x);b+=C;if(G!=q||Z!=h){var z=q-M,y=h-N,Q=G-M,ea=Z-N;z*ea==y*Q&&(0>z&&Q<z||z==Q||0<z&&Q>z)&&(0>y&&ea<y||y==ea||0<y&&ea>y)||(K[L++]=q,
K[L++]=h,M=q,N=h);q=G;h=Z}}K[L++]=q;K[L++]=h}h=L}k.push(h);b=p}return h};function ge(a,b){Jd.call(this);this.b=null;this.u=this.C=this.j=-1;this.fa(a,b)}u(ge,Jd);m=ge.prototype;m.clone=function(){var a=new ge(null);he(a,this.layout,this.v.slice());return a};m.tb=function(a,b,d,e){if(e<kb(this.H(),a,b))return e;this.u!=this.g&&(this.C=Math.sqrt(Pd(this.v,0,this.v.length,this.F,0)),this.u=this.g);return Rd(this.v,0,this.v.length,this.F,this.C,!1,a,b,d,e)};function ie(a,b){be(a.v,0,a.v.length,a.F,b,void 0)}m.J=function(){return Wd(this.v,0,this.v.length,this.F)};
function je(a,b){return Yd(a.v,0,a.v.length,a.F,b)}function ke(a){var b=a.v,d=a.F,e=b[0],f=b[1],g=0,h;for(h=0+d;h<a.v.length;h+=d)var k=b[h],l=b[h+1],g=g+Math.sqrt((k-e)*(k-e)+(l-f)*(l-f)),e=k,f=l;return g}function le(a){a.j!=a.g&&(a.b=je(a,a.b),a.j=a.g);return a.b}m.Cc=function(a){var b=[];b.length=ee(this.v,0,this.v.length,this.F,a,b,0);a=new ge(null);he(a,"XY",b);return a};m.getType=function(){return"LineString"};m.qb=function(a){return ce(this.v,0,this.v.length,this.F,a)};
m.fa=function(a,b){a?(this.xb(b,a,1),this.v||(this.v=[]),this.v.length=Ud(this.v,0,a,this.F),this.c()):he(this,"XY",null)};function he(a,b,d){Nd(a,b,d);a.c()};function me(a,b,d,e,f){Xa.call(this);this.g=f;this.extent=a;this.gb=d;this.resolution=b;this.state=e}u(me,Xa);function ne(a){a.dispatchEvent("change")}me.prototype.H=function(){return this.extent};me.prototype.S=function(){return this.resolution};me.prototype.getState=function(){return this.state};function oe(a,b){this.B=a;this.f=b;this.c=[];this.b=[];this.g={}}oe.prototype.clear=function(){this.c.length=0;this.b.length=0;Ka(this.g)};oe.prototype.o=function(a){Ja(!(this.f(a)in this.g),31);var b=this.B(a);return Infinity!=b?(this.c.push(a),this.b.push(b),this.g[this.f(a)]=!0,pe(this,0,this.c.length-1),!0):!1};function qe(a,b){for(var d=a.c,e=a.b,f=d.length,g=d[b],h=e[b],k=b;b<f>>1;){var l=2*b+1,n=2*b+2,l=n<f&&e[n]<e[l]?n:l;d[b]=d[l];e[b]=e[l];b=l}d[b]=g;e[b]=h;pe(a,k,b)}
function pe(a,b,d){var e=a.c;a=a.b;for(var f=e[d],g=a[d];d>b;){var h=d-1>>1;if(a[h]>g)e[d]=e[h],a[d]=a[h],d=h;else break}e[d]=f;a[d]=g};function re(a,b){oe.call(this,function(b){return a.apply(null,b)},function(a){return a[0].kc()});this.u=b;this.j=0;this.i={}}u(re,oe);re.prototype.o=function(a){var b=oe.prototype.o.call(this,a);b&&B(a[0],"change",this.s,this);return b};re.prototype.s=function(a){a=a.target;var b=a.getState();if(2===b||3===b||4===b||5===b)Ta(a,"change",this.s,this),a=a.kc(),a in this.i&&(delete this.i[a],--this.j),this.u()};var se;
(function(){var a={},b={Va:a};(function(d){if("object"===typeof a&&"undefined"!==typeof b)b.Va=d();else{var e;"undefined"!==typeof window?e=window:"undefined"!==typeof global?e=global:"undefined"!==typeof self?e=self:e=this;e.Yr=d()}})(function(){return function e(a,b,h){function f(k,l){if(!b[k]){if(!a[k]){var n="function"==typeof require&&require;if(!l&&n)return n(k,!0);if(g)return g(k,!0);l=Error("Cannot find module '"+k+"'");throw l.code="MODULE_NOT_FOUND",l;}l=b[k]={Va:{}};a[k][0].call(l.Va,function(b){var e=
a[k][1][b];return f(e?e:b)},l,l.Va,e,a,b,h)}return b[k].Va}for(var g="function"==typeof require&&require,n=0;n<h.length;n++)f(h[n]);return f}({1:[function(a,b,g){a=a("./processor");g.Dr=a},{"./processor":2}],2:[function(a,b){function e(a){var b=!0;try{new ImageData(10,10)}catch(r){b=!1}return function(e){var f=e.buffers,g=e.meta,h=e.width,k=e.height,l=f.length,n=f[0].byteLength;if(e.imageOps){n=Array(l);for(e=0;e<l;++e){var p=n,q=e,r;r=new Uint8ClampedArray(f[e]);var z=h,y=k;r=b?new ImageData(r,z,
y):{data:r,width:z,height:y};p[q]=r}h=a(n,g).data}else{h=new Uint8ClampedArray(n);k=Array(l);p=Array(l);for(e=0;e<l;++e)k[e]=new Uint8ClampedArray(f[e]),p[e]=[0,0,0,0];for(f=0;f<n;f+=4){for(e=0;e<l;++e)q=k[e],p[e][0]=q[f],p[e][1]=q[f+1],p[e][2]=q[f+2],p[e][3]=q[f+3];e=a(p,g);h[f]=e[0];h[f+1]=e[1];h[f+2]=e[2];h[f+3]=e[3]}}return h.buffer}}function f(a,b){var f=Object.keys(a.Mn||{}).map(function(b){return"var "+b+" = "+a.Mn[b].toString()+";"}).concat(["var __minion__ = ("+e.toString()+")(",a.xp.toString(),
");",'self.addEventListener("message", function(event) {',"  var buffer = __minion__(event.data);","  self.postMessage({buffer: buffer, meta: event.data.meta}, [buffer]);","});"]),f=URL.createObjectURL(new Blob(f,{type:"text/javascript"})),f=new Worker(f);f.addEventListener("message",b);return f}function k(a,b){var f=e(a.xp);return{postMessage:function(a){setTimeout(function(){b({data:{buffer:f(a),meta:a.meta}})},0)}}}function l(a){this.jf=!!a.Xr;var b;0===a.Dq?b=0:this.jf?b=1:b=a.Dq||1;var e=[];
if(b)for(var g=0;g<b;++g)e[g]=f(a,this.rh.bind(this,g));else e[0]=k(a,this.rh.bind(this,0));this.Ld=e;this.sh=[];this.Kd=0;this.uc={};this.kf=null}var n=a("./util").ko;l.prototype.destroy=function(){for(var a in this)this[a]=null;this.Vk=!0};l.prototype.Wk=function(){if(0===this.Kd&&0<this.sh.length){var a=this.kf=this.sh.shift(),b=a.inputs[0].width,e=a.inputs[0].height,f=a.inputs.map(function(a){return a.data.buffer}),g=this.Ld.length;this.Kd=g;if(1===g)this.Ld[0].postMessage({buffers:f,meta:a.Un,
imageOps:this.jf,width:b,height:e},f);else for(var h=4*Math.ceil(a.inputs[0].data.length/4/g),k=0;k<g;++k){for(var l=k*h,n=[],N=0,G=f.length;N<G;++N)n.push(f[k].slice(l,l+h));this.Ld[k].postMessage({buffers:n,meta:a.Un,imageOps:this.jf,width:b,height:e},n)}}};l.prototype.rh=function(a,b){this.Vk||(this.uc[a]=b.data,--this.Kd,0===this.Kd&&this.Yk())};l.prototype.Yk=function(){var a=this.kf,b=this.Ld.length,e,f;if(1===b)e=new Uint8ClampedArray(this.uc[0].buffer),f=this.uc[0].meta;else{var g=a.inputs[0].data.length;
e=new Uint8ClampedArray(g);f=Array(g);for(var g=4*Math.ceil(g/4/b),h=0;h<b;++h){var k=h*g;e.set(new Uint8ClampedArray(this.uc[h].buffer),k);f[h]=this.uc[h].meta}}this.kf=null;this.uc={};a.callback(null,n(e,a.inputs[0].width,a.inputs[0].height),f);this.Wk()};b.Va=l},{"./util":3}],3:[function(a,b,g){var e=!0;try{new ImageData(10,10)}catch(l){e=!1}var f=document.createElement("canvas").getContext("2d");g.ko=function(a,b,g){if(e)return new ImageData(a,b,g);b=f.createImageData(b,g);b.data.set(a);return b}},
{}]},{},[1])(1)})})();function te(a){$a.call(this);var b=w({},a);b.opacity=void 0!==a.opacity?a.opacity:1;b.visible=void 0!==a.visible?a.visible:!0;b.zIndex=void 0!==a.zIndex?a.zIndex:0;b.maxResolution=void 0!==a.maxResolution?a.maxResolution:Infinity;b.minResolution=void 0!==a.minResolution?a.minResolution:0;this.Ea(b);this.b={layer:this,yg:!0}}u(te,$a);
function ue(a){a.b.opacity=Fb(a.getOpacity(),0,1);a.b.Aq=a.ng();a.b.visible=ve(a);a.b.extent=a.H();a.b.zIndex=a.getZIndex();a.b.maxResolution=a.get("maxResolution");a.b.minResolution=Math.max(a.get("minResolution"),0);return a.b}te.prototype.H=function(){return this.get("extent")};te.prototype.getOpacity=function(){return this.get("opacity")};function ve(a){return a.get("visible")}te.prototype.getZIndex=function(){return this.get("zIndex")};function we(a,b){a.set("visible",b)}
te.prototype.setZIndex=function(a){this.set("zIndex",a)};function xe(a){var b=w({},a);delete b.source;te.call(this,b);this.j=this.i=this.f=null;a.map&&this.setMap(a.map);B(this,cb("source"),this.pn,this);this.set("source",a.source?a.source:null)}u(xe,te);m=xe.prototype;m.dg=function(a){a=a?a:[];a.push(ue(this));return a};function E(a){return a.get("source")||null}m.ng=function(){var a=E(this);return a?a.getState():"undefined"};m.nn=function(){this.c()};
m.pn=function(){this.j&&(A(this.j),this.j=null);var a=E(this);a&&(this.j=B(a,"change",this.nn,this));this.c()};m.setMap=function(a){this.f&&(A(this.f),this.f=null);a||this.c();this.i&&(A(this.i),this.i=null);a&&(this.f=B(a,"precompose",function(a){var b=ue(this);b.yg=!1;b.zIndex=Infinity;a.frameState.nd.push(b);a.frameState.xe[v(this)]=b},this),this.i=B(this,"change",a.render,a),this.c())};function ye(a,b,d){a=void 0!==d?a.toFixed(d):""+a;d=a.indexOf(".");d=-1===d?a.length:d;return d>b?a:Array(1+b-d).join("0")+a};function ze(a,b){var d=a[0];a=a[1];var e=b[0],f=b[1];b=e[0];var e=e[1],g=f[0],f=f[1],h=g-b,k=f-e,d=h||k?(h*(d-b)+k*(a-e))/(h*h+k*k||0):0;0>=d?(a=b,d=e):1<=d?(a=g,d=f):(a=b+d*h,d=e+d*k);return[a,d]}function Ae(a,b){for(var d=!0,e=a.length-1;0<=e;--e)if(a[e]!=b[e]){d=!1;break}return d}function Be(a,b){var d=Math.cos(b);b=Math.sin(b);var e=a[1]*d+a[0]*b;a[0]=a[0]*d-a[1]*b;a[1]=e}function Ce(a,b){var d=a[0]-b[0];a=a[1]-b[1];return d*d+a*a}function De(a,b){return Math.sqrt(Ce(a,b))}
function Ee(a,b){return Ce(a,ze(a,b))};function Fe(a,b,d,e,f){Va.call(this,a);this.vectorContext=b;this.frameState=d;this.context=e;this.glContext=f}u(Fe,Va);function Ge(){}m=Ge.prototype;m.setStyle=function(){};m.If=function(){};m.Jf=function(){};m.Kf=function(){};m.Lf=function(){};m.Mf=function(){};m.drawPoint=function(){};m.Nf=function(){};m.drawText=function(){};m.Lb=function(){};m.xd=function(){};m.zb=function(){};function He(){return[1,0,0,1,0,0]}function Ie(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];return a}function Je(a,b){var d=b[0],e=b[1];b[0]=a[0]*d+a[2]*e+a[4];b[1]=a[1]*d+a[3]*e+a[5];return b}function Ke(a,b,d,e,f,g,h,k){var l=Math.sin(g);g=Math.cos(g);a[0]=e*g;a[1]=f*l;a[2]=-e*l;a[3]=f*g;a[4]=h*e*g-k*e*l+b;a[5]=h*f*l+k*f*g+d;return a};function Le(a,b,d,e,f){this.g=a;this.gb=b;this.i=d;this.C=e;this.Zb=f;this.K=this.c=this.b=this.X=this.M=this.ia=null;this.Oa=this.V=this.B=this.D=this.R=this.N=0;this.da=!1;this.f=this.ta=0;this.Qa=!1;this.O=0;this.ya="";this.Ta=this.Bb=0;this.eb=!1;this.o=this.fb=0;this.G=this.s=this.j=null;this.u=[];this.Cb=He()}u(Le,Ge);
function Me(a,b,d){if(a.K){b=Id(b,0,d,2,a.C,a.u);d=a.g;var e=a.Cb,f=d.globalAlpha;1!=a.B&&(d.globalAlpha=f*a.B);var g=a.ta;a.da&&(g+=a.Zb);var h,k;h=0;for(k=b.length;h<k;h+=2){var l=b[h]-a.N,n=b[h+1]-a.R;a.Qa&&(l=Math.round(l),n=Math.round(n));if(g||1!=a.f){var p=l+a.N,q=n+a.R;Ke(e,p,q,a.f,a.f,g,-p,-q);d.setTransform.apply(d,e)}d.drawImage(a.K,a.V,a.Oa,a.O,a.D,l,n,a.O,a.D)}(g||1!=a.f)&&d.setTransform(1,0,0,1,0,0);1!=a.B&&(d.globalAlpha=f)}}
function Ne(a,b,d,e){var f=0;if(a.G&&""!==a.ya){a.j&&Oe(a,a.j);a.s&&Pe(a,a.s);var g=a.G,h=a.g,k=a.X;k?(k.font!=g.font&&(k.font=h.font=g.font),k.textAlign!=g.textAlign&&(k.textAlign=h.textAlign=g.textAlign),k.textBaseline!=g.textBaseline&&(k.textBaseline=h.textBaseline=g.textBaseline)):(h.font=g.font,h.textAlign=g.textAlign,h.textBaseline=g.textBaseline,a.X={font:g.font,textAlign:g.textAlign,textBaseline:g.textBaseline});b=Id(b,f,d,e,a.C,a.u);g=a.g;h=a.fb;for(a.eb&&(h+=a.Zb);f<d;f+=e){var k=b[f]+a.Bb,
l=b[f+1]+a.Ta;if(h||1!=a.o){var n=Ke(a.Cb,k,l,a.o,a.o,h,-k,-l);g.setTransform.apply(g,n)}a.s&&g.strokeText(a.ya,k,l);a.j&&g.fillText(a.ya,k,l)}(h||1!=a.o)&&g.setTransform(1,0,0,1,0,0)}}function Qe(a,b,d,e,f,g){var h=a.g;a=Id(b,d,e,f,a.C,a.u);h.moveTo(a[0],a[1]);b=a.length;g&&(b-=2);for(d=2;d<b;d+=2)h.lineTo(a[d],a[d+1]);g&&h.closePath();return e}function Re(a,b,d,e,f){var g,h;g=0;for(h=e.length;g<h;++g)d=Qe(a,b,d,e[g],f,!0);return d}m=Le.prototype;
m.If=function(a){if(Cb(this.i,a.H())){if(this.b||this.c){this.b&&Oe(this,this.b);this.c&&Pe(this,this.c);var b;b=(b=a.v)?Id(b,0,b.length,a.F,this.C,this.u):null;var d=b[2]-b[0],e=b[3]-b[1],d=Math.sqrt(d*d+e*e),e=this.g;e.beginPath();e.arc(b[0],b[1],d,0,2*Math.PI);this.b&&e.fill();this.c&&e.stroke()}""!==this.ya&&Ne(this,a.getCenter(),2,2)}};m.setStyle=function(a){this.Lb(a.la(),a.pa());this.xd(a.ea());this.zb(a.za())};
m.drawPoint=function(a){var b=a.v;a=a.F;this.K&&Me(this,b,b.length);""!==this.ya&&Ne(this,b,b.length,a)};m.Lf=function(a){var b=a.v;a=a.F;this.K&&Me(this,b,b.length);""!==this.ya&&Ne(this,b,b.length,a)};m.Jf=function(a){if(Cb(this.i,a.H())){if(this.c){Pe(this,this.c);var b=this.g,d=a.v;b.beginPath();Qe(this,d,0,d.length,a.F,!1);b.stroke()}""!==this.ya&&(a=le(a),Ne(this,a,2,2))}};
m.Kf=function(a){var b=a.H();if(Cb(this.i,b)){if(this.c){Pe(this,this.c);var b=this.g,d=a.v,e=0,f=a.Za,g=a.F;b.beginPath();var h,k;h=0;for(k=f.length;h<k;++h)e=Qe(this,d,e,f[h],g,!1);b.stroke()}""!==this.ya&&(a=Se(a),Ne(this,a,a.length,2))}};m.Nf=function(a){if(Cb(this.i,a.H())){if(this.c||this.b){this.b&&Oe(this,this.b);this.c&&Pe(this,this.c);var b=this.g;b.beginPath();Re(this,Te(a),0,a.ua,a.F);this.b&&b.fill();this.c&&b.stroke()}""!==this.ya&&(a=Ue(a),Ne(this,a,2,2))}};
m.Mf=function(a){if(Cb(this.i,a.H())){if(this.c||this.b){this.b&&Oe(this,this.b);this.c&&Pe(this,this.c);var b=this.g,d=Ve(a),e=0,f=a.b,g=a.F,h,k;b.beginPath();h=0;for(k=f.length;h<k;++h)e=Re(this,d,e,f[h],g);this.b&&b.fill();this.c&&b.stroke()}""!==this.ya&&(a=We(a),Ne(this,a,a.length,2))}};function Oe(a,b){var d=a.g,e=a.ia;e?e.fillStyle!=b.fillStyle&&(e.fillStyle=d.fillStyle=b.fillStyle):(d.fillStyle=b.fillStyle,a.ia={fillStyle:b.fillStyle})}
function Pe(a,b){var d=a.g,e=a.M;e?(e.lineCap!=b.lineCap&&(e.lineCap=d.lineCap=b.lineCap),Qc&&!Dd(e.ca,b.ca)&&d.setLineDash(e.ca=b.ca),e.lineJoin!=b.lineJoin&&(e.lineJoin=d.lineJoin=b.lineJoin),e.lineWidth!=b.lineWidth&&(e.lineWidth=d.lineWidth=b.lineWidth),e.miterLimit!=b.miterLimit&&(e.miterLimit=d.miterLimit=b.miterLimit),e.strokeStyle!=b.strokeStyle&&(e.strokeStyle=d.strokeStyle=b.strokeStyle)):(d.lineCap=b.lineCap,Qc&&d.setLineDash(b.ca),d.lineJoin=b.lineJoin,d.lineWidth=b.lineWidth,d.miterLimit=
b.miterLimit,d.strokeStyle=b.strokeStyle,a.M={lineCap:b.lineCap,ca:b.ca,lineJoin:b.lineJoin,lineWidth:b.lineWidth,miterLimit:b.miterLimit,strokeStyle:b.strokeStyle})}m.Lb=function(a,b){a?(a=a.qa(),this.b={fillStyle:Hc(a?a:Vc)}):this.b=null;if(b){a=b.qa();var d=b.f,e=b.b,f=b.o,g=b.i,h=b.c;b=b.j;this.c={lineCap:void 0!==d?d:"round",ca:e?e:Wc,lineDashOffset:f?f:0,lineJoin:void 0!==g?g:"round",lineWidth:this.gb*(void 0!==h?h:1),miterLimit:void 0!==b?b:10,strokeStyle:Hc(a?a:Xc)}}else this.c=null};
m.xd=function(a){if(a){var b=a.fe(),d=a.ea(1),e=a.Fe(),f=a.ha();this.N=b[0];this.R=b[1];this.D=f[1];this.K=d;this.B=a.getOpacity();this.V=e[0];this.Oa=e[1];this.da=a.R;this.ta=a.j;this.f=a.Ha();this.Qa=a.u;this.O=f[0]}else this.K=null};
m.zb=function(a){if(a){var b=a.la();b?(b=b.qa(),this.j={fillStyle:Hc(b?b:Vc)}):this.j=null;var d=a.pa();if(d){var b=d.qa(),e=d.f,f=d.b,g=d.o,h=d.i,k=d.c,d=d.j;this.s={lineCap:void 0!==e?e:"round",ca:f?f:Wc,lineDashOffset:g?g:0,lineJoin:void 0!==h?h:"round",lineWidth:void 0!==k?k:1,miterLimit:void 0!==d?d:10,strokeStyle:Hc(b?b:Xc)}}else this.s=null;var b=a.c,e=a.b,f=a.g,g=a.j,h=a.f,k=a.Ha(),d=a.za(),l=a.i;a=a.o;this.G={font:void 0!==b?b:"10px sans-serif",textAlign:void 0!==l?l:"center",textBaseline:void 0!==
a?a:"middle"};this.ya=void 0!==d?d:"";this.Bb=void 0!==e?this.gb*e:0;this.Ta=void 0!==f?this.gb*f:0;this.eb=void 0!==g?g:!1;this.fb=void 0!==h?h:0;this.o=this.gb*(void 0!==k?k:1)}else this.ya=""};function Xe(a){Ya.call(this);this.X=a}u(Xe,Ya);Xe.prototype.j=Ga;function Ye(a,b,d){return function(e,f){return Ze(a,b,e,f,function(a){d[e]||(d[e]={});d[e][a.Ab.toString()]=a})}}Xe.prototype.xa=function(){return this.X};Xe.prototype.M=function(a){2===a.target.getState()&&$e(this)};function $e(a){var b=a.xa();ve(b)&&"ready"==b.ng()&&a.c()}function af(a,b){b.pj()&&(b=function(a,b,f){b=v(a).toString();a.zc(f.ka.projection,f.gh[b])}.bind(null,b),a.He.push(b))}
function bf(a,b){if(b){var d,e,f;e=0;for(f=b.length;e<f;++e)d=b[e],a[v(d).toString()]=d}}function cf(a,b){b=b.Qa;void 0!==b&&("string"===typeof b?a.Ic[b]="":b&&(Ja("string"==typeof b.href,44),Ja("string"==typeof b.src,45),a.Ic[b.src]=b.href))};function df(a){Xe.call(this,a);this.V=He()}u(df,Xe);function ef(a,b,d){var e=b.Ka,f=b.size[0]*e,g=b.size[1]*e,h=b.ka.rotation,k=[d[0],d[3]],l=[d[2],d[3]],n=[d[2],d[1]];d=[d[0],d[1]];Je(b.xc,k);Je(b.xc,l);Je(b.xc,n);Je(b.xc,d);a.save();Yc(a,-h,f/2,g/2);a.beginPath();a.moveTo(k[0]*e,k[1]*e);a.lineTo(l[0]*e,l[1]*e);a.lineTo(n[0]*e,n[1]*e);a.lineTo(d[0]*e,d[1]*e);a.clip();Yc(a,h,f/2,g/2)}
function ff(a,b,d,e,f){var g=a.xa();if(g.hasListener(b)){var h=e.size[0]*e.Ka,k=e.size[1]*e.Ka,l=e.ka.rotation;Yc(d,-l,h/2,k/2);a=f?f:gf(a,e,0);g.dispatchEvent(new Fe(b,new Le(d,e.Ka,e.extent,a,e.ka.rotation),e,d,null));Yc(d,l,h/2,k/2)}}df.prototype.B=function(a,b,d,e){if(this.j(a,b,0,Db,this))return d.call(e,this.xa(),null)};function gf(a,b,d){var e=b.ka,f=b.Ka,g=f/e.resolution;return Ke(a.V,f*b.size[0]/2,f*b.size[1]/2,g,-g,-e.rotation,-e.center[0]+d,-e.center[1])};function hf(a){df.call(this,a);this.s=He();this.f=null}u(hf,df);hf.prototype.C=function(a,b,d){ff(this,"precompose",d,a,void 0);var e=this.ea();if(e){var f=b.extent,g=void 0!==f&&!lb(f,a.extent)&&Cb(f,a.extent);g&&ef(d,a,f);var f=this.D(),h=d.globalAlpha;d.globalAlpha=b.opacity;d.drawImage(e,0,0,+e.width,+e.height,Math.round(f[4]),Math.round(f[5]),Math.round(e.width*f[0]),Math.round(e.height*f[3]));d.globalAlpha=h;g&&d.restore()}ff(this,"postcompose",d,a,void 0)};
hf.prototype.j=function(a,b,d,e,f){var g=this.xa();return E(g).oj(a,b.ka.resolution,b.ka.rotation,d,b.Tg,function(a){return e.call(f,a,g)})};
hf.prototype.B=function(a,b,d,e){if(this.ea()){if(E(this.xa()).oj!==Ga)return df.prototype.B.apply(this,arguments);var f=Je(this.s,a.slice()),g=f,h=b.ka.resolution/this.b;g[0]*=h;g[1]*=h;this.f||(this.f=Ic(1,1));this.f.clearRect(0,0,1,1);this.f.drawImage(this.ea(),f[0],f[1],1,1,0,0,1,1);f=this.f.getImageData(0,0,1,1).data;if(0<f[3])return d.call(e,this.xa(),f)}};function jf(a){hf.call(this,a);this.K=null;this.i=He()}u(jf,hf);jf.prototype.ea=function(){return this.K?this.K.ea():null};jf.prototype.D=function(){return this.i};
jf.prototype.u=function(a,b){var d=a.Ka,e=a.size,f=a.ka,g=f.center,h=f.resolution,k=E(this.xa()),l=a.Yb,n=a.extent;void 0!==b.extent&&(n=Bb(n,b.extent));if(!l[0]&&!l[1]&&!wb(n)){if(f=b=k.ea(n,h,d,f.projection))f=b,l=f.getState(),2!=l&&3!=l&&B(f,"change",this.M,this),0==l&&(f.load(),l=f.getState()),f=2==l;f&&(this.K=b)}if(this.K){b=this.K;var l=b.H(),n=b.S(),f=b.gb,p=d*n/(h*f),l=Ke(this.i,d*e[0]/2,d*e[1]/2,p,p,0,f*(l[0]-g[0])/n,f*(g[1]-l[3])/n);Ke(this.s,d*e[0]/2-l[4],d*e[1]/2-l[5],d/h,-d/h,0,-g[0],
-g[1]);bf(a.Fa,b.g);cf(a,k);this.b=h*d/f}return!!this.K};var kf=["Polygon","Circle","LineString","Image","Text"];function lf(){};function mf(a,b,d,e){for(var f=0,g=a[d-e],h=a[d-e+1];b<d;b+=e)var k=a[b],l=a[b+1],f=f+(k-g)*(l+h),g=k,h=l;return 0<f}function nf(a,b,d,e){var f=0;e=void 0!==e?e:!1;var g,h;g=0;for(h=b.length;g<h;++g){var k=b[g],f=mf(a,f,k,d);if(!g){if(e&&f||!e&&!f)return!1}else if(e&&!f||!e&&f)return!1;f=k}return!0}
function of(a,b,d,e,f){f=void 0!==f?f:!1;var g,h;g=0;for(h=d.length;g<h;++g){var k=d[g],l=mf(a,b,k,e);if(g?f&&!l||!f&&l:f&&l||!f&&!l)for(var l=a,n=k,p=e;b<n-p;){var q;for(q=0;q<p;++q){var r=l[b+q];l[b+q]=l[n-p+q];l[n-p+q]=r}b+=p;n-=p}b=k}return b}function pf(a,b,d,e){var f=0,g,h;g=0;for(h=b.length;g<h;++g)f=of(a,f,b[g],d,e);return f};(function(){var a={},b={Va:a};(function(d){if("object"===typeof a&&"undefined"!==typeof b)b.Va=d();else{var e;"undefined"!==typeof window?e=window:"undefined"!==typeof global?e=global:"undefined"!==typeof self?e=self:e=this;e.as=d()}})(function(){return function e(a,b,h){function f(k,l){if(!b[k]){if(!a[k]){var n="function"==typeof require&&require;if(!l&&n)return n(k,!0);if(g)return g(k,!0);l=Error("Cannot find module '"+k+"'");throw l.code="MODULE_NOT_FOUND",l;}l=b[k]={Va:{}};a[k][0].call(l.Va,function(b){var e=
a[k][1][b];return f(e?e:b)},l,l.Va,e,a,b,h)}return b[k].Va}for(var g="function"==typeof require&&require,n=0;n<h.length;n++)f(h[n]);return f}({1:[function(a,b){function e(a,b,g,h,r){g=g||0;h=h||a.length-1;for(r=r||k;h>g;){if(600<h-g){var l=h-g+1,n=b-g+1,p=Math.log(l),q=.5*Math.exp(2*p/3),p=.5*Math.sqrt(p*q*(l-q)/l)*(0>n-l/2?-1:1);e(a,b,Math.max(g,Math.floor(b-n*q/l+p)),Math.min(h,Math.floor(b+(l-n)*q/l+p)),r)}l=a[b];n=g;q=h;f(a,g,b);for(0<r(a[h],l)&&f(a,g,h);n<q;){f(a,n,q);n++;for(q--;0>r(a[n],l);)n++;
for(;0<r(a[q],l);)q--}0===r(a[g],l)?f(a,g,q):(q++,f(a,q,h));q<=b&&(g=q+1);b<=q&&(h=q-1)}}function f(a,b,e){var f=a[b];a[b]=a[e];a[e]=f}function k(a,b){return a<b?-1:a>b?1:0}b.Va=e},{}],2:[function(a,b){function e(a,b){if(!(this instanceof e))return new e(a,b);this.lf=Math.max(4,a||9);this.qh=Math.max(2,Math.ceil(.4*this.lf));b&&this.Xk(b);this.clear()}function f(a,b){k(a,0,a.children.length,b,a)}function k(a,b,e,f,g){g||(g=x(null));g.U=Infinity;g.Y=Infinity;g.W=-Infinity;g.ba=-Infinity;for(var h;b<
e;b++)h=a.children[b],l(g,a.Ya?f(h):h);return g}function l(a,b){a.U=Math.min(a.U,b.U);a.Y=Math.min(a.Y,b.Y);a.W=Math.max(a.W,b.W);a.ba=Math.max(a.ba,b.ba)}function n(a,b){return a.U-b.U}function p(a,b){return a.Y-b.Y}function q(a){return(a.W-a.U)*(a.ba-a.Y)}function r(a){return a.W-a.U+(a.ba-a.Y)}function t(a,b){return a.U<=b.U&&a.Y<=b.Y&&b.W<=a.W&&b.ba<=a.ba}function C(a,b){return b.U<=a.W&&b.Y<=a.ba&&b.W>=a.U&&b.ba>=a.Y}function x(a){return{children:a,height:1,Ya:!0,U:Infinity,Y:Infinity,W:-Infinity,
ba:-Infinity}}function K(a,b,e,f,g){for(var h=[b,e],k;h.length;)e=h.pop(),b=h.pop(),e-b<=f||(k=b+Math.ceil((e-b)/f/2)*f,L(a,k,b,e,g),h.push(b,k,k,e))}b.Va=e;var L=a("quickselect");e.prototype={all:function(){return this.mh(this.data,[])},search:function(a){var b=this.data,e=[],f=this.hb;if(!C(a,b))return e;for(var g=[],h,k,l,n;b;){h=0;for(k=b.children.length;h<k;h++)l=b.children[h],n=b.Ya?f(l):l,C(a,n)&&(b.Ya?e.push(l):t(a,n)?this.mh(l,e):g.push(l));b=g.pop()}return e},load:function(a){if(!a||!a.length)return this;
if(a.length<this.qh){for(var b=0,e=a.length;b<e;b++)this.insert(a[b]);return this}a=this.oh(a.slice(),0,a.length-1,0);this.data.children.length?this.data.height===a.height?this.th(this.data,a):(this.data.height<a.height&&(b=this.data,this.data=a,a=b),this.ph(a,this.data.height-a.height-1,!0)):this.data=a;return this},insert:function(a){a&&this.ph(a,this.data.height-1);return this},clear:function(){this.data=x([]);return this},remove:function(a,b){if(!a)return this;for(var e=this.data,f=this.hb(a),
g=[],h=[],k,l,n,p;e||g.length;){e||(e=g.pop(),l=g[g.length-1],k=h.pop(),p=!0);if(e.Ya){a:{n=a;var q=e.children,r=b;if(r){for(var x=0;x<q.length;x++)if(r(n,q[x])){n=x;break a}n=-1}else n=q.indexOf(n)}if(-1!==n){e.children.splice(n,1);g.push(e);this.Uk(g);break}}p||e.Ya||!t(e,f)?l?(k++,e=l.children[k],p=!1):e=null:(g.push(e),h.push(k),k=0,l=e,e=e.children[0])}return this},hb:function(a){return a},xf:n,yf:p,toJSON:function(){return this.data},mh:function(a,b){for(var e=[];a;)a.Ya?b.push.apply(b,a.children):
e.push.apply(e,a.children),a=e.pop();return b},oh:function(a,b,e,g){var h=e-b+1,k=this.lf,l;if(h<=k)return l=x(a.slice(b,e+1)),f(l,this.hb),l;g||(g=Math.ceil(Math.log(h)/Math.log(k)),k=Math.ceil(h/Math.pow(k,g-1)));l=x([]);l.Ya=!1;l.height=g;var h=Math.ceil(h/k),k=h*Math.ceil(Math.sqrt(k)),n,p,q;for(K(a,b,e,k,this.xf);b<=e;b+=k)for(p=Math.min(b+k-1,e),K(a,b,p,h,this.yf),n=b;n<=p;n+=h)q=Math.min(n+h-1,p),l.children.push(this.oh(a,n,q,g-1));f(l,this.hb);return l},Tk:function(a,b,e,f){for(var g,h,k,
l,n,p,r,t;;){f.push(b);if(b.Ya||f.length-1===e)break;r=t=Infinity;g=0;for(h=b.children.length;g<h;g++)k=b.children[g],n=q(k),p=(Math.max(k.W,a.W)-Math.min(k.U,a.U))*(Math.max(k.ba,a.ba)-Math.min(k.Y,a.Y))-n,p<t?(t=p,r=n<r?n:r,l=k):p===t&&n<r&&(r=n,l=k);b=l||b.children[0]}return b},ph:function(a,b,e){var f=this.hb;e=e?a:f(a);var f=[],g=this.Tk(e,this.data,b,f);g.children.push(a);for(l(g,e);0<=b;)if(f[b].children.length>this.lf)this.Zk(f,b),b--;else break;this.Qk(e,f,b)},Zk:function(a,b){var e=a[b],
g=e.children.length,h=this.qh;this.Rk(e,h,g);g=this.Sk(e,h,g);g=x(e.children.splice(g,e.children.length-g));g.height=e.height;g.Ya=e.Ya;f(e,this.hb);f(g,this.hb);b?a[b-1].children.push(g):this.th(e,g)},th:function(a,b){this.data=x([a,b]);this.data.height=a.height+1;this.data.Ya=!1;f(this.data,this.hb)},Sk:function(a,b,e){var f,g,h,l,n,p,r;n=p=Infinity;for(f=b;f<=e-b;f++)g=k(a,0,f,this.hb),h=k(a,f,e,this.hb),l=Math.max(0,Math.min(g.W,h.W)-Math.max(g.U,h.U))*Math.max(0,Math.min(g.ba,h.ba)-Math.max(g.Y,
h.Y)),g=q(g)+q(h),l<n?(n=l,r=f,p=g<p?g:p):l===n&&g<p&&(p=g,r=f);return r},Rk:function(a,b,e){var f=a.Ya?this.xf:n,g=a.Ya?this.yf:p,h=this.nh(a,b,e,f);b=this.nh(a,b,e,g);h<b&&a.children.sort(f)},nh:function(a,b,e,f){a.children.sort(f);f=this.hb;var g=k(a,0,b,f),h=k(a,e-b,e,f),n=r(g)+r(h),p,q;for(p=b;p<e-b;p++)q=a.children[p],l(g,a.Ya?f(q):q),n+=r(g);for(p=e-b-1;p>=b;p--)q=a.children[p],l(h,a.Ya?f(q):q),n+=r(h);return n},Qk:function(a,b,e){for(;0<=e;e--)l(b[e],a)},Uk:function(a){for(var b=a.length-
1,e;0<=b;b--)0===a[b].children.length?0<b?(e=a[b-1].children,e.splice(e.indexOf(a[b]),1)):this.clear():f(a[b],this.hb)},Xk:function(a){var b=["return a"," - b",";"];this.xf=new Function("a","b",b.join(a[0]));this.yf=new Function("a","b",b.join(a[1]));this.hb=new Function("a","return {minX: a"+a[0]+", minY: a"+a[1]+", maxX: a"+a[2]+", maxY: a"+a[3]+"};")}}},{quickselect:1}]},{},[2])(2)});se=b.Va})();function qf(a){this.c=se(a);this.Xa={}}m=qf.prototype;m.insert=function(a,b){a={U:a[0],Y:a[1],W:a[2],ba:a[3],value:b};this.c.insert(a);this.Xa[v(b)]=a};m.load=function(a,b){for(var d=Array(b.length),e=0,f=b.length;e<f;e++){var g=a[e],h=b[e],g={U:g[0],Y:g[1],W:g[2],ba:g[3],value:h};d[e]=g;this.Xa[v(h)]=g}this.c.load(d)};m.remove=function(a){a=v(a);var b=this.Xa[a];delete this.Xa[a];return null!==this.c.remove(b)};
function rf(a,b,d){var e=a.Xa[v(d)];rb([e.U,e.Y,e.W,e.ba],b)||(a.remove(d),a.insert(b,d))}function sf(a){return a.c.all().map(function(a){return a.value})}function tf(a,b){return a.c.search({U:b[0],Y:b[1],W:b[2],ba:b[3]}).map(function(a){return a.value})}m.forEach=function(a,b){return uf(sf(this),a,b)};function vf(a,b,d,e){return uf(tf(a,b),d,e)}function uf(a,b,d){for(var e,f=0,g=a.length;f<g&&!(e=b.call(d,a[f]));f++);return e}m.clear=function(){this.c.clear();this.Xa={}};
m.H=function(a){var b=this.c.data;return ob(b.U,b.Y,b.W,b.ba,a)};function wf(a,b,d,e){this.tolerance=a;this.V=b;this.Dg=e;this.f=0;this.resolution=d;this.ia=this.G=null;this.instructions=[];this.b=[];this.Oa=He();this.c=[];this.O=null;this.ta=He();this.da=He()}u(wf,Ge);
function xf(a,b,d,e,f,g,h){var k=a.b.length,l=a.Wf();h&&(d+=f);h=[b[d],b[d+1]];var n=[NaN,NaN],p=!0,q,r,t;for(q=d+f;q<e;q+=f)n[0]=b[q],n[1]=b[q+1],t=nb(l,n),t!==r?(p&&(a.b[k++]=h[0],a.b[k++]=h[1]),a.b[k++]=n[0],a.b[k++]=n[1],p=!1):1===t?(a.b[k++]=n[0],a.b[k++]=n[1],p=!1):p=!0,h[0]=n[0],h[1]=n[1],r=t;if(g&&p||q===d+f)a.b[k++]=h[0],a.b[k++]=h[1];return k}function yf(a,b){a.G=[0,b,0];a.instructions.push(a.G);a.ia=[0,b,0];a.c.push(a.ia)}
wf.prototype.Ga=function(a,b){if(this.X){var d=Je(this.Oa,this.X.slice());a.translate(d[0],d[1]);a.rotate(b)}a.fill();this.X&&a.setTransform.apply(a,this.da)};
function zf(a,b,d,e,f,g,h,k,l){var n;a.O&&Dd(e,a.Oa)?n=a.O:(a.O||(a.O=[]),n=Id(a.b,0,a.b.length,2,e,a.O),Ie(a.Oa,e));e=!Ma(g);for(var p=0,q=h.length,r=0,t,C=a.ta,x=a.da,K,L,M,N,G=0,Z=0,z=a.instructions!=h||a.Dg?0:200;p<q;){var y=h[p],Q,ea,P,aa;switch(y[0]){case 0:r=y[1];e&&g[v(r).toString()]||!r.getGeometry()?p=y[2]:void 0===l||Cb(l,r.getGeometry().H())?++p:p=y[2]+1;break;case 1:G>z&&(a.Ga(b,f),G=0);Z>z&&(b.stroke(),Z=0);G||Z||(b.beginPath(),K=L=NaN);++p;break;case 2:r=y[1];t=n[r];y=n[r+1];M=n[r+
2]-t;r=n[r+3]-y;r=Math.sqrt(M*M+r*r);b.moveTo(t+r,y);b.arc(t,y,r,0,2*Math.PI,!0);++p;break;case 3:b.closePath();++p;break;case 4:r=y[1];t=y[2];Q=y[3];ea=y[4]*d;P=y[5]*d;var qa=y[6],Ra=y[7],Tb=y[8],Dc=y[9];aa=y[10];M=y[11];N=y[12];var ab=y[13],Md=y[14];for(aa&&(M+=f);r<t;r+=2){y=n[r]-ea;aa=n[r+1]-P;ab&&(y=Math.round(y),aa=Math.round(aa));if(1!=N||M){var Ub=y+ea,oc=aa+P;Ke(C,Ub,oc,N,N,M,-Ub,-oc);b.setTransform.apply(b,C)}Ub=b.globalAlpha;1!=Ra&&(b.globalAlpha=Ub*Ra);var oc=Md+Tb>Q.width?Q.width-Tb:
Md,Bo=qa+Dc>Q.height?Q.height-Dc:qa;b.drawImage(Q,Tb,Dc,oc,Bo,y,aa,oc*d,Bo*d);1!=Ra&&(b.globalAlpha=Ub);(1!=N||M)&&b.setTransform.apply(b,x)}++p;break;case 5:r=y[1];t=y[2];P=y[3];qa=y[4]*d;Ra=y[5]*d;M=y[6];N=y[7]*d;Q=y[8];ea=y[9];for((aa=y[10])&&(M+=f);r<t;r+=2){y=n[r]+qa;aa=n[r+1]+Ra;if(1!=N||M)Ke(C,y,aa,N,N,M,-y,-aa),b.setTransform.apply(b,C);Tb=P.split("\n");Dc=Tb.length;1<Dc?(ab=Math.round(1.5*b.measureText("M").width),aa-=(Dc-1)/2*ab):ab=0;for(Md=0;Md<Dc;Md++)Ub=Tb[Md],ea&&b.strokeText(Ub,y,
aa),Q&&b.fillText(Ub,y,aa),aa+=ab;(1!=N||M)&&b.setTransform.apply(b,x)}++p;break;case 6:if(k&&(r=y[1],r=k(r)))return r;++p;break;case 7:z?G++:a.Ga(b,f);++p;break;case 8:r=y[1];t=y[2];y=n[r];aa=n[r+1];M=y+.5|0;N=aa+.5|0;if(M!==K||N!==L)b.moveTo(y,aa),K=M,L=N;for(r+=2;r<t;r+=2)if(y=n[r],aa=n[r+1],M=y+.5|0,N=aa+.5|0,r==t-2||M!==K||N!==L)b.lineTo(y,aa),K=M,L=N;++p;break;case 9:a.X=y[2];G&&(a.Ga(b,f),G=0,Z&&(b.stroke(),Z=0));b.fillStyle=y[1];++p;break;case 10:var r=void 0!==y[8]?y[8]:!0,xk=y[9];t=y[2];
Z&&(b.stroke(),Z=0);b.strokeStyle=y[1];b.lineWidth=r?t*d:t;b.lineCap=y[3];b.lineJoin=y[4];b.miterLimit=y[5];Qc&&(t=y[6],M=y[7],r&&d!==xk&&(t=t.map(function(a){return a*d/xk}),M*=d/xk,y[6]=t,y[7]=M,y[9]=d),b.lineDashOffset=M,b.setLineDash(t));++p;break;case 11:b.font=y[1];b.textAlign=y[2];b.textBaseline=y[3];++p;break;case 12:z?Z++:b.stroke();++p;break;default:++p}}G&&a.Ga(b,f);Z&&b.stroke()}
function Af(a){var b=a.c;b.reverse();var d,e=b.length,f,g,h=-1;for(d=0;d<e;++d)if(f=b[d],g=f[0],6==g)h=d;else if(0==g){f[2]=d;f=a.c;for(g=d;h<g;){var k=f[h];f[h]=f[g];f[g]=k;++h;--g}h=-1}}function Bf(a,b){a.G[2]=a.instructions.length;a.G=null;a.ia[2]=a.c.length;a.ia=null;b=[6,b];a.instructions.push(b);a.c.push(b)}wf.prototype.De=Ga;wf.prototype.Wf=function(){return this.V};function Cf(a,b,d,e){wf.call(this,a,b,d,e);this.K=this.M=null;this.N=this.C=this.u=this.B=this.s=this.D=this.R=this.o=this.j=this.i=this.g=void 0}u(Cf,wf);
Cf.prototype.drawPoint=function(a,b){if(this.K){yf(this,b);var d=a.v,e=this.b.length;a=xf(this,d,0,d.length,a.F,!1,!1);this.instructions.push([4,e,a,this.K,this.g,this.i,this.j,this.o,this.R,this.D,this.s,this.B,this.u,this.C,this.N]);this.c.push([4,e,a,this.M,this.g,this.i,this.j,this.o,this.R,this.D,this.s,this.B,this.u,this.C,this.N]);Bf(this,b)}};
Cf.prototype.Lf=function(a,b){if(this.K){yf(this,b);var d=a.v,e=this.b.length;a=xf(this,d,0,d.length,a.F,!1,!1);this.instructions.push([4,e,a,this.K,this.g,this.i,this.j,this.o,this.R,this.D,this.s,this.B,this.u,this.C,this.N]);this.c.push([4,e,a,this.M,this.g,this.i,this.j,this.o,this.R,this.D,this.s,this.B,this.u,this.C,this.N]);Bf(this,b)}};Cf.prototype.De=function(){Af(this);this.i=this.g=void 0;this.K=this.M=null;this.N=this.C=this.B=this.s=this.D=this.R=this.o=this.u=this.j=void 0};
Cf.prototype.xd=function(a){var b=a.fe(),d=a.ha(),e=a.sj(1),f=a.ea(1),g=a.Fe();this.g=b[0];this.i=b[1];this.M=e;this.K=f;this.j=d[1];this.o=a.getOpacity();this.R=g[0];this.D=g[1];this.s=a.R;this.B=a.j;this.u=a.Ha();this.C=a.u;this.N=d[0]};function Df(a,b,d,e){wf.call(this,a,b,d,e);this.i=null;this.g={ad:void 0,Uc:void 0,Vc:null,Wc:void 0,Xc:void 0,Yc:void 0,Zc:void 0,xg:0,strokeStyle:void 0,lineCap:void 0,ca:null,lineDashOffset:void 0,lineJoin:void 0,lineWidth:void 0,miterLimit:void 0}}u(Df,wf);function Ef(a,b,d,e,f){var g=a.b.length;b=xf(a,b,d,e,f,!1,!1);g=[8,g,b];a.instructions.push(g);a.c.push(g);return e}m=Df.prototype;m.Wf=function(){this.i||(this.i=jb(this.V),0<this.f&&ib(this.i,this.resolution*(this.f+1)/2,this.i));return this.i};
function Ff(a){var b=a.g,d=b.strokeStyle,e=b.lineCap,f=b.ca,g=b.lineDashOffset,h=b.lineJoin,k=b.lineWidth,l=b.miterLimit;b.ad==d&&b.Uc==e&&Dd(b.Vc,f)&&b.Wc==g&&b.Xc==h&&b.Yc==k&&b.Zc==l||(b.xg!=a.b.length&&(a.instructions.push([12]),b.xg=a.b.length),a.instructions.push([10,d,k,e,h,l,f,g,!0,1],[1]),b.ad=d,b.Uc=e,b.Vc=f,b.Wc=g,b.Xc=h,b.Yc=k,b.Zc=l)}
m.Jf=function(a,b){var d=this.g,e=d.lineWidth;void 0!==d.strokeStyle&&void 0!==e&&(Ff(this),yf(this,b),this.c.push([10,d.strokeStyle,d.lineWidth,d.lineCap,d.lineJoin,d.miterLimit,d.ca,d.lineDashOffset,!0,1],[1]),d=a.v,Ef(this,d,0,d.length,a.F),this.c.push([12]),Bf(this,b))};
m.Kf=function(a,b){var d=this.g,e=d.lineWidth;if(void 0!==d.strokeStyle&&void 0!==e){Ff(this);yf(this,b);this.c.push([10,d.strokeStyle,d.lineWidth,d.lineCap,d.lineJoin,d.miterLimit,d.ca,d.lineDashOffset,!0,1],[1]);d=a.Za;e=a.v;a=a.F;var f=0,g,h;g=0;for(h=d.length;g<h;++g)f=Ef(this,e,f,d[g],a);this.c.push([12]);Bf(this,b)}};m.De=function(){this.g.xg!=this.b.length&&this.instructions.push([12]);Af(this);this.g=null};
m.Lb=function(a,b){a=b.qa();this.g.strokeStyle=Hc(a?a:Xc);a=b.f;this.g.lineCap=void 0!==a?a:"round";a=b.b;this.g.ca=a?a:Wc;a=b.o;this.g.lineDashOffset=a?a:0;a=b.i;this.g.lineJoin=void 0!==a?a:"round";a=b.c;this.g.lineWidth=void 0!==a?a:1;b=b.j;this.g.miterLimit=void 0!==b?b:10;this.g.lineWidth>this.f&&(this.f=this.g.lineWidth,this.i=null)};function Gf(a,b,d,e){wf.call(this,a,b,d,e);this.i=null;this.g={Mh:void 0,ad:void 0,Uc:void 0,Vc:null,Wc:void 0,Xc:void 0,Yc:void 0,Zc:void 0,fillStyle:void 0,strokeStyle:void 0,lineCap:void 0,ca:null,lineDashOffset:void 0,lineJoin:void 0,lineWidth:void 0,miterLimit:void 0}}u(Gf,wf);
function Hf(a,b,d,e,f){var g=a.g,h=void 0!==g.fillStyle,g=void 0!=g.strokeStyle,k=e.length,l=[1];a.instructions.push(l);a.c.push(l);for(l=0;l<k;++l){var n=e[l],p=a.b.length;d=xf(a,b,d,n,f,!0,!g);d=[8,p,d];a.instructions.push(d);a.c.push(d);g&&(d=[3],a.instructions.push(d),a.c.push(d));d=n}b=[7];a.c.push(b);h&&a.instructions.push(b);g&&(h=[12],a.instructions.push(h),a.c.push(h));return d}m=Gf.prototype;
m.If=function(a,b){var d=this.g,e=d.strokeStyle;if(void 0!==d.fillStyle||void 0!==e){If(this,a);yf(this,b);this.c.push([9,Fc(Vc)]);void 0!==d.strokeStyle&&this.c.push([10,d.strokeStyle,d.lineWidth,d.lineCap,d.lineJoin,d.miterLimit,d.ca,d.lineDashOffset,!0,1]);var f=a.v,e=this.b.length;xf(this,f,0,f.length,a.F,!1,!1);a=[1];e=[2,e];this.instructions.push(a,e);this.c.push(a,e);a=[7];this.c.push(a);void 0!==d.fillStyle&&this.instructions.push(a);void 0!==d.strokeStyle&&(d=[12],this.instructions.push(d),
this.c.push(d));Bf(this,b)}};m.Nf=function(a,b){var d=this.g;If(this,a);yf(this,b);this.c.push([9,Fc(Vc)]);void 0!==d.strokeStyle&&this.c.push([10,d.strokeStyle,d.lineWidth,d.lineCap,d.lineJoin,d.miterLimit,d.ca,d.lineDashOffset,!0,1]);var d=a.ua,e=Te(a);Hf(this,e,0,d,a.F);Bf(this,b)};
m.Mf=function(a,b){var d=this.g,e=d.strokeStyle;if(void 0!==d.fillStyle||void 0!==e){If(this,a);yf(this,b);this.c.push([9,Fc(Vc)]);void 0!==d.strokeStyle&&this.c.push([10,d.strokeStyle,d.lineWidth,d.lineCap,d.lineJoin,d.miterLimit,d.ca,d.lineDashOffset,!0,1]);d=a.b;e=Ve(a);a=a.F;var f=0,g,h;g=0;for(h=d.length;g<h;++g)f=Hf(this,e,f,d[g],a);Bf(this,b)}};m.De=function(){Af(this);this.g=null;var a=this.tolerance;if(a){var b=this.b,d,e;d=0;for(e=b.length;d<e;++d)b[d]=a*Math.round(b[d]/a)}};
m.Wf=function(){this.i||(this.i=jb(this.V),0<this.f&&ib(this.i,this.resolution*(this.f+1)/2,this.i));return this.i};
m.Lb=function(a,b){var d=this.g;a?(a=a.qa(),d.fillStyle=Hc(a?a:Vc)):d.fillStyle=void 0;b?(a=b.qa(),d.strokeStyle=Hc(a?a:Xc),a=b.f,d.lineCap=void 0!==a?a:"round",a=b.b,d.ca=a?a.slice():Wc,a=b.o,d.lineDashOffset=a?a:0,a=b.i,d.lineJoin=void 0!==a?a:"round",a=b.c,d.lineWidth=void 0!==a?a:1,b=b.j,d.miterLimit=void 0!==b?b:10,d.lineWidth>this.f&&(this.f=d.lineWidth,this.i=null)):(d.strokeStyle=void 0,d.lineCap=void 0,d.ca=null,d.lineDashOffset=void 0,d.lineJoin=void 0,d.lineWidth=void 0,d.miterLimit=void 0)};
function If(a,b){var d=a.g,e=d.fillStyle,f=d.strokeStyle,g=d.lineCap,h=d.ca,k=d.lineDashOffset,l=d.lineJoin,n=d.lineWidth,p=d.miterLimit;if(void 0!==e&&("string"!==typeof e||d.Mh!=e)){var q=[9,e];"string"!==typeof e&&(b=b.H(),q.push([b[0],b[3]]));a.instructions.push(q);d.Mh=d.fillStyle}void 0===f||d.ad==f&&d.Uc==g&&Dd(d.Vc,h)&&d.Wc==k&&d.Xc==l&&d.Yc==n&&d.Zc==p||(a.instructions.push([10,f,n,g,l,p,h,k,!0,1]),d.ad=f,d.Uc=g,d.Vc=h,d.Wc=k,d.Xc=l,d.Yc=n,d.Zc=p)};function Jf(a,b,d,e){wf.call(this,a,b,d,e);this.D=this.R=this.N=null;this.ya="";this.s=this.o=0;this.B=void 0;this.C=this.u=0;this.j=this.i=this.g=null}u(Jf,wf);
Jf.prototype.drawText=function(a,b,d,e,f,g){if(""!==this.ya&&this.j&&(this.g||this.i)){if(this.g){f=this.g;var h=this.N;if(!h||h.fillStyle!=f.fillStyle){var k=[9,f.fillStyle];this.instructions.push(k);this.c.push(k);h?h.fillStyle=f.fillStyle:this.N={fillStyle:f.fillStyle}}}this.i&&(f=this.i,h=this.R,h&&h.lineCap==f.lineCap&&h.ca==f.ca&&h.lineDashOffset==f.lineDashOffset&&h.lineJoin==f.lineJoin&&h.lineWidth==f.lineWidth&&h.miterLimit==f.miterLimit&&h.strokeStyle==f.strokeStyle||(k=[10,f.strokeStyle,
f.lineWidth,f.lineCap,f.lineJoin,f.miterLimit,f.ca,f.lineDashOffset,!1,1],this.instructions.push(k),this.c.push(k),h?(h.lineCap=f.lineCap,h.ca=f.ca,h.lineDashOffset=f.lineDashOffset,h.lineJoin=f.lineJoin,h.lineWidth=f.lineWidth,h.miterLimit=f.miterLimit,h.strokeStyle=f.strokeStyle):this.R={lineCap:f.lineCap,ca:f.ca,lineDashOffset:f.lineDashOffset,lineJoin:f.lineJoin,lineWidth:f.lineWidth,miterLimit:f.miterLimit,strokeStyle:f.strokeStyle}));f=this.j;h=this.D;h&&h.font==f.font&&h.textAlign==f.textAlign&&
h.textBaseline==f.textBaseline||(k=[11,f.font,f.textAlign,f.textBaseline],this.instructions.push(k),this.c.push(k),h?(h.font=f.font,h.textAlign=f.textAlign,h.textBaseline=f.textBaseline):this.D={font:f.font,textAlign:f.textAlign,textBaseline:f.textBaseline});yf(this,g);f=this.b.length;a=xf(this,a,b,d,e,!1,!1);a=[5,f,a,this.ya,this.o,this.s,this.u,this.C,!!this.g,!!this.i,this.B];this.instructions.push(a);this.c.push(a);Bf(this,g)}};
Jf.prototype.zb=function(a){if(a){var b=a.la();b?(b=b.qa(),b=Hc(b?b:Vc),this.g?this.g.fillStyle=b:this.g={fillStyle:b}):this.g=null;var d=a.pa();if(d){var b=d.qa(),e=d.f,f=d.b,g=d.o,h=d.i,k=d.c,d=d.j,e=void 0!==e?e:"round",f=f?f.slice():Wc,g=void 0!==g?g:0,h=void 0!==h?h:"round",k=void 0!==k?k:1,d=void 0!==d?d:10,b=Hc(b?b:Xc);if(this.i){var l=this.i;l.lineCap=e;l.ca=f;l.lineDashOffset=g;l.lineJoin=h;l.lineWidth=k;l.miterLimit=d;l.strokeStyle=b}else this.i={lineCap:e,ca:f,lineDashOffset:g,lineJoin:h,
lineWidth:k,miterLimit:d,strokeStyle:b}}else this.i=null;var n=a.c,b=a.b,e=a.g,f=a.j,k=a.f,d=a.Ha(),g=a.za(),h=a.i,l=a.o;a=void 0!==n?n:"10px sans-serif";h=void 0!==h?h:"center";l=void 0!==l?l:"middle";this.j?(n=this.j,n.font=a,n.textAlign=h,n.textBaseline=l):this.j={font:a,textAlign:h,textBaseline:l};this.ya=void 0!==g?g:"";this.o=void 0!==b?b:0;this.s=void 0!==e?e:0;this.B=void 0!==f?f:!1;this.u=void 0!==k?k:0;this.C=void 0!==d?d:1}else this.ya=""};function Kf(a,b,d,e,f){this.s=a;this.b=b;this.j=e;this.o=d;this.g=f;this.c={};this.f=Ic(1,1);this.i=He()}u(Kf,lf);var Lf={0:[[!0]]};function Mf(a,b,d){var e,f=Math.floor(a.length/2);if(b>=f)for(e=f;e<b;e++)a[e][d]=!0;else if(b<f)for(e=b+1;e<f;e++)a[e][d]=!0}
function Nf(a){if(void 0!==Lf[a])return Lf[a];for(var b=2*a+1,d=Array(b),e=0;e<b;e++)d[e]=Array(b);for(var b=a,f=e=0;b>=e;)Mf(d,a+b,a+e),Mf(d,a+e,a+b),Mf(d,a-e,a+b),Mf(d,a-b,a+e),Mf(d,a-b,a-e),Mf(d,a-e,a-b),Mf(d,a+e,a-b),Mf(d,a+b,a-e),e++,f+=1+2*e,0<2*(f-b)+1&&(--b,f+=1-2*b);return Lf[a]=d}function Of(a){for(var b in a.c){var d=a.c[b],e;for(e in d)d[e].De()}}
function Pf(a,b,d,e,f,g){f=Math.round(f);var h=2*f+1,k=Ke(a.i,f+.5,f+.5,1/d,-1/d,-e,-b[0],-b[1]),l=a.f;l.canvas.width!==h||l.canvas.height!==h?(l.canvas.width=h,l.canvas.height=h):l.clearRect(0,0,h,h);var n;void 0!==a.g&&(n=gb(),hb(n,b),ib(n,d*(a.g+f),n));var p=Nf(f);return Qf(a,l,k,e,function(a){for(var b=l.getImageData(0,0,h,h).data,d=0;d<h;d++)for(var e=0;e<h;e++)if(p[d][e]&&0<b[4*(e*h+d)+3]){if(a=g(a))return a;l.clearRect(0,0,h,h);return}},n)}
function Rf(a,b,d){var e=void 0!==b?b.toString():"0";b=a.c[e];void 0===b&&(b={},a.c[e]=b);e=b[d];void 0===e&&(e=new Sf[d](a.s,a.b,a.o,a.j),b[d]=e);return e}
function Tf(a,b,d,e,f,g){var h=Object.keys(a.c).map(Number);h.sort(xd);var k=a.b,l=k[0],n=k[1],p=k[2],k=k[3],l=[l,n,l,k,p,k,p,n];Id(l,0,8,2,e,l);b.save();b.beginPath();b.moveTo(l[0],l[1]);b.lineTo(l[2],l[3]);b.lineTo(l[4],l[5]);b.lineTo(l[6],l[7]);b.clip();for(var q,r,l=0,n=h.length;l<n;++l)for(q=a.c[h[l].toString()],p=0,k=kf.length;p<k;++p)r=q[kf[p]],void 0!==r&&zf(r,b,d,e,f,g,r.instructions,void 0,void 0);b.restore()}
function Qf(a,b,d,e,f,g){var h={},k=Object.keys(a.c).map(Number);k.sort(function(a,b){return b-a});var l,n,p,q,r;l=0;for(n=k.length;l<n;++l)for(q=a.c[k[l].toString()],p=kf.length-1;0<=p;--p)if(r=q[kf[p]],void 0!==r&&(r=zf(r,b,1,d,e,h,r.c,f,g)))return r}var Sf={Circle:Gf,Image:Cf,LineString:Df,Polygon:Gf,Text:Jf};function Uf(a,b){return v(a)-v(b)}function Vf(a,b){a=.5*a/b;return a*a}function Wf(a,b,d,e,f,g){var h=!1,k,l;if(k=d.ea())l=k.Ee(),2==l||3==l?k.gk(f,g):(0==l&&k.load(),k.Li(f,g),h=!0);if(f=(0,d.jb)(b))e=f.mg(e),(0,Xf[e.getType()])(a,e,d,b);return h}
var Xf={Point:function(a,b,d,e){var f=d.ea();if(f){if(2!=f.Ee())return;var g=Rf(a,d.getZIndex(),"Image");g.xd(f);g.drawPoint(b,e)}if(f=d.za())a=Rf(a,d.getZIndex(),"Text"),a.zb(f),a.drawText(b.v,0,2,2,b,e)},LineString:function(a,b,d,e){var f=d.pa();if(f){var g=Rf(a,d.getZIndex(),"LineString");g.Lb(null,f);g.Jf(b,e)}if(f=d.za())a=Rf(a,d.getZIndex(),"Text"),a.zb(f),a.drawText(le(b),0,2,2,b,e)},Polygon:function(a,b,d,e){var f=d.la(),g=d.pa();if(f||g){var h=Rf(a,d.getZIndex(),"Polygon");h.Lb(f,g);h.Nf(b,
e)}if(f=d.za())a=Rf(a,d.getZIndex(),"Text"),a.zb(f),a.drawText(Ue(b),0,2,2,b,e)},MultiPoint:function(a,b,d,e){var f=d.ea();if(f){if(2!=f.Ee())return;var g=Rf(a,d.getZIndex(),"Image");g.xd(f);g.Lf(b,e)}if(f=d.za())a=Rf(a,d.getZIndex(),"Text"),a.zb(f),d=b.v,a.drawText(d,0,d.length,b.F,b,e)},MultiLineString:function(a,b,d,e){var f=d.pa();if(f){var g=Rf(a,d.getZIndex(),"LineString");g.Lb(null,f);g.Kf(b,e)}if(f=d.za())a=Rf(a,d.getZIndex(),"Text"),a.zb(f),d=Se(b),a.drawText(d,0,d.length,2,b,e)},MultiPolygon:function(a,
b,d,e){var f=d.la(),g=d.pa();if(g||f){var h=Rf(a,d.getZIndex(),"Polygon");h.Lb(f,g);h.Mf(b,e)}if(f=d.za())a=Rf(a,d.getZIndex(),"Text"),a.zb(f),d=We(b),a.drawText(d,0,d.length,2,b,e)},GeometryCollection:function(a,b,d,e){b=b.b;var f,g;f=0;for(g=b.length;f<g;++f)(0,Xf[b[f].getType()])(a,b[f],d,e)},Circle:function(a,b,d,e){var f=d.la(),g=d.pa();if(f||g){var h=Rf(a,d.getZIndex(),"Circle");h.Lb(f,g);h.If(b,e)}if(f=d.za())a=Rf(a,d.getZIndex(),"Text"),a.zb(f),a.drawText(b.getCenter(),0,2,2,b,e)}};function Yf(a,b,d,e){var f=wc(d,b,a);d=jc(b,e,d);b=Rb(b);void 0!==b&&(d*=b);b=Rb(a);void 0!==b&&(d/=b);a=jc(a,d,f)/d;isFinite(a)&&0<a&&(d/=a);return d}function Zf(a,b,d,e){a=d-a;b=e-b;var f=Math.sqrt(a*a+b*b);return[Math.round(d+a/f),Math.round(e+b/f)]}
function $f(a,b,d,e,f,g,h,k,l,n,p){var q=Ic(Math.round(d*a),Math.round(d*b));if(!l.length)return q.canvas;q.scale(d,d);var r=gb();l.forEach(function(a){sb(r,a.extent)});var t=Ic(Math.round(d*xb(r)/e),Math.round(d*yb(r)/e)),C=d/e;l.forEach(function(a){t.drawImage(a.image,n,n,a.image.width-2*n,a.image.height-2*n,(a.extent[0]-r[0])*C,-(a.extent[3]-r[3])*C,xb(a.extent)*C,yb(a.extent)*C)});var x=[h[0],h[3]];k.f.forEach(function(a){var b=a.source,f=a.target,h=b[1][0],k=b[1][1],l=b[2][0],n=b[2][1];a=(f[0][0]-
x[0])/g;var p=-(f[0][1]-x[1])/g,C=(f[1][0]-x[0])/g,K=-(f[1][1]-x[1])/g,P=(f[2][0]-x[0])/g,aa=-(f[2][1]-x[1])/g,f=b[0][0],b=b[0][1],h=h-f,k=k-b,l=l-f,n=n-b;a:{h=[[h,k,0,0,C-a],[l,n,0,0,P-a],[0,0,h,k,K-p],[0,0,l,n,aa-p]];k=h.length;for(l=0;l<k;l++){for(var n=l,qa=Math.abs(h[l][l]),Ra=l+1;Ra<k;Ra++){var Tb=Math.abs(h[Ra][l]);Tb>qa&&(qa=Tb,n=Ra)}if(!qa){h=null;break a}qa=h[n];h[n]=h[l];h[l]=qa;for(n=l+1;n<k;n++)for(qa=-h[n][l]/h[l][l],Ra=l;Ra<k+1;Ra++)h[n][Ra]=l==Ra?0:h[n][Ra]+qa*h[l][Ra]}l=Array(k);
for(n=k-1;0<=n;n--)for(l[n]=h[n][k]/h[n][n],qa=n-1;0<=qa;qa--)h[qa][k]-=h[qa][n]*l[n];h=l}h&&(q.save(),q.beginPath(),l=(a+C+P)/3,n=(p+K+aa)/3,k=Zf(l,n,a,p),C=Zf(l,n,C,K),P=Zf(l,n,P,aa),q.moveTo(C[0],C[1]),q.lineTo(k[0],k[1]),q.lineTo(P[0],P[1]),q.clip(),q.transform(h[0],h[2],h[1],h[3],a,p),q.translate(r[0]-f,r[3]-b),q.scale(e/d,-e/d),q.drawImage(t.canvas,0,0),q.restore())});p&&(q.save(),q.strokeStyle="black",q.lineWidth=1,k.f.forEach(function(a){var b=a.target;a=(b[0][0]-x[0])/g;var d=-(b[0][1]-x[1])/
g,e=(b[1][0]-x[0])/g,f=-(b[1][1]-x[1])/g,h=(b[2][0]-x[0])/g,b=-(b[2][1]-x[1])/g;q.beginPath();q.moveTo(e,f);q.lineTo(a,d);q.lineTo(h,b);q.closePath();q.stroke()}),q.restore());return q.canvas};function ag(a,b,d,e,f){this.g=a;this.i=b;var g={},h=uc(this.i,this.g);this.b=function(a){var b=a[0]+"/"+a[1];g[b]||(g[b]=h(a));return g[b]};this.j=e;this.u=f*f;this.f=[];this.s=!1;this.B=this.g.b&&!!e&&!!this.g.H()&&xb(e)==xb(this.g.H());this.c=this.g.H()?xb(this.g.H()):null;this.o=this.i.H()?xb(this.i.H()):null;a=[d[0],d[3]];b=[d[2],d[3]];e=[d[2],d[1]];d=[d[0],d[1]];f=this.b(a);var k=this.b(b),l=this.b(e),n=this.b(d);bg(this,a,b,e,d,f,k,l,n,10);if(this.s){var p=Infinity;this.f.forEach(function(a){p=
Math.min(p,a.source[0][0],a.source[1][0],a.source[2][0])});this.f.forEach(function(a){if(Math.max(a.source[0][0],a.source[1][0],a.source[2][0])-p>this.c/2){var b=[[a.source[0][0],a.source[0][1]],[a.source[1][0],a.source[1][1]],[a.source[2][0],a.source[2][1]]];b[0][0]-p>this.c/2&&(b[0][0]-=this.c);b[1][0]-p>this.c/2&&(b[1][0]-=this.c);b[2][0]-p>this.c/2&&(b[2][0]-=this.c);Math.max(b[0][0],b[1][0],b[2][0])-Math.min(b[0][0],b[1][0],b[2][0])<this.c/2&&(a.source=b)}},this)}g={}}
function bg(a,b,d,e,f,g,h,k,l,n){var p=fb([g,h,k,l]),q=a.c?xb(p)/a.c:null,r=a.c,t=a.g.b&&.5<q&&1>q,C=!1;if(0<n){if(a.i.g&&a.o)var x=fb([b,d,e,f]),C=C|.25<xb(x)/a.o;!t&&a.g.g&&q&&(C|=.25<q)}if(C||!a.j||Cb(p,a.j)){if(!(C||isFinite(g[0])&&isFinite(g[1])&&isFinite(h[0])&&isFinite(h[1])&&isFinite(k[0])&&isFinite(k[1])&&isFinite(l[0])&&isFinite(l[1])))if(0<n)C=!0;else return;if(0<n&&(C||(p=a.b([(b[0]+e[0])/2,(b[1]+e[1])/2]),r=t?(Jb(g[0],r)+Jb(k[0],r))/2-Jb(p[0],r):(g[0]+k[0])/2-p[0],p=(g[1]+k[1])/2-p[1],
C=r*r+p*p>a.u),C)){Math.abs(b[0]-e[0])<=Math.abs(b[1]-e[1])?(t=[(d[0]+e[0])/2,(d[1]+e[1])/2],r=a.b(t),p=[(f[0]+b[0])/2,(f[1]+b[1])/2],q=a.b(p),bg(a,b,d,t,p,g,h,r,q,n-1),bg(a,p,t,e,f,q,r,k,l,n-1)):(t=[(b[0]+d[0])/2,(b[1]+d[1])/2],r=a.b(t),p=[(e[0]+f[0])/2,(e[1]+f[1])/2],q=a.b(p),bg(a,b,t,p,f,g,r,q,l,n-1),bg(a,t,d,e,p,r,h,k,q,n-1));return}if(t){if(!a.B)return;a.s=!0}a.f.push({source:[g,k,l],target:[b,e,f]});a.f.push({source:[g,h,k],target:[b,d,e]})}}
function cg(a){var b=gb();a.f.forEach(function(a){a=a.source;hb(b,a[0]);hb(b,a[1]);hb(b,a[2])});return b};function dg(a,b,d,e,f,g){this.s=b;this.o=a.H();var h=b.H(),k=h?Bb(d,h):d,h=Yf(a,b,zb(k),e);this.i=new ag(a,b,k,this.o,.5*h);this.b=e;this.c=d;a=cg(this.i);this.j=(this.nb=g(a,h,f))?this.nb.gb:1;this.Bd=this.f=null;f=2;g=[];this.nb&&(f=0,g=this.nb.g);me.call(this,d,e,this.j,f,g)}u(dg,me);m=dg.prototype;m.ja=function(){1==this.state&&(A(this.Bd),this.Bd=null);me.prototype.ja.call(this)};m.ea=function(){return this.f};m.getProjection=function(){return this.s};
m.vd=function(){var a=this.nb.getState();2==a&&(this.f=$f(xb(this.c)/this.b,yb(this.c)/this.b,this.j,this.nb.S(),0,this.b,this.c,this.i,[{extent:this.nb.H(),image:this.nb.ea()}],0));this.state=a;ne(this)};m.load=function(){if(0==this.state){this.state=1;ne(this);var a=this.nb.getState();2==a||3==a?this.vd():(this.Bd=B(this.nb,"change",function(){var a=this.nb.getState();if(2==a||3==a)A(this.Bd),this.Bd=null,this.vd()},this),this.nb.load())}};function eg(a,b,d,e){this.U=a;this.W=b;this.Y=d;this.ba=e}function fg(a,b,d){return a.U<=b&&b<=a.W&&a.Y<=d&&d<=a.ba}eg.prototype.equals=function(a){return this.U==a.U&&this.Y==a.Y&&this.W==a.W&&this.ba==a.ba};eg.prototype.extend=function(a){a.U<this.U&&(this.U=a.U);a.W>this.W&&(this.W=a.W);a.Y<this.Y&&(this.Y=a.Y);a.ba>this.ba&&(this.ba=a.ba)};eg.prototype.ha=function(){return[this.W-this.U+1,this.ba-this.Y+1]};function gg(a,b){return a.U<=b.W&&a.W>=b.U&&a.Y<=b.ba&&a.ba>=b.Y};function hg(a,b){if(Array.isArray(a))return a;void 0===b?b=[a,a]:b[0]=b[1]=a;return b};function ig(a){this.minZoom=void 0!==a.minZoom?a.minZoom:0;this.b=a.mb;Ja(Hd(this.b,function(a,b){return b-a}),17);this.maxZoom=this.b.length-1;this.g=void 0!==a.origin?a.origin:null;this.f=null;void 0!==a.origins&&(this.f=a.origins,Ja(this.f.length==this.b.length,20));var b=a.extent;void 0===b||this.g||this.f||(this.g=[b[0],b[3]]);Ja(!this.g&&this.f||this.g&&!this.f,18);this.i=null;void 0!==a.Ze&&(this.i=a.Ze,Ja(this.i.length==this.b.length,19));this.j=void 0!==a.tileSize?a.tileSize:this.i?null:
256;Ja(!this.j&&this.i||this.j&&!this.i,22);this.B=void 0!==b?b:null;this.c=null;this.o=[0,0];void 0!==a.sizes?this.c=a.sizes.map(function(a){return new eg(Math.min(0,a[0]),Math.max(a[0]-1,-1),Math.min(0,a[1]),Math.max(a[1]-1,-1))},this):b&&jg(this,b)}var kg=[0,0,0];ig.prototype.H=function(){return this.B};function lg(a,b){return a.g?a.g:a.f[b]}ig.prototype.S=function(a){return this.b[a]};
function mg(a,b,d,e){ng(a,b[0],b[1],d,!1,kg);var f=kg[1],g=kg[2];ng(a,b[2],b[3],d,!0,kg);a=kg[1];b=kg[2];void 0!==e?(e.U=f,e.W=a,e.Y=g,e.ba=b):e=new eg(f,a,g,b);return e}function og(a,b,d,e){d=a.S(d);return mg(a,b,d,e)}function pg(a,b){var d=lg(a,b[0]),e=a.S(b[0]);a=hg(qg(a,b[0]),a.o);return[d[0]+(b[1]+.5)*a[0]*e,d[1]+(b[2]+.5)*a[1]*e]}function rg(a,b,d){var e=lg(a,b[0]),f=a.S(b[0]);a=hg(qg(a,b[0]),a.o);var g=e[0]+b[1]*a[0]*f;b=e[1]+b[2]*a[1]*f;return ob(g,b,g+a[0]*f,b+a[1]*f,d)}
function ng(a,b,d,e,f,g){var h=sg(a,e),k=e/a.S(h),l=lg(a,h);a=hg(qg(a,h),a.o);b=k*Math.floor((b-l[0])/e+(f?.5:0))/a[0];d=k*Math.floor((d-l[1])/e+(f?0:.5))/a[1];f?(b=Math.ceil(b)-1,d=Math.ceil(d)-1):(b=Math.floor(b),d=Math.floor(d));f=b;void 0!==g?(g[0]=h,g[1]=f,g[2]=d):g=[h,f,d];return g}function qg(a,b){return a.j?a.j:a.i[b]}function sg(a,b,d){return Fb(zd(a.b,b,d||0),a.minZoom,a.maxZoom)}function jg(a,b){for(var d=a.b.length,e=Array(d),f=a.minZoom;f<d;++f)e[f]=og(a,b,f);a.c=e};function tg(a){var b=a.j;if(!b){for(var b=ug(a),d=yb(b),e=xb(b),f=hg(256),d=Math.max(e/f[0],d/f[1]),e=Array(43),f=0;43>f;++f)e[f]=d/Math.pow(2,f);b=new ig({extent:b,origin:[b[0],b[3]],mb:e,tileSize:void 0});a.j=b}return b}function ug(a){a=lc(a);var b=a.H();b||(a=180*Nb.degrees/Rb(a),b=ob(-a,-a,a,a));return b};function vg(a){this.b=a.html;this.c=a.Fq?a.Fq:null};function wg(a){$a.call(this);this.eb=lc(a.projection);this.C=xg(a.Fa);this.Qa=a.Ia;this.M=void 0!==a.state?a.state:"ready";this.B=void 0!==a.wrapX?a.wrapX:!1}u(wg,$a);function xg(a){if("string"===typeof a)return[new vg({html:a})];if(a instanceof vg)return[a];if(Array.isArray(a)){for(var b=a.length,d=Array(b),e=0;e<b;e++){var f=a[e];d[e]="string"===typeof f?new vg({html:f}):f}return d}return null}m=wg.prototype;m.oj=Ga;m.getProjection=function(){return this.eb};m.getState=function(){return this.M};
m.refresh=function(){this.c()};m.yb=function(a){this.M=a;this.c()};function yg(a){wg.call(this,{Fa:a.Fa,extent:a.extent,Ia:a.Ia,projection:a.projection,state:a.state});this.o=void 0!==a.mb?a.mb:null;this.b=null;this.G=0}u(yg,wg);
yg.prototype.ea=function(a,b,d,e){var f=this.getProjection();if(f&&e&&!tc(f,e)){if(this.b){if(this.G==this.g&&tc(this.b.getProjection(),e)&&this.b.S()==b&&this.b.gb==d&&rb(this.b.H(),a))return this.b;this.b.Ua();this.b=null}this.b=new dg(f,e,a,b,d,function(a,b,d){return zg(this,a,b,d,f)}.bind(this));this.G=this.g;return this.b}f&&(e=f);return zg(this,a,b,d,e)};
yg.prototype.V=function(a){a=a.target;switch(a.getState()){case 1:this.dispatchEvent(new Ag(Bg,a));break;case 2:this.dispatchEvent(new Ag(Cg,a));break;case 3:this.dispatchEvent(new Ag(Dg,a))}};function Eg(a,b){a.ea().src=b}function Ag(a,b){Va.call(this,a);this.image=b}u(Ag,Va);var Bg="imageloadstart",Cg="imageloadend",Dg="imageloaderror";function Fg(a){xe.call(this,a?a:{})}u(Fg,xe);Fg.prototype.ae=function(a){var b=null;"canvas"===a.getType()&&(b=new jf(this));return b};function Gg(a){hf.call(this,a);this.context=null===this.context?null:Ic();this.i=null;this.o=[];this.ta=gb();this.Qa=new eg(0,0,0,0);this.O=He()}u(Gg,hf);function Hg(a,b){b=b.getState();a=a.xa().get("useInterimTilesOnError");return 2==b||4==b||3==b&&!a}
Gg.prototype.u=function(a,b){var d=a.Ka,e=a.size,f=a.ka,g=f.projection,h=f.resolution,k=f.center,l=this.xa(),f=E(l),n=f.g,p=f.ec(g),q=sg(p,h,0),r=p.S(q),t=Math.round(h/r)||1,C=a.extent;void 0!==b.extent&&(C=Bb(C,b.extent));if(wb(C))return!1;b=mg(p,C,r);var x;x=lg(p,q);var K=p.S(q),L=hg(qg(p,q),p.o);x=ob(x[0]+b.U*L[0]*K,x[1]+b.Y*L[1]*K,x[0]+(b.W+1)*L[0]*K,x[1]+(b.ba+1)*L[1]*K,void 0);K=f.s;L={};L[q]={};var M=Ye(f,g,L),N=this.ta,G=this.Qa,Z=!1,z,y,Q;for(y=b.U;y<=b.W;++y)for(Q=b.Y;Q<=b.ba;++Q){z=f.getTile(q,
y,Q,d,g);if(!Hg(this,z))a:if(z.c){var ea=z.c;do{if(2==ea.getState()){z=ea;break a}ea=ea.c}while(ea)}if(Hg(this,z))2==z.getState()&&(L[q][z.Ab.toString()]=z,Z||-1!=this.o.indexOf(z)||(Z=!0));else{a:{for(var ea=p,P=z.Ab,aa=M,qa=G,Ra=rg(ea,P,N),P=P[0]-1;P>=ea.minZoom;){if(aa.call(null,P,og(ea,Ra,P,qa))){ea=!0;break a}--P}ea=!1}ea||(ea=p,z=z.Ab,aa=G,z[0]<ea.maxZoom?(qa=rg(ea,z,N),z=og(ea,qa,z[0]+1,aa)):z=null,z&&M(q+1,z))}}z=a.Yb;if(!(this.b&&16<Date.now()-a.time&&(z[0]||z[1])||!Z&&this.i&&lb(this.i,
C)&&this.da==n)||t!=this.G){if(z=this.context)Q=Ig(f,q,g),y=Math.round((b.W-b.U+1)*Q[0]/t),Q=Math.round((b.ba-b.Y+1)*Q[1]/t),Z=z.canvas,Z.width!=y||Z.height!=Q?(this.G=t,Z.width=y,Z.height=Q):(z.clearRect(0,0,y,Q),t=this.G);this.o.length=0;Z=Object.keys(L).map(Number);Z.sort(xd);for(var Tb,Dc,G=0,ea=Z.length;G<ea;++G){z=Z[G];M=Ig(f,z,g);y=p.S(z);var aa=y/r,qa=K*f.Zh(g),Ra=L[z],ab;for(ab in Ra){z=Ra[ab];Q=rg(p,z.Ab,N);y=(Q[0]-x[0])/r*K/t;Q=(x[3]-Q[3])/r*K/t;Tb=M[0]*aa/t;Dc=M[1]*aa/t;var P=z,Md=a,Ub=
qa;E(this.xa()).fg(Md.ka.projection)||this.context.clearRect(y,Q,Tb,Dc);(P=P.ea())&&this.context.drawImage(P,Ub,Ub,P.width-2*Ub,P.height-2*Ub,y,Q,Tb,Dc);this.o.push(z)}}this.da=n;this.b=r*d/K*t;this.i=x}ab=this.b/h;ab=Ke(this.O,d*e[0]/2,d*e[1]/2,ab,ab,0,(this.i[0]-k[0])/this.b*d,(k[1]-this.i[3])/this.b*d);Ke(this.s,d*e[0]/2-ab[4],d*e[1]/2-ab[5],d/h,-d/h,0,-k[0],-k[1]);e=a.gh;h=v(f).toString();k=q.toString();h in e?k in e[h]?e[h][k].extend(b):e[h][k]=b:(e[h]={},e[h][k]=b);l=l.get("preload");b=v(f).toString();
b in a.Gd||(a.Gd[b]={});var e=a.Gd[b],h=a.Eq,k=p.minZoom,oc;for(x=q;x>=k;--x)for(oc=og(p,C,x,oc),n=p.S(x),r=oc.U;r<=oc.W;++r)for(t=oc.Y;t<=oc.ba;++t)q-x<=l?(ab=f.getTile(x,r,t,d,g),0==ab.getState()&&(e[ab.kc()]=!0,ab.kc()in h.g||h.o([ab,b,pg(p,ab.Ab),n]))):f.mk(x,r,t,g);af(a,f);cf(a,f);return 0<this.o.length};Gg.prototype.ea=function(){var a=this.context;return a?a.canvas:null};Gg.prototype.D=function(){return this.O};function Jg(a){a=a?a:{};var b=w({},a);delete b.Fg;delete b.lk;xe.call(this,b);this.set("preload",void 0!==a.Fg?a.Fg:0);this.set("useInterimTilesOnError",void 0!==a.lk?a.lk:!0)}u(Jg,xe);Jg.prototype.ae=function(a){var b=null;"canvas"===a.getType()&&(b=new Gg(this));return b};function Kg(){this.f=0;this.b={};this.g=this.c=null}m=Kg.prototype;m.clear=function(){this.f=0;this.b={};this.g=this.c=null};m.forEach=function(a,b){for(var d=this.c;d;)a.call(b,d.Rc,d.ic,this),d=d.rb};m.get=function(a){a=this.b[a];Ja(!!a,15);if(a===this.g)return a.Rc;a===this.c?(this.c=this.c.rb,this.c.Jc=null):(a.rb.Jc=a.Jc,a.Jc.rb=a.rb);a.rb=null;a.Jc=this.g;this.g=this.g.rb=a;return a.Rc};
m.pop=function(){var a=this.c;delete this.b[a.ic];a.rb&&(a.rb.Jc=null);this.c=a.rb;this.c||(this.g=null);--this.f;return a.Rc};m.replace=function(a,b){this.get(a);this.b[a].Rc=b};m.set=function(a,b){Ja(!(a in this.b),16);b={ic:a,rb:null,Jc:this.g,Rc:b};this.g?this.g.rb=b:this.c=b;this.g=b;this.b[a]=b;++this.f};function Lg(a){Kg.call(this);this.highWaterMark=void 0!==a?a:2048}u(Lg,Kg);function Mg(a){return a.f>a.highWaterMark}Lg.prototype.zc=function(a){for(var b,d;Mg(this);){b=this.c.Rc;d=b.Ab[0].toString();var e;if(e=d in a)b=b.Ab,e=fg(a[d],b[1],b[2]);if(e)break;else this.pop().Ua()}};function Ng(a){wg.call(this,{Fa:a.Fa,extent:a.extent,Ia:a.Ia,projection:a.projection,state:a.state,wrapX:a.wrapX});this.fb=void 0!==a.pd?a.pd:!1;this.s=void 0!==a.rc?a.rc:1;this.Sa=void 0!==a.Sa?a.Sa:null;this.b=new Lg(a.wc);this.da=[0,0];this.ic=""}u(Ng,wg);m=Ng.prototype;m.pj=function(){return Mg(this.b)};m.zc=function(a,b){(a=this.jd(a))&&a.zc(b)};
function Ze(a,b,d,e,f){b=a.jd(b);if(!b)return!1;for(var g=!0,h,k,l=e.U;l<=e.W;++l)for(var n=e.Y;n<=e.ba;++n)h=a.je(d,l,n),k=!1,b.b.hasOwnProperty(h)&&(h=b.get(h),(k=2===h.getState())&&(k=!1!==f(h))),k||(g=!1);return g}m.Zh=function(){return 0};function Og(a,b){a.ic!==b&&(a.ic=b,a.c())}m.je=function(a,b,d){return a+"/"+b+"/"+d};m.fg=function(){return this.fb};m.ec=function(a){return this.Sa?this.Sa:tg(a)};m.jd=function(a){var b=this.getProjection();return b&&!tc(b,a)?null:this.b};
function Ig(a,b,d){var e=a.ec(d);d=a.s;b=hg(qg(e,b),a.da);1==d?a=b:(a=a.da,void 0===a&&(a=[0,0]),a[0]=b[0]*d+.5|0,a[1]=b[1]*d+.5|0);return a}function Pg(a,b,d){var e=void 0!==d?d:a.getProjection();d=a.ec(e);if(a.B&&e.g){var f=b;a=f[0];b=pg(d,f);e=ug(e);mb(e,b[0],b[1])?b=f:(f=xb(e),b[0]+=f*Math.ceil((e[0]-b[0])/f),e=d.S(a),b=ng(d,b[0],b[1],e,!1,void 0))}f=b[0];e=b[1];a=b[2];if(d.minZoom>f||f>d.maxZoom)d=!1;else{var g=d.H();d=(d=g?og(d,g,f):d.c?d.c[f]:null)?fg(d,e,a):!0}return d?b:null}
m.refresh=function(){this.b.clear();this.c()};m.mk=Ga;function Qg(a,b){Va.call(this,a);this.tile=b}u(Qg,Va);function Rg(a,b){Xa.call(this);this.Ab=a;this.state=b;this.c=null;this.key=""}u(Rg,Xa);function Sg(a){a.dispatchEvent("change")}Rg.prototype.kc=function(){return this.key+"/"+this.Ab};Rg.prototype.getState=function(){return this.state};var Tg=document.implementation.createDocument("","",null);function Ug(a,b){return Tg.createElementNS(a,b)}function Vg(a){return Wg(a,!1,[]).join("")}function Wg(a,b,d){if(a.nodeType==Node.CDATA_SECTION_NODE||a.nodeType==Node.TEXT_NODE)b?d.push(String(a.nodeValue).replace(/(\r\n|\r|\n)/g,"")):d.push(a.nodeValue);else for(a=a.firstChild;a;a=a.nextSibling)Wg(a,b,d);return d}function Xg(a){return a instanceof Document}function Yg(a){return a instanceof Node}
function Zg(a){return(new DOMParser).parseFromString(a,"application/xml")}function $g(a,b){return function(d,e){d=a.call(b,d,e);void 0!==d&&Ad(e[e.length-1],d)}}function ah(a,b){return function(d,e){d=a.call(void 0!==b?b:this,d,e);void 0!==d&&e[e.length-1].push(d)}}function bh(a,b){return function(d,e){d=a.call(void 0!==b?b:this,d,e);void 0!==d&&(e[e.length-1]=d)}}
function ch(a){return function(b,d){var e=a.call(this,b,d);if(void 0!==e){d=d[d.length-1];b=b.localName;var f;b in d?f=d[b]:f=d[b]=[];f.push(e)}}}function F(a,b){return function(d,e){var f=a.call(this,d,e);void 0!==f&&(e[e.length-1][void 0!==b?b:d.localName]=f)}}function H(a,b){return function(d,e,f){a.call(void 0!==b?b:this,d,e,f);f[f.length-1].node.appendChild(d)}}
function dh(a){var b,d;return function(e,f,g){if(!b){b={};var h={};h[e.localName]=a;b[e.namespaceURI]=h;d=eh(e.localName)}fh(b,d,f,g)}}function eh(a,b){return function(d,e,f){d=e[e.length-1].node;e=a;void 0===e&&(e=f);f=b;void 0===b&&(f=d.namespaceURI);return Ug(f,e)}}var gh=eh();function hh(a,b){for(var d=b.length,e=Array(d),f=0;f<d;++f)e[f]=a[b[f]];return e}function I(a,b,d){d=void 0!==d?d:{};var e,f;e=0;for(f=a.length;e<f;++e)d[a[e]]=b;return d}
function ih(a,b,d,e){for(b=b.firstElementChild;b;b=b.nextElementSibling){var f=a[b.namespaceURI];void 0!==f&&(f=f[b.localName])&&f.call(e,b,d)}}function J(a,b,d,e,f){e.push(a);ih(b,d,e,f);return e.pop()}function fh(a,b,d,e,f,g){for(var h=(void 0!==f?f:d).length,k,l,n=0;n<h;++n)k=d[n],void 0!==k&&(l=b.call(g,k,e,void 0!==f?f[n]:void 0),void 0!==l&&a[l.namespaceURI][l.localName].call(g,l,k,e))}function jh(a,b,d,e,f,g,h){f.push(a);fh(b,d,e,f,g,h);f.pop()};function kh(a,b,d){return function(e,f,g){var h=new XMLHttpRequest;h.open("GET","function"===typeof a?a(e,f,g):a,!0);"arraybuffer"==b.getType()&&(h.responseType="arraybuffer");h.onload=function(){if(!h.status||200<=h.status&&300>h.status){var a=b.getType(),e;"json"==a||"text"==a?e=h.responseText:"xml"==a?(e=h.responseXML)||(e=Zg(h.responseText)):"arraybuffer"==a&&(e=h.response);e&&d.call(this,b.readFeatures(e,{ib:g}),b.Me(e))}}.bind(this);h.onerror=function(){}.bind(this);h.send()}}
function lh(a,b){return kh(a,b,function(a){mh(this,a);this.c()})};function nh(a){$a.call(this);this.u=a.id;this.X=void 0!==a.Bn?a.Bn:!0;this.da=void 0!==a.Zg?a.Zg:!0;this.f=document.createElement("DIV");this.f.className="ol-overlay-container";this.f.style.position="absolute";this.Rd=void 0!==a.Rd?a.Rd:!1;this.B=a.dl||{};this.C=void 0!==a.el?a.el:20;this.b={Sd:"",ye:"",Qe:"",af:"",visible:!0};this.j=null;B(this,cb(oh),this.Pm,this);B(this,cb(ph),this.Wm,this);B(this,cb(qh),this.an,this);B(this,cb(rh),this.dn,this);B(this,cb(sh),this.en,this);void 0!==a.element&&
this.set(oh,a.element);this.set(qh,void 0!==a.offset?a.offset:[0,0]);this.set(sh,void 0!==a.Lc?a.Lc:"top-left");void 0!==a.position&&this.setPosition(a.position)}u(nh,$a);m=nh.prototype;m.Pm=function(){for(var a=this.f;a.lastChild;)a.removeChild(a.lastChild);(a=this.get(oh))&&this.f.appendChild(a)};
m.Wm=function(){this.j&&(Jc(this.f),A(this.j),this.j=null);var a=this.get(ph);a&&(this.j=B(a,"postrender",this.render,this),th(this),a=this.da?a.qd:a.rd,this.X?a.insertBefore(this.f,a.childNodes[0]||null):a.appendChild(this.f))};m.render=function(){th(this)};m.an=function(){th(this)};
m.dn=function(){th(this);if(this.get(rh)&&this.Rd){var a=this.get(ph);if(a&&uh(a)){var b=vh(uh(a),a.ha()),d=this.get(oh),e=d.offsetWidth,f=getComputedStyle(d),e=e+(parseInt(f.marginLeft,10)+parseInt(f.marginRight,10)),f=d.offsetHeight,g=getComputedStyle(d),f=f+(parseInt(g.marginTop,10)+parseInt(g.marginBottom,10)),h=vh(d,[e,f]),d=this.C;lb(b,h)||(e=h[0]-b[0],f=b[2]-h[2],g=h[1]-b[1],h=b[3]-h[3],b=[0,0],0>e?b[0]=e-d:0>f&&(b[0]=Math.abs(f)+d),0>g?b[1]=g-d:0>h&&(b[1]=Math.abs(h)+d),0===b[0]&&0===b[1])||
(d=O(a).getCenter(),d=wh(a,d),b=[d[0]+b[0],d[1]+b[1]],O(a).animate({center:a.wa(b),duration:this.B.duration,Ra:this.B.Ra}))}}};m.en=function(){th(this)};m.setMap=function(a){this.set(ph,a)};m.setPosition=function(a){this.set(rh,a)};function vh(a,b){var d=a.getBoundingClientRect();a=d.left+window.pageXOffset;d=d.top+window.pageYOffset;return[a,d,a+b[0],d+b[1]]}function xh(a,b){a.b.visible!==b&&(a.f.style.display=b?"":"none",a.b.visible=b)}
function th(a){var b=a.get(ph),d=a.get(rh);if(b&&b.Da&&d){var d=wh(b,d),e=b.ha(),b=a.f.style,f=a.get(qh),g=a.get(sh);xh(a,!0);var h=f[0],f=f[1];if("bottom-right"==g||"center-right"==g||"top-right"==g)""!==a.b.ye&&(a.b.ye=b.left=""),h=Math.round(e[0]-d[0]-h)+"px",a.b.Qe!=h&&(a.b.Qe=b.right=h);else{""!==a.b.Qe&&(a.b.Qe=b.right="");if("bottom-center"==g||"center-center"==g||"top-center"==g)h-=a.f.offsetWidth/2;h=Math.round(d[0]+h)+"px";a.b.ye!=h&&(a.b.ye=b.left=h)}if("bottom-left"==g||"bottom-center"==
g||"bottom-right"==g)""!==a.b.af&&(a.b.af=b.top=""),d=Math.round(e[1]-d[1]-f)+"px",a.b.Sd!=d&&(a.b.Sd=b.bottom=d);else{""!==a.b.Sd&&(a.b.Sd=b.bottom="");if("center-left"==g||"center-center"==g||"center-right"==g)f-=a.f.offsetHeight/2;d=Math.round(d[1]+f)+"px";a.b.af!=d&&(a.b.af=b.top=d)}}else xh(a,!1)}var oh="element",ph="map",qh="offset",rh="position",sh="positioning";function yh(a){$a.call(this);this.element=a.element?a.element:null;this.i=this.M=null;this.u=[];this.render=a.render?a.render:Ga;a.target&&this.Ue(a.target)}u(yh,$a);yh.prototype.ja=function(){Jc(this.element);$a.prototype.ja.call(this)};yh.prototype.setMap=function(a){this.i&&Jc(this.element);for(var b=0,d=this.u.length;b<d;++b)A(this.u[b]);this.u.length=0;if(this.i=a)(this.M?this.M:a.qd).appendChild(this.element),this.render!==Ga&&this.u.push(B(a,"postrender",this.render,this)),a.render()};
yh.prototype.Ue=function(a){this.M="string"===typeof a?document.getElementById(a):a};function zh(a){a=a?a:{};var b=void 0!==a.className?a.className:"ol-scale-line";this.j=document.createElement("DIV");this.j.className=b+"-inner";this.b=document.createElement("DIV");this.b.className=b+" ol-unselectable";this.b.appendChild(this.j);this.s=null;this.o=void 0!==a.minWidth?a.minWidth:64;this.f=!1;this.C=void 0;this.B="";yh.call(this,{element:this.b,render:a.render?a.render:Ah,target:a.target});B(this,cb(Bh),this.D,this);this.set(Bh,a.units||"metric")}u(zh,yh);var Ch=[1,2,5];
function Ah(a){(a=a.frameState)?this.s=a.ka:this.s=null;Dh(this)}zh.prototype.D=function(){Dh(this)};
function Dh(a){var b=a.s;if(b){var d=b.projection,e=Rb(d),b=jc(d,b.resolution,b.center)*e,e=a.o*b,d="",f=a.get(Bh);"degrees"==f?(d=Nb.degrees,b/=d,e<d/60?(d="\u2033",b*=3600):e<d?(d="\u2032",b*=60):d="\u00b0"):"imperial"==f?.9144>e?(d="in",b/=.0254):1609.344>e?(d="ft",b/=.3048):(d="mi",b/=1609.344):"nautical"==f?(b/=1852,d="nm"):"metric"==f?.001>e?(d="\u03bcm",b*=1E6):1>e?(d="mm",b*=1E3):1E3>e?d="m":(d="km",b/=1E3):"us"==f?.9144>e?(d="in",b*=39.37):1609.344>e?(d="ft",b/=.30480061):(d="mi",b/=1609.3472):
Ja(!1,33);for(var f=3*Math.floor(Math.log(a.o*b)/Math.log(10)),g;;){g=Ch[(f%3+3)%3]*Math.pow(10,Math.floor(f/3));e=Math.round(g/b);if(isNaN(e)){a.b.style.display="none";a.f=!1;return}if(e>=a.o)break;++f}b=g+" "+d;a.B!=b&&(a.j.innerHTML=b,a.B=b);a.C!=e&&(a.j.style.width=e+"px",a.C=e);a.f||(a.b.style.display="",a.f=!0)}else a.f&&(a.b.style.display="none",a.f=!1)}var Bh="units";function Eh(a,b){var d=/\{z\}/g,e=/\{x\}/g,f=/\{y\}/g,g=/\{-y\}/g;return function(h){if(h)return a.replace(d,h[0].toString()).replace(e,h[1].toString()).replace(f,function(){return(-h[2]-1).toString()}).replace(g,function(){var a=b.c?b.c[h[0]]:null;Ja(a,55);return(a.ba-a.Y+1+h[2]).toString()})}}function Fh(a,b){for(var d=a.length,e=Array(d),f=0;f<d;++f)e[f]=Eh(a[f],b);return Gh(e)}function Gh(a){return 1===a.length?a[0]:function(b,d,e){if(b)return a[Jb((b[1]<<b[0])+b[2],a.length)](b,d,e)}}
function Hh(){}function Ih(a){var b=[],d=/\{([a-z])-([a-z])\}/.exec(a);if(d){var e=d[2].charCodeAt(0),f;for(f=d[1].charCodeAt(0);f<=e;++f)b.push(a.replace(d[0],String.fromCharCode(f)));return b}if(d=d=/\{(\d+)-(\d+)\}/.exec(a)){e=parseInt(d[2],10);for(f=parseInt(d[1],10);f<=e;f++)b.push(a.replace(d[0],f.toString()));return b}b.push(a);return b};function Jh(a,b,d,e,f){Rg.call(this,a,b);this.g=d;this.K=new Image;null!==e&&(this.K.crossOrigin=e);this.b=null;this.f=f}u(Jh,Rg);m=Jh.prototype;m.ja=function(){1==this.state&&Kh(this);this.c&&this.c.Ua();this.state=5;Sg(this);Rg.prototype.ja.call(this)};m.ea=function(){return this.K};m.kc=function(){return this.g};m.Io=function(){this.state=3;Kh(this);Sg(this)};m.Jo=function(){this.state=this.K.naturalWidth&&this.K.naturalHeight?2:4;Kh(this);Sg(this)};
m.load=function(){if(0==this.state||3==this.state)this.state=1,Sg(this),this.b=[B(this.K,"error",this.Io,this,!0),B(this.K,"load",this.Jo,this,!0)],this.f(this,this.g)};function Kh(a){a.b.forEach(A);a.b=null};function Lh(a,b,d,e,f,g,h,k,l,n,p){Rg.call(this,f,0);this.u=void 0!==p?p:!1;this.gb=h;this.B=k;this.s=null;this.g=b;this.i=e;this.j=g?g:f;this.b=[];this.Nc=null;this.f=0;g=rg(e,this.j);k=this.i.H();f=this.g.H();g=k?Bb(g,k):g;if(vb(g))if((k=a.H())&&(f?f=Bb(f,k):f=k),e=e.S(this.j[0]),e=Yf(a,d,zb(g),e),!isFinite(e)||0>=e)this.state=4;else if(this.o=new ag(a,d,g,f,e*(void 0!==n?n:.5)),this.o.f.length)if(this.f=sg(b,e),d=cg(this.o),f&&(a.b?(d[1]=Fb(d[1],f[1],f[3]),d[3]=Fb(d[3],f[1],f[3])):d=Bb(d,f)),vb(d)){a=
og(b,d,this.f);for(b=a.U;b<=a.W;b++)for(d=a.Y;d<=a.ba;d++)(n=l(this.f,b,d,h))&&this.b.push(n);this.b.length||(this.state=4)}else this.state=4;else this.state=4;else this.state=4}u(Lh,Rg);Lh.prototype.ja=function(){1==this.state&&(this.Nc.forEach(A),this.Nc=null);Rg.prototype.ja.call(this)};Lh.prototype.ea=function(){return this.s};
Lh.prototype.vd=function(){var a=[];this.b.forEach(function(b){b&&2==b.getState()&&a.push({extent:rg(this.g,b.Ab),image:b.ea()})},this);this.b.length=0;if(a.length){var b=this.j[0],d=qg(this.i,b),e="number"===typeof d?d:d[0],d="number"===typeof d?d:d[1],b=this.i.S(b),f=this.g.S(this.f),g=rg(this.i,this.j);this.s=$f(e,d,this.gb,f,this.g.H(),b,g,this.o,a,this.B,this.u);this.state=2}else this.state=3;Sg(this)};
Lh.prototype.load=function(){if(0==this.state){this.state=1;Sg(this);var a=0;this.Nc=[];this.b.forEach(function(b){var d=b.getState();if(0==d||1==d){a++;var e;e=B(b,"change",function(){var d=b.getState();if(2==d||3==d||4==d)A(e),a--,a||(this.Nc.forEach(A),this.Nc=null,this.vd())},this);this.Nc.push(e)}},this);this.b.forEach(function(a){0==a.getState()&&a.load()});a||setTimeout(this.vd.bind(this),0)}};function Mh(a){Ng.call(this,{Fa:a.Fa,wc:a.wc,extent:a.extent,Ia:a.Ia,pd:a.pd,projection:a.projection,state:a.state,Sa:a.Sa,rc:a.rc,wrapX:a.wrapX});this.qc=a.qc;this.sc=this.j?this.j.bind(this):Hh;this.urls=null;if(a.urls){var b=a.urls;this.urls=b;var d=b.join("\n");Nh(this,this.j?this.j.bind(this):Fh(b,this.Sa),d)}else a.url&&this.setUrl(a.url);a.sc&&Nh(this,a.sc)}u(Mh,Ng);
Mh.prototype.Ta=function(a){a=a.target;switch(a.getState()){case 1:this.dispatchEvent(new Qg("tileloadstart",a));break;case 2:this.dispatchEvent(new Qg("tileloadend",a));break;case 3:this.dispatchEvent(new Qg("tileloaderror",a))}};function Nh(a,b,d){a.sc=b;"undefined"!==typeof d?Og(a,d):a.c()}Mh.prototype.setUrl=function(a){var b=this.urls=Ih(a);Nh(this,this.j?this.j.bind(this):Fh(b,this.Sa),a)};Mh.prototype.mk=function(a,b,d){a=this.je(a,b,d);this.b.b.hasOwnProperty(a)&&this.b.get(a)};function Oh(a){Mh.call(this,{Fa:a.Fa,wc:a.wc,extent:a.extent,Ia:a.Ia,pd:a.pd,projection:a.projection,state:a.state,Sa:a.Sa,qc:a.qc?a.qc:Ph,rc:a.rc,sc:a.sc,url:a.url,urls:a.urls,wrapX:a.wrapX});this.crossOrigin=void 0!==a.crossOrigin?a.crossOrigin:null;this.Cd=a.Cd?a.Cd:Jh;this.i={};this.o={};this.Cb=a.Pj}u(Oh,Mh);m=Oh.prototype;m.pj=function(){if(Mg(this.b))return!0;for(var a in this.i)if(Mg(this.i[a]))return!0;return!1};
m.zc=function(a,b){a=this.jd(a);this.b.zc(this.b==a?b:{});for(var d in this.i){var e=this.i[d];e.zc(e==a?b:{})}};m.Zh=function(a){return this.getProjection()&&a&&tc(this.getProjection(),a),0};m.fg=function(a){return this.getProjection()&&a&&!tc(this.getProjection(),a)?!1:Mh.prototype.fg.call(this,a)};m.ec=function(a){var b=this.getProjection();return!this.Sa||b&&!tc(b,a)?(b=v(a).toString(),b in this.o||(this.o[b]=tg(a)),this.o[b]):this.Sa};
m.jd=function(a){var b=this.getProjection();if(!b||tc(b,a))return this.b;a=v(a).toString();a in this.i||(this.i[a]=new Lg(this.b.highWaterMark));return this.i[a]};function Qh(a,b,d,e,f,g,h){b=[b,d,e];f=(d=Pg(a,b,g))?a.sc(d,f,g):void 0;f=new a.Cd(b,void 0!==f?0:4,void 0!==f?f:"",a.crossOrigin,a.qc);f.key=h;B(f,"change",a.Ta,a);return f}
m.getTile=function(a,b,d,e,f){if(this.getProjection()&&f&&!tc(this.getProjection(),f)){e=this.jd(f);d=[a,b,d];var g;a=this.je.apply(this,d);e.b.hasOwnProperty(a)&&(g=e.get(a));b=this.ic;if(g&&g.key==b)return g;var h=this.getProjection(),k=this.ec(h),l=this.ec(f),n=Pg(this,d,f);f=new Lh(h,k,f,l,d,n,this.s,0,function(a,b,d,e){return Rh(this,a,b,d,e,h)}.bind(this),this.Cb,!1);f.key=b;g?(f.c=g,e.replace(a,f)):e.set(a,f);return f}return Rh(this,a,b,d,e,f)};
function Rh(a,b,d,e,f,g){var h,k=a.je(b,d,e),l=a.ic;if(a.b.b.hasOwnProperty(k)){if(h=a.b.get(k),h.key!=l){var n=h;h=Qh(a,b,d,e,f,g,l);0==n.getState()?h.c=n.c:h.c=n;if(h.c){b=h.c;d=h;do{if(2==b.getState()){b.c=null;break}else 1==b.getState()?d=b:0==b.getState()?d.c=b.c:d=b;b=d.c}while(b)}a.b.replace(k,h)}}else h=Qh(a,b,d,e,f,g,l),a.b.set(k,h);return h}function Ph(a,b){a.ea().src=b};function Sh(a){this.s=a.Tn;ig.call(this,{extent:a.extent,origin:a.origin,origins:a.origins,mb:a.mb,tileSize:a.tileSize,Ze:a.Ze,sizes:a.sizes})}u(Sh,ig);
function Th(a,b,d){var e=[],f=[],g=[],h=[],k=[],l=void 0!==d?d:[];d=lc(a.SupportedCRS.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"));var n=Rb(d),p="ne"==d.c.substr(0,2);a.TileMatrix.sort(function(a,b){return b.ScaleDenominator-a.ScaleDenominator});a.TileMatrix.forEach(function(a){var b;0<l.length?b=Cd(l,function(b){return a.Identifier==b.TileMatrix}):b=!0;if(b){f.push(a.Identifier);b=2.8E-4*a.ScaleDenominator/n;var d=a.TileWidth,q=a.TileHeight;p?g.push([a.TopLeftCorner[1],a.TopLeftCorner[0]]):
g.push(a.TopLeftCorner);e.push(b);h.push(d==q?d:[d,q]);k.push([a.MatrixWidth,-a.MatrixHeight])}});return new Sh({extent:b,origins:g,mb:e,Tn:f,Ze:h,sizes:k})};function Uh(a,b){var d=[];Object.keys(b).forEach(function(a){null!==b[a]&&void 0!==b[a]&&d.push(a+"="+encodeURIComponent(b[a]))});var e=d.join("&");a=a.replace(/[?&]$/,"");a=-1===a.indexOf("?")?a+"?":a+"&";return a+e};function Vh(a){function b(a){a="KVP"==e?Uh(a,g):a.replace(/\{(\w+?)\}/g,function(a,b){return b.toLowerCase()in g?g[b.toLowerCase()]:a});return function(b){if(b){var d={TileMatrix:f.s[b[0]],TileCol:b[1],TileRow:-b[2]-1};w(d,h);b=a;return b="KVP"==e?Uh(b,d):b.replace(/\{(\w+?)\}/g,function(a,b){return d[b]})}}}this.ta=void 0!==a.version?a.version:"1.0.0";this.D=void 0!==a.format?a.format:"image/jpeg";this.f=a.dimensions?a.dimensions:{};this.G=a.layer;this.u=a.matrixSet;this.X=a.style;var d=a.urls;void 0===
d&&void 0!==a.url&&(d=Ih(a.url));var e=this.V=void 0!==a.requestEncoding?a.requestEncoding:"KVP",f=a.Sa,g={layer:this.G,style:this.X,tilematrixset:this.u};"KVP"==e&&w(g,{Service:"WMTS",Request:"GetTile",Version:this.ta,Format:this.D});var h=this.f,k=d&&0<d.length?Gh(d.map(b)):Hh;Oh.call(this,{Fa:a.Fa,wc:a.wc,crossOrigin:a.crossOrigin,Ia:a.Ia,projection:a.projection,Pj:a.Pj,Cd:a.Cd,Sa:f,qc:a.qc,rc:a.rc,sc:k,urls:d,wrapX:void 0!==a.wrapX?a.wrapX:!1});Og(this,Wh(this))}u(Vh,Oh);Vh.prototype.xa=function(){return this.G};
Vh.prototype.getStyle=function(){return this.X};function Wh(a){var b=0,d=[],e;for(e in a.f)d[b++]=e+"-"+a.f[e];return d.join("/")}Vh.prototype.tc=function(a){w(this.f,a);Og(this,Wh(this))};
function Xh(a,b){var d=Cd(a.Contents.Layer,function(a){return a.Identifier==b.layer});if(null===d)return null;var e=a.Contents.TileMatrixSet,f,g,h;f=1<d.TileMatrixSetLink.length?"projection"in b?Gd(d.TileMatrixSetLink,function(a){var d=Cd(e,function(b){return b.Identifier==a.TileMatrixSet}).SupportedCRS.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"),f=lc(d),g=lc(b.projection);return f&&g?tc(f,g):d==b.projection}):Gd(d.TileMatrixSetLink,function(a){return a.TileMatrixSet==b.matrixSet}):0;0>
f&&(f=0);g=d.TileMatrixSetLink[f].TileMatrixSet;h=d.TileMatrixSetLink[f].TileMatrixSetLimits;var k=d.Format[0];"format"in b&&(k=b.format);f=Gd(d.Style,function(a){return"style"in b?a.Title==b.style:a.isDefault});0>f&&(f=0);f=d.Style[f].Identifier;var l={};"Dimension"in d&&d.Dimension.forEach(function(a){var b=a.Identifier,d=a.Default;void 0===d&&(d=a.Value[0]);l[b]=d});var n=Cd(a.Contents.TileMatrixSet,function(a){return a.Identifier==g}),p;p="projection"in b?lc(b.projection):lc(n.SupportedCRS.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,
"$1:$3"));var q=d.WGS84BoundingBox,r,t;void 0!==q&&(t=lc("EPSG:4326").H(),t=q[0]==t[0]&&q[2]==t[2],r=xc(q,"EPSG:4326",p),(q=p.H())&&(lb(q,r)||(r=void 0)));h=Th(n,r,h);var C=[],n=b.requestEncoding,n=void 0!==n?n:"";if("OperationsMetadata"in a&&"GetTile"in a.OperationsMetadata)for(a=a.OperationsMetadata.GetTile.DCP.HTTP.Get,r=0,q=a.length;r<q;++r){var x=Cd(a[r].Constraint,function(a){return"GetEncoding"==a.name}).AllowedValues.Value;""===n&&(n=x[0]);if("KVP"===n)yd(x,"KVP")&&C.push(a[r].href);else break}C.length||
(n="REST",d.ResourceURL.forEach(function(a){"tile"===a.resourceType&&(k=a.format,C.push(a.template))}));return{urls:C,layer:b.layer,matrixSet:g,format:k,projection:p,requestEncoding:n,Sa:h,style:f,dimensions:l,wrapX:t,crossOrigin:b.crossOrigin}};function Yh(){this.c={};this.b=0}Yh.prototype.clear=function(){this.c={};this.b=0};Yh.prototype.get=function(a,b,d){a=b+":"+a+":"+(d?Fc(d):"null");return a in this.c?this.c[a]:null};Yh.prototype.set=function(a,b,d,e){this.c[b+":"+a+":"+(d?Fc(d):"null")]=e;++this.b};var Zh=new Yh;function $h(a,b,d,e,f,g){Xa.call(this);this.j=null;this.K=a?a:new Image;null!==e&&(this.K.crossOrigin=e);this.g=g?document.createElement("CANVAS"):null;this.i=g;this.f=null;this.c=f;this.b=d;this.o=b;this.s=!1;2==this.c&&ai(this)}u($h,Xa);function ai(a){var b=Ic(1,1);try{b.drawImage(a.K,0,0),b.getImageData(0,0,1,1)}catch(d){a.s=!0}}m=$h.prototype;m.rj=function(){this.c=3;this.f.forEach(A);this.f=null;this.dispatchEvent("change")};
m.op=function(){this.c=2;this.b&&(this.K.width=this.b[0],this.K.height=this.b[1]);this.b=[this.K.width,this.K.height];this.f.forEach(A);this.f=null;ai(this);if(!this.s&&null!==this.i){this.g.width=this.K.width;this.g.height=this.K.height;var a=this.g.getContext("2d");a.drawImage(this.K,0,0);for(var b=a.getImageData(0,0,this.K.width,this.K.height),d=b.data,e=this.i[0]/255,f=this.i[1]/255,g=this.i[2]/255,h=0,k=d.length;h<k;h+=4)d[h]*=e,d[h+1]*=f,d[h+2]*=g;a.putImageData(b,0,0)}this.dispatchEvent("change")};
m.ea=function(){return this.g?this.g:this.K};m.ha=function(){return this.b};m.load=function(){if(0==this.c){this.c=1;this.f=[B(this.K,"error",this.rj,this,!0),B(this.K,"load",this.op,this,!0)];try{this.K.src=this.o}catch(a){this.rj()}}};function bi(a){a=a||{};this.s=void 0!==a.anchor?a.anchor:[.5,.5];this.B=null;this.f=void 0!==a.Md?a.Md:"top-left";this.D=void 0!==a.Nd?a.Nd:"fraction";this.O=void 0!==a.Od?a.Od:"fraction";this.X=void 0!==a.crossOrigin?a.crossOrigin:null;var b=void 0!==a.Fi?a.Fi:null,d=void 0!==a.Gi?a.Gi:null,e=a.src;Ja(!(void 0!==e&&b),4);Ja(!b||b&&d,5);void 0!==e&&e.length||!b||(e=b.src||v(b).toString());Ja(void 0!==e&&0<e.length,6);var f=void 0!==a.src?0:2;this.o=void 0!==a.color?Cc(a.color):null;var g=this.X,h=
this.o,k=Zh.get(e,g,h);k||(k=new $h(b,e,d,g,f,h),Zh.set(e,g,h,k));this.g=k;this.M=void 0!==a.offset?a.offset:[0,0];this.i=void 0!==a.Bg?a.Bg:"top-left";this.C=null;this.N=void 0!==a.size?a.size:null;Zc.call(this,{opacity:void 0!==a.opacity?a.opacity:1,rotation:void 0!==a.rotation?a.rotation:0,scale:void 0!==a.scale?a.scale:1,sb:void 0!==a.sb?a.sb:!0,wb:void 0!==a.wb?a.wb:!1})}u(bi,Zc);m=bi.prototype;
m.clone=function(){var a=this.ea(1),b;if(2===this.g.c)if("IMG"===a.tagName.toUpperCase())b=a.cloneNode(!0);else{b=document.createElement("canvas");var d=b.getContext("2d");b.width=a.width;b.height=a.height;d.drawImage(a,0,0)}return new bi({anchor:this.s.slice(),Md:this.f,Nd:this.D,Od:this.O,crossOrigin:this.X,color:this.o&&this.o.slice?this.o.slice():this.o||void 0,Fi:b?b:void 0,Gi:b?this.g.ha().slice():void 0,src:b?void 0:this.g.o,offset:this.M.slice(),Bg:this.i,size:null!==this.N?this.N.slice():
void 0,opacity:this.getOpacity(),scale:this.Ha(),sb:this.u,rotation:this.j,wb:this.R})};
m.fe=function(){if(this.B)return this.B;var a=this.s,b=this.ha();if("fraction"==this.D||"fraction"==this.O){if(!b)return null;a=this.s.slice();"fraction"==this.D&&(a[0]*=b[0]);"fraction"==this.O&&(a[1]*=b[1])}if("top-left"!=this.f){if(!b)return null;a===this.s&&(a=this.s.slice());if("top-right"==this.f||"bottom-right"==this.f)a[0]=-a[0]+b[0];if("bottom-left"==this.f||"bottom-right"==this.f)a[1]=-a[1]+b[1]}return this.B=a};m.qa=function(){return this.o};m.ea=function(a){return this.g.ea(a)};m.cg=function(){return this.g.ha()};
m.Ee=function(){return this.g.c};m.sj=function(){var a=this.g;if(!a.j)if(a.s){var b=a.b[0],d=a.b[1],e=Ic(b,d);e.fillRect(0,0,b,d);a.j=e.canvas}else a.j=a.K;return a.j};m.Fe=function(){if(this.C)return this.C;var a=this.M;if("top-left"!=this.i){var b=this.ha(),d=this.g.ha();if(!b||!d)return null;a=a.slice();if("top-right"==this.i||"bottom-right"==this.i)a[0]=d[0]-b[0]-a[0];if("bottom-left"==this.i||"bottom-right"==this.i)a[1]=d[1]-b[1]-a[1]}return this.C=a};m.ha=function(){return this.N?this.N:this.g.ha()};
m.Li=function(a,b){return B(this.g,"change",a,b)};m.load=function(){this.g.load()};m.gk=function(a,b){Ta(this.g,"change",a,b)};function ci(a){df.call(this,a);this.b=!1;this.D=-1;this.G=NaN;this.s=gb();this.f=this.O=null;this.i=Ic()}u(ci,df);
ci.prototype.C=function(a,b,d){var e=a.extent,f=a.Ka,g=b.yg?a.Tg:{},h=a.ka,k=h.projection,h=h.rotation,l=k.H(),n=E(this.xa()),p=gf(this,a,0);ff(this,"precompose",d,a,p);var q=b.extent,r=void 0!==q;r&&ef(d,a,q);if((q=this.f)&&!Ma(q.c)){var t=0,C=0,x;if(this.xa().hasListener("render")){x=d.canvas.width;var K=d.canvas.height;if(h){var L=Math.round(Math.sqrt(x*x+K*K)),t=(L-x)/2,C=(L-K)/2;x=K=L}this.i.canvas.width=x;this.i.canvas.height=K;x=this.i}else x=d;K=x.globalAlpha;x.globalAlpha=b.opacity;x!=d&&
x.translate(t,C);b=a.size[0]*f;L=a.size[1]*f;Yc(x,-h,b/2,L/2);Tf(q,x,f,p,h,g);if(n.B&&k.b&&!lb(l,e)){for(var k=e[0],n=xb(l),M=0;k<l[0];)--M,p=n*M,p=gf(this,a,p),Tf(q,x,f,p,h,g),k+=n;M=0;for(k=e[2];k>l[2];)++M,p=n*M,p=gf(this,a,p),Tf(q,x,f,p,h,g),k-=n;p=gf(this,a,0)}Yc(x,h,b/2,L/2);x!=d&&(ff(this,"render",x,a,p),d.drawImage(x.canvas,-t,-C),x.translate(-t,-C));x.globalAlpha=K}r&&d.restore();ff(this,"postcompose",d,a,p)};
ci.prototype.j=function(a,b,d,e,f){if(this.f){var g=b.ka.resolution;b=b.ka.rotation;var h=this.xa(),k={};return Pf(this.f,a,g,b,d,function(a){var b=v(a).toString();if(!(b in k))return k[b]=!0,e.call(f,a,h)})}};ci.prototype.o=function(){$e(this)};
ci.prototype.u=function(a){function b(a){var b,e=a.i;e?b=e.call(a,n):(e=d.o)&&(b=e(a,n));if(b){if(b){e=!1;if(Array.isArray(b))for(var f=0,g=b.length;f<g;++f)e=Wf(r,a,b[f],Vf(n,p),this.o,this)||e;else e=Wf(r,a,b,Vf(n,p),this.o,this)||e;a=e}else a=!1;this.b=this.b||a}}var d=this.xa(),e=E(d);bf(a.Fa,e.C);cf(a,e);var f=a.Yb[0],g=a.Yb[1],h=d.u,k=d.C;if(!this.b&&!h&&f||!k&&g)return!0;var l=a.extent,k=a.ka,f=k.projection,n=k.resolution,p=a.Ka,g=d.g,q=d.B,h=d.get(di);void 0===h&&(h=Uf);l=ib(l,q*n);q=k.projection.H();
e.B&&k.projection.b&&!lb(q,a.extent)&&(a=Math.max(xb(l)/2,xb(q)),l[0]=q[0]-a,l[2]=q[2]+a);if(!this.b&&this.G==n&&this.D==g&&this.O==h&&lb(this.s,l))return!0;this.f=null;this.b=!1;var r=new Kf(.5*n/p,l,n,e.V,d.B);ei(e,l,n,f);if(h){var t=[];fi(e,l,function(a){t.push(a)},this);t.sort(h);t.forEach(b,this)}else fi(e,l,b,this);Of(r);this.G=n;this.D=g;this.O=h;this.s=l;this.f=r;return!0};function gi(a){a=a?a:{};var b=w({},a);delete b.style;delete b.Oj;delete b.Vb;delete b.Wb;xe.call(this,b);this.B=void 0!==a.Oj?a.Oj:100;this.s=null;this.o=void 0;this.setStyle(a.style);this.u=void 0!==a.Vb?a.Vb:!1;this.C=void 0!==a.Wb?a.Wb:!1}u(gi,xe);gi.prototype.ae=function(a){var b=null;"canvas"===a.getType()&&(b=new ci(this));return b};gi.prototype.getStyle=function(){return this.s};gi.prototype.setStyle=function(a){this.s=void 0!==a?a:hd;this.o=null===a?void 0:fd(this.s);this.c()};var di="renderOrder";function hi(a,b){$a.call(this);this.f=!!(b||{}).unique;this.b=a?a:[];if(this.f)for(a=0,b=this.b.length;a<b;++a)ii(this,this.b[a],a);ji(this)}u(hi,$a);m=hi.prototype;m.clear=function(){for(;0<this.get(ki);)this.pop()};m.extend=function(a){var b,d;b=0;for(d=a.length;b<d;++b)this.push(a[b]);return this};m.forEach=function(a,b){this.b.forEach(a,b)};m.item=function(a){return this.b[a]};function li(a,b,d){a.f&&ii(a,d);a.b.splice(b,0,d);ji(a);a.dispatchEvent(new mi("add",d))}
m.pop=function(){return ni(this,this.get(ki)-1)};m.push=function(a){this.f&&ii(this,a);var b=this.get(ki);li(this,b,a);return this.get(ki)};m.remove=function(a){var b=this.b,d,e;d=0;for(e=b.length;d<e;++d)if(b[d]===a)return ni(this,d)};function ni(a,b){var d=a.b[b];a.b.splice(b,1);ji(a);a.dispatchEvent(new mi("remove",d));return d}function ji(a){a.set(ki,a.b.length)}function ii(a,b,d){for(var e=0,f=a.b.length;e<f;++e)if(a.b[e]===b&&e!==d)throw new Ia(58);}var ki="length";
function mi(a,b){Va.call(this,a);this.element=b}u(mi,Va);function oi(a,b,d){Va.call(this,a);this.map=b;this.frameState=void 0!==d?d:null}u(oi,Va);function pi(a,b,d,e,f){oi.call(this,a,b,f);this.originalEvent=d;this.pixel=qi(b,d);this.coordinate=b.wa(this.pixel);this.dragging=void 0!==e?e:!1}u(pi,oi);pi.prototype.preventDefault=function(){oi.prototype.preventDefault.call(this);this.originalEvent.preventDefault()};pi.prototype.stopPropagation=function(){oi.prototype.stopPropagation.call(this);this.originalEvent.stopPropagation()};var ri={Gr:"singleclick",er:"click",hr:"dblclick",wr:"pointerdrag",zr:"pointermove",vr:"pointerdown",Cr:"pointerup",Br:"pointerover",Ar:"pointerout",xr:"pointerenter",yr:"pointerleave",ur:"pointercancel"};function si(a,b,d,e,f){pi.call(this,a,b,d.originalEvent,e,f);this.c=d}u(si,pi);function ti(a,b){this.c=a;this.i=b};function ui(a){ti.call(this,a,{mousedown:this.jp,mousemove:this.kp,mouseup:this.np,mouseover:this.mp,mouseout:this.lp});this.b=a.b;this.g=[]}u(ui,ti);function vi(a,b){a=a.g;var d=b.clientX;b=b.clientY;for(var e=0,f=a.length,g;e<f&&(g=a[e]);e++){var h=Math.abs(b-g[1]);if(25>=Math.abs(d-g[0])&&25>=h)return!0}return!1}function wi(a){var b=xi(a,a),d=b.preventDefault;b.preventDefault=function(){a.preventDefault();d()};b.pointerId=1;b.isPrimary=!0;b.pointerType="mouse";return b}m=ui.prototype;
m.jp=function(a){if(!vi(this,a)){(1).toString()in this.b&&this.cancel(a);var b=wi(a);this.b[(1).toString()]=a;yi(this.c,"pointerdown",b,a)}};m.kp=function(a){if(!vi(this,a)){var b=wi(a);this.c.move(b,a)}};m.np=function(a){if(!vi(this,a)){var b=this.b[(1).toString()];b&&b.button===a.button&&(b=wi(a),yi(this.c,"pointerup",b,a),delete this.b[(1).toString()])}};m.mp=function(a){if(!vi(this,a)){var b=wi(a);zi(this.c,b,a)}};m.lp=function(a){if(!vi(this,a)){var b=wi(a);Ai(this.c,b,a)}};
m.cancel=function(a){var b=wi(a);this.c.cancel(b,a);delete this.b[(1).toString()]};function Bi(a){ti.call(this,a,{MSPointerDown:this.bo,MSPointerMove:this.co,MSPointerUp:this.ho,MSPointerOut:this.eo,MSPointerOver:this.fo,MSPointerCancel:this.ao,MSGotPointerCapture:this.Yn,MSLostPointerCapture:this.Zn});this.b=a.b;this.g=["","unavailable","touch","pen","mouse"]}u(Bi,ti);function Ci(a,b){var d=b;"number"===typeof b.pointerType&&(d=xi(b,b),d.pointerType=a.g[b.pointerType]);return d}m=Bi.prototype;
m.bo=function(a){this.b[a.pointerId.toString()]=a;var b=Ci(this,a);yi(this.c,"pointerdown",b,a)};m.co=function(a){var b=Ci(this,a);this.c.move(b,a)};m.ho=function(a){var b=Ci(this,a);yi(this.c,"pointerup",b,a);delete this.b[a.pointerId.toString()]};m.eo=function(a){var b=Ci(this,a);Ai(this.c,b,a)};m.fo=function(a){var b=Ci(this,a);zi(this.c,b,a)};m.ao=function(a){var b=Ci(this,a);this.c.cancel(b,a);delete this.b[a.pointerId.toString()]};
m.Zn=function(a){this.c.dispatchEvent(new Di("lostpointercapture",a,a))};m.Yn=function(a){this.c.dispatchEvent(new Di("gotpointercapture",a,a))};function Ei(a){ti.call(this,a,{pointerdown:this.Fp,pointermove:this.Gp,pointerup:this.Jp,pointerout:this.Hp,pointerover:this.Ip,pointercancel:this.Ep,gotpointercapture:this.Hm,lostpointercapture:this.Sn})}u(Ei,ti);m=Ei.prototype;m.Fp=function(a){Fi(this.c,a)};m.Gp=function(a){Fi(this.c,a)};m.Jp=function(a){Fi(this.c,a)};m.Hp=function(a){Fi(this.c,a)};m.Ip=function(a){Fi(this.c,a)};m.Ep=function(a){Fi(this.c,a)};m.Sn=function(a){Fi(this.c,a)};m.Hm=function(a){Fi(this.c,a)};function Di(a,b,d){Va.call(this,a);this.originalEvent=b;a=d?d:{};this.buttons=Gi(a);this.pressure=Hi(a,this.buttons);this.bubbles="bubbles"in a?a.bubbles:!1;this.cancelable="cancelable"in a?a.cancelable:!1;this.view="view"in a?a.view:null;this.detail="detail"in a?a.detail:null;this.screenX="screenX"in a?a.screenX:0;this.screenY="screenY"in a?a.screenY:0;this.clientX="clientX"in a?a.clientX:0;this.clientY="clientY"in a?a.clientY:0;this.ctrlKey="ctrlKey"in a?a.ctrlKey:!1;this.altKey="altKey"in a?a.altKey:
!1;this.shiftKey="shiftKey"in a?a.shiftKey:!1;this.metaKey="metaKey"in a?a.metaKey:!1;this.button="button"in a?a.button:0;this.relatedTarget="relatedTarget"in a?a.relatedTarget:null;this.pointerId="pointerId"in a?a.pointerId:0;this.width="width"in a?a.width:0;this.height="height"in a?a.height:0;this.tiltX="tiltX"in a?a.tiltX:0;this.tiltY="tiltY"in a?a.tiltY:0;this.pointerType="pointerType"in a?a.pointerType:"";this.isPrimary="isPrimary"in a?a.isPrimary:!1;b.preventDefault&&(this.preventDefault=function(){b.preventDefault()})}
u(Di,Va);function Gi(a){if(a.buttons||Ii)a=a.buttons;else switch(a.which){case 1:a=1;break;case 2:a=4;break;case 3:a=2;break;default:a=0}return a}function Hi(a,b){var d=0;a.pressure?d=a.pressure:d=b?.5:0;return d}var Ii=!1;try{Ii=1===(new MouseEvent("click",{buttons:1})).buttons}catch(a){};function Ji(a,b){ti.call(this,a,{touchstart:this.Oq,touchmove:this.Nq,touchend:this.Mq,touchcancel:this.Lq});this.b=a.b;this.o=b;this.g=void 0;this.j=0;this.f=void 0}u(Ji,ti);m=Ji.prototype;m.Qj=function(){this.j=0;this.f=void 0};
function Ki(a,b,d){b=xi(b,d);b.pointerId=d.identifier+2;b.bubbles=!0;b.cancelable=!0;b.detail=a.j;b.button=0;b.buttons=1;b.width=d.webkitRadiusX||d.radiusX||0;b.height=d.webkitRadiusY||d.radiusY||0;b.pressure=d.webkitForce||d.force||.5;b.isPrimary=a.g===d.identifier;b.pointerType="touch";b.clientX=d.clientX;b.clientY=d.clientY;b.screenX=d.screenX;b.screenY=d.screenY;return b}
function Li(a,b,d){function e(){b.preventDefault()}var f=Array.prototype.slice.call(b.changedTouches),g=f.length,h,k;for(h=0;h<g;++h)k=Ki(a,b,f[h]),k.preventDefault=e,d.call(a,b,k)}
m.Oq=function(a){var b=a.touches,d=Object.keys(this.b),e=d.length;if(e>=b.length){var f=[],g,h,k;for(g=0;g<e;++g){h=d[g];k=this.b[h];var l;if(!(l=1==h))a:{for(var n=b.length,p=0;p<n;p++)if(l=b[p],l.identifier===h-2){l=!0;break a}l=!1}l||f.push(k.Jb)}for(g=0;g<f.length;++g)this.uf(a,f[g])}b=a.changedTouches[0];d=Object.keys(this.b).length;if(!d||1===d&&(1).toString()in this.b)this.g=b.identifier,void 0!==this.f&&clearTimeout(this.f);Mi(this,a);this.j++;Li(this,a,this.Ap)};
m.Ap=function(a,b){this.b[b.pointerId]={target:b.target,Jb:b,tj:b.target};var d=this.c;b.bubbles=!0;yi(d,"pointerover",b,a);this.c.enter(b,a);yi(this.c,"pointerdown",b,a)};m.Nq=function(a){a.preventDefault();Li(this,a,this.Xn)};m.Xn=function(a,b){var d=this.b[b.pointerId];if(d){var e=d.Jb,f=d.tj;this.c.move(b,a);e&&f!==b.target&&(e.relatedTarget=b.target,b.relatedTarget=f,e.target=f,b.target?(Ai(this.c,e,a),zi(this.c,b,a)):(b.target=f,b.relatedTarget=null,this.uf(a,b)));d.Jb=b;d.tj=b.target}};
m.Mq=function(a){Mi(this,a);Li(this,a,this.Qq)};m.Qq=function(a,b){yi(this.c,"pointerup",b,a);this.c.Jb(b,a);this.c.leave(b,a);delete this.b[b.pointerId];b.isPrimary&&(this.g=void 0,this.f=setTimeout(this.Qj.bind(this),200))};m.Lq=function(a){Li(this,a,this.uf)};m.uf=function(a,b){this.c.cancel(b,a);this.c.Jb(b,a);this.c.leave(b,a);delete this.b[b.pointerId];b.isPrimary&&(this.g=void 0,this.f=setTimeout(this.Qj.bind(this),200))};
function Mi(a,b){var d=a.o.g;b=b.changedTouches[0];if(a.g===b.identifier){var e=[b.clientX,b.clientY];d.push(e);setTimeout(function(){Bd(d,e)},2500)}};function Ni(a){Xa.call(this);this.f=a;this.b={};this.g={};this.c=[];Tc?Oi(this,new Ei(this)):Uc?Oi(this,new Bi(this)):(a=new ui(this),Oi(this,a),Sc&&Oi(this,new Ji(this,a)));a=this.c.length;for(var b,d=0;d<a;d++)b=this.c[d],Pi(this,Object.keys(b.i))}u(Ni,Xa);function Oi(a,b){var d=Object.keys(b.i);d&&(d.forEach(function(a){var d=b.i[a];d&&(this.g[a]=d.bind(b))},a),a.c.push(b))}m=Ni.prototype;m.nj=function(a){var b=this.g[a.type];b&&b(a)};
function Pi(a,b){b.forEach(function(a){B(this.f,a,this.nj,this)},a)}function Qi(a,b){b.forEach(function(a){Ta(this.f,a,this.nj,this)},a)}function xi(a,b){for(var d={},e,f=0,g=Ri.length;f<g;f++)e=Ri[f][0],d[e]=a[e]||b[e]||Ri[f][1];return d}m.move=function(a,b){yi(this,"pointermove",a,b)};m.enter=function(a,b){a.bubbles=!1;yi(this,"pointerenter",a,b)};m.leave=function(a,b){a.bubbles=!1;yi(this,"pointerleave",a,b)};m.Jb=function(a,b){a.bubbles=!0;yi(this,"pointerout",a,b)};
m.cancel=function(a,b){yi(this,"pointercancel",a,b)};function Ai(a,b,d){a.Jb(b,d);var e=b.target,f=b.relatedTarget;e&&f&&e.contains(f)||a.leave(b,d)}function zi(a,b,d){b.bubbles=!0;yi(a,"pointerover",b,d);var e=b.target,f=b.relatedTarget;e&&f&&e.contains(f)||a.enter(b,d)}function yi(a,b,d,e){a.dispatchEvent(new Di(b,e,d))}function Fi(a,b){a.dispatchEvent(new Di(b.type,b,b))}m.ja=function(){for(var a=this.c.length,b,d=0;d<a;d++)b=this.c[d],Qi(this,Object.keys(b.i));Xa.prototype.ja.call(this)};
var Ri=[["bubbles",!1],["cancelable",!1],["view",null],["detail",null],["screenX",0],["screenY",0],["clientX",0],["clientY",0],["ctrlKey",!1],["altKey",!1],["shiftKey",!1],["metaKey",!1],["button",0],["relatedTarget",null],["buttons",0],["pointerId",0],["width",0],["height",0],["pressure",0],["tiltX",0],["tiltY",0],["pointerType",""],["hwTimestamp",0],["isPrimary",!1],["type",""],["target",null],["currentTarget",null],["which",0]];function Si(a){Xa.call(this);this.g=a;this.j=0;this.o=!1;this.f=[];this.b=null;a=this.g.sa;this.C=0;this.u={};this.i=new Ni(a);this.c=null;this.s=B(this.i,"pointerdown",this.cn,this);this.B=B(this.i,"pointermove",this.aq,this)}u(Si,Xa);function Ti(a,b){var d=new si("click",a.g,b);a.dispatchEvent(d);a.j?(clearTimeout(a.j),a.j=0,d=new si("dblclick",a.g,b),a.dispatchEvent(d)):a.j=setTimeout(function(){this.j=0;var a=new si("singleclick",this.g,b);this.dispatchEvent(a)}.bind(a),250)}
function Ui(a,b){"pointerup"==b.type||"pointercancel"==b.type?delete a.u[b.pointerId]:"pointerdown"==b.type&&(a.u[b.pointerId]=!0);a.C=Object.keys(a.u).length}m=Si.prototype;m.Di=function(a){Ui(this,a);var b=new si("pointerup",this.g,a);this.dispatchEvent(b);this.o||a.button||Ti(this,this.b);this.C||(this.f.forEach(A),this.f.length=0,this.o=!1,this.b=null,this.c.Ua(),this.c=null)};
m.cn=function(a){Ui(this,a);var b=new si("pointerdown",this.g,a);this.dispatchEvent(b);this.b=a;this.f.length||(this.c=new Ni(document),this.f.push(B(this.c,"pointermove",this.Ko,this),B(this.c,"pointerup",this.Di,this),B(this.i,"pointercancel",this.Di,this)))};m.Ko=function(a){if(a.clientX!=this.b.clientX||a.clientY!=this.b.clientY){this.o=!0;var b=new si("pointerdrag",this.g,a,this.o);this.dispatchEvent(b)}a.preventDefault()};
m.aq=function(a){this.dispatchEvent(new si(a.type,this.g,a,!(!this.b||a.clientX==this.b.clientX&&a.clientY==this.b.clientY)))};m.ja=function(){this.B&&(A(this.B),this.B=null);this.s&&(A(this.s),this.s=null);this.f.forEach(A);this.f.length=0;this.c&&(this.c.Ua(),this.c=null);this.i&&(this.i.Ua(),this.i=null);Xa.prototype.ja.call(this)};function Vi(a){return function(b){if(b)return[Fb(b[0],a[0],a[2]),Fb(b[1],a[1],a[3])]}}function Wi(a){return a};function Xi(a,b,d){this.center=a;this.resolution=b;this.rotation=d};function Yi(a){return function(b,d,e){if(void 0!==b)return b=zd(a,b,e),b=Fb(b+d,0,a.length-1),d=Math.floor(b),b!=d&&d<a.length-1?a[d]/Math.pow(a[d]/a[d+1],b-d):a[d]}}function Zi(a,b,d){return function(e,f,g){if(void 0!==e)return e=Math.max(Math.floor(Math.log(b/e)/Math.log(a)+(-g/2+.5))+f,0),void 0!==d&&(e=Math.min(e,d)),b/Math.pow(a,e)}};function $i(a){if(void 0!==a)return 0}function aj(a,b){if(void 0!==a)return a+b}function bj(a){var b=2*Math.PI/a;return function(a,e){if(void 0!==a)return a=Math.floor((a+e)/b+.5)*b}}function cj(){var a=Ib(5);return function(b,d){if(void 0!==b)return Math.abs(b+d)<=a?0:b+d}};function dj(a){return 1-Math.pow(1-a,3)}function ej(a){return 3*a*a-2*a*a*a}function fj(a){return a};function gj(a,b){Jd.call(this);this.b=this.j=-1;this.fa(a,b)}u(gj,Jd);m=gj.prototype;m.clone=function(){var a=new gj(null);hj(a,this.layout,this.v.slice());return a};m.tb=function(a,b,d,e){if(e<kb(this.H(),a,b))return e;this.b!=this.g&&(this.j=Math.sqrt(Pd(this.v,0,this.v.length,this.F,0)),this.b=this.g);return Rd(this.v,0,this.v.length,this.F,this.j,!0,a,b,d,e)};m.J=function(){return Wd(this.v,0,this.v.length,this.F)};
m.Cc=function(a){var b=[];b.length=ee(this.v,0,this.v.length,this.F,a,b,0);a=new gj(null);hj(a,"XY",b);return a};m.getType=function(){return"LinearRing"};m.qb=function(){};m.fa=function(a,b){a?(this.xb(b,a,1),this.v||(this.v=[]),this.v.length=Ud(this.v,0,a,this.F),this.c()):hj(this,"XY",null)};function hj(a,b,d){Nd(a,b,d);a.c()};function ij(a,b){Jd.call(this);this.fa(a,b)}u(ij,Jd);m=ij.prototype;m.clone=function(){var a=new ij(null);jj(a,this.layout,this.v.slice());return a};m.tb=function(a,b,d,e){var f=this.v;a=Hb(a,b,f[0],f[1]);if(a<e){e=this.F;for(b=0;b<e;++b)d[b]=f[b];d.length=e;return a}return e};m.J=function(){return this.v?this.v.slice():[]};m.Vd=function(a){return qb(this.v,a)};m.getType=function(){return"Point"};m.qb=function(a){return mb(a,this.v[0],this.v[1])};
m.fa=function(a,b){a?(this.xb(b,a,0),this.v||(this.v=[]),this.v.length=Td(this.v,a),this.c()):jj(this,"XY",null)};function jj(a,b,d){Nd(a,b,d);a.c()};function kj(a,b,d,e,f,g,h){var k,l,n,p,q,r=f[g+1],t=[],C=d[0];n=a[C-e];q=a[C-e+1];for(k=b;k<C;k+=e){p=a[k];l=a[k+1];if(r<=q&&l<=r||q<=r&&r<=l)n=(r-q)/(l-q)*(p-n)+n,t.push(n);n=p;q=l}C=NaN;q=-Infinity;t.sort(xd);n=t[0];k=1;for(l=t.length;k<l;++k){p=t[k];var x=Math.abs(p-n);x>q&&(n=(n+p)/2,ae(a,b,d,e,n,r)&&(C=n,q=x));n=p}isNaN(C)&&(C=f[g]);return h?(h.push(C,r),h):[C,r]};function lj(a,b){Jd.call(this);this.ua=[];this.j=-1;this.u=null;this.G=this.C=this.D=-1;this.b=null;this.fa(a,b)}u(lj,Jd);m=lj.prototype;m.clone=function(){var a=new lj(null);mj(a,this.layout,this.v.slice(),this.ua.slice());return a};m.tb=function(a,b,d,e){if(e<kb(this.H(),a,b))return e;this.C!=this.g&&(this.D=Math.sqrt(Qd(this.v,0,this.ua,this.F,0)),this.C=this.g);return Sd(this.v,0,this.ua,this.F,this.D,!0,a,b,d,e)};m.lc=function(a,b){return ae(Te(this),0,this.ua,this.F,a,b)};
m.J=function(a){var b;void 0!==a?(b=Te(this).slice(),of(b,0,this.ua,this.F,a)):b=this.v;return Xd(b,0,this.ua,this.F)};function Ue(a){if(a.j!=a.g){var b=zb(a.H());a.u=kj(Te(a),0,a.ua,a.F,b,0);a.j=a.g}return a.u}function nj(a){if(0>=a.ua.length)return null;var b=new gj(null);hj(b,a.layout,a.v.slice(0,a.ua[0]));return b}function oj(a){var b=a.layout,d=a.v;a=a.ua;var e=[],f=0,g,h;g=0;for(h=a.length;g<h;++g){var k=a[g],l=new gj(null);hj(l,b,d.slice(f,k));e.push(l);f=k}return e}
function Te(a){if(a.G!=a.g){var b=a.v;nf(b,a.ua,a.F)?a.b=b:(a.b=b.slice(),a.b.length=of(a.b,0,a.ua,a.F));a.G=a.g}return a.b}m.Cc=function(a){var b=[],d=[];b.length=fe(this.v,0,this.ua,this.F,Math.sqrt(a),b,0,d);a=new lj(null);mj(a,"XY",b,d);return a};m.getType=function(){return"Polygon"};m.qb=function(a){return de(Te(this),0,this.ua,this.F,a)};
m.fa=function(a,b){a?(this.xb(b,a,2),this.v||(this.v=[]),a=Vd(this.v,0,a,this.F,this.ua),this.v.length=a.length?a[a.length-1]:0,this.c()):mj(this,"XY",null,this.ua)};function mj(a,b,d,e){Nd(a,b,d);a.ua=e;a.c()}function pj(a){var b=a[0],d=a[1],e=a[2];a=a[3];b=[b,d,b,a,e,a,e,d,b,d];d=new lj(null);mj(d,"XY",b,[b.length]);return d}
function qj(a){for(var b=a.F,d=a.layout,e=new lj(null,d),b=65*b,f=Array(b),g=0;g<b;g++)f[g]=0;mj(e,d,f,[f.length]);d=a.getCenter();a=Math.sqrt(rj(a));for(var b=e.v,f=e.layout,g=e.F,h=e.ua,k=b.length/g-1,l,n,p=0;p<=k;++p)n=p*g,l=0+2*Jb(p,k)*Math.PI/k,b[n]=d[0]+a*Math.cos(l),b[n+1]=d[1]+a*Math.sin(l);mj(e,f,b,h);return e};function sj(a){$a.call(this);a=w({},a);this.j=[0,0];this.b=[];this.bf=this.bf.bind(this);this.C=rc(a.projection);var b={};b.center=void 0!==a.center?a.center:null;var d,e,f,g=void 0!==a.minZoom?a.minZoom:0;d=void 0!==a.maxZoom?a.maxZoom:28;var h=void 0!==a.Yq?a.Yq:2;if(void 0!==a.mb)d=a.mb,e=d[0],f=d[d.length-1],d=Yi(d);else{e=rc(a.projection);f=e.H();var k=(f?Math.max(xb(f),yb(f)):360*Nb.degrees/Rb(e))/256/Math.pow(2,0),l=k/Math.pow(2,28);e=a.maxResolution;void 0!==e?g=0:e=k/Math.pow(h,g);f=a.minResolution;
void 0===f&&(f=void 0!==a.maxZoom?void 0!==a.maxResolution?e/Math.pow(h,d):k/Math.pow(h,d):l);d=g+Math.floor(Math.log(e/f)/Math.log(h));f=e/Math.pow(h,d-g);d=Zi(h,e,d-g)}this.f=e;this.B=f;this.D=h;this.s=a.mb;this.o=g;(void 0!==a.Bl?a.Bl:1)?(g=a.Af,g=void 0===g||!0===g?cj():!1===g?aj:"number"===typeof g?bj(g):aj):g=$i;this.i=new Xi(void 0!==a.extent?Vi(a.extent):Wi,d,g);void 0!==a.resolution?b.resolution=a.resolution:void 0!==a.zoom&&(b.resolution=this.va(this.f,a.zoom-this.o));b.rotation=void 0!==
a.rotation?a.rotation:0;this.Ea(b)}u(sj,$a);m=sj.prototype;
m.animate=function(a){var b=Date.now(),d=this.getCenter().slice(),e=this.S(),f=tj(this),g=arguments.length,h;1<g&&"function"===typeof arguments[g-1]&&(h=arguments[g-1],--g);for(var k=[],l=0;l<g;++l){var n=arguments[l],p={start:b,complete:!1,anchor:n.anchor,duration:void 0!==n.duration?n.duration:1E3,Ra:n.Ra||ej};n.center&&(p.Ug=d,p.ah=n.center,d=p.ah);void 0!==n.zoom?(p.Ve=e,p.Pc=this.va(this.f,n.zoom-this.o,0),e=p.Pc):n.resolution&&(p.Ve=e,p.Pc=n.resolution,e=p.Pc);void 0!==n.rotation&&(p.Vg=f,p.Ye=
n.rotation,f=p.Ye);p.callback=h;b+=p.duration;k.push(p)}this.b.push(k);uj(this,0,1);this.bf()};function vj(a){uj(a,0,-wj(a)[0]);for(var b=0,d=a.b.length;b<d;++b){var e=a.b[b];e[0].callback&&e[0].callback(!1)}a.b.length=0}
m.bf=function(){void 0!==this.u&&(cancelAnimationFrame(this.u),this.u=void 0);if(0<wj(this)[0]){for(var a=Date.now(),b=!1,d=this.b.length-1;0<=d;--d){for(var e=this.b[d],f=!0,g=0,h=e.length;g<h;++g){var k=e[g];if(!k.complete){b=a-k.start;b=0<k.duration?b/k.duration:1;1<=b?(k.complete=!0,b=1):f=!1;b=k.Ra(b);if(k.Ug){var l=k.Ug[0],n=k.Ug[1];this.set("center",[l+b*(k.ah[0]-l),n+b*(k.ah[1]-n)])}k.Ve&&k.Pc&&(l=1===b?k.Pc:k.Ve+b*(k.Pc-k.Ve),k.anchor&&this.set("center",xj(this,l,k.anchor)),this.set("resolution",
l));void 0!==k.Vg&&void 0!==k.Ye&&(b=1===b?k.Ye:k.Vg+b*(k.Ye-k.Vg),k.anchor&&this.set("center",yj(this,b,k.anchor)),this.set("rotation",b));b=!0;if(!k.complete)break}}f&&(this.b[d]=null,uj(this,0,-1),(e=e[0].callback)&&e(!0))}this.b=this.b.filter(Boolean);b&&void 0===this.u&&(this.u=requestAnimationFrame(this.bf))}};function yj(a,b,d){var e,f=a.getCenter();void 0!==f&&(e=[f[0]-d[0],f[1]-d[1]],Be(e,b-tj(a)),a=e,a[0]+=d[0],a[1]+=d[1]);return e}
function xj(a,b,d){var e,f=a.getCenter();a=a.S();void 0!==f&&void 0!==a&&(e=[d[0]-b*(d[0]-f[0])/a,d[1]-b*(d[1]-f[1])/a]);return e}function zj(a){var b=[100,100];a='.ol-viewport[data-view="'+v(a)+'"]';if(a=document.querySelector(a))a=getComputedStyle(a),b[0]=parseInt(a.width,10),b[1]=parseInt(a.height,10);return b}m.va=function(a,b,d){return this.i.resolution(a,b||0,d||0)};m.Af=function(a,b){return this.i.rotation(a,b||0)};m.getCenter=function(){return this.get("center")};
function wj(a,b){return void 0!==b?(b[0]=a.j[0],b[1]=a.j[1],b):a.j.slice()}function Aj(a,b){b=b||zj(a);var d=a.getCenter();Ja(d,1);var e=a.S();Ja(void 0!==e,2);a=tj(a);Ja(void 0!==a,3);return Ab(d,e,a,b)}m.getProjection=function(){return this.C};m.S=function(){return this.get("resolution")};function Bj(a,b){return Math.max(xb(a)/b[0],yb(a)/b[1])}function tj(a){return a.get("rotation")}
m.getState=function(){var a=this.getCenter(),b=this.getProjection(),d=this.S(),e=tj(this);return{center:a.slice(),projection:void 0!==b?b:null,resolution:d,rotation:e}};function Cj(a){var b,d=a.S();if(void 0!==d)a:{var e;if(d>=a.B&&d<=a.f){b=a.o||0;if(a.s){var f=zd(a.s,d,1);b+=f;if(f==a.s.length-1)break a;e=a.s[f];a=e/a.s[f+1]}else e=a.f,a=a.D;e=b+Math.log(e/d)/Math.log(a)}b=e}return b}
function Dj(a,b,d){d=d||{};var e=d.size;e||(e=zj(a));var f;b instanceof Jd?"Circle"===b.getType()?(b=b.H(),f=pj(b),f.rotate(tj(a),zb(b))):f=b:(Ja(Array.isArray(b),24),Ja(!wb(b),25),f=pj(b));var g=d.padding?d.padding:[0,0,0,0],h=void 0!==d.va?d.va:!0,k=void 0!==d.jo?d.jo:!1,l;void 0!==d.minResolution?l=d.minResolution:void 0!==d.maxZoom?l=a.va(a.f,d.maxZoom-a.o,0):l=0;var n=f.v,p=tj(a);b=Math.cos(-p);var p=Math.sin(-p),q=Infinity,r=Infinity,t=-Infinity,C=-Infinity;f=f.F;for(var x=0,K=n.length;x<K;x+=
f)var L=n[x]*b-n[x+1]*p,M=n[x]*p+n[x+1]*b,q=Math.min(q,L),r=Math.min(r,M),t=Math.max(t,L),C=Math.max(C,M);e=Bj([q,r,t,C],[e[0]-g[1]-g[3],e[1]-g[0]-g[2]]);e=isNaN(e)?l:Math.max(e,l);h&&(l=a.va(e,0,0),!k&&l<e&&(l=a.va(l,-1,0)),e=l);p=-p;l=(q+t)/2+(g[1]-g[3])/2*e;g=(r+C)/2+(g[0]-g[2])/2*e;b=[l*b-g*p,g*b+l*p];void 0!==d.duration?a.animate({resolution:e,center:b,duration:d.duration,Ra:d.Ra}):(Ej(a,e),a.setCenter(b))}m.rotate=function(a,b){void 0!==b&&(b=yj(this,a,b),this.setCenter(b));this.zd(a)};
m.setCenter=function(a){this.set("center",a);0<wj(this)[0]&&vj(this)};function uj(a,b,d){a.j[b]+=d;a.c()}function Ej(a,b){a.set("resolution",b);0<wj(a)[0]&&vj(a)}m.zd=function(a){this.set("rotation",a);0<wj(this)[0]&&vj(this)};function Fj(a,b){b=a.va(a.f,b-a.o,0);Ej(a,b)};function Gj(a){a=a?a:{};this.G=document.createElement("UL");this.s=document.createElement("LI");this.G.appendChild(this.s);this.s.style.display="none";this.j=void 0!==a.collapsed?a.collapsed:!0;this.C=void 0!==a.kl?a.kl:!0;this.C||(this.j=!1);var b=void 0!==a.className?a.className:"ol-attribution",d=void 0!==a.bh?a.bh:"Attributions",e=void 0!==a.jl?a.jl:"\u00bb";"string"===typeof e?(this.o=document.createElement("span"),this.o.textContent=e):this.o=e;e=void 0!==a.label?a.label:"i";"string"===typeof e?
(this.B=document.createElement("span"),this.B.textContent=e):this.B=e;var f=this.C&&!this.j?this.o:this.B,e=document.createElement("button");e.setAttribute("type","button");e.title=d;e.appendChild(f);B(e,"click",this.V,this);d=document.createElement("div");d.className=b+" ol-unselectable ol-control"+(this.j&&this.C?" ol-collapsed":"")+(this.C?"":" ol-uncollapsible");d.appendChild(this.G);d.appendChild(e);yh.call(this,{element:d,render:a.render?a.render:Hj,target:a.target});this.D=!0;this.f={};this.b=
{};this.X={}}u(Gj,yh);
function Hj(a){if(a=a.frameState){var b,d,e,f,g,h,k,l,n,p,q,r=a.nd,t=w({},a.Fa),C={},x={},K=a.ka.projection;d=0;for(b=r.length;d<b;d++)if(h=E(r[d].layer))if(p=v(h).toString(),n=h.C)for(e=0,f=n.length;e<f;e++)if(k=n[e],l=v(k).toString(),!(l in t)){if(g=a.gh[p]){var L=h.ec(K);a:{q=void 0;var M,N,G=k,Z=L,z=K;if(G.c){for(q in g)if(q in G.c){var L=g[q],y;N=0;for(M=G.c[q].length;N<M;++N){y=G.c[q][N];if(gg(y,L)){q=!0;break a}var Q=og(Z,ug(z),parseInt(q,10)),ea=Q.W-Q.U+1;if(L.U<Q.U||L.W>Q.W)if(gg(y,new eg(Jb(L.U,
ea),Jb(L.W,ea),L.Y,L.ba))||L.W-L.U+1>ea&&gg(y,Q)){q=!0;break a}}}q=!1}else q=!0}}else q=!1;q?(l in C&&delete C[l],q=k.b,q in x||(x[q]=!0,t[l]=k)):C[l]=k}b=[t,C];d=b[0];b=b[1];for(var P in this.f)P in d?(this.b[P]||(this.f[P].style.display="",this.b[P]=!0),delete d[P]):P in b?(this.b[P]&&(this.f[P].style.display="none",delete this.b[P]),delete b[P]):(Jc(this.f[P]),delete this.f[P],delete this.b[P]);for(P in d)e=document.createElement("LI"),e.innerHTML=d[P].b,this.G.appendChild(e),this.f[P]=e,this.b[P]=
!0;for(P in b)e=document.createElement("LI"),e.innerHTML=b[P].b,e.style.display="none",this.G.appendChild(e),this.f[P]=e;P=!Ma(this.b)||!Ma(a.Ic);this.D!=P&&(this.element.style.display=P?"":"none",this.D=P);P&&Ma(this.b)?this.element.classList.add("ol-logo-only"):this.element.classList.remove("ol-logo-only");var aa;a=a.Ic;P=this.X;for(aa in P)aa in a||(Jc(P[aa]),delete P[aa]);for(var qa in a)b=a[qa],b instanceof HTMLElement&&(this.s.appendChild(b),P[qa]=b),qa in P||(aa=new Image,aa.src=qa,""===b?
d=aa:(d=document.createElement("a"),d.href=b,d.appendChild(aa)),this.s.appendChild(d),P[qa]=d);this.s.style.display=Ma(a)?"none":""}else this.D&&(this.element.style.display="none",this.D=!1)}Gj.prototype.V=function(a){a.preventDefault();this.element.classList.toggle("ol-collapsed");if(this.j){a=this.B;var b=a.parentNode;b&&b.replaceChild(this.o,a)}else a=this.o,(b=a.parentNode)&&b.replaceChild(this.B,a);this.j=!this.j};function Ij(a){a=a?a:{};var b=void 0!==a.className?a.className:"ol-rotate",d=void 0!==a.label?a.label:"\u21e7";this.b=null;"string"===typeof d?(this.b=document.createElement("span"),this.b.className="ol-compass",this.b.textContent=d):(this.b=d,this.b.classList.add("ol-compass"));var e=a.bh?a.bh:"Reset rotation",d=document.createElement("button");d.className=b+"-reset";d.setAttribute("type","button");d.title=e;d.appendChild(this.b);B(d,"click",Ij.prototype.B,this);e=document.createElement("div");e.className=
b+" ol-unselectable ol-control";e.appendChild(d);b=a.render?a.render:Jj;this.j=a.hq?a.hq:void 0;yh.call(this,{element:e,render:b,target:a.target});this.o=void 0!==a.duration?a.duration:250;this.f=void 0!==a.cl?a.cl:!0;this.s=void 0;this.f&&this.element.classList.add("ol-hidden")}u(Ij,yh);Ij.prototype.B=function(a){a.preventDefault();this.j?this.j():(a=O(this.i))&&void 0!==tj(a)&&(0<this.o?a.animate({rotation:0,duration:this.o,Ra:dj}):a.zd(0))};
function Jj(a){if(a=a.frameState){a=a.ka.rotation;if(a!=this.s){var b="rotate("+a+"rad)";if(this.f){var d=this.element.classList.contains("ol-hidden");d||a?d&&a&&this.element.classList.remove("ol-hidden"):this.element.classList.add("ol-hidden")}this.b.style.msTransform=b;this.b.style.webkitTransform=b;this.b.style.transform=b}this.s=a}};function Kj(a){a=a?a:{};var b=void 0!==a.className?a.className:"ol-zoom",d=void 0!==a.cc?a.cc:1,e=void 0!==a.Zq?a.Zq:"+",f=void 0!==a.ar?a.ar:"\u2212",g=void 0!==a.uk?a.uk:"Zoom in",h=void 0!==a.vk?a.vk:"Zoom out",k=document.createElement("button");k.className=b+"-in";k.setAttribute("type","button");k.title=g;k.appendChild("string"===typeof e?document.createTextNode(e):e);B(k,"click",Kj.prototype.f.bind(this,d));e=document.createElement("button");e.className=b+"-out";e.setAttribute("type","button");
e.title=h;e.appendChild("string"===typeof f?document.createTextNode(f):f);B(e,"click",Kj.prototype.f.bind(this,-d));d=document.createElement("div");d.className=b+" ol-unselectable ol-control";d.appendChild(k);d.appendChild(e);yh.call(this,{element:d,target:a.target});this.b=void 0!==a.duration?a.duration:250}u(Kj,yh);Kj.prototype.f=function(a,b){b.preventDefault();if(b=O(this.i)){var d=b.S();d&&(a=b.va(d,a),0<this.b?(0<wj(b)[0]&&vj(b),b.animate({resolution:a,duration:this.b,Ra:dj})):Ej(b,a))}};function Lj(a,b,d){this.i=a;this.f=b;this.j=d;this.c=[];this.b=this.g=0}function Mj(a){a.c.length=0;a.g=0;a.b=0}Lj.prototype.end=function(){if(6>this.c.length)return!1;var a=Date.now()-this.j,b=this.c.length-3;if(this.c[b+2]<a)return!1;for(var d=b-3;0<d&&this.c[d+2]>a;)d-=3;var a=this.c[b+2]-this.c[d+2],e=this.c[b]-this.c[d],b=this.c[b+1]-this.c[d+1];this.g=Math.atan2(b,e);this.b=Math.sqrt(e*e+b*b)/a;return this.b>this.f};function Nj(a){$a.call(this);this.ma=null;this.setActive(!0);this.handleEvent=a.handleEvent}u(Nj,$a);Nj.prototype.getActive=function(){return this.get("active")};Nj.prototype.setActive=function(a){this.set("active",a)};Nj.prototype.setMap=function(a){this.ma=a};function Oj(a,b,d,e){if(void 0!==b){var f=tj(a),g=a.getCenter();void 0!==f&&g&&0<e?a.animate({rotation:b,anchor:d,duration:e,Ra:dj}):a.rotate(b,d)}}
function Pj(a,b,d,e){var f=a.S();b=a.va(f,b,0);if(d&&void 0!==b&&b!==f){var g=a.getCenter();d=xj(a,b,d);d=a.i.center(d);d=[(b*g[0]-f*d[0])/(b-f),(b*g[1]-f*d[1])/(b-f)]}Qj(a,b,d,e)}function Qj(a,b,d,e){if(b){var f=a.S(),g=a.getCenter();void 0!==f&&g&&b!==f&&e?a.animate({resolution:b,anchor:d,duration:e,Ra:dj}):(d&&(d=xj(a,b,d),a.setCenter(d)),Ej(a,b))}};function Rj(a){a=a?a:{};this.b=a.cc?a.cc:1;Nj.call(this,{handleEvent:Sj});this.f=void 0!==a.duration?a.duration:250}u(Rj,Nj);function Sj(a){var b=!1,d=a.originalEvent;if("dblclick"==a.type){var b=a.coordinate,d=d.shiftKey?-this.b:this.b,e=O(a.map);Pj(e,d,b,this.f);a.preventDefault();b=!0}return!b};function Tj(a){a=a.originalEvent;return a.altKey&&!(a.metaKey||a.ctrlKey)&&a.shiftKey}function Uj(a){a=a.originalEvent;return!a.button&&!(Nc&&Oc&&a.ctrlKey)}function Vj(a){a=a.originalEvent;return!a.altKey&&!(a.metaKey||a.ctrlKey)&&!a.shiftKey}function Wj(a){a=a.originalEvent;return!a.altKey&&(Oc?a.metaKey:a.ctrlKey)&&!a.shiftKey}function Xj(a){a=a.originalEvent;return!a.altKey&&!(a.metaKey||a.ctrlKey)&&a.shiftKey}
function Yj(a){a=a.originalEvent.target.tagName;return"INPUT"!==a&&"SELECT"!==a&&"TEXTAREA"!==a}function Zj(a){Ja(a.c,56);return"mouse"==a.c.pointerType}function ak(a){a=a.c;return a.isPrimary&&0===a.button};function bk(a){a=a?a:{};Nj.call(this,{handleEvent:a.handleEvent?a.handleEvent:ck});this.rf=a.ab?a.ab:Eb;this.tf=a.pb?a.pb:Ga;this.Ef=a.sg?a.sg:Ga;this.zl=a.bb?a.bb:Eb;this.B=!1;this.X={};this.i=[]}u(bk,Nj);function dk(a){for(var b=a.length,d=0,e=0,f=0;f<b;f++)d+=a[f].clientX,e+=a[f].clientY;return[d/b,e/b]}
function ck(a){if(!(a instanceof si))return!0;var b=!1,d=a.type;if("pointerdown"===d||"pointerdrag"===d||"pointerup"===d)d=a.c,"pointerup"==a.type?delete this.X[d.pointerId]:"pointerdown"==a.type?this.X[d.pointerId]=d:d.pointerId in this.X&&(this.X[d.pointerId]=d),this.i=La(this.X);this.B?"pointerdrag"==a.type?this.tf(a):"pointerup"==a.type&&(this.B=this.zl(a)&&0<this.i.length):"pointerdown"==a.type?(this.B=a=this.rf(a),b=this.Ub(a)):"pointermove"==a.type&&this.Ef(a);return!b}bk.prototype.Ub=function(a){return a};function ek(a){bk.call(this,{ab:fk,pb:gk,bb:hk});a=a?a:{};this.b=a.Ln;this.f=null;this.s=a.condition?a.condition:Vj;this.j=!1}u(ek,bk);function gk(a){var b=this.i,d=dk(b);if(b.length==this.o){if(this.b&&this.b.c.push(d[0],d[1],Date.now()),this.f){var e=this.f[0]-d[0],f=d[1]-this.f[1];a=O(a.map);var g=a.getState(),f=e=[e,f],h=g.resolution;f[0]*=h;f[1]*=h;Be(e,g.rotation);f=e;g=g.center;f[0]+=g[0];f[1]+=g[1];e=a.i.center(e);a.setCenter(e)}}else this.b&&Mj(this.b);this.f=d;this.o=b.length}
function hk(a){var b=a.map;a=O(b);if(this.i.length)return this.b&&Mj(this.b),this.f=null,!0;if(!this.j&&this.b&&this.b.end()){var d;d=this.b;d=(d.f-d.b)/d.i;var e=this.b.g,f=a.getCenter(),f=wh(b,f),b=b.wa([f[0]-d*Math.cos(e),f[1]-d*Math.sin(e)]);a.animate({center:a.i.center(b),duration:500,Ra:dj})}uj(a,1,-1);return!1}
function fk(a){if(0<this.i.length&&this.s(a)){var b=O(a.map);this.f=null;this.B||uj(b,1,1);wj(b)[0]&&b.setCenter(a.frameState.ka.center);this.b&&Mj(this.b);this.j=1<this.i.length;return!0}return!1}ek.prototype.Ub=Eb;function ik(a){a=a?a:{};bk.call(this,{ab:jk,pb:kk,bb:lk});this.f=a.condition?a.condition:Tj;this.b=void 0;this.j=void 0!==a.duration?a.duration:250}u(ik,bk);function kk(a){if(Zj(a)){var b=a.map,d=b.ha();a=a.pixel;d=Math.atan2(d[1]/2-a[1],a[0]-d[0]/2);if(void 0!==this.b){a=d-this.b;var b=O(b),e=tj(b);Oj(b,e-a)}this.b=d}}function lk(a){if(!Zj(a))return!0;a=O(a.map);uj(a,1,-1);var b=tj(a),d=this.j,b=a.Af(b,0);Oj(a,b,void 0,d);return!1}
function jk(a){return Zj(a)&&Uj(a)&&this.f(a)?(uj(O(a.map),1,1),this.b=void 0,!0):!1}ik.prototype.Ub=Eb;function mk(a){this.dc=null;this.b=document.createElement("div");this.b.style.position="absolute";this.b.className="ol-box "+a;this.g=this.f=this.c=null}u(mk,Ua);mk.prototype.ja=function(){this.setMap(null)};function nk(a){var b=a.f,d=a.g;a=a.b.style;a.left=Math.min(b[0],d[0])+"px";a.top=Math.min(b[1],d[1])+"px";a.width=Math.abs(d[0]-b[0])+"px";a.height=Math.abs(d[1]-b[1])+"px"}
mk.prototype.setMap=function(a){if(this.c){this.c.rd.removeChild(this.b);var b=this.b.style;b.left=b.top=b.width=b.height="inherit"}(this.c=a)&&this.c.rd.appendChild(this.b)};function ok(a){var b=a.f,d=a.g,b=[b,[b[0],d[1]],d,[d[0],b[1]]].map(a.c.wa,a.c);b[4]=b[0].slice();a.dc?a.dc.fa([b]):a.dc=new lj([b])}mk.prototype.getGeometry=function(){return this.dc};function pk(a){bk.call(this,{ab:qk,pb:rk,bb:sk});a=a?a:{};this.b=new mk(a.className||"ol-dragbox");this.s=void 0!==a.Vn?a.Vn:64;this.f=null;this.u=a.condition?a.condition:Db;this.o=a.fl?a.fl:tk}u(pk,bk);function tk(a,b,d){a=d[0]-b[0];b=d[1]-b[1];return a*a+b*b>=this.s}function rk(a){if(Zj(a)){var b=this.b,d=a.pixel;b.f=this.f;b.g=d;ok(b);nk(b);this.dispatchEvent(new uk(vk,a.coordinate,a))}}pk.prototype.getGeometry=function(){return this.b.getGeometry()};pk.prototype.j=Ga;
function sk(a){if(!Zj(a))return!0;this.b.setMap(null);this.o(a,this.f,a.pixel)&&(this.j(a),this.dispatchEvent(new uk(wk,a.coordinate,a)));return!1}function qk(a){if(Zj(a)&&Uj(a)&&this.u(a)){this.f=a.pixel;this.b.setMap(a.map);var b=this.b,d=this.f;b.f=this.f;b.g=d;ok(b);nk(b);this.dispatchEvent(new uk(yk,a.coordinate,a));return!0}return!1}var yk="boxstart",vk="boxdrag",wk="boxend";function uk(a,b,d){Va.call(this,a);this.coordinate=b;this.mapBrowserEvent=d}u(uk,Va);function zk(a){a=a?a:{};var b=a.condition?a.condition:Xj;this.C=void 0!==a.duration?a.duration:200;this.D=void 0!==a.Jb?a.Jb:!1;pk.call(this,{condition:b,className:a.className||"ol-dragzoom"})}u(zk,pk);
zk.prototype.j=function(){var a=this.ma,b=O(a),d=a.ha(),e=this.getGeometry().H();if(this.D){var f=Aj(b,d),e=[wh(a,[e[0],e[1]]),wh(a,[e[2],e[3]])],a=pb(void 0),g,h;g=0;for(h=e.length;g<h;++g)hb(a,e[g]);a=1/Bj(a,d);e=(f[2]-f[0])/2*(a-1);a=(f[3]-f[1])/2*(a-1);f[0]-=e;f[2]+=e;f[1]-=a;f[3]+=a;e=f}d=b.va(Bj(e,d));f=zb(e);f=b.i.center(f);b.animate({resolution:d,center:f,duration:this.C,Ra:dj})};function Ak(a){Nj.call(this,{handleEvent:Bk});a=a||{};this.b=function(a){return Vj(a)&&Yj(a)};this.f=a.condition?a.condition:this.b;this.i=void 0!==a.duration?a.duration:100;this.j=void 0!==a.Cp?a.Cp:128}u(Ak,Nj);
function Bk(a){var b=!1;if("keydown"==a.type){var d=a.originalEvent.keyCode;if(this.f(a)&&(40==d||37==d||39==d||38==d)){var b=O(a.map),e=b.S()*this.j,f=0,g=0;40==d?g=-e:37==d?f=-e:39==d?f=e:g=e;e=[f,g];Be(e,tj(b));d=this.i;if(f=b.getCenter())e=b.i.center([f[0]+e[0],f[1]+e[1]]),d?b.animate({duration:d,Ra:fj,center:e}):b.setCenter(e);a.preventDefault();b=!0}}return!b};function Ck(a){Nj.call(this,{handleEvent:Dk});a=a?a:{};this.f=a.condition?a.condition:Yj;this.b=a.cc?a.cc:1;this.i=void 0!==a.duration?a.duration:100}u(Ck,Nj);function Dk(a){var b=!1;if("keydown"==a.type||"keypress"==a.type){var d=a.originalEvent.charCode;!this.f(a)||43!=d&&45!=d||(b=43==d?this.b:-this.b,d=O(a.map),Pj(d,b,void 0,this.i),a.preventDefault(),b=!0)}return!b};function Ek(a){Nj.call(this,{handleEvent:Fk});a=a||{};this.i=0;this.B=void 0!==a.duration?a.duration:250;this.G=void 0!==a.timeout?a.timeout:80;this.M=void 0!==a.Tq?a.Tq:!0;this.D=a.va||!1;this.b=null;this.o=this.j=this.s=this.f=void 0}u(Ek,Nj);
function Fk(a){var b=a.type;if("wheel"!==b&&"mousewheel"!==b)return!0;a.preventDefault();var b=a.map,d=a.originalEvent;this.M&&(this.b=a.coordinate);var e;"wheel"==a.type?(e=d.deltaY,Lc&&d.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(e/=Pc),d.deltaMode===WheelEvent.DOM_DELTA_LINE&&(e*=40)):"mousewheel"==a.type&&(e=-d.wheelDeltaY,Mc&&(e/=3));if(0===e)return!1;a=Date.now();void 0===this.f&&(this.f=a);if(!this.j||400<a-this.f)this.j=4>Math.abs(e)?Gk:Hk;if(this.j===Gk){b=O(b);this.o?clearTimeout(this.o):
uj(b,1,1);this.o=setTimeout(this.u.bind(this),400);var d=b.S()*Math.pow(2,e/300),f=b.B,g=b.f,h=0;d<f?(d=Math.max(d,f/1.5),h=1):d>g&&(d=Math.min(d,1.5*g),h=-1);if(this.b){var k=xj(b,d,this.b);b.setCenter(b.i.center(k))}Ej(b,d);!h&&this.D&&b.animate({resolution:b.va(d,0<e?-1:1),Ra:dj,anchor:this.b,duration:this.B});0<h?b.animate({resolution:f,Ra:dj,anchor:this.b,duration:500}):0>h&&b.animate({resolution:g,Ra:dj,anchor:this.b,duration:500});this.f=a;return!1}this.i+=e;e=Math.max(this.G-(a-this.f),0);
clearTimeout(this.s);this.s=setTimeout(this.C.bind(this,b),e);return!1}Ek.prototype.u=function(){this.o=void 0;uj(O(this.ma),1,-1)};Ek.prototype.C=function(a){a=O(a);0<wj(a)[0]&&vj(a);Pj(a,-Fb(this.i,-1,1),this.b,this.B);this.j=void 0;this.i=0;this.b=null;this.s=this.f=void 0};var Gk="trackpad",Hk="wheel";function Ik(a){bk.call(this,{ab:Jk,pb:Kk,bb:Lk});a=a||{};this.f=null;this.j=void 0;this.b=!1;this.o=0;this.u=void 0!==a.threshold?a.threshold:.3;this.s=void 0!==a.duration?a.duration:250}u(Ik,bk);
function Kk(a){var b=0,d=this.i[0],e=this.i[1],d=Math.atan2(e.clientY-d.clientY,e.clientX-d.clientX);void 0!==this.j&&(b=d-this.j,this.o+=b,!this.b&&Math.abs(this.o)>this.u&&(this.b=!0));this.j=d;a=a.map;d=a.sa.getBoundingClientRect();e=dk(this.i);e[0]-=d.left;e[1]-=d.top;this.f=a.wa(e);this.b&&(d=O(a),e=tj(d),a.render(),Oj(d,e+b,this.f))}function Lk(a){if(2>this.i.length){a=O(a.map);uj(a,1,-1);if(this.b){var b=tj(a),d=this.f,e=this.s,b=a.Af(b,0);Oj(a,b,d,e)}return!1}return!0}
function Jk(a){return 2<=this.i.length?(a=a.map,this.f=null,this.j=void 0,this.b=!1,this.o=0,this.B||uj(O(a),1,1),!0):!1}Ik.prototype.Ub=Eb;function Mk(a){bk.call(this,{ab:Nk,pb:Ok,bb:Pk});a=a?a:{};this.o=a.va||!1;this.f=null;this.s=void 0!==a.duration?a.duration:400;this.b=void 0;this.j=1}u(Mk,bk);
function Ok(a){var b=1,d=this.i[0],e=this.i[1],f=d.clientX-e.clientX,d=d.clientY-e.clientY,f=Math.sqrt(f*f+d*d);void 0!==this.b&&(b=this.b/f);this.b=f;a=a.map;var f=O(a),e=f.S(),g=f.f,h=f.B,d=e*b;d>g?(b=g/e,d=g):d<h&&(b=h/e,d=h);1!=b&&(this.j=b);b=a.sa.getBoundingClientRect();e=dk(this.i);e[0]-=b.left;e[1]-=b.top;this.f=a.wa(e);a.render();Qj(f,d,this.f)}
function Pk(a){if(2>this.i.length){a=O(a.map);uj(a,1,-1);var b=a.S();if(this.o||b<a.B||b>a.f){var d=this.f,e=this.s,b=a.va(b,0,this.j-1);Qj(a,b,d,e)}return!1}return!0}function Nk(a){return 2<=this.i.length?(a=a.map,this.f=null,this.b=void 0,this.j=1,this.B||uj(O(a),1,1),!0):!1}Mk.prototype.Ub=Eb;function Qk(a){a=a?a:{};var b=new hi,d=new Lj(-.005,.05,100);(void 0!==a.xh?a.xh:1)&&b.push(new ik);(void 0!==a.wl?a.wl:1)&&b.push(new Rj({cc:a.Xq,duration:a.ff}));(void 0!==a.xl?a.xl:1)&&b.push(new ek({Ln:d}));(void 0!==a.wj?a.wj:1)&&b.push(new Ik);(void 0!==a.Bp?a.Bp:1)&&b.push(new Mk({va:a.va,duration:a.ff}));if(void 0!==a.Kn?a.Kn:1)b.push(new Ak),b.push(new Ck({cc:a.Xq,duration:a.ff}));(void 0!==a.Wn?a.Wn:1)&&b.push(new Ek({va:a.va,duration:a.ff}));(void 0!==a.vq?a.vq:1)&&b.push(new zk({duration:a.ff}));
return b};function Rk(a){var b=a||{};a=w({},b);delete a.layers;b=b.layers;te.call(this,a);this.f=[];this.listenerKeys_={};B(this,cb(Sk),this.Um,this);b?Array.isArray(b)?b=new hi(b.slice(),{unique:!0}):Ja(b instanceof hi,43):b=new hi(void 0,{unique:!0});this.set(Sk,b)}u(Rk,te);m=Rk.prototype;m.ae=function(){};m.re=function(){ve(this)&&this.c()};
m.Um=function(){this.f.forEach(A);this.f.length=0;var a=this.getLayers();this.f.push(B(a,"add",this.hp,this),B(a,"remove",this.ip,this));for(var b in this.listenerKeys_)this.listenerKeys_[b].forEach(A);Ka(this.listenerKeys_);var a=a.b,d,e;b=0;for(d=a.length;b<d;b++)e=a[b],this.listenerKeys_[v(e).toString()]=[B(e,"propertychange",this.re,this),B(e,"change",this.re,this)];this.c()};
m.hp=function(a){a=a.element;var b=v(a).toString();this.listenerKeys_[b]=[B(a,"propertychange",this.re,this),B(a,"change",this.re,this)];this.c()};m.ip=function(a){a=v(a.element).toString();this.listenerKeys_[a].forEach(A);delete this.listenerKeys_[a];this.c()};m.getLayers=function(){return this.get(Sk)};
m.dg=function(a){var b=void 0!==a?a:[],d=b.length;this.getLayers().forEach(function(a){a.dg(b)});a=ue(this);var e,f;for(e=b.length;d<e;d++)f=b[d],f.opacity*=a.opacity,f.visible=f.visible&&a.visible,f.maxResolution=Math.min(f.maxResolution,a.maxResolution),f.minResolution=Math.max(f.minResolution,a.minResolution),void 0!==a.extent&&(f.extent=void 0!==f.extent?Bb(f.extent,a.extent):a.extent);return b};m.ng=function(){return"ready"};var Sk="layers";function Tk(a,b){this.j=b;this.b={};this.f={}}u(Tk,Ua);Tk.prototype.ja=function(){for(var a in this.b)this.b[a].Ua()};function Uk(){if(32<Zh.b){var a=0,b,d;for(b in Zh.c)d=Zh.c[b],a++&3||d.hasListener()||(delete Zh.c[b],--Zh.b)}}
function Vk(a,b,d,e,f,g,h){function k(a,b){var e=v(a).toString(),h=d.xe[v(b)].yg;if(!(e in d.Tg)||h)return f.call(g,a,h?b:null)}var l,n=d.ka,p=n.resolution,q=n.projection,n=b;if(q.b){var q=q.H(),r=xb(q),t=b[0];if(t<q[0]||t>q[2])n=[t+r*Math.ceil((q[0]-t)/r),b[1]]}q=d.nd;for(r=q.length-1;0<=r;--r){var C=q[r],t=C.layer;if(C.visible&&p>=C.minResolution&&p<C.maxResolution&&h.call(null,t)&&(C=Wk(a,t),E(t)&&(l=C.j(E(t).B?n:b,d,e,k,g)),l))return l}}
function Wk(a,b){var d=v(b).toString();if(d in a.b)return a.b[d];b=b.ae(a);a.b[d]=b;a.f[d]=B(b,"change",a.s,a);return b}Tk.prototype.s=function(){this.j.render()};Tk.prototype.o=Ga;Tk.prototype.u=function(a,b){for(var d in this.b)if(!(b&&d in b.xe)){a=d;var e=this.b[a];delete this.b[a];A(this.f[a]);delete this.f[a];e.Ua()}};function Fd(a,b){return a.zIndex-b.zIndex};function Xk(a,b){Tk.call(this,0,b);this.i=Ic();this.c=this.i.canvas;this.c.style.width="100%";this.c.style.height="100%";this.c.style.display="block";this.c.className="ol-unselectable";a.insertBefore(this.c,a.childNodes[0]||null);this.g=!0;this.B=He()}u(Xk,Tk);
function Yk(a,b,d){var e=a.j,f=a.i;if(e.hasListener(b)){var g=d.extent,h=d.Ka,k=d.ka.rotation,l=d.ka,n=d.Ka/l.resolution;a=Ke(a.B,a.c.width/2,a.c.height/2,n,-n,-l.rotation,-l.center[0],-l.center[1]);e.dispatchEvent(new Fe(b,new Le(f,h,g,a,k),d,f,null))}}Xk.prototype.getType=function(){return"canvas"};
Xk.prototype.o=function(a){if(a){var b=this.i,d=a.Ka,e=Math.round(a.size[0]*d),f=Math.round(a.size[1]*d);this.c.width!=e||this.c.height!=f?(this.c.width=e,this.c.height=f):b.clearRect(0,0,e,f);var d=a.ka.rotation,g=a.ka,h=a.xc,k=a.Eg;Ke(h,a.size[0]/2,a.size[1]/2,1/g.resolution,-1/g.resolution,-g.rotation,-g.center[0],-g.center[1]);g=Ie(k,h);h=g[0]*g[3]-g[1]*g[2];Ja(!!h,32);var k=g[0],l=g[1],n=g[2],p=g[3],q=g[4],r=g[5];g[0]=p/h;g[1]=-l/h;g[2]=-n/h;g[3]=k/h;g[4]=(n*r-p*q)/h;g[5]=-(k*r-l*q)/h;Yk(this,
"precompose",a);g=a.nd;Ed(g);d&&(b.save(),Yc(b,d,e/2,f/2));e=a.ka.resolution;f=0;for(h=g.length;f<h;++f)k=g[f],l=k.layer,l=Wk(this,l),k.visible&&e>=k.minResolution&&e<k.maxResolution&&"ready"==k.Aq&&l.u(a,k)&&l.C(a,k,b);d&&b.restore();Yk(this,"postcompose",a);this.g||(this.c.style.display="",this.g=!0);for(var t in this.b)if(!(t in a.xe)){a.He.push(this.u.bind(this));break}a.He.push(Uk)}else this.g&&(this.c.style.display="none",this.g=!1)};
Xk.prototype.Tf=function(a,b,d,e,f,g){var h,k=b.ka.resolution,l=b.nd,n=l.length;a=Je(b.Eg,a.slice());for(--n;0<=n;--n){h=l[n];var p=h.layer;if(h.visible&&k>=h.minResolution&&k<h.maxResolution&&f.call(g,p)&&(h=Wk(this,p).B(a,b,d,e)))return h}};var Zk=["canvas","webgl"];
function $k(a){$a.call(this);var b=al(a);this.On=void 0!==a.Ni?a.Ni:!1;this.Pn=void 0!==a.Oi?a.Oi:!1;this.gb=void 0!==a.Ka?a.Ka:Pc;this.Rn=b.Ic;this.pf=function(){this.Db=void 0;this.fq.call(this,Date.now())}.bind(this);this.ml=He();this.Dp=He();this.Kl=0;this.Da=null;this.Bj=gb();this.we=this.df=this.ef=null;this.sa=document.createElement("DIV");this.sa.className="ol-viewport"+(Sc?" ol-touch":"");this.sa.style.position="relative";this.sa.style.overflow="hidden";this.sa.style.width="100%";this.sa.style.height=
"100%";this.sa.style.msTouchAction="none";this.sa.style.touchAction="none";this.rd=document.createElement("DIV");this.rd.className="ol-overlaycontainer";this.sa.appendChild(this.rd);this.qd=document.createElement("DIV");this.qd.className="ol-overlaycontainer-stopevent";a="click dblclick mousedown touchstart MSPointerDown pointerdown mousewheel wheel".split(" ");for(var d=0,e=a.length;d<e;++d)B(this.qd,a[d],Wa);this.sa.appendChild(this.qd);this.Pi=new Si(this);for(var f in ri)B(this.Pi,ri[f],this.Ai,
this);this.Ji=b.md;this.ld=null;B(this.sa,"wheel",this.Ec,this);B(this.sa,"mousewheel",this.Ec,this);this.Wd=b.controls;this.T=b.hc;this.Ja=b.Kc;this.uj={};this.ud=new b.gq(this.sa,this);this.Sf=null;this.zj=[];this.ek=new re(this.lm.bind(this),this.sn.bind(this));this.yq={};B(this,cb("layergroup"),this.Tm,this);B(this,cb("view"),this.tn,this);B(this,cb("size"),this.mn,this);B(this,cb("target"),this.rn,this);this.Ea(b.values);this.Wd.forEach(function(a){a.setMap(this)},this);B(this.Wd,"add",function(a){a.element.setMap(this)},
this);B(this.Wd,"remove",function(a){a.element.setMap(null)},this);this.T.forEach(function(a){a.setMap(this)},this);B(this.T,"add",function(a){a.element.setMap(this)},this);B(this.T,"remove",function(a){a.element.setMap(null)},this);this.Ja.forEach(this.wh,this);B(this.Ja,"add",function(a){this.wh(a.element)},this);B(this.Ja,"remove",function(a){var b=a.element.u;void 0!==b&&delete this.uj[b.toString()];a.element.setMap(null)},this)}u($k,$a);function bl(a,b){a.T.push(b)}
function cl(a,b){dl(a).getLayers().push(b)}m=$k.prototype;m.wh=function(a){var b=a.u;void 0!==b&&(this.uj[b.toString()]=a);a.setMap(this)};m.ja=function(){this.Pi.Ua();this.ud.Ua();Ta(this.sa,"wheel",this.Ec,this);Ta(this.sa,"mousewheel",this.Ec,this);this.Rb&&(window.removeEventListener("resize",this.Rb,!1),this.Rb=void 0);this.Db&&(cancelAnimationFrame(this.Db),this.Db=void 0);this.Ue(null);$a.prototype.ja.call(this)};
function el(a,b,d,e){if(a.Da)return b=a.wa(b),e=e?e:{},Vk(a.ud,b,a.Da,void 0!==e.Fc?e.Fc*a.Da.Ka:0,d,null,e.ve?e.ve:Db)}m.Tf=function(a,b,d,e,f){if(this.Da)return this.ud.Tf(a,this.Da,b,void 0!==d?d:null,e?e:Db,void 0!==f?f:null)};function qi(a,b){a=a.sa.getBoundingClientRect();b=b.changedTouches?b.changedTouches[0]:b;return[b.clientX-a.left,b.clientY-a.top]}function uh(a){a=a.get("target");return void 0!==a?"string"===typeof a?document.getElementById(a):a:null}
m.wa=function(a){var b=this.Da;return b?Je(b.Eg,a.slice()):null};m.getControls=function(){return this.Wd};function dl(a){return a.get("layergroup")}m.getLayers=function(){return dl(this).getLayers()};function wh(a,b){return(a=a.Da)?Je(a.xc,b.slice(0,2)):null}m.ha=function(){return this.get("size")};function O(a){return a.get("view")}
m.lm=function(a,b,d,e){var f=this.Da;if(!(f&&b in f.Gd&&f.Gd[b][a.kc()]))return Infinity;a=d[0]-f.focus[0];d=d[1]-f.focus[1];return 65536*Math.log(e)+Math.sqrt(a*a+d*d)/e};m.Ec=function(a,b){a=new pi(b||a.type,this,a);this.Ai(a)};m.Ai=function(a){if(this.Da){this.Sf=a.coordinate;a.frameState=this.Da;var b=this.T.b,d;if(!1!==this.dispatchEvent(a))for(d=b.length-1;0<=d;d--){var e=b[d];if(e.getActive()&&!e.handleEvent(a))break}}};
m.gn=function(){var a=this.Da,b=this.ek;if(b.c.length){var d=16,e=d;if(a){var f=a.Yb;f[0]&&(d=this.On?8:0,e=2);f[1]&&(d=this.Pn?8:0,e=2)}if(b.j<d){var f=b.B,g=b.c,h=b.b,k=0,l=g.length,n,p,q;for(p=0;p<l;++p)n=g[p],q=f(n),Infinity==q?delete b.g[b.f(n)]:(h[k]=q,g[k++]=n);g.length=k;h.length=k;for(f=(b.c.length>>1)-1;0<=f;f--)qe(b,f);for(f=0;b.j<d&&f<e&&0<b.c.length;)g=b,k=g.c,l=g.b,h=k[0],1==k.length?(k.length=0,l.length=0):(k[0]=k.pop(),l[0]=l.pop(),qe(g,0)),k=g.f(h),delete g.g[k],g=h[0],h=g.kc(),0!==
g.getState()||h in b.i||(b.i[h]=!0,++b.j,++f,g.load())}}b=this.zj;e=0;for(d=b.length;e<d;++e)b[e](this,a);b.length=0};m.mn=function(){this.render()};
m.rn=function(){var a;this.get("target")&&(a=uh(this));if(this.ld){for(var b=0,d=this.ld.length;b<d;++b)A(this.ld[b]);this.ld=null}a?(a.appendChild(this.sa),a=this.Ji?this.Ji:a,this.ld=[B(a,"keydown",this.Ec,this),B(a,"keypress",this.Ec,this)],this.Rb||(this.Rb=this.cf.bind(this),window.addEventListener("resize",this.Rb,!1))):(Jc(this.sa),this.Rb&&(window.removeEventListener("resize",this.Rb,!1),this.Rb=void 0));this.cf()};m.sn=function(){this.render()};m.Ei=function(){this.render()};
m.tn=function(){this.ef&&(A(this.ef),this.ef=null);this.df&&(A(this.df),this.df=null);var a=O(this);a&&(this.sa.setAttribute("data-view",v(a)),this.ef=B(a,"propertychange",this.Ei,this),this.df=B(a,"change",this.Ei,this));this.render()};m.Tm=function(){this.we&&(this.we.forEach(A),this.we=null);var a=dl(this);a&&(this.we=[B(a,"propertychange",this.render,this),B(a,"change",this.render,this)]);this.render()};m.render=function(){void 0===this.Db&&(this.Db=requestAnimationFrame(this.pf))};
m.fq=function(a){var b,d,e=this.ha(),f=O(this),g=gb(),h=null,k;if(k=void 0!==e&&0<e[0]&&0<e[1]&&f)k=!!f.getCenter()&&void 0!==f.S();if(k){h=wj(f,this.Da?this.Da.Yb:void 0);k=dl(this).dg();var l={};b=0;for(d=k.length;b<d;++b)l[v(k[b].layer)]=k[b];b=f.getState();h={animate:!1,Fa:{},xc:this.ml,extent:g,focus:this.Sf?this.Sf:b.center,index:this.Kl++,xe:l,nd:k,Ic:w({},this.Rn),Ka:this.gb,Eg:this.Dp,He:[],size:e,Tg:this.yq,Eq:this.ek,time:a,gh:{},ka:b,Yb:h,Gd:{}}}h&&(h.extent=Ab(b.center,b.resolution,b.rotation,
h.size,g));this.Da=h;this.ud.o(h);h&&(h.animate&&this.render(),Array.prototype.push.apply(this.zj,h.He),h.Yb[0]||h.Yb[1]||rb(h.extent,this.Bj)||(this.dispatchEvent(new oi("moveend",this,h)),jb(h.extent,this.Bj)));this.dispatchEvent(new oi("postrender",this,h));setTimeout(this.gn.bind(this),0)};m.Te=function(a){this.set("size",a)};m.Ue=function(a){this.set("target",a)};
m.cf=function(){var a=uh(this);if(a){var b=getComputedStyle(a);this.Te([a.offsetWidth-parseFloat(b.borderLeftWidth)-parseFloat(b.paddingLeft)-parseFloat(b.paddingRight)-parseFloat(b.borderRightWidth),a.offsetHeight-parseFloat(b.borderTopWidth)-parseFloat(b.paddingTop)-parseFloat(b.paddingBottom)-parseFloat(b.borderBottomWidth)])}else this.Te(void 0)};
function al(a){var b=null;void 0!==a.md&&(b="string"===typeof a.md?document.getElementById(a.md):a.md);var d={},e={};if(void 0===a.Ia||"boolean"===typeof a.Ia&&a.Ia)e["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAA3NCSVQICAjb4U/gAAAACXBIWXMAAAHGAAABxgEXwfpGAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAhNQTFRF////AP//AICAgP//AFVVQECA////K1VVSbbbYL/fJ05idsTYJFtbbcjbJllmZszWWMTOIFhoHlNiZszTa9DdUcHNHlNlV8XRIVdiasrUHlZjIVZjaMnVH1RlIFRkH1RkH1ZlasvYasvXVsPQH1VkacnVa8vWIVZjIFRjVMPQa8rXIVVkXsXRsNveIFVkIFZlIVVj3eDeh6GmbMvXH1ZkIFRka8rWbMvXIFVkIFVjIFVkbMvWH1VjbMvWIFVlbcvWIFVla8vVIFVkbMvWbMvVH1VkbMvWIFVlbcvWIFVkbcvVbMvWjNPbIFVkU8LPwMzNIFVkbczWIFVkbsvWbMvXIFVkRnB8bcvW2+TkW8XRIFVkIlZlJVloJlpoKlxrLl9tMmJwOWd0Omh1RXF8TneCT3iDUHiDU8LPVMLPVcLPVcPQVsPPVsPQV8PQWMTQWsTQW8TQXMXSXsXRX4SNX8bSYMfTYcfTYsfTY8jUZcfSZsnUaIqTacrVasrVa8jTa8rWbI2VbMvWbcvWdJObdcvUdszUd8vVeJaee87Yfc3WgJyjhqGnitDYjaarldPZnrK2oNbborW5o9bbo9fbpLa6q9ndrL3ArtndscDDutzfu8fJwN7gwt7gxc/QyuHhy+HizeHi0NfX0+Pj19zb1+Tj2uXk29/e3uLg3+Lh3+bl4uXj4ufl4+fl5Ofl5ufl5ujm5+jmySDnBAAAAFp0Uk5TAAECAgMEBAYHCA0NDg4UGRogIiMmKSssLzU7PkJJT1JTVFliY2hrdHZ3foSFhYeJjY2QkpugqbG1tre5w8zQ09XY3uXn6+zx8vT09vf4+Pj5+fr6/P39/f3+gz7SsAAAAVVJREFUOMtjYKA7EBDnwCPLrObS1BRiLoJLnte6CQy8FLHLCzs2QUG4FjZ5GbcmBDDjxJBXDWxCBrb8aM4zbkIDzpLYnAcE9VXlJSWlZRU13koIeW57mGx5XjoMZEUqwxWYQaQbSzLSkYGfKFSe0QMsX5WbjgY0YS4MBplemI4BdGBW+DQ11eZiymfqQuXZIjqwyadPNoSZ4L+0FVM6e+oGI6g8a9iKNT3o8kVzNkzRg5lgl7p4wyRUL9Yt2jAxVh6mQCogae6GmflI8p0r13VFWTHBQ0rWPW7ahgWVcPm+9cuLoyy4kCJDzCm6d8PSFoh0zvQNC5OjDJhQopPPJqph1doJBUD5tnkbZiUEqaCnB3bTqLTFG1bPn71kw4b+GFdpLElKIzRxxgYgWNYc5SCENVHKeUaltHdXx0dZ8uBI1hJ2UUDgq82CM2MwKeibqAvSO7MCABq0wXEPiqWEAAAAAElFTkSuQmCC"]=
"https://openlayers.org/";else{var f=a.Ia;"string"===typeof f?e[f]="":f instanceof HTMLElement?e[v(f).toString()]=f:f&&(Ja("string"==typeof f.href,44),Ja("string"==typeof f.src,45),e[f.src]=f.href)}f=a.layers instanceof Rk?a.layers:new Rk({layers:a.layers});d.layergroup=f;d.target=a.target;d.view=void 0!==a.view?a.view:new sj;var f=Tk,g;void 0!==a.Oe?(Array.isArray(a.Oe)?g=a.Oe:"string"===typeof a.Oe?g=[a.Oe]:Ja(!1,46),0<=g.indexOf("dom")&&(g=g.concat(Zk))):g=Zk;var h,k;h=0;for(k=g.length;h<k;++h)if("canvas"==
g[h]&&Rc){f=Xk;break}void 0!==a.controls?Array.isArray(a.controls)?g=new hi(a.controls.slice()):(Ja(a.controls instanceof hi,47),g=a.controls):(g={},h=new hi,(void 0!==g.zoom?g.zoom:1)&&h.push(new Kj(g.ds)),(void 0!==g.rotate?g.rotate:1)&&h.push(new Ij(g.cs)),(void 0!==g.attribution?g.attribution:1)&&h.push(new Gj(g.Rr)),g=h);void 0!==a.hc?Array.isArray(a.hc)?h=new hi(a.hc.slice()):(Ja(a.hc instanceof hi,48),h=a.hc):h=Qk();void 0!==a.Kc?Array.isArray(a.Kc)?a=new hi(a.Kc.slice()):(Ja(a.Kc instanceof
hi,49),a=a.Kc):a=new hi;return{controls:g,hc:h,md:b,Ic:e,Kc:a,gq:f,values:d}};function fl(){return[[-Infinity,-Infinity,Infinity,Infinity]]};function gl(a){a=a||{};wg.call(this,{Fa:a.Fa,Ia:a.Ia,projection:void 0,state:"ready",wrapX:void 0!==a.wrapX?a.wrapX:!0});this.u=Ga;this.X=a.format;this.V=void 0==a.Dg?!0:a.Dg;this.D=a.url;a.Qn?this.u=a.Qn:void 0!==this.D&&(Ja(this.X,7),this.u=lh(this.D,this.X));this.da=a.Cq?a.Cq:fl;var b=void 0!==a.Xb?a.Xb:!0;this.b=b?new qf:null;this.G=new qf;this.f={};this.i={};this.o={};this.s={};this.j=null;var d,e;a.features instanceof hi?(d=a.features,e=d.b):Array.isArray(a.features)&&(e=a.features);b||d||(d=
new hi(e));e&&mh(this,e);d&&hl(this,d)}u(gl,wg);m=gl.prototype;m.oa=function(a){var b=v(a).toString();if(il(this,b,a)){jl(this,b,a);var d=a.getGeometry();d?(b=d.H(),this.b&&this.b.insert(b,a)):this.f[b]=a;this.dispatchEvent(new kl("addfeature",a))}this.c()};function jl(a,b,d){a.s[b]=[B(d,"change",a.qj,a),B(d,"propertychange",a.qj,a)]}function il(a,b,d){var e=!0,f=d.f;void 0!==f?f.toString()in a.i?e=!1:a.i[f.toString()]=d:(Ja(!(b in a.o),30),a.o[b]=d);return e}
function mh(a,b){var d,e,f,g,h=[],k=[],l=[];e=0;for(f=b.length;e<f;e++)g=b[e],d=v(g).toString(),il(a,d,g)&&k.push(g);e=0;for(f=k.length;e<f;e++)g=k[e],d=v(g).toString(),jl(a,d,g),(b=g.getGeometry())?(d=b.H(),h.push(d),l.push(g)):a.f[d]=g;a.b&&a.b.load(h,l);e=0;for(f=k.length;e<f;e++)a.dispatchEvent(new kl("addfeature",k[e]))}
function hl(a,b){var d=!1;B(a,"addfeature",function(a){d||(d=!0,b.push(a.feature),d=!1)});B(a,"removefeature",function(a){d||(d=!0,b.remove(a.feature),d=!1)});B(b,"add",function(a){d||(d=!0,this.oa(a.element),d=!1)},a);B(b,"remove",function(a){d||(d=!0,this.na(a.element),d=!1)},a);a.j=b}
m.clear=function(a){if(a){for(var b in this.s)this.s[b].forEach(A);this.j||(this.s={},this.i={},this.o={})}else if(this.b){this.b.forEach(this.Ng,this);for(var d in this.f)this.Ng(this.f[d])}this.j&&this.j.clear();this.b&&this.b.clear();this.G.clear();this.f={};this.dispatchEvent(new kl("clear"));this.c()};function fi(a,b,d,e){a.b?vf(a.b,b,d,e):a.j&&a.j.forEach(d,e)}m.cd=function(){var a;this.j?a=this.j.b:this.b&&(a=sf(this.b),Ma(this.f)||Ad(a,La(this.f)));return a};
m.Zf=function(a){return tf(this.b,a)};m.H=function(a){return this.b.H(a)};m.getUrl=function(){return this.D};
m.qj=function(a){a=a.target;var b=v(a).toString(),d=a.getGeometry();d?(d=d.H(),b in this.f?(delete this.f[b],this.b&&this.b.insert(d,a)):this.b&&rf(this.b,d,a)):b in this.f||(this.b&&this.b.remove(a),this.f[b]=a);d=a.f;void 0!==d?(d=d.toString(),b in this.o?(delete this.o[b],this.i[d]=a):this.i[d]!==a&&(ll(this,a),this.i[d]=a)):b in this.o||(ll(this,a),this.o[b]=a);this.c();this.dispatchEvent(new kl("changefeature",a))};
function ei(a,b,d,e){var f=a.G;b=a.da(b,d);var g,h;g=0;for(h=b.length;g<h;++g){var k=b[g];vf(f,k,function(a){return lb(a.extent,k)})||(a.u.call(a,k,d,e),f.insert(k,{extent:k.slice()}))}}m.na=function(a){var b=v(a).toString();b in this.f?delete this.f[b]:this.b&&this.b.remove(a);this.Ng(a);this.c()};m.Ng=function(a){var b=v(a).toString();this.s[b].forEach(A);delete this.s[b];var d=a.f;void 0!==d?delete this.i[d.toString()]:delete this.o[b];this.dispatchEvent(new kl("removefeature",a))};
function ll(a,b){for(var d in a.i)if(a.i[d]===b){delete a.i[d];break}}function kl(a,b){Va.call(this,a);this.feature=b}u(kl,Va);function ml(){return{restrict:"A",link:function(a,b,d){var e=a.$eval(d.ngeoSearch),f=a.$eval(d.ngeoSearchDatasets).slice();f.unshift(e);b.typeahead.apply(b,[].concat(la(f)));d=a.$eval(d.ngeoSearchListeners);var g=ml.c(d);b.on("typeahead:open",function(){a.$apply(function(){g.open()})});b.on("typeahead:close",function(){a.$apply(function(){g.close()})});b.on("typeahead:cursorchange",function(b,d,e){a.$apply(function(){g.cursorchange(b,d,e)})});b.on("typeahead:select",function(b,d,e){a.$apply(function(){g.select(b,
d,e)})});b.on("typeahead:autocomplete",function(b,d,e){a.$apply(function(){g.autocomplete(b,d,e)})});b.on("typeahead:asyncreceive",function(d,e,f){a.$apply(function(){var a=b.data("tt-typeahead").menu._allDatasetsEmpty();g.datasetsempty(d,f,a)})})}}}
ml.c=function(a){var b;a?b={open:a.open?a.open:Ga,close:a.close?a.close:Ga,cursorchange:a.cursorchange?a.cursorchange:Ga,datasetsempty:a.datasetsempty?a.datasetsempty:Ga,select:a.select?a.select:Ga,autocomplete:a.autocomplete?a.autocomplete:Ga}:b={open:Ga,close:Ga,cursorchange:Ga,datasetsempty:Ga,select:Ga,autocomplete:Ga};return b};ml.module=angular.module("ngeoSearchDirective",[]);ml.module.directive("ngeoSearch",ml);function nl(){nd.call(this)}u(nl,nd);function ol(a){return"string"===typeof a?(a=JSON.parse(a))?a:null:null!==a?a:null}m=nl.prototype;m.getType=function(){return"json"};m.readFeature=function(a,b){return pl(this,ol(a),od(this,a,b))};m.readFeatures=function(a,b){var d=ol(a);a=od(this,a,b);if("FeatureCollection"===d.type){b=[];var d=d.features,e,f;e=0;for(f=d.length;e<f;++e)b.push(pl(this,d[e],a))}else b=[pl(this,d,a)];return b};m.readGeometry=function(a,b){var d=ol(a);a=od(this,a,b);return ql(d,a)};
m.Me=function(a){a=ol(a).crs;var b;a?"name"==a.type?b=lc(a.properties.name):"EPSG"==a.type?b=lc("EPSG:"+a.properties.code):Ja(!1,36):b=this.ub;return b};m.writeFeature=function(a,b){return JSON.stringify(rl(this,a,b))};m.writeFeatures=function(a,b){return JSON.stringify(sl(this,a,b))};m.writeGeometry=function(a,b){return JSON.stringify(tl(a,pd(this,b)))};function ul(a){yc.call(this);this.b=a?a:null;vl(this)}u(ul,yc);function wl(a){var b=[],d,e;d=0;for(e=a.length;d<e;++d)b.push(a[d].clone());return b}function xl(a){var b,d;if(a.b)for(b=0,d=a.b.length;b<d;++b)Ta(a.b[b],"change",a.c,a)}function vl(a){var b,d;if(a.b)for(b=0,d=a.b.length;b<d;++b)B(a.b[b],"change",a.c,a)}m=ul.prototype;m.clone=function(){var a=new ul(null),b=wl(this.b);xl(a);a.b=b;vl(a);a.c();return a};
m.tb=function(a,b,d,e){if(e<kb(this.H(),a,b))return e;var f=this.b,g,h;g=0;for(h=f.length;g<h;++g)e=f[g].tb(a,b,d,e);return e};m.lc=function(a,b){var d=this.b,e,f;e=0;for(f=d.length;e<f;++e)if(d[e].lc(a,b))return!0;return!1};m.Vd=function(a){pb(a);for(var b=this.b,d=0,e=b.length;d<e;++d)sb(a,b[d].H());return a};
m.mg=function(a){this.o!=this.g&&(Ka(this.f),this.i=0,this.o=this.g);if(0>a||this.i&&a<this.i)return this;var b=a.toString();if(this.f.hasOwnProperty(b))return this.f[b];var d=[],e=this.b,f=!1,g,h;g=0;for(h=e.length;g<h;++g){var k=e[g],l=k.mg(a);d.push(l);l!==k&&(f=!0)}if(f)return a=new ul(null),xl(a),a.b=d,vl(a),a.c(),this.f[b]=a;this.i=a;return this};m.getType=function(){return"GeometryCollection"};m.qb=function(a){var b=this.b,d,e;d=0;for(e=b.length;d<e;++d)if(b[d].qb(a))return!0;return!1};
m.rotate=function(a,b){for(var d=this.b,e=0,f=d.length;e<f;++e)d[e].rotate(a,b);this.c()};m.scale=function(a,b,d){d||(d=zb(this.H()));for(var e=this.b,f=0,g=e.length;f<g;++f)e[f].scale(a,b,d);this.c()};m.Pd=function(a){var b=this.b,d,e;d=0;for(e=b.length;d<e;++d)b[d].Pd(a);this.c()};m.translate=function(a,b){var d=this.b,e,f;e=0;for(f=d.length;e<f;++e)d[e].translate(a,b);this.c()};m.ja=function(){xl(this);yc.prototype.ja.call(this)};function yl(a,b){Jd.call(this);this.Za=[];this.b=this.j=-1;this.fa(a,b)}u(yl,Jd);m=yl.prototype;m.clone=function(){var a=new yl(null);zl(a,this.layout,this.v.slice(),this.Za.slice());return a};m.tb=function(a,b,d,e){if(e<kb(this.H(),a,b))return e;this.b!=this.g&&(this.j=Math.sqrt(Qd(this.v,0,this.Za,this.F,0)),this.b=this.g);return Sd(this.v,0,this.Za,this.F,this.j,!1,a,b,d,e)};m.J=function(){return Xd(this.v,0,this.Za,this.F)};
function Al(a){var b=a.v,d=a.Za;a=a.layout;var e=[],f=0,g,h;g=0;for(h=d.length;g<h;++g){var k=d[g],l=new ge(null);he(l,a,b.slice(f,k));e.push(l);f=k}return e}function Se(a){var b=[],d=a.v,e=0,f=a.Za;a=a.F;var g,h;g=0;for(h=f.length;g<h;++g){var k=f[g],e=Yd(d,e,k,a);Ad(b,e);e=k}return b}m.Cc=function(a){var b=[],d=[],e=this.v,f=this.Za,g=this.F,h=0,k=0,l,n;l=0;for(n=f.length;l<n;++l){var p=f[l],k=ee(e,h,p,g,a,b,k);d.push(k);h=p}b.length=k;a=new yl(null);zl(a,"XY",b,d);return a};m.getType=function(){return"MultiLineString"};
m.qb=function(a){a:{var b=this.v,d=this.Za,e=this.F,f=0,g,h;g=0;for(h=d.length;g<h;++g){if(ce(b,f,d[g],e,a)){a=!0;break a}f=d[g]}a=!1}return a};m.fa=function(a,b){a?(this.xb(b,a,2),this.v||(this.v=[]),a=Vd(this.v,0,a,this.F,this.Za),this.v.length=a.length?a[a.length-1]:0,this.c()):zl(this,"XY",null,this.Za)};function zl(a,b,d,e){Nd(a,b,d);a.Za=e;a.c()}function Bl(a,b){var d=a.layout,e=[],f=[],g,h;g=0;for(h=b.length;g<h;++g){var k=b[g];g||(d=k.layout);Ad(e,k.v);f.push(e.length)}zl(a,d,e,f)};function Cl(a,b){Jd.call(this);this.fa(a,b)}u(Cl,Jd);m=Cl.prototype;m.clone=function(){var a=new Cl(null);Nd(a,this.layout,this.v.slice());a.c();return a};m.tb=function(a,b,d,e){if(e<kb(this.H(),a,b))return e;var f=this.v,g=this.F,h,k,l;h=0;for(k=f.length;h<k;h+=g)if(l=Hb(a,b,f[h],f[h+1]),l<e){e=l;for(l=0;l<g;++l)d[l]=f[h+l];d.length=g}return e};m.J=function(){return Wd(this.v,0,this.v.length,this.F)};
function Dl(a){var b=a.v,d=a.layout;a=a.F;var e=[],f,g;f=0;for(g=b.length;f<g;f+=a){var h=new ij(null);jj(h,d,b.slice(f,f+a));e.push(h)}return e}m.getType=function(){return"MultiPoint"};m.qb=function(a){var b=this.v,d=this.F,e,f,g,h;e=0;for(f=b.length;e<f;e+=d)if(g=b[e],h=b[e+1],mb(a,g,h))return!0;return!1};m.fa=function(a,b){a?(this.xb(b,a,1),this.v||(this.v=[]),this.v.length=Ud(this.v,0,a,this.F)):Nd(this,"XY",null);this.c()};function El(a,b){Jd.call(this);this.b=[];this.u=-1;this.C=null;this.M=this.D=this.G=-1;this.j=null;this.fa(a,b)}u(El,Jd);m=El.prototype;m.clone=function(){for(var a=new El(null),b=this.b.length,d=Array(b),e=0;e<b;++e)d[e]=this.b[e].slice();Fl(a,this.layout,this.v.slice(),d);return a};
m.tb=function(a,b,d,e){if(e<kb(this.H(),a,b))return e;if(this.D!=this.g){var f=this.b,g=0,h=0,k,l;k=0;for(l=f.length;k<l;++k)var n=f[k],h=Qd(this.v,g,n,this.F,h),g=n[n.length-1];this.G=Math.sqrt(h);this.D=this.g}f=Ve(this);g=this.b;h=this.F;k=this.G;l=0;var n=[NaN,NaN],p,q;p=0;for(q=g.length;p<q;++p){var r=g[p];e=Sd(f,l,r,h,k,!0,a,b,d,e,n);l=r[r.length-1]}return e};
m.lc=function(a,b){a:{var d=Ve(this),e=this.b,f=0;if(e.length){var g,h;g=0;for(h=e.length;g<h;++g){var k=e[g];if(ae(d,f,k,this.F,a,b)){a=!0;break a}f=k[k.length-1]}}a=!1}return a};m.J=function(a){var b;void 0!==a?(b=Ve(this).slice(),pf(b,this.b,this.F,a)):b=this.v;a=b;b=this.b;var d=this.F,e=0,f=[],g=0,h,k;h=0;for(k=b.length;h<k;++h){var l=b[h];f[g++]=Xd(a,e,l,d,f[g]);e=l[l.length-1]}f.length=g;return f};
function We(a){if(a.u!=a.g){var b=a.v,d=a.b,e=a.F,f=0,g=[],h,k,l;h=0;for(k=d.length;h<k;++h){var n=d[h];l=b;var p=n[0],q=e,r=pb(void 0);l=tb(r,l,f,p,q);g.push((l[0]+l[2])/2,(l[1]+l[3])/2);f=n[n.length-1]}b=Ve(a);d=a.b;e=a.F;h=0;k=[];n=0;for(l=d.length;n<l;++n)f=d[n],k=kj(b,h,f,e,g,2*n,k),h=f[f.length-1];a.C=k;a.u=a.g}return a.C}
function Ve(a){if(a.M!=a.g){var b=a.v,d;a:{d=a.b;var e,f;e=0;for(f=d.length;e<f;++e)if(!nf(b,d[e],a.F,void 0)){d=!1;break a}d=!0}d?a.j=b:(a.j=b.slice(),a.j.length=pf(a.j,a.b,a.F));a.M=a.g}return a.j}m.Cc=function(a){var b=[],d=[],e=this.v,f=this.b,g=this.F;a=Math.sqrt(a);var h=0,k=0,l,n;l=0;for(n=f.length;l<n;++l){var p=f[l],q=[],k=fe(e,h,p,g,a,b,k,q);d.push(q);h=p[p.length-1]}b.length=k;e=new El(null);Fl(e,"XY",b,d);return e};
function Gl(a){var b=a.layout,d=a.v;a=a.b;var e=[],f=0,g,h,k,l;g=0;for(h=a.length;g<h;++g){var n=a[g].slice(),p=n[n.length-1];if(f)for(k=0,l=n.length;k<l;++k)n[k]-=f;k=new lj(null);mj(k,b,d.slice(f,p),n);e.push(k);f=p}return e}m.getType=function(){return"MultiPolygon"};m.qb=function(a){a:{var b=Ve(this),d=this.b,e=this.F,f=0,g,h;g=0;for(h=d.length;g<h;++g){var k=d[g];if(de(b,f,k,e,a)){a=!0;break a}f=k[k.length-1]}a=!1}return a};
m.fa=function(a,b){if(a){this.xb(b,a,3);this.v||(this.v=[]);b=this.v;var d=this.F,e=this.b,f=0,e=e?e:[],g=0,h,k;h=0;for(k=a.length;h<k;++h)f=Vd(b,f,a[h],d,e[g]),e[g++]=f,f=f[f.length-1];e.length=g;e.length?(a=e[e.length-1],this.v.length=a.length?a[a.length-1]:0):this.v.length=0;this.c()}else Fl(this,"XY",null,this.b)};function Fl(a,b,d,e){Nd(a,b,d);a.b=e;a.c()}
function Hl(a,b){var d=a.layout,e=[],f=[],g,h,k;g=0;for(h=b.length;g<h;++g){var l=b[g];g||(d=l.layout);var n=e.length;k=l.ua;var p,q;p=0;for(q=k.length;p<q;++p)k[p]+=n;Ad(e,l.v);f.push(k)}Fl(a,d,e,f)};function Il(a){a=a?a:{};nd.call(this);this.ub=lc(a.ub?a.ub:"EPSG:4326");a.ib&&(this.i=lc(a.ib));this.c=a.geometryName}u(Il,nl);function ql(a,b){return a?qd((0,Jl[a.type])(a),!1,b):null}function tl(a,b){return(0,Kl[a.getType()])(qd(a,!0,b),b)}
var Jl={Point:function(a){return new ij(a.coordinates)},LineString:function(a){return new ge(a.coordinates)},Polygon:function(a){return new lj(a.coordinates)},MultiPoint:function(a){return new Cl(a.coordinates)},MultiLineString:function(a){return new yl(a.coordinates)},MultiPolygon:function(a){return new El(a.coordinates)},GeometryCollection:function(a,b){a=a.geometries.map(function(a){return ql(a,b)});return new ul(a)}},Kl={Point:function(a){return{type:"Point",coordinates:a.J()}},LineString:function(a){return{type:"LineString",
coordinates:a.J()}},Polygon:function(a,b){var d;b&&(d=b.c);return{type:"Polygon",coordinates:a.J(d)}},MultiPoint:function(a){return{type:"MultiPoint",coordinates:a.J()}},MultiLineString:function(a){return{type:"MultiLineString",coordinates:a.J()}},MultiPolygon:function(a,b){var d;b&&(d=b.c);return{type:"MultiPolygon",coordinates:a.J(d)}},GeometryCollection:function(a,b){return{type:"GeometryCollection",geometries:a.b.map(function(a){var d=w({},b);delete d.ib;return tl(a,d)})}},Circle:function(){return{type:"GeometryCollection",
geometries:[]}}};function pl(a,b,d){b="Feature"===b.type?b:{type:"Feature",geometry:b};d=ql(b.geometry,d);var e=new jd;a.c&&kd(e,a.c);e.setGeometry(d);void 0!==b.id&&md(e,b.id);b.properties&&e.Ea(b.properties);return e}function rl(a,b,d){d=pd(a,d);a={type:"Feature"};var e=b.f;void 0!==e&&(a.id=e);(e=b.getGeometry())?a.geometry=tl(e,d):a.geometry=null;d=db(b);delete d[b.b];Ma(d)?a.properties=null:a.properties=d;return a}
function sl(a,b,d){d=pd(a,d);var e=[],f,g;f=0;for(g=b.length;f<g;++f)e.push(rl(a,b[f],d));return{type:"FeatureCollection",features:e}};function Ll(a,b,d,e,f,g){var h=new Il;a={remote:{url:a,prepare:function(a,b){b.url=b.url.replace("%QUERY",a);return b},transform:function(a){b&&(a={type:"FeatureCollection",features:a.features.filter(b)});return h.readFeatures(a,{ib:d,Mb:e})}},datumTokenizer:Ga,queryTokenizer:Bloodhound.tokenizers.whitespace};f=w({},f||{});g=w({},g||{});f.remote&&(w(g,f.remote),delete f.remote);w(a,f);w(a.remote,g);return new Bloodhound(a)}Ll.module=angular.module("ngeoSearchCreategeojsonbloodhound",[]);
Ll.module.value("ngeoSearchCreateGeoJSONBloodhound",Ll);"function"!==typeof Pb()&&"function"===typeof proj4&&(Ob=proj4);if("function"==typeof Pb()){Pb().defs("EPSG:21781","+proj=somerc +lat_0=46.95240555555556 +lon_0=7.439583333333333 +k_0=1 +x_0=600000 +y_0=200000 +ellps=bessel +towgs84=674.374,15.056,405.346,0,0,0,0 +units=m +no_defs");var Ml=lc("EPSG:21781"),Nl=[42E4,3E4,9E5,35E4];Ml.i=Nl;Ml.b=!(!Ml.g||!Nl)};function Ol(a){var b=a||{},d=lc("EPSG:21781"),e=b.targetProjection;a={remote:{url:"https://api3.geo.admin.ch/rest/services/api/SearchServer?type=locations&searchText=%QUERY",prepare:function(a,d){d.url=d.url.replace("%QUERY",a);void 0!==b.limit&&(d.url+="&limit="+b.limit);void 0!==b.origins&&(d.url+="&origins="+b.origins);return b.prepare?b.prepare(a,d):d},transform:function(a){return a.results.map(function(a){a=a.attrs;var b=new ij([a.y,a.x]),f;f=/BOX\((.*?) (.*?),(.*?) (.*?)\)/g.exec(a.geom_st_box2d);
f=null!==f?[parseFloat(f[1]),parseFloat(f[2]),parseFloat(f[3]),parseFloat(f[4])]:null;e&&(b.transform(d,e),null!==f&&(f=xc(f,d,e)));a.geometry=b;a.bbox=f;b=a.label;a.label_no_html=b.replace(/<\/?[ib]>/g,"");f=/<b>(.*?)<\/b>/g.exec(b);a.label_simple=null!==f?f[1]:b;b=new jd(a);md(b,a.featureId);return b})}},datumTokenizer:Ga,queryTokenizer:Bloodhound.tokenizers.whitespace};var f=w({},b.options||{}),g=w({},b.remoteOptions||{});f.remote&&(w(g,f.remote),delete f.remote);w(a,f);w(a.remote,g);return new Bloodhound(a)}
Ol.module=angular.module("ngeoCreateLocationSearchBloodhound",[]);Ol.module.value("ngeoCreateLocationSearchBloodhound",Ol);var Pl=angular.module("ngeoSearchModule",[ml.module.name,Ll.module.name,Ol.module.name]);function Ql(a,b,d,e){var f,g;this.g=function(a){return!(2E7<a)};this.f=function(a){return/<(WMT_MS_Capabilities|WMS_Capabilities)/.test(a)};this.b=function(a){return/<kml/.test(a)&&/<\/kml>/.test(a)};this.c=function(a){return/<gpx/.test(a)&&/<\/gpx>/.test(a)};this.read=function(b){var g=a.defer();f&&f.abort();f=new FileReader;f.onload=function(a){g.resolve(a.target.result)};f.onerror=function(a){a=a.target.error;d.console.error("Reading file failed: ",a);g.reject({message:20==a.code?e("Operation canceled"):
e("Read failed"),reason:a.message})};f.onprogress=function(a){g.notify(a)};f.readAsText(b);return g.promise};this.load=function(f,k){g&&g.resolve();g=k||a.defer();var h=a.defer();b.get(f,{timeout:g.promise}).then(function(a){h.resolve(a.data)},function(a){d.console.error("Uploading file failed: ",a);h.reject({message:e("Upload failed"),reason:a})});return h.promise}}Ql.$inject=["$q","$http","$window","gettext"];var Rl=angular.module("ngeo.fileService",[]);Rl.service("ngeoFile",Ql);function Sl(a,b,d,e,f){return{restrict:"A",templateUrl:f,scope:{options:"=ngeoImportDndOptions"},link:function(f,h){var g=f.options;if(g&&"function"===typeof g.handleFileContent){f.handleFileContent=g.handleFileContent;h.click(function(){this.style.display="none"}).on("dragleave drop",function(){this.style.display="none"}).on("dragover dragleave drop",function(a){a.stopPropagation();a.preventDefault()}).on("drop",function(b){var h=b.originalEvent.dataTransfer.files;if(h&&0<h.length)e.read(h[0]).then(function(a){f.handleFileContent(a,
h[0])});else if(b.originalEvent.dataTransfer.types){var k=b.originalEvent.dataTransfer.getData("text/plain");if(g.isValidUrl(k))e.load(k).then(function(a){return f.handleFileContent(a,{url:k})})["catch"](function(b){a.alert(d.getString(b.message))});else a.alert(d.getString("Invalid URL")+k)}});var l=function(a){a.stopPropagation();a.preventDefault();a=a.originalEvent.dataTransfer.types||[];for(var b=0,d=a.length;b<d;++b)if(/(files|text\/plain)/i.test(a[b])){h.css("display","table");break}};b.on("dragenter",
l);var n=function(){return!1};b.on("dragstart",n);f.$on("$destroy",function(){b.off("dragEnter",l).off("dragstart",n)})}else h.remove()}}}Sl.$inject=["$window","$document","gettextCatalog","ngeoFile","ngeoImportDndTemplateUrl"];var Tl=angular.module("ngeo.importDndDirective",["gettext",Rl.name]);Tl.value("ngeoImportDndTemplateUrl",function(a,b){a=b.ngeoImportDndTemplateUrl;return void 0!==a?a:Ul+"/import/partials/import-dnd.html"});Tl.directive("ngeoImportDnd",Sl);function Vl(a,b,d,e){var f;return{restrict:"A",templateUrl:e,scope:{options:"=ngeoImportLocalOptions"},link:function(e,h){var g=e.options;if(g&&"function"===typeof g.handleFileContent){e.handleFileContent=e.options.handleFileContent;var l=function(){e.userMessage=b("Load local file");e.progress=0;e.fileReader=null};l();g=function(){h.find('input[type="file"]').click()};h.find("button.ngeo-import-browse").click(g);h.find("input.form-control[type=text][readonly]").click(g);h.find("input[type=file]").on("change",
function(a){a.target.files&&0<a.target.files.length&&e.$apply(function(){e.files=a.target.files})});e.$watchCollection("files",function(){if(e.files&&0<e.files.length){var a=e.files[0];e.file=a;e.fileSize=a.size;e.isDropped&&e.handleFile()}});e.isLoading=function(){return 0<e.progress&&100>e.progress};e.isValid=function(a){return!a||d.g(a.size)};e.cancel=function(){e.fileReader&&(e.fileReader.abort(),e.fileReader=null)};e.handleFile=function(){e.file&&(e.loading=!0,e.userMessage=b("Reading file"),
a.cancel(f),d.read(e.file).then(function(a){e.fileReader=null;e.userMessage=b("Parsing file");return e.handleFileContent(a,e.file)}).then(function(){e.userMessage=b("Parsing succeeded")},function(a){e.userMessage=a.message},function(a){e.fileReader||(e.fileReader=a.target)}).finally(function(){e.fileReader=null;e.loading=!1;f=a(l,5E3)}))}}else h.remove()}}}Vl.$inject=["$timeout","gettext","ngeoFile","ngeoImportLocalTemplateUrl"];var Wl=angular.module("ngeo.importLocalDirective",[Rl.name]);
Wl.value("ngeoImportLocalTemplateUrl",function(a,b){a=b.ngeoImportLocalTemplateUrl;return void 0!==a?a:Ul+"/import/partials/import-local.html"});Wl.directive("ngeoImportLocal",Vl);function Xl(a,b,d,e,f){var g;return{restrict:"A",templateUrl:f,scope:{options:"=ngeoImportOnlineOptions"},link:function(f,k){var h=f.options;if(h&&"function"===typeof h.handleFileContent){f.handleFileContent=h.handleFileContent;var n=function(){f.userMessage=e("Connect");f.progress=0;f.loading=!1};n();var p=f.options.urls;p&&0<p.length&&!p[0].name&&(p=p.map(function(a){return{name:a,url:a}}));var q=k.find("input[name=url]").typeahead({hint:!0,highlight:!0,minLength:0},{name:"wms",displayKey:"name",
limit:500,source:function(a){return function(b,d){var e=[];if(b){var f=new RegExp(b,"i");a.forEach(function(a){f.test(a.name)&&e.push(a)})}else e=a;d(e)}}(p)}).on("typeahead:selected",function(a,b){q.typeahead("close");f.fileUrl=b.url;f.handleFileUrl();f.$digest()}),r=k.find(".tt-menu");k.find(".ngeo-import-open").on("mousedown",function(a){"none"==r.css("display")?(q.focus(),q.typeahead("val","")):q.blur();a.preventDefault()});f.$on("gettextLanguageChanged",function(){f.fileUrl&&/lang=/.test(f.fileUrl)&&
f.handleFileUrl()});f.cancel=function(){f.progress=0;f.canceler&&(f.canceler.resolve(),f.canceler=null)};f.isValid=function(a){return h.isValidUrl?h.isValidUrl(a):!0};f.handleFileUrl=function(){(h.transformUrl||a.when)(f.fileUrl).then(function(h){f.canceler=a.defer();f.loading=!0;f.userMessage=e("Downloading file");b.cancel(g);d.load(h,f.canceler).then(function(a){f.canceler=null;return f.handleFileContent(a,{url:f.fileUrl})}).then(function(a){f.userMessage=a.message},function(a){f.userMessage=a.message}).finally(function(){f.canceler=
null;f.loading=!1;g=b(n,1E4)})})}}else k.remove()}}}Xl.$inject=["$q","$timeout","ngeoFile","gettext","ngeoImportOnlineTemplateUrl"];var Yl=angular.module("ngeo.importOnlineDirective",[Rl.name,"gettext"]);Yl.value("ngeoImportOnlineTemplateUrl",function(a,b){a=b.ngeoImportOnlineTemplateUrl;return void 0!==a?a:Ul+"/import/partials/import-online.html"});Yl.directive("ngeoImportOnline",Xl);function Zl(a){return a.getAttributeNS("http://www.w3.org/1999/xlink","href")};function $l(){}$l.prototype.read=function(a){return Xg(a)?this.b(a):Yg(a)?this.c(a):"string"===typeof a?(a=Zg(a),this.b(a)):null};function am(a){a=Vg(a);return bm(a)}function bm(a){if(a=/^\s*(true|1)|(false|0)\s*$/.exec(a))return void 0!==a[1]||!1}function cm(a){a=Vg(a);a=Date.parse(a);return isNaN(a)?void 0:a/1E3}function dm(a){a=Vg(a);return em(a)}function em(a){if(a=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(a))return parseFloat(a[1])}function fm(a){a=Vg(a);return gm(a)}function gm(a){if(a=/^\s*(\d+)\s*$/.exec(a))return parseInt(a[1],10)}function R(a){return Vg(a).trim()}function hm(a,b){im(a,b?"1":"0")}
function jm(a,b){a.appendChild(Tg.createTextNode(b.toPrecision()))}function km(a,b){a.appendChild(Tg.createTextNode(b.toString()))}function im(a,b){a.appendChild(Tg.createTextNode(b))};function lm(){this.version=void 0}u(lm,$l);lm.prototype.b=function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType==Node.ELEMENT_NODE)return this.c(a);return null};lm.prototype.c=function(a){this.version=a.getAttribute("version").trim();return(a=J({version:this.version},mm,a,[]))?a:null};function nm(a,b){return J({},om,a,b)}function pm(a,b){return J({},qm,a,b)}function rm(a,b){if(b=nm(a,b))return a=[gm(a.getAttribute("width")),gm(a.getAttribute("height"))],b.size=a,b}
function sm(a,b){return J([],tm,a,b)}
var um=[null,"http://www.opengis.net/wms"],mm=I(um,{Service:F(function(a,b){return J({},vm,a,b)}),Capability:F(function(a,b){return J({},wm,a,b)})}),wm=I(um,{Request:F(function(a,b){return J({},xm,a,b)}),Exception:F(function(a,b){return J([],ym,a,b)}),Layer:F(function(a,b){return J({},zm,a,b)})}),vm=I(um,{Name:F(R),Title:F(R),Abstract:F(R),KeywordList:F(sm),OnlineResource:F(Zl),ContactInformation:F(function(a,b){return J({},Am,a,b)}),Fees:F(R),AccessConstraints:F(R),LayerLimit:F(fm),MaxWidth:F(fm),
MaxHeight:F(fm)}),Am=I(um,{ContactPersonPrimary:F(function(a,b){return J({},Bm,a,b)}),ContactPosition:F(R),ContactAddress:F(function(a,b){return J({},Cm,a,b)}),ContactVoiceTelephone:F(R),ContactFacsimileTelephone:F(R),ContactElectronicMailAddress:F(R)}),Bm=I(um,{ContactPerson:F(R),ContactOrganization:F(R)}),Cm=I(um,{AddressType:F(R),Address:F(R),City:F(R),StateOrProvince:F(R),PostCode:F(R),Country:F(R)}),ym=I(um,{Format:ah(R)}),zm=I(um,{Name:F(R),Title:F(R),Abstract:F(R),KeywordList:F(sm),CRS:ch(R),
EX_GeographicBoundingBox:F(function(a,b){var d=J({},Dm,a,b);if(d){a=d.westBoundLongitude;b=d.southBoundLatitude;var e=d.eastBoundLongitude,d=d.northBoundLatitude;if(void 0!==a&&void 0!==b&&void 0!==e&&void 0!==d)return[a,b,e,d]}}),BoundingBox:ch(function(a){var b=[em(a.getAttribute("minx")),em(a.getAttribute("miny")),em(a.getAttribute("maxx")),em(a.getAttribute("maxy"))],d=[em(a.getAttribute("resx")),em(a.getAttribute("resy"))];return{crs:a.getAttribute("CRS"),extent:b,res:d}}),Dimension:ch(function(a){return{name:a.getAttribute("name"),
units:a.getAttribute("units"),unitSymbol:a.getAttribute("unitSymbol"),"default":a.getAttribute("default"),multipleValues:bm(a.getAttribute("multipleValues")),nearestValue:bm(a.getAttribute("nearestValue")),current:bm(a.getAttribute("current")),values:R(a)}}),Attribution:F(function(a,b){return J({},Em,a,b)}),AuthorityURL:ch(function(a,b){if(b=nm(a,b))return b.name=a.getAttribute("name"),b}),Identifier:ch(R),MetadataURL:ch(function(a,b){if(b=nm(a,b))return b.type=a.getAttribute("type"),b}),DataURL:ch(nm),
FeatureListURL:ch(nm),Style:ch(function(a,b){return J({},Fm,a,b)}),MinScaleDenominator:F(dm),MaxScaleDenominator:F(dm),Layer:ch(function(a,b){var d=b[b.length-1],e=J({},zm,a,b);if(e)return b=bm(a.getAttribute("queryable")),void 0===b&&(b=d.queryable),e.queryable=void 0!==b?b:!1,b=gm(a.getAttribute("cascaded")),void 0===b&&(b=d.cascaded),e.cascaded=b,b=bm(a.getAttribute("opaque")),void 0===b&&(b=d.opaque),e.opaque=void 0!==b?b:!1,b=bm(a.getAttribute("noSubsets")),void 0===b&&(b=d.noSubsets),e.noSubsets=
void 0!==b?b:!1,(b=em(a.getAttribute("fixedWidth")))||(b=d.fixedWidth),e.fixedWidth=b,(a=em(a.getAttribute("fixedHeight")))||(a=d.fixedHeight),e.fixedHeight=a,["Style","CRS","AuthorityURL"].forEach(function(a){a in d&&(e[a]=(e[a]||[]).concat(d[a]))}),"EX_GeographicBoundingBox BoundingBox Dimension Attribution MinScaleDenominator MaxScaleDenominator".split(" ").forEach(function(a){a in e||(e[a]=d[a])}),e})}),Em=I(um,{Title:F(R),OnlineResource:F(Zl),LogoURL:F(rm)}),Dm=I(um,{westBoundLongitude:F(dm),
eastBoundLongitude:F(dm),southBoundLatitude:F(dm),northBoundLatitude:F(dm)}),xm=I(um,{GetCapabilities:F(pm),GetMap:F(pm),GetFeatureInfo:F(pm)}),qm=I(um,{Format:ch(R),DCPType:ch(function(a,b){return J({},Gm,a,b)})}),Gm=I(um,{HTTP:F(function(a,b){return J({},Hm,a,b)})}),Hm=I(um,{Get:F(nm),Post:F(nm)}),Fm=I(um,{Name:F(R),Title:F(R),Abstract:F(R),LegendURL:ch(rm),StyleSheetURL:F(nm),StyleURL:F(nm)}),om=I(um,{Format:F(R),OnlineResource:F(Zl)}),tm=I(um,{Keyword:ah(R)});function Im(a,b,d,e){function f(a,d,e){d.Name||(d.isInvalid=!0,d.Abstract=b("Invalid layer: missing name"));if(!d.isInvalid){d.wmsUrl=a.Service.OnlineResource;d.wmsVersion=a.version;d.id="WMS||"+d.wmsUrl+"||"+d.Name;var g;a:{g=e.Ca;if(d.BoundingBox)for(var h=0,k=d.BoundingBox.length;h<k;h++){var q=d.BoundingBox[h],r=q.crs||q.srs;if(r&&r.toUpperCase()==g.toUpperCase()){g=q.extent;break a}}if(h=d.EX_GeographicBoundingBox||d.LatLonBoundingBox)if(k=xc(e.H(),g,"EPSG:4326"),h=Bb(k,h)){g=xc(h,"EPSG:4326",
g);break a}g=void 0}d.extent=g;g=e.Ca;if(h="1.3.0"==a.version)h=d.CRS||d.SRS||[],h=!(-1!=h.indexOf(g.toUpperCase())||-1!=h.indexOf(g.toLowerCase()));h&&(d.useReprojection=!0,d.extent||(d.isInvalid=!0,d.Abstract=b("Invalid layer: outside the map")))}if(d.Layer){for(g=0;g<d.Layer.length;g++)f(a,d.Layer[g],e)||(d.Layer.splice(g,1),g--);0==d.Layer.length&&(d.Layer=void 0)}if(!d.isInvalid||d.Layer)return d}return{restrict:"A",templateUrl:e,scope:{getCap:"=ngeoWmsGetCap",map:"=ngeoWmsGetCapMap",options:"=ngeoWmsGetCapOptions"},
link:function(e){e.layers=[];e.options=e.options||{};e.$watch("getCap",function(g){var h;try{g=(new lm).read(g)}catch(l){h=l}h||!g?(a.console.error("WMS GetCap parsing failed: ",h||g),e.userMsg=b("Parsing failed")):(e.limitations="",e.layers=[],e.options.layerSelected=null,e.options.layerHovered=null,g&&g.Service&&g.Capability&&(g.Service.MaxWidth&&(e.limitations=d.getString("Maximum WMS size allowed")+" "+g.Service.MaxWidth+" * "+g.Service.MaxHeight),g.Capability.Layer&&(g=f(g,g.Capability.Layer,
O(e.map).getProjection()))&&(e.layers=g.Layer||[g])))});e.addLayerSelected=function(){var b=e.options.layerSelected;if(b&&e.options.getOlLayerFromGetCapLayer){var f=d.getString("WMS layer added succesfully");try{var g=e.options.getOlLayerFromGetCapLayer(b);g&&cl(e.map,g)}catch(n){a.console.error("Add layer failed:"+n),f=d.getString("WMS layer could not be added")+" "+n.message}a.alert(f)}};e.getAbstract=function(){return d.getString((e.options.layerSelected||e.options.layerHovered||{}).Abstract)||
""}}}}Im.$inject=["$window","gettext","gettextCatalog","ngeoWmsGetCapTemplateUrl"];var Jm=angular.module("ngeo.wmsGetCapDirective",["gettext"]);Jm.value("ngeoWmsGetCapTemplateUrl",function(a,b){a=b.ngeoWmsGetCapTemplateUrl;return void 0!==a?a:Ul+"/import/partials/wms-get-cap.html"});Jm.directive("ngeoWmsGetCap",Im);function Km(a){var b=a.options;a.addPreviewLayer=function(d,e){d.stopPropagation();b.layerHovered=e;e.isInvalid||b.addPreviewLayer(a.map,e)};a.removePreviewLayer=function(d){d.stopPropagation();b.layerHovered=null;b.removePreviewLayer(a.map)};a.toggleLayerSelected=function(a,e){a.stopPropagation();b.layerSelected=b.layerSelected&&b.layerSelected.Name==e.Name?null:e}}Km.$inject=["$scope"];
function Lm(a,b){return{restrict:"A",templateUrl:b,controller:"NgeoWmsGetCapItemDirectiveController",compile:function(b){var d=b.contents().remove(),f;return function(b,e){f||(f=a(d));f(b,function(a){e.append(a)});var g=e.find("> .ngeo-header-group"),h=g.find(".fa-plus"),n;g.find(".fa-zoom-in").on("click",function(a){a.stopPropagation();a:{var d=b.layer,e=b.map,f=d.extent;b.options.transformExtent&&(f=b.options.transformExtent(d.extent));a=O(e);var g=e.ha();if(d.lh&&f){var h=2834.64*Bj(f,g);if(h>
d.lh){e=zb(f);h/=d.lh;d=xb(f)/h;f=yb(f)/h;f=[e[0]-d/2,e[1]-f/2,e[0]+d/2,e[1]+f/2];if(f=b.options.transformExtent(f))f=a.va(Bj(f,g),0,-1),a.setCenter(e),Ej(a,f);break a}}f&&Dj(a,f,g)}});h.on("click",function(a){a.stopPropagation();h.toggleClass("fa-minus");n||(n=e.find("> .ngeo-child-group"));n.slideToggle()})}}}}Lm.$inject=["$compile","ngeoWmsGetCapItemTemplateUrl"];var Mm=angular.module("ngeo.wmsGetCapItemDirective",[]);
Mm.value("ngeoWmsGetCapItemTemplateUrl",function(a,b){a=b.ngeoWmsGetCapItemTemplateUrl;return void 0!==a?a:Ul+"/import/partials/wms-get-cap-item.html"});Mm.controller("NgeoWmsGetCapItemDirectiveController",Km);Mm.directive("ngeoWmsGetCapItem",Lm);var Nm=angular.module("ngeo.import",[Rl.name,Tl.name,Wl.name,Yl.name,Jm.name,Mm.name]);var S=angular.module("ngeo",[Pl.name,Nm.name,"gettext","ui.date","floatThead"]),Ul="ngeomodule";Ea("ngeo.AttributeType",{fr:"date",gr:"datetime",lr:"geometry",tr:"number",Fr:"select",TEXT:"text"});Ea("ngeo.FeatureProperties",{ANGLE:"a",COLOR:"c",IS_CIRCLE:"l",IS_RECTANGLE:"r",IS_TEXT:"t",NAME:"n",OPACITY:"o",AZIMUT:"z",SHOW_MEASURE:"m",SIZE:"s",STROKE:"k"});Ea("ngeo.FilterCondition",{AND:"&&",NOT:"!",OR:"||"});
Ea("ngeo.GeometryType",{CIRCLE:"Circle",LINE_STRING:"LineString",MULTI_LINE_STRING:"MultiLineString",MULTI_POINT:"MultiPoint",MULTI_POLYGON:"MultiPolygon",POINT:"Point",POLYGON:"Polygon",RECTANGLE:"Rectangle",TEXT:"Text"});var T=angular.module("gmf",[S.name,"gettext","ngAnimate","ngTouch","ngSanitize","tmh.dynamicLocale","ui.date","ui.slider"]);T.config(["tmhDynamicLocaleProvider","angularLocaleScript",function(a,b){a.localeLocationPattern(b)}]);T.config(["$animateProvider",function(a){a.classNameFilter(/gmf-animatable/)}]);Ea("gmf.DATALAYERGROUP_NAME","data");Ea("gmf.COORDINATES_LAYER_NAME","gmfCoordinatesLayerName");
var Om={dr:"baselayer_ref",jr:"rl_features",or:"map_crosshair",pr:"map_tooltip",qr:"map_x",rr:"map_y",sr:"map_zoom",Ir:"tree_groups",Nr:"wfs_layer",Pr:"wfs_ngroups",Qr:"wfs_showFeatures"};var Pm=angular.module("app",[Nm.name,T.name]);Pm.config(["$compileProvider",function(a){"debug"in Qm(window.location.search)||a.debugInfoEnabled(!1)}]);T.value("gmfUser",{functionalities:null,is_password_changed:null,role_id:null,role_name:null,username:null});function Rm(a,b){Va.call(this,a);this.nk=b}u(Rm,Va);function Sm(a,b,d){Xa.call(this);this.b=a;this.g=b;this.c=d;this.b.get(this.g+"/loginuser",{withCredentials:!0}).then(this.f.bind(this,!0))}u(Sm,Xa);Sm.$inject=["$http","authenticationBaseUrl","gmfUser"];
Sm.prototype.Ud=function(a,b,d){return this.b.post(this.g+"/loginchange",$.param({oldPassword:a,newPassword:b,confirmNewPassword:d}),{headers:{"Content-Type":"application/x-www-form-urlencoded"},withCredentials:!0})};Sm.prototype.changePassword=Sm.prototype.Ud;Sm.prototype.ze=function(a,b){return this.b.post(this.g+"/login",$.param({login:a,password:b}),{headers:{"Content-Type":"application/x-www-form-urlencoded"},withCredentials:!0}).then(this.f.bind(this,!1))};Sm.prototype.login=Sm.prototype.ze;
Sm.prototype.Ae=function(){return this.b.get(this.g+"/logout",{withCredentials:!0}).then(this.i.bind(this))};Sm.prototype.logout=Sm.prototype.Ae;Sm.prototype.Pe=function(a){var b=this.g+"/loginresetpassword",d=function(a){return a.data}.bind(this);return this.b.post(b,$.param({login:a}),{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(d)};Sm.prototype.resetPassword=Sm.prototype.Pe;
Sm.prototype.f=function(a,b){var d=b.data,e;for(e in d)this.c[e]=d[e];!a&&void 0!==d.username&&this.dispatchEvent(new Rm("login",this.c));a&&this.dispatchEvent(new Rm("ready",this.c));return b};Sm.prototype.i=function(){for(var a in this.c)this.c[a]=null;this.dispatchEvent(new Rm("logout",this.c))};T.service("gmfAuthentication",Sm);function Tm(a){if(Error.captureStackTrace)Error.captureStackTrace(this,Tm);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}Fa(Tm,Error);Tm.prototype.name="CustomError";var Um;function Vm(a,b){for(var d=a.split("%s"),e="",f=Array.prototype.slice.call(arguments,1);f.length&&1<d.length;)e+=d.shift()+f.shift();return e+d.join("%s")}var Wm=String.prototype.trim?function(a){return a.trim()}:function(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")};
function Xm(a){if(!Ym.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(Zm,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace($m,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(an,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(bn,"&quot;"));-1!=a.indexOf("'")&&(a=a.replace(cn,"&#39;"));-1!=a.indexOf("\x00")&&(a=a.replace(dn,"&#0;"));return a}var Zm=/&/g,$m=/</g,an=/>/g,bn=/"/g,cn=/'/g,dn=/\x00/g,Ym=/[\x00&<>"']/;function en(a,b){return a<b?-1:a>b?1:0};function fn(a,b){b.unshift(a);Tm.call(this,Vm.apply(null,b));b.shift()}Fa(fn,Tm);fn.prototype.name="AssertionError";function gn(a,b){throw new fn("Failure"+(a?": "+a:""),Array.prototype.slice.call(arguments,1));}function hn(a,b,d){if("boolean"!=typeof a){var e=[ra(a),a],f="Assertion failed";b?(f+=": "+b,e=Array.prototype.slice.call(arguments,2)):f+=": Expected boolean but got %s: %s.";throw new fn(""+f,e||[]);}};Ea("ngeo.MessageType",{ERROR:"error",INFORMATION:"information",SUCCESS:"success",WARNING:"warning"});function jn(){}jn.prototype.show=function(a){kn(this,a).forEach(this.g,this)};jn.prototype.show=jn.prototype.show;jn.prototype.error=function(a){this.show(kn(this,a,"error"))};jn.prototype.error=jn.prototype.error;jn.prototype.info=function(a){this.show(kn(this,a,"information"))};jn.prototype.info=jn.prototype.info;jn.prototype.success=function(a){this.show(kn(this,a,"success"))};
jn.prototype.success=jn.prototype.success;jn.prototype.warn=function(a){this.show(kn(this,a,"warning"))};jn.prototype.warn=jn.prototype.warn;function kn(a,b,d){var e=[],f=null;"string"===typeof b?e.push({msg:b,type:void 0!==d?d:"information"}):Array.isArray(b)?b.forEach(function(a){"string"===typeof b?f={msg:a,type:void 0!==d?d:"information"}:(f=a,void 0!==d&&(f.type=d));e.push(f)},a):(f=b,void 0!==d&&(f.type=d),void 0===f.type&&(f.type="information"),e.push(f));return e};function ln(a){this.b=a;a=angular.element('<div class="ngeo-notification"></div>');angular.element(document.body).append(a);this.f=a;this.c={}}u(ln,jn);ln.$inject=["$timeout"];ln.prototype.notify=function(a){this.show(a)};ln.prototype.notify=ln.prototype.notify;ln.prototype.clear=function(){for(var a in this.c){var b=this.c[parseInt(a,10)],d=b.Al,b=b.promise,e=v(d);d.alert("close");this.b.cancel(b);delete this.c[e]}};ln.prototype.clear=ln.prototype.clear;
ln.prototype.g=function(a){var b=this,d=["alert","fade"];switch(a.type){case "error":d.push("alert-danger");break;case "information":d.push("alert-info");break;case "success":d.push("alert-success");break;case "warning":d.push("alert-warning")}var e=angular.element('<div class="'+d.join(" ")+'"></div>'),f;a.target?f=angular.element(a.target):f=this.f;f.append(e);e.html(a.msg).addClass("in");a=void 0!==a.delay?a.delay:7E3;var d={Al:e},g=v(e);d.promise=this.b(function(){e.alert("close");delete b.c[g]},
a);this.c[g]=d};S.service("ngeoNotification",ln);function mn(){return{template:'<div class="modal fade" tabindex="-1" role="dialog"><div class="modal-dialog"><div class="modal-content"></div></div></div>',restrict:"E",require:"ngModel",transclude:!0,link:function(a,b,d,e,f){function g(){l=a.$new();f(l,function(a){k.find(".modal-content").append(a)})}function h(){l.$destroy();k.find(".modal-content").empty()}var k=b.children();b="true"===d.ngeoModalDestroyContentOnHide;var l=a.$new();angular.element(document.body).append(k);e.$render=function(){k.modal(e.$viewValue?
"show":"hide")};k.on("shown.bs.modal hidden.bs.modal",function(b){var d=b.type;a.$apply(function(){e.$setViewValue("shown"==d)})});b?(k.on("hide.bs.modal",h),k.on("show.bs.modal",g)):k.find(".modal-content").append(f())}}}mn.$inject=["$parse"];S.directive("ngeoModal",mn);T.value("gmfAuthenticationTemplateUrl",function(a,b){a=b.gmfAuthenticationTemplateurl;return void 0!==a?a:"gmf/authentication.html"});function nn(a){return{scope:!0,controller:"GmfAuthenticationController as authCtrl",templateUrl:a}}nn.$inject=["gmfAuthenticationTemplateUrl"];T.directive("gmfAuthentication",nn);
function on(a,b,d,e,f){this.gmfUser=e;this.c=a;this.f=d;this.i=f;this.error=this.resetPasswordModalShown=this.changePasswordModalShown=this.changingPassword=!1;this.newPwdConfVal=this.newPwdVal=this.oldPwdVal=this.pwdVal=this.loginVal=""}on.$inject=["gettextCatalog","$scope","gmfAuthentication","gmfUser","ngeoNotification"];
on.prototype.Ud=function(){var a=this,b=this.oldPwdVal,d=this.newPwdVal,e=this.newPwdConfVal,f=[];""===b&&f.push(this.c.getString("The old password is required."));""===d&&f.push(this.c.getString("The new password is required."));""===e&&f.push(this.c.getString("The password confirmation is required."));f.length?this.b(f):(b===d&&f.push(this.c.getString("The old and new passwords are the same.")),d!==e&&f.push(this.c.getString("The passwords don't match.")),f.length?this.b(f):(f=this.c.getString("Incorrect old password."),
this.f.Ud(b,d,e).then(function(){a.changePasswordModalShown=!0;a.zh()},this.b.bind(this,f))))};on.prototype.changePassword=on.prototype.Ud;on.prototype.ze=function(){var a=[];""===this.loginVal&&a.push(this.c.getString("The username is required."));""===this.pwdVal&&a.push(this.c.getString("The password is required."));a.length?this.b(a):(a=this.c.getString("Incorrect username or password."),this.f.ze(this.loginVal,this.pwdVal).then(this.g.bind(this),this.b.bind(this,a)))};on.prototype.login=on.prototype.ze;
on.prototype.Ae=function(){var a=this.c.getString("Could not log out.");this.f.Ae().then(this.g.bind(this),this.b.bind(this,a))};on.prototype.logout=on.prototype.Ae;on.prototype.Pe=function(){if(this.loginVal){var a=this.c.getString("An error occurred while reseting the password."),b=function(){this.resetPasswordModalShown=!0;this.g()}.bind(this);this.f.Pe(this.loginVal).then(b,this.b.bind(this,a))}else this.b(this.c.getString("Please, input a login..."))};on.prototype.resetPassword=on.prototype.Pe;
on.prototype.zh=function(){this.g();this.changingPassword=!1;this.newPwdConfVal=this.newPwdVal=this.oldPwdVal=""};on.prototype.changePasswordReset=on.prototype.zh;on.prototype.b=function(a){this.error&&this.g();this.error=!0;var b=angular.element(".gmf-authentication-error");Array.isArray(a)||(a=[a]);a.forEach(function(a){this.i.notify({msg:a,target:b,type:"error"})},this)};on.prototype.g=function(){this.i.clear();this.error=!1};T.controller("GmfAuthenticationController",on);function pn(){}u(pn,$l);pn.prototype.b=function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType==Node.ELEMENT_NODE)return this.c(a);return null};pn.prototype.c=function(a){return(a=J({},qn,a,[]))?a:null};
var rn=[null,"http://www.opengis.net/ows/1.1"],qn=I(rn,{ServiceIdentification:F(function(a,b){return J({},sn,a,b)}),ServiceProvider:F(function(a,b){return J({},tn,a,b)}),OperationsMetadata:F(function(a,b){return J({},un,a,b)})}),vn=I(rn,{DeliveryPoint:F(R),City:F(R),AdministrativeArea:F(R),PostalCode:F(R),Country:F(R),ElectronicMailAddress:F(R)}),wn=I(rn,{Value:ch(function(a){return R(a)})}),xn=I(rn,{AllowedValues:F(function(a,b){return J({},wn,a,b)})}),zn=I(rn,{Phone:F(function(a,b){return J({},
yn,a,b)}),Address:F(function(a,b){return J({},vn,a,b)})}),Bn=I(rn,{HTTP:F(function(a,b){return J({},An,a,b)})}),An=I(rn,{Get:ch(function(a,b){var d=Zl(a);if(d)return J({href:d},Cn,a,b)}),Post:void 0}),Dn=I(rn,{DCP:F(function(a,b){return J({},Bn,a,b)})}),un=I(rn,{Operation:function(a,b){var d=a.getAttribute("name");(a=J({},Dn,a,b))&&(b[b.length-1][d]=a)}}),yn=I(rn,{Voice:F(R),Facsimile:F(R)}),Cn=I(rn,{Constraint:ch(function(a,b){var d=a.getAttribute("name");if(d)return J({name:d},xn,a,b)})}),En=I(rn,
{IndividualName:F(R),PositionName:F(R),ContactInfo:F(function(a,b){return J({},zn,a,b)})}),sn=I(rn,{Title:F(R),ServiceTypeVersion:F(R),ServiceType:F(R)}),tn=I(rn,{ProviderName:F(R),ProviderSite:F(Zl),ServiceContact:F(function(a,b){return J({},En,a,b)})});function Fn(){this.g=new pn}u(Fn,$l);Fn.prototype.b=function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType==Node.ELEMENT_NODE)return this.c(a);return null};Fn.prototype.c=function(a){var b=a.getAttribute("version").trim(),d=this.g.c(a);if(!d)return null;d.version=b;return(d=J(d,Gn,a,[]))?d:null};function Hn(a){var b=R(a).split(" ");if(b&&2==b.length&&(a=+b[0],b=+b[1],!isNaN(a)&&!isNaN(b)))return[a,b]}
var In=[null,"http://www.opengis.net/wmts/1.0"],Jn=[null,"http://www.opengis.net/ows/1.1"],Gn=I(In,{Contents:F(function(a,b){return J({},Kn,a,b)})}),Kn=I(In,{Layer:ch(function(a,b){return J({},Ln,a,b)}),TileMatrixSet:ch(function(a,b){return J({},Mn,a,b)})}),Ln=I(In,{Style:ch(function(a,b){if(b=J({},Nn,a,b))return a="true"===a.getAttribute("isDefault"),b.isDefault=a,b}),Format:ch(R),TileMatrixSetLink:ch(function(a,b){return J({},On,a,b)}),Dimension:ch(function(a,b){return J({},Pn,a,b)}),ResourceURL:ch(function(a){var b=
a.getAttribute("format"),d=a.getAttribute("template");a=a.getAttribute("resourceType");var e={};b&&(e.format=b);d&&(e.template=d);a&&(e.resourceType=a);return e})},I(Jn,{Title:F(R),Abstract:F(R),WGS84BoundingBox:F(function(a,b){a=J([],Qn,a,b);if(2==a.length)return fb(a)}),Identifier:F(R)})),Nn=I(In,{LegendURL:ch(function(a){var b={};b.format=a.getAttribute("format");b.href=Zl(a);return b})},I(Jn,{Title:F(R),Identifier:F(R)})),On=I(In,{TileMatrixSet:F(R),TileMatrixSetLimits:F(function(a,b){return J([],
Rn,a,b)})}),Rn=I(In,{TileMatrixLimits:ah(function(a,b){return J({},Sn,a,b)})}),Sn=I(In,{TileMatrix:F(R),MinTileRow:F(fm),MaxTileRow:F(fm),MinTileCol:F(fm),MaxTileCol:F(fm)}),Pn=I(In,{Default:F(R),Value:ch(R)},I(Jn,{Identifier:F(R)})),Qn=I(Jn,{LowerCorner:ah(Hn),UpperCorner:ah(Hn)}),Mn=I(In,{WellKnownScaleSet:F(R),TileMatrix:ch(function(a,b){return J({},Tn,a,b)})},I(Jn,{SupportedCRS:F(R),Identifier:F(R)})),Tn=I(In,{TopLeftCorner:F(Hn),ScaleDenominator:F(dm),TileWidth:F(fm),TileHeight:F(fm),MatrixWidth:F(fm),
MatrixHeight:F(fm)},I(Jn,{Identifier:F(R)}));function Un(a,b,d,e,f,g,h){me.call(this,a,b,d,0,e);this.i=f;this.K=new Image;null!==g&&(this.K.crossOrigin=g);this.b={};this.c=null;this.state=0;this.f=h}u(Un,me);Un.prototype.ea=function(a){if(void 0!==a){var b;a=v(a);if(a in this.b)return this.b[a];Ma(this.b)?b=this.K:b=this.K.cloneNode(!1);return this.b[a]=b}return this.K};Un.prototype.j=function(){this.state=3;this.c.forEach(A);this.c=null;ne(this)};
Un.prototype.o=function(){void 0===this.resolution&&(this.resolution=yb(this.extent)/this.K.height);this.state=2;this.c.forEach(A);this.c=null;ne(this)};Un.prototype.load=function(){if(0==this.state||3==this.state)this.state=1,ne(this),this.c=[B(this.K,"error",this.j,this,!0),B(this.K,"load",this.o,this,!0)],this.f(this,this.i)};function Vn(a){a=a||{};yg.call(this,{Fa:a.Fa,Ia:a.Ia,projection:a.projection,mb:a.mb});this.ta=void 0!==a.crossOrigin?a.crossOrigin:null;this.i=a.url;this.Ta=a.zn?a.zn:Eg;this.f=a.params||{};this.j=!0;Wn(this);this.X=a.serverType;this.da=void 0!==a.vn?a.vn:!0;this.K=null;this.s=[0,0];this.u=0;this.D=void 0!==a.ratio?a.ratio:1.5}u(Vn,yg);var Xn=[101,101];
function zg(a,b,d,e,f){if(void 0===a.i)return null;a.o&&(d=a.o[zd(a.o,d,0)]);1==e||a.da&&void 0!==a.X||(e=1);var g=d/e,h=zb(b),k=Ab(h,g,0,[Math.ceil(xb(b)/g),Math.ceil(yb(b)/g)]);b=Ab(h,g,0,[Math.ceil(a.D*xb(b)/g),Math.ceil(a.D*yb(b)/g)]);if((h=a.K)&&a.u==a.g&&h.S()==d&&h.gb==e&&lb(h.H(),k))return h;k={SERVICE:"WMS",VERSION:"1.3.0",REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};w(k,a.f);a.s[0]=Math.round(xb(b)/g);a.s[1]=Math.round(yb(b)/g);f=Yn(a,b,a.s,e,f,k);a.K=new Un(b,d,e,a.C,f,a.ta,a.Ta);
a.u=a.g;B(a.K,"change",a.V,a);return a.K}
function Yn(a,b,d,e,f,g){Ja(void 0!==a.i,9);g[a.j?"CRS":"SRS"]=f.Ca;"STYLES"in a.f||(g.STYLES="");if(1!=e)switch(a.X){case "geoserver":e=90*e+.5|0;g.FORMAT_OPTIONS="FORMAT_OPTIONS"in g?g.FORMAT_OPTIONS+(";dpi:"+e):"dpi:"+e;break;case "mapserver":g.MAP_RESOLUTION=90*e;break;case "carmentaserver":case "qgis":g.DPI=90*e;break;default:Ja(!1,8)}g.WIDTH=d[0];g.HEIGHT=d[1];d=f.c;var h;a.j&&"ne"==d.substr(0,2)?h=[b[1],b[0],b[3],b[2]]:h=b;g.BBOX=h.join(",");return Uh(a.i,g)}Vn.prototype.getUrl=function(){return this.i};
Vn.prototype.setUrl=function(a){a!=this.i&&(this.i=a,this.K=null,this.c())};Vn.prototype.updateParams=function(a){w(this.f,a);Wn(this);this.K=null;this.c()};function Wn(a){var b;a:{b=(""+(a.f.VERSION||"1.3.0")).split(".");for(var d=["1","3"],e=0;e<Math.max(b.length,d.length);e++){var f=parseInt(b[e]||"0",10),g=parseInt(d[e]||"0",10);if(f>g){b=1;break a}if(g>f){b=-1;break a}}b=0}a.j=0<=b};function Zn(a,b){this.cb=a;this.c=b}Zn.$inject=["$q","$http"];Zn.prototype.Yd=function(a,b,d,e,f){b={LAYERS:b};var g;e&&(b.TIME=e);d&&(b.SERVERTYPE=d,g=d.replace("qgisserver","qgis"));a=new Vn({url:a,params:b,serverType:g,crossOrigin:"use-credentials"});f&&a.updateParams(f);return new Fg({source:a})};Zn.prototype.createBasicWMSLayer=Zn.prototype.Yd;
Zn.prototype.Df=function(a,b,d){var e=new Fn,f=new Jg({Fg:Infinity}),g=this.cb;return this.c.get(a,{cache:!0}).then(function(h){var k;h.data&&(k=e.read(h.data));return k?(h=Xh(k,{layer:b}),h=w({crossOrigin:"use-credentials"},h),h=new Vh(h),d&&!Ma(d)&&h.tc(d),f.set("source",h),k=Cd(k.Contents.Layer,function(a){return a.Identifier==b}),f.set("capabilitiesStyles",k.Style),g.resolve(f)):g.reject("Failed to get WMTS capabilities from "+a)})};Zn.prototype.createWMTSLayerFromCapabilitites=Zn.prototype.Df;
Zn.prototype.Xd=function(a){var b=new Rk;a&&b.set(Sk,a);return b};Zn.prototype.createBasicGroup=Zn.prototype.Xd;Zn.prototype.he=function(a,b){var d;dl(a).getLayers().b.some(function(a){return a.get("groupName")===b?(d=a,!0):!1});d||(d=this.Xd(),d.set("groupName",b),cl(a,d));return d};Zn.prototype.getGroupFromMap=Zn.prototype.he;Zn.prototype.bg=function(a){return $n(this,a,[])};Zn.prototype.getFlatLayers=Zn.prototype.bg;
function $n(a,b,d){b instanceof Rk?b.getLayers().forEach(function(a){$n(this,a,d)},a):0>d.indexOf(b)&&d.push(b);return d}Zn.prototype.bi=function(a,b){var d=null;b.some(function(b){b instanceof Rk?(b=b.getLayers().b,d=this.bi(a,b)):b.get("layerNodeName")===a&&(d=b);return!!d},this);return d};Zn.prototype.getLayerByName=Zn.prototype.bi;Zn.prototype.og=function(a){var b;a=a.get("capabilitiesStyles");void 0!==a&&(a=a[0].legendURL,void 0!==a&&(b=a[0].href));return b};Zn.prototype.getWMTSLegendURL=Zn.prototype.og;
Zn.prototype.pe=function(a,b,d,e){if(a)return b={FORMAT:"image/png",TRANSPARENT:!0,SERVICE:"WMS",VERSION:"1.1.1",REQUEST:"GetLegendGraphic",LAYER:b},void 0!==d&&(b.SCALE=d),void 0!==e&&(b.RULE=e),Uh(a,b)};Zn.prototype.getWMSLegendURL=Zn.prototype.pe;function ao(a){a=E(a);var b=a.f;b.random=Math.random();a.updateParams(b)}Zn.prototype.kk=function(a,b,d){0>=b.length?we(a,!1):(we(a,!0),a=E(a),d?a.updateParams({LAYERS:b,TIME:d}):a.updateParams({LAYERS:b}))};Zn.prototype.updateWMSLayerState=Zn.prototype.kk;
S.service("ngeoLayerHelper",Zn);T.value("gmfThemesOptions",{});function bo(a,b,d,e,f,g){Xa.call(this);this.o=!0;void 0!==g.addBlankBackgroundLayer&&(this.o=g.addBlankBackgroundLayer);this.cb=d;this.u=a;this.B=void 0;b.has("gmfTreeUrl")&&(this.B=b.get("gmfTreeUrl"));this.f="0";b.has("cacheVersion")&&(this.f=b.get("cacheVersion"));this.i=null;b.has("ngeoLocation")&&(this.i=b.get("ngeoLocation"));this.D=e;this.C=f;this.g=d.defer();this.c=this.g.promise;this.j=!1;this.b=null}u(bo,Xa);bo.$inject="$http $injector $q ngeoLayerHelper gettextCatalog gmfThemesOptions".split(" ");
function co(a,b){for(var d=0,e=a.length;d<e;d++)for(var f=a[d],g=0,h=f.children.length;g<h;g++){var k=f.children[g],l=[];eo(k,l);for(var n=0,p=l.length;n<p;n++)if(l[n].name==b)return k}return null}function fo(a,b){for(var d=0,e=a.length;d<e;d++)for(var f=a[d],g=0,h=f.children.length;g<h;g++){var k=f.children[g];if(k.name==b)return k}return null}function go(a,b){return Cd(a,function(a){return a.name===b})}function eo(a,b){var d=a.children;if(d)for(a=0;a<d.length;a++)eo(d[a],b);else b.push(a)}
Ea("gmf.Themes.getFlatNodes",eo);
function ho(a,b){function d(a,b){a=b.children.map(function(a){return a}).reverse().map(e.bind(null,a));return h.all(a).then(function(a){var d;a&&(a=a.filter(function(a){return a}),d=new hi(a));a=k.Xd(d);f(b,a);return a})}function e(a,d){for(var e in d.dimensions)void 0!==b[e]&&(d.dimensions[e]=b[e]);if("WMTS"===d.type)return k.Df(d.url,d.layer||"",d.dimensions).then(f.bind(null,d)).then(null,function(a){console.error("unable to get capabilities",d.layer,d.url);console.error(a.message);console.error(a.stack);
return h.resolve(void 0)});if("WMS"===d.type)return a=a[d.ogcServer],f(d,k.Yd(a.url,d.layers||"",a.type,void 0,d.dimensions));gn("Unsupported type: "+d.type)}function f(a,b){b.set("label",a.name);b.set("metadata",a.metadata);b.set("dimensions",a.dimensions);var d=[];g(a,d);b.set("querySourceIds",d);b.set("editableIds",[]);return b}function g(a,b){b.push(a.id);(a.children||[]).forEach(function(a){g(a,b)})}if(a.b)return a.b;var h=a.cb,k=a.D,l=function(a){var b=a.background_layers.map(function(b){var f=
b.type;if("WMTS"===f||"WMS"===f)return e(a.ogcServers,b);if(b.children)return d(a.ogcServers,b)},this);return h.all(b)}.bind(a);a.b=a.c.then(l).then(function(b){var d=[];a.o&&d.push(new Jg({label:a.C.getString("blank"),metadata:{thumbnail:""}}));b.forEach(function(a){a&&d.push(a)});return d});return a.b}bo.prototype.oi=function(a){return this.c.then(function(b){return go(b.themes,a)})};bo.prototype.getThemeObject=bo.prototype.oi;bo.prototype.Gb=function(){return this.c.then(function(a){return a.themes})};
bo.prototype.getThemesObject=bo.prototype.Gb;function io(a){return a.c.then(function(a){return a.background_layers})}bo.prototype.ed=function(){return this.c.then(function(a){return a.ogcServers})};bo.prototype.getOgcServersObject=bo.prototype.ed;bo.prototype.hasEditableLayers=function(){return this.c.then(this.O.bind(this))};bo.prototype.O=function(a){var b=this;return a.themes.some(function(a){return a.children.some(b.s.bind(b))})};
bo.prototype.s=function(a){if(a.editable)return!0;var b=!1;(a=a.children)&&a.length&&(b=a.some(this.s.bind(this)));return b};
bo.prototype.Mi=function(a){var b=this;this.j&&(this.g=this.cb.defer(),this.c=this.g.promise,this.b=null,this.j=!1);this.u.get(this.B,{params:void 0!==a?{role:a,cache_version:this.f}:{cache_version:this.f},cache:!1,withCredentials:!0}).then(function(a){if(0!=a.data.errors.length){var d="The themes contain some errors:\n"+a.data.errors.join("\n");console.error(d);null!==b.i&&b.i.tg("debug")&&window.alert(d)}b.g.resolve(a.data);b.dispatchEvent("change");b.j=!0},function(a){b.g.reject(a)})};
bo.prototype.loadThemes=bo.prototype.Mi;T.service("gmfThemes",bo);function jo(a,b){Va.call(this,a);this.previous=b}u(jo,Va);function ko(){Ya.call(this);this.b={}}u(ko,Ya);ko.prototype.get=function(a){return v(a).toString()in this.b?a.getLayers().item(0):null};ko.prototype.get=ko.prototype.get;
ko.prototype.set=function(a,b){var d=v(a).toString(),e=this.get(a);if(null!==e)if(null!==b)if(a=a.getLayers(),d=a.get(ki),0<d)a.f&&ii(a,b,0),d=a.b[0],a.b[0]=b,a.dispatchEvent(new mi("remove",d)),a.dispatchEvent(new mi("add",b));else{for(;0>d;++d)li(a,d,void 0);li(a,0,b)}else ni(a.getLayers(),0),delete this.b[d];else null!==b&&(li(a.getLayers(),0,b),this.b[d]=!0);this.dispatchEvent(new jo("change",e));return e};ko.prototype.set=ko.prototype.set;
ko.prototype.tc=function(a,b){if(a=this.get(a)){var d=[a];a instanceof Rk&&(d=a.getLayers().b);d.forEach(function(a){if(a){var d=!1,e={},h;for(h in a.get("dimensions")){var k=b[h];void 0!==k&&(e[h]=k,d=!0)}d&&(a=E(a),a instanceof Vh?(a.tc(e),a.refresh()):a instanceof Vn&&(a.updateParams(e),a.refresh()))}})}};ko.prototype.updateDimensions=ko.prototype.tc;S.service("ngeoBackgroundLayerMgr",ko);T.value("gmfBackgroundlayerselectorTemplateUrl",function(a,b){a=b.gmfBackgroundlayerselectorTemplateurl;return void 0!==a?a:"gmf/backgroundlayerselector.html"});function lo(a,b,d){return d(a,b)}lo.$inject=["$element","$attrs","gmfBackgroundlayerselectorTemplateUrl"];
T.component("gmfBackgroundlayerselector",{controller:"GmfBackgroundlayerselectorController as ctrl",bindings:{dimensions:"=gmfBackgroundlayerselectorDimensions",map:"=gmfBackgroundlayerselectorMap",select:"&?gmfBackgroundlayerselectorSelect"},templateUrl:lo});
function mo(a,b,d){this.c=d;this.listenerKeys_=[];this.listenerKeys_.push(B(d,"change",this.g,this));this.sf=b;this.listenerKeys_.push(B(this.sf,"change",function(){this.bgLayer=this.sf.get(this.map)},this));a.$on("$destroy",this.b.bind(this))}mo.$inject=["$scope","ngeoBackgroundLayerMgr","gmfThemes"];T.controller("GmfBackgroundlayerselectorController",mo);mo.prototype.$onInit=function(){var a=this;ho(this.c,this.dimensions).then(function(b){a.bgLayers=b})};
mo.prototype.g=function(){var a=this;ho(this.c,this.dimensions).then(function(b){a.bgLayers=b})};mo.prototype.sq=function(a,b){this.bgLayer=a;this.sf.set(this.map,a);!b&&this.select&&this.select()};mo.prototype.setLayer=mo.prototype.sq;mo.prototype.b=function(){this.listenerKeys_.forEach(A);this.listenerKeys_.length=0};function no(a){return 1==a.length?"0"+a:a}function oo(a){var b=a[0],d=a[1];a=a[2];if(b!=(b&255)||d!=(d&255)||a!=(a&255))throw Error('"('+b+","+d+","+a+')" is not a valid RGB color');b=no(b.toString(16));d=no(d.toString(16));a=no(a.toString(16));return"#"+b+d+a}function Qm(a){var b={};if(a){a=a.substring(1).split("&");a=ka(a);for(var d=a.next();!d.done;d=a.next()){var d=d.value,e=d.indexOf("=");0<=e?b[decodeURIComponent(d.substring(0,e))]=decodeURIComponent(d.substring(e+1)):b[d]=""}}return b}
function po(a){var b=[],d;for(d in a){var e=a[d];e?b.push(encodeURIComponent(d)+"="+encodeURIComponent(e)):b.push(encodeURIComponent(d))}return b.join("&")};function U(a,b){this.o=b;this.i=a.protocol.substring(0,a.protocol.length-1);this.f=a.hostname;this.j=a.port?parseInt(a.port,10):void 0;this.g=a.pathname;this.b=Qm(a.search);this.c=Qm(a.hash)}U.prototype.getPath=function(){return this.g};U.prototype.getPath=U.prototype.getPath;
U.prototype.kd=function(){var a=[];this.i&&a.push(this.i,":");if(this.f||"file"===this.i)a.push("//"),a.push(this.f),void 0!==this.j&&a.push(":",String(this.j));this.g&&(this.f&&"/"!==this.g.charAt(0)&&a.push("/"),a.push(this.g));var b=po(this.b);0<b.length&&a.push("?",b);b=po(this.c);0<b.length&&a.push("#",b);return a.join("")};U.prototype.getUriString=U.prototype.kd;U.prototype.tg=function(a){return a in this.b};U.prototype.hasParam=U.prototype.tg;U.prototype.un=function(a){return a in this.c};
U.prototype.hasFragmentParam=U.prototype.un;U.prototype.Pb=function(a){return this.b[a]};U.prototype.getParam=U.prototype.Pb;U.prototype.Yh=function(a){return this.c[a]};U.prototype.getFragmentParam=U.prototype.Yh;U.prototype.ki=function(a){a=this.Pb(a);if(void 0!==a)return a=parseInt(a,10),isNaN(a)?void 0:a};U.prototype.getParamAsInt=U.prototype.ki;U.prototype.Rl=function(a){a=this.Yh(a);if(void 0!==a)return a=parseInt(a,10),isNaN(a)?void 0:a};U.prototype.getFragmentParamAsInt=U.prototype.Rl;
U.prototype.li=function(){var a=[],b;for(b in this.b)a.push(b);return a};U.prototype.getParamKeys=U.prototype.li;U.prototype.Sl=function(){var a=[],b;for(b in this.c)a.push(b);return a};U.prototype.getFragmentParamKeys=U.prototype.Sl;U.prototype.gg=function(a){var b=[],d;for(d in this.b)d.indexOf(a)||b.push(d);return b};U.prototype.getParamKeysWithPrefix=U.prototype.gg;U.prototype.Tl=function(a){var b=[],d;for(d in this.c)d.indexOf(a)||b.push(d);return b};
U.prototype.getFragmentParamKeysWithPrefix=U.prototype.Tl;U.prototype.updateParams=function(a){for(var b in a)this.b[b]=a[b]};U.prototype.updateParams=U.prototype.updateParams;U.prototype.Rq=function(a){for(var b in a)this.c[b]=a[b]};U.prototype.updateFragmentParams=U.prototype.Rq;U.prototype.de=function(a){delete this.b[a]};U.prototype.deleteParam=U.prototype.de;U.prototype.tl=function(a){delete this.c[a]};U.prototype.deleteFragmentParam=U.prototype.tl;
U.prototype.refresh=function(){this.o.replaceState(null,"",this.kd())};U.prototype.refresh=U.prototype.refresh;U.prototype.setPath=function(a){this.g=a};U.prototype.setPath=U.prototype.setPath;function qo(a,b){var d=b.history,e=new U(b.location,b.history),f=e.kd();a.$watch(function(){var b=e.kd();f!==b&&a.$evalAsync(function(){f=b;d&&d.replaceState&&d.replaceState(null,"",b);a.$broadcast("ngeoLocationChange")})});return e}qo.$inject=["$rootScope","$window"];S.factory("ngeoLocation",qo);S.value("ngeoUsedKeyRegexp",[/.*/]);
function ro(a,b){this.Gc={};this.c=a;this.b=b;this.useLocalStorage=!0;try{"localStorage"in window?(window.localStorage.test="",delete window.localStorage.test):this.useLocalStorage=!1}catch(e){console.error(e),this.useLocalStorage=!1}a=a.li();if(!a.length||1===a.length&&"debug"==a[0]){if(this.useLocalStorage){a={};for(var d in window.localStorage)a.key=d,this.b.some(function(a){return function(b){if(a.key.match(b))return b=window.localStorage[a.key],this.Gc[a.key]=void 0!==b||null!==b?b:"",!0}}(a),
this),a={key:a.key}}}else a.forEach(function(a){this.b.some(function(b){if(a.match(b)&&(b=this.c.Pb(a),void 0!==b))return this.Gc[a]=b,!0},this)},this)}ro.$inject=["ngeoLocation","ngeoUsedKeyRegexp"];function so(a,b){a=a.Gc[b];if(void 0!==a)return a}function to(a,b){a=a.Gc[b];if(void 0!==a)return parseFloat(a)}function uo(a,b){a=a.Gc[b];if(void 0!==a)return"true"===a}function vo(a,b){a.c.updateParams(b);if(a.useLocalStorage)for(var d in b)window.localStorage[d]=b[d]}
ro.prototype.de=function(a){this.c.de(a);this.useLocalStorage&&delete window.localStorage[a]};S.service("ngeoStateManager",ro);S.value("ngeoDecorateLayer",function(a){Object.defineProperty(a,"visible",{configurable:!0,get:function(){return ve(a)},set:function(b){we(a,b)}});Object.defineProperty(a,"opacity",{configurable:!0,get:function(){return a.getOpacity()},set:function(b){a.set("opacity",b)}})});S.value("ngeoDecorateLayerLoading",function(a,b){function d(a){var b=a.get("load_count"),e=a.get("parent_group");a.set("load_count",++b,!0);e&&d(e)}function e(a){var b=a.get("load_count"),d=a.get("parent_group");a.set("load_count",--b,!0);d&&e(d)}var f,g=null,h=null;a.set("load_count",0,!0);if(a instanceof Rk)a.getLayers().on("add",function(b){b.element.set("parent_group",a)});if(a instanceof xe){f=E(a);if(null===f)return;f instanceof Ng?(g=["tileloadstart"],h=["tileloadend","tileloaderror"]):f instanceof
yg?(g=["imageloadstart"],h=["imageloadend","imageloaderror"]):gn("unsupported source type");f.on(g,function(){d(a);b.$applyAsync()});f.on(h,function(){e(a);b.$applyAsync()})}Object.defineProperty(a,"loading",{configurable:!0,get:function(){return 0<a.get("load_count")}})});S.value("ngeoLayertreeTemplateUrl",function(a,b){a=b.ngeoLayertreeTemplateurl;return void 0!==a?a:"ngeo/layertree.html"});function wo(a,b){return{restrict:"A",scope:!0,templateUrl:b,controller:"NgeoLayertreeController"}}wo.$inject=["$compile","ngeoLayertreeTemplateUrl"];S.directive("ngeoLayertree",wo);
function xo(a,b,d,e,f){var g=this,h=void 0===d.ngeoLayertreeNotroot;this.isRoot=h;var k=d.ngeoLayertree;this.Pa=b;this.properties={};this.c="off";this.node=void 0;h?a.$watch(k,function(a){g.node=a}):this.node=a.$eval(k);b=a.$eval(d.ngeoLayertreeMap);this.parent=a.$parent.layertreeCtrl;this.children=[];this.parent&&this.parent.children.push(this);a.$on("$destroy",function(){g.parent&&g.parent.children.splice(g.parent.children.indexOf(g),1)});this.uid=v(this);this.depth=h?0:this.parent.depth+1;a.uid=
this.uid;a.depth=this.depth;this.map=b;b=d.ngeoLayertreeNodelayer;void 0===b&&(b=a.$eval(d.ngeoLayertreeNodelayerexpr));this.nodelayerExpr=b;this.layer=null;!h&&(h=a.$eval(b,{treeCtrl:this})||null)&&(this.layer=h);this.b=null;this.layer&&(f(this.layer,a),e(this.layer),B(this.layer,cb("opacity"),function(){this.Pa.$broadcast("ngeo-layertree-opacity",this)},this));e=d.ngeoLayertreeListeners;void 0===e&&(e=a.$eval(d.ngeoLayertreeListenersexpr));(this.listenersExpr=e)&&a.$eval(e,{treeScope:a,treeCtrl:this});
a.layertreeCtrl=this}Ea("ngeo.LayertreeController",xo);xo.$inject=["$scope","$rootScope","$attrs","ngeoDecorateLayer","ngeoDecorateLayerLoading"];xo.prototype.getState=function(){return this.c};xo.prototype.getState=xo.prototype.getState;xo.prototype.yb=function(a,b){var d=this;a!==this.c&&(yo(this,a),this.parent&&zo(this.parent),a=this.isRoot?this.children:[Ao(this)],(void 0===b||b)&&a.forEach(function(a){d.Pa.$broadcast("ngeo-layertree-state",d,a)}))};xo.prototype.setState=xo.prototype.yb;
function yo(a,b){a.c="on"===b?"on":"off";a.children.forEach(function(a){yo(a,this.c)},a)}function zo(a){var b=a.Xf();a.c!==b&&(a.c=b,a.parent&&zo(a.parent))}xo.prototype.Xf=function(){if(void 0===this.node.children)return this.c;var a,b;this.children.some(function(d){a=d.Xf();if(b&&b!==a)return a="indeterminate";b=a});return a};xo.prototype.getCalculateState=xo.prototype.Xf;
xo.prototype.dm=function(a){var b=this.layer,d=this.map;if(b)if(void 0!==a)a?cl(d,b):dl(d).getLayers().remove(b);else return 0<=d.getLayers().b.indexOf(b)};xo.prototype.getSetActive=xo.prototype.dm;xo.prototype.Fb=function(){return this.b};xo.prototype.getDataSource=xo.prototype.Fb;xo.prototype.Sg=function(a){this.b=a};xo.prototype.setDataSource=xo.prototype.Sg;function Ao(a){for(;!a.parent.isRoot;)a=a.parent;return a}
xo.prototype.Ma=function(a){switch(a(this)||"DESCEND"){case "STOP":return!0;case "SKIP":return!1;case "DESCEND":for(var b=0;b<this.children.length;++b)if(this.children[b].Ma(a))return!0;return!1;default:gn("Unhandled case")}};xo.prototype.traverseDepthFirst=xo.prototype.Ma;S.controller("NgeoLayertreeController",xo);function Co(a,b,d,e,f,g){this.$timeout_=a;this.ga=b;this.o=e;this.c=f;this.root={children:[]};this.rootCtrl=null;this.i=0;this.b=[];this.g=null;this.j=g;this.f=null;B(this.c,"change",this.s,this)}Co.$inject="$timeout gettextCatalog ngeoLayerHelper ngeoNotification gmfThemes ngeoStateManager".split(" ");Co.prototype.s=function(){var a=this;this.c.ed().then(function(b){a.f=b});this.rootCtrl&&this.rootCtrl.children&&this.c.Gb().then(function(b){Do(a,b)})};
Co.prototype.Re=function(a){this.root.children.length=0;this.j.de("tree_groups");return this.vc(a)};Co.prototype.setFirstLevelGroups=Co.prototype.Re;Co.prototype.vc=function(a,b,d){var e=this,f=[];a.slice().reverse().forEach(function(a){Eo(e,a)||f.push(a)});0<f.length&&!d&&Fo(this,f);return!f.length};Co.prototype.addFirstLevelGroups=Co.prototype.vc;function Go(a,b){var d={};d.tree_groups=b.map(function(a){return a.name}).join(",");vo(a.j,d)}
function Eo(a,b){var d=!1,e=b.id;a.root.children.some(function(a){if(e===a.id)return d=!0},a);a.b.some(function(a){if(e===a.id)return d=!0},a);if(d)return!1;a.b.push(b);a.i=0;null!==a.g&&a.$timeout_.cancel(a.g);a.g=a.$timeout_(function(){a.i=a.b.length;a.b.forEach(function(a){this.root.children.unshift(a)},a);Go(a,a.root.children);a.b.length=0;a.g=null});return!0}Co.prototype.vh=function(a){var b=this;this.c.Gb().then(function(d){(d=fo(d,a))&&b.vc([d],0,!1)})};Co.prototype.addGroupByName=Co.prototype.vh;
Co.prototype.uh=function(a,b,d){var e=this;this.c.Gb().then(function(b){var f=co(b,a);if(f){var h=e.vc([f],0,d);e.$timeout_(function(){var b=Ho(e,f.id);if(b){var d;b.Ma(function(b){if(b.node.name===a)return d=b,"STOP"});h&&b.yb("off");d&&d.yb("on")}else console.warn("Tree controller not found, unable to add the group")})}})};Co.prototype.addGroupByLayerName=Co.prototype.uh;
Co.prototype.Og=function(a){var b=this.root.children,d=0,e=!1;b.some(function(b){if(b.name===a.name)return e=!0;d++});e&&(b.splice(d,1),Go(this,b))};Co.prototype.removeGroup=Co.prototype.Og;Co.prototype.removeAll=function(){for(;this.root.children.length;)this.Og(this.root.children[0])};Co.prototype.removeAll=Co.prototype.removeAll;
function Fo(a,b){var d=[],e=a.ga;b.forEach(function(a){d.push(a.name)});b=2>d.length?e.getString("group is already loaded."):e.getString("groups are already loaded.");a.o.notify({msg:d.join(", ")+" "+b,type:"information"})}function Ho(a,b){var d=null;a.rootCtrl&&a.rootCtrl.Ma&&a.rootCtrl.Ma(function(a){if(a.node.id===b)return d=a,"STOP"});return d}function Io(a,b){if(b.parent.node.mixed)return a.f[b.node.ogcServer];for(;!b.parent.isRoot;)b=b.parent;return a.f[b.node.ogcServer]}
function Do(a,b){var d={};a.rootCtrl.children.map(function(b){d[b.node.name]=Jo(a,b)});var e=[];a.root.children.map(function(f){var g=f.name;if(f=fo(b,g))(g=d[g])&&Ko(a,f,g),e.push(f)});a.Re(e);a.$timeout_(function(){Go(a,a.root.children)})}
function Jo(a,b){var d={};b.children.map(function(b){d[b.node.name]=Jo(a,b)});var e,f,g;0<b.children.length?(b=$("#gmf-layertree-layer-group-"+b.uid))&&(f=b.hasClass("in")):(e=b.getState(),"on"===e?e=!0:"off"===e?e=!1:e=void 0,(b=$("#gmf-layertree-node-"+b.uid+"-legend"))&&(g=b.is(":visible")));return{children:d,isChecked:e,isExpanded:f,isLegendExpanded:g}}
function Ko(a,b,d){d&&(b.children&&b.children.map(function(b){Ko(a,b,d.children[b.name])}),b=b.metadata,b.isChecked=d.isChecked,b.isExpanded=d.isExpanded,b.isLegendExpanded=d.isLegendExpanded)}T.service("gmfTreeManager",Co);function Lo(){this.g=new XMLSerializer;nd.call(this)}u(Lo,nd);m=Lo.prototype;m.getType=function(){return"xml"};m.readFeature=function(a,b){return Xg(a)?Mo(this,a,b):Yg(a)?this.Ig(a,b):"string"===typeof a?(a=Zg(a),Mo(this,a,b)):null};function Mo(a,b,d){a=No(a,b,d);return 0<a.length?a[0]:null}m.Ig=function(){return null};m.readFeatures=function(a,b){return Xg(a)?No(this,a,b):Yg(a)?this.mc(a,b):"string"===typeof a?(a=Zg(a),No(this,a,b)):[]};
function No(a,b,d){var e=[];for(b=b.firstChild;b;b=b.nextSibling)b.nodeType==Node.ELEMENT_NODE&&Ad(e,a.mc(b,d));return e}m.readGeometry=function(a,b){if(Xg(a))return null;if(Yg(a))return this.Fj(a,b);"string"===typeof a&&Zg(a);return null};m.Fj=function(){return null};m.Me=function(a){return Xg(a)?this.Lg(a):Yg(a)?this.Ne(a):"string"===typeof a?(a=Zg(a),this.Lg(a)):null};m.Lg=function(){return this.ub};m.Ne=function(){return this.ub};
m.writeFeature=function(a,b){return this.g.serializeToString(this.sk(a,b))};m.sk=function(){return null};m.writeFeatures=function(a,b){a=this.Hd(a,b);return this.g.serializeToString(a)};m.Hd=function(){return null};m.writeGeometry=function(a,b){a=this.hh(a,b);return this.g.serializeToString(a)};m.hh=function(){return null};function Oo(a){a=a?a:{};this.featureType=a.featureType;this.featureNS=a.featureNS;this.Aa=a.Aa;this.Kb="";this.c={};this.c["http://www.opengis.net/gml"]={featureMember:bh(Oo.prototype.td),featureMembers:bh(Oo.prototype.td)};Lo.call(this)}u(Oo,Lo);var Po=/^[\s\xa0]*$/;m=Oo.prototype;
m.td=function(a,b){var d=a.localName,e=null;if("FeatureCollection"==d)"http://www.opengis.net/wfs"===a.namespaceURI?e=J([],this.c,a,b,this):e=J(null,this.c,a,b,this);else if("featureMembers"==d||"featureMember"==d){var f=b[0],g=f.featureType,h=f.featureNS,k,l;if(!g&&a.childNodes){g=[];h={};k=0;for(l=a.childNodes.length;k<l;++k){var n=a.childNodes[k];if(1===n.nodeType){var p=n.nodeName.split(":").pop();if(-1===g.indexOf(p)){var q="",r=0,n=n.namespaceURI,t;for(t in h){if(h[t]===n){q=t;break}++r}q||
(q="p"+r,h[q]=n);g.push(q+":"+p)}}}"featureMember"!=d&&(f.featureType=g,f.featureNS=h)}"string"===typeof h&&(k=h,h={},h.p0=k);var f={},g=Array.isArray(g)?g:[g],C;for(C in h){p={};k=0;for(l=g.length;k<l;++k)(-1===g[k].indexOf(":")?"p0":g[k].split(":")[0])===C&&(p[g[k].split(":").pop()]="featureMembers"==d?ah(this.Hg,this):bh(this.Hg,this));f[h[C]]=p}"featureMember"==d?e=J(void 0,f,a,b):e=J([],f,a,b)}null===e&&(e=[]);return e};
m.Je=function(a,b){var d=b[0];d.srsName=a.firstElementChild.getAttribute("srsName");if(a=J(null,this.kh,a,b,this))return qd(a,!1,d)};
m.Hg=function(a,b){var d;(d=a.getAttribute("fid"))||(d=a.getAttributeNS("http://www.opengis.net/gml","id")||"");var e={},f;for(a=a.firstElementChild;a;a=a.nextElementSibling){var g=a.localName;if(0===a.childNodes.length||1===a.childNodes.length&&(3===a.firstChild.nodeType||4===a.firstChild.nodeType)){var h=Vg(a);Po.test(h)&&(h=void 0);e[g]=h}else"boundedBy"!==g&&(f=g),e[g]=this.Je(a,b)}b=new jd(e);f&&kd(b,f);d&&md(b,d);return b};
m.Kj=function(a,b){if(a=this.Ie(a,b))return b=new ij(null),jj(b,"XYZ",a),b};m.Ij=function(a,b){if(a=J([],this.Fk,a,b,this))return new Cl(a)};m.Hj=function(a,b){if(a=J([],this.Ek,a,b,this))return b=new yl(null),Bl(b,a),b};m.Jj=function(a,b){if(a=J([],this.Gk,a,b,this))return b=new El(null),Hl(b,a),b};m.xj=function(a,b){ih(this.Jk,a,b,this)};m.Ki=function(a,b){ih(this.Ck,a,b,this)};m.yj=function(a,b){ih(this.Kk,a,b,this)};m.Ke=function(a,b){if(a=this.Ie(a,b))return b=new ge(null),he(b,"XYZ",a),b};
m.Pp=function(a,b){if(a=J(null,this.Id,a,b,this))return a};m.Gj=function(a,b){if(a=this.Ie(a,b))return b=new gj(null),hj(b,"XYZ",a),b};m.Le=function(a,b){if((a=J([null],this.gf,a,b,this))&&a[0]){b=new lj(null);var d=a[0],e=[d.length],f,g;f=1;for(g=a.length;f<g;++f)Ad(d,a[f]),e.push(d.length);mj(b,"XYZ",d,e);return b}};m.Ie=function(a,b){return J(null,this.Id,a,b,this)};m.Fk={"http://www.opengis.net/gml":{pointMember:ah(Oo.prototype.xj),pointMembers:ah(Oo.prototype.xj)}};
m.Ek={"http://www.opengis.net/gml":{lineStringMember:ah(Oo.prototype.Ki),lineStringMembers:ah(Oo.prototype.Ki)}};m.Gk={"http://www.opengis.net/gml":{polygonMember:ah(Oo.prototype.yj),polygonMembers:ah(Oo.prototype.yj)}};m.Jk={"http://www.opengis.net/gml":{Point:ah(Oo.prototype.Ie)}};m.Ck={"http://www.opengis.net/gml":{LineString:ah(Oo.prototype.Ke)}};m.Kk={"http://www.opengis.net/gml":{Polygon:ah(Oo.prototype.Le)}};m.Jd={"http://www.opengis.net/gml":{LinearRing:bh(Oo.prototype.Pp)}};
m.Fj=function(a,b){return(a=this.Je(a,[od(this,a,b?b:{})]))?a:null};m.mc=function(a,b){var d={featureType:this.featureType,featureNS:this.featureNS};b&&w(d,od(this,a,b));return this.td(a,[d])||[]};m.Ne=function(a){return lc(this.Aa?this.Aa:a.firstElementChild.getAttribute("srsName"))};function Qo(a){a=a?a:{};Oo.call(this,a);this.c["http://www.opengis.net/gml"].featureMember=ah(Oo.prototype.td);this.Kb=a.Kb?a.Kb:"http://www.opengis.net/gml http://schemas.opengis.net/gml/2.1.2/feature.xsd"}u(Qo,Oo);m=Qo.prototype;
m.Ej=function(a,b){a=Vg(a).replace(/^\s*|\s*$/g,"");var d=b[0].srsName;b="enu";d&&(d=lc(d))&&(b=d.c);a=a.trim().split(/\s+/);for(var e,f,g=[],h=0,k=a.length;h<k;h++)f=a[h].split(/,+/),d=parseFloat(f[0]),e=parseFloat(f[1]),f=3===f.length?parseFloat(f[2]):0,"en"===b.substr(0,2)?g.push(d,e,f):g.push(e,d,f);return g};m.Np=function(a,b){a=J([null],this.wk,a,b,this);return ob(a[1][0],a[1][1],a[1][3],a[1][4])};m.An=function(a,b){(a=J(void 0,this.Jd,a,b,this))&&b[b.length-1].push(a)};
m.zp=function(a,b){(a=J(void 0,this.Jd,a,b,this))&&(b[b.length-1][0]=a)};m.Id={"http://www.opengis.net/gml":{coordinates:bh(Qo.prototype.Ej)}};m.gf={"http://www.opengis.net/gml":{innerBoundaryIs:Qo.prototype.An,outerBoundaryIs:Qo.prototype.zp}};m.wk={"http://www.opengis.net/gml":{coordinates:ah(Qo.prototype.Ej)}};
m.kh={"http://www.opengis.net/gml":{Point:bh(Oo.prototype.Kj),MultiPoint:bh(Oo.prototype.Ij),LineString:bh(Oo.prototype.Ke),MultiLineString:bh(Oo.prototype.Hj),LinearRing:bh(Oo.prototype.Gj),Polygon:bh(Oo.prototype.Le),MultiPolygon:bh(Oo.prototype.Jj),Box:bh(Qo.prototype.Np)}};function V(a){a=a?a:{};Oo.call(this,a);this.B=void 0!==a.We?a.We:!1;this.f=void 0!==a.curve?a.curve:!1;this.j=void 0!==a.zg?a.zg:!0;this.o=void 0!==a.Ag?a.Ag:!0;this.Kb=a.Kb?a.Kb:"http://www.opengis.net/gml http://schemas.opengis.net/gml/3.1.1/profiles/gmlsfProfile/1.0.0/gmlsf.xsd"}u(V,Oo);m=V.prototype;m.Sp=function(a,b){if(a=J([],this.Dk,a,b,this))return b=new yl(null),Bl(b,a),b};m.Tp=function(a,b){if(a=J([],this.Hk,a,b,this))return b=new El(null),Hl(b,a),b};m.Nh=function(a,b){ih(this.xk,a,b,this)};
m.dk=function(a,b){ih(this.Ok,a,b,this)};m.Up=function(a,b){return J([null],this.Ik,a,b,this)};m.Wp=function(a,b){return J([null],this.Lk,a,b,this)};m.Vp=function(a,b){return J([null],this.gf,a,b,this)};m.Rp=function(a,b){return J([null],this.Id,a,b,this)};m.Dn=function(a,b){(a=J(void 0,this.Jd,a,b,this))&&b[b.length-1].push(a)};m.Cl=function(a,b){(a=J(void 0,this.Jd,a,b,this))&&(b[b.length-1][0]=a)};
m.Lj=function(a,b){if((a=J([null],this.Pk,a,b,this))&&a[0]){b=new lj(null);var d=a[0],e=[d.length],f,g;f=1;for(g=a.length;f<g;++f)Ad(d,a[f]),e.push(d.length);mj(b,"XYZ",d,e);return b}};m.Dj=function(a,b){if(a=J([null],this.yk,a,b,this))return b=new ge(null),he(b,"XYZ",a),b};m.Op=function(a,b){a=J([null],this.Bk,a,b,this);return ob(a[1][0],a[1][1],a[2][0],a[2][1])};
m.Qp=function(a,b){var d=Vg(a),e=/^\s*([+\-]?\d*\.?\d+(?:[eE][+\-]?\d+)?)\s*/;a=[];for(var f;f=e.exec(d);)a.push(parseFloat(f[1])),d=d.substr(f[0].length);if(""===d){b=b[0].srsName;d="enu";b&&(d=lc(b).c);if("neu"===d)for(b=0,d=a.length;b<d;b+=3)e=a[b],a[b]=a[b+1],a[b+1]=e;b=a.length;2==b&&a.push(0);if(b)return a}};
m.Jg=function(a,b){var d=Vg(a).replace(/^\s*|\s*$/g,""),e=b[0].srsName,f=a.parentNode.getAttribute("srsDimension");b="enu";e&&(b=lc(e).c);d=d.split(/\s+/);e=2;a.getAttribute("srsDimension")?e=gm(a.getAttribute("srsDimension")):a.getAttribute("dimension")?e=gm(a.getAttribute("dimension")):f&&(e=gm(f));for(var g,h=[],k=0,l=d.length;k<l;k+=e)a=parseFloat(d[k]),f=parseFloat(d[k+1]),g=3===e?parseFloat(d[k+2]):0,"en"===b.substr(0,2)?h.push(a,f,g):h.push(f,a,g);return h};
m.Id={"http://www.opengis.net/gml":{pos:bh(V.prototype.Qp),posList:bh(V.prototype.Jg)}};m.gf={"http://www.opengis.net/gml":{interior:V.prototype.Dn,exterior:V.prototype.Cl}};
m.kh={"http://www.opengis.net/gml":{Point:bh(Oo.prototype.Kj),MultiPoint:bh(Oo.prototype.Ij),LineString:bh(Oo.prototype.Ke),MultiLineString:bh(Oo.prototype.Hj),LinearRing:bh(Oo.prototype.Gj),Polygon:bh(Oo.prototype.Le),MultiPolygon:bh(Oo.prototype.Jj),Surface:bh(V.prototype.Lj),MultiSurface:bh(V.prototype.Tp),Curve:bh(V.prototype.Dj),MultiCurve:bh(V.prototype.Sp),Envelope:bh(V.prototype.Op)}};m.Dk={"http://www.opengis.net/gml":{curveMember:ah(V.prototype.Nh),curveMembers:ah(V.prototype.Nh)}};
m.Hk={"http://www.opengis.net/gml":{surfaceMember:ah(V.prototype.dk),surfaceMembers:ah(V.prototype.dk)}};m.xk={"http://www.opengis.net/gml":{LineString:ah(Oo.prototype.Ke),Curve:ah(V.prototype.Dj)}};m.Ok={"http://www.opengis.net/gml":{Polygon:ah(Oo.prototype.Le),Surface:ah(V.prototype.Lj)}};m.Pk={"http://www.opengis.net/gml":{patches:bh(V.prototype.Up)}};m.yk={"http://www.opengis.net/gml":{segments:bh(V.prototype.Wp)}};m.Bk={"http://www.opengis.net/gml":{lowerCorner:ah(V.prototype.Jg),upperCorner:ah(V.prototype.Jg)}};
m.Ik={"http://www.opengis.net/gml":{PolygonPatch:bh(V.prototype.Vp)}};m.Lk={"http://www.opengis.net/gml":{LineStringSegment:bh(V.prototype.Rp)}};function Ro(a,b,d){d=d[d.length-1].srsName;b=b.J();for(var e=b.length,f=Array(e),g,h=0;h<e;++h){g=b[h];var k=h,l="enu";d&&(l=lc(d).c);f[k]="en"===l.substr(0,2)?g[0]+" "+g[1]:g[1]+" "+g[0]}im(a,f.join(" "))}
m.fj=function(a,b,d){var e=d[d.length-1].srsName;e&&a.setAttribute("srsName",e);e=Ug(a.namespaceURI,"pos");a.appendChild(e);d=d[d.length-1].srsName;a="enu";d&&(a=lc(d).c);b=b.J();im(e,"en"===a.substr(0,2)?b[0]+" "+b[1]:b[1]+" "+b[0])};var So={"http://www.opengis.net/gml":{lowerCorner:H(im),upperCorner:H(im)}};m=V.prototype;m.Mo=function(a,b,d){var e=d[d.length-1].srsName;e&&a.setAttribute("srsName",e);jh({node:a},So,gh,[b[0]+" "+b[1],b[2]+" "+b[3]],d,["lowerCorner","upperCorner"],this)};
m.cj=function(a,b,d){var e=d[d.length-1].srsName;e&&a.setAttribute("srsName",e);e=Ug(a.namespaceURI,"posList");a.appendChild(e);Ro(e,b,d)};m.Lo=function(a,b){a=b[b.length-1];b=a.node;var d=a.exteriorWritten;void 0===d&&(a.exteriorWritten=!0);return Ug(b.namespaceURI,void 0!==d?"interior":"exterior")};
m.Ce=function(a,b,d){var e=d[d.length-1].srsName;"PolygonPatch"!==a.nodeName&&e&&a.setAttribute("srsName",e);"Polygon"===a.nodeName||"PolygonPatch"===a.nodeName?(b=oj(b),jh({node:a,Aa:e},To,this.Lo,b,d,void 0,this)):"Surface"===a.nodeName&&(e=Ug(a.namespaceURI,"patches"),a.appendChild(e),a=Ug(e.namespaceURI,"PolygonPatch"),e.appendChild(a),this.Ce(a,b,d))};
m.Be=function(a,b,d){var e=d[d.length-1].srsName;"LineStringSegment"!==a.nodeName&&e&&a.setAttribute("srsName",e);"LineString"===a.nodeName||"LineStringSegment"===a.nodeName?(e=Ug(a.namespaceURI,"posList"),a.appendChild(e),Ro(e,b,d)):"Curve"===a.nodeName&&(e=Ug(a.namespaceURI,"segments"),a.appendChild(e),a=Ug(e.namespaceURI,"LineStringSegment"),e.appendChild(a),this.Be(a,b,d))};
m.ej=function(a,b,d){var e=d[d.length-1],f=e.srsName,e=e.surface;f&&a.setAttribute("srsName",f);b=Gl(b);jh({node:a,Aa:f,We:e},Uo,this.s,b,d,void 0,this)};m.Oo=function(a,b,d){var e=d[d.length-1].srsName;e&&a.setAttribute("srsName",e);b=Dl(b);jh({node:a,Aa:e},Vo,eh("pointMember"),b,d,void 0,this)};m.dj=function(a,b,d){var e=d[d.length-1],f=e.srsName,e=e.curve;f&&a.setAttribute("srsName",f);b=Al(b);jh({node:a,Aa:f,curve:e},Wo,this.s,b,d,void 0,this)};
m.gj=function(a,b,d){var e=Ug(a.namespaceURI,"LinearRing");a.appendChild(e);this.cj(e,b,d)};m.hj=function(a,b,d){var e=this.b(b,d);e&&(a.appendChild(e),this.Ce(e,b,d))};m.Po=function(a,b,d){var e=Ug(a.namespaceURI,"Point");a.appendChild(e);this.fj(e,b,d)};m.bj=function(a,b,d){var e=this.b(b,d);e&&(a.appendChild(e),this.Be(e,b,d))};m.od=function(a,b,d){var e=d[d.length-1],f=w({},e);f.node=a;var g;Array.isArray(b)?e.Mb?g=xc(b,e.ib,e.Mb):g=b:g=qd(b,!0,e);jh(f,Xo,this.b,[g],d,void 0,this)};
m.No=function(a,b,d){var e=b.f;e&&a.setAttribute("fid",e);var e=d[d.length-1],f=e.featureNS,g=b.b;e.oc||(e.oc={},e.oc[f]={});var h=db(b);b=[];var k=[],l;for(l in h){var n=h[l];null!==n&&(b.push(l),k.push(n),l==g||n instanceof yc?l in e.oc[f]||(e.oc[f][l]=H(this.od,this)):l in e.oc[f]||(e.oc[f][l]=H(im)))}l=w({},e);l.node=a;jh(l,e.oc,eh(void 0,f),k,d,b)};
var Uo={"http://www.opengis.net/gml":{surfaceMember:H(V.prototype.hj),polygonMember:H(V.prototype.hj)}},Vo={"http://www.opengis.net/gml":{pointMember:H(V.prototype.Po)}},Wo={"http://www.opengis.net/gml":{lineStringMember:H(V.prototype.bj),curveMember:H(V.prototype.bj)}},To={"http://www.opengis.net/gml":{exterior:H(V.prototype.gj),interior:H(V.prototype.gj)}},Xo={"http://www.opengis.net/gml":{Curve:H(V.prototype.Be),MultiCurve:H(V.prototype.dj),Point:H(V.prototype.fj),MultiPoint:H(V.prototype.Oo),
LineString:H(V.prototype.Be),MultiLineString:H(V.prototype.dj),LinearRing:H(V.prototype.cj),Polygon:H(V.prototype.Ce),MultiPolygon:H(V.prototype.ej),Surface:H(V.prototype.Ce),MultiSurface:H(V.prototype.ej),Envelope:H(V.prototype.Mo)}},Yo={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"};V.prototype.s=function(a,b){return Ug("http://www.opengis.net/gml",Yo[b[b.length-1].node.nodeName])};
V.prototype.b=function(a,b){var d=b[b.length-1];b=d.multiSurface;var e=d.surface,f=d.curve,d=d.multiCurve;Array.isArray(a)?a="Envelope":(a=a.getType(),"MultiPolygon"===a&&!0===b?a="MultiSurface":"Polygon"===a&&!0===e?a="Surface":"LineString"===a&&!0===f?a="Curve":"MultiLineString"===a&&!0===d&&(a="MultiCurve"));return Ug("http://www.opengis.net/gml",a)};
V.prototype.hh=function(a,b){b=pd(this,b);var d=Ug("http://www.opengis.net/gml","geom"),e={node:d,Aa:this.Aa,curve:this.f,We:this.B,Ag:this.o,zg:this.j};b&&w(e,b);this.od(d,a,[e]);return d};
V.prototype.Hd=function(a,b){b=pd(this,b);var d=Ug("http://www.opengis.net/gml","featureMembers");d.setAttributeNS("http://www.w3.org/2001/XMLSchema-instance","xsi:schemaLocation",this.Kb);var e={Aa:this.Aa,curve:this.f,We:this.B,Ag:this.o,zg:this.j,featureNS:this.featureNS,featureType:this.featureType};b&&w(e,b);b=[e];var f=b[b.length-1],e=f.featureType,g=f.featureNS,h={};h[g]={};h[g][e]=H(this.No,this);f=w({},f);f.node=d;jh(f,h,eh(e,g),a,b);return d};function Zo(a){this.Ib=a};function $o(a,b){this.Ib=a;this.conditions=Array.prototype.slice.call(arguments,1);Ja(2<=this.conditions.length,57)}u($o,Zo);function ap(a){$o.apply(this,["And"].concat(Array.prototype.slice.call(arguments)))}u(ap,$o);function bp(a,b,d){this.Ib="BBOX";this.geometryName=a;this.extent=b;this.Aa=d}u(bp,Zo);function cp(a,b){this.Ib=a;this.propertyName=b}u(cp,Zo);function dp(a,b,d,e){cp.call(this,a,b);this.expression=d;this.c=e}u(dp,cp);function ep(a,b,d){dp.call(this,"PropertyIsEqualTo",a,b,d)}u(ep,dp);function fp(a,b){dp.call(this,"PropertyIsGreaterThan",a,b)}u(fp,dp);function gp(a,b){dp.call(this,"PropertyIsGreaterThanOrEqualTo",a,b)}u(gp,dp);function hp(a,b,d,e){this.Ib=a;this.geometryName=b||"the_geom";this.geometry=d;this.Aa=e}u(hp,Zo);function ip(a,b,d){hp.call(this,"Intersects",a,b,d)}u(ip,hp);function jp(a,b,d){cp.call(this,"PropertyIsBetween",a);this.lowerBoundary=b;this.upperBoundary=d}u(jp,cp);function kp(a,b,d,e,f,g){cp.call(this,"PropertyIsLike",a);this.g=b;this.i=void 0!==d?d:"*";this.f=void 0!==e?e:".";this.b=void 0!==f?f:"!";this.c=g}u(kp,cp);function lp(a,b){dp.call(this,"PropertyIsLessThan",a,b)}u(lp,dp);function mp(a,b){dp.call(this,"PropertyIsLessThanOrEqualTo",a,b)}u(mp,dp);function np(a){this.Ib="Not";this.condition=a}u(np,Zo);function op(a,b,d){dp.call(this,"PropertyIsNotEqualTo",a,b,d)}u(op,dp);function pp(a){$o.apply(this,["Or"].concat(Array.prototype.slice.call(arguments)))}u(pp,$o);function qp(a,b,d){hp.call(this,"Within",a,b,d)}u(qp,hp);function rp(a){return new (Function.prototype.bind.apply(ap,[null].concat(Array.prototype.slice.call(arguments))))}function sp(a){return new (Function.prototype.bind.apply(pp,[null].concat(Array.prototype.slice.call(arguments))))}function tp(a,b){return new ep(a,b,void 0)};function up(a){a=a?a:{};this.f=a.featureType;this.b=a.featureNS;this.c=a.Fm?a.Fm:new V;this.j=a.Kb?a.Kb:vp["1.1.0"];Lo.call(this)}u(up,Lo);var vp={"1.1.0":"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.1.0/wfs.xsd","1.0.0":"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.0.0/wfs.xsd"};
up.prototype.mc=function(a,b){var d={featureType:this.f,featureNS:this.b};w(d,od(this,a,b?b:{}));b=[d];this.c.c["http://www.opengis.net/gml"].featureMember=ah(Oo.prototype.td);(a=J([],this.c.c,a,b,this.c))||(a=[]);return a};function wp(a,b){for(b=b.firstChild;b;b=b.nextSibling)if(b.nodeType==Node.ELEMENT_NODE)return xp(a,b)}var yp={"http://www.opengis.net/gml":{boundedBy:F(Oo.prototype.Je,"bounds")}};
function xp(a,b){var d={},e=gm(b.getAttribute("numberOfFeatures"));d.numberOfFeatures=e;return J(d,yp,b,[],a.c)}var zp={"http://www.opengis.net/wfs":{PropertyName:H(im)}};function Ap(a,b,d){var e={node:a};b.conditions.forEach(function(a){jh(e,Bp,eh(a.Ib),[a],d)})}function Cp(a,b){void 0!==b.c&&a.setAttribute("matchCase",b.c.toString());Dp(a,b.propertyName);Ep(a,""+b.expression)}function Fp(a,b,d){a=Ug("http://www.opengis.net/ogc",a);im(a,d);b.appendChild(a)}
function Dp(a,b){Fp("PropertyName",a,b)}function Ep(a,b){Fp("Literal",a,b)}
var Bp={"http://www.opengis.net/wfs":{Query:H(function(a,b,d){var e=d[d.length-1],f=e.featurePrefix,g=e.featureNS,h=e.propertyNames,k=e.srsName;a.setAttribute("typeName",(f?f+":":"")+b);k&&a.setAttribute("srsName",k);g&&a.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:"+f,g);b=w({},e);b.node=a;jh(b,zp,eh("PropertyName"),h,d);if(e=e.filter)h=Ug("http://www.opengis.net/ogc","Filter"),a.appendChild(h),jh({node:h},Bp,eh(e.Ib),[e],d)})},"http://www.opengis.net/ogc":{And:H(Ap),Or:H(Ap),Not:H(function(a,
b,d){b=b.condition;jh({node:a},Bp,eh(b.Ib),[b],d)}),BBOX:H(function(a,b,d){d[d.length-1].srsName=b.Aa;Dp(a,b.geometryName);V.prototype.od(a,b.extent,d)}),Intersects:H(function(a,b,d){d[d.length-1].srsName=b.Aa;Dp(a,b.geometryName);V.prototype.od(a,b.geometry,d)}),Within:H(function(a,b,d){d[d.length-1].srsName=b.Aa;Dp(a,b.geometryName);V.prototype.od(a,b.geometry,d)}),PropertyIsEqualTo:H(Cp),PropertyIsNotEqualTo:H(Cp),PropertyIsLessThan:H(Cp),PropertyIsLessThanOrEqualTo:H(Cp),PropertyIsGreaterThan:H(Cp),
PropertyIsGreaterThanOrEqualTo:H(Cp),PropertyIsNull:H(function(a,b){Dp(a,b.propertyName)}),PropertyIsBetween:H(function(a,b){Dp(a,b.propertyName);var d=Ug("http://www.opengis.net/ogc","LowerBoundary");a.appendChild(d);Ep(d,""+b.lowerBoundary);d=Ug("http://www.opengis.net/ogc","UpperBoundary");a.appendChild(d);Ep(d,""+b.upperBoundary)}),PropertyIsLike:H(function(a,b){a.setAttribute("wildCard",b.i);a.setAttribute("singleChar",b.f);a.setAttribute("escapeChar",b.b);void 0!==b.c&&a.setAttribute("matchCase",
b.c.toString());Dp(a,b.propertyName);Ep(a,""+b.g)})}};
function Gp(a,b){var d=Ug("http://www.opengis.net/wfs","GetFeature");d.setAttribute("service","WFS");d.setAttribute("version","1.1.0");var e;if(b&&(b.handle&&d.setAttribute("handle",b.handle),b.Ge&&d.setAttribute("outputFormat",b.Ge),void 0!==b.maxFeatures&&d.setAttribute("maxFeatures",b.maxFeatures),b.resultType&&d.setAttribute("resultType",b.resultType),void 0!==b.Bq&&d.setAttribute("startIndex",b.Bq),void 0!==b.count&&d.setAttribute("count",b.count),e=b.filter,b.bbox)){Ja(b.geometryName,12);var f=
new bp(b.geometryName,b.bbox,b.Aa);e?e=rp(e,f):e=f}d.setAttributeNS("http://www.w3.org/2001/XMLSchema-instance","xsi:schemaLocation",a.j);a={node:d,srsName:b.Aa,featureNS:b.featureNS?b.featureNS:a.b,featurePrefix:b.featurePrefix,geometryName:b.geometryName,filter:e,propertyNames:b.Mp?b.Mp:[]};Ja(Array.isArray(b.Ac),11);b=b.Ac;a=[a];e=w({},a[a.length-1]);e.node=d;jh(e,Bp,eh("Query"),b,a);return d}
up.prototype.Lg=function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType==Node.ELEMENT_NODE)return this.Ne(a);return null};up.prototype.Ne=function(a){if(a.firstElementChild&&a.firstElementChild.firstElementChild)for(a=a.firstElementChild.firstElementChild,a=a.firstElementChild;a;a=a.nextElementSibling)if(0!==a.childNodes.length&&(1!==a.childNodes.length||3!==a.firstChild.nodeType)){var b=[{}];this.c.Je(a,b);return lc(b.pop().Aa)}return null};function Hp(a){a=a?a:{};this.b="http://mapserver.gis.umn.edu/mapserver";this.c=new Qo;this.f=a.layers?a.layers:null;Lo.call(this)}u(Hp,Lo);
Hp.prototype.mc=function(a,b){var d={};b&&w(d,od(this,a,b));d=[d];a.setAttribute("namespaceURI",this.b);var e=a.localName;b=[];if(a.childNodes.length){if("msGMLOutput"==e)for(var f=0,g=a.childNodes.length;f<g;f++){var h=a.childNodes[f];if(h.nodeType===Node.ELEMENT_NODE){var k=d[0],l=h.localName.replace("_layer","");if(!this.f||yd(this.f,l)){l+="_feature";k.featureType=l;k.featureNS=this.b;var n={};n[l]=ah(this.c.Hg,this.c);k=I([k.featureNS,null],n);h.setAttribute("namespaceURI",this.b);(h=J([],k,
h,d,this.c))&&Ad(b,h)}}}"FeatureCollection"==e&&(a=J([],this.c.c,a,[{}],this.c))&&(b=a)}return b};Hp.prototype.sk=function(){};Hp.prototype.Hd=function(){};Hp.prototype.hh=function(){};function Ip(a){this.b=a.activeDimensions||null;this.f=a.filterCondition||"&&";this.c=a.filterRules||null;this.i=a.filtrable||null;this.j=!1!==a.inRange;this.B=!0===a.visible;this.g=a.attributes||null;this.u=!0===a.copyable;this.R=a.dimensions||null;this.o=a.geometryName||Jp;this.D=a.id;this.N=a.identifierAttribute;this.O=a.maxResolution;this.G=a.minResolution;this.ia=a.name;this.M=a.ogcImageType||"image/png";this.X=a.ogcLayers||null;this.s=a.ogcServerType||Kp;this.V=a.ogcType||Lp;this.Oa=!0===a.snappable;
this.da=!1!==a.snappingToEdges;this.ta=!1!==a.snappingToVertice;this.Qa=void 0!==a.snappingTolerance?a.snappingTolerance:10;this.Bb=a.wfsFeatureNS||Mp[this.s];this.Ta=a.wfsFeaturePrefix||Np;this.fb=a.wfsOutputFormat||Op;this.Cb=a.wfsUrl;this.hf=a.wmsInfoFormat||Pp;this.mf=!0===a.wmsIsSingleTile;this.rf=a.wmsUrl;this.tf=a.wmtsLayer;this.Ef=a.wmtsUrl;a=[];if(this.queryable&&this.ogcLayers)for(var b=ka(this.ogcLayers),d=b.next();!d.done;d=b.next())d=d.value,d.queryable&&a.push(d.name);b=null;this.supportsWFS&&
a.length&&(b=new up({featureNS:this.wfsFeatureNS,featureType:a}));this.eb=b;b=null;this.supportsWMS&&a.length&&this.wmsInfoFormat===Pp&&(b=new Hp({layers:a}));this.Zb=b}Ip.prototype.Dh=function(a){return this.combinableForWFS&&a.combinableForWFS&&this.supportsWFS&&a.supportsWFS&&this.queryable&&a.queryable&&this.wfsUrl===a.wfsUrl};Ip.prototype.combinableWithDataSourceForWFS=Ip.prototype.Dh;
Ip.prototype.Eh=function(a){return this.combinableForWMS&&a.combinableForWMS&&this.supportsWMS&&a.supportsWMS&&this.queryable&&a.queryable&&this.wmsUrl===a.wmsUrl};Ip.prototype.combinableWithDataSourceForWMS=Ip.prototype.Eh;Ip.prototype.Ii=function(a,b){return!!this.ie(a,void 0===b?!1:b).length};Ip.prototype.isAnyOGCLayerInRange=Ip.prototype.Ii;
Ip.prototype.ie=function(a,b){b=void 0===b?!1:b;var d=[];if(this.ogcLayers)for(var e=ka(this.ogcLayers),f=e.next();!f.done;f=e.next()){var f=f.value,g=f.maxResolution,h=f.minResolution,g=void 0===g||a<=g;(void 0===h||a>=h)&&g&&(!b||f.queryable)&&d.push(f.name)}return d};Ip.prototype.getInRangeOGCLayerNames=Ip.prototype.ie;Ip.prototype.ke=function(a){a=void 0===a?!1:a;var b=[];if(this.ogcLayers)for(var d=ka(this.ogcLayers),e=d.next();!e.done;e=d.next())e=e.value,a&&!e.queryable||b.push(e.name);return b};
Ip.prototype.getOGCLayerNames=Ip.prototype.ke;Ip.prototype.ag=function(){return this.ke()[0]};Ip.prototype.getFiltrableOGCLayerName=Ip.prototype.ag;
ca.Object.defineProperties(Ip.prototype,{activeDimensions:{configurable:!0,enumerable:!0,get:function(){return this.b},set:function(a){this.b=a}},filterCondition:{configurable:!0,enumerable:!0,get:function(){return this.f},set:function(a){this.f=a}},filterRules:{configurable:!0,enumerable:!0,get:function(){return this.c},set:function(a){this.c=a}},inRange:{configurable:!0,enumerable:!0,get:function(){return this.j},set:function(a){this.j=a}},visible:{configurable:!0,enumerable:!0,get:function(){return this.B},
set:function(a){this.B=a}},attributes:{configurable:!0,enumerable:!0,get:function(){return this.g},set:function(a){this.g=a;a=Jp;if(this.attributes)for(var b=ka(this.attributes),d=b.next();!d.done;d=b.next())if(d=d.value,"geometry"===d.type){a=d.name;break}this.o=a}},copyable:{configurable:!0,enumerable:!0,get:function(){return this.u}},dimensions:{configurable:!0,enumerable:!0,get:function(){return this.R}},filtrable:{configurable:!0,enumerable:!0,get:function(){return this.i},set:function(a){this.i=
a}},geometryName:{configurable:!0,enumerable:!0,get:function(){return this.o}},id:{configurable:!0,enumerable:!0,get:function(){return this.D}},identifierAttribute:{configurable:!0,enumerable:!0,get:function(){return this.N}},maxResolution:{configurable:!0,enumerable:!0,get:function(){return this.O}},minResolution:{configurable:!0,enumerable:!0,get:function(){return this.G}},name:{configurable:!0,enumerable:!0,get:function(){return this.ia}},ogcImageType:{configurable:!0,enumerable:!0,get:function(){return this.M}},
ogcLayers:{configurable:!0,enumerable:!0,get:function(){return this.X}},ogcServerType:{configurable:!0,enumerable:!0,get:function(){return this.s}},ogcType:{configurable:!0,enumerable:!0,get:function(){return this.V}},snappable:{configurable:!0,enumerable:!0,get:function(){return this.Oa}},snappingToEdges:{configurable:!0,enumerable:!0,get:function(){return this.da}},snappingToVertice:{configurable:!0,enumerable:!0,get:function(){return this.ta}},snappingTolerance:{configurable:!0,enumerable:!0,get:function(){return this.Qa}},
wfsFeatureNS:{configurable:!0,enumerable:!0,get:function(){return this.Bb}},wfsFeaturePrefix:{configurable:!0,enumerable:!0,get:function(){return this.Ta}},wfsOutputFormat:{configurable:!0,enumerable:!0,get:function(){return this.fb}},wfsUrl:{configurable:!0,enumerable:!0,get:function(){return this.Cb}},wmsInfoFormat:{configurable:!0,enumerable:!0,get:function(){return this.hf}},wmsIsSingleTile:{configurable:!0,enumerable:!0,get:function(){return this.mf}},wmsUrl:{configurable:!0,enumerable:!0,get:function(){return this.rf}},
wmtsLayer:{configurable:!0,enumerable:!0,get:function(){return this.tf}},wmtsUrl:{configurable:!0,enumerable:!0,get:function(){return this.Ef}},combinableForWFS:{configurable:!0,enumerable:!0,get:function(){return null===this.c}},combinableForWMS:{configurable:!0,enumerable:!0,get:function(){return null===this.c}},queryable:{configurable:!0,enumerable:!0,get:function(){var a=!1;if((this.supportsWMS||this.supportsWFS)&&this.ogcLayers)for(var b=ka(this.ogcLayers),d=b.next();!d.done;d=b.next())if(!0===
d.value.queryable){a=!0;break}return a}},supportsDynamicInRange:{configurable:!0,enumerable:!0,get:function(){return null!==this.maxResolution||null!==this.minResolution}},supportsWFS:{configurable:!0,enumerable:!0,get:function(){return void 0!==this.wfsUrl}},supportsAttributes:{configurable:!0,enumerable:!0,get:function(){return null!==this.attributes||this.supportsWFS&&null!==this.ogcLayers&&1===this.ogcLayers.length&&!0===this.ogcLayers[0].queryable}},supportsWMS:{configurable:!0,enumerable:!0,
get:function(){return void 0!==this.wmsUrl}},supportsWMTS:{configurable:!0,enumerable:!0,get:function(){return void 0!==this.wmtsUrl}},wfsFormat:{configurable:!0,enumerable:!0,get:function(){return this.eb}},wmsFormat:{configurable:!0,enumerable:!0,get:function(){return this.Zb}}});var Jp="the_geom",Kp="mapserver",Lp="WMS",Mp={geoserver:"http://www.opengis.net/gml/3.2",mapserver:"http://mapserver.gis.umn.edu/mapserver",qgisserver:"http://www.qgis.org/gml"},Np="feature",Op="GML3",Pp="application/vnd.ogc.gml";function Qp(a){Ip.call(this,a);this.C=a.gmfLayer}ma(Qp,Ip);ca.Object.defineProperties(Qp.prototype,{gmfLayer:{configurable:!0,enumerable:!0,get:function(){return this.C}}});function Rp(){}Rp.prototype.le=function(a){var b=new Date(a.minValue),d=new Date(a.maxValue),e=a.minDefValue?new Date(a.minDefValue):b,f=a.maxDefValue?new Date(a.maxDefValue):d;return{Ti:b.getTime(),Qi:d.getTime(),values:"range"===a.mode?[e.getTime(),f.getTime()]:e.getTime()}};Rp.prototype.getOptions=Rp.prototype.le;Rp.prototype.getUTCDate=function(a){return new Date(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate())};Rp.prototype.getUTCDate=Rp.prototype.getUTCDate;S.service("ngeoTime",Rp);function Sp(a){this.$filter_=a}u(Sp,Rp);Sp.$inject=["$filter"];function Tp(a,b,d,e){b=new Date(b);e=e?"UTC":void 0;switch(d){case "year":return a.$filter_("date")(b,"yyyy",e);case "month":return a.$filter_("date")(b,"yyyy-MM",e);case "day":return a.$filter_("date")(b,"yyyy-MM-dd",e);default:return b.toISOString().replace(/\.\d{3}/,"")}}Sp.prototype.Uf=function(a,b,d){return"range"===a.mode?Tp(this,b.start,a.resolution,d)+"/"+Tp(this,b.end,a.resolution,d):Tp(this,b.start,a.resolution,d)};
Sp.prototype.formatWMSTimeParam=Sp.prototype.Uf;S.service("ngeoWMSTime",Sp);function Up(a,b,d,e){var f=this;this.c=b;this.b=d;e.ed().then(function(a){f.g=a});a.$on("ngeo-layertree-state",function(a,b,d){Vp(d)})}Up.$inject=["$rootScope","ngeoLayerHelper","ngeoWMSTime","gmfThemes"];function Vp(a){a.Ma(function(a){a.layer&&!a.node.mixed&&Wp(a.layer,a)})}
function Wp(a,b){var d="on"===b.getState();if("WMTS"===b.node.type)we(a,d);else if(b.node.mixed||1!==b.depth)we(a,d);else{var e=[];b.Ma(function(a){void 0===a.node.children&&"on"===a.getState()&&e.push(a.node.layers)});e.length||we(a,!1);E(a).updateParams({LAYERS:e.reverse().join(",")});e.length&&we(a,!0)}}
function Xp(a,b,d,e){var f=b.node,g=null;if(b.parent.isRoot)g=Yp(a,b,!!f.mixed),a=e|0,li(d.getLayers(),a,g);else{d=b.parent;do e=!1===d.node.mixed,d=d.parent;while(d.parent&&!e);e||(g=Yp(a,b,!0),li(Zp(b.parent).getLayers(),0,g))}return g}function Yp(a,b,d){var e,f=b.node;if(d)e=a.c.Xd();else{d=$p(a,b);var g=a.g[f.ogcServer||""];e=a.c.Yd(g.url,"",g.type,d);b.Ma(function(a){aq(a.node,e);a.node.metadata.isChecked&&(a.yb("on",!1),Wp(e,a))});e.set("layerNodeName",f.name)}return e}
function bq(a,b){var d=new Jg;a.c.Df(b.url,b.layer,b.dimensions).then(function(a){var b=E(a);d.set("source",b);d.set("capabilitiesStyles",a.get("capabilitiesStyles"))});return d}function aq(a,b){var d=a.id,e=b.get("querySourceIds")||[];e.push(d);b.set("querySourceIds",e);a.editable&&(e=b.get("editableIds")||[],e.push(d),b.set("editableIds",e));a.metadata.disclaimer&&(d=b.get("disclaimers")||[],d.push(a.metadata.disclaimer),b.set("disclaimers",d))}
function $p(a,b){var d,e,f=b.node;f.time?d=f.time:f.children&&b.Ma(function(a){if(void 0===a.node.children&&a.node.time)return d=a.node.time,"STOP"});d&&(b=a.b.le(d).values,e=a.b.Uf(d,{start:b[0]||b,end:b[1]}));return e}function Zp(a){for(var b=null;!a.isRoot&&null===b;)a.layer&&(b=a.layer),a=a.parent;return b}T.service("gmfSyncLayertreeMap",Up);S.value("ngeoDataSources",new hi);function cq(a){var b=a("number");return function(a){return(a=b(a,0))?"1\u00a0:\u00a0"+a:""}}cq.$inject=["$filter"];S.filter("ngeoScalify",cq);
function dq(a){var b=a.NUMBER_FORMATS;return function(a,e){var d=b.GROUP_SEP,g=b.DECIMAL_SEP;void 0===e&&(e=3);if(Infinity===a)return"\u221e";if(-Infinity===a)return"-\u221e";if(!a)return"0";var h=0>a;a=Math.abs(a);var k=e-Math.floor(Math.log(a)/Math.log(10))-1,l=Math.pow(10,k);a=Math.round(a*l);e="";l=Math.floor(a/l);if(0<k){for(e=""+a;e.length<k;)e="0"+e;for(e=e.substring(e.length-k);"0"===e[e.length-1];)e=e.substring(0,e.length-1)}a=[];for(k=""+l;3<k.length;)l=k.length-3,a.unshift(k.substring(l)),
k=k.substring(0,l);a.unshift(k);return(h?"-":"")+a.join(d)+(e.length?g+e:"")}}dq.$inject=["$locale"];S.filter("ngeoNumber",dq);function eq(a){var b=a("ngeoNumber"),d=" k M G T P".split(" "),e=" Ki Mi Gi Ti Pi".split(" ");return function(a,g,h,k){void 0===g&&(g="");var f=1E3,n=d;"square"===h?f=1E6:"binary"===h&&(f=1024,n=e);h=0;for(var p=n.length-1;a>=f&&h<p;)a/=f,h++;g=n[h]+g;f=g.length?"\u00a0":"";return b(a,k)+f+g}}eq.$inject=["$filter"];S.filter("ngeoUnitPrefix",eq);
function fq(a){return function(b,d,e){e=e?e:"{x} {y}";var f=b[0];b=b[1];d=parseInt(d,10)|0;f=a("number")(f,d);b=a("number")(b,d);return e.replace("{x}",f).replace("{y}",b)}}fq.$inject=["$filter"];S.filter("ngeoNumberCoordinates",fq);
S.filter("ngeoDMSCoordinates",function(){function a(a,d,e){a=Jb(a+180,360)-180;var b=Math.abs(3600*a);return Math.floor(b/3600)+"\u00b0 "+ye(Math.floor(b/60%60),2)+"\u2032 "+ye(b%60,2,e)+"\u2033 "+d.charAt(0>a?1:0)}return function(b,d,e){d=parseInt(d,10)|0;var f=a(b[0],"EW",d);return(e?e:"{x} {y}").replace("{x}",a(b[1],"NS",d)).replace("{y}",f)}});function gq(a){return function(b){return void 0!==b&&null!==b?a.trustAsHtml(""+b):a.trustAsHtml("&nbsp;")}}gq.$inject=["$sce"];
S.filter("ngeoTrustHtml",gq);function hq(a,b){Va.call(this,a);this.feature=b}u(hq,Va);
function iq(a){a=a?a:{};Nj.call(this,{handleEvent:jq});this.continueMsg=this.i=this.jc=this.Ba=this.j=this.f=null;this.decimals=a.decimals;this.u=void 0!==a.ul?a.ul:!0;void 0!==a.startMsg?this.startMsg=a.startMsg:(this.startMsg=document.createElement("span"),this.startMsg.textContent="Click to start drawing.");this.s=null;var b=void 0!==a.style?a.style:[new D({fill:new cd({color:"rgba(255, 255, 255, 0.2)"})}),new D({stroke:new dd({color:"white",width:5})}),new D({stroke:new dd({color:"#ffcc33",width:3})})];
this.o=new gi({source:new gl,style:b});this.b=this.B(a.sketchStyle,E(this.o));this.C=!0;B(this.b,cb("active"),this.D,this);B(this.b,"drawstart",this.tp,this);B(this.b,"drawend",this.sp,this);B(this,cb("active"),this.no,this)}u(iq,Nj);
function kq(a,b,d,e){a=nj(a.clone().transform(b,"EPSG:4326")).J();b=0;d=a.length;for(var f=a[d-1][0],g=a[d-1][1],h=0;h<d;h++){var k=a[h][0],l=a[h][1];b+=Ib(k-f)*(2+Math.sin(Ib(g))+Math.sin(Ib(l)));f=k;g=l}return e(Math.abs(b*ac.radius*ac.radius/2),"m\u00b2","square")}Ea("ngeo.interaction.Measure.getFormattedArea",kq);Ea("ngeo.interaction.Measure.getFormattedCircleArea",function(a,b,d){return d(Math.PI*Math.pow(Math.sqrt(rj(a)),2),"m\u00b2","square")});
function lq(a,b,d,e){d=0;a=a.J();for(var f=0,g=a.length-1;f<g;++f){var h=wc(a[f],b,"EPSG:4326"),k=wc(a[f+1],b,"EPSG:4326");d+=Lb(ac,h,k)}return e(d,"m")}Ea("ngeo.interaction.Measure.getFormattedLength",lq);function jq(a){if("pointermove"!=a.type||a.dragging)return!0;var b=this.startMsg;null!==this.i&&(b=this.continueMsg);if(this.u){for(var d=this.f;d.lastChild;)d.removeChild(d.lastChild);this.f.appendChild(b);this.j.setPosition(a.coordinate)}return!0}iq.prototype.Ol=function(){return this.b};
iq.prototype.getDrawInteraction=iq.prototype.Ol;m=iq.prototype;m.setMap=function(a){Nj.prototype.setMap.call(this,a);this.o.setMap(a);var b=this.b.ma;null!==b&&b.T.remove(this.b);null!==a&&bl(a,this.b)};m.tp=function(a){this.i=a.feature;E(this.o).clear(!0);mq(this);a=this.i.getGeometry();this.s=B(a,"change",function(){var a=this;this.rg(function(b,e){null!==e&&(a.Ba.innerHTML=b,a.jc.setPosition(e))})},this)};
m.sp=function(){this.Ba.classList.add("ngeo-tooltip-static");this.jc.set(qh,[0,-7]);this.dispatchEvent(new hq("measureend",this.i));this.i=null;null!==this.s&&A(this.s)};function nq(a){a.u&&(a.ma.Ja.remove(a.j),null!==a.f&&a.f.parentNode.removeChild(a.f),a.f=null,a.j=null)}function mq(a){oq(a);a.Ba=document.createElement("div");a.Ba.classList.add("tooltip");a.Ba.classList.add("ngeo-tooltip-measure");a.jc=new nh({element:a.Ba,offset:[0,-15],Lc:"bottom-center",Zg:!1});a.ma.Ja.push(a.jc)}
function oq(a){null!==a.Ba&&(a.Ba.parentNode.removeChild(a.Ba),a.Ba=null,a.jc=null)}m.no=function(){var a=this.getActive();this.C=!1;this.b.setActive(a);this.C=!0;this.ma&&(a?this.jc||(mq(this),nq(this),this.u&&(this.f=document.createElement("div"),this.f.classList.add("tooltip"),this.j=new nh({element:this.f,offset:[15,0],Lc:"center-left"}),this.ma.Ja.push(this.j))):(E(this.o).clear(!0),this.ma.Ja.remove(this.jc),oq(this),nq(this)))};m.mm=function(){return this.Ba};
iq.prototype.getTooltipElement=iq.prototype.mm;iq.prototype.D=function(){this.C&&this.setActive(this.b.getActive())};function pq(a,b,d){Jd.call(this);qq(this,a,b?b:0,d)}u(pq,Jd);m=pq.prototype;m.clone=function(){var a=new pq(null);Nd(a,this.layout,this.v.slice());a.c();return a};m.tb=function(a,b,d,e){var f=this.v;a-=f[0];var g=b-f[1];b=a*a+g*g;if(b<e){if(b)for(e=Math.sqrt(rj(this))/Math.sqrt(b),d[0]=f[0]+e*a,d[1]=f[1]+e*g,e=2;e<this.F;++e)d[e]=f[e];else for(e=0;e<this.F;++e)d[e]=f[e];d.length=this.F;return b}return e};m.lc=function(a,b){var d=this.v;a-=d[0];b-=d[1];return a*a+b*b<=rj(this)};
m.getCenter=function(){return this.v.slice(0,this.F)};m.Vd=function(a){var b=this.v,d=b[this.F]-b[0];return ob(b[0]-d,b[1]-d,b[0]+d,b[1]+d,a)};function rj(a){var b=a.v[a.F]-a.v[0];a=a.v[a.F+1]-a.v[1];return b*b+a*a}m.getType=function(){return"Circle"};m.qb=function(a){var b=this.H();return Cb(a,b)?(b=this.getCenter(),a[0]<=b[0]&&a[2]>=b[0]||a[1]<=b[1]&&a[3]>=b[1]?!0:ub(a,this.X,this)):!1};
m.setCenter=function(a){var b=this.F,d=a.slice();d[b]=d[0]+(this.v[b]-this.v[0]);var e;for(e=1;e<b;++e)d[b+e]=a[e];Nd(this,this.layout,d);this.c()};function qq(a,b,d,e){if(b){a.xb(e,b,0);a.v||(a.v=[]);e=a.v;b=Td(e,b);e[b++]=e[0]+d;var f;d=1;for(f=a.F;d<f;++d)e[b++]=e[d];e.length=b}else Nd(a,"XY",null);a.c()}m.J=function(){};m.fa=function(){};m.setRadius=function(a){this.v[this.F]=this.v[0]+a;this.c()};function rq(a){bk.call(this,{ab:sq,handleEvent:tq,bb:uq});this.M=!1;this.V=null;this.o=!1;this.fb=a.source?a.source:null;this.Ta=a.features?a.features:null;this.Ml=a.zq?a.zq:12;this.G=a.type;this.f=vq(this.G);this.Qa=a.minPoints?a.minPoints:this.f===wq?3:2;this.ta=a.Ri?a.Ri:Infinity;this.hf=a.Hl?a.Hl:Db;var b=a.Nl;if(!b)if("Circle"===this.G)b=function(a,b){b=b?b:new pq([NaN,NaN]);qq(b,a[0],Math.sqrt(Ce(a[0],a[1])));return b};else{var d,e=this.f;e===xq?d=ij:e===yq?d=ge:e===wq&&(d=lj);b=function(a,
b){b?e===wq?b.fa([a[0].concat([a[0][0]])]):b.fa(a):b=new d(a);return b}}this.jb=b;this.D=this.C=this.b=this.u=this.j=this.s=null;this.Cb=a.Bh?a.Bh*a.Bh:36;this.da=new gi({source:new gl({Xb:!1,wrapX:a.wrapX?a.wrapX:!1}),style:a.style?a.style:zq()});this.eb=a.geometryName;this.El=a.condition?a.condition:Vj;this.mf=a.Ur?Db:a.Ll?a.Ll:Xj;B(this,cb("active"),this.Zb,this)}u(rq,bk);function zq(){var a=id();return function(b){return a[b.getGeometry().getType()]}}
rq.prototype.setMap=function(a){bk.prototype.setMap.call(this,a);this.Zb()};function tq(a){this.o=this.f!==xq&&this.mf(a);var b=!this.o;this.o&&"pointerdrag"===a.type&&null!==this.j?(Aq(this,a),b=!1):"pointermove"===a.type?b=Bq(this,a):"dblclick"===a.type&&(b=!1);return ck.call(this,a)&&b}function sq(a){this.M=!this.o;return this.o?(this.V=a.pixel,this.s||Cq(this,a),!0):this.El(a)?(this.V=a.pixel,!0):!1}
function uq(a){var b=!0;Bq(this,a);var d=this.f===Dq;this.M?(this.s?this.o||d?Eq(this):Fq(this,a)?this.hf(a)&&Eq(this):Aq(this,a):(Cq(this,a),this.f===xq&&Eq(this)),b=!1):this.o&&(this.s=null,Gq(this));return b}
function Bq(a,b){if(a.V&&(!a.o&&a.M||a.o&&!a.M)){var d=a.V,e=b.pixel,f=d[0]-e[0],d=d[1]-e[1],f=f*f+d*d;a.M=a.o?f>a.Cb:f<=a.Cb}a.s?(f=b.coordinate,d=a.j.getGeometry(),a.f===xq?e=a.b:a.f===wq?(e=a.b[0],e=e[e.length-1],Fq(a,b)&&(f=a.s.slice())):(e=a.b,e=e[e.length-1]),e[0]=f[0],e[1]=f[1],a.jb(a.b,d),a.u&&a.u.getGeometry().fa(f),d instanceof lj&&a.f!==wq?(a.C||(a.C=new jd(new ge(null))),f=nj(d),b=a.C.getGeometry(),he(b,f.layout,f.v)):a.D&&(b=a.C.getGeometry(),b.fa(a.D)),Hq(a)):(b=b.coordinate.slice(),
a.u?a.u.getGeometry().fa(b):(a.u=new jd(new ij(b)),Hq(a)));return!0}function Fq(a,b){var d=!1;if(a.j){var e=!1,f=[a.s];a.f===yq?e=a.b.length>a.Qa:a.f===wq&&(e=a.b[0].length>a.Qa,f=[a.b[0][0],a.b[0][a.b[0].length-2]]);if(e)for(var e=b.map,g=0,h=f.length;g<h;g++){var k=f[g],l=wh(e,k),n=b.pixel,d=n[0]-l[0],l=n[1]-l[1];if(d=Math.sqrt(d*d+l*l)<=(a.o?1:a.Ml)){a.s=k;break}}}return d}
function Cq(a,b){b=b.coordinate;a.s=b;a.f===xq?a.b=b.slice():a.f===wq?(a.b=[[b.slice(),b.slice()]],a.D=a.b[0]):(a.b=[b.slice(),b.slice()],a.f===Dq&&(a.D=a.b));a.D&&(a.C=new jd(new ge(a.D)));b=a.jb(a.b);a.j=new jd;a.eb&&kd(a.j,a.eb);a.j.setGeometry(b);Hq(a);a.dispatchEvent(new Iq("drawstart",a.j))}
function Aq(a,b){b=b.coordinate;var d=a.j.getGeometry(),e,f;a.f===yq?(a.s=b.slice(),f=a.b,f.length>=a.ta&&(a.o?f.pop():e=!0),f.push(b.slice()),a.jb(f,d)):a.f===wq&&(f=a.b[0],f.length>=a.ta&&(a.o?f.pop():e=!0),f.push(b.slice()),e&&(a.s=f[0]),a.jb(a.b,d));Hq(a);e&&Eq(a)}
function Eq(a){var b=Gq(a),d=a.b,e=b.getGeometry();a.f===yq?(d.pop(),a.jb(d,e)):a.f===wq&&(d[0].pop(),a.jb(d,e),d=e.J());"MultiPoint"===a.G?b.setGeometry(new Cl([d])):"MultiLineString"===a.G?b.setGeometry(new yl([d])):"MultiPolygon"===a.G&&b.setGeometry(new El([d]));a.dispatchEvent(new Iq("drawend",b));a.Ta&&a.Ta.push(b);a.fb&&a.fb.oa(b)}function Gq(a){a.s=null;var b=a.j;b&&(a.j=null,a.u=null,a.C=null,E(a.da).clear(!0));return b}
rq.prototype.extend=function(a){var b=a.getGeometry();this.j=a;this.b=b.J();a=this.b[this.b.length-1];this.s=a.slice();this.b.push(a.slice());Hq(this);this.dispatchEvent(new Iq("drawstart",this.j))};rq.prototype.Ub=Eb;function Hq(a){var b=[];a.j&&b.push(a.j);a.C&&b.push(a.C);a.u&&b.push(a.u);a=E(a.da);a.clear(!0);mh(a,b);a.c()}rq.prototype.Zb=function(){var a=this.ma,b=this.getActive();a&&b||Gq(this);this.da.setMap(b?a:null)};
function vq(a){var b;"Point"===a||"MultiPoint"===a?b=xq:"LineString"===a||"MultiLineString"===a?b=yq:"Polygon"===a||"MultiPolygon"===a?b=wq:"Circle"===a&&(b=Dq);return b}var xq="Point",yq="LineString",wq="Polygon",Dq="Circle";function Iq(a,b){Va.call(this,a);this.feature=b}u(Iq,Va);function Jq(a,b){b=b||{};iq.call(this,b);void 0!==b.continueMsg?this.continueMsg=b.continueMsg:(this.continueMsg=document.createElement("span"),this.continueMsg.textContent="Click to finish.");this.format=a}u(Jq,iq);Ea("ngeo.interaction.MeasureAzimut",Jq);Jq.prototype.B=function(a,b){return new Kq({source:b,style:a})};Jq.prototype.rg=function(a){var b=wl(this.i.getGeometry().b)[0],d=Lq(b,O(this.ma).getProjection(),this.format);a(d,Ld(b))};
function Lq(a,b,d){var e=Mq(a)+"\u00b0";return e+=", "+lq(a,b,0,d)}function Mq(a){var b=a.J();a=b[1][0]-b[0][0];b=b[1][1]-b[0][1];return Math.round((0<a?1:-1)*Math.acos(b/Math.sqrt(a*a+b*b))*180/Math.PI)%360}function Kq(a){bk.call(this,{ab:Nq,handleEvent:Oq,bb:Pq});this.s=null;this.u=void 0!==a.source?a.source:null;this.j=!1;this.f=this.b=null;this.o=new gi({source:new gl({Xb:!1,wrapX:!1}),style:void 0!==a.style?a.style:zq()});B(this,cb("active"),this.C,this)}u(Kq,bk);
Ea("ngeo.interaction.DrawAzimut",Kq);function Nq(a){this.s=a.pixel;return!0}function Pq(a){var b=this.s,d=a.pixel,e=b[0]-d[0],b=b[1]-d[1],d=!0;4>=e*e+b*b&&(Qq(this,a),this.j?(a=Rq(this),null!==this.u&&this.u.oa(a),this.dispatchEvent(new Iq("drawend",a))):(e=a.coordinate,this.j=!0,a=new ge([e.slice(),e.slice()]),e=new pq(e,0),a=new ul([a,e]),this.b=new jd,this.b.setGeometry(a),Sq(this),this.dispatchEvent(new Iq("drawstart",this.b))),d=!1);return d}
function Oq(a){var b=!0;"pointermove"===a.type?b=Qq(this,a):"dblclick"===a.type&&(b=!1);return ck.call(this,a)&&b}function Qq(a,b){if(a.j){b=b.coordinate;var d=a.b.getGeometry().b,e=d[0],f=e.J();a.f.getGeometry().fa(b);var g=f[f.length-1];g[0]=b[0];g[1]=b[1];e.fa(f);d[1].setRadius(ke(e));Sq(a)}else b=b.coordinate.slice(),null===a.f?(a.f=new jd(new ij(b)),Sq(a)):a.f.getGeometry().fa(b);return!0}
function Sq(a){var b=[];null!==a.b&&b.push(a.b);null!==a.f&&b.push(a.f);a=E(a.o);a.clear(!0);mh(a,b);a.c()}function Rq(a){a.j=!1;var b=a.b;null!==b&&(a.b=null,a.f=null,E(a.o).clear(!0));return b}Kq.prototype.Ub=Eb;Kq.prototype.C=function(){var a=this.ma,b=this.getActive();null!==a&&b||Rq(this);this.o.setMap(b?a:null)};Kq.prototype.setMap=function(a){bk.prototype.setMap.call(this,a);this.C()};S.factory("ngeoDownload",function(){return function(a,b,d){saveAs(new Blob([a],{type:void 0===d||-1!=navigator.userAgent.indexOf("Safari")&&-1==navigator.userAgent.indexOf("Chrome")?"text/plain;charset=utf-8":d}),b)}});function Tq(a){a=a?a:{};Lo.call(this);this.ub=lc("EPSG:4326");this.c=a.bs}u(Tq,Lo);var Uq=[null,"http://www.topografix.com/GPX/1/0","http://www.topografix.com/GPX/1/1"];function Vq(a,b,d,e){a.push(parseFloat(d.getAttribute("lon")),parseFloat(d.getAttribute("lat")));"ele"in e?(a.push(e.ele),delete e.ele,b.hasZ=!0):a.push(0);"time"in e?(a.push(e.time),delete e.time,b.hasM=!0):a.push(0);return a}
function Wq(a,b,d){var e="XY",f=2;a.hasZ&&a.hasM?(e="XYZM",f=4):a.hasZ?(e="XYZ",f=3):a.hasM&&(e="XYM",f=3);if(4!==f){var g,h;g=0;for(h=b.length/4;g<h;g++)b[g*f]=b[4*g],b[g*f+1]=b[4*g+1],a.hasZ&&(b[g*f+2]=b[4*g+2]),a.hasM&&(b[g*f+2]=b[4*g+3]);b.length=b.length/4*f;if(d)for(g=0,h=d.length;g<h;g++)d[g]=d[g]/4*f}return e}function Xq(a,b){var d=b[b.length-1],e=a.getAttribute("href");null!==e&&(d.link=e);ih(Yq,a,b)}function Zq(a,b){b[b.length-1].extensionsNode_=a}
function $q(a,b){var d=b[0];if(a=J({flatCoordinates:[],layoutOptions:{}},ar,a,b)){b=a.flatCoordinates;delete a.flatCoordinates;var e=a.layoutOptions;delete a.layoutOptions;var e=Wq(e,b),f=new ge(null);he(f,e,b);qd(f,!1,d);d=new jd(f);d.Ea(a);return d}}
function br(a,b){var d=b[0];if(a=J({flatCoordinates:[],ends:[],layoutOptions:{}},cr,a,b)){b=a.flatCoordinates;delete a.flatCoordinates;var e=a.ends;delete a.ends;var f=a.layoutOptions;delete a.layoutOptions;var f=Wq(f,b,e),g=new yl(null);zl(g,f,b,e);qd(g,!1,d);d=new jd(g);d.Ea(a);return d}}function dr(a,b){var d=b[0];if(b=J({},er,a,b)){var e={};a=Vq([],e,a,b);e=Wq(e,a);a=new ij(a,e);qd(a,!1,d);d=new jd(a);d.Ea(b);return d}}
var fr={rte:$q,trk:br,wpt:dr},gr=I(Uq,{rte:ah($q),trk:ah(br),wpt:ah(dr)}),Yq=I(Uq,{text:F(R,"linkText"),type:F(R,"linkType")}),ar=I(Uq,{name:F(R),cmt:F(R),desc:F(R),src:F(R),link:Xq,number:F(fm),extensions:Zq,type:F(R),rtept:function(a,b){var d=J({},hr,a,b);d&&(b=b[b.length-1],Vq(b.flatCoordinates,b.layoutOptions,a,d))}}),hr=I(Uq,{ele:F(dm),time:F(cm)}),cr=I(Uq,{name:F(R),cmt:F(R),desc:F(R),src:F(R),link:Xq,number:F(fm),type:F(R),extensions:Zq,trkseg:function(a,b){var d=b[b.length-1];ih(ir,a,b);d.ends.push(d.flatCoordinates.length)}}),
ir=I(Uq,{trkpt:function(a,b){var d=J({},jr,a,b);d&&(b=b[b.length-1],Vq(b.flatCoordinates,b.layoutOptions,a,d))}}),jr=I(Uq,{ele:F(dm),time:F(cm)}),er=I(Uq,{ele:F(dm),time:F(cm),magvar:F(dm),geoidheight:F(dm),name:F(R),cmt:F(R),desc:F(R),src:F(R),link:Xq,sym:F(R),type:F(R),fix:F(R),sat:F(fm),hdop:F(dm),vdop:F(dm),pdop:F(dm),ageofdgpsdata:F(dm),dgpsid:F(fm),extensions:Zq});
function kr(a,b){b||(b=[]);for(var d=0,e=b.length;d<e;++d){var f=b[d];if(a.c){var g=f.get("extensionsNode_")||null;a.c(f,g)}f.set("extensionsNode_",void 0)}}Tq.prototype.Ig=function(a,b){if(!yd(Uq,a.namespaceURI))return null;var d=fr[a.localName];if(!d)return null;a=d(a,[od(this,a,b)]);if(!a)return null;kr(this,[a]);return a};Tq.prototype.mc=function(a,b){return yd(Uq,a.namespaceURI)?"gpx"==a.localName&&(a=J([],gr,a,[od(this,a,b)]))?(kr(this,a),a):[]:[]};
function lr(a,b,d){a.setAttribute("href",b);b=d[d.length-1].properties;jh({node:a},mr,gh,[b.linkText,b.linkType],d,nr)}function or(a,b,d){var e=d[d.length-1],f=e.node.namespaceURI,g=e.properties;a.setAttributeNS(null,"lat",b[1]);a.setAttributeNS(null,"lon",b[0]);switch(e.geometryLayout){case "XYZM":b[3]&&(g.time=b[3]);case "XYZ":b[2]&&(g.ele=b[2]);break;case "XYM":b[2]&&(g.time=b[2])}b="rtept"==a.nodeName?pr[f]:qr[f];e=hh(g,b);jh({node:a,properties:g},rr,gh,e,d,b)}
var nr=["text","type"],mr=I(Uq,{text:H(im),type:H(im)}),sr=I(Uq,"name cmt desc src link number type rtept".split(" ")),tr=I(Uq,{name:H(im),cmt:H(im),desc:H(im),src:H(im),link:H(lr),number:H(km),type:H(im),rtept:dh(H(or))}),pr=I(Uq,["ele","time"]),ur=I(Uq,"name cmt desc src link number type trkseg".split(" ")),xr=I(Uq,{name:H(im),cmt:H(im),desc:H(im),src:H(im),link:H(lr),number:H(km),type:H(im),trkseg:dh(H(function(a,b,d){jh({node:a,geometryLayout:b.layout,properties:{}},vr,wr,b.J(),d)}))}),wr=eh("trkpt"),
vr=I(Uq,{trkpt:H(or)}),qr=I(Uq,"ele time magvar geoidheight name cmt desc src link sym type fix sat hdop vdop pdop ageofdgpsdata dgpsid".split(" ")),rr=I(Uq,{ele:H(jm),time:H(function(a,b){b=new Date(1E3*b);a.appendChild(Tg.createTextNode(b.getUTCFullYear()+"-"+ye(b.getUTCMonth()+1,2)+"-"+ye(b.getUTCDate(),2)+"T"+ye(b.getUTCHours(),2)+":"+ye(b.getUTCMinutes(),2)+":"+ye(b.getUTCSeconds(),2)+"Z"))}),magvar:H(jm),geoidheight:H(jm),name:H(im),cmt:H(im),desc:H(im),src:H(im),link:H(lr),sym:H(im),type:H(im),
fix:H(im),sat:H(km),hdop:H(jm),vdop:H(jm),pdop:H(jm),ageofdgpsdata:H(jm),dgpsid:H(km)}),yr={Point:"wpt",LineString:"rte",MultiLineString:"trk"};function zr(a,b){if(a=a.getGeometry())if(a=yr[a.getType()])return Ug(b[b.length-1].node.namespaceURI,a)}
var Ar=I(Uq,{rte:H(function(a,b,d){var e=d[0],f=db(b);a={node:a,properties:f};if(b=b.getGeometry())b=qd(b,!0,e),a.geometryLayout=b.layout,f.rtept=b.J();e=sr[d[d.length-1].node.namespaceURI];f=hh(f,e);jh(a,tr,gh,f,d,e)}),trk:H(function(a,b,d){var e=d[0],f=db(b);a={node:a,properties:f};if(b=b.getGeometry())b=qd(b,!0,e),f.trkseg=Al(b);e=ur[d[d.length-1].node.namespaceURI];f=hh(f,e);jh(a,xr,gh,f,d,e)}),wpt:H(function(a,b,d){var e=d[0],f=d[d.length-1];f.properties=db(b);if(b=b.getGeometry())b=qd(b,!0,
e),f.geometryLayout=b.layout,or(a,b.J(),d)})});
Tq.prototype.Hd=function(a,b){b=pd(this,b);var d=Ug("http://www.topografix.com/GPX/1/1","gpx");d.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xsi","http://www.w3.org/2001/XMLSchema-instance");d.setAttributeNS("http://www.w3.org/2001/XMLSchema-instance","xsi:schemaLocation","http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd");d.setAttribute("version","1.1");d.setAttribute("creator","OpenLayers");jh({node:d},Ar,zr,a,[b]);return d};function Br(a){a=a||{};this.c=a.font;this.f=a.rotation;this.j=a.wb;this.s=a.scale;this.ya=a.text;this.i=a.textAlign;this.o=a.textBaseline;this.Ga=void 0!==a.fill?a.fill:new cd({color:"#333"});this.La=void 0!==a.stroke?a.stroke:null;this.b=void 0!==a.offsetX?a.offsetX:0;this.g=void 0!==a.offsetY?a.offsetY:0}m=Br.prototype;
m.clone=function(){return new Br({font:this.c,rotation:this.f,wb:this.j,scale:this.Ha(),text:this.za(),textAlign:this.i,textBaseline:this.o,fill:this.la()?this.la().clone():void 0,stroke:this.pa()?this.pa().clone():void 0,offsetX:this.b,offsetY:this.g})};m.la=function(){return this.Ga};m.Ha=function(){return this.s};m.pa=function(){return this.La};m.za=function(){return this.ya};m.Vj=function(a){this.Ga=a};m.zd=function(a){this.f=a};m.Wj=function(a){this.La=a};m.Yj=function(a){this.ya=a};function Cr(a){a=a?a:{};Lo.call(this);Dr||(Er=[255,255,255,1],Fr=new cd({color:Er}),Gr=[20,2],Hr=Ir="pixels",Jr=[64,64],Kr="https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png",Lr=.5,Mr=new bi({anchor:Gr,Md:"bottom-left",Nd:Ir,Od:Hr,crossOrigin:"anonymous",rotation:0,scale:Lr,size:Jr,src:Kr}),Nr="NO_IMAGE",Or=new dd({color:Er,width:1}),Pr=new dd({color:[51,51,51,1],width:2}),Qr=new Br({font:"bold 16px Helvetica",fill:Fr,stroke:Pr,scale:.8}),Rr=new D({fill:Fr,image:Mr,text:Qr,stroke:Or,zIndex:0}),
Dr=[Rr]);this.ub=lc("EPSG:4326");this.b=a.rl?a.rl:Dr;this.f=void 0!==a.Dl?a.Dl:!0;this.o=void 0!==a.Wq?a.Wq:!0;this.c={};this.j=void 0!==a.xq?a.xq:!0}var Dr,Er,Fr,Gr,Ir,Hr,Jr,Kr,Lr,Mr,Nr,Or,Pr,Qr,Rr;u(Cr,Lo);var Sr=["http://www.google.com/kml/ext/2.2"],W=[null,"http://earth.google.com/kml/2.0","http://earth.google.com/kml/2.1","http://earth.google.com/kml/2.2","http://www.opengis.net/kml/2.2"],Tr={fraction:"fraction",pixels:"pixels"};
function Ur(a,b){var d=[0,0],e="start";if(a.ea()){var f=a.ea().cg();null===f&&(f=Jr);2==f.length&&(e=a.ea().Ha(),d[0]=e*f[0]/2,d[1]=-e*f[1]/2,e="left")}null!==a.za()?(f=a.za(),a=f.clone(),a.c=f.c||Qr.c,a.s=f.Ha()||Qr.Ha(),a.Vj(f.la()||Qr.la()),a.Wj(f.pa()||Pr)):a=Qr.clone();a.Yj(b);a.b=d[0];a.g=d[1];a.i=e;return new D({text:a})}
function Vr(a,b,d,e,f){return function(){var g=f,h="";g&&this.getGeometry()&&(g="Point"===this.getGeometry().getType());g&&(h=this.get("name"),g=g&&h);if(a)return g?(g=Ur(a[0],h),a.concat(g)):a;if(b){var k=Wr(b,d,e);return g?(g=Ur(k[0],h),k.concat(g)):k}return g?(g=Ur(d[0],h),d.concat(g)):d}}function Wr(a,b,d){return Array.isArray(a)?a:"string"===typeof a?(!(a in d)&&"#"+a in d&&(a="#"+a),Wr(d[a],b,d)):b}
function Xr(a){a=Vg(a);if(a=/^\s*#?\s*([0-9A-Fa-f]{8})\s*$/.exec(a))return a=a[1],[parseInt(a.substr(6,2),16),parseInt(a.substr(4,2),16),parseInt(a.substr(2,2),16),parseInt(a.substr(0,2),16)/255]}function Yr(a){a=Vg(a);for(var b=[],d=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*,\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s*,\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?))?\s*/i,e;e=d.exec(a);)b.push(parseFloat(e[1]),parseFloat(e[2]),e[3]?parseFloat(e[3]):0),a=a.substr(e[0].length);if(""===a)return b}
function Zr(a){var b=Vg(a).trim();return a.baseURI?(new URL(b,a.baseURI)).href:b}function $r(a){return dm(a)}function as(a,b){return J(null,bs,a,b)}function cs(a,b){if(b=J({v:[],rk:[]},ds,a,b)){a=b.v;b=b.rk;var d,e;d=0;for(e=Math.min(a.length,b.length);d<e;++d)a[4*d+3]=b[d];b=new ge(null);he(b,"XYZM",a);return b}}function es(a,b){var d=J({},fs,a,b);if(a=J(null,gs,a,b))return b=new ge(null),he(b,"XYZ",a),b.Ea(d),b}
function hs(a,b){var d=J({},fs,a,b);if(a=J(null,gs,a,b))return b=new lj(null),mj(b,"XYZ",a,[a.length]),b.Ea(d),b}
function is(a,b){a=J([],js,a,b);if(!a)return null;if(!a.length)return new ul(a);var d,e=!0,f=a[0].getType(),g,h;g=1;for(h=a.length;g<h;++g)if(b=a[g],b.getType()!=f){e=!1;break}if(e)if("Point"==f){d=a[0];e=d.layout;f=d.v;g=1;for(h=a.length;g<h;++g)b=a[g],Ad(f,b.v);b=d=new Cl(null);Nd(b,e,f);b.c();ks(d,a)}else"LineString"==f?(d=new yl(null),Bl(d,a),ks(d,a)):"Polygon"==f?(d=new El(null),Hl(d,a),ks(d,a)):"GeometryCollection"==f?d=new ul(a):Ja(!1,37);else d=new ul(a);return d}
function ls(a,b){var d=J({},fs,a,b);if(a=J(null,gs,a,b))return b=new ij(null),jj(b,"XYZ",a),b.Ea(d),b}function ms(a,b){var d=J({},fs,a,b);if((a=J([null],ns,a,b))&&a[0]){b=new lj(null);var e=a[0],f=[e.length],g,h;g=1;for(h=a.length;g<h;++g)Ad(e,a[g]),f.push(e.length);mj(b,"XYZ",e,f);b.Ea(d);return b}}
function os(a,b){b=J({},ps,a,b);if(!b)return null;a="fillStyle"in b?b.fillStyle:Fr;var d=b.fill;void 0===d||d||(a=null);d="imageStyle"in b?b.imageStyle:Mr;d==Nr&&(d=void 0);var e="textStyle"in b?b.textStyle:Qr,f="strokeStyle"in b?b.strokeStyle:Or;b=b.outline;void 0===b||b||(f=null);return[new D({fill:a,image:d,stroke:f,text:e,zIndex:void 0})]}
function ks(a,b){var d=b.length,e=Array(b.length),f=Array(b.length),g,h,k,l;k=l=!1;for(h=0;h<d;++h)g=b[h],e[h]=g.get("extrude"),f[h]=g.get("altitudeMode"),k=k||void 0!==e[h],l=l||f[h];k&&a.set("extrude",e);l&&a.set("altitudeMode",f)}function qs(a,b){ih(rs,a,b)}function ss(a,b){ih(ts,a,b)}
var us=I(W,{displayName:F(R),value:F(R)}),rs=I(W,{Data:function(a,b){var d=a.getAttribute("name");ih(us,a,b);a=b[b.length-1];null!==d?a[d]=a.value:null!==a.displayName&&(a[a.displayName]=a.value)},SchemaData:function(a,b){ih(vs,a,b)}}),ts=I(W,{LatLonAltBox:function(a,b){if(a=J({},ws,a,b))b=b[b.length-1],b.extent=[parseFloat(a.west),parseFloat(a.south),parseFloat(a.east),parseFloat(a.north)],b.altitudeMode=a.altitudeMode,b.minAltitude=parseFloat(a.minAltitude),b.maxAltitude=parseFloat(a.maxAltitude)},
Lod:function(a,b){if(a=J({},xs,a,b))b=b[b.length-1],b.minLodPixels=parseFloat(a.minLodPixels),b.maxLodPixels=parseFloat(a.maxLodPixels),b.minFadeExtent=parseFloat(a.minFadeExtent),b.maxFadeExtent=parseFloat(a.maxFadeExtent)}}),ws=I(W,{altitudeMode:F(R),minAltitude:F(dm),maxAltitude:F(dm),north:F(dm),south:F(dm),east:F(dm),west:F(dm)}),xs=I(W,{minLodPixels:F(dm),maxLodPixels:F(dm),minFadeExtent:F(dm),maxFadeExtent:F(dm)}),fs=I(W,{extrude:F(am),altitudeMode:F(R)}),bs=I(W,{coordinates:bh(Yr)}),ns=I(W,
{innerBoundaryIs:function(a,b){(a=J(void 0,ys,a,b))&&b[b.length-1].push(a)},outerBoundaryIs:function(a,b){(a=J(void 0,zs,a,b))&&(b[b.length-1][0]=a)}}),ds=I(W,{when:function(a,b){b=b[b.length-1].rk;a=Vg(a);a=Date.parse(a);b.push(isNaN(a)?0:a)}},I(Sr,{coord:function(a,b){b=b[b.length-1].v;a=Vg(a);(a=/^\s*([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s*$/i.exec(a))?b.push(parseFloat(a[1]),parseFloat(a[2]),parseFloat(a[3]),0):b.push(0,
0,0,0)}})),gs=I(W,{coordinates:bh(Yr)}),As=I(W,{href:F(Zr)},I(Sr,{x:F(dm),y:F(dm),w:F(dm),h:F(dm)})),Bs=I(W,{Icon:F(function(a,b){return(a=J({},As,a,b))?a:null}),heading:F(dm),hotSpot:F(function(a){var b=a.getAttribute("xunits"),d=a.getAttribute("yunits");return{x:parseFloat(a.getAttribute("x")),ih:Tr[b],y:parseFloat(a.getAttribute("y")),jh:Tr[d]}}),scale:F($r)}),ys=I(W,{LinearRing:bh(as)}),Cs=I(W,{color:F(Xr),scale:F($r)}),Ds=I(W,{color:F(Xr),width:F(dm)}),js=I(W,{LineString:ah(es),LinearRing:ah(hs),
MultiGeometry:ah(is),Point:ah(ls),Polygon:ah(ms)}),Es=I(Sr,{Track:ah(cs)});I(W,{ExtendedData:qs,Region:ss,Link:function(a,b){ih(Fs,a,b)},address:F(R),description:F(R),name:F(R),open:F(am),phoneNumber:F(R),visibility:F(am)});
var Fs=I(W,{href:F(Zr)}),zs=I(W,{LinearRing:bh(as)}),Gs=I(W,{Style:F(os),key:F(R),styleUrl:F(Zr)}),Is=I(W,{ExtendedData:qs,Region:ss,MultiGeometry:F(is,"geometry"),LineString:F(es,"geometry"),LinearRing:F(hs,"geometry"),Point:F(ls,"geometry"),Polygon:F(ms,"geometry"),Style:F(os),StyleMap:function(a,b){if(a=J(void 0,Hs,a,b))b=b[b.length-1],Array.isArray(a)?b.Style=a:"string"===typeof a?b.styleUrl=a:Ja(!1,38)},address:F(R),description:F(R),name:F(R),open:F(am),phoneNumber:F(R),styleUrl:F(Zr),visibility:F(am)},
I(Sr,{MultiTrack:F(function(a,b){if(a=J([],Es,a,b))return b=new yl(null),Bl(b,a),b},"geometry"),Track:F(cs,"geometry")})),Js=I(W,{color:F(Xr),fill:F(am),outline:F(am)}),vs=I(W,{SimpleData:function(a,b){var d=a.getAttribute("name");null!==d&&(a=R(a),b[b.length-1][d]=a)}}),ps=I(W,{IconStyle:function(a,b){if(a=J({},Bs,a,b)){b=b[b.length-1];var d="Icon"in a?a.Icon:{},e=!("Icon"in a)||0<Object.keys(d).length,f,g=d.href;g?f=g:e&&(f=Kr);var h,k,l;(g=a.hotSpot)?(h=[g.x,g.y],k=g.ih,l=g.jh):f===Kr?(h=Gr,k=
Ir,l=Hr):/^http:\/\/maps\.(?:google|gstatic)\.com\//.test(f)&&(h=[.5,0],l=k="fraction");var n,g=d.x,p=d.y;void 0!==g&&void 0!==p&&(n=[g,p]);var q,g=d.w,d=d.h;void 0!==g&&void 0!==d&&(q=[g,d]);var r,d=a.heading;void 0!==d&&(r=Ib(d));a=a.scale;e?(f==Kr&&(q=Jr,void 0===a&&(a=Lr)),f=new bi({anchor:h,Md:"bottom-left",Nd:k,Od:l,crossOrigin:"anonymous",offset:n,Bg:"bottom-left",rotation:r,scale:a,size:q,src:f}),b.imageStyle=f):b.imageStyle=Nr}},LabelStyle:function(a,b){(a=J({},Cs,a,b))&&(b[b.length-1].textStyle=
new Br({fill:new cd({color:"color"in a?a.color:Er}),scale:a.scale}))},LineStyle:function(a,b){(a=J({},Ds,a,b))&&(b[b.length-1].strokeStyle=new dd({color:"color"in a?a.color:Er,width:"width"in a?a.width:1}))},PolyStyle:function(a,b){if(a=J({},Js,a,b)){b=b[b.length-1];b.fillStyle=new cd({color:"color"in a?a.color:Er});var d=a.fill;void 0!==d&&(b.fill=d);a=a.outline;void 0!==a&&(b.outline=a)}}}),Hs=I(W,{Pair:function(a,b){if(a=J({},Gs,a,b)){var d=a.key;d&&"normal"==d&&((d=a.styleUrl)&&(b[b.length-1]=
d),(a=a.Style)&&(b[b.length-1]=a))}}});m=Cr.prototype;m.Gg=function(a,b){var d=I(W,{Document:$g(this.Gg,this),Folder:$g(this.Gg,this),Placemark:ah(this.Kg,this),Style:this.Yp.bind(this),StyleMap:this.Xp.bind(this)});if(a=J([],d,a,b,this))return a};
m.Kg=function(a,b){var d=J({geometry:null},Is,a,b);if(d){var e=new jd;a=a.getAttribute("id");null!==a&&md(e,a);b=b[0];(a=d.geometry)&&qd(a,!1,b);e.setGeometry(a);delete d.geometry;this.f&&e.setStyle(Vr(d.Style,d.styleUrl,this.b,this.c,this.j));delete d.Style;e.Ea(d);return e}};m.Yp=function(a,b){var d=a.getAttribute("id");null!==d&&(b=os(a,b))&&(a=a.baseURI?(new URL("#"+d,a.baseURI)).href:"#"+d,this.c[a]=b)};
m.Xp=function(a,b){var d=a.getAttribute("id");null!==d&&(b=J(void 0,Hs,a,b))&&(a=a.baseURI?(new URL("#"+d,a.baseURI)).href:"#"+d,this.c[a]=b)};m.Ig=function(a,b){return yd(W,a.namespaceURI)?(a=this.Kg(a,[od(this,a,b)]))?a:null:null};
m.mc=function(a,b){if(!yd(W,a.namespaceURI))return[];var d;d=a.localName;if("Document"==d||"Folder"==d)return(d=this.Gg(a,[od(this,a,b)]))?d:[];if("Placemark"==d)return(b=this.Kg(a,[od(this,a,b)]))?[b]:[];if("kml"==d){d=[];for(a=a.firstElementChild;a;a=a.nextElementSibling){var e=this.mc(a,b);e&&Ad(d,e)}return d}return[]};function Ks(a,b){b=Cc(b);b=[255*(4==b.length?b[3]:1),b[2],b[1],b[0]];var d;for(d=0;4>d;++d){var e=parseInt(b[d],10).toString(16);b[d]=1==e.length?"0"+e:e}im(a,b.join(""))}
function Ls(a,b,d){a={node:a};var e=b.getType(),f,g;"GeometryCollection"==e?(f=wl(b.b),g=Ms):"MultiPoint"==e?(f=Dl(b),g=Ns):"MultiLineString"==e?(f=Al(b),g=Os):"MultiPolygon"==e?(f=Gl(b),g=Ps):Ja(!1,39);jh(a,Qs,g,f,d)}function Rs(a,b,d){jh({node:a},Ss,Ts,[b],d)}
function Us(a,b,d){var e={node:a};b.f&&a.setAttribute("id",b.f);a=db(b);var f={address:1,description:1,name:1,open:1,phoneNumber:1,styleUrl:1,visibility:1};f[b.b]=1;var g=Object.keys(a||{}).sort().filter(function(a){return!f[a]});if(0<g.length){var h=hh(a,g);jh(e,Vs,Ws,[{names:g,values:h}],d)}if(g=b.i)if(g=g.call(b,0))g=Array.isArray(g)?g[0]:g,this.o&&(a.Style=g),(g=g.za())&&(a.name=g.za());g=Xs[d[d.length-1].node.namespaceURI];a=hh(a,g);jh(e,Vs,gh,a,d,g);a=d[0];(b=b.getGeometry())&&(b=qd(b,!0,a));
jh(e,Vs,Ms,[b],d)}function Ys(a,b,d){var e=b.v;a={node:a};a.layout=b.layout;a.stride=b.F;jh(a,Zs,$s,[e],d)}function at(a,b,d){b=oj(b);var e=b.shift();a={node:a};jh(a,bt,ct,b,d);jh(a,bt,dt,[e],d)}function et(a,b){jm(a,Math.round(1E6*b)/1E6)}
var ft=I(W,["Document","Placemark"]),it=I(W,{Document:H(function(a,b,d){jh({node:a},gt,ht,b,d,void 0,this)}),Placemark:H(Us)}),gt=I(W,{Placemark:H(Us)}),jt=I(W,{Data:H(function(a,b,d){a.setAttribute("name",b.name);a={node:a};b=b.value;"object"==typeof b?(null!==b&&b.displayName&&jh(a,jt,gh,[b.displayName],d,["displayName"]),null!==b&&b.value&&jh(a,jt,gh,[b.value],d,["value"])):jh(a,jt,gh,[b],d,["value"])}),value:H(function(a,b){im(a,b)}),displayName:H(function(a,b){a.appendChild(Tg.createCDATASection(b))})}),
kt={Point:"Point",LineString:"LineString",LinearRing:"LinearRing",Polygon:"Polygon",MultiPoint:"MultiGeometry",MultiLineString:"MultiGeometry",MultiPolygon:"MultiGeometry",GeometryCollection:"MultiGeometry"},lt=I(W,["href"],I(Sr,["x","y","w","h"])),mt=I(W,{href:H(im)},I(Sr,{x:H(jm),y:H(jm),w:H(jm),h:H(jm)})),nt=I(W,["scale","heading","Icon","hotSpot"]),pt=I(W,{Icon:H(function(a,b,d){a={node:a};var e=lt[d[d.length-1].node.namespaceURI],f=hh(b,e);jh(a,mt,gh,f,d,e);e=lt[Sr[0]];f=hh(b,e);jh(a,mt,ot,f,
d,e)}),heading:H(jm),hotSpot:H(function(a,b){a.setAttribute("x",b.x);a.setAttribute("y",b.y);a.setAttribute("xunits",b.ih);a.setAttribute("yunits",b.jh)}),scale:H(et)}),qt=I(W,["color","scale"]),rt=I(W,{color:H(Ks),scale:H(et)}),st=I(W,["color","width"]),tt=I(W,{color:H(Ks),width:H(jm)}),Ss=I(W,{LinearRing:H(Ys)}),Qs=I(W,{LineString:H(Ys),Point:H(Ys),Polygon:H(at),GeometryCollection:H(Ls)}),Xs=I(W,"name open visibility address phoneNumber description styleUrl Style".split(" ")),Vs=I(W,{ExtendedData:H(function(a,
b,d){a={node:a};var e=b.names;b=b.values;for(var f=e.length,g=0;g<f;g++)jh(a,jt,ut,[{name:e[g],value:b[g]}],d)}),MultiGeometry:H(Ls),LineString:H(Ys),LinearRing:H(Ys),Point:H(Ys),Polygon:H(at),Style:H(function(a,b,d){a={node:a};var e={},f=b.la(),g=b.pa(),h=b.ea();b=b.za();h instanceof bi&&(e.IconStyle=h);b&&(e.LabelStyle=b);g&&(e.LineStyle=g);f&&(e.PolyStyle=f);b=vt[d[d.length-1].node.namespaceURI];e=hh(e,b);jh(a,wt,gh,e,d,b)}),address:H(im),description:H(im),name:H(im),open:H(hm),phoneNumber:H(im),
styleUrl:H(im),visibility:H(hm)}),Zs=I(W,{coordinates:H(function(a,b,d){d=d[d.length-1];var e=d.layout;d=d.stride;var f;"XY"==e||"XYM"==e?f=2:"XYZ"==e||"XYZM"==e?f=3:Ja(!1,34);var g,h=b.length,k="";if(0<h){k+=b[0];for(e=1;e<f;++e)k+=","+b[e];for(g=d;g<h;g+=d)for(k+=" "+b[g],e=1;e<f;++e)k+=","+b[g+e]}im(a,k)})}),bt=I(W,{outerBoundaryIs:H(Rs),innerBoundaryIs:H(Rs)}),xt=I(W,{color:H(Ks)}),vt=I(W,["IconStyle","LabelStyle","LineStyle","PolyStyle"]),wt=I(W,{IconStyle:H(function(a,b,d){a={node:a};var e=
{},f=b.g.o,g=b.ha(),h=b.cg(),f={href:f};if(g){f.w=g[0];f.h=g[1];var k=b.fe(),l=b.Fe();l&&h&&l[0]&&l[1]!==g[1]&&(f.x=l[0],f.y=h[1]-(l[1]+g[1]));k&&k[0]&&k[1]!==g[1]&&(e.hotSpot={x:k[0],ih:"pixels",y:g[1]-k[1],jh:"pixels"})}e.Icon=f;g=b.Ha();1!==g&&(e.scale=g);(b=b.j)&&(e.heading=b);b=nt[d[d.length-1].node.namespaceURI];e=hh(e,b);jh(a,pt,gh,e,d,b)}),LabelStyle:H(function(a,b,d){a={node:a};var e={},f=b.la();f&&(e.color=f.qa());(b=b.Ha())&&1!==b&&(e.scale=b);b=qt[d[d.length-1].node.namespaceURI];e=hh(e,
b);jh(a,rt,gh,e,d,b)}),LineStyle:H(function(a,b,d){a={node:a};var e=st[d[d.length-1].node.namespaceURI];b=hh({color:b.qa(),width:b.c},e);jh(a,tt,gh,b,d,e)}),PolyStyle:H(function(a,b,d){jh({node:a},xt,yt,[b.qa()],d)})});function ot(a,b,d){return Ug(Sr[0],"gx:"+d)}function ht(a,b){return Ug(b[b.length-1].node.namespaceURI,"Placemark")}function Ms(a,b){if(a)return Ug(b[b.length-1].node.namespaceURI,kt[a.getType()])}
var yt=eh("color"),$s=eh("coordinates"),ut=eh("Data"),Ws=eh("ExtendedData"),ct=eh("innerBoundaryIs"),Ns=eh("Point"),Os=eh("LineString"),Ts=eh("LinearRing"),Ps=eh("Polygon"),dt=eh("outerBoundaryIs");
Cr.prototype.Hd=function(a,b){b=pd(this,b);var d=Ug(W[4],"kml");d.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:gx",Sr[0]);d.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xsi","http://www.w3.org/2001/XMLSchema-instance");d.setAttributeNS("http://www.w3.org/2001/XMLSchema-instance","xsi:schemaLocation","http://www.opengis.net/kml/2.2 https://developers.google.com/kml/schema/kml22gx.xsd");var e={node:d},f={};1<a.length?f.Document=a:1==a.length&&(f.Placemark=a[0]);a=ft[d.namespaceURI];
f=hh(f,a);jh(e,it,gh,f,[b],a,this);return d};function X(a,b){this.$filter_=b;this.f=void 0;a.has("ngeoMeasureDecimals")&&(this.f=a.get("ngeoMeasureDecimals"));this.b=a.get("$filter")("ngeoUnitPrefix");this.g=null;this.i=[];if(a.has("ngeoPointfilter")){b=a.get("ngeoPointfilter").split(":");var d=b.shift();this.g=this.$filter_(d);this.i=b}else this.g=null;this.j=a.get("ngeoDownload")}X.$inject=["$injector","$filter"];X.prototype.Tb=function(a){this.c=a};X.prototype.setProjection=X.prototype.Tb;
X.prototype.setStyle=function(a,b){var d=this.getStyle(a);b&&(b=this.getType(a),yd(["LineString","Polygon","Rectangle"],b)&&d.push(this.Dc()),d.unshift(zt(this,a)));a.setStyle(d)};X.prototype.setStyle=X.prototype.setStyle;
X.prototype.getStyle=function(a){var b;switch(this.getType(a)){case "LineString":var d=this.oe(a);b=this.gd(a);var e=this.fd(a),d={stroke:new dd({color:e,width:d})};b&&(d.text=At({text:this.Bc(a)}));b=new D(d);break;case "Point":b=this.hd(a);d=this.fd(a);d={image:new bd({radius:b,fill:new cd({color:d})})};this.gd(a)&&(d.text=At({text:this.Bc(a),offsetY:-(b+9)}));b=new D(d);break;case "Circle":case "Polygon":case "Rectangle":b=this.oe(a);var f=this.gi(a),d=this.fd(a),g=this.gd(a),e=d.slice();e[3]=
f;var f=a.get("z"),h=[new D({fill:new cd({color:e}),stroke:new dd({color:d,width:b})})];g&&(void 0!==f?(a=Bt(a,f),g=lq(a,this.c,0,this.b),h.push(new D({geometry:a,fill:new cd({color:e}),stroke:new dd({color:d,width:b}),text:At({text:g,angle:(f%180+180)%180-90})})),h.push(new D({geometry:new ij(Ld(a)),text:At({text:f+"\u00b0",size:10,offsetX:20*Math.cos((f-90)*Math.PI/180),offsetY:20*Math.sin((f-90)*Math.PI/180)})}))):h.push(new D({text:At({text:this.Bc(a)})})));b=h;break;case "Text":b=new D({text:At({text:this.eg(a),
size:this.hd(a),angle:this.Vf(a),color:this.fd(a)})})}var k;b.constructor===Array?k=b:k=[b];return k};X.prototype.getStyle=X.prototype.getStyle;
X.prototype.Gh=function(a){var b=[255,255,255,1],d=[0,153,255,1],e=[];a=a.getGeometry();console.assert(a);a=a.getType();"Point"===a?e.push(new D({image:new bd({radius:6,fill:new cd({color:d}),stroke:new dd({color:b,width:1.5})}),zIndex:Infinity})):("LineString"===a?(e.push(new D({stroke:new dd({color:b,width:5})})),e.push(new D({stroke:new dd({color:d,width:3})}))):e.push(new D({stroke:new dd({color:d,width:1.5}),fill:new cd({color:[255,255,255,.5]})})),e.push(this.Dc(!0)));return e};
X.prototype.createEditingStyles=X.prototype.Gh;
X.prototype.Dc=function(a){a=void 0!==a?a:!0;var b={image:new $c({radius:6,points:4,angle:Math.PI/4,fill:new cd({color:[255,255,255,.5]}),stroke:new dd({color:[0,0,0,1]})})};a&&(b.geometry=function(a){a=a.getGeometry();if("Point"!=a.getType()){var b,d=[],g=[],h,k;a instanceof ge?g=a.J():a instanceof yl?d=a.J():a instanceof lj?g=a.J()[0]:a instanceof El&&(b=a.J());if(b)for(h=0,k=b.length;h<k;h++)d=d.concat(b[h]);h=0;for(k=d.length;h<k;h++)g=g.concat(d[h]);return g.length?new Cl(g):a}});return new D(b)};
X.prototype.getVertexStyle=X.prototype.Dc;function zt(a,b){var d;switch(a.getType(b)){case "Point":a=a.hd(b);d=new D({image:new bd({radius:a+3,fill:new cd({color:[255,255,255,1]})})});break;case "LineString":case "Circle":case "Polygon":case "Rectangle":a=a.oe(b);d=new D({stroke:new dd({color:[255,255,255,1],width:a+6})});break;case "Text":d=new D({text:At({text:a.eg(b),size:a.hd(b),angle:a.Vf(b),width:9})})}return d}X.prototype.ge=function(a){var b=db(a);delete b.boundedBy;delete b[a.b];return b};
X.prototype.getFilteredFeatureValues=X.prototype.ge;X.prototype.Vf=function(a){return+a.get("a")};X.prototype.getAngleProperty=X.prototype.Vf;X.prototype.Yf=function(a){return a.get("c")};X.prototype.getColorProperty=X.prototype.Yf;X.prototype.fd=function(a){return Ec(this.Yf(a))};X.prototype.getRGBAColorProperty=X.prototype.fd;X.prototype.eg=function(a){return a.get("n")};X.prototype.getNameProperty=X.prototype.eg;X.prototype.gi=function(a){a=a.get("o");return void 0!==a?+a:1};
X.prototype.getOpacityProperty=X.prototype.gi;X.prototype.gd=function(a){a=a.get("m");void 0===a?a=!1:"string"===typeof a&&(a="true"===a?!0:!1);hn(a);return a};X.prototype.getShowMeasureProperty=X.prototype.gd;X.prototype.hd=function(a){return+a.get("s")};X.prototype.getSizeProperty=X.prototype.hd;X.prototype.oe=function(a){return+a.get("k")};X.prototype.getStrokeProperty=X.prototype.oe;X.prototype.Pf=function(a,b){switch(b){case Ct:this.Sh(a);break;case Dt:this.Th(a)}};X.prototype["export"]=X.prototype.Pf;
X.prototype.Sh=function(a){var b=new Tq;Et(this,a,b,"export.gpx","application/gpx+xml")};X.prototype.exportGPX=X.prototype.Sh;X.prototype.Th=function(a){var b=new Cr;Et(this,a,b,"export.kml","application/vnd.google-earth.kml+xml")};X.prototype.exportKML=X.prototype.Th;function Et(a,b,d,e,f){f=void 0!==f?f:"text/plain";var g=[],h;b.forEach(function(a){h=new jd(db(a));this.setStyle(h,!1);g.push(h)},a);b=d.writeFeatures(g,a.c?{Mb:"EPSG:4326",ib:a.c}:{});a.j(b,e,f+";charset=utf-8")}
function At(a){a.angle&&(a.rotation=(void 0!==a.angle?a.angle:0)*Math.PI/180,delete a.angle);a.font=["normal",(a.size||10)+"pt","Arial"].join(" ");a.color&&(a.fill=new cd({color:a.color||[0,0,0,1]}),delete a.color);a.stroke=new dd({color:[255,255,255,1],width:a.width||3});delete a.width;return new Br(a)}
X.prototype.Bc=function(a){var b=a.getGeometry(),d="";b instanceof lj?"Circle"===this.getType(a)?(b=a.get("z"),a=Bt(a,b),d=Lq(a,this.c,this.b)):d=kq(b,this.c,0,this.b):b instanceof ge?d=lq(b,this.c,0,this.b):b instanceof ij&&(null===this.g?(a=this.f,d=b.J(),b=d[0],d=d[1],a=void 0!==a?a:0,b=ye(b,0,a),d=ye(d,0,a),d=["X: ",b,", Y: ",d].join("")):(a=b.J(),b=this.i.slice(0),b.unshift(a),d=this.g.apply(this,[].concat(la(b)))));return d};X.prototype.getMeasure=X.prototype.Bc;
X.prototype.getType=function(a){var b=a.getGeometry(),d;b instanceof ij?d=a.get("t")?"Text":"Point":b instanceof Cl?d="MultiPoint":b instanceof lj?d=a.get("l")?"Circle":a.get("r")?"Rectangle":"Polygon":b instanceof El?d="MultiPolygon":b instanceof ge?d="LineString":b instanceof yl&&(d="MultiLineString");return d};X.prototype.getType=X.prototype.getType;
X.prototype.vj=function(a,b,d){d=void 0!==d?d:250;var e=b.ha();b=O(b);e=Aj(b,e);a=a.getGeometry();a.qb(e)||(e=b.getCenter(),b.animate({center:e,duration:d}),a=a instanceof ge?je(a):a instanceof lj?(new ij(Ue(a))).J():a instanceof ij?a.J():zb(a.H()),b.animate({center:a,duration:d}))};X.prototype.panMapToFeature=X.prototype.vj;function Bt(a,b){a=a.getGeometry();var d=a.H(),d=(d[3]-d[1])/2;a=zb(a.H());return new ge([a,[Math.cos((b-90)*Math.PI/180)*d+a[0],-Math.sin((b-90)*Math.PI/180)*d+a[1]]])}
X.prototype.dd=function(a){var b=a.b,d={};a=db(a);for(var e in a)e!==b&&(d[e]=a[e]);return d};X.prototype.getNonSpatialProperties=X.prototype.dd;X.prototype.wf=function(a){var b=a.b,d=db(a),e;for(e in d)e!==b&&a.set(e,void 0)};X.prototype.clearNonSpatialProperties=X.prototype.wf;S.service("ngeoFeatureHelper",X);var Ct="GPX",Dt="KML";Ea("ngeo.FeatureHelper.FormatType",{GPX:Ct,KML:Dt});function Ft(a){this.o=!0===a.active;this.expression=void 0!==a.expression?a.expression:null;this.s=void 0!==a.lowerBoundary?a.lowerBoundary:null;this.B=a.operator||null;this.u=void 0!==a.upperBoundary?a.upperBoundary:null;this.C=!1!==a.isCustom;this.D=a.name;this.G=a.operators||null;this.ia=a.propertyName;this.O=a.type;this.i=[]}Ft.prototype.getExpression=function(){return this.expression};Ft.prototype.getExpression=Ft.prototype.getExpression;
Ft.prototype.setExpression=function(a){this.expression=a};Ft.prototype.setExpression=Ft.prototype.setExpression;Ft.prototype.reset=function(){null!==this.getExpression()&&this.setExpression(null);null!==this.lowerBoundary&&(this.lowerBoundary=null);null!==this.upperBoundary&&(this.upperBoundary=null)};Ft.prototype.reset=Ft.prototype.reset;Ft.prototype.destroy=function(){Za(this.i);this.i.length=0};Ft.prototype.destroy=Ft.prototype.destroy;
ca.Object.defineProperties(Ft.prototype,{active:{configurable:!0,enumerable:!0,get:function(){return this.o},set:function(a){this.o=a}},lowerBoundary:{configurable:!0,enumerable:!0,get:function(){return this.s},set:function(a){this.s=a}},operator:{configurable:!0,enumerable:!0,get:function(){return this.B},set:function(a){this.B=a}},upperBoundary:{configurable:!0,enumerable:!0,get:function(){return this.u},set:function(a){this.u=a}},isCustom:{configurable:!0,enumerable:!0,get:function(){return this.C}},
name:{configurable:!0,enumerable:!0,get:function(){return this.D}},operators:{configurable:!0,enumerable:!0,get:function(){return this.G}},propertyName:{configurable:!0,enumerable:!0,get:function(){return this.ia}},type:{configurable:!0,enumerable:!0,get:function(){return this.O}},value:{configurable:!0,enumerable:!0,get:function(){var a=null,b=this.getExpression(),d=this.lowerBoundary,e=this.operator,f=this.propertyName,g=this.upperBoundary;e&&(e===Gt?null!==d&&null!==g&&(a={operator:e,lowerBoundary:d,
propertyName:f,upperBoundary:g}):null!==b&&(a={expression:b,operator:e,propertyName:f}));return a}}});var Gt="..";function Ht(a){a.type="geometry";Ft.call(this,a);this.c=new jd(a.featureProperties||{});this.f=new Il;this.b=this.j=!1;this.g=null;this.i.push(B(this.c,cb(this.feature.b),this.N,this));It(this)}ma(Ht,Ft);Ht.prototype.setExpression=function(a){this.j=!0;Ft.prototype.setExpression.call(this,a);this.b||It(this);Jt(this);this.j=!1};Ht.prototype.N=function(){if(!this.j){this.b=!0;var a=this.c.getGeometry();a?this.expression=this.f.writeGeometry(a):this.expression=null;Jt(this);this.b=!1}};
Ht.prototype.R=function(a){a=a.target;this.b=!0;this.expression=this.f.writeGeometry(a);this.b=!1};function It(a){var b=null;a.expression&&(b=a.f.readGeometry(a.expression));a.geometry=b}function Jt(a){null!==a.g&&(Za(a.g),a.g=null);var b=a.c.getGeometry();b&&(a.g=B(b,"change",a.R,a))}ca.Object.defineProperties(Ht.prototype,{feature:{configurable:!0,enumerable:!0,get:function(){return this.c}},geometry:{configurable:!0,enumerable:!0,get:function(){return this.c.getGeometry()||null},set:function(a){this.c.setGeometry(a)}}});function Kt(a){a.operator="=";a.type="select";Ft.call(this,a);this.c=a.choices}ma(Kt,Ft);ca.Object.defineProperties(Kt.prototype,{choices:{configurable:!0,enumerable:!0,get:function(){return this.c}},selectedChoices:{configurable:!0,enumerable:!0,get:function(){var a;this.expression?a=String(this.expression).split(","):a=[];return a}}});function Lt(a){a.operator=a.operator||"~";a.type="text";Ft.call(this,a)}ma(Lt,Ft);function Mt(a,b){this.ga=a;this.ngeoFeatureHelper_=b}Mt.prototype.pl=function(a,b){var d=[];a=ka(a);for(var e=a.next();!e.done;e=a.next())d.push(this.be(e.value,b));return d};Mt.prototype.createRulesFromAttributes=Mt.prototype.pl;
Mt.prototype.be=function(a,b){b=!0===b;var d=this.ga.getString(a.name);switch(a.type){case "date":case "datetime":a=b?new Ft({name:d,operator:"=",operators:"= > >= < <= !=".split(" "),propertyName:a.name,type:a.type}):new Ft({name:d,operator:Gt,propertyName:a.name,type:a.type});break;case "geometry":a=new Ht({name:d,operator:"within",operators:["contains","intersects","within"],propertyName:a.name,type:a.type});break;case "number":a=b?new Ft({name:d,operator:"=",operators:"= > >= < <= !=".split(" "),
propertyName:a.name,type:"number"}):new Ft({name:d,operator:Gt,propertyName:a.name,type:"number"});break;case "select":a=new Kt({choices:a.choices,name:d,propertyName:a.name});break;default:a=b?new Lt({name:d,operator:"~",operators:["~","=","!="],propertyName:a.name}):new Lt({name:d,operator:"~",propertyName:a.name})}return a};Mt.prototype.createRuleFromAttribute=Mt.prototype.be;Mt.prototype.Cf=function(a){var b=[];a=ka(a);for(var d=a.next();!d.done;d=a.next())b.push(this.Jh(d.value));return b};
Mt.prototype.createRules=Mt.prototype.Cf;Mt.prototype.Jh=function(a){switch(a.type){case "date":case "datetime":a=new Ft(a);break;case "geometry":a=new Ht(a);break;case "select":a=new Kt(a);break;default:a=new Lt(a)}return a};Mt.prototype.createRule=Mt.prototype.Jh;
Mt.prototype.Ch=function(a){var b,d=a.getExpression();null===d&&(d=void 0);d={expression:d,isCustom:a.isCustom,lowerBoundary:null!==a.lowerBoundary?a.lowerBoundary:void 0,name:a.name,operator:null!==a.operator?a.operator:void 0,operators:a.operators?a.operators.slice(0):void 0,propertyName:a.propertyName,type:null!==a.type?a.type:void 0,upperBoundary:null!==a.upperBoundary?a.upperBoundary:void 0};a instanceof Ht?(b=new Ht(d),b.feature.Ea(this.ngeoFeatureHelper_.dd(a.feature))):a instanceof Kt?(d.choices=
a.choices.slice(0),b=new Kt(d)):a instanceof Lt?b=new Lt(d):b=new Ft(d);return b};Mt.prototype.cloneRule=Mt.prototype.Ch;Mt.prototype.Qf=function(a,b){b.getExpression()!==a.getExpression()&&b.setExpression(a.getExpression());b.lowerBoundary!==a.lowerBoundary&&(b.lowerBoundary=a.lowerBoundary);b.operator!==a.operator&&(b.operator=a.operator);b.upperBoundary!==a.upperBoundary&&(b.upperBoundary=a.upperBoundary);a instanceof Ht&&b instanceof Ht&&(this.ngeoFeatureHelper_.wf(b.feature),b.feature.Ea(this.ngeoFeatureHelper_.dd(a.feature)))};
Mt.prototype.extendRule=Mt.prototype.Qf;Mt.prototype.Qg=function(a){var b=this;return a.map(function(a){return b.Tj(a)})};Mt.prototype.serializeRules=Mt.prototype.Qg;
Mt.prototype.Tj=function(a){var b={name:a.name,propertyName:a.propertyName,type:a.type};null!==a.expression&&(b.expression=a.expression);null!==a.lowerBoundary&&(b.lowerBoundary=a.lowerBoundary);null!==a.operator&&(b.operator=a.operator);null!==a.operators&&(b.operators=a.operators.slice(0));null!==a.upperBoundary&&(b.upperBoundary=a.upperBoundary);a instanceof Ht&&(b.featureProperties=this.ngeoFeatureHelper_.dd(a.feature));a instanceof Kt&&(b.choices=a.choices);return b};
Mt.prototype.serializeRule=Mt.prototype.Tj;
Mt.prototype.Zd=function(a,b,d){var e=null,f=d||a.filterRules;d=[];if(f&&f.length)for(var f=ka(f),g=f.next();!g.done;g=f.next()){var h=g.value,k=a,l=b,n=null,p=h.value;if(p){var q=p.expression,r=p.lowerBoundary,t=p.operator,g=p.propertyName,p=p.upperBoundary,C=["contains","intersects","within"],x=[">",">=","<","<="];if(h instanceof Kt)if(l=h.selectedChoices,1===l.length)n=tp(g,l[0]);else{if(2<=l.length){n=[];l=ka(l);for(t=l.next();!t.done;t=l.next())n.push(tp(g,t.value));n=sp.apply(null,n)}}else yd(C,
t)?(g=k.geometryName,h=h.geometry,"contains"===t?n=new hp("Contains",g,h,l):"intersects"===t?n=new ip(g,h,l):"within"===t&&(n=new qp(g,h,l))):yd(x,t)?">"===t?n=new fp(g,q):">="===t?n=new gp(g,q):"<"===t?n=new lp(g,q):"<="===t&&(n=new mp(g,q)):t===Gt?n=new jp(g,r,p):"="===t?n=tp(g,q):"~"===t?n=new kp(g,String(q),void 0,void 0,void 0,void 0):"!="===t&&(n=new op(g,q,void 0));g=n}else g=null;g&&d.push(g)}a=a.filterCondition;1===d.length?e=d[0]:2<=d.length&&("&&"===a||"!"===a?e=rp.apply(null,d):"||"===
a&&(e=sp.apply(null,d)));e&&"!"===a&&(e=new np(e));return e};Mt.prototype.createFilter=Mt.prototype.Zd;Mt.prototype.Bf=function(a,b,d){var e=null;if(a=this.Zd(a,b,d))e=Ug("http://www.opengis.net/ogc","Filter"),jh({node:e},Bp,eh(a.Ib),[a],[]),e=(new XMLSerializer).serializeToString(e);return e};Mt.prototype.createFilterString=Mt.prototype.Bf;Mt.$inject=["gettextCatalog","ngeoFeatureHelper"];S.service("ngeoRuleHelper",Mt);function Nt(a,b,d,e,f,g,h){this.o=a;this.Pa=b;this.s=d;this.b=e;this.aa=f;this.i=g;this.j=h;this.f={};this.c={};this.g=null;B(this.b,"change",this.B,this)}
Nt.prototype.B=function(){var a=this;this.i.clear();Ka(this.f);this.g&&this.g();Ot(this);this.b.ed().then(function(b){var d=a.b.Gb().then(function(d){d=ka(d);for(var e=d.next();!e.done;e=d.next())for(var e=ka(e.value.children),f=e.next();!f.done;f=e.next())f=f.value,Pt(a,f,f,b)}),e=io(a.b).then(function(d){d=ka(d);for(var e=d.next();!e.done;e=d.next())Pt(a,null,e.value,b)});a.o.all([d,e]).then(function(){a.g=a.Pa.$watchCollection(function(){if(a.aa.rootCtrl)return a.aa.rootCtrl.children},function(b){a.s(function(){if(b){for(var d=
[],e=function(a,b){b.node.children||a.push(b)},f=0,l=b.length;f<l;f++)b[f].Ma(e.bind(a,d));e=0;for(l=d.length;e<l;e++)f=d[e],a.c[f.node.id]||Qt(a,f);var l=a.c,n;for(n in a.c)yd(d,l[n].Ed)||Rt(a,l[n])}})})})})};
function Pt(a,b,d,e){var f=d.children;if(f){d=ka(f);for(var g=d.next();!g.done;g=d.next())Pt(a,b,g.value,e)}else if(a=a.f,f=d.id,!a[f]){var h=d.metadata,k=d.type,l,n,p,q,r,t;"WMTS"===k?(q=d.layer,r=d.url,l=h.maxResolution,n=h.minResolution,(t=h.queryLayers||h.wmsLayers)&&(g=t.split(",").map(function(a){return{maxResolution:l,minResolution:n,name:a,queryable:!0}})),h.ogcServer&&e[h.ogcServer]&&(p=e[h.ogcServer]),t=d.imageType):"WMS"===k&&(l=d.maxResolutionHint,n=d.minResolutionHint,g=d.childLayers.map(function(a){return{maxResolution:a.maxResolutionHint,
minResolution:a.minResolutionHint,name:a.name,queryable:a.queryable}}),p=e[!b||b.mixed?d.ogcServer:b.ogcServer],t=p.imageType);b=d.dimensions||b.dimensions;a[f]=new Qp({activeDimensions:b,copyable:h.copyable,dimensions:b,gmfLayer:d,id:f,identifierAttribute:h.identifierAttributeField,maxResolution:l,minResolution:n,name:d.name,ogcImageType:t,ogcLayers:g,ogcServerType:p?p.type:void 0,ogcType:k,snappable:!!h.snappingConfig,snappingTolerance:h.snappingConfig?h.snappingConfig.tolerance:void 0,snappingToEdges:h.snappingConfig?
h.snappingConfig.edge:void 0,snappingToVertice:h.snappingConfig?h.snappingConfig.vertex:void 0,visible:!0===h.isChecked,wfsUrl:p&&p.wfsSupport?p.urlWfs:void 0,wmsIsSingleTile:p?p.isSingleTile:void 0,wmsUrl:p?p.url:void 0,wmtsLayer:q,wmtsUrl:r})}}function Qt(a,b){var d=b.node.id,e=a.f[d];b.Sg(e);var f=a.Pa.$watch(function(){return b.getState()},a.u.bind(a,b)),g=a.Pa.$watch(function(){var a=e.visible;return null!==e.filterRules&&a},a.C.bind(a,e));a.c[d]={Gl:g,Yg:f,Ed:b};a.i.push(e)}
function Rt(a,b){var d=b.Ed.Fb();a.i.remove(d);b.Ed.Sg(null);b.Gl();b.Yg();delete a.c[""+d.id]}function Ot(a){for(var b in a.c)Rt(a,a.c[b])}Nt.prototype.u=function(a,b){a.Fb().visible="on"===b};
Nt.prototype.C=function(a){if(!0===a.filtrable&&a.ogcType===Lp){var b=this.c[String(a.id)].Ed,d=E(Zp(b)),e=a.ag(),b=O(b.map).getProjection().Ca;a=this.j.Bf(a,b);b=null;if(a)if(b=d.f.LAYERS.split(","),1===b.length)b=a;else{for(var f=[],g=0,h=b.length;g<h;g++)b[g]===e?f.push("("+a+")"):f.push("()");b=f.join("")}e={};d.updateParams((e.FILTER=b,e))}};Nt.$inject="$q $rootScope $timeout gmfThemes gmfTreeManager ngeoDataSources ngeoRuleHelper".split(" ");T.service("gmfDataSourcesManager",Nt);S.value("ngeoPopupTemplateUrl",function(a,b){a=b.ngeoPopupTemplateurl;return void 0!==a?a:"ngeo/popup.html"});function St(a){return{restrict:"A",templateUrl:a,link:function(a,d){d.addClass("popover");a.close=function(a){a&&(a.stopPropagation(),a.preventDefault());d.addClass("hidden")};a.$watch("open",function(a){d.css("display",a?"block":"none")})}}}St.$inject=["ngeoPopupTemplateUrl"];S.directive("ngeoPopup",St);function Tt(a,b,d,e){var f=this;this.scope=b.$new(!0);this.scope.$watch(function(){return f.scope.open},function(a){!a&&f.g&&f.f(function(){f.destroy()})});this.b=d;this.f=e;this.c=angular.element("<div ngeo-popup></div>");this.g=!1;a(this.c)(this.scope);angular.element(document.body).append(this.c)}Tt.prototype.hi=function(){return this.scope.open};Tt.prototype.getOpen=Tt.prototype.hi;Tt.prototype.yd=function(a){this.scope.open=a};Tt.prototype.setOpen=Tt.prototype.yd;
Tt.prototype.destroy=function(){this.scope.$destroy();this.c.remove()};Tt.prototype.destroy=Tt.prototype.destroy;Tt.prototype.setTitle=function(a){a=this.b.trustAsHtml(a);this.scope.title=a};Tt.prototype.setTitle=Tt.prototype.setTitle;Tt.prototype.setContent=function(a,b){this.scope.content=b?this.b.trustAsHtml(a):a};Tt.prototype.setContent=Tt.prototype.setContent;Tt.prototype.setUrl=function(a){a=this.b.trustAsHtml('<iframe src="'+a+'" width="100%" height="100%"></iframe>');this.setContent(a)};
Tt.prototype.setUrl=Tt.prototype.setUrl;Tt.prototype.Ad=function(a){this.c.width(a)};Tt.prototype.setWidth=Tt.prototype.Ad;Tt.prototype.Se=function(a){this.c.height(a)};Tt.prototype.setHeight=Tt.prototype.Se;Tt.prototype.Te=function(a,b){this.Ad(a);this.Se(b)};Tt.prototype.setSize=Tt.prototype.Te;Tt.prototype.Rg=function(a){this.g=a};Tt.prototype.setAutoDestroy=Tt.prototype.Rg;Tt.prototype.addClass=function(a){this.c.addClass(a)};Tt.prototype.addClass=Tt.prototype.addClass;
Tt.prototype.open=function(a){a.url?this.setUrl(a.url):a.content?this.setContent(a.content):gn('ngeo.Popup options requirest "url" or "content".');void 0!==a.autoDestroy&&this.Rg(a.autoDestroy);void 0!==a.cls&&this.addClass(a.cls);void 0!==a.height&&this.Se(a.height);void 0!==a.title&&this.setTitle(a.title);void 0!==a.width&&this.Ad(a.width);this.yd(!0)};Tt.prototype.open=Tt.prototype.open;function Ut(a,b,d,e){return function(){return new Tt(a,b,d,e)}}Ut.$inject=["$compile","$rootScope","$sce","$timeout"];
S.factory("ngeoCreatePopup",Ut);function Vt(a,b,d){this.j=a;this.ga=b;this.i=d;a=angular.element('<div class="ngeo-disclaimer"></div>');angular.element(document.body).append(a);this.f=a;this.c={}}u(Vt,jn);Vt.$inject=["$sce","gettextCatalog","ngeoCreatePopup"];Vt.prototype.alert=function(a){this.show(a)};Vt.prototype.alert=Vt.prototype.alert;Vt.prototype.close=function(a){kn(this,a).forEach(this.b,this)};Vt.prototype.close=Vt.prototype.close;
Vt.prototype.g=function(a){var b=this,d=a.type,e=a.msg+"-"+a.type;if(void 0===this.c[e])if(!0===a.popup){var f=this.i(),d=this.j.trustAsHtml(a.msg);f.open({autoDestroy:!0,content:d,title:"&nbsp;"});f.scope.$watch("open",function(d){d||b.b(a)});this.c[e]=f}else{var g=["alert","fade","alert-dismissible"];switch(d){case "error":g.push("alert-danger");break;case "information":g.push("alert-info");break;case "success":g.push("alert-success");break;case "warning":g.push("alert-warning")}var d=angular.element('<div role="alert" class="'+
g.join(" ")+'"></div>'),g=angular.element('<button type="button" class="close" data-dismiss="alert" aria-label="'+this.ga.getString("Close")+'"><span aria-hidden="true" class="fa fa-times"></span></button>'),h=angular.element("<span />").html(a.msg);d.append(g).append(h);a.target?f=angular.element(a.target):f=this.f;f.append(d);d.addClass("in");d.on("closed.bs.alert",function(){b.b(a)});this.c[e]=d}};
Vt.prototype.b=function(a){a=a.msg+"-"+a.type;var b=this.c[a];void 0!==b&&(b instanceof Tt?b.hi()&&b.yd(!1):b.hasClass("in")&&b.alert("close"),delete this.c[a])};S.service("ngeoDisclaimer",Vt);var Wt=Array.prototype.indexOf?function(a,b,d){return Array.prototype.indexOf.call(a,b,d)}:function(a,b,d){d=null==d?0:0>d?Math.max(0,a.length+d):d;if(ua(a))return ua(b)&&1==b.length?a.indexOf(b,d):-1;for(;d<a.length;d++)if(d in a&&a[d]===b)return d;return-1},Xt=Array.prototype.forEach?function(a,b,d){Array.prototype.forEach.call(a,b,d)}:function(a,b,d){for(var e=a.length,f=ua(a)?a.split(""):a,g=0;g<e;g++)g in f&&b.call(d,f[g],g,a)},Yt=Array.prototype.filter?function(a,b,d){return Array.prototype.filter.call(a,
b,d)}:function(a,b,d){for(var e=a.length,f=[],g=0,h=ua(a)?a.split(""):a,k=0;k<e;k++)if(k in h){var l=h[k];b.call(d,l,k,a)&&(f[g++]=l)}return f};function Zt(a){var b=a.length;if(0<b){for(var d=Array(b),e=0;e<b;e++)d[e]=a[e];return d}return[]}function $t(a,b,d){return 2>=arguments.length?Array.prototype.slice.call(a,b):Array.prototype.slice.call(a,b,d)};var au;a:{var bu=oa.navigator;if(bu){var cu=bu.userAgent;if(cu){au=cu;break a}}au=""};function du(a,b,d){for(var e in a)b.call(d,a[e],e,a)}function eu(a,b){for(var d in a)if(b.call(void 0,a[d],d,a))return!0;return!1}var fu="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function gu(a,b){for(var d,e,f=1;f<arguments.length;f++){e=arguments[f];for(d in e)a[d]=e[d];for(var g=0;g<fu.length;g++)d=fu[g],Object.prototype.hasOwnProperty.call(e,d)&&(a[d]=e[d])}};function hu(a){hu[" "](a);return a}hu[" "]=function(){};function iu(a,b){var d=ju;return Object.prototype.hasOwnProperty.call(d,a)?d[a]:d[a]=b(a)};var ku=-1!=au.indexOf("Opera"),lu=-1!=au.indexOf("Trident")||-1!=au.indexOf("MSIE"),mu=-1!=au.indexOf("Edge"),nu=-1!=au.indexOf("Gecko")&&!(-1!=au.toLowerCase().indexOf("webkit")&&-1==au.indexOf("Edge"))&&!(-1!=au.indexOf("Trident")||-1!=au.indexOf("MSIE"))&&-1==au.indexOf("Edge"),ou=-1!=au.toLowerCase().indexOf("webkit")&&-1==au.indexOf("Edge"),pu=-1!=au.indexOf("Macintosh");function qu(){var a=oa.document;return a?a.documentMode:void 0}var ru;
a:{var su="",tu=function(){var a=au;if(nu)return/rv\:([^\);]+)(\)|;)/.exec(a);if(mu)return/Edge\/([\d\.]+)/.exec(a);if(lu)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a);if(ou)return/WebKit\/(\S+)/.exec(a);if(ku)return/(?:Version)[ \/]?(\S+)/.exec(a)}();tu&&(su=tu?tu[1]:"");if(lu){var uu=qu();if(null!=uu&&uu>parseFloat(su)){ru=String(uu);break a}}ru=su}var ju={};
function vu(a){return iu(a,function(){for(var b=0,d=Wm(String(ru)).split("."),e=Wm(String(a)).split("."),f=Math.max(d.length,e.length),g=0;!b&&g<f;g++){var h=d[g]||"",k=e[g]||"";do{h=/(\d*)(\D*)(.*)/.exec(h)||["","","",""];k=/(\d*)(\D*)(.*)/.exec(k)||["","","",""];if(0==h[0].length&&0==k[0].length)break;b=en(0==h[1].length?0:parseInt(h[1],10),0==k[1].length?0:parseInt(k[1],10))||en(0==h[2].length,0==k[2].length)||en(h[2],k[2]);h=h[3];k=k[3]}while(!b)}return 0<=b})}var wu;var xu=oa.document;
wu=xu&&lu?qu()||("CSS1Compat"==xu.compatMode?parseInt(ru,10):5):void 0;var yu=!lu||9<=Number(wu),zu=!lu||9<=Number(wu),Au=lu&&!vu("9");function Bu(){0!=Cu&&(Du[xa(this)]=this);this.s=this.s;this.j=this.j}var Cu=0,Du={};Bu.prototype.s=!1;Bu.prototype.Ua=function(){if(!this.s&&(this.s=!0,this.ja(),0!=Cu)){var a=xa(this);delete Du[a]}};Bu.prototype.ja=function(){if(this.j)for(;this.j.length;)this.j.shift()()};function Eu(a){a&&"function"==typeof a.Ua&&a.Ua()};function Fu(a,b){this.type=a;this.c=this.target=b;this.defaultPrevented=this.g=!1;this.Rj=!0}Fu.prototype.stopPropagation=function(){this.g=!0};Fu.prototype.preventDefault=function(){this.defaultPrevented=!0;this.Rj=!1};function Gu(a,b){Fu.call(this,a?a.type:"");this.relatedTarget=this.c=this.target=null;this.button=this.screenY=this.screenX=this.clientY=this.clientX=this.offsetY=this.offsetX=0;this.key="";this.f=0;this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1;this.b=this.state=null;a&&this.Wa(a,b)}Fa(Gu,Fu);var Hu=[1,4,2];
Gu.prototype.Wa=function(a,b){var d=this.type=a.type,e=a.changedTouches?a.changedTouches[0]:null;this.target=a.target||a.srcElement;this.c=b;if(b=a.relatedTarget){if(nu){var f;a:{try{hu(b.nodeName);f=!0;break a}catch(g){}f=!1}f||(b=null)}}else"mouseover"==d?b=a.fromElement:"mouseout"==d&&(b=a.toElement);this.relatedTarget=b;null===e?(this.offsetX=ou||void 0!==a.offsetX?a.offsetX:a.layerX,this.offsetY=ou||void 0!==a.offsetY?a.offsetY:a.layerY,this.clientX=void 0!==a.clientX?a.clientX:a.pageX,this.clientY=
void 0!==a.clientY?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0);this.button=a.button;this.f=a.keyCode||0;this.key=a.key||"";this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.state=a.state;this.b=a;a.defaultPrevented&&this.preventDefault()};
Gu.prototype.stopPropagation=function(){Gu.Oc.stopPropagation.call(this);this.b.stopPropagation?this.b.stopPropagation():this.b.cancelBubble=!0};Gu.prototype.preventDefault=function(){Gu.Oc.preventDefault.call(this);var a=this.b;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,Au)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};var Iu="closure_listenable_"+(1E6*Math.random()|0),Ju=0;function Ku(a,b,d,e,f){this.listener=a;this.c=null;this.src=b;this.type=d;this.capture=!!e;this.te=f;this.key=++Ju;this.Mc=this.bc=!1}function Lu(a){a.Mc=!0;a.listener=null;a.c=null;a.src=null;a.te=null};function Mu(a){this.src=a;this.listeners={};this.c=0}Mu.prototype.add=function(a,b,d,e,f){var g=a.toString();a=this.listeners[g];a||(a=this.listeners[g]=[],this.c++);var h=Nu(a,b,e,f);-1<h?(b=a[h],d||(b.bc=!1)):(b=new Ku(b,this.src,g,!!e,f),b.bc=d,a.push(b));return b};
Mu.prototype.remove=function(a,b,d,e){a=a.toString();if(!(a in this.listeners))return!1;var f=this.listeners[a];b=Nu(f,b,d,e);return-1<b?(Lu(f[b]),Array.prototype.splice.call(f,b,1),f.length||(delete this.listeners[a],this.c--),!0):!1};function Ou(a,b){var d=b.type;if(d in a.listeners){var e=a.listeners[d],f=Wt(e,b),g;(g=0<=f)&&Array.prototype.splice.call(e,f,1);g&&(Lu(b),a.listeners[d].length||(delete a.listeners[d],a.c--))}}
Mu.prototype.removeAll=function(a){a=a&&a.toString();var b=0,d;for(d in this.listeners)if(!a||d==a){for(var e=this.listeners[d],f=0;f<e.length;f++)++b,Lu(e[f]);delete this.listeners[d];this.c--}return b};function Pu(a,b,d,e,f){a=a.listeners[b.toString()];b=-1;a&&(b=Nu(a,d,e,f));return-1<b?a[b]:null}Mu.prototype.hasListener=function(a,b){var d=pa(a),e=d?a.toString():"",f=pa(b);return eu(this.listeners,function(a){for(var g=0;g<a.length;++g)if(!(d&&a[g].type!=e||f&&a[g].capture!=b))return!0;return!1})};
function Nu(a,b,d,e){for(var f=0;f<a.length;++f){var g=a[f];if(!g.Mc&&g.listener==b&&g.capture==!!d&&g.te==e)return f}return-1};var Qu="closure_lm_"+(1E6*Math.random()|0),Ru={},Su=0;
function Tu(a,b,d,e,f){if(sa(b)){for(var g=0;g<b.length;g++)Tu(a,b[g],d,e,f);return null}d=Uu(d);if(a&&a[Iu])a=a.kb(b,d,e,f);else{if(!b)throw Error("Invalid event type");var g=!!e,h=Vu(a);h||(a[Qu]=h=new Mu(a));d=h.add(b,d,!1,e,f);if(!d.c){e=Wu();d.c=e;e.src=a;e.listener=d;if(a.addEventListener)a.addEventListener(b.toString(),e,g);else if(a.attachEvent)a.attachEvent(Xu(b.toString()),e);else throw Error("addEventListener and attachEvent are unavailable.");Su++}a=d}return a}
function Wu(){var a=Yu,b=zu?function(d){return a.call(b.src,b.listener,d)}:function(d){d=a.call(b.src,b.listener,d);if(!d)return d};return b}function Zu(a,b,d,e,f){if(sa(b))for(var g=0;g<b.length;g++)Zu(a,b[g],d,e,f);else d=Uu(d),a&&a[Iu]?a.Qc(b,d,e,f):a&&(a=Vu(a))&&(b=Pu(a,b,d,!!e,f))&&$u(b)}
function $u(a){if(!va(a)&&a&&!a.Mc){var b=a.src;if(b&&b[Iu])Ou(b.f,a);else{var d=a.type,e=a.c;b.removeEventListener?b.removeEventListener(d,e,a.capture):b.detachEvent&&b.detachEvent(Xu(d),e);Su--;(d=Vu(b))?(Ou(d,a),d.c||(d.src=null,b[Qu]=null)):Lu(a)}}}function Xu(a){return a in Ru?Ru[a]:Ru[a]="on"+a}function av(a,b,d,e){var f=!0;if(a=Vu(a))if(b=a.listeners[b.toString()])for(b=b.concat(),a=0;a<b.length;a++){var g=b[a];g&&g.capture==d&&!g.Mc&&(g=bv(g,e),f=f&&!1!==g)}return f}
function bv(a,b){var d=a.listener,e=a.te||a.src;a.bc&&$u(a);return d.call(e,b)}
function Yu(a,b){if(a.Mc)return!0;if(!zu){if(!b)a:{b=["window","event"];for(var d=oa,e;e=b.shift();)if(null!=d[e])d=d[e];else{b=null;break a}b=d}e=b;b=new Gu(e,this);d=!0;if(!(0>e.keyCode||void 0!=e.returnValue)){a:{var f=!1;if(!e.keyCode)try{e.keyCode=-1;break a}catch(h){f=!0}if(f||void 0==e.returnValue)e.returnValue=!0}e=[];for(f=b.c;f;f=f.parentNode)e.push(f);a=a.type;for(f=e.length-1;!b.g&&0<=f;f--){b.c=e[f];var g=av(e[f],a,!0,b),d=d&&g}for(f=0;!b.g&&f<e.length;f++)b.c=e[f],g=av(e[f],a,!1,b),
d=d&&g}return d}return bv(a,new Gu(b,this))}function Vu(a){a=a[Qu];return a instanceof Mu?a:null}var cv="__closure_events_fn_"+(1E9*Math.random()>>>0);function Uu(a){if("function"==ra(a))return a;a[cv]||(a[cv]=function(b){return a.handleEvent(b)});return a[cv]};function dv(){this.listenerKeys_={}}dv.prototype.ac=function(a,b,d){this.listenerKeys_[a]||ev(this,a);(void 0!==d?d:1)?this.listenerKeys_[a].Hb.push(b):this.listenerKeys_[a].Qb.push(b)};dv.prototype.addListenerKey=dv.prototype.ac;dv.prototype.Tc=function(a){ev(this,a)};dv.prototype.clearListenerKey=dv.prototype.Tc;
function ev(a,b){a.listenerKeys_[b]?(a.listenerKeys_[b].Qb.length&&(a.listenerKeys_[b].Qb.forEach(function(a){$u(a)},a),a.listenerKeys_[b].Qb.length=0),a.listenerKeys_[b].Hb.length&&(a.listenerKeys_[b].Hb.forEach(function(a){A(a)},a),a.listenerKeys_[b].Hb.length=0)):a.listenerKeys_[b]={Qb:[],Hb:[]}}S.service("ngeoEventHelper",dv);T.component("gmfDisclaimer",{controller:"GmfDisclaimerController as dclCtrl",bindings:{popup:"<?gmfDisclaimerPopup",map:"=gmfDisclaimerMap",external:"<?gmfDisclaimerExternal",visibility:"=?gmfDisclaimerExternalVisibility",msg:"=?gmfDisclaimerExternalMsg"}});function fv(a,b,d,e,f,g,h){this.visibility=!1;this.msgs_=[];this.j=d;this.f=a;this.g=f;this.c=g;this.i=h;this.b=null}fv.$inject="$element $scope $sce ngeoCreatePopup ngeoDisclaimer ngeoEventHelper ngeoLayerHelper".split(" ");m=fv.prototype;
m.$onInit=function(){this.b=this.i.he(this.map,"data");gv(this,this.b)};m.nm=function(a){gv(this,a.element)};m.om=function(a){this.fh(a.element)};
function gv(a,b){var d=v(b);b instanceof Rk?(a.c.ac(d,B(b.getLayers(),"add",a.nm,a)),a.c.ac(d,B(b.getLayers(),"remove",a.om,a)),b.getLayers().forEach(function(a){gv(this,a)},a)):(b=b.get("disclaimers"))&&Array.isArray(b)&&b.forEach(function(a){this.external?(0>this.msgs_.indexOf(a)&&this.msgs_.push(a),this.msg=""+this.j.trustAsHtml(this.msgs_.join("<br />")),this.visibility=!0):this.g.alert({popup:this.popup,msg:a,target:this.f,type:"warning"})},a)}
m.fh=function(a){var b=v(a);a instanceof Rk?(this.c.Tc(b),a.getLayers().forEach(this.fh,this)):(a=a.get("disclaimers"))&&Array.isArray(a)&&a.forEach(function(a){this.external?(this.visibility=!1,this.msgs_.length=0,this.msg=""):this.g.close({popup:this.popup,msg:a,target:this.f,type:"warning"})},this)};m.$onDestroy=function(){this.fh(this.b)};T.controller("GmfDisclaimerController",fv);function hv(){this.b={};this.c=[];this.g=new gl({Xb:!1});this.f=new gi({source:this.g,style:this.i.bind(this),Vb:!0,Wb:!0})}hv.prototype.oa=function(a,b){var d=v(a).toString();this.b[d]=b;this.c[b].features[d]=a;this.g.oa(a)};hv.prototype.na=function(a,b){var d=v(a).toString();delete this.b[d];delete this.c[b].features[d];this.g.na(a)};hv.prototype.clear=function(a){var b=this.c[a],d;for(d in b.features)this.na(b.features[d],a)};hv.prototype.xa=function(){return this.f};hv.prototype.getLayer=hv.prototype.xa;
hv.prototype.ob=function(){var a=this.c.length;this.c.push({ck:hd,features:{}});return new iv(this,a)};hv.prototype.getFeatureOverlay=hv.prototype.ob;hv.prototype.Wa=function(a){this.f.setMap(a)};hv.prototype.init=hv.prototype.Wa;hv.prototype.setStyle=function(a,b){this.c[b].ck=null===a?hd:fd(a)};hv.prototype.i=function(a,b){var d=v(a).toString();return this.c[this.b[d]].ck(a,b)};function iv(a,b){this.g=a;this.c=null;this.b=b}iv.prototype.oa=function(a){this.g.oa(a,this.b)};
iv.prototype.addFeature=iv.prototype.oa;iv.prototype.na=function(a){this.g.na(a,this.b)};iv.prototype.removeFeature=iv.prototype.na;iv.prototype.clear=function(){this.g.clear(this.b)};iv.prototype.clear=iv.prototype.clear;iv.prototype.pc=function(a){null!==this.c&&(this.c.clear(),Ta(this.c,"add",this.f,this),Ta(this.c,"remove",this.i,this));null!==a&&(a.forEach(function(a){this.oa(a)},this),B(a,"add",this.f,this),B(a,"remove",this.i,this));this.c=a};iv.prototype.setFeatures=iv.prototype.pc;
iv.prototype.setStyle=function(a){this.g.setStyle(a,this.b)};iv.prototype.setStyle=iv.prototype.setStyle;iv.prototype.f=function(a){this.oa(a.element)};iv.prototype.i=function(a){this.na(a.element)};S.service("ngeoFeatureOverlayMgr",hv);function jv(){}u(jv,$l);jv.prototype.b=function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType==Node.ELEMENT_NODE)return this.c(a);return null};jv.prototype.c=function(a){var b={};return b=J(b,kv,a,[])};function lv(a,b){for(var d={},e=0,f=a.attributes.length;e<f;e++){var g=a.attributes.item(e);d[g.name]=g.value}1===b.length&&(d.type=d.type.split(":").pop());return d}
var mv=[null,"http://www.w3.org/2001/XMLSchema"],kv=I(mv,{element:ch(lv),complexType:ch(function(a,b){var d=a.getAttribute("name");a=J({name:d},nv,a,b);a.complexContent=a.complexContent.extension.sequence.element;return a})}),nv=I(mv,{complexContent:F(function(a,b){return J({},ov,a,b)})}),ov=I(mv,{extension:F(function(a,b){return J({},pv,a,b)})}),pv=I(mv,{sequence:F(function(a,b){return J({},qv,a,b)})}),qv=I(mv,{element:ch(lv)});function rv(a,b,d){this.b=a;this.c=b;this.j=d;this.f=[]}
rv.prototype.vb=function(a){for(var b=[],d=a.map,e=ka(this.f),f=e.next();!f.done;f=e.next())f.value.resolve();this.f.length=0;for(var d=a.queryableDataSources?a.queryableDataSources:this.ig(a.dataSources,d),e=[],f=[],g=ka(d.wfs),h=g.next();!h.done;h=g.next())if(h=h.value,h.combinableForWFS){for(var k=!1,l=ka(e),n=l.next();!n.done;n=l.next())n=n.value,h.Dh(n[0])&&(n.push(h),k=!0);k||e.push([h])}else f.push([h]);b.push(sv(this,e.concat(f),a));if(a.coordinate){e=[];f=[];d=ka(d.wms);for(g=d.next();!g.done;g=
d.next())if(g=g.value,g.combinableForWMS){h=!1;k=ka(e);for(l=k.next();!l.done;l=k.next())l=l.value,g.Eh(l[0])&&(l.push(g),h=!0);h||e.push([g])}else f.push([g]);b.push(tv(this,e.concat(f),a))}return this.c.all(b).then(this.g.bind(this))};rv.prototype.issue=rv.prototype.vb;rv.prototype.ig=function(a,b){var d={wfs:[],wms:[]};b=O(b).S();a=ka(a);for(var e=a.next();!e.done;e=a.next())e=e.value,e.visible&&e.inRange&&e.queryable&&e.Ii(b,!0)&&(e.supportsWFS?d.wfs.push(e):d.wms.push(e));return d};
rv.prototype.getQueryableDataSources=rv.prototype.ig;rv.prototype.qk=function(a){var b=a.ke();a=Uh(a.wfsUrl,{REQUEST:"DescribeFeatureType",SERVICE:"WFS",VERSION:"2.0.0",TYPENAME:b});return this.b.get(a).then(function(a){return(new jv).read(a.data)})};rv.prototype.wfsDescribeFeatureType=rv.prototype.qk;rv.prototype.g=function(a){var b={};a=ka(a);for(var d=a.next();!d.done;d=a.next()){var d=d.value,e;for(e in d){var f=Number(e);b[f]=d[f]}}return b};
rv.prototype.i=function(a,b,d,e){var f={};a=ka(a);for(var g=a.next();!g.done;g=a.next()){var g=g.value,h,k=void 0,l=void 0;"number"===typeof e?(h=[],k=!0,l=e):h=d?g.wfsFormat.readFeatures(e.data):g.wmsFormat.readFeatures(e.data);var n=g.id;uv(h,g.id);f[n]={features:h,limit:b,tooManyFeatures:k,totalFeatureCount:l}}return f};
function sv(a,b,d){var e=[],f=d.limit,g=O(d.map),h=g.S(),g=g.getProjection().Ca,k=!0===d.wfsCount,l;if(l=d.coordinate){var n=d.tolerancePx*h;l=ib(qb(l),n)}else l=d.extent;var p=new up,q=new XMLSerializer,n={};b=ka(b);for(var r=b.next();!r.done;n={dataSources:n.dataSources,Ob:n.Ob,url:n.url,bd:n.bd},r=b.next()){n.dataSources=r.value;var t=n.Ob=void 0,r=[];n.url=void 0;for(var C=ka(n.dataSources),x=C.next();!x.done;x=C.next())x=x.value,n.Ob||(t=x.wfsFeatureNS,n.Ob={bbox:l,featureNS:t,featurePrefix:x.wfsFeaturePrefix,
geometryName:x.geometryName,Ge:x.wfsOutputFormat,Aa:g},n.url=x.wfsUrl),r=r.concat(x.ie(h,!0)),t=void 0,d.filter?t=d.filter:x.filterRules&&x.filterRules.length&&(t=a.j.Zd(x,g)),t&&(n.Ob.filter=t);n.Ob.Ac=r;n.bd=a.c.defer();e.push(n.bd.promise.then(a.i.bind(a,n.dataSources,f,!0)));r=void 0;k?(r=w({resultType:"hits"},n.Ob),r=Gp(p,r),r=q.serializeToString(r),C=vv(a),r=a.b.post(n.url,r,{timeout:C.promise}).then(function(a){return function(b){var d;d=a.dataSources[0].wfsFormat;b=b.data;Xg(b)?d=wp(d,b):
Yg(b)?d=xp(d,b):"string"===typeof b?(b=Zg(b),d=wp(d,b)):d=void 0;return d.numberOfFeatures}}(n).bind(a))):r=a.c.resolve();r.then(function(b){return function(d){if(void 0===d||d<f){d=w({maxFeatures:f},b.Ob);d=Gp(p,d);d=q.serializeToString(d);var e=vv(a);a.b.post(b.url,d,{timeout:e.promise}).then(function(a){b.bd.resolve(a)})}else b.bd.resolve(d)}}(n))}return a.c.all(e).then(a.g.bind(a))}
function tv(a,b,d){var e=[],f=d.limit,g=O(d.map),h=g.S(),g=g.getProjection().Ca;d=d.coordinate;b=ka(b);for(var k=b.next();!k.done;k=b.next()){for(var k=k.value,l=void 0,n=[],p=void 0,q={},r=null,t=null,C=ka(k),x=C.next();!x.done;x=C.next()){x=x.value;p||(p=x.wmsInfoFormat,l=x.wmsUrl);var n=n.concat(x.ie(h,!0)),K=x.activeDimensions;if(K)for(var L in K)q[L]=K[L];x.filterRules&&x.filterRules.length&&(t=x.ag(),r=a.j.Bf(x,g))}w(q,{nr:n,Er:n});if(r&&t){if(1===n.length)n=r;else{C=[];x=0;for(K=n.length;x<
K;x++)n[x]===t?C.push("("+r+")"):C.push("()");n=C.join("")}q.FILTER=n}l=new Vn({params:q,url:l});n={kr:f,mr:p};void 0!==l.i?(p=Ab(d,h,0,Xn),q={SERVICE:"WMS",VERSION:"1.3.0",REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:l.f.LAYERS},w(q,l.f,n),n=Math.floor((p[3]-d[1])/h),q[l.j?"I":"X"]=Math.floor((d[0]-p[0])/h),q[l.j?"J":"Y"]=n,p=Yn(l,p,Xn,1,lc(g),q)):p=void 0;l=vv(a);e.push(a.b.get(p,{timeout:l.promise}).then(a.i.bind(a,k,f,!1)))}return a.c.all(e).then(a.g.bind(a))}
function uv(a,b){a.forEach(function(a){void 0!==a.f&&md(a,b+"_"+a.f)})}function vv(a){var b=a.c.defer();a.f.push(b);return b}rv.$inject=["$http","$q","ngeoRuleHelper"];S.service("ngeoQuerent",rv);function wv(a,b){/gml:((Multi)?(Point|Line|Polygon|Curve|Surface|Geometry)).*/.exec(b)&&(a.type="geometry",/^gml:Point/.exec(b)?a.geomType="Point":/^gml:LineString|^gml:Curve/.exec(b)?a.geomType="LineString":/^gml:Polygon|^gml:Surface/.exec(b)?a.geomType="Polygon":/^gml:MultiPoint/.exec(b)?a.geomType="MultiPoint":/^gml:MultiLineString|^gml:MultiCurve/.exec(b)?a.geomType="MultiLineString":/^gml:MultiPolygon|^gml:MultiSurface/.exec(b)&&(a.geomType="MultiPolygon"));return!!a.type&&!!a.geomType};function xv(){}xv.prototype.read=function(a){return a.map(this.c)};xv.prototype.read=xv.prototype.read;xv.prototype.c=function(a){var b={name:a.name,required:"0"!=a.minOccurs};a=a.type;wv(b,a)||(b.type="gml:TimeInstantType"===a?"datetime":"double"===a?"number":"text");return b};function yv(a,b,d){this.f=a;this.b=b;this.g=d;this.c={};B(b,"add",this.i,this);B(b,"remove",this.j,this)}yv.prototype.Fb=function(a){return this.c[a]||null};yv.prototype.getDataSource=yv.prototype.Fb;yv.prototype.Xh=function(a){var b=this.f.defer();a.attributes?b.resolve(a.attributes):this.g.qk(a).then(function(d){a.ke();d=(new xv).read(d.complexType[0].complexContent);a.attributes=d;b.resolve(d)});return b.promise};yv.prototype.getDataSourceAttributes=yv.prototype.Xh;
yv.prototype.i=function(a){a=a.element;this.c[a.id]=a};yv.prototype.j=function(a){delete this.c[a.element.id]};ca.Object.defineProperties(yv.prototype,{collection:{configurable:!0,enumerable:!0,get:function(){return this.b}}});yv.$inject=["$q","ngeoDataSources","ngeoQuerent"];S.service("ngeoDataSourcesHelper",yv);S.value("ngeoQueryResult",{sources:[],total:0,pending:!1});function zv(a,b,d,e,f){a=a.has("ngeoQueryOptions")?a.get("ngeoQueryOptions"):{};this.j=b;this.i=d;this.b=e;this.c=f;this.f=void 0!==a.limit?a.limit:50;this.o=void 0!==a.queryCountFirst?a.queryCountFirst:!1;this.s=void 0!==a.tolerance?a.tolerance:3}
zv.prototype.vb=function(a){this.clear();var b;void 0!==a.dataSources||a.queryableDataSources||(b=this.b.ig(this.j.b,a.map));w(a,{queryableDataSources:b,limit:void 0!==a.limit?a.limit:this.f,tolerancePx:this.s,wfsCount:this.o});this.c.pending=!0;this.b.vb(a).then(this.g.bind(this))};zv.prototype.issue=zv.prototype.vb;
zv.prototype.clear=function(){this.c.total=0;for(var a=ka(this.c.sources),b=a.next();!b.done;b=a.next())b=b.value,b.features.length=0,b.pending=!1,b.queried=!1,b.tooManyResults=!1,b.totalFeatureCount=void 0;this.c.sources.length=0;this.c.pending=!1};zv.prototype.clear=zv.prototype.clear;
zv.prototype.g=function(a){var b=0,d;for(d in a){var e=Number(d),f=a[e],g=f.features;this.c.sources.push({features:g,id:e,label:this.i.Fb(e).name,limit:f.limit,pending:!1,queried:!0,tooManyResults:!0===f.tooManyFeatures,totalFeatureCount:f.totalFeatureCount});b+=g.length}this.c.total=b;this.c.pending=!1};zv.$inject=["$injector","ngeoDataSources","ngeoDataSourcesHelper","ngeoQuerent","ngeoQueryResult"];S.service("ngeoMapQuerent",zv);S.value("gmfDisplayquerywindowTemplateUrl",function(a,b){a=b.gmfDisplayquerywindowTemplateurl;return void 0!==a?a:"gmf/displayquerywindow.html"});function Av(a,b,d){return d(a,b)}Av.$inject=["$element","$attrs","gmfDisplayquerywindowTemplateUrl"];
T.component("gmfDisplayquerywindow",{controller:"GmfDisplayquerywindowController as ctrl",bindings:{featuresStyleFn:"&gmfDisplayquerywindowFeaturesstyle",selectedFeatureStyleFn:"&gmfDisplayquerywindowSelectedfeaturestyle",defaultCollapsedFn:"&?gmfDisplayquerywindowDefaultcollapsed",desktopIn:"=gmfDisplayquerywindowDesktop",showUnqueriedLayersIn:"=gmfDisplayquerywindowShowunqueriedlayers"},templateUrl:Av});
function Bv(a,b,d,e){var f=this;this.desktopIn=!1;this.collapsed=!this.desktopIn;this.f=!1;this.sourcesFilter={queried:!0};this.ngeoQueryResult={sources:[],total:0,pending:!1};this.ngeoFeatureHelper_=d;this.selectedSource=null;this.c=new hi;this.i=e;this.g=e.ob();this.b=new hi;this.g.pc(this.b);this.feature=this.source=null;this.currentResult=-1;this.isNext=!0;this.animate=0;this.open=!1;a.$watchCollection(function(){return b},function(a,b){Cv(f,a);0<a.total?f.show():b!==a&&f.close()})}
Bv.$inject=["$scope","ngeoQueryResult","ngeoFeatureHelper","ngeoFeatureOverlayMgr"];
Bv.prototype.$onInit=function(){this.collapsed=this.defaultCollapsedFn?!0===this.defaultCollapsedFn():!this.desktopIn;this.sourcesFilter=(this.f=this.showUnqueriedLayersIn?!0===this.showUnqueriedLayersIn:!1)?{}:{queried:!0};var a=this.i.ob(),b=this.featuresStyleFn();void 0!==b&&a.setStyle(b);a.pc(this.c);a=this.selectedFeatureStyleFn();void 0===a&&(a=new cd({color:[255,0,0,.6]}),b=new dd({color:[255,0,0,1],width:2}),a=new D({fill:a,image:new bd({fill:a,radius:5,stroke:b}),stroke:b}));this.g.setStyle(a)};
Bv.prototype.show=function(){this.clear();Dv(this)};Bv.prototype.show=Bv.prototype.show;function Dv(a){Ev(a,0,!1);if(null!==a.source){var b=a.ngeoQueryResult.sources;a.c.clear();for(var d=0;d<b.length;d++){var e=b[d];if(null===a.selectedSource||a.selectedSource===e)for(var e=e.features,f=0;f<e.length;f++)a.c.push(e[f])}Fv(a);a.open=!0}}
function Ev(a,b,d){var e=!1;if(b!==a.currentResult){var f,g,h,k=a.feature,l=a.ngeoQueryResult.sources;a.currentResult=b;for(f=0;f<l.length;f++)if(g=l[f],null===a.selectedSource||a.selectedSource===g)if(h=g.features,b>=h.length)b-=h.length;else{a.source=g;a.feature=g.features[b];e=!0;break}d&&Fv(a,k)}return e}Bv.prototype.previous=function(){var a=this.currentResult-1;0>a&&(a=this.me()-1);Ev(this,a,!0)&&(this.isNext=!1,this.animate++)};Bv.prototype.previous=Bv.prototype.previous;
Bv.prototype.next=function(){var a=this.currentResult+1;a>this.me()-1&&(a=0);Ev(this,a,!0)&&(this.isNext=!0,this.animate++)};Bv.prototype.next=Bv.prototype.next;function Cv(a,b){a.ngeoQueryResult.total=0;for(var d=a.ngeoQueryResult.sources.length=0;d<b.sources.length;d++){var e=b.sources[d];e.features=e.features.filter(function(a){return!Ma(this.ngeoFeatureHelper_.ge(a))},a);a.ngeoQueryResult.sources.push(e);a.ngeoQueryResult.total+=e.features.length}}
Bv.prototype.me=function(){return null===this.selectedSource?this.ngeoQueryResult.total:this.selectedSource.features.length};Bv.prototype.getResultLength=Bv.prototype.me;Bv.prototype.En=function(){return!this.currentResult};Bv.prototype.isFirst=Bv.prototype.En;Bv.prototype.Fn=function(){return this.currentResult==this.me()-1};Bv.prototype.isLast=Bv.prototype.Fn;Bv.prototype.Pl=function(){return this.feature?this.ngeoFeatureHelper_.ge(this.feature):null};Bv.prototype.getFeatureValues=Bv.prototype.Pl;
function Fv(a,b){a.b.clear();a.c.remove(a.feature);a.b.push(a.feature);void 0!==b&&a.c.push(b)}Bv.prototype.close=function(){this.open=!1;this.clear()};Bv.prototype.close=Bv.prototype.close;Bv.prototype.clear=function(){this.source=this.feature=null;this.currentResult=-1;this.c.clear();this.b.clear();this.selectedSource=null};Bv.prototype.clear=Bv.prototype.clear;Bv.prototype.tq=function(a){null!==a&&0>=a.features.length||(this.clear(),this.selectedSource=a,Dv(this))};
Bv.prototype.setSelectedSource=Bv.prototype.tq;T.controller("GmfDisplayquerywindowController",Bv);S.value("ngeoSyncArrays",function(a,b,d,e,f){var g=e.$watchCollection(function(){return a},function(){var e,g,h;if(d)for(e=a.length-1,h=0;0<=e;--e)f(a[e])&&(b[h++]=a[e]);else for(e=0,g=a.length,h=0;e<g;++e)f(a[e])&&(b[h++]=a[e]);b.length=h}),h=e.$watchCollection(function(){return b},function(){var e,g,h;if(d)for(e=0,g=a.length,h=b.length-1;e<g;++e)f(a[e])&&(a[e]=b[h--]);else for(e=0,g=a.length,h=0;e<g;++e)f(a[e])&&(a[e]=b[h++])});return function(){g();h()}});T.value("gmfDataSourceBeingFiltered",{dataSource:null});Ea("gmf.DataSourceBeingFiltered",function(){});function Gv(){}Gv.prototype.bk=function(a){var b=a.match(/([\d\.']+)[\s,]+([\d\.']+)/);return!b||(a=parseFloat(b[1].replace("'","")),b=parseFloat(b[2].replace("'","")),isNaN(a)||isNaN(b))?null:[a,b]};Gv.prototype.stringToCoordinates=Gv.prototype.bk;Gv.prototype.hg=function(a){var b,d,e=[];a.forEach(function(a){b=a.toUpperCase();"EPSG:"!=b.substr(0,5)&&(b="EPSG:"+b);d=lc(b);null!==d?e.push(d):console.error("The projection "+b+" is not defined in ol.proj.")});return e};
Gv.prototype.getProjectionList=Gv.prototype.hg;Gv.prototype.dh=function(a,b,d,e){var f;void 0===e&&(e=[d]);e.some(function(e){try{if(f=wc(a,e,d),mb(b,f[0],f[1]))return!0}catch(h){console.log(h)}f=null});return f};Gv.prototype.tryProjections=Gv.prototype.dh;Gv.prototype.eh=function(a,b,d,e){var f=this.dh(a,b,d,e);null===f&&(f=this.dh(a.reverse(),b,d,e));return f};Gv.prototype.tryProjectionsWithInversion=Gv.prototype.eh;S.service("ngeoAutoProjection",Gv);function Hv(a){return function(b,d,e){var f=null;return function(g){for(var h=[],k=0;k<arguments.length;++k)h[k-0]=arguments[k];var l=this;null!==f&&a.cancel(f);f=a(function(){f=null;b.apply(l,h)},d,e)}}}Hv.$inject=["$timeout"];S.factory("ngeoDebounce",Hv);S.value("ngeoFeatures",new hi);function Iv(a){a=a?a:{};this.i=null;var b;a.element?(b=a.element,delete a.element):b=$("<div />")[0];this.o=$("<button>",{"class":"close",html:"&times;"});this.s=$("<div/>").append(this.o).append(b);a.element=$("<div />")[0];nh.call(this,a)}u(Iv,nh);
Iv.prototype.setMap=function(a){var b=this.get(oh);this.get(ph)&&(this.i&&($u(this.i),this.i=null),$(b).popover("destroy"));nh.prototype.setMap.call(this,a);if(a){var d=this.s;window.setTimeout(function(){$(b).popover({content:d,html:!0,placement:"top",template:'<div class="popover ngeo-popover" role="tooltip">  <div class="arrow"></div>  <h3 class="popover-title"></h3>  <div class="popover-content"></div></div>'}).popover("show")},0);this.i=Tu(this.o[0],"click",this.D,!1,this)}};
Iv.prototype.setMap=Iv.prototype.setMap;Iv.prototype.D=function(){var a=this.get(ph);a&&a.Ja.remove(this)};var Jv={LineString:"LineString",Point:"Point",Polygon:"Polygon",MultiLineString:"LineString",MultiPoint:"Point",MultiPolygon:"Polygon"},Kv={};function Lv(a){nd.call(this);a=a?a:{};this.g=void 0!==a.accuracy?a.accuracy:1;this.j=void 0!==a.encodeStyles?a.encodeStyles:!0;this.o=a.properties?a.properties:Mv;this.f=void 0!==a.setStyle?a.setStyle:!0;this.b=this.c=0;Kv=void 0!==a.Cj&&a.Cj}u(Lv,rd);Ea("ngeo.format.FeatureHash",Lv);function Mv(a){return db(a)}
function Nv(a){var b=a<<1;0>a&&(b=~b);a=b;for(b="";32<=a;)b+=".-_!*ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789abcdefghjkmnpqrstuvwxyz".charAt(32|a&31),a>>=5;return b+=".-_!*ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789abcdefghjkmnpqrstuvwxyz".charAt(a)}function Ov(a,b,d){d=void 0!==d?d:"fillColor";a=a.qa();null!==a&&(a=Cc(a),a=oo(a),0<b.length&&b.push("'"),b.push(encodeURIComponent(d+"*"+a)))}
function Pv(a,b){var d=a.qa();null!==d&&(d=Cc(d),d=oo(d),0<b.length&&b.push("'"),b.push(encodeURIComponent("strokeColor*"+d)));a=a.c;void 0!==a&&(0<b.length&&b.push("'"),b.push(encodeURIComponent("strokeWidth*"+a)))}function Qv(a,b){var d="l r t m isCircle isRectangle isLabel showMeasure".split(" ");return yd("a o s k pointRadius strokeWidth".split(" "),a)?+b:yd(d,a)?"true"===b?!0:!1:b}
function Rv(a){a=a.split("'");for(var b={},d=0;d<a.length;++d){var e=decodeURIComponent(a[d]).split("*"),f=e[0];b[f]=Qv(f,e[1])}return b}function Sv(a,b,d,e,f){for(var g=e.length,h=0;h<g;++h)d=Tv(this,a,b,d,e[h]-b),h&&f.push("'"),f.push(d),d=e[h];return d}
var Vv={P:function(a){a=a.substring(2,a.length-1);a=Uv(this,a);var b=new Cl(null);Nd(b,"XY",a);b.c();return b},L:function(a){a=a.substring(2,a.length-1);var b=[],d=[];a=a.split("'");for(var e=0,f=a.length;e<f;++e)b=Uv(this,a[e],b),d[e]=b.length;a=new yl(null);zl(a,"XY",b,d);return a},A:function(a){a=a.substring(2,a.length-1);var b=[],d=[];a=a.split(")(");for(var e=0,f=a.length;e<f;++e)for(var g=a[e].split("'"),h=d[e]=[],k=0,l=g.length;k<l;++k){var b=Uv(this,g[k],b),n=b.length;k?(b[n++]=b[h[k-1]],
b[n++]=b[h[k-1]+1]):(b[n++]=b[0],b[n++]=b[1]);h[k]=n}a=new El(null);Fl(a,"XY",b,d);return a},l:function(a){a=a.substring(2,a.length-1);a=Uv(this,a);var b=new ge(null);he(b,"XY",a);return b},p:function(a){a=a.substring(2,a.length-1);a=Uv(this,a);var b=new ij(null);jj(b,"XY",a);return b},a:function(a){a=a.substring(2,a.length-1);var b=[],d=[];a=a.split("'");for(var e=0,f=a.length;e<f;++e){var b=Uv(this,a[e],b),g=b.length;e?(b[g++]=b[d[e-1]],b[g++]=b[d[e-1]+1]):(b[g++]=b[0],b[g++]=b[1]);d[e]=g}a=new lj(null);
mj(a,"XY",b,d);return a}},Wv={MultiLineString:function(a){var b=a.Za,d=b.length,e=a.v;a=a.F;for(var f=0,g=["L("],h=0;h<d;++h){var k=b[h],f=Tv(this,e,a,f,k);h&&g.push("'");g.push(f);f=k}g.push(")");return g.join("")},MultiPoint:function(a){var b=a.v;return"P("+Tv(this,b,a.F,0,b.length)+")"},MultiPolygon:function(a){var b=a.v,d=a.F;a=a.b;for(var e=a.length,f=0,g=["A"],h=0;h<e;++h){var k=a[h];g.push("(");f=Sv.call(this,b,d,f,k,g);g.push(")")}return g.join("")},LineString:function(a){var b=a.v;return"l("+
Tv(this,b,a.F,0,b.length)+")"},Point:function(a){var b=a.v;return"p("+Tv(this,b,a.F,0,b.length)+")"},Polygon:function(a){var b=["a("];Sv.call(this,a.v,a.F,0,a.ua,b);b.push(")");return b.join("")}};
function Uv(a,b,d){var e=b.length,f=0;d=void 0!==d?d:[];for(var g=d.length;f<e;){var h,k=0,l=0;do h=".-_!*ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789abcdefghjkmnpqrstuvwxyz".indexOf(b.charAt(f++)),l|=(h&31)<<k,k+=5;while(32<=h);a.c+=l&1?~(l>>1):l>>1;l=k=0;do h=".-_!*ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789abcdefghjkmnpqrstuvwxyz".indexOf(b.charAt(f++)),l|=(h&31)<<k,k+=5;while(32<=h);a.b+=l&1?~(l>>1):l>>1;d[g++]=a.c*a.g;d[g++]=a.b*a.g}return d}
function Tv(a,b,d,e,f){for(var g="";e<f;e+=d){var h=b[e],k=b[e+1],h=Math.floor(h/a.g),k=Math.floor(k/a.g),l=h-a.c,n=k-a.b;a.c=h;a.b=k;g+=Nv(l)+Nv(n)}return g}
function td(a,b){var d=b.indexOf("~"),e=ud(a,0<=d?b.substring(0,d)+")":b),e=new jd(e);if(0<=d){b=b.substring(d+1,b.length-1);var d=b.indexOf("~"),f=0<=d?b.substring(0,d):b;if(""!=f)for(var f=f.split("'"),g=0;g<f.length;++g){var h=decodeURIComponent(f[g]).split("*"),k=h[0],h=h[1];!a.f&&Kv[k]&&(k=Kv[k]);e.set(k,Qv(k,h))}if(0<=d)if(d=b.substring(d+1),a.f){if(""!=d){b=Rv(d);var g=b.fillColor,l=b.fontSize;a=b.fontColor;d=b.pointRadius;f=b.strokeColor;k=b.strokeWidth;b=null;void 0!==g&&(b=new cd({color:g}));
g=null;void 0!==f&&void 0!==k&&(g=new dd({color:f,width:k}));f=null;void 0!==d&&(f=new bd({radius:d,fill:b,stroke:g}),b=g=null);d=null;void 0!==l&&void 0!==a&&(d=new Br({font:l+" sans-serif",fill:new cd({color:a})}));l=new D({fill:b,image:f,stroke:g,text:d});e.setStyle(l)}}else{a=Rv(d);d=e.getGeometry();d instanceof ij?a.isLabel||a.t?(delete a.strokeColor,delete a.fillColor):(delete a.fontColor,delete a.fontSize):(delete a.fontColor,d instanceof ge&&(delete a.fillColor,delete a.fillOpacity));a.fontSize&&
(d=parseFloat(a.fontSize),-1!==a.fontSize.indexOf("px")&&(d=Math.round(d/1.333333)),a.fontSize=d);d={};for(l in a)b=a[l],Kv[l]?d[Kv[l]]=b:d[l]=b;e.Ea(d)}}return e}function ud(a,b){var d=Vv[b[0]];a.c=0;a.b=0;return d.call(a,b)}
function vd(a,b,d){var e=[],f="",g=b.getGeometry();g&&(f=wd(a,g,d));0<f.length&&(f=f.substring(0,f.length-1),e.push(f));d=[];var f=a.o(b),h;for(h in f){var k=f[h];void 0!==k&&null!==k&&h!==b.b&&(d.length&&d.push("'"),k=encodeURIComponent(h.replace(/[()'*]/g,"_")+"*"+k.toString().replace(/[()'*]/g,"_")),d.push(k))}0<d.length&&(e.push("~"),Array.prototype.push.apply(e,d));if(a.j&&(a=b.i)&&(a=a.call(b,0),null!==a)){b=[];a=Array.isArray(a)?a:[a];g=g.getType();g=Jv[g];for(h=0;h<a.length;++h){d=a[h];var k=
d.la(),f=d.ea(),l=d.pa();d=d.za();"Polygon"==g?null!==k&&(Ov(k,b),null!==l&&Pv(l,b)):"LineString"==g?null!==l&&Pv(l,b):"Point"==g&&null!==f&&f instanceof bd&&(k=f.c,0<b.length&&b.push("'"),b.push(encodeURIComponent("pointRadius*"+k)),k=f.la(),null!==k&&Ov(k,b),f=f.pa(),null!==f&&Pv(f,b));null!==d&&(f=d.c,void 0!==f&&(f=f.split(" "),3<=f.length&&(0<b.length&&b.push("'"),b.push(encodeURIComponent("fontSize*"+f[1])))),d=d.la(),null!==d&&Ov(d,b,"fontColor"))}0<b.length&&(e.push("~"),Array.prototype.push.apply(e,
b))}e.push(")");return e.join("")}function wd(a,b,d){var e=Wv[b.getType()];b=qd(b,!0,d);a.c=0;a.b=0;return e.call(a,b)};S.value("ngeoWfsPermalinkOptions",{url:"",wfsTypes:[],defaultFeatureNS:"",defaultFeaturePrefix:""});function Xv(a,b,d){var e=this;this.o=d.url;this.i=void 0!==d.maxFeatures?d.maxFeatures:50;this.b={};d.wfsTypes.forEach(function(a){e.b[a.featureType]=a});this.g=d.defaultFeatureNS;this.f=d.defaultFeaturePrefix;this.s=d.pointRecenterZoom;this.j=a;this.c=b}Xv.$inject=["$http","ngeoQueryResult","ngeoWfsPermalinkOptions"];Xv.prototype.clear=function(){Yv(this)};Xv.prototype.clear=Xv.prototype.clear;
Xv.prototype.vb=function(a,b){Yv(this);var d=a.Uq;if(this.b.hasOwnProperty(d)){var d=this.b[d],e=Zv(a.Fl);null!==e&&$v(this,d,e,b,a.wq)}};Xv.prototype.issue=Xv.prototype.vb;
function $v(a,b,d,e,f){var g=new up;d=Gp(g,{Aa:O(e).getProjection().Ca,featureNS:void 0!==b.featureNS?b.featureNS:a.g,featurePrefix:void 0!==b.featurePrefix?b.featurePrefix:a.f,Ac:[b.featureType],Ge:"GML3",filter:d,maxFeatures:a.i});d=(new XMLSerializer).serializeToString(d);a.j.post(a.o,d).then(function(d){d=g.readFeatures(d.data);if(d.length){var h=e.ha();if(void 0!==h){var l=a.s;Dj(O(e),aw(d),{size:h,maxZoom:l,padding:[10,10,10,10]})}f&&(a.c.sources.push({features:d,id:b.featureType,identifierAttributeField:b.label,
label:b.featureType,pending:!1}),a.c.total=d.length)}})}function aw(a){return a.reduce(function(a,d){return sb(a,d.getGeometry().H())},gb())}function Zv(a){return a.length?bw(a.map(function(a){a=a.filters.map(function(a){var b=a.condition;return Array.isArray(b)?bw(b.map(function(b){return tp(a.property,b)}),sp):tp(a.property,a.condition)});return bw(a,rp)}),sp):null}function bw(a,b){return a.reduce(function(a,e){return null===a?e:b(a,e)},null)}
function Yv(a){a.c.total=0;a.c.sources.forEach(function(a){a.features.length=0},a)}S.service("ngeoWfsPermalink",Xv);var cw={ir:"dim_",Hr:"tree_enable_",Jr:"tree_group_layers_",Kr:"tree_group_opacity_",Lr:"tree_opacity_",Mr:"wfs_"};T.value("gmfPermalinkOptions",{});var dw=[],ew;for(ew in cw)dw.push(new RegExp(cw[ew]+".*"));for(var fw in Om)dw.push(new RegExp(cw[fw]));S.value("ngeoUsedKeyRegexp",dw);
function gw(a,b,d,e,f,g){var h=this;this.Pa=b;this.$timeout_=a;this.B=null;this.listenerKeys_={};this.X=e;this.c=f;this.i=d.has("ngeoFeatures")?d.get("ngeoFeatures"):null;this.s=d.has("ngeoBackgroundLayerMgr")?d.get("ngeoBackgroundLayerMgr"):null;this.O=(a=d.has("ngeoFeatureOverlayMgr")?d.get("ngeoFeatureOverlayMgr"):null)?a.ob():null;this.j=d.has("ngeoFeatureHelper")?d.get("ngeoFeatureHelper"):null;a=d.has("gmfPermalinkOptions")?d.get("gmfPermalinkOptions"):{};!1===a.useLocalStorage&&(this.c.useLocalStorage=
!1);this.G=d.has("gmfThemes")?d.get("gmfThemes"):null;this.D=d.has("gmfObjectEditingManager")?d.get("gmfObjectEditingManager"):null;this.g=d.has("gmfThemeManager")?d.get("gmfThemeManager"):null;this.N=d.has("defaultTheme")?d.get("defaultTheme"):void 0;this.aa=d.has("gmfTreeManager")?d.get("gmfTreeManager"):null;this.b=g;this.M=d.has("ngeoWfsPermalink")?d.get("ngeoWfsPermalink"):null;this.f=null;this.o=d.has("ngeoAutoProjection")?d.get("ngeoAutoProjection"):null;this.u=null;void 0!==a.projectionCodes&&
this.o&&(d=this.o.hg(a.projectionCodes),0<d.length&&(this.u=d));void 0!==a.crosshairStyle?this.C=a.crosshairStyle:this.C=[new D({image:new $c({stroke:new dd({color:"rgba(255, 255, 255, 0.8)",width:5}),points:4,radius:8,sd:0,angle:0})}),new D({image:new $c({stroke:new dd({color:"rgba(255, 0, 0, 1)",width:2}),points:4,radius:8,sd:0,angle:0})})];this.R=new Lv({setStyle:!1,encodeStyles:!1,Cj:{fillColor:"c",fillOpacity:"o",fontColor:"c",fontSize:"s",isBox:"r",isCircle:"l",isLabel:"t",name:"n",pointRadius:"s",
showMeasure:"m",strokeColor:"c",strokeWidth:"k"}});this.s&&B(this.s,"change",this.V,this);this.Pa.$on("ngeo-layertree-state",function(a,b,d){var e={};if(d.node.mixed){var f="on"===b.getState();b.Ma(function(a){void 0===a.node.children&&(e["tree_enable_"+a.node.name]=f)})}else{var g=[];d.Ma(function(a){void 0===a.node.children&&"on"===a.getState()&&g.push(a.node.name)});e["tree_group_layers_"+d.node.name]=g.join(",")}vo(h.c,e)});this.Pa.$on("ngeo-layertree-opacity",function(a,b){a={};var d=b.layer.getOpacity();
a[(b.parent.node.mixed?"tree_opacity_":"tree_group_opacity_")+b.node.name]=d;vo(h.c,a)});var k=this.cd();this.i&&(k.forEach(function(a){this.j&&this.j.setStyle(a);hw(this,a)},this),this.i.extend(k),B(this.i,"add",this.Oa,this),B(this.i,"remove",this.da,this));this.j&&this.Pa.$on("$localeChangeSuccess",function(){k.forEach(function(a){this.j.setStyle(a)},h)});this.g&&b.$watch(function(){return h.g.themeName},function(){if(h.g&&h.g.themeName){var a=h.b.getPath().split("/");""===a[a.length-1]&&a.splice(a.length-
1);iw(a)?a[a.length-1]=h.g.themeName:a.push("theme",h.g.themeName);h.b.setPath(a.join("/"))}});jw(this)}gw.$inject="$timeout $rootScope $injector ngeoDebounce ngeoStateManager ngeoLocation".split(" ");
function kw(a,b){a.listenerKeys_[b]?(a.listenerKeys_[b].Qb.length&&(a.listenerKeys_[b].Qb.forEach(function(a){$u(a)},a),a.listenerKeys_[b].Qb.length=0),a.listenerKeys_[b].Hb.length&&(a.listenerKeys_[b].Hb.forEach(function(a){A(a)},a),a.listenerKeys_[b].Hb.length=0)):a.listenerKeys_[b]={Qb:[],Hb:[]}}gw.prototype.ci=function(){var a=to(this.c,"map_x"),b=to(this.c,"map_y");return isNaN(a)||isNaN(b)?null:(a=[a,b],null!==this.u&&this.o&&(b=O(this.f).getProjection(),b=this.o.eh(a,b.H(),b,this.u))?b:a)};
gw.prototype.getMapCenter=gw.prototype.ci;gw.prototype.fi=function(){var a=to(this.c,"map_zoom");return isNaN(a)?void 0:a};gw.prototype.getMapZoom=gw.prototype.fi;gw.prototype.di=function(){var a=uo(this.c,"map_crosshair");return void 0===a?!1:a};gw.prototype.getMapCrosshair=gw.prototype.di;gw.prototype.ei=function(){return so(this.c,"map_tooltip")};gw.prototype.getMapTooltip=gw.prototype.ei;
gw.prototype.cd=function(){var a=so(this.c,"rl_features");return void 0!==a&&""!==a?this.R.readFeatures(a):[]};gw.prototype.getFeatures=gw.prototype.cd;gw.prototype.Uj=function(a){for(var b=this,d=this.b.gg("dim_"),e=0;e<d.length;e++){var f=d[e];a[f.slice(4)]=this.b.Pb(f)}this.Pa.$watchCollection(function(){return a},function(a){var d={},e;for(e in a)d["dim_"+e]=a[e];b.b.updateParams(d)})};gw.prototype.setDimensions=gw.prototype.Uj;
gw.prototype.setMap=function(a){var b=this;a!==this.f&&(this.f&&(A(this.B),this.f=this.B=null),a&&(this.f=a,this.D?this.D.getFeature().then(function(d){lw(b,a,d)}):lw(this,a,null)))};gw.prototype.setMap=gw.prototype.setMap;
function lw(a,b,d){var e=O(b),f;if(d&&d.getGeometry()){var g=b.ha();Dj(e,d.getGeometry().H(),g)}else(f=a.ci())&&e.setCenter(f),d=a.fi(),void 0!==d&&Fj(e,d);a.B=B(e,"propertychange",a.X(function(){var b=e.getCenter(),d=Cj(e),f={};f.map_x=Math.round(b[0]);f.map_y=Math.round(b[1]);f.map_zoom=d;vo(a.c,f)},300,!0),a);if(a.di()&&a.O){var h;null!==f?h=f:h=e.getCenter();h=new jd(new ij(h));h.setStyle(a.C);a.O.oa(h)}if(h=a.ei()){var k;null!==f?k=f:k=e.getCenter();f=$("<div/>",{"class":"gmf-permalink-tooltip",
text:h})[0];k=new Iv({element:f,position:k});b.Ja.push(k)}k=mw(a);null!==k&&a.M&&a.M.vb(k,b)}gw.prototype.Wh=function(a){var b=so(this.c,"baselayer_ref");if(void 0!==b){a=ka(a);for(var d=a.next();!d.done;d=a.next())if(d=d.value,d.get("label")===b)return d}return null};gw.prototype.getBackgroundLayer=gw.prototype.Wh;gw.prototype.V=function(){if(this.f&&this.s){var a={baselayer_ref:this.s.get(this.f).get("label")};vo(this.c,a)}};
gw.prototype.Mj=function(){if(this.aa){var a=this.aa.rootCtrl.node.children.map(function(a){return a.name}),b={};b.tree_groups=a.join(",");vo(this.c,b)}};gw.prototype.refreshFirstLevelGroups=gw.prototype.Mj;function iw(a){var b=a.indexOf("theme");return-1!=b&&b==a.length-2}
function jw(a){a.G&&a.G.Gb().then(function(b){var d,e=a.b.getPath().split("/");iw(e)&&(d=e[e.length-1]);d||(e=so(a.c,"theme"))&&(d=e);!d&&a.N&&(d=a.N);a.g&&a.g.c&&(a.g.themeName=""+d);var f=[];if(e=a.b.Pb("tree_groups"))e.split(",").forEach(function(a){(a=fo(b,a))&&f.push(a)});else if(d=go(b,d))f=d.children;a.aa&&a.aa.Re(f);a.$timeout_(function(){a.aa&&a.aa.rootCtrl&&(a.aa.rootCtrl.Ma(function(b){if(!b.isRoot){var d=to(a.c,(b.parent.node.mixed?"tree_opacity_":"tree_group_opacity_")+b.node.name);void 0!==
d&&b.layer&&b.layer.set("opacity",d);if(b.parent.node&&b.parent.node.mixed&&void 0==b.node.children)d=uo(a.c,"tree_enable_"+b.node.name),void 0!==d&&b.yb(d?"on":"off",!1);else if(!b.node.mixed&&1==b.depth&&(d=so(a.c,"tree_group_layers_"+b.node.name),void 0!==d)){var e=d.split(",");b.Ma(function(a){void 0===a.node.children&&a.yb(yd(e,a.node.name)?"on":"off",!1)});return"STOP"}}}),a.aa.rootCtrl.children.forEach(function(b){b.Ma(function(d){if("indeterminate"!==d.getState())return a.Pa.$broadcast("ngeo-layertree-state",
d,b),"STOP"})}))})})}gw.prototype.Oa=function(a){hw(this,a.element)};gw.prototype.da=function(a){a=v(a.element);kw(this,a);this.ia()};function hw(a,b){var d=v(b);b=B(b,"change",a.ia,a);a.listenerKeys_[d]||kw(a,d);a.listenerKeys_[d].Hb.push(b)}gw.prototype.ia=function(){if(this.i){var a={rl_features:this.R.writeFeatures(this.i.b)};vo(this.c,a)}};
function mw(a){var b=a.b.Pb("wfs_layer");if(!b)return null;var d=a.b.ki("wfs_ngroups"),e=a.b.gg("wfs_"),f=[],g;if(void 0===d)g=nw(a,"wfs_",e),null!==g&&f.push(g);else for(var h=0;h<d;h++)g=nw(a,"wfs_"+h+"_",e),null!==g&&f.push(g);if(!f.length)return null;a=a.b.Pb("wfs_showFeatures");return{Uq:b,wq:!("0"===a||"false"===a),Fl:f}}
function nw(a,b,d){var e=[];d.forEach(function(d){if("wfs_layer"!=d&&"wfs_showFeatures"!=d&&"wfs_ngroups"!=d&&!d.indexOf(b)){var f=a.b.Pb(d);if(f){var h=f;-1<f.indexOf(",")&&(h=f.split(","));d={property:d.replace(b,""),condition:h};e.push(d)}}});return 0<e.length?{filters:e}:null}T.service("gmfPermalink",gw);function ow(a){function b(a){this.anchorElm[0]!==a.target&&this.bodyElm.parent()[0]!==a.target&!this.bodyElm.parent().find(a.target).length&&this.shown&&this.Gf()}this.shown=!1;this.bodyElm=this.anchorElm=void 0;angular.element("body").on("mousedown",b.bind(this));a.$on("$destroy",function(){angular.element("body").off("mousedown",b)})}ow.$inject=["$scope"];ow.prototype.Gf=function(){this.shown=!1;this.anchorElm.popover("hide")};ow.prototype.dismissPopover=ow.prototype.Gf;
S.controller("NgeoPopoverController",ow);
S.directive("ngeoPopover",function(){return{restrict:"A",scope:!0,controller:"NgeoPopoverController as popoverCtrl",link:function(a,b,d,e){e.anchorElm.on("hidden.bs.popover",function(){e.anchorElm.data("bs.popover").inState.click=!1});e.anchorElm.on("inserted.bs.popover",function(){e.bodyElm.show();e.shown=!0});e.anchorElm.popover({container:"body",html:!0,content:e.bodyElm,placement:d.ngeoPopoverPlacement||"right"});if(d.ngeoPopoverDismiss)$(d.ngeoPopoverDismiss).on("scroll",function(){e.Gf()});
a.$on("$destroy",function(){e.anchorElm.popover("destroy");e.anchorElm.unbind("inserted.bs.popover");e.anchorElm.unbind("hidden.bs.popover")})}}});S.directive("ngeoPopoverAnchor",function(){return{restrict:"A",require:"^^ngeoPopover",link:function(a,b,d,e){e.anchorElm=b}}});S.directive("ngeoPopoverContent",function(){return{restrict:"A",require:"^^ngeoPopover",link:function(a,b,d,e){e.bodyElm=b;b.hide()}}});T.value("gmfLayertreeTemplate",function(){return'<div ngeo-layertree="gmfLayertreeCtrl.root" ngeo-layertree-map="gmfLayertreeCtrl.map" ngeo-layertree-nodelayer="gmfLayertreeCtrl.getLayer(treeCtrl)" ngeo-layertree-listeners="gmfLayertreeCtrl.listeners(treeScope, treeCtrl)" ngeo-layertree-templateurl="gmf/layertree.html"></div>'});function pw(a,b,d){return d(a,b)}pw.$inject=["$element","$attrs","gmfLayertreeTemplate"];S.value("ngeoLayertreeTemplateUrl",function(){return"gmf/layertree.html"});
T.component("gmfLayertree",{controller:"GmfLayertreeController as gmfLayertreeCtrl",bindings:{map:"=gmfLayertreeMap",dimensions:"=?gmfLayertreeDimensions",openLinksInNewWindowFn:"&gmfLayertreeOpenlinksinnewwindow"},template:pw});function Y(a,b,d,e,f,g,h,k,l,n,p){this.I=d;this.o=a;this.f=b;this.c=f;this.gmfDataSourceBeingFiltered=g;this.i=h;this.aa=k;this.root=k.root;this.j=l;this.s=p;this.B=e();this.g={};this.b=null;this.layers=[];this.u=n}Ea("gmf.LayertreeController",Y);Y.$inject="$http $sce $scope ngeoCreatePopup ngeoLayerHelper gmfDataSourceBeingFiltered gmfPermalink gmfTreeManager gmfSyncLayertreeMap ngeoSyncArrays ngeoWMSTime gmfThemes".split(" ");
Y.prototype.$onInit=function(){var a=this;this.openLinksInNewWindow=!0===this.openLinksInNewWindowFn()?!0:!1;this.b=this.c.he(this.map,"data");this.u(this.b.getLayers().b,this.layers,!0,this.I,function(){return!0});this.I.$watchCollection(function(){return a.layers},function(){a.map.render()});this.I.$watchCollection(function(){if(a.aa.rootCtrl)return a.dimensions},function(b){b&&qw(a,a.aa.rootCtrl)})};function qw(a,b){b.Ma(function(b){b.node.dimensions&&rw(a,b.layer,b.node)})}
function rw(a,b,d){if(a.dimensions&&d.dimensions){var e={},f;for(f in d.dimensions){var g=a.dimensions[f];void 0!==g&&(e[f]=g)}if(!Ma(e))if(f=E(b),f instanceof Vh)f.tc(e);else if(f instanceof Vn)f.updateParams(e);else b.once("change:source",function(){rw(a,b,d)})}}
Y.prototype.xa=function(a){var b;a.parent.isRoot&&(this.aa.rootCtrl=a.parent,b=this.aa.root.children.length-this.aa.i||0);var d=this.j,e=this.b,f=b;b=null;if(void 0!==a.node.children&&a.node.mixed)b=Xp(d,a,e,f);else if(void 0===a.node.children&&a.parent.node.mixed)b=a.node,"WMTS"===b.type?d=bq(d,b):(e=$p(d,a),f=d.g[b.ogcServer],d=d.c.Yd(f.url,b.layers,f.type,e)),d.set("layerNodeName",b.name),aq(b,d),(b=!0===b.metadata.isChecked)&&a.yb("on",!1),we(d,b),li(Zp(a.parent).getLayers(),0,d),b=d;else if(void 0===
a.node.children){d=a.node;for(e=a;!e.parent.isRoot;)e=e.parent;f=e.layer;aq(d,f);d.metadata.isChecked?(a.yb("on",!1),Wp(f,e)):zo(a.parent)}else 1!==a.depth||a.node.mixed||(b=Xp(d,a,e,f));b&&a.node.metadata.opacity&&b.set("opacity",a.node.metadata.opacity);d=b;d instanceof xe&&rw(this,d,a.node);return d};Y.prototype.getLayer=Y.prototype.xa;Y.prototype.listeners=function(a,b){var d=this.b;a.$on("$destroy",function(){d.getLayers().remove(b.layer)})};Y.prototype.listeners=Y.prototype.listeners;
Y.prototype.am=function(a){var b,d=O(this.map).S();if(void 0!==a.minResolutionHint&&d<a.minResolutionHint||void 0!==a.maxResolutionHint&&d>a.maxResolutionHint)b="out-of-resolution";return b};Y.prototype.getResolutionStyle=Y.prototype.am;Y.prototype.Hq=function(a){a.yb("on"===a.getState()?"off":"on")};Y.prototype.toggleActive=Y.prototype.Hq;Y.prototype.Yl=function(a){return a.getState()};Y.prototype.getNodeState=Y.prototype.Yl;
Y.prototype.Sq=function(a,b){if(b){var d=Zp(a);if(d){var e=a.node.time;a=E(d);b=this.s.Uf(e,b);this.c.kk(d,a.f.LAYERS,b)}}};Y.prototype.updateWMSTimeLayerState=Y.prototype.Sq;Y.prototype.Wl=function(a){var b=a.node.metadata.iconUrl;if(void 0!==b)return b;if(void 0===a.node.children){var d=a.node;if("WMS"===d.type&&(b=d.metadata.legendRule,void 0!==b))return d=d.layers.split(",")[0],this.c.pe(Io(this.aa,a).url,d,void 0,b)}};Y.prototype.getLegendIconURL=Y.prototype.Wl;
Y.prototype.Xl=function(a){if(!a.node.children){var b=a.node;if(b.metadata.legendImage)return b.metadata.legendImage;var d=a.layer;if("WMTS"===b.type&&d)return this.c.og(d);b=b.layers.split(",");return 1<b.length?void 0:this.c.pe(Io(this.aa,a).url,b[0],sw(this))}};Y.prototype.getLegendURL=Y.prototype.Xl;function sw(a){var b=O(a.map);a=b.S();b=Rb(b.getProjection());return 25.4/.28*b*39.37*a}
Y.prototype.vl=function(a){var b=this,d=a.uid.toString(),e=a.node;a=e.metadata.metadataUrl;if(void 0!==a){d in this.g||(this.g[d]=this.o.get(a).then(function(a){return b.f.trustAsHtml(a.data)}));var f=this.B;this.g[d].then(function(a){f.setTitle(e.name);f.setContent(a);f.yd(!0)})}};Y.prototype.displayMetadata=Y.prototype.vl;
Y.prototype.bl=function(){var a=this.aa.rootCtrl.children,b=[];this.aa.rootCtrl.node.children.forEach(function(d){a.some(function(a){a.node===d&&b.push(a)})},this);this.aa.rootCtrl.children=b;this.layers.length=0;this.aa.rootCtrl.children.forEach(function(a){this.layers.push(a.layer)},this);this.i.Mj()};Y.prototype.afterReorder=Y.prototype.bl;Y.prototype.removeNode=function(a){this.aa.Og(a)};Y.prototype.removeNode=Y.prototype.removeNode;Y.prototype.bq=function(){this.aa.removeAll()};
Y.prototype.removeAllNodes=Y.prototype.bq;Y.prototype.Go=function(){return this.aa.root.children.length};Y.prototype.nodesCount=Y.prototype.Go;Y.prototype.br=function(a){a=a.node;var b=O(this.map),d=b.S();void 0!==a.minResolutionHint&&d<a.minResolutionHint&&Ej(b,b.va(a.minResolutionHint,0,1));void 0!==a.maxResolutionHint&&d>a.maxResolutionHint&&Ej(b,b.va(a.maxResolutionHint,0,-1))};Y.prototype.zoomToResolution=Y.prototype.br;Y.prototype.Kq=function(a){$(a).toggle({toggle:!0})};
Y.prototype.toggleNodeLegend=Y.prototype.Kq;Y.prototype.Jq=function(a){this.gmfDataSourceBeingFiltered.dataSource=a};Y.prototype.toggleFiltrableDataSource=Y.prototype.Jq;Y.prototype.Gn=function(a){return $(a).is(":visible")};Y.prototype.isNodeLegendVisible=Y.prototype.Gn;function tw(a){a=a.node;return a.metadata&&void 0!==a.metadata.snappingConfig?a.metadata.snappingConfig:null}Y.getSnappingConfig=tw;T.controller("GmfLayertreeController",Y);function uw(a){bk.call(this,{handleEvent:vw,ab:Db,bb:ww});a=a?a:{};this.o=a.source?a.source:null;this.V=void 0!==a.vertex?a.vertex:!0;this.D=void 0!==a.edge?a.edge:!0;this.j=a.features?a.features:null;this.da=[];this.u={};this.G={};this.s={};this.C=null;this.f=void 0!==a.lb?a.lb:10;this.ta=xw.bind(this);this.b=new qf;this.M={Point:this.fp,LineString:this.mj,LinearRing:this.mj,Polygon:this.gp,MultiPoint:this.cp,MultiLineString:this.bp,MultiPolygon:this.ep,GeometryCollection:this.ap}}u(uw,bk);m=uw.prototype;
m.oa=function(a,b){b=void 0!==b?b:!0;var d=v(a),e=a.getGeometry();if(e){var f=this.M[e.getType()];f&&(this.G[d]=e.H(gb()),f.call(this,a,e))}b&&(this.u[d]=B(a,"change",this.Zo,this))};m.Il=function(a){this.oa(a)};m.Jl=function(a){this.na(a)};m.kj=function(a){var b;a instanceof kl?b=a.feature:a instanceof mi&&(b=a.element);this.oa(b)};m.lj=function(a){var b;a instanceof kl?b=a.feature:a instanceof mi&&(b=a.element);this.na(b)};
m.Zo=function(a){a=a.target;if(this.B){var b=v(a);b in this.s||(this.s[b]=a)}else this.jk(a)};m.na=function(a,b){b=void 0!==b?b:!0;var d=v(a),e=this.G[d];if(e){var f=this.b,g=[];vf(f,e,function(b){a===b.feature&&g.push(b)});for(e=g.length-1;0<=e;--e)f.remove(g[e])}b&&(A(this.u[d]),delete this.u[d])};
m.setMap=function(a){var b=this.ma,d=this.da,e;this.j?e=this.j:this.o&&(e=this.o.cd());b&&(d.forEach(A),d.length=0,e.forEach(this.Jl,this));bk.prototype.setMap.call(this,a);a&&(this.j?d.push(B(this.j,"add",this.kj,this),B(this.j,"remove",this.lj,this)):this.o&&d.push(B(this.o,"addfeature",this.kj,this),B(this.o,"removefeature",this.lj,this)),e.forEach(this.Il,this))};m.Ub=Eb;m.jk=function(a){this.na(a,!1);this.oa(a,!1)};
m.ap=function(a,b){var d=b.b;for(b=0;b<d.length;++b)this.M[d[b].getType()].call(this,a,d[b])};m.mj=function(a,b){b=b.J();var d,e,f,g;d=0;for(e=b.length-1;d<e;++d)f=b.slice(d,d+2),g={feature:a,Z:f},this.b.insert(fb(f),g)};m.bp=function(a,b){b=b.J();var d,e,f,g,h,k,l;g=0;for(h=b.length;g<h;++g)for(d=b[g],e=0,f=d.length-1;e<f;++e)k=d.slice(e,e+2),l={feature:a,Z:k},this.b.insert(fb(k),l)};
m.cp=function(a,b){var d=b.J(),e,f,g;f=0;for(g=d.length;f<g;++f)e=d[f],e={feature:a,Z:[e,e]},this.b.insert(b.H(),e)};m.ep=function(a,b){b=b.J();var d,e,f,g,h,k,l,n,p,q;k=0;for(l=b.length;k<l;++k)for(n=b[k],g=0,h=n.length;g<h;++g)for(d=n[g],e=0,f=d.length-1;e<f;++e)p=d.slice(e,e+2),q={feature:a,Z:p},this.b.insert(fb(p),q)};m.fp=function(a,b){var d=b.J();a={feature:a,Z:[d,d]};this.b.insert(b.H(),a)};
m.gp=function(a,b){b=b.J();var d,e,f,g,h,k,l;g=0;for(h=b.length;g<h;++g)for(d=b[g],e=0,f=d.length-1;e<f;++e)k=d.slice(e,e+2),l={feature:a,Z:k},this.b.insert(fb(k),l)};
function vw(a){var b,d,e=a.pixel,f=a.coordinate;b=a.map;var g=b.wa([e[0]-this.f,e[1]+this.f]);d=b.wa([e[0]+this.f,e[1]-this.f]);var g=fb([g,d]),h=tf(this.b,g),k,g=!1,l=null;d=null;if(0<h.length){this.C=f;h.sort(this.ta);h=h[0].Z;if(this.V&&!this.D){if(f=wh(b,h[0]),k=wh(b,h[1]),f=Ce(e,f),e=Ce(e,k),k=Math.sqrt(Math.min(f,e)),k=k<=this.f)g=!0,l=f>e?h[1]:h[0],d=wh(b,l)}else this.D&&(l=ze(f,h),d=wh(b,l),De(e,d)<=this.f&&(g=!0,this.V&&(f=wh(b,h[0]),k=wh(b,h[1]),f=Ce(d,f),e=Ce(d,k),k=Math.sqrt(Math.min(f,
e)),k=k<=this.f)))&&(l=f>e?h[1]:h[0],d=wh(b,l));g&&(d=[Math.round(d[0]),Math.round(d[1])])}b=l;g&&(a.coordinate=b.slice(0,2),a.pixel=d);return ck.call(this,a)}function ww(){var a=La(this.s);a.length&&(a.forEach(this.jk,this),this.s={});return!1}function xw(a,b){return Ee(this.C,a.Z)-Ee(this.C,b.Z)};function yw(a,b,d,e,f,g){this.s=a;this.B=b;this.Pa=d;this.j=e;this.o=f;this.aa=g;this.c={};this.listenerKeys_=[];this.f=this.i=this.b=null}yw.$inject="$http $q $rootScope $timeout gmfThemes gmfTreeManager".split(" ");yw.prototype.Of=function(){var a=this.b,b,d;for(d in this.c)b=this.c[+d],b.active&&(a.T.remove(b.interaction),bl(a,b.interaction))};yw.prototype.ensureSnapInteractionsOnTop=yw.prototype.Of;
yw.prototype.setMap=function(a){var b=this,d=this.listenerKeys_;this.b&&(this.g(),zw(this),d.forEach(A),d.length=0);if(this.b=a)this.g=this.Pa.$watchCollection(function(){if(b.aa.rootCtrl)return b.aa.rootCtrl.children},function(a){b.j(function(){a&&(zw(b),b.aa.rootCtrl.Ma(b.Zp.bind(b)))},0)}),d.push(B(this.o,"change",this.Em,this)),a=O(a),d.push(B(a,cb("center"),this.Ci,this)),d.push(B(a,cb("resolution"),this.Ci,this))};yw.prototype.setMap=yw.prototype.setMap;m=yw.prototype;
m.Em=function(){var a=this;this.f=null;this.o.ed().then(function(b){a.f=b})};m.Zp=function(a){if(!a.node.children){var b=tw(a);if(b){var d=Aw(this,a);if(d){var e=v(a),f=this.Pa.$watch(function(){return a.getState()},this.xi.bind(this,a));this.c[e]={active:!1,featureNS:"http://mapserver.gis.umn.edu/mapserver",featurePrefix:"feature",features:new hi,geometryName:"the_geom",interaction:null,maxFeatures:50,Sb:null,snappingConfig:b,Ed:a,pk:d,Yg:f};this.xi(a,a.getState())}}}};
function zw(a){for(var b in a.c){var d=a.c[+b];d&&(d.Yg(),Bw(a,d),delete a.c[+b])}}function Aw(a,b){if(null===a.f)return null;var d=b.node;if("WMS"!==d.type)return null;for(var e=[],f=0,g=d.childLayers.length;f<g;f++)d.childLayers[f].queryable&&e.push(d.childLayers[f].name);if(!e.length)return null;b=b.parent.node.mixed?d.ogcServer:Ao(b).node.ogcServer;if(!b)return null;a=a.f[b];return a.wfsSupport?{Ac:e.join(","),url:a.urlWfs}:null}
m.xi=function(a,b){a=v(a);a=this.c[a];if("on"===b){if(!a.active){b=this.b;var d=new uw({edge:a.snappingConfig.edge,features:a.features,lb:a.snappingConfig.tolerance,vertex:a.snappingConfig.vertex});bl(b,d);a.interaction=d;a.active=!0;Cw(this,a)}}else Bw(this,a)};function Bw(a,b){b.active&&(a.b.T.remove(b.interaction),b.interaction=null,b.features.clear(),b.Sb&&(b.Sb.resolve(),b.Sb=null),b.active=!1)}m.Nn=function(){this.i=null;var a,b;for(b in this.c)a=this.c[+b],a.active&&Cw(this,a)};
function Cw(a,b){b.Sb&&b.Sb.resolve();var d=a.b,e=O(d),d=d.ha(),d=Aj(e,d),e=e.getProjection().Ca,f=b.pk.Ac.split(","),d={Aa:e,featureNS:b.featureNS,featurePrefix:b.featurePrefix,Ac:f,Ge:"GML3",bbox:d,geometryName:b.geometryName,maxFeatures:b.maxFeatures},f=new up,e=new XMLSerializer,d=Gp(f,d),e=e.serializeToString(d),d=b.pk.url;b.Sb=a.B.defer();a.s.post(d,e,{timeout:b.Sb.promise}).then(function(a){b.Sb=null;b.features.clear();(a=(new up).readFeatures(a.data))&&b.features.extend(a)})}
m.Ci=function(){this.i&&this.j.cancel(this.i);this.i=this.j(this.Nn.bind(this),400)};T.service("gmfSnapping",yw);function Dw(a){this.b=a;this.c=null;this.listenerKeys_=[];B(this.b,"add",this.f,this)}Dw.prototype.g=function(a){a=a.target.S();Ew(this,a)};function Ew(a,b){a.b.forEach(function(a){Fw(a,b)})}function Fw(a,b){if(a.supportsDynamicInRange){var d=a.maxResolution,e=a.minResolution;a.inRange=(null===e||void 0===e||b>=e)&&(null===d||void 0===d||b<=d)}}Dw.prototype.f=function(a){a=a.element;if(this.c){var b=O(this.c).S();Fw(a,b)}};
ca.Object.defineProperties(Dw.prototype,{map:{configurable:!0,enumerable:!0,set:function(a){this.c&&(Za(this.listenerKeys_),this.listenerKeys_=[]);if(this.c=a)a=O(a),this.listenerKeys_.push(B(a,cb("resolution"),this.g,this)),a=a.S(),Ew(this,a)}}});Dw.$inject=["ngeoDataSources"];S.service("ngeoSyncDataSourcesMap",Dw);function Gw(a){return{restrict:"A",link:function(b,d,e){b=b.$eval(e.ngeoMap);b.Ue(d[0]);a.map=b}}}Gw.$inject=["ngeoSyncDataSourcesMap"];S.directive("ngeoMap",Gw);T.directive("gmfMap",function(){return{scope:{getMapFn:"&gmfMapMap"},controller:"GmfMapController as ctrl",template:'<div ngeo-map="ctrl.map"></div>'}});function Hw(a,b,d,e){this.map=a.getMapFn();b.Wa(this.map);d.setMap(this.map);e.setMap(this.map)}Hw.$inject=["$scope","ngeoFeatureOverlayMgr","gmfPermalink","gmfSnapping"];T.controller("GmfMapController",Hw);S.value("ngeoColorpickerTemplateUrl",function(a,b){a=b.ngeoColorpickerTemplateurl;return void 0!==a?a:"ngeo/colorpicker.html"});function Iw(a){return{restrict:"A",scope:{colors:"<?ngeoColorpicker",color:"=?ngeoColorpickerColor"},controller:"NgeoColorpickerController as ctrl",bindToController:!0,templateUrl:a}}Iw.$inject=["ngeoColorpickerTemplateUrl"];S.directive("ngeoColorpicker",Iw);
var Jw=["#F4EB37 #CDDC39 #62AF44 #009D57 #0BA9CC #4186F0 #3F5BA9 #7C3592 #A61B4A #DB4436 #F8971B #F4B400 #795046".split(" "),"#F9F7A6 #E6EEA3 #B7DBAB #7CCFA9 #93D7E8 #9FC3FF #A7B5D7 #C6A4CF #D698AD #EE9C96 #FAD199 #FFDD5E #B29189".split(" "),["#ffffff","#CCCCCC","#777","#000000"]];function Kw(){this.colors=this.colors||Jw}Kw.$inject=["$scope","$element","$attrs"];Kw.prototype.wd=function(a){this.color=a};Kw.prototype.setColor=Kw.prototype.wd;S.controller("NgeoColorpickerController",Kw);T.value("gmfSearchTemplateUrl",function(a,b){a=b.gmfSearchTemplateurl;return void 0!==a?a:"gmf/search.html"});
function Lw(a){return{restrict:"E",bindToController:{inputValue:"=?gmfSearchInputValue",placeholder:"@?gmfSearchPlaceholder"},scope:{getMapFn:"&gmfSearchMap",getDatasourcesFn:"&gmfSearchDatasources",typeaheadOptions:"<?gmfSearchOptions",featuresStyles:"<?gmfSearchStyles",clearbutton:"=gmfSearchClearbutton",colorchooser:"=gmfSearchColorchooser",coordinatesProjections:"=?gmfSearchCoordinatesprojections",additionalListeners:"=gmfSearchListeners",maxZoom:"<gmfSearchMaxzoom"},controller:"GmfSearchController as ctrl",
templateUrl:a,link:function(a,d){if(!a.clearbutton){var b=a.ctrl;d.find("input").on("focus blur",function(){b.clear()})}}}}Lw.$inject=["gmfSearchTemplateUrl"];T.directive("gmfSearch",Lw);
function Mw(a,b,d,e,f,g,h,k,l){var n=this;this.I=a;this.s=b;this.u=d;this.ga=e;this.B=k;this.aa=l;this.N=g;this.C=h;this.i=f;this.b=this.I.getMapFn();this.g={};this.clearButton=this.I.clearbutton||!1;this.colorchooser=this.I.colorchooser||!1;this.placeholder="";this.maxZoom=16;b=this.I.coordinatesProjections;void 0===b?b=[O(this.b).getProjection()]:b=this.i.hg(b);this.j=b;Nw(this);this.c=h.ob();this.c.setStyle(this.o.bind(this));this.f=this.I.getDatasourcesFn();this.options={highlight:!0};w(this.options,
this.I.typeaheadOptions||{});this.datasets=[];this.inputValue="";h={};for(b=0;b<this.f.length;h={filters:h.filters,datasource:h.datasource},b++)h.datasource=this.f[b],d=void 0!==h.datasource.groupValues?h.datasource.groupValues:[],f=h.datasource.groupActions?h.datasource.groupActions:[],h.filters=[],d.length?d.forEach(function(a){return function(b){a.filters.push({title:b,filter:Ow(b)})}}(h),this):h.filters.push({title:"",filter:Ow()}),f.forEach(function(a){return function(b){a.filters.push({title:e.getString(b.title),
filter:Pw(b.action)})}}(h),this),h.filters.forEach(function(a){return function(b){this.datasets.push(Qw(this,{bloodhoundOptions:a.datasource.bloodhoundOptions,Ff:b.title,Vr:"layer_name",labelKey:a.datasource.labelKey,projection:a.datasource.projection,typeaheadDatasetOptions:a.datasource.typeaheadDatasetOptions,url:a.datasource.url},b.filter))}}(h),this);this.datasets.push({source:Rw(this,O(this.b)),name:"coordinates",display:"label",templates:{header:function(){return'<div class="gmf-search-header" translate>'+
e.getString("Recenter to")+"</div>"},suggestion:function(a){return'<div class="gmf-search-datum">'+('<p class="gmf-search-label">'+a.label+"</p>")+"</div>"}}});this.displayColorPicker=!1;a.$watch(function(){return n.color},this.Xj.bind(this));this.listeners=Sw(this.I.additionalListeners,{select:Tw.bind(this),close:Uw.bind(this),datasetsempty:Vw.bind(this)})}Mw.$inject="$scope $compile $timeout gettextCatalog ngeoAutoProjection ngeoSearchCreateGeoJSONBloodhound ngeoFeatureOverlayMgr gmfThemes gmfTreeManager".split(" ");
function Sw(a,b){return a?{open:a.open,close:a.close?function(){b.close();a.close()}:b.close,cursorchange:a.cursorchange,datasetsempty:a.datasetsempty,select:a.select?function(d,e,f){b.select(d,e,f);a.select(d,e,f)}:b.select,autocomplete:a.autocomplete}:b}
function Qw(a,b,d){var e=a.ga,f=a.I,g=a.s;a=Ww(a,b,d);a={limit:Infinity,source:a.ttAdapter(),display:function(a){return a.get(b.labelKey)},templates:{header:function(){return void 0===b.Ff?"":'<div class="gmf-search-header">'+e.getString(b.Ff)+"</div>"},suggestion:function(a){var d=f.$new(!0);d.feature=a;var e='<p class="gmf-search-label" translate>'+a.get(b.labelKey)+"</p>",e=e+('<p class="gmf-search-group" translate>'+(a.get("layer_name")||b.Ff)+"</p>");return g('<div class="gmf-search-datum">'+
e+"</div>")(d)}}};b.typeaheadDatasetOptions&&w(a,b.typeaheadDatasetOptions);return a}function Pw(a){return function(b){b=b.properties;return b.actions?!b.layer_name&&b.actions.some(function(b){return b.action===a}):!1}}function Ow(a){return function(b){b=b.properties.layer_name;return void 0===b?!1:void 0===a?!0:b===a}}function Ww(a,b,d){var e=O(a.b).getProjection().Ca,f=Xw(a);a=a.N(b.url,d,lc(e),lc(b.projection),b.bloodhoundOptions,f);a.initialize();return a}
function Xw(a){var b=a.ga;return{rateLimitWait:50,prepare:function(a,e){var d=e.url,g=b.currentLanguage;e.xhrFields={withCredentials:!0};e.url=Uh(d,{query:a,lang:g,"interface":"mobile"});return e}}}function Rw(a,b){var d=b.getProjection(),e=d.H();return function(a,b){var f=[];a=this.i.bk(a);if(null!==a){var g=this.i.eh(a,e,d,this.j);null!==g&&(f.push({label:a.join(" "),position:g,tt_source:"coordinates"}),b(f))}}.bind(a)}
function Nw(a){a.g.gmfCoordinatesLayerName=new D({image:new $c({stroke:new dd({color:[0,0,0,.7],width:2}),points:4,radius:8,sd:0,angle:0})});var b=new cd({color:[65,134,240,.5]}),d=new dd({color:[65,134,240,1],width:2});a.g["default"]=new D({fill:b,stroke:d,image:new bd({radius:5,fill:b,stroke:d})});w(a.g,a.I.featuresStyles||{})}
Mw.prototype.o=function(a){a=this.g[a.get("layer_name")]||this.g["default"];if(this.color){var b=Cc(this.color),d=a.pa();if(d){var e=b.slice();e[3]=1;d.wd(e);if(d=a.la())b=b.slice(),b[3]=.5,d.wd(b)}}return a};Mw.prototype.Xj=function(a){a&&(this.color=a,this.C.xa().c())};Mw.prototype.setStyleColor=Mw.prototype.Xj;function Yw(a){if(a.clearButton){var b=$(".twitter-typeahead .tt-menu");a.inputValue?b.show():b.hide()}}Mw.prototype.qp=function(){this.c.clear();this.clear()};
Mw.prototype.onClearButton=Mw.prototype.qp;Mw.prototype.clear=function(){var a=$(".twitter-typeahead"),b=a.children(".tt-menu"),a=a.children("input");this.inputValue="";$(a[1]).typeahead("val","");b.children(".tt-dataset").empty();Yw(this);this.displayColorPicker=!1};Mw.prototype.clear=Mw.prototype.clear;Mw.prototype.blur=function(){var a=$(".twitter-typeahead").children("input");this.u(function(){$(a[1]).blur()})};Mw.prototype.blur=Mw.prototype.blur;
function Tw(a,b){"coordinates"===b.tt_source?(a=new ij(b.position),this.c.clear(),this.c.oa(new jd({geometry:a,layer_name:"gmfCoordinatesLayerName"})),O(this.b).setCenter(b.position),Zw(this)):$w(this,b)}
function $w(a,b){var d=b.get("actions"),e=b.getGeometry();if(d)for(var f={},g=0,h=d.length;g<h;f={Sc:f.Sc,ce:f.ce},g++){var k=d[g],l=k.action;f.Sc=k.data;"add_theme"==l?a.B.Gb().then(function(b){return function(d){(d=go(d,b.Sc))&&a.aa.vc(d.children)}}(f)):"add_group"==l?a.aa.vh(f.Sc):"add_layer"==l&&(k=a.f[0].groupActions,f.ce=void 0,k.forEach(function(a){return function(b){if("add_layer"===b.action)return a.ce=!0}}(f)),f.ce&&a.aa.uh(f.Sc,0,!!e))}d=a.b.ha();e&&d&&(f=O(a.b),a.c.clear(),a.c.oa(b),a.displayColorPicker=
!0,b="GeometryCollection"===e.getType()?e.H():e,Dj(f,b,{size:d,maxZoom:a.maxZoom}));Zw(a)}function Zw(a){a.clearButton||a.clear();a.blur()}function Uw(){this.clearButton||Yw(this)}function Vw(a,b,d){a=$(".twitter-typeahead .tt-menu");b=a.children(".gmf-search-no-results");if(!b.length){var e=$('<div class="gmf-search-no-results" translate>No result found</div>');a.append(e)}d?(b.show(),a.show()):b.hide()}T.controller("GmfSearchController",Mw);T.value("gmfTreeManagerModeFlush",!0);function ax(a,b,d,e){this.c=b;this.aa=d;this.b=e;this.themeName=""}ax.$inject=["gmfThemes","gmfTreeManagerModeFlush","gmfTreeManager","ngeoStateManager"];ax.prototype.nf=function(a,b){this.c?(vo(this.b,{theme:a.name}),this.themeName=a.name,this.aa.Re(a.children)):this.aa.vc(a.children,0,b)};ax.prototype.addTheme=ax.prototype.nf;ax.prototype.removeAll=function(){this.aa.removeAll()};ax.prototype.removeAll=ax.prototype.removeAll;T.service("gmfThemeManager",ax);T.directive("gmfThemeselector",function(){return{restrict:"E",controller:"gmfThemeselectorController as tsCtrl",scope:{filter:"=gmfThemeselectorFilter"},bindToController:!0,templateUrl:"gmf/themeselector.html"}});function bx(a,b,d){this.gmfThemeManager=b;this.c=d;this.listenerKeys_=[];this.listenerKeys_.push(B(this.c,"change",this.g,this));a.$on("$destroy",this.b.bind(this))}bx.$inject=["$scope","gmfThemeManager","gmfThemes"];
bx.prototype.g=function(){var a=this;this.c.Gb().then(function(b){a.themes=a.filter?b.filter(a.filter):b})};bx.prototype.uq=function(a,b){a&&this.gmfThemeManager.nf(a,b)};bx.prototype.setTheme=bx.prototype.uq;bx.prototype.b=function(){this.listenerKeys_.forEach(A);this.listenerKeys_.length=0};T.controller("gmfThemeselectorController",bx);function cx(a,b){return{restrict:"A",scope:!1,link:function(d,e,f){function g(a){a.dragging||(a=qi(k,a.originalEvent),a=k.Tf(a,function(){return!0},void 0,function(a){var b=a.get("visible");a=a.get("querySourceIds");return b&&!!a}),uh(k).style.cursor=a?"pointer":"")}function h(b){a.vb({coordinate:b.coordinate,map:k})}var k=d.$eval(f.ngeoMapQueryMap),l=null,n=null;d.$watch(f.ngeoMapQueryActive,function(e){e?(l=B(k,"click",h),(b.has("ngeoQueryOptions")?b.get("ngeoQueryOptions"):{}).Tr&&(n=B(k,"pointermove",
g))):(null!==l&&(A(l),l=null),null!==n&&(A(n),n=null),!1!==d.$eval(f.ngeoMapQueryAutoclear)&&a.clear())})}}}cx.$inject=["ngeoMapQuerent","$injector"];S.directive("ngeoMapQuery",cx);function dx(a){return function(b){var d=a.navigator,d=d.languages||d.language||d.browserLanguage||d.systemLanguage||d.userLanguage;Array.isArray(d)||(d=[d]);d=d.map(function(a){return a.substring(0,2)});d=d.filter(function(a,b,d){return d.indexOf(a)==b});return d.filter(function(a){return-1!=b.indexOf(a)})[0]}}dx.$inject=["$window"];S.factory("ngeoGetBrowserLanguage",dx);function ex(a,b){this.getActive=function(){return a[b]};this.setActive=function(d){a[b]=d}}Ea("ngeo.ToolActivate",ex);S.value("ngeoToolActivate",ex);function fx(a){this.c={};this.I=a}fx.$inject=["$rootScope"];
fx.prototype.ra=function(a,b,d){var e=this,f=this.c[a];f||(f=this.c[a]=[]);var g=this.I.$watch(b.getActive,function(d,f){if(d!==f)if(d)for(d=e.c[a],f=0;f<d.length;f++)b!=d[f].Dd&&d[f].Dd.setActive(!1);else{d=e.c[a];f=null;for(var g=!1,h=0;h<d.length;h++)g=g||d[h].Dd.getActive(),d[h].Oh&&(f=d[h].Dd);g||null===f||f.setActive(!0)}});f.push({Dd:b,Oh:d||!1,Qc:g});var h=0;f.forEach(function(a){a.Oh&&h++})};fx.prototype.registerTool=fx.prototype.ra;
fx.prototype.Na=function(a,b){if(a=this.c[a])for(var d=0;d<a.length;d++)if(a[d].Dd==b){a[d].Qc();a.splice(d,1);break}};fx.prototype.unregisterTool=fx.prototype.Na;fx.prototype.Pq=function(a){var b=this.c[a];if(b){for(var d=0;d<b.length;d++)b[d].Qc();delete this.c[a]}};fx.prototype.unregisterGroup=fx.prototype.Pq;fx.prototype.al=function(a){a.setActive(!0)};fx.prototype.activateTool=fx.prototype.al;fx.prototype.ql=function(a){a.setActive(!1)};fx.prototype.deactivateTool=fx.prototype.ql;
S.service("ngeoToolActivateMgr",fx);T.value("ngeoExportFeatureFormats",[Dt,Ct]);T.value("ngeoPointfilter","ngeoNumberCoordinates:0:{x} E, {y} N");T.value("ngeoQueryOptions",{limit:20});
function gx(a,b,d){var e=this;this.B=d.get("ngeoLocation");this.B.tg("debug")&&(window.injector=d);d.get("ngeoFeatureHelper").Tb(O(this.map).getProjection());this.gmfThemeManager=d.get("gmfThemeManager");this.aa=d.get("gmfTreeManager");this.c=d.get("gmfThemes");var f=d.get("gmfAuthentication"),g=d.get("gmfPermalink"),h=function(a){var b=null!==a.nk.username?a.nk.role_id:void 0;"ready"!==a.type&&(hx(this),this.i(!0));this.c.Mi(b);this.N()}.bind(this);B(f,"ready",h);B(f,"login",h);B(f,"logout",h);this.searchDatasources=
[{labelKey:"label",groupValues:d.get("gmfSearchGroups"),groupActions:d.get("gmfSearchActions"),projection:"EPSG:"+(a.srid||21781),url:d.get("fulltextsearchUrl")}];this.dimensions={};g.Uj(this.dimensions);d.get("gmfDataSourcesManager");if(d.has("gmfDefaultDimensions")){a=d.get("gmfDefaultDimensions");for(var k in a)void 0===this.dimensions[k]&&(this.dimensions[k]=a[k])}var l=d.get("ngeoBackgroundLayerMgr");b.$watchCollection(function(){return e.dimensions},function(){l.tc(e.map,e.dimensions)});l.on("change",
function(){l.tc(this.map,this.dimensions)},this);this.rightNavVisible=this.leftNavVisible=!1;k=new cd({color:[255,170,0,.6]});a=new dd({color:[255,170,0,1],width:2});this.queryFeatureStyle=new D({fill:k,image:new bd({fill:k,radius:5,stroke:a}),stroke:a});this.queryAutoClear=this.queryActive=!0;this.printActive=this.printPanelActive=!1;this.u=d.get("ngeoMapQuerent");b.$watch(function(){return e.printPanelActive},function(a){a||e.queryActive||e.u.clear();e.queryAutoClear=!a;e.printActive=a});this.drawProfilePanelActive=
this.drawFeatureActive=this.measureLengthActive=this.measurePointActive=!1;this.gmfUser=d.get("gmfUser");b.$watch(function(){return e.gmfUser.username},function(a){null!==a&&e.R&&(e.rightNavVisible=!1)});this.s=d.get("ngeoGetBrowserLanguage");this.f=d.get("ngeoStateManager");this.C=d.get("tmhDynamicLocale");this.j=b;this.o=d.get("defaultLang");this.b=d.get("langUrls");this.g=d.get("gettextCatalog");ix(this);this.mapToolsGroup="mapTools";d.get("ngeoFeatureOverlayMgr").Wa(this.map);k=d.get("ngeoToolActivateMgr");
k.ra("mapTools",new ex(this,"queryActive"),!0);k.ra("mapTools",new ex(this,"measurePointActive"),!1);k.ra("mapTools",new ex(this,"measureLengthActive"),!1);k.ra("mapTools",new ex(this,"drawFeatureActive"),!1);k.ra("mapTools",new ex(this,"drawProfilePanelActive"),!1);k.ra("mapTools",new ex(this,"printPanelActive"),!1);b.$watch(function(){return e.gmfThemeManager.themeName},function(a){var b=e.map;e.c.oi(a).then(function(a){if(a&&(a=a.functionalities.default_basemap)&&0<a.length){var d=a[0];ho(e.c,
e.dimensions).then(function(a){(a=Cd(a,function(a){return a.get("label")===d}))&&l.set(b,a)})}})});this.i=function(a){var b=this;ho(this.c,this.dimensions).then(function(d){var e;a||(e=g.Wh(d));if(!e){var f=b.gmfUser.functionalities;if(f&&(f=f.default_basemap,0<f.length)){var h=f[0];e=Cd(d,function(a){return a.get("label")===h})}}!e&&d[1]&&(e=d[1]);e&&l.set(b.map,e)})}.bind(this);this.i(!1);this.hasEditableLayers=!1;this.N=function(){var a=this;this.c.hasEditableLayers().then(function(b){a.hasEditableLayers=
b})};var n=d.get("ngeoCreatePopup"),p=window.c||{};window.c=p;p.OpenIframePopup=function(a,b,d,e){var f=n();f.setUrl(""+a);p.OpenPopup_(f,b,d,e)};p.OpenTextPopup=function(a,b,d,e){var f=n();f.setContent(""+a,!0);p.OpenPopup_(f,b,d,e)};p.OpenPopup_=function(a,b,d,e){d&&a.Ad(""+d);e&&a.Se(""+e);a.setTitle(""+b);a.Rg(!0);a.yd(!0)}}Ea("gmf.AbstractController",gx);gx.$inject=["config","$scope","$injector"];
gx.prototype.Xe=function(a){this.g.setCurrentLanguage(a);this.g.loadRemote(this.b[a]);this.C.set(a);this.lang=a};gx.prototype.switchLanguage=gx.prototype.Xe;function ix(a){a.j.$watch(function(){return a.lang},function(b){vo(a.f,{lang:b})});var b=a.s(Object.keys(a.b)),d=a.f.Gc.lang;void 0!==d&&d in a.b?a.Xe(d):void 0!==b&&b in a.b?a.Xe(b):a.Xe(a.o)}
function hx(a){a.c.Gb().then(function(b){var d,e=a.gmfUser.functionalities;e&&"default_theme"in e&&(e=e.default_theme,0<e.length&&(d=e[0]));d&&(b=go(b,d))&&a.gmfThemeManager.nf(b,!0)})}T.controller("AbstractController",gx);function jx(a){return{restrict:"A",scope:!1,link:function(b,d,e){var f=b.$eval(e.ngeoBboxQueryMap),g=new pk({condition:Wj});g.on("boxend",function(){var b=g.getGeometry().H();a.vb({extent:b,map:f})});b.$watch(e.ngeoBboxQueryActive,function(d){d?bl(f,g):(f.T.remove(g),!1!==b.$eval(e.ngeoBboxQueryAutoclear)&&a.clear())})}}}jx.$inject=["ngeoMapQuerent"];S.directive("ngeoBboxQuery",jx);function kx(a,b){this.c=a;this.b=b}kx.$inject=["$http","gmfRasterUrl"];kx.prototype.jg=function(a,b){b=b||{};b.lon=a[0];b.lat=a[1];return this.c.get(this.b,{params:b}).then(this.g.bind(this))};kx.prototype.getRaster=kx.prototype.jg;kx.prototype.g=function(a){return a.data};T.service("gmfRaster",kx);T.directive("gmfContextualdata",function(){return{restrict:"A",scope:!1,controller:"GmfContextualdataController as cdCtrl",bindToController:{map:"<gmfContextualdataMap",projections:"<gmfContextualdataProjections",callback:"<gmfContextualdataCallback"},link:function(a,b,d,e){e.Wa()}}});function lx(a,b,d){this.i=a;this.g=b;this.j=d;angular.element("body").on("mousedown",this.f.bind(this))}lx.$inject=["$compile","$scope","gmfRaster"];
lx.prototype.Wa=function(){var a=document.createElement("DIV");a.classList.add("popover","bottom","gmf-contextualdata");angular.element(a).css("position","relative");var b=document.createElement("DIV");b.classList.add("arrow");a.appendChild(b);this.c=document.createElement("DIV");this.c.setAttribute("gmf-contextualdatacontent","");this.c.classList.add("popover-content");a.appendChild(this.c);this.b=new nh({element:a,Zg:!0,Rd:!0,dl:{duration:250},Lc:"top-center"});this.map.Ja.push(this.b);a=uh(this.map);
Tu(a,"contextmenu",this.o,!1,this)};lx.prototype.o=function(a){var b=this;this.g.$apply(function(){var d=qi(b.map,a),d=b.map.wa(d);mx(b,d);a.preventDefault();b.f();var e=b.b.get(oh);angular.element(e).css("display","block");b.b.setPosition(d)})};
function mx(a,b){var d=a.g.$new(!0);a.i(a.c)(d);var e=O(a.map).getProjection().Ca;a.projections.forEach(function(a){var f=wc(b,e,"EPSG:"+a);d["coord_"+a]=f;d["coord_"+a+"_eastern"]=f[0];d["coord_"+a+"_northern"]=f[1]});var f=function(a){w(d,a);this.callback&&w(d,this.callback.call(this,b,a))}.bind(a);a.j.jg(b).then(f,function(){console.error("Error on getting the raster.")})}lx.prototype.f=function(){var a=this.b.get(oh);angular.element(a).css("display","none")};
T.controller("GmfContextualdataController",lx);function nx(a){return{restrict:"A",scope:!0,templateUrl:a}}nx.$inject=["gmfContextualdatacontentTemplateUrl"];T.directive("gmfContextualdatacontent",nx);function ox(a,b){this.ga=b;this.b=a.has("ngeoCsvEncoding")?a.get("ngeoCsvEncoding"):"utf-8";a.has("ngeoCsvExtension")&&a.get("ngeoCsvExtension");this.g=a.has("ngeoCsvIncludeHeader")?a.get("ngeoCsvIncludeHeader"):!0;this.c=a.has("ngeoCsvQuote")?a.get("ngeoCsvQuote"):'"';this.i=a.has("ngeoCsvSeparator")?a.get("ngeoCsvSeparator"):",";this.f=a.get("ngeoDownload")}ox.$inject=["$injector","gettextCatalog"];
ox.prototype.Uh=function(a,b){var d=this;if(!a.length||!b.length)return"";var e=b.map(function(a){return d.ga.getString(a.name)}),e=px(this,e);a=a.map(function(a){var e=b.map(function(b){return a[b.name]});return px(d,e)});return this.g?e+a.join(""):a.join("")};ox.prototype.generateCsv=ox.prototype.Uh;function px(a,b){var d=new RegExp(a.c,"g"),e=a.c+a.c;return b.map(function(b){return void 0!==b&&null!==b?a.c+(""+b).replace(d,e)+a.c:""}).join(a.i)+"\n"}
ox.prototype.Wg=function(a,b,d){a=this.Uh(a,b);this.f(a,d,"attachment/csv;charset="+this.b)};ox.prototype.startDownload=ox.prototype.Wg;S.service("ngeoCsvDownload",ox);S.value("ngeoGridTemplateUrl",function(a,b){a=b.ngeoGridTemplateurl;return void 0!==a?a:"ngeo/grid.html"});function qx(a,b){this.data=a;this.columnDefs=b;this.selectedRows={}}Ea("ngeo.GridConfig",qx);function rx(a){return""+v(a)}qx.getRowUid=rx;qx.prototype.Hc=function(a){return!!this.selectedRows[rx(a)]};qx.prototype.isRowSelected=qx.prototype.Hc;qx.prototype.kg=function(){return Object.keys(this.selectedRows).length};qx.prototype.getSelectedCount=qx.prototype.kg;
qx.prototype.ni=function(){var a=this;return this.data.filter(function(b){return a.Hc(b)})};qx.prototype.getSelectedRows=qx.prototype.ni;function sx(a,b){var d=rx(b);a.selectedRows[d]=b}function tx(a,b){var d=rx(b);a.Hc(b)?delete a.selectedRows[d]:a.selectedRows[d]=b}qx.prototype.selectAll=function(){var a=this;this.data.forEach(function(b){sx(a,b)})};qx.prototype.selectAll=qx.prototype.selectAll;qx.prototype.Fd=function(){for(var a in this.selectedRows)delete this.selectedRows[a]};
qx.prototype.unselectAll=qx.prototype.Fd;qx.prototype.ue=function(){var a=this;this.data.forEach(function(b){tx(a,b)})};qx.prototype.invertSelection=qx.prototype.ue;function ux(a,b,d){return d(a,b)}ux.$inject=["$element","$attrs","ngeoGridTemplateUrl"];S.component("ngeoGrid",{controller:"ngeoGridController as ctrl",bindings:{configuration:"=ngeoGridConfiguration"},templateUrl:ux});
function vx(a){this.I=a;this.sortAscending=!0;this.floatTheadConfig={scrollContainer:function(a){return a.closest(".ngeo-grid-table-container")}}}vx.$inject=["$scope"];vx.prototype.$onInit=function(){this.selectedRows=this.configuration.selectedRows};vx.prototype.sort=function(a){this.sortAscending=this.sortedBy===a?!this.sortAscending:!0;this.sortedBy=a;var b=this.sortAscending?1:-1;this.configuration.data.sort(function(d,e){return d[a]?e[a]?d[a]>e[a]?b:-b:-1:1})};vx.prototype.sort=vx.prototype.sort;
vx.prototype.il=function(a,b){var d=!b.altKey&&!(b.metaKey||b.ctrlKey)&&b.shiftKey;b=!b.altKey&&(Oc?b.metaKey:b.ctrlKey)&&!b.shiftKey;if(d&&!b){var e=rx(a),d=this.configuration.data;if(!this.configuration.Hc(a)){b=void 0;for(var f=[],g=0;g<d.length;g++){var h=d[g],k=rx(h);e===k?b=g:this.configuration.Hc(h)&&f.push(g)}f.length||sx(this.configuration,a);e=Infinity;a=f[0];for(g=0;g<f.length;g++)h=f[g],k=Math.abs(h-b),e>k&&(e=k,a=h);f=b>a?b:a;for(b=b<a?b:a;b<=f;b++)sx(this.configuration,d[b])}}else!d&&
b?tx(this.configuration,a):(d=this.configuration.Hc(a),this.configuration.Fd(),d||sx(this.configuration,a))};vx.prototype.clickRow=vx.prototype.il;vx.prototype.Kp=function(a){var b=!a.altKey&&(Oc?a.metaKey:a.ctrlKey)&&!a.shiftKey;(!a.altKey&&!a.metaKey&&!a.ctrlKey&&a.shiftKey||b)&&a.preventDefault()};vx.prototype.preventTextSelection=vx.prototype.Kp;S.controller("ngeoGridController",vx);S.value("gmfDisplayquerygridTemplateUrl",function(a,b){a=b.gmfDisplayquerygridTemplateurl;return void 0!==a?a:"gmf/displayquerygrid.html"});function wx(a,b,d){return d(a,b)}wx.$inject=["$element","$attrs","gmfDisplayquerygridTemplateUrl"];
T.component("gmfDisplayquerygrid",{controller:"GmfDisplayquerygridController as ctrl",bindings:{active:"=gmfDisplayquerygridActive",featuresStyleFn:"&gmfDisplayquerygridFeaturesstyle",selectedFeatureStyleFn:"&gmfDisplayquerygridSourceselectedfeaturestyle",getMapFn:"&gmfDisplayquerygridMap",removeEmptyColumnsFn:"&?gmfDisplayquerygridRemoveemptycolumns",maxResultsFn:"&?gmfDisplayquerygridMaxresults",maxRecenterZoomFn:"&?gmfDisplayquerygridMaxrecenterzoom",mergeTabsFn:"&?gmfDisplayquerygridMergetabs"},
templateUrl:wx});
function xx(a,b,d,e,f,g,h){var k=this;a=a.has("ngeoQueryOptions")?a.get("ngeoQueryOptions"):{};this.s=b;this.$timeout_=f;this.ngeoQueryResult=d;this.C=g;this.u=h;this.maxResults=void 0!==a.limit?a.limit:50;this.pending=this.active=!1;this.gridSources={};this.loadedGridSources=[];this.selectedTab=null;this.B=!1;this.i={};this.j={};this.g=new hi;this.f=e.ob();this.b=new hi;this.f.pc(this.b);this.o=null;this.s.$watchCollection(function(){return d},function(a,b){a!==b&&yx(k)});this.c=null}
xx.$inject="$injector $scope ngeoQueryResult ngeoFeatureOverlayMgr $timeout ngeoCsvDownload $element".split(" ");
xx.prototype.$onInit=function(){this.B=this.removeEmptyColumnsFn?!0===this.removeEmptyColumnsFn():!1;this.maxRecenterZoom=this.maxRecenterZoomFn?this.maxRecenterZoomFn():void 0;this.i=this.mergeTabsFn?this.mergeTabsFn():{};var a=this.featuresStyleFn();void 0!==a&&this.f.setStyle(a);this.f.pc(this.g);a=this.selectedFeatureStyleFn();if(void 0===a)var a=new cd({color:[255,0,0,.6]}),b=new dd({color:[255,0,0,1],width:2}),a=new D({fill:a,image:new bd({fill:a,radius:5,stroke:b}),stroke:b,zIndex:10});this.f.setStyle(a);
if(a=this.getMapFn)this.o=a()};xx.prototype.Ul=function(){var a=this;return this.loadedGridSources.map(function(b){return a.gridSources[b]})};xx.prototype.getGridSources=xx.prototype.Ul;
function yx(a){if(a.ngeoQueryResult.total||zx(a)){a.active=!0;a.pending=!1;var b=a.ngeoQueryResult.sources;0<Object.keys(a.i).length&&(b=Ax(a,b));b.forEach(function(b){b.tooManyResults?Bx(a,null,b):0<b.features.length&&Cx(a,b)});a.loadedGridSources.length?null!==a.selectedTab&&""+a.selectedTab in a.gridSources||a.$timeout_(function(){var b=a.loadedGridSources[0];a.Sj(a.gridSources[b]);Dx(a,b)},0):a.active=!1}else b=a.active,a.clear(),b&&(a.active=a.ngeoQueryResult.pending,a.pending=a.ngeoQueryResult.pending)}
function zx(a){return a.ngeoQueryResult.sources.some(function(a){return a.tooManyResults})}xx.prototype.In=function(a){return this.selectedTab===a.source.id};xx.prototype.isSelected=xx.prototype.In;function Ax(a,b){var d=[],e={};b.forEach(function(b){null===Ex(a,b,e)&&d.push(b)});for(var f in e)d.push(e[f]);return d}
function Ex(a,b,d){var e=null,f;for(f in a.i)if(a.i[f].some(function(a){return a==b.id})){e=f;break}if(null===e)return null;var g;e in d?g=d[e]:(g={features:[],id:e,label:e,limit:a.maxResults,pending:!1,queried:!0,tooManyResults:!1,totalFeatureCount:void 0},d[e]=g);b.features.forEach(function(a){g.features.push(a)});g.tooManyResults=g.tooManyResults||b.tooManyResults;g.tooManyResults&&(g.totalFeatureCount=void 0!==g.totalFeatureCount?g.totalFeatureCount+g.features.length:g.features.length,g.features=
[]);void 0!==b.totalFeatureCount&&(g.totalFeatureCount=void 0!==g.totalFeatureCount?g.totalFeatureCount+b.totalFeatureCount:b.totalFeatureCount);return g}function Cx(a,b){var d=[],e=[],f={},g,h;b.features.forEach(function(a){g=db(a);void 0!==g&&(h=a.b,-1===e.indexOf(h)&&e.push(h),d.push(g),f[rx(g)]=a)});Fx(a,d,e);0<d.length&&Bx(a,d,b)&&(a.j[""+b.id]=f)}function Fx(a,b,d){b.forEach(function(a){d.forEach(function(b){delete a[b]});delete a.boundedBy});!0===a.B&&Gx(b)}
function Gx(a){var b=[],d,e;for(e in a[0])for(d=0;d<a.length;d++)if(void 0!==a[d][e]){b.push(e);break}var f;a.forEach(function(a){f=[];for(e in a)-1===b.indexOf(e)&&f.push(e);f.forEach(function(b){delete a[b]})})}function Bx(a,b,d){var e=""+d.id,f=null;if(null!==b&&(f=Hx(b),null===f))return!1;-1==a.loadedGridSources.indexOf(e)&&a.loadedGridSources.push(e);a.gridSources[e]={configuration:f,source:d};return!0}
function Hx(a){var b=[];Object.keys(a[0]).forEach(function(a){"ol_uid"!==a&&b.push({name:a})});return 0<b.length?new qx(a,b):null}xx.prototype.clear=function(){this.pending=this.active=!1;this.gridSources={};this.loadedGridSources=[];this.selectedTab=null;this.tooManyResults=!1;this.g.clear();this.b.clear();this.j={};this.c&&this.c()};xx.prototype.clear=xx.prototype.clear;
xx.prototype.Sj=function(a){var b=this;this.selectedTab=a.source.id;this.c&&(this.c(),this.c=null);null!==a.configuration&&(this.c=this.s.$watchCollection(function(){return a.configuration.selectedRows},function(a,e){Object.keys(a)!==Object.keys(e)&&null!==b.selectedTab&&Ix(b,b.gridSources[""+b.selectedTab])}));Ix(this,a)};xx.prototype.selectTab=xx.prototype.Sj;
function Dx(a,b){var d=a.u.find("div.tab-pane#"+b);d.removeClass("active").addClass("active");a.$timeout_(function(){d.find("div.ngeo-grid-table-container table").trigger("reflow")})}function Ix(a,b){a.g.clear();a.b.clear();if(null!==b.configuration){var d=a.j[""+b.source.id];b=b.configuration.selectedRows;for(var e in d){var f=d[e];e in b?a.b.push(f):a.g.push(f)}}}xx.prototype.Nb=function(){return null===this.selectedTab?null:this.gridSources[""+this.selectedTab]};
xx.prototype.getActiveGridSource=xx.prototype.Nb;xx.prototype.Hn=function(){var a=this.Nb();return null===a||null===a.configuration?!1:0<a.configuration.kg()};xx.prototype.isOneSelected=xx.prototype.Hn;xx.prototype.cm=function(){var a=this.Nb();return null===a||null===a.configuration?0:a.configuration.kg()};xx.prototype.getSelectedRowCount=xx.prototype.cm;xx.prototype.selectAll=function(){var a=this.Nb();null!==a&&a.configuration.selectAll()};xx.prototype.selectAll=xx.prototype.selectAll;
xx.prototype.Fd=function(){var a=this.Nb();null!==a&&a.configuration.Fd()};xx.prototype.unselectAll=xx.prototype.Fd;xx.prototype.ue=function(){var a=this.Nb();null!==a&&a.configuration.ue()};xx.prototype.invertSelection=xx.prototype.ue;xx.prototype.cr=function(){if(null!==this.Nb()){var a=gb();this.b.forEach(function(b){sb(a,b.getGeometry().H())});var b=this.o.ha(),d=this.maxRecenterZoom;Dj(O(this.o),a,{size:b,maxZoom:d})}};xx.prototype.zoomToSelection=xx.prototype.cr;
xx.prototype.Hf=function(){var a=this.Nb();if(null!==a){var b=a.configuration.columnDefs,a=a.configuration.ni();this.C.Wg(a,b,"query-results")}};xx.prototype.downloadCsv=xx.prototype.Hf;T.controller("GmfDisplayquerygridController",xx);T.directive("gmfFeaturestyle",function(){return{controller:"GmfFeaturestyleController as fsCtrl",scope:{feature:"=gmfFeaturestyleFeature"},bindToController:!0,templateUrl:"gmf/featurestyle.html"}});function Jx(a,b){var d=this;this.I=a;this.c=b;this.measure=this.color=void 0;a.$watch(function(){return d.color},this.i.bind(this));this.g=[];a.$watch(function(){return d.feature},this.j.bind(this))}Jx.$inject=["$scope","ngeoFeatureHelper"];
Jx.prototype.j=function(a,b){var d=this.g;b&&(d.forEach(function(a){A(a)},this),this.measure=this.color=this.type=void 0);a&&("acnomsk".split("").forEach(function(b){d.push(B(a,cb(b),this.b,this))},this),b=a.getGeometry(),d.push(B(b,"change",this.f,this)),this.type=this.c.getType(a),this.color=this.c.Yf(a),this.measure=this.c.Bc(a))};Jx.prototype.i=function(a){this.feature&&a&&this.feature.get("c")!==a&&this.feature.set("c",a)};Jx.prototype.em=function(a){return Kx(this,"a",a)};
Jx.prototype.getSetAngle=Jx.prototype.em;Jx.prototype.fm=function(a){return Kx(this,"n",a)};Jx.prototype.getSetName=Jx.prototype.fm;Jx.prototype.gm=function(a){return Kx(this,"o",a)};Jx.prototype.getSetOpacity=Jx.prototype.gm;Jx.prototype.im=function(a){return Kx(this,"m",a)};Jx.prototype.getSetShowMeasure=Jx.prototype.im;Jx.prototype.jm=function(a){return Kx(this,"s",a)};Jx.prototype.getSetSize=Jx.prototype.jm;Jx.prototype.km=function(a){return Kx(this,"k",a)};Jx.prototype.getSetStroke=Jx.prototype.km;
function Kx(a,b,d){void 0!==d&&a.feature.set(b,d);return a.feature.get(b)}Jx.prototype.b=function(){var a=this.feature;a&&this.c.setStyle(a,!0)};Jx.prototype.f=function(){var a=this.feature;this.measure=this.c.Bc(a);this.c.gd(a)&&this.b();this.I.$apply()};T.controller("GmfFeaturestyleController",Jx);function Lx(a,b){Va.call(this,a);this.action=b}u(Lx,Va);
function Mx(a,b){b=b?b:{};b.Lc="top-left";this.listenerKeys_=[];this.i=null;this.V=[];var d=$("<div/>",{"class":"panel panel-default"});this.s=void 0!==a.autoClose?a.autoClose:!0;if(a.title){var e=$("<div>",{"class":"panel-heading"}).appendTo(d);$("<span>",{text:a.title}).appendTo(e)}var f=$("<div>",{"class":"list-group"}).appendTo(d);this.o=[];a.actions.forEach(function(a){this.o.push($("<button>",{"class":"list-group-item","data-name":a.name,text:[" ",void 0!==a.label?a.label:a.name].join("")}).appendTo(f).prepend($("<span>",
{"class":void 0!==a.cls?a.cls:""})))},this);b.element=d[0];nh.call(this,b)}u(Mx,nh);Mx.prototype.setMap=function(a){var b=this.listenerKeys_,d=this.V;this.get(ph)&&(b.forEach(function(a){$u(a)},this),b.length=0,d.forEach(function(a){A(a)},this),d.length=0);nh.prototype.setMap.call(this,a);a&&(this.o.forEach(function(a){var d=a.data();b.push(Tu(a[0],"click",this.D.bind(this,d.name),!1,this))},this),d.push(B(a,"pointermove",this.M,this)))};Mx.prototype.setMap=Mx.prototype.setMap;
Mx.prototype.open=function(a){this.setPosition(a);this.s&&(this.i=Tu(document.documentElement,"mousedown",this.G,!1,this))};Mx.prototype.open=Mx.prototype.open;Mx.prototype.close=function(){this.setPosition(void 0);null!==this.i&&$u(this.i)};Mx.prototype.close=Mx.prototype.close;Mx.prototype.D=function(a,b){this.dispatchEvent(new Lx("actionclick",a));this.s&&this.close();b.stopPropagation()};Mx.prototype.G=function(a){var b=this.get(oh);b&&!$(a.target).closest(b).length&&this.close()};
Mx.prototype.M=function(a){var b=a.originalEvent.target;this.get(oh).contains(b)&&(a.coordinate=[Infinity,Infinity],a.pixel=[Infinity,Infinity])};function Nx(a){return{restrict:"A",controller:"ngeoBtnGroupController",link:function(b,d,e,f){var g=a(e.ngeoBtnGroupActive).assign;g&&b.$watch(function(){return f.Td.some(function(a){return!0===a(b)})},function(a){g(b,a)})}}}Nx.$inject=["$parse"];S.directive("ngeoBtnGroup",Nx);function Ox(a){this.Td=[];this.I=a}Ox.$inject=["$scope"];function Px(a,b){a.Td.forEach(function(a,e){e!=b&&a.assign(this.I,!1)},a)}S.controller("ngeoBtnGroupController",Ox);
function Qx(a){return{require:["?^ngeoBtnGroup","ngModel"],restrict:"A",link:function(b,d,e,f){var g=f[0],h=f[1],k=-1;e=a(e.ngModel);f=e.assign;void 0===e(b)&&f(b,!1);null!==g&&(g.Td.push(e),k=g.Td.length-1);d.on("click",function(){b.$apply(function(){h.$setViewValue(!h.$viewValue);h.$render()})});h.$render=function(){h.$viewValue&&null!==g&&Px(g,k);d.toggleClass("active",h.$viewValue)}}}}Qx.$inject=["$parse"];S.directive("ngeoBtn",Qx);S.value("ngeoDecorateInteraction",function(a){Object.defineProperty(a,"active",{get:function(){return a.getActive()},set:function(b){a.setActive(b)}})});S.directive("ngeoDrawpoint",function(){return{restrict:"A",require:"^^ngeoDrawfeature",link:function(a,b,d,e){a=new rq({type:"Point"});e.nc(a);e.drawPoint=a;B(a,"drawend",e.gc.bind(e,"Point"),e);B(a,cb("active"),e.fc,e)}}});S.directive("ngeoDrawrectangle",function(){return{restrict:"A",require:"^^ngeoDrawfeature",link:function(a,b,d,e){a=new rq({type:"LineString",Nl:function(a,b){b||(b=new lj(null));var d=a[0];a=a[1];b.fa([[d,[d[0],a[1]],a,[a[0],d[1]],d]]);return b},Ri:2});e.nc(a);e.drawRectangle=a;B(a,"drawend",e.gc.bind(e,"Rectangle"),e);B(a,cb("active"),e.fc,e)}}});S.directive("ngeoDrawtext",function(){return{restrict:"A",require:"^^ngeoDrawfeature",link:function(a,b,d,e){a=new rq({type:"Point"});e.nc(a);e.drawText=a;B(a,"drawend",e.gc.bind(e,"Text"),e);B(a,cb("active"),e.fc,e)}}});function Rx(a,b){b=b?b:{};iq.call(this,b);void 0!==b.continueMsg?this.continueMsg=b.continueMsg:(this.continueMsg=document.createElement("span"),this.continueMsg.textContent="Click to continue drawing the polygon.",b=document.createElement("br"),b.textContent="Double-click or click starting point to finish.",this.continueMsg.appendChild(b));this.format=a}u(Rx,iq);Ea("ngeo.interaction.MeasureArea",Rx);Rx.prototype.B=function(a,b){return new rq({type:"Polygon",source:b,style:a})};
Rx.prototype.rg=function(a){var b=this.i.getGeometry(),d=O(this.ma).getProjection(),d=kq(b,d,0,this.format),e=null;2<b.J()[0].length&&(e=(new ij(Ue(b))).J());a(d,e)};function Sx(a,b,d){return{restrict:"A",require:"^^ngeoDrawfeature",link:function(e,f,g,h){f=b("Click to start drawing polygon");g=b("Click to continue drawing<br/>Double-click or click starting point to finish");e=new Rx(d("ngeoUnitPrefix"),{style:new D,startMsg:a("<div translate>"+f+"</div>")(e)[0],continueMsg:a("<div translate>"+g+"</div>")(e)[0]});h.nc(e);h.measureArea=e;B(e,"measureend",h.gc.bind(h,"Polygon"),h);B(e,cb("active"),h.fc,h)}}}Sx.$inject=["$compile","gettext","$filter"];
S.directive("ngeoMeasurearea",Sx);function Tx(a,b,d){return{restrict:"A",require:"^^ngeoDrawfeature",link:function(e,f,g,h){f=b("Click to start drawing circle");g=b("Click to finish");e=new Jq(d("ngeoUnitPrefix"),{style:new D,startMsg:a("<div translate>"+f+"</div>")(e)[0],continueMsg:a("<div translate>"+g+"</div>")(e)[0]});h.nc(e);h.measureAzimut=e;B(e,"measureend",function(a){var b=a.feature.getGeometry(),d=wl(b.b)[1],d=qj(d);a.feature=new jd(d);b=Mq(wl(b.b)[0]);a.feature.set("azimut",b);h.gc("Circle",a)},h);B(e,cb("active"),h.fc,
h)}}}Tx.$inject=["$compile","gettext","$filter"];S.directive("ngeoMeasureazimut",Tx);function Ux(a,b){b=b?b:{};iq.call(this,b);void 0!==b.continueMsg?this.continueMsg=b.continueMsg:(this.continueMsg=document.createElement("span"),this.continueMsg.textContent="Click to continue drawing the line.",b=document.createElement("br"),b.textContent="Double-click or click last point to finish.",this.continueMsg.appendChild(b));this.format=a}u(Ux,iq);Ea("ngeo.interaction.MeasureLength",Ux);Ux.prototype.B=function(a,b){return new rq({type:"LineString",source:b,style:a})};
Ux.prototype.rg=function(a){var b=this.i.getGeometry(),d=O(this.ma).getProjection(),d=lq(b,d,0,this.format);a(d,Ld(b))};function Vx(a,b,d){return{restrict:"A",require:"^^ngeoDrawfeature",link:function(e,f,g,h){f=b("Click to start drawing line");g=b("Click to continue drawing<br/>Double-click or click last point to finish");e=new Ux(d("ngeoUnitPrefix"),{style:new D,startMsg:a("<div translate>"+f+"</div>")(e)[0],continueMsg:a("<div translate>"+g+"</div>")(e)[0]});h.nc(e);h.measureLength=e;B(e,"measureend",h.gc.bind(h,"LineString"),h);B(e,cb("active"),h.fc,h)}}}Vx.$inject=["$compile","gettext","$filter"];
S.directive("ngeoMeasurelength",Vx);S.directive("ngeoDrawfeature",function(){return{controller:"ngeoDrawfeatureController as dfCtrl",scope:!0,bindToController:{active:"=ngeoDrawfeatureActive",features:"=?ngeoDrawfeatureFeatures",map:"=ngeoDrawfeatureMap"}}});function Wx(a,b,d,e,f,g,h,k){var l=this;void 0===this.active&&(this.active=!1);this.ga=f;this.b=g;this.c=h;this.g=k;this.T=[];a.$watch(function(){return l.active},function(a){!1===a&&l.T.forEach(function(a){a.setActive(!1)},l)})}Wx.$inject="$scope $compile $sce gettext gettextCatalog ngeoDecorateInteraction ngeoFeatureHelper ngeoFeatures".split(" ");
Wx.prototype.nc=function(a){this.T.push(a);a.setActive(!1);this.b(a);bl(this.map,a)};Wx.prototype.registerInteraction=Wx.prototype.nc;Wx.prototype.fc=function(){this.active=this.T.some(function(a){return a.getActive()},this)};Wx.prototype.handleActiveChange=Wx.prototype.fc;
Wx.prototype.gc=function(a,b){var d=this.features||this.g,e=new jd(b.feature.getGeometry());switch(a){case "Circle":e.set("l",!0);void 0!==b.feature.get("azimut")&&e.set("z",b.feature.get("azimut"));break;case "Text":e.set("t",!0);break;case "Rectangle":e.set("r",!0)}b=this.ga.getString(a);e.set("n",b+" "+(d.get(ki)+1));e.set("c","Text"!==a?"#DB4436":"#000000");e.set("a",0);e.set("o",.2);e.set("m",!1);e.set("s",10);e.set("k",1);this.c.setStyle(e);d.push(e)};Wx.prototype.handleDrawEnd=Wx.prototype.gc;
S.controller("ngeoDrawfeatureController",Wx);S.directive("ngeoExportfeatures",function(){return{controller:"ngeoExportfeaturesController as efCtrl",scope:!0,bindToController:{features:"=ngeoExportfeaturesFeatures"}}});
function Xx(a,b,d,e){this.i=a;var f=["ngeo-exportfeature",v(this)].join("-");this.j=f;this.g=e;var g;b.has("ngeoExportFeatureFormats")?g=b.get("ngeoExportFeatureFormats"):g=[Dt];this.c=null;this.Xa=[];if(1<g.length){a.attr("id",f);var h=$("<ul />",{"class":"dropdown-menu","aria-labelledby":f}).appendTo(a.parent()[0]);this.c=h;var k;g.forEach(function(a){k=$("<li />").appendTo(h).append($("<a />",{href:"#",text:a}).on(["click",f].join("."),this.Xm.bind(this,a)));this.Xa.push(k)},this)}this.b=g;a.on(["click",
f].join("."),this.f.bind(this));d.$on("$destroy",this.o.bind(this))}Xx.$inject=["$element","$injector","$scope","ngeoFeatureHelper"];Xx.prototype.f=function(){var a=this.features.b;if(1===this.b.length)this.g.Pf(a,this.b[0]);else if(1===a.length){var b=a[0].getGeometry(),d;this.b.forEach(function(a,f){d=this.Xa[f];a===Ct&&(b instanceof ij||b instanceof ge?d.removeClass("disabled"):d.addClass("disabled"))},this)}};
Xx.prototype.Xm=function(a,b){$(b.target.parentElement).hasClass("disabled")||this.g.Pf(this.features.b,a)};Xx.prototype.o=function(){var a=this.j;this.i.off(["click",a].join("."));this.c&&(this.c.remove(),this.Xa.forEach(function(b){b.off(["click",a].join("."))},this),this.Xa.length=0,this.c=null)};S.controller("ngeoExportfeaturesController",Xx);function Yx(a){bk.call(this,{ab:Zx,pb:$x,handleEvent:ay,bb:by});this.fb=a.condition?a.condition:ak;this.Ta=function(a){return Vj(a)&&"singleclick"==a.type};this.eb=a.sl?a.sl:this.Ta;this.Qa=this.f=null;this.ta=[0,0];this.u=this.D=!1;this.b=new qf;this.V=void 0!==a.lb?a.lb:10;this.o=this.da=!1;this.j=[];this.C=new gi({source:new gl({Xb:!1,wrapX:!!a.wrapX}),style:a.style?a.style:cy(),Vb:!0,Wb:!0});this.M={Point:this.Xo,LineString:this.jj,LinearRing:this.jj,Polygon:this.Yo,MultiPoint:this.Vo,MultiLineString:this.Uo,
MultiPolygon:this.Wo,Circle:this.So,GeometryCollection:this.To};this.s=a.features;this.s.forEach(this.Cg,this);B(this.s,"add",this.Qo,this);B(this.s,"remove",this.Ro,this);this.G=null}u(Yx,bk);m=Yx.prototype;m.Cg=function(a){var b=a.getGeometry();b&&b.getType()in this.M&&this.M[b.getType()].call(this,a,b);(b=this.ma)&&b.Da&&this.getActive()&&dy(this,this.ta,b);B(a,"change",this.ij,this)};function ey(a,b){a.u||(a.u=!0,a.dispatchEvent(new fy("modifystart",a.s,b)))}
function gy(a,b){hy(a,b);a.f&&!a.s.get(ki)&&(E(a.C).na(a.f),a.f=null);Ta(b,"change",a.ij,a)}function hy(a,b){a=a.b;var d=[];a.forEach(function(a){b===a.feature&&d.push(a)});for(var e=d.length-1;0<=e;--e)a.remove(d[e])}m.setActive=function(a){this.f&&!a&&(E(this.C).na(this.f),this.f=null);bk.prototype.setActive.call(this,a)};m.setMap=function(a){this.C.setMap(a);bk.prototype.setMap.call(this,a)};m.Qo=function(a){this.Cg(a.element)};m.ij=function(a){this.o||(a=a.target,gy(this,a),this.Cg(a))};
m.Ro=function(a){gy(this,a.element)};m.Xo=function(a,b){var d=b.J();a={feature:a,geometry:b,Z:[d,d]};this.b.insert(b.H(),a)};m.Vo=function(a,b){var d=b.J(),e,f,g;f=0;for(g=d.length;f<g;++f)e=d[f],e={feature:a,geometry:b,depth:[f],index:f,Z:[e,e]},this.b.insert(b.H(),e)};m.jj=function(a,b){var d=b.J(),e,f,g,h;e=0;for(f=d.length-1;e<f;++e)g=d.slice(e,e+2),h={feature:a,geometry:b,index:e,Z:g},this.b.insert(fb(g),h)};
m.Uo=function(a,b){var d=b.J(),e,f,g,h,k,l,n;h=0;for(k=d.length;h<k;++h)for(e=d[h],f=0,g=e.length-1;f<g;++f)l=e.slice(f,f+2),n={feature:a,geometry:b,depth:[h],index:f,Z:l},this.b.insert(fb(l),n)};m.Yo=function(a,b){var d=b.J(),e,f,g,h,k,l,n;h=0;for(k=d.length;h<k;++h)for(e=d[h],f=0,g=e.length-1;f<g;++f)l=e.slice(f,f+2),n={feature:a,geometry:b,depth:[h],index:f,Z:l},this.b.insert(fb(l),n)};
m.Wo=function(a,b){var d=b.J(),e,f,g,h,k,l,n,p,q,r;l=0;for(n=d.length;l<n;++l)for(p=d[l],h=0,k=p.length;h<k;++h)for(e=p[h],f=0,g=e.length-1;f<g;++f)q=e.slice(f,f+2),r={feature:a,geometry:b,depth:[h,l],index:f,Z:q},this.b.insert(fb(q),r)};m.So=function(a,b){var d=b.getCenter(),e={feature:a,geometry:b,index:0,Z:[d,d]};a={feature:a,geometry:b,index:1,Z:[d,d]};e.Rf=a.Rf=[e,a];this.b.insert(qb(d),e);this.b.insert(b.H(),a)};
m.To=function(a,b){var d=b.b;for(b=0;b<d.length;++b)this.M[d[b].getType()].call(this,a,d[b])};function iy(a,b){var d=a.f;d?d.getGeometry().fa(b):(d=new jd(new ij(b)),a.f=d,E(a.C).oa(d))}function jy(a,b){return a.index-b.index}
function Zx(a){if(!this.fb(a))return!1;dy(this,a.pixel,a.map);var b=a.map.wa(a.pixel);this.j.length=0;this.u=!1;var d=this.f;if(d){var e=[],d=d.getGeometry().J(),f=fb([d]),f=tf(this.b,f),g={};f.sort(jy);for(var h=0,k=f.length;h<k;++h){var l=f[h],n=l.Z,p=v(l.feature),q=l.depth;q&&(p+="-"+q.join("-"));g[p]||(g[p]=Array(2));if("Circle"===l.geometry.getType()&&1===l.index)n=ky(b,l),Ae(n,d)&&!g[p][0]&&(this.j.push([l,0]),g[p][0]=l);else if(Ae(n[0],d)&&!g[p][0])this.j.push([l,0]),g[p][0]=l;else if(Ae(n[1],
d)&&!g[p][1]){if("LineString"!==l.geometry.getType()&&"MultiLineString"!==l.geometry.getType()||!g[p][0]||0!==g[p][0].index)this.j.push([l,1]),g[p][1]=l}else v(n)in this.Qa&&!g[p][0]&&!g[p][1]&&e.push([l,d])}e.length&&ey(this,a);for(a=e.length-1;0<=a;--a)this.Cn.apply(this,e[a])}return!!this.f}
function $x(a){this.D=!1;ey(this,a);a=a.coordinate;for(var b=0,d=this.j.length;b<d;++b){for(var e=this.j[b],f=e[0],g=f.depth,h=f.geometry,k,l=f.Z,e=e[1];a.length<h.F;)a.push(l[e][a.length]);switch(h.getType()){case "Point":k=a;l[0]=l[1]=a;break;case "MultiPoint":k=h.J();k[f.index]=a;l[0]=l[1]=a;break;case "LineString":k=h.J();k[f.index+e]=a;l[e]=a;break;case "MultiLineString":k=h.J();k[g[0]][f.index+e]=a;l[e]=a;break;case "Polygon":k=h.J();k[g[0]][f.index+e]=a;l[e]=a;break;case "MultiPolygon":k=h.J();
k[g[1]][g[0]][f.index+e]=a;l[e]=a;break;case "Circle":l[0]=l[1]=a,0===f.index?(this.o=!0,h.setCenter(a)):(this.o=!0,h.setRadius(De(h.getCenter(),a))),this.o=!1}k&&(f=h,g=k,this.o=!0,f.fa(g),this.o=!1)}iy(this,a)}
function by(a){for(var b,d,e=this.j.length-1;0<=e;--e)if(b=this.j[e][0],d=b.geometry,"Circle"===d.getType()){var f=d.getCenter(),g=b.Rf[0];b=b.Rf[1];g.Z[0]=g.Z[1]=f;b.Z[0]=b.Z[1]=f;rf(this.b,qb(f),g);rf(this.b,d.H(),b)}else rf(this.b,fb(b.Z),b);this.u&&(this.dispatchEvent(new fy("modifyend",this.s,a)),this.u=!1);return!1}
function ay(a){if(!(a instanceof si))return!0;this.G=a;var b;wj(O(a.map))[1]||"pointermove"!=a.type||this.B||(this.ta=a.pixel,dy(this,a.pixel,a.map));if(this.f&&this.eb(a)){var d;if("singleclick"==a.type&&this.D)d=!0;else if(this.G&&"pointerdrag"!=this.G.type){b=this.G;ey(this,b);var e=this.j,f={},g,h,k,l,n,p,q,r,t;for(n=e.length-1;0<=n;--n)l=e[n],t=l[0],d=v(t.feature),t.depth&&(d+="-"+t.depth.join("-")),d in f||(f[d]={}),0===l[1]?(f[d].right=t,f[d].index=t.index):1==l[1]&&(f[d].left=t,f[d].index=
t.index+1);for(d in f){r=f[d].right;p=f[d].left;n=f[d].index;q=n-1;t=void 0!==p?p:r;0>q&&(q=0);l=t.geometry;h=k=l.J();g=!1;switch(l.getType()){case "MultiLineString":2<k[t.depth[0]].length&&(k[t.depth[0]].splice(n,1),g=!0);break;case "LineString":2<k.length&&(k.splice(n,1),g=!0);break;case "MultiPolygon":h=h[t.depth[1]];case "Polygon":h=h[t.depth[0]],4<h.length&&(n==h.length-1&&(n=0),h.splice(n,1),g=!0,0===n&&(h.pop(),h.push(h[0]),q=h.length-1))}g&&(g=l,this.o=!0,g.fa(k),this.o=!1,k=[],void 0!==p&&
(this.b.remove(p),k.push(p.Z[0])),void 0!==r&&(this.b.remove(r),k.push(r.Z[1])),void 0!==p&&void 0!==r&&(p={depth:t.depth,feature:t.feature,geometry:t.geometry,index:q,Z:k},this.b.insert(fb(p.Z),p)),ly(this,l,n,t.depth,-1),this.f&&(E(this.C).na(this.f),this.f=null),e.length=0)}this.dispatchEvent(new fy("modifyend",this.s,b));this.u=!1;d=!0}else d=!1;b=d}"singleclick"==a.type&&(this.D=!1);return ck.call(this,a)&&!b}
function dy(a,b,d){function e(a,b){return my(f,a)-my(f,b)}var f=d.wa(b),g=ib(qb(f),O(d).S()*a.V),g=tf(a.b,g);if(0<g.length){g.sort(e);var h=g[0],k=h.Z,l=ky(f,h),n=wh(d,l),p=De(b,n);if(p<=a.V){b={};if("Circle"===h.geometry.getType()&&1===h.index)a.da=!0,iy(a,l);else for(p=wh(d,k[0]),h=wh(d,k[1]),d=Ce(n,p),n=Ce(n,h),p=Math.sqrt(Math.min(d,n)),a.da=p<=a.V,a.da&&(l=d>n?k[1]:k[0]),iy(a,l),n=1,d=g.length;n<d;++n)if(l=g[n].Z,Ae(k[0],l[0])&&Ae(k[1],l[1])||Ae(k[0],l[1])&&Ae(k[1],l[0]))b[v(l)]=!0;else break;
b[v(k)]=!0;a.Qa=b;return}}a.f&&(E(a.C).na(a.f),a.f=null)}function my(a,b){var d=b.geometry;return"Circle"===d.getType()&&1===b.index?(a=Ce(d.getCenter(),a),d=Math.sqrt(a)-Math.sqrt(rj(d)),d*d):Ee(a,b.Z)}function ky(a,b){var d=b.geometry;return"Circle"===d.getType()&&1===b.index?zc(d,a):ze(a,b.Z)}
m.Cn=function(a,b){for(var d=a.Z,e=a.feature,f=a.geometry,g=a.depth,h=a.index,k;b.length<f.F;)b.push(0);switch(f.getType()){case "MultiLineString":k=f.J();k[g[0]].splice(h+1,0,b);break;case "Polygon":k=f.J();k[g[0]].splice(h+1,0,b);break;case "MultiPolygon":k=f.J();k[g[1]][g[0]].splice(h+1,0,b);break;case "LineString":k=f.J();k.splice(h+1,0,b);break;default:return}this.o=!0;f.fa(k);this.o=!1;k=this.b;k.remove(a);ly(this,f,h,g,1);a={Z:[d[0],b],feature:e,geometry:f,depth:g,index:h};k.insert(fb(a.Z),
a);this.j.push([a,1]);b={Z:[b,d[1]],feature:e,geometry:f,depth:g,index:h+1};k.insert(fb(b.Z),b);this.j.push([b,0]);this.D=!0};function ly(a,b,d,e,f){vf(a.b,b.H(),function(a){a.geometry===b&&(void 0===e||void 0===a.depth||Dd(a.depth,e))&&a.index>d&&(a.index+=f)})}function cy(){var a=id();return function(){return a.Point}}function fy(a,b,d){Va.call(this,a);this.features=b;this.mapBrowserEvent=d}u(fy,Va);function ny(a){bk.call(this,{ab:oy,pb:py,handleEvent:qy,bb:ry});this.b=null;this.D=[0,0];this.s=!1;this.u=new qf;this.o=void 0!==a.lb?a.lb:10;this.G=!1;this.j=null;this.C=new gi({source:new gl({Xb:!1,wrapX:!!a.wrapX}),style:a.style?a.style:sy(),Vb:!0,Wb:!0});this.f=a.features;this.f.forEach(this.M,this);B(this.f,"add",this.V,this);B(this.f,"remove",this.da,this)}u(ny,bk);Ea("ngeo.interaction.ModifyCircle",ny);
ny.prototype.M=function(a){if("Polygon"===a.getGeometry().getType()&&a.get("l")){var b=a.getGeometry();ty(this,a,b);(a=this.ma)&&uy(this,this.D,a)}};function vy(a,b){a=a.u;var d=[];a.forEach(function(a){b===a.feature&&d.push(a)});for(var e=d.length-1;0<=e;--e)a.remove(d[e])}ny.prototype.setMap=function(a){this.C.setMap(a);bk.prototype.setMap.call(this,a)};ny.prototype.V=function(a){this.M(a.element)};
ny.prototype.da=function(a){vy(this,a.element);this.b&&!this.f.get(ki)&&(E(this.C).na(this.b),this.b=null)};function ty(a,b,d){var e=d.J(),f,g,h,k,l,n,p;k=0;for(l=e.length;k<l;++k)for(f=e[k],g=0,h=f.length-1;g<h;++g)n=f.slice(g,g+2),p={feature:b,geometry:d,depth:[k],index:g,Z:n},a.u.insert(fb(n),p)}function wy(a,b){var d=a.b;d?d.getGeometry().fa(b):(d=new jd(new ij(b)),a.b=d,E(a.C).oa(d))}function xy(a,b){return a.index-b.index}
function oy(a){uy(this,a.pixel,a.map);this.j=[];this.s=!1;if(a=this.b){a=a.getGeometry().J();var b=fb([a]),b=tf(this.u,b),d={};b.sort(xy);for(var e=0,f=b.length;e<f;++e){var g=b[e],h=g.Z,k=v(g.feature),l=g.depth;l&&(k+="-"+l.join("-"));d[k]||(d[k]=Array(2));Ae(h[0],a)&&!d[k][0]?(this.j.push([g,0]),d[k][0]=g):Ae(h[1],a)&&!d[k][1]&&(this.j.push([g,1]),d[k][1]=g)}}return!!this.b}
function py(a){this.s||(this.s=!0,this.dispatchEvent(new fy("modifystart",this.f,a)));a=a.coordinate;var b=this.j[0][0].geometry,d=zb(b.H()),e=new ge([d,a]),d=new pq(d,ke(e)),d=qj(d).J();b.fa(d);b=Mq(e);this.f.b[0].set("z",b);wy(this,a)}function ry(a){this.u.clear();ty(this,this.j[0][0].feature,this.j[0][0].geometry);this.s&&(this.dispatchEvent(new fy("modifyend",this.f,a)),this.s=!1);return!1}
function qy(a){if(!(a instanceof si))return!0;wj(O(a.map))[1]||"pointermove"!=a.type||this.B||(this.D=a.pixel,uy(this,a.pixel,a.map));return ck.call(this,a)&&!0}
function uy(a,b,d){function e(a,b){return Ee(f,a.Z)-Ee(f,b.Z)}var f=d.wa(b),g=d.wa([b[0]-a.o,b[1]+a.o]),h=d.wa([b[0]+a.o,b[1]-a.o]),g=fb([g,h]),g=tf(a.u,g);if(0<g.length){g.sort(e);var h=g[0].Z,k=ze(f,h),k=wh(d,k);if(Math.sqrt(Ce(b,k))<=a.o&&(b=wh(d,h[0]),d=wh(d,h[1]),b=Ce(k,b),d=Ce(k,d),a.G=Math.sqrt(Math.min(b,d))<=a.o,a.G)){k=b>d?h[1]:h[0];wy(a,k);v(h);d=1;for(b=g.length;d<b;++d)if(a=g[d].Z,Ae(h[0],a[0])&&Ae(h[1],a[1])||Ae(h[0],a[1])&&Ae(h[1],a[0]))v(a);else break;return}}a.b&&(E(a.C).na(a.b),
a.b=null)}function sy(){var a=id();return function(){return a.Point}};function yy(a){bk.call(this,{ab:this.oo,sg:this.so,pb:this.po,bb:this.to});this.o=!1;var b=a.style?a.style:cy();this.b=new gi({source:new gl({wrapX:!!a.wrapX}),style:b,Vb:!0,Wb:!0});this.f=a.features;this.s=this.u=null;this.j={};B(this.f,"add",this.qo,this);B(this.f,"remove",this.ro,this);this.f.forEach(this.Ui,this)}u(yy,bk);Ea("ngeo.interaction.ModifyRectangle",yy);m=yy.prototype;
m.Ui=function(a){var b=a.getGeometry();if(b instanceof lj){var d=v(a),e=this.j[d];if(!e){for(var f=E(this.b),b=b.J()[0];4<b.length;)b[0][0]<b[1][0]&&b[0][1]<=b[1][1]?b.pop():b.shift();var g=[],h,k;b.forEach(function(b){h=new ij(b);k=new jd({corner:!0,geometry:h,siblingX:null,siblingY:null,boxFeature:a});g.push(k)},this);e={nl:g};this.j[d]=e;var l,n;g.forEach(function(a,b){(l=g[b-1])||(l=g[g.length-1]);(n=g[b+1])||(n=g[0]);b%2?(a.set("siblingX",l),a.set("siblingY",n)):(a.set("siblingX",n),a.set("siblingY",
l))},this);mh(f,g);f.c()}}};m.setMap=function(a){this.b.setMap(a);we(this.b,!1);bk.prototype.setMap.call(this,a)};m.qo=function(a){this.Ui(a.element)};m.ro=function(a){a=v(a.element);for(var b=this.j[a].nl,d=0;d<b.length;d++)E(this.b).na(b[d]);this.u=null;b.length=0;delete this.j[a]};m.so=function(a){var b;b=a.map;var d;if(b.Da){a=b.wa(a.pixel);d=d?d:{};var e=b.ud;b=void 0!==Vk(e,a,b.Da,void 0!==d.Fc?d.Fc*b.Da.Ka:0,Db,e,d.ve?d.ve:Db)}else b=!1;ve(this.b)!=b&&this.b.c();we(this.b,b)};
m.oo=function(a){var b=el(a.map,a.pixel,function(a){return a},void 0);return b&&b.getGeometry()instanceof ij&&b.get("siblingX")&&b.get("siblingY")?(this.s=a.coordinate,this.u=b,we(this.b,!0),!0):!1};
m.po=function(a){this.o||(this.o=!0,this.dispatchEvent(new fy("modifystart",this.f,a)));var b=this.u,d=b.getGeometry();if(d instanceof ij){we(this.b,!0);d.fa(a.coordinate);var d=a.pixel,e=b.get("siblingX").getGeometry(),f=e.J(),g=wh(this.ma,f),h=b.get("siblingY"),f=h.getGeometry(),k=f.J(),k=wh(this.ma,k),l=h.get("siblingY");v(b)==v(l)&&(l=h.get("siblingX"));h=l.getGeometry().J();l=wh(this.ma,h);g=this.ma.wa(zy(l,d,g));e.fa(g);d=this.ma.wa(zy(l,d,k));f.fa(d);b.get("boxFeature").getGeometry().fa([[a.coordinate,
g,h,d,a.coordinate]]);this.s[0]=a.coordinate[0];this.s[1]=a.coordinate[1]}};function zy(a,b,d){b=[b[0]-a[0],b[1]-a[1]];d=[d[0]-a[0],d[1]-a[1]];b=b[0]*d[0]+b[1]*d[1];var e=Math.pow(d[0],2)+Math.pow(d[1],2);d=[d[0]*b/e,d[1]*b/e];return[d[0]+a[0],d[1]+a[1]]}m.to=function(a){this.o&&(this.dispatchEvent(new fy("modifyend",this.f,a)),this.o=!1);return!1};function Ay(a){this.b=a.features;this.listenerKeys_=[];this.T=[];this.i=new hi;this.T.push(new Yx({features:this.i,lb:a.lb,style:a.style,wrapX:a.wrapX}));this.f=new hi;this.T.push(new ny({features:this.f,lb:a.lb,style:a.style,wrapX:a.wrapX}));this.j=new hi;this.T.push(new yy({features:this.j,lb:a.lb,style:a.style,wrapX:a.wrapX}));Nj.call(this,{handleEvent:Db})}u(Ay,Nj);Ea("ngeo.interaction.Modify",Ay);Ay.prototype.setActive=function(a){Nj.prototype.setActive.call(this,a);By(this)};
Ay.prototype.setActive=Ay.prototype.setActive;m=Ay.prototype;m.setMap=function(a){var b=this.T,d=this.ma;d&&b.forEach(function(a){d.T.remove(a)},this);Nj.prototype.setMap.call(this,a);a&&b.forEach(function(b){bl(a,b)},this);By(this)};function By(a){var b=a.ma,d=a.getActive(),e=a.listenerKeys_;a.T.forEach(function(a){a.setActive(d&&!!b)},a);d&&b?(a.b.forEach(a.Vi,a),e.push(B(a.b,"add",a.uo,a)),e.push(B(a.b,"remove",a.vo,a))):(e.forEach(function(a){A(a)},a),a.b.forEach(a.Wi,a))}m.uo=function(a){this.Vi(a.element)};
m.vo=function(a){this.Wi(a.element)};m.Vi=function(a){Cy(this,a).push(a)};m.Wi=function(a){Cy(this,a).remove(a)};function Cy(a,b){var d=b.get("l");b=b.get("r");return!0===d||"true"===d?a.f:!0===b||"true"===b?a.j:a.i};function Dy(a,b){Va.call(this,a);this.feature=b}u(Dy,Va);function Ey(a){this.listenerKeys_=[];this.u=!1;this.s=null;this.b=a.features;this.C=this.f=this.j=null;var b=a.style?a.style:cy();this.D=new gi({source:new gl({Xb:!1,wrapX:!!a.wrapX}),style:b,Vb:!0,Wb:!0});this.o={};bk.call(this,{ab:this.wo,pb:this.xo,bb:this.Bo})}u(Ey,bk);Ea("ngeo.interaction.Rotate",Ey);
Ey.prototype.setActive=function(a){this.s&&($u(this.s),this.s=null);bk.prototype.setActive.call(this,a);a?(this.s=Tu(document,"keyup",this.Ao,!1,this),this.b.forEach(this.Xi,this),this.listenerKeys_.push(B(this.b,"add",this.yo,this)),this.listenerKeys_.push(B(this.b,"remove",this.zo,this))):(this.listenerKeys_.forEach(function(a){A(a)},this),this.b.forEach(this.Yi,this))};Ey.prototype.setActive=Ey.prototype.setActive;m=Ey.prototype;
m.Xi=function(a){var b=a.getGeometry();a.set("angle",0);a=v(a);b=new ij(Fy(b));b=new jd(b);this.o[a]=b;E(this.D).oa(b)};m.Yi=function(a){this.j=null;a&&(a=v(a),this.o[a]&&(E(this.D).na(this.o[a]),delete this.o[a]))};m.setMap=function(a){this.D.setMap(a);bk.prototype.setMap.call(this,a)};m.yo=function(a){this.Xi(a.element)};m.zo=function(a){this.Yi(a.element)};
m.wo=function(a){var b=el(a.map,a.pixel,function(a){return a},void 0);if(b){var d=!1;this.b.forEach(function(a){v(a)==v(b)&&(d=!0)});d||(b=null)}return b?(this.f=a.coordinate,this.j=b,a=this.j.getGeometry(),void 0!==a&&(this.C=Fy(a)),!0):!1};function Fy(a){a instanceof ge?a=le(a):a instanceof lj?a=Ue(a):(a=a.H(),a=zb(a));return a}
m.xo=function(a){this.u||(this.u=!0,this.dispatchEvent(new fy("modifystart",this.b,a)));var b=this.j.getGeometry(),d=this.C[0],e=this.C[1],f=this.f[0]-d,g=this.f[1]-e,h=a.coordinate[0]-d,k=a.coordinate[1]-e;this.f[0]=a.coordinate[0];this.f[1]=a.coordinate[1];b.rotate(-(Math.atan2(g,f)-Math.atan2(k,h)),[d,e])};m.Bo=function(){this.u&&(this.dispatchEvent(new Dy("rotateend",this.j)),this.u=!1,this.setActive(!1));return!1};m.Ao=function(a){27===a.f&&this.setActive(!1)};function Gy(a){bk.call(this,{ab:Hy,pb:Iy,sg:Jy,bb:Ky});a=a?a:{};this.f=void 0;this.b=null;this.o=void 0!==a.features?a.features:null;var b;if(a.layers)if("function"===typeof a.layers)b=a.layers;else{var d=a.layers;b=function(a){return yd(d,a)}}else b=Db;this.da=b;this.V=a.Fc?a.Fc:0;this.j=null;B(this,cb("active"),this.M,this)}u(Gy,bk);
function Hy(a){this.j=Ly(this,a.pixel,a.map);if(!this.b&&this.j){this.b=a.coordinate;Jy.call(this,a);var b=this.o||new hi([this.j]);this.dispatchEvent(new My("translatestart",b,a.coordinate));return!0}return!1}function Ky(a){if(this.b){this.b=null;Jy.call(this,a);var b=this.o||new hi([this.j]);this.dispatchEvent(new My("translateend",b,a.coordinate));return!0}return!1}
function Iy(a){if(this.b){a=a.coordinate;var b=a[0]-this.b[0],d=a[1]-this.b[1],e=this.o||new hi([this.j]);e.forEach(function(a){var e=a.getGeometry();e.translate(b,d);a.setGeometry(e)});this.b=a;this.dispatchEvent(new My("translating",e,a))}}function Jy(a){var b=uh(a.map);Ly(this,a.pixel,a.map)?(this.f=void 0!==this.f?this.f:b.style.cursor,b.style.cursor=this.b?"-webkit-grabbing":"-webkit-grab",b.style.cursor=this.b?"grabbing":"grab"):void 0!==this.f&&(b.style.cursor=this.f,this.f=void 0)}
function Ly(a,b,d){return el(d,b,function(a){if(!this.o||yd(this.o.b,a))return a}.bind(a),{ve:a.da,Fc:a.V})}Gy.prototype.setMap=function(a){var b=this.ma;bk.prototype.setMap.call(this,a);Ny(this,b)};Gy.prototype.M=function(){Ny(this,null)};function Ny(a,b){var d=a.ma,e=a.getActive();d&&e||void 0===a.f||(d||(d=b),uh(d).style.cursor=a.f,a.f=void 0)}function My(a,b,d){Va.call(this,a);this.features=b;this.coordinate=d}u(My,Va);function Oy(a){this.listenerKeys_=[];this.u={};this.C=null;this.ta=void 0!==a.features?a.features:null;this.D=new gl({Xb:!1});this.G=new gi({source:this.D,style:a.style,Vb:!0,Wb:!0});this.s={};Gy.call(this,a)}u(Oy,Gy);Ea("ngeo.interaction.Translate",Oy);Oy.prototype.setActive=function(a){this.C&&($u(this.C),this.C=null);Gy.prototype.setActive.call(this,a);a&&(this.C=Tu(document,"keyup",this.Fo,!1,this));Py(this)};Oy.prototype.setActive=Oy.prototype.setActive;m=Oy.prototype;
m.setMap=function(a){this.ma&&this.G.setMap(null);Gy.prototype.setMap.call(this,a);a&&this.G.setMap(a);Py(this)};function Py(a){var b=a.ma,d=a.getActive(),e=a.ta,f=a.listenerKeys_;b&&d&&e?(e.forEach(a.Zi,a),f.push(B(e,"add",a.Co,a)),f.push(B(e,"remove",a.Do,a))):(b&&(uh(b).style.cursor="default"),f.forEach(function(a){A(a)},a),e.forEach(a.aj,a))}m.Co=function(a){this.Zi(a.element)};m.Do=function(a){this.aj(a.element)};
m.Zi=function(a){var b=v(a),d=a.getGeometry();this.u[b]=B(d,"change",this.Eo.bind(this,a),this);a=Qy(d);a=new jd(a);this.s[b]=a;this.D.oa(a)};m.aj=function(a){a=v(a);this.u[a]&&(A(this.u[a]),delete this.u[a],this.D.na(this.s[a]),delete this.s[a])};m.Eo=function(a,b){b=Qy(b.target);a=v(a);this.s[a].setGeometry(b)};function Qy(a){var b,d;a instanceof lj?d=new ij(Ue(a)):a instanceof ge?b=je(a):(a=a.H(),b=zb(a));!d&&b&&(d=new ij(b));return d}m.Fo=function(a){27===a.f&&this.setActive(!1)};T.directive("gmfDrawfeature",function(){return{controller:"GmfDrawfeatureController as efCtrl",scope:{active:"=gmfDrawfeatureActive",map:"<gmfDrawfeatureMap"},bindToController:!0,templateUrl:"gmf/drawfeature.html"}});
function Ry(a,b,d,e,f,g,h){var k=this;void 0===this.active&&(this.active=!1);this.drawActive=!1;this.drawToolActivate=new ex(this,"drawActive");this.mapSelectActive=!0;this.o=null;this.mapSelectToolActivate=new ex(this,"mapSelectActive");this.I=a;this.u=b;this.s=e;this.i=f;this.features=g;this.B=h;this.selectedFeature=null;this.selectedFeatures=new hi;this.T=new hi;this.b=new Ay({features:this.selectedFeatures,style:f.Dc(!1)});this.T.push(this.b);this.c=null;this.modifyToolActivate=new ex(this.b,
"active");this.f=new Oy({features:this.selectedFeatures,style:new D({text:new Br({text:"\uf047",font:"normal 18px FontAwesome",fill:new cd({color:"#7a7a7a"})})})});this.T.push(this.f);this.g=new Ey({features:this.selectedFeatures,style:new D({text:new Br({text:"\uf01e",font:"normal 18px FontAwesome",fill:new cd({color:"#7a7a7a"})})})});this.T.push(this.g);Sy(this);this.rotateToolActivate=new ex(this.g,"active");this.translateToolActivate=new ex(this.f,"active");this.listenerKeys_=[];this.j=!1;a.$watch(function(){return k.active},
this.C.bind(this));a.$watch(function(){return k.drawActive},function(a){a&&(k.selectedFeature=null)});a.$watch(function(){return k.selectedFeature},function(a,b){k.selectedFeatures.clear();b&&(k.i.setStyle(b),Ty(k));a?(k.i.setStyle(a,!0),k.selectedFeatures.push(a),Uy(k),k.j&&(k.i.vj(a,k.map),k.j=!1)):k.c&&(k.map.Ja.remove(k.c),k.c=null)});a.$watch(function(){return k.mapSelectActive},this.rm.bind(this));this.nameProperty="n";this.ga=d}Ry.$inject="$scope $timeout gettextCatalog ngeoDecorateInteraction ngeoFeatureHelper ngeoFeatures ngeoToolActivateMgr".split(" ");
function Sy(a){a.T.forEach(function(a){a.setActive(!1);this.s(a)},a)}function Uy(a){a.T.forEach(function(a){bl(this.map,a)},a)}function Ty(a){a.T.forEach(function(a){this.map.T.remove(a)},a)}
Ry.prototype.C=function(a){var b=this.listenerKeys_,d=["draw-",v(this)].join("-"),e=["other-",v(this)].join("-"),f=this.B;a?(b.push(B(this.features,"add",this.pm,this)),b.push(B(this.features,"remove",this.qm,this)),b.push(B(this.f,"translateend",this.um,this)),b.push(B(this.g,"rotateend",this.tm,this)),f.ra(d,this.drawToolActivate,!1),f.ra(d,this.mapSelectToolActivate,!0),f.ra(e,this.drawToolActivate,!1),f.ra(e,this.modifyToolActivate,!0),f.ra(e,this.translateToolActivate,!1),f.ra(e,this.rotateToolActivate,
!1),this.mapSelectActive=!0,this.b.setActive(!0)):(b.forEach(function(a){A(a)},this),f.Na(d,this.drawToolActivate),f.Na(d,this.mapSelectToolActivate),f.Na(e,this.drawToolActivate),f.Na(e,this.modifyToolActivate),f.Na(e,this.translateToolActivate),f.Na(e,this.rotateToolActivate),this.drawActive=!1,this.b.setActive(!1),this.mapSelectActive=!1,this.selectedFeature=null,this.c&&(this.map.Ja.remove(this.c),this.c=null))};Ry.prototype.nq=function(a){this.j=!0;this.selectedFeature=a;this.drawActive=!1};
Ry.prototype.selectFeatureFromList=Ry.prototype.nq;Ry.prototype.Ql=function(){return this.features.b};Ry.prototype.getFeaturesArray=Ry.prototype.Ql;Ry.prototype.hl=function(){var a=this.ga.getString("Do you really want to delete all the features?");confirm(a)&&this.features.clear()};Ry.prototype.clearFeatures=Ry.prototype.hl;Ry.prototype.na=function(a){var b=this.ga.getString("Do you really want to delete the selected feature?");confirm(b)&&this.features.remove(a)};Ry.prototype.removeFeature=Ry.prototype.na;
m=Ry.prototype;m.pm=function(a){var b=this;this.u(function(){b.selectedFeature=a.element;b.drawActive=!1;b.I.$apply()})};m.qm=function(){this.selectedFeature=null};
m.rm=function(a){var b=this.map.sa;a?(B(this.map,"click",this.pi,this),Tu(b,"contextmenu",this.pg,!1,this),Tu(b,"touchstart",this.Bi,!1,this),Tu(b,"touchmove",this.se,!1,this),Tu(b,"touchend",this.se,!1,this)):(Ta(this.map,"click",this.pi,this),Zu(b,"contextmenu",this.pg,!1,this),Zu(b,"touchstart",this.Bi,!1,this),Zu(b,"touchmove",this.se,!1,this),Zu(b,"touchend",this.se,!1,this))};
m.pi=function(a){var b=this;a=(a=el(this.map,a.pixel,function(a){var d=!1;yd(b.features.b,a)&&(d=a);return d}))?a:null;a!==this.selectedFeature&&(this.selectedFeature=a,this.I.$apply())};m.Bi=function(a){var b=this;this.o=setTimeout(function(){b.pg(a)},500)};m.se=function(){clearTimeout(this.o)};
m.pg=function(a){var b=this,d=qi(this.map,a),e=this.map.wa(d);if(d=(d=el(this.map,d,function(a){var d=!1;yd(b.features.b,a)&&(d=a);return d}))?d:null){var f=[],g=this.i.getType(d);if("Circle"==g||"LineString"==g||"Polygon"==g||"Rectangle"==g)f=f.concat([{cls:"fa fa-arrows",label:this.ga.getString("Move"),name:"move"},{cls:"fa fa-rotate-right",label:this.ga.getString("Rotate"),name:"rotate"}]);f=f.concat([{cls:"fa fa-trash-o",label:this.ga.getString("Delete"),name:"delete"}]);this.c=new Mx({actions:f});
B(this.c,"actionclick",this.sm,this);this.map.Ja.push(this.c);this.c.open(e);a.preventDefault();a.stopPropagation()}d!==this.selectedFeature&&(this.b.setActive(!0),this.selectedFeature=d,this.I.$apply())};m.sm=function(a){a=a.action;switch(a){case "delete":this.na(this.selectedFeature);this.I.$apply();break;case "move":this.f.setActive(!0);this.I.$apply();break;case "rotate":this.g.setActive(!0);this.I.$apply();break;default:console.log("FIXME - support: "+a)}};
m.um=function(){this.f.setActive(!1);this.I.$apply()};m.tm=function(){this.g.setActive(!1);this.I.$apply()};T.controller("GmfDrawfeatureController",Ry);function Vy(a,b){this.b=a;this.c=b}Vy.$inject=["$http","gmfLayersUrl"];Vy.prototype.Zf=function(a,b){a=Uh(this.c+"/"+a.join(","),{bbox:b.join(",")});return this.b.get(a).then(this.g.bind(this))};Vy.prototype.getFeaturesInExtent=Vy.prototype.Zf;Vy.prototype.g=function(a){return(new Il).readFeatures(a.data)};Vy.prototype.Hi=function(a,b){a=this.c+"/"+a;b=(new Il).writeFeatures(b);return this.b.post(a,b,{headers:{"Content-Type":"application/json"},withCredentials:!0})};Vy.prototype.insertFeatures=Vy.prototype.Hi;
Vy.prototype.ik=function(a,b){a=this.c+"/"+a.toString()+"/"+b.f;b=(new Il).writeFeature(b);return this.b.put(a,b,{headers:{"Content-Type":"application/json"},withCredentials:!0})};Vy.prototype.updateFeature=Vy.prototype.ik;Vy.prototype.Ph=function(a,b){return this.b.delete(this.c+"/"+a.toString()+"/"+b.f,{headers:{"Content-Type":"application/json"},withCredentials:!0})};Vy.prototype.deleteFeature=Vy.prototype.Ph;T.service("gmfEditFeature",Vy);function Wy(){}u(Wy,$l);Ea("ngeo.format.XSDAttribute",Wy);Wy.prototype.read=function(a){return $l.prototype.read.call(this,a)};Wy.prototype.b=function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType==Node.ELEMENT_NODE)return this.c(a);return null};
Wy.prototype.c=function(a){var b=a.getElementsByTagName("element");b.length||(b=a.getElementsByTagName("xsd:element"));a=[];for(var d,e=0,f=b.length;e<f;e++){var g=b[e];d=g.getAttribute("name");var h=g.getAttribute("nillable");d={name:d,required:!(!0===h||"true"===h)};if(h=g.getAttribute("type"))wv(d,h)||("xsd:string"===h?d.type="text":"xsd:date"===h?d.type="date":"xsd:dateTime"===h?d.type="datetime":d=null);else if(h=g.getElementsByTagName("enumeration"),h.length||(h=g.getElementsByTagName("xsd:enumeration")),
h.length){d.type="select";for(var g=[],k=0,l=h.length;k<l;k++)g.push(h[k].getAttribute("value"));d.choices=g}else d=null;d&&a.push(d)}return a};function Xy(a){for(var b=null,d=0,e=a.length;d<e;d++)if("geometry"===a[d].type){b=a[d];break}return b}Wy.getGeometryAttribute=Xy;function Yy(a,b){this.g=a;this.b=b;this.c={}}Yy.$inject=["$http","gmfLayersUrl"];Yy.prototype.Vh=function(a){this.c[a]||(this.c[a]=this.g.get(this.b+"/"+a+"/md.xsd").then(this.zi.bind(this)));return this.c[a]};Yy.prototype.getAttributes=Yy.prototype.Vh;Yy.prototype.zi=function(a){return(new Wy).read(a.data)};Yy.prototype.handleGetAttributes_=Yy.prototype.zi;T.service("gmfXSDAttributes",Yy);S.component("ngeoAttributes",{controller:"ngeoAttributesController as attrCtrl",bindings:{attributes:"=ngeoAttributesAttributes",disabled:"<ngeoAttributesDisabled",feature:"=ngeoAttributesFeature"},templateUrl:function(){return"ngeo/attributes.html"}});function Zy(a,b){this.disabled=!1;this.I=a;this.b=b;this.dateOptions={changeMonth:!0,changeYear:!0};this.c=!1}Zy.$inject=["$scope","ngeoEventHelper"];
Zy.prototype.$onInit=function(){this.properties=db(this.feature);var a=v(this);this.b.ac(a,B(this.feature,"propertychange",this.g,this),!0)};Zy.prototype.Sm=function(a){this.c=!0;this.feature.set(a,this.properties[a]);this.c=!1};Zy.prototype.handleInputChange=Zy.prototype.Sm;Zy.prototype.$onDestroy=function(){var a=v(this);this.b.Tc(a)};Zy.prototype.g=function(a){this.c||(this.properties[a.key]=a.target.get(a.key),this.I.$apply())};S.controller("ngeoAttributesController",Zy);S.directive("ngeoCreatefeature",function(){return{controller:"ngeoCreatefeatureController as cfCtrl",bindToController:!0,scope:{active:"=ngeoCreatefeatureActive",features:"=ngeoCreatefeatureFeatures",geomType:"=ngeoCreatefeatureGeomType",map:"=ngeoCreatefeatureMap"}}});function $y(a,b,d,e,f,g){var h=this;this.b=a;this.c=b;this.i=d;this.I=e;this.j=f;this.f=g;e.$watch(function(){return h.active},function(a){h.g.setActive(a)})}$y.$inject="gettext $compile $filter $scope $timeout ngeoEventHelper".split(" ");
$y.prototype.$onInit=function(){this.active=!0===this.active;var a;if("Point"===this.geomType||"MultiPoint"===this.geomType)a=new rq({type:"Point"});else if("LineString"===this.geomType||"MultiLineString"===this.geomType){a=this.b("Click to start drawing length");var b=this.b("Click to continue drawing<br/>Double-click or click last point to finish");a=new Ux(this.i("ngeoUnitPrefix"),{style:new D,startMsg:this.c("<div translate>"+a+"</div>")(this.I)[0],continueMsg:this.c("<div translate>"+b+"</div>")(this.I)[0]})}else if("Polygon"===
this.geomType||"MultiPolygon"===this.geomType)a=this.b("Click to start drawing area"),b=this.b("Click to continue drawing<br/>Double-click or click starting point to finish"),a=new Rx(this.i("ngeoUnitPrefix"),{style:new D,startMsg:this.c("<div translate>"+a+"</div>")(this.I)[0],continueMsg:this.c("<div translate>"+b+"</div>")(this.I)[0]});a.setActive(this.active);this.g=a;bl(this.map,a);b=v(this);a instanceof rq?this.f.ac(b,B(a,"drawend",this.qg,this),!0):(a instanceof Ux||a instanceof Rx)&&this.f.ac(b,
B(a,"measureend",this.qg,this),!0)};
$y.prototype.qg=function(a){a=a.feature.getGeometry();var b=a.getType();if(this.geomType.indexOf("Multi")!=b.indexOf("Multi")){var d=a;if(d instanceof ij)b=a=new Cl([]),b.v?Ad(b.v,d.v):b.v=d.v.slice(),b.c();else if(d instanceof ge)b=a=new yl([]),b.v?Ad(b.v,d.v.slice()):b.v=d.v.slice(),b.Za.push(b.v.length),b.c();else if(d instanceof lj){b=a=new El([]);if(b.v){var e=b.v.length;Ad(b.v,d.v);var d=d.ua.slice(),f,g;f=0;for(g=d.length;f<g;++f)d[f]+=e}else b.v=d.v.slice(),d=d.ua.slice(),b.b.push();b.b.push(d);
b.c()}else a=d}a=new jd(a);this.features instanceof hi?this.features.push(a):this.features.oa(a)};$y.prototype.handleDrawEnd_=$y.prototype.qg;$y.prototype.$onDestroy=function(){var a=this;this.j(function(){var b=v(a);a.f.Tc(b);a.g.setActive(!1);a.map.T.remove(a.g)},0)};S.controller("ngeoCreatefeatureController",$y);T.directive("gmfEditfeature",function(){return{controller:"GmfEditfeatureController as efCtrl",scope:{dirty:"=gmfEditfeatureDirty",editableTreeCtrl:"=gmfEditfeatureEditabletreectrl",map:"<gmfEditfeatureMap",state:"=gmfEditfeatureState",tolerance:"<?gmfEditfeatureTolerance",vectorLayer:"<gmfEditfeatureVector"},bindToController:!0,templateUrl:"gmf/editfeature.html"}});
function az(a,b,d,e,f,g,h,k,l,n,p,q,r){var t=this;this.R=a;this.G=b;this.I=d;this.o=e;this.ga=f;this.i=g;this.u=h;this.N=k;this.D=l;this.C=n;this.ngeoFeatureHelper_=p;this.O=r;this.c=null;this.pending=this.unsavedModificationsModalShown=!1;this.active=!0;this.createActive=!1;this.createToolActivate=new ex(this,"createActive");this.mapSelectActive=!0;this.mapSelectToolActivate=new ex(this,"mapSelectActive");this.feature=null;this.I.$watch(function(){return t.feature},this.ri.bind(this));this.featureId=
void 0;this.T=new hi;this.j=new Mx({actions:[{cls:"fa fa-arrows",label:f.getString("Move"),name:bz},{cls:"fa fa-rotate-right",label:f.getString("Rotate"),name:cz}]});this.listenerKeys_=[];this.attributes=null;this.showServerError=!1}az.$inject="$element $q $scope $timeout gettextCatalog gmfEditFeature gmfSnapping gmfXSDAttributes ngeoDecorateInteraction ngeoEventHelper ngeoFeatureHelper ngeoLayerHelper ngeoToolActivateMgr".split(" ");var bz="move",cz="rotate";
az.prototype.$onInit=function(){var a=this;this.dirty=!0===this.dirty;this.b=this.editableTreeCtrl.node;this.features=E(this.vectorLayer).j;this.tolerance=void 0!==this.tolerance?this.tolerance:10;this.B=Zp(this.editableTreeCtrl);this.s=new Yx({features:this.features,style:this.ngeoFeatureHelper_.Dc(!1)});this.T.push(this.s);this.g=new Ey({features:this.features,style:new D({text:new Br({text:"\uf01e",font:"normal 18px FontAwesome",fill:new cd({color:"#7a7a7a"})})})});this.T.push(this.g);this.f=new Oy({features:this.features,
style:new D({text:new Br({text:"\uf047",font:"normal 18px FontAwesome",fill:new cd({color:"#7a7a7a"})})})});this.T.push(this.f);dz(this);this.modifyToolActivate=new ex(this.s,"active");this.rotateToolActivate=new ex(this.g,"active");this.translateToolActivate=new ex(this.f,"active");this.map.Ja.push(this.j);this.I.$watch(function(){return a.createActive},function(b){b&&a.u.Of()});this.I.$on("$destroy",this.vm.bind(this));var b=v(this);this.C.ac(b,B(this.features,"add",this.wm,this));this.I.$watch(function(){return a.mapSelectActive},
this.wi.bind(this));this.I.$watch(function(){return a.state},function(b){var d=ez;b===d.Nk?a.zf().then(function(){a.state=d.Mk}):b===d.Ak&&a.zf().then(function(){a.state=d.zk})});this.I.$watch(function(){return a.unsavedModificationsModalShown},function(b,e){e&&!b&&(a.state=fz)});this.N.Vh(this.b.id).then(this.oq.bind(this));gz(this,!0)};
az.prototype.save=function(){var a=this,b=this.feature,d=this.featureId;this.pending=!0;(d?this.i.ik(this.b.id,b):this.i.Hi(this.b.id,[b])).then(function(b){a.dirty=!1;a.pending=!1;b=(new Il).readFeatures(b.data);b.length&&(md(a.feature,b[0].f),ao(a.B));a.c&&a.c.resolve()},function(){a.showServerError=!0;a.pending=!1})};az.prototype.save=az.prototype.save;az.prototype.cancel=function(){this.dirty=!1;this.feature=null;this.features.clear();this.j.close();this.unsavedModificationsModalShown=!1};
az.prototype.cancel=az.prototype.cancel;az.prototype.zf=function(){var a=this;return hz(this).then(function(){a.cancel()})};az.prototype.confirmCancel=az.prototype.zf;function hz(a,b){a.c=a.G.defer();a.feature&&a.dirty?(a.unsavedModificationsModalShown=!0,b&&a.I.$apply()):a.c.resolve();return a.c.promise}az.prototype.ll=function(){this.cancel();this.c.resolve()};az.prototype.continueWithoutSaving=az.prototype.ll;
az.prototype.delete=function(){var a=this,b=this.ga.getString("Do you really want to delete the selected feature?");confirm(b)&&(this.pending=!0,this.i.Ph(this.b.id,this.feature).then(function(){a.dirty=!1;a.pending=!1;ao(a.B);a.cancel()},function(){a.showServerError=!0;a.pending=!1}))};az.prototype["delete"]=az.prototype.delete;az.prototype.submit=function(){var a=this;this.o(function(){a.R.find('input[type="submit"]').click()},0)};az.prototype.submit=az.prototype.submit;m=az.prototype;
m.oq=function(a){this.attributes=a;(a=Xy(this.attributes))&&a.geomType&&(this.geomType=a.geomType)};m.wm=function(a){var b=this;this.o(function(){var d=a.element;b.feature=d;b.createActive=!1;d.f||(b.dirty=!0);b.I.$apply()},0)};
function gz(a,b){var d=a.listenerKeys_,e=["create-",v(a)].join("-"),f=["other-",v(a)].join("-"),g=a.O;b?(d.push(B(a.j,"actionclick",a.ym,a)),d.push(B(a.f,"translateend",a.Am,a)),d.push(B(a.g,"rotateend",a.zm,a)),g.ra(e,a.createToolActivate,!1),g.ra(e,a.mapSelectToolActivate,!0),g.ra(f,a.createToolActivate,!1),g.ra(f,a.modifyToolActivate,!0),g.ra(f,a.translateToolActivate,!1),g.ra(f,a.rotateToolActivate,!1)):(d.forEach(function(a){A(a)},a),g.Na(e,a.createToolActivate),g.Na(e,a.mapSelectToolActivate),
g.Na(f,a.createToolActivate),g.Na(f,a.modifyToolActivate),g.Na(f,a.translateToolActivate),g.Na(f,a.rotateToolActivate),a.createActive=!1,a.cancel());a.s.setActive(b);a.mapSelectActive=b;a.editableTreeCtrl.properties.editing=b}m.wi=function(a){var b=this.map.sa;a?(B(this.map,"click",this.ui,this),Tu(b,"contextmenu",this.vi,!1,this)):(Ta(this.map,"click",this.ui,this),Zu(b,"contextmenu",this.vi,!1,this))};
m.ui=function(a){var b=this,d=a.coordinate;el(this.map,a.pixel,function(a){var d=!1;yd(b.features.b,a)&&(d=a);return d})||hz(this,!0).then(function(){var a=O(b.map).S()*b.tolerance,a=ib([d[0],d[1],d[0],d[1]],a);b.i.Zf([b.b.id],a).then(b.xm.bind(b));b.cancel();b.pending=!0})};
m.vi=function(a){var b=this,d=qi(this.map,a),e=this.map.wa(d);if(d=(d=el(this.map,d,function(a){var d=!1;yd(b.features.b,a)&&(d=a);return d}))?d:null)d=this.ngeoFeatureHelper_.getType(d),"Polygon"!==d&&"MultiPolygon"!==d&&"LineString"!==d&&"MultiLineString"!==d||this.j.open(e),a.preventDefault(),a.stopPropagation()};m.xm=function(a){var b=this;this.pending=!1;this.o(function(){if(a.length){var d=a[0];b.feature=d;b.features.push(d)}},0)};
function dz(a){a.T.forEach(function(a){a.setActive(!1);this.D(a)},a)}function iz(a){a.T.forEach(function(a){bl(this.map,a)},a)}function jz(a){a.T.forEach(function(a){this.map.T.remove(a)},a)}
m.ri=function(a,b){var d=this;b&&(Ta(b,"propertychange",this.ti,this),b=b.getGeometry(),Ta(b,"change",this.si,this),jz(this));a?(this.featureId=a.f,B(a,"propertychange",this.ti,this),b=a.getGeometry(),B(b,"change",this.si,this),iz(this),this.u.Of(),this.featureId&&this.o(function(){d.dirty=!1;d.I.$apply()},0)):this.featureId=void 0};m.ti=function(){this.dirty=!0};m.si=function(){this.dirty=!0;this.I.$apply()};
m.ym=function(a){switch(a.action){case bz:this.f.setActive(!0);this.I.$apply();break;case cz:this.g.setActive(!0),this.I.$apply()}};m.Am=function(){this.f.setActive(!1);this.I.$apply()};m.zm=function(){this.g.setActive(!1);this.I.$apply()};m.vm=function(){this.features.clear();this.ri(null,this.feature);this.feature=null;var a=v(this);this.C.Tc(a);gz(this,!1);this.wi(!1);jz(this)};T.controller("GmfEditfeatureController",az);
var fz="idle",ez={IDLE:fz,zk:"deactivate_execute",Ak:"deactivate_pending",Mk:"stop_editing_execute",Nk:"stop_editing_pending"};T.directive("gmfEditfeatureselector",function(){return{controller:"GmfEditfeatureselectorController as efsCtrl",scope:{active:"=gmfEditfeatureselectorActive",map:"<gmfEditfeatureselectorMap",tolerance:"<?gmfEditfeatureselectorTolerance",vectorLayer:"<gmfEditfeatureselectorVector"},bindToController:!0,templateUrl:"gmf/editfeatureselector.html"}});
function kz(a,b,d,e){var f=this;this.active=!0===this.active;a.$watch(function(){return f.active},this.c.bind(this));this.I=a;this.$timeout_=b;this.aa=e;this.g=a.$watchCollection(function(){if(e.rootCtrl)return e.rootCtrl.children},function(a){var b=this;this.$timeout_(function(){if(a){var d=b.editableTreeCtrls;d.length=0;b.aa.rootCtrl.Ma(function(a){a.node.editable&&d.push(a)})}},0)}.bind(this));this.dirty=!1;this.editableTreeCtrls=[];this.selectedEditableTreeCtrl=null;a.$watch(function(){return f.selectedEditableTreeCtrl},
function(){f.dirty=!1;f.state=fz});this.state=fz;a.$watch(function(){return f.state},function(a){if("stop_editing_execute"===a||"deactivate_execute"===a)f.selectedEditableTreeCtrl=null;"deactivate_execute"===a&&(f.active=!1)});a.$on("$destroy",this.b.bind(this))}kz.$inject=["$scope","$timeout","gmfThemes","gmfTreeManager"];kz.prototype.ak=function(){this.state="stop_editing_pending"};kz.prototype.stopEditing=kz.prototype.ak;
kz.prototype.c=function(a){var b=this;!a&&this.dirty&&this.$timeout_(function(){b.active=!0;b.ak()})};kz.prototype.b=function(){this.g()};T.controller("GmfEditfeatureselectorController",kz);T.directive("gmfElevation",function(){return{restrict:"A",controller:"GmfElevationController as ctrl",bindToController:!0,scope:{active:"<gmfElevationActive",elevation:"=gmfElevationElevation",loading:"=?gmfElevationLoading",layer:"<gmfElevationLayer",map:"=gmfElevationMap"},link:function(a){var b=a.ctrl;a.$watch(function(){return b.active},function(a){lz(this,a)}.bind(b));a.$watch(function(){return b.layer},function(a){this.layer=a;this.elevation=null}.bind(b))}}});
function mz(a,b,d){this.f=b;this.g=d;this.listenerKeys_=[];this.I=a;this.loading=this.vg=!1}Ea("gmf.ElevationController",mz);mz.$inject=["$scope","ngeoDebounce","gmfRaster"];
function lz(a,b){a.elevation=void 0;if(b)a.listenerKeys_.push(B(a.map,"pointermove",function(){var a=this;this.I.$apply(function(){a.vg=!0;a.elevation=void 0;a.loading=!1})},a)),a.listenerKeys_.push(B(a.map,"pointermove",a.f(a.i.bind(a),500,!0))),a.listenerKeys_.push(B(a.map.sa,"mouseout",function(){var a=this;this.I.$apply(function(){a.elevation=void 0;a.vg=!1;a.loading=!1})},a));else{a.elevation=void 0;b=0;for(var d=a.listenerKeys_.length;b<d;++b)A(a.listenerKeys_[b])}}
mz.prototype.i=function(a){this.vg&&(this.loading=!0,this.g.jg(a.coordinate,{layers:this.layer}).then(this.b.bind(this),this.c.bind(this)))};mz.prototype.b=function(a){this.elevation=a[this.layer];this.loading=!1};mz.prototype.c=function(){console.error("Error on getting the raster.");this.elevation=void 0;this.loading=!1};T.controller("GmfElevationController",mz);
T.component("gmfElevationwidget",{controller:"gmfElevationwidgetController as ctrl",bindings:{map:"<gmfElevationwidgetMap",layers:"<gmfElevationwidgetLayers",active:"<gmfElevationwidgetActive"},templateUrl:function(){return"gmf/elevationwidget.html"}});function nz(){}Ea("gmf.ElevationwidgetController",nz);T.controller("gmfElevationwidgetController",nz);nz.prototype.$onInit=function(){this.selectedElevationLayer=this.layers[0]};function oz(a,b){this.g=a;this.b=b;this.c={}}function pz(a,b,d){var e=b.id;b=b.name;a.c[e]||(a.c[e]=a.g.get(a.b+"/"+b+"/values/"+d).then(a.yi.bind(a)));return a.c[e]}oz.prototype.yi=function(a){return a.data.items};oz.prototype.handleGetAttributeValues_=oz.prototype.yi;oz.$inject=["$http","gmfLayersUrl"];T.service("gmfEnumerateAttribute",oz);function qz(a,b,d){this.b=a;this.g=b;this.c=d}qz.prototype.Fb=function(a){return this.c.Fb(a)};qz.prototype.getDataSource=qz.prototype.Fb;
qz.prototype.Aj=function(a){var b=this,d=this.b.defer();this.c.Xh(a).then(function(e){var f=(a.gmfLayer.metadata||{}).enumeratedAttributes;if(f&&f.length){var g=[],h={};e=ka(e);for(var k=e.next();!k.done;h={Eb:h.Eb},k=e.next())h.Eb=k.value,!yd(f,h.Eb.name)||"select"===h.Eb.type||h.Eb.choices&&h.Eb.choices.length||g.push(pz(b.g,a,h.Eb.name).then(function(a){return function(b){b=b.map(function(a){return a.value});a.Eb.type="select";a.Eb.choices=b}}(h)));return b.b.all(g).then(d.resolve(a))}d.resolve(a)});
return d.promise};qz.prototype.prepareFiltrableDataSource=qz.prototype.Aj;ca.Object.defineProperties(qz.prototype,{collection:{configurable:!0,enumerable:!0,get:function(){return this.c.collection}}});qz.$inject=["$q","gmfEnumerateAttribute","ngeoDataSourcesHelper"];T.service("gmfDataSourcesHelper",qz);function rz(a){var b=this;this.Pa=a;this.b=null;this.g=[];this.c=!0;try{"localStorage"in window?(window.localStorage.test="",delete window.localStorage.test):this.c=!1}catch(d){console.error(d),this.c=!1}this.Xa=[];this.Pa.$watchCollection(function(){return b.items},function(){sz(b)});this.c&&window.localStorage.gmf_savedfilters&&(this.Xa=JSON.parse(window.localStorage.gmf_savedfilters))}
rz.prototype.wg=function(a,b){for(var d,e=-1,f=0,g=this.Xa.length;f<g;f++)if(d=this.items[f],d.dataSourceId===b&&d.name===a){e=f;break}return e};rz.prototype.indexOfItem=rz.prototype.wg;rz.prototype.save=function(a){var b=this.wg(a.name,a.dataSourceId);-1!==b?this.items[b]=a:this.items.push(a);this.c&&tz(this)};rz.prototype.save=rz.prototype.save;rz.prototype.remove=function(a){Bd(this.items,a)&&this.c&&tz(this)};rz.prototype.remove=rz.prototype.remove;
function tz(a){window.localStorage.gmf_savedfilters=JSON.stringify(a.items)}function sz(a){a.g.length=0;if(null!==a.b)for(var b=ka(a.items),d=b.next();!d.done;d=b.next())d=d.value,d.dataSourceId===a.b&&a.g.push(d)}ca.Object.defineProperties(rz.prototype,{currentDataSourceItems:{configurable:!0,enumerable:!0,get:function(){return this.g}},currentDataSourceId:{configurable:!0,enumerable:!0,set:function(a){this.b=a;sz(this)}},items:{configurable:!0,enumerable:!0,get:function(){return this.Xa}}});
rz.$inject=["$rootScope"];T.service("gmfSavedFilters",rz);Ea("gmf.SavedFilters.FilterItem",function(){});S.value("ngeoDatePickerTemplateUrl",function(a,b){a=b.ngeoDatePickerTemplateUrl;return void 0!==a?a:"ngeo/datepicker.html"});
function uz(a,b){return{scope:{onDateSelected:"&",time:"="},bindToController:!0,controller:"ngeoDatePickerController as datepickerCtrl",restrict:"AE",templateUrl:a,link:function(a,e,f,g){g.Wa();a=g.ga.getCurrentLanguage();$.datepicker.setDefaults($.datepicker.regional[a]);g.sdateOptions=angular.extend({},g.sdateOptions,{onClose:function(a){a&&$(e[0]).find('input[name="edate"]').datepicker("option","minDate",a)}});g.edateOptions=angular.extend({},g.edateOptions,{onClose:function(a){a&&$(e[0]).find('input[name="sdate"]').datepicker("option",
"maxDate",a)}});angular.element("body").on("hidden.bs.popover",function(){var a=angular.element("#ui-datepicker-div");a&&"block"===a.css("display")&&$(e[0]).find('input[name$="date"]').datepicker("hide")});b(function(){angular.element("#ui-datepicker-div").on("mousedown",function(a){a.stopPropagation()})})}}}uz.$inject=["ngeoDatePickerTemplateUrl","$timeout"];S.directive("ngeoDatePicker",uz);
function vz(a,b,d){var e=this;this.g=d;this.ga=b.get("gettextCatalog");this.edateOptions={minDate:this.b,maxDate:this.c,changeMonth:!0,changeYear:!0};this.sdateOptions={minDate:this.b,maxDate:this.c,changeMonth:!0,changeYear:!0};a.$watchGroup(["datepickerCtrl.sdate","datepickerCtrl.edate"],function(a){var b=a[0];a=a[1];if(angular.isDate(b)&&(!e.isModeRange||angular.isDate(a)))e.onDateSelected({time:{start:b.getTime(),end:a?a.getTime():null}})})}vz.$inject=["$scope","$injector","ngeoTime"];
vz.prototype.Wa=function(){var a=this.g.le(this.time);this.b=new Date(a.Ti);this.c=new Date(a.Qi);(this.isModeRange="range"===this.time.mode)?(this.sdate=new Date(a.values[0]),this.edate=new Date(a.values[1])):this.sdate=new Date(a.values)};S.controller("ngeoDatePickerController",vz);function wz(a,b,d,e,f,g,h){this.ga=a;this.I=b;this.N=d;this.C=e;this.ngeoFeatureHelper_=f;this.j=g;this.o=h;b={};this.operators=(b["="]=a.getString("Is equal to"),b[">"]=a.getString("Is greater than"),b[">="]=a.getString("Is greater than or equal to"),b["<"]=a.getString("Is lesser than"),b["<="]=a.getString("Is lesser than or equal to"),b["!="]=a.getString("Is not equal to"),b["~"]=a.getString("Contains"),b.contains=a.getString("Contains"),b.intersects=a.getString("Intersects"),b.within=a.getString("Is inside of"),
b);this.timeRangeMode={widget:"datepicker",maxValue:xz(),minValue:xz(6048E5),maxDefValue:null,minDefValue:null,mode:"range",interval:[0,1,0,0]};this.timeValueMode={widget:"datepicker",maxValue:xz(),minValue:xz(),maxDefValue:null,minDefValue:null,mode:"value",interval:[0,1,0,0]};this.c=[];this.drawActive=!1;this.drawToolActivate=new ex(this,"drawActive");this.drawnFeatures=new hi;this.b=null;this.selectedFeatures=new hi;this.T=new hi;this.i=new Ay({features:this.selectedFeatures,style:f.Dc(!1)});this.T.push(this.i);
this.g=new Ey({features:this.selectedFeatures,style:new D({text:new Br({text:"\uf01e",font:"normal 18px FontAwesome",fill:new cd({color:"#7a7a7a"})})})});this.T.push(this.g);this.f=new Oy({features:this.selectedFeatures,style:new D({text:new Br({text:"\uf047",font:"normal 18px FontAwesome",fill:new cd({color:"#7a7a7a"})})})});this.T.push(this.f);this.listenerKeys_=[];yz(this);this.modifyToolActivate=new ex(this.i,"active");this.rotateToolActivate=new ex(this.g,"active");this.translateToolActivate=
new ex(this.f,"active");this.geomType=null}
wz.prototype.$onInit=function(){var a=this;this.clone=this.j.Ch(this.rule);this.u=new ex(this.rule,"active");this.o.ra(this.toolGroup,this.u);this.I.$watch(function(){return a.rule.active},this.s.bind(this));"date"===this.clone.type||"datetime"===this.clone.type?(this.c.push(this.I.$watch(function(){return a.clone.getExpression()},function(b){b=null===b?xz():b;a.timeValueMode.minValue=b})),this.c.push(this.I.$watch(function(){return a.clone.lowerBoundary},function(b){b=null===b?xz(6048E5):b;a.timeRangeMode.minValue=
b})),this.c.push(this.I.$watch(function(){return a.clone.upperBoundary},function(b){b=null===b?xz():b;a.timeRangeMode.maxValue=b}))):"geometry"===this.clone.type&&(this.c.push(this.I.$watch(function(){return a.clone.operator},function(b){b&&"contains"===b&&(b=a.clone,b.feature.getGeometry()&&(b=a.ngeoFeatureHelper_.getType(b.feature),yd(["Circle","Polygon","Rectangle"],b)||a.clone.setExpression(null)))})),this.c.push(this.I.$watch(function(){return a.clone.expression},function(b){b?a.geomType=a.ngeoFeatureHelper_.getType(a.clone.feature):
a.geomType=null})),this.c.push(this.I.$watch(function(){var b=null!==a.clone.getExpression(),d=!0===a.rule.active,e=a.i.getActive()||a.g.getActive()||a.f.getActive();return b&&d&&e},function(b){b?a.selectedFeatures.push(a.clone.feature):a.selectedFeatures.clear()})))};wz.prototype.$onDestroy=function(){this.rule.active&&(this.rule.active=!1,this.s(!1,!0));this.o.Na(this.toolGroup,this.u);for(var a=0,b=this.c.length;a<b;a++)this.c[a]();this.c.length=0;this.clone.destroy()};
wz.prototype.toggle=function(){this.rule.active?this.cancel():this.rule.active=!0};wz.prototype.toggle=wz.prototype.toggle;wz.prototype.apply=function(){this.j.Qf(this.clone,this.rule);this.rule.active=!1};wz.prototype.apply=wz.prototype.apply;wz.prototype.cancel=function(){this.j.Qf(this.rule,this.clone);this.rule.active=!1};wz.prototype.cancel=wz.prototype.cancel;wz.prototype.reset=function(){this.clone.reset();this.rule.reset()};wz.prototype.reset=wz.prototype.reset;
wz.prototype.Iq=function(a){var b=this.clone,d=b.getExpression()?b.getExpression().split(","):[],e=d.indexOf(a);-1<e?d.splice(e,1):d.push(a);b.setExpression(d.length?d.join(","):null)};wz.prototype.toggleChoiceSelection=wz.prototype.Iq;wz.prototype.onDateSelected=function(a){this.clone.setExpression(a.start)};wz.prototype.onDateSelected=wz.prototype.onDateSelected;wz.prototype.rp=function(a){this.clone.lowerBoundary=a.start;this.clone.upperBoundary=a.end};wz.prototype.onDateRangeSelected=wz.prototype.rp;
function xz(a){var b=new Date;void 0!==a&&b.setTime(b.getTime()-a);return b.toISOString()}wz.prototype.Gq=function(a){return(new Date(a)).toLocaleDateString()};wz.prototype.timeToDate=wz.prototype.Gq;
wz.prototype.s=function(a,b){if(this.rule instanceof Ht&&this.clone instanceof Ht&&a!==b){b=this.listenerKeys_;var d=["ngeo-rule-",v(this)].join("-"),e=this.o,f=this.rule.feature,g=this.clone.feature,h=this.map.sa;a?(b.push(B(this.drawnFeatures,"add",this.R,this)),b.push(B(h,"contextmenu",this.D,this)),b.push(B(this.f,"translateend",this.G,this)),b.push(B(this.g,"rotateend",this.O,this)),this.featureOverlay.na(f),this.featureOverlay.oa(g),zz(this),e.ra(d,this.drawToolActivate,!1),e.ra(d,this.modifyToolActivate,
!0),e.ra(d,this.rotateToolActivate,!1),e.ra(d,this.translateToolActivate,!1),this.i.setActive(!0),g.getGeometry()&&this.ngeoFeatureHelper_.setStyle(g,!0)):(g.setStyle(null),Za(b),this.drawActive=!1,e.Na(d,this.drawToolActivate),e.Na(d,this.modifyToolActivate),e.Na(d,this.rotateToolActivate),e.Na(d,this.translateToolActivate),this.i.setActive(!1),Az(this),this.selectedFeatures.get(ki)&&this.featureOverlay.na(g),this.featureOverlay.oa(f),this.selectedFeatures.clear())}};
function yz(a){a.T.forEach(function(a){a.setActive(!1);this.C(a)},a)}function zz(a){a.T.forEach(function(a){bl(this.map,a)},a)}function Az(a){a.T.forEach(function(a){this.map.T.remove(a)},a)}wz.prototype.R=function(a){var b=this;this.N(function(){var d=b.clone,e=d.feature,f=a.element,g=f.getGeometry();d.geometry=g;b.drawActive=!1;d=b.ngeoFeatureHelper_.dd(f);b.ngeoFeatureHelper_.wf(e);e.Ea(d);b.ngeoFeatureHelper_.setStyle(e,!0);b.I.$apply()})};wz.prototype.bm=function(){return this.ngeoFeatureHelper_.getType(this.rule.feature)};
wz.prototype.getRuleGeometryType=wz.prototype.bm;
wz.prototype.D=function(a){var b=this;this.b&&(Ta(this.b,"actionclick",this.B,this),this.map.Ja.remove(this.b),this.b=null);var d=qi(this.map,a),e=this.map.wa(d),f=el(this.map,d,function(a){var d=!1;yd(b.selectedFeatures.b,a)&&(d=a);return d}),f=f?f:null,d=[];f&&(f=this.ngeoFeatureHelper_.getType(f),"Circle"!=f&&"LineString"!=f&&"Polygon"!=f&&"Rectangle"!=f||d.push({cls:"fa fa-arrows",label:this.ga.getString("Move"),name:Bz}),"LineString"!=f&&"Polygon"!=f&&"Rectangle"!=f||d.push({cls:"fa fa-rotate-right",
label:this.ga.getString("Rotate"),name:Cz}));d.length&&(this.b=new Mx({actions:d}),B(this.b,"actionclick",this.B,this),this.map.Ja.push(this.b),this.b.open(e),a.preventDefault(),a.stopPropagation(),this.I.$apply())};wz.prototype.B=function(a){a=a.action;switch(a){case Bz:this.f.setActive(!0);this.I.$apply();break;case Cz:this.g.setActive(!0);this.I.$apply();break;default:console.log("FIXME - support: "+a)}};wz.prototype.O=function(){this.g.setActive(!1);this.I.$apply()};
wz.prototype.G=function(){this.f.setActive(!1);this.I.$apply()};wz.$inject="gettextCatalog $scope $timeout ngeoDecorateInteraction ngeoFeatureHelper ngeoRuleHelper ngeoToolActivateMgr".split(" ");var Bz="move",Cz="rotate";S.component("ngeoRule",{bindings:{featureOverlay:"<",map:"<",rule:"<",toolGroup:"<"},controller:wz,controllerAs:"ruleCtrl",templateUrl:function(){return"ngeo/rule.html"}});function Dz(a,b,d,e,f){this.ga=a;this.I=b;this.c=d;this.g=e;this.f=f;this.conditions=[{text:a.getString("All"),value:"&&"},{text:a.getString("At least one"),value:"||"},{text:a.getString("None"),value:"!"}];this.geometryAttributes=[];this.otherAttributes=[];this.b={}}
Dz.prototype.$onInit=function(){var a=this;this.I.$watch(function(){return a.aRuleIsActive},this.i.bind(this));for(var b=ka(this.datasource.attributes),d=b.next();!d.done;d=b.next())d=d.value,"geometry"===d.type?this.geometryAttributes.push(d):this.otherAttributes.push(d);b=ka([].concat(this.customRules,this.directedRules));for(d=b.next();!d.done;d=b.next())this.Mg(d.value);this.apply()};Dz.prototype.$onDestroy=function(){null!==this.datasource.filterRules&&(this.datasource.filterRules=null);this.featureOverlay.clear()};
Dz.prototype.apply=function(){var a=this;this.datasource.filterRules=null;this.c(function(){var b=Ez(a);b.length&&(a.datasource.filterRules=b,a.g.clear())})};Dz.prototype.apply=Dz.prototype.apply;Dz.prototype.getData=function(){var a=Ez(this);if(a.length){var b=this.datasource,d=this.map,e=O(d).getProjection().Ca,a=this.f.Zd(b,e,a);this.g.vb({filter:a,limit:1E3,map:d})}};Dz.prototype.getData=Dz.prototype.getData;
function Ez(a){var b=[];a=ka([].concat(a.customRules,a.directedRules));for(var d=a.next();!d.done;d=a.next())d=d.value,d.value&&b.push(d);return b}Dz.prototype.ol=function(a){var b=this.f.be(a,!0);this.Mg(b);this.customRules.push(b);this.c(function(){b.active=!0},1)};Dz.prototype.createAndAddCustomRule=Dz.prototype.ol;Dz.prototype.pq=function(a){this.datasource.filterCondition!==a.value&&(this.datasource.filterCondition=a.value)};Dz.prototype.setCondition=Dz.prototype.pq;
Dz.prototype.cq=function(a){var b=this;a.active=!1;this.c(function(){Bd(b.customRules,a);b.hk(a);a.destroy()})};Dz.prototype.removeCustomRule=Dz.prototype.cq;Dz.prototype.Mg=function(a){var b=v(a);this.b[b]=this.I.$watch(function(){return a.active},this.j.bind(this));a instanceof Ht&&this.featureOverlay.oa(a.feature)};Dz.prototype.registerRule_=Dz.prototype.Mg;Dz.prototype.hk=function(a){var b=v(a);(0,this.b[b])();delete this.b[b];a instanceof Ht&&this.featureOverlay.na(a.feature)};
Dz.prototype.unregisterRule_=Dz.prototype.hk;Dz.prototype.j=function(){for(var a=!1,b=ka([].concat(this.customRules,this.directedRules)),d=b.next();!d.done;d=b.next())if(d.value.active){a=!0;break}this.aRuleIsActive=a};Dz.prototype.i=function(){if(!this.aRuleIsActive)for(var a=ka([].concat(this.customRules,this.directedRules)),b=a.next();!b.done;b=a.next())if(b=b.value,b.active){b.active=!1;break}};Dz.$inject=["gettextCatalog","$scope","$timeout","ngeoMapQuerent","ngeoRuleHelper"];
S.component("ngeoFilter",{bindings:{aRuleIsActive:"=",customRules:"<",datasource:"<",directedRules:"<",featureOverlay:"<",map:"<",toolGroup:"<"},controller:Dz,controllerAs:"filterCtrl",templateUrl:function(){return"ngeo/filter.html"}});function Fz(a,b,d,e,f,g,h,k,l,n){var p=this;a.$watch(function(){return p.active},this.Bm.bind(this));this.j=b;this.ga=d;this.gmfDataSourceBeingFiltered=e;a.$watch(function(){return p.gmfDataSourceBeingFiltered.dataSource},this.ln.bind(this));this.o=f;this.gmfSavedFilters=g;a.$watchCollection(function(){return p.gmfSavedFilters.currentDataSourceItems},function(){!p.gmfSavedFilters.currentDataSourceItems.length&&p.saveFilterManageModalShown&&(p.saveFilterManageModalShown=!1)});this.i=h;a.$watch(function(){return p.i.functionalities},
this.Rm.bind(this));this.s=k;this.featureOverlay=l.ob();this.c=n;this.aRuleIsActive=!1;this.directedRules=this.customRules=null;this.filtrableDataSources=[];this.b=null;this.g=f.collection;this.listenerKeys_=[];this.readyDataSource=null;this.f={};this.saveFilterSaveModalShown=!1;a.$watch(function(){return p.saveFilterSaveModalShown},function(){p.saveFilterName=""});this.saveFilterName="";this.enableDataSourceRegistration_=this.saveFilterManageModalShown=!1;a.$watch(function(){return p.enableDataSourceRegistration_},
this.Qm.bind(this));Gz(this)}m=Fz.prototype;m.Rm=function(){var a=this.i.functionalities;a&&a.filterable_layers?this.b=a.filterable_layers:this.b=null;Gz(this)};function Gz(a){var b=!!a.b;a.enableDataSourceRegistration_!==b&&(a.enableDataSourceRegistration_=b)}m.Bm=function(a){var b=this;a||(this.aRuleIsActive=!1,this.j(function(){b.gmfDataSourceBeingFiltered.dataSource=null}))};
m.Qm=function(a){var b=this.listenerKeys_;a?(b.push(B(this.g,"add",this.Cm,this)),b.push(B(this.g,"remove",this.Dm,this)),this.g.forEach(this.Nj,this)):(Za(b),b.length=0,this.filtrableDataSources.length=0)};m.Cm=function(a){this.Nj(a.element)};m.Dm=function(a){a=a.element;a.filtrable&&(Bd(this.filtrableDataSources,a),this.gmfDataSourceBeingFiltered.dataSource===a&&(this.gmfDataSourceBeingFiltered.dataSource=null))};
m.Nj=function(a){if(null===a.filtrable){var b,d=this.ga,e=[];if(yd(this.b,a.name)){if(a.supportsWFS||e.push(d.getString("The data source doesn't support WFS, which is required to fetch the attributes to build the filter rules.")),a.ogcLayers&&a.ogcLayers.length?a.ogcLayers[0].queryable||e.push(d.getString("The ogcLayer within the data source must be queryable.")):e.push(d.getString("The data source must have only 1 ogcLayer defined.")),b=!e.length,!b){var f=d.getString("The following data source is marked as being filtrable,\n          but is missing some requirements: "),
g=a.name+" ("+a.id+").",d=d.getString("Please, contact your administrator about this.\n          Here are the reasons: ");e.unshift(f+" "+g+" "+d);this.s.notify({msg:e.join(" "),type:"warning"})}}else b=!1;a.filtrable=b}a.filtrable&&this.filtrableDataSources.push(a)};
m.ln=function(a){var b=this;this.aRuleIsActive=!1;this.readyDataSource=this.directedRules=this.customRules=null;this.gmfSavedFilters.currentDataSourceId=null;a&&(this.active||(this.active=!0),this.o.Aj(a).then(function(a){var d=b.f[a.id]||null;if(!d&&(d={customRules:[],directedRules:[]},b.f[a.id]=d,a.gmfLayer.metadata&&a.gmfLayer.metadata.directedFilterAttributes&&a.gmfLayer.metadata.directedFilterAttributes.length))for(var f=a.gmfLayer.metadata.directedFilterAttributes,g=ka(a.attributes),h=g.next();!h.done;h=
g.next())h=h.value,yd(f,h.name)&&d.directedRules.push(b.c.be(h));b.customRules=d.customRules;b.directedRules=d.directedRules;b.readyDataSource=a;b.gmfSavedFilters.currentDataSourceId=a.id}))};m.mq=function(){this.saveFilterSaveModalShown=!0};Fz.prototype.saveFilterShowModal=Fz.prototype.mq;
Fz.prototype.lq=function(){var a=this.saveFilterName,b=this.readyDataSource,d=b.id,e=-1!==this.gmfSavedFilters.wg(a,d),b=b.filterCondition,f=this.ga.getString("A filter with the same name already exists.\n      Do you want to overwrite it?");if(!e||confirm(f))e=this.customRules?this.c.Qg(this.customRules):[],f=this.directedRules?this.c.Qg(this.directedRules):[],this.gmfSavedFilters.save({condition:b,customRules:e,dataSourceId:d,directedRules:f,name:a}),this.saveFilterSaveModalShown=!1};
Fz.prototype.saveFilterSave=Fz.prototype.lq;Fz.prototype.iq=function(a){var b=this,d=this.readyDataSource;this.directedRules=this.customRules=null;var e=this.c.Cf(a.customRules),f=this.c.Cf(a.directedRules);this.j(function(){b.customRules=e;b.directedRules=f;d.filterCondition=a.condition;var g=b.f[d.id]||null;g.customRules=e;g.directedRules=f})};Fz.prototype.saveFilterLoadItem=Fz.prototype.iq;Fz.prototype.jq=function(){this.saveFilterManageModalShown=!0};Fz.prototype.saveFilterManage=Fz.prototype.jq;
Fz.prototype.kq=function(a){this.gmfSavedFilters.remove(a)};Fz.prototype.saveFilterRemoveItem=Fz.prototype.kq;Fz.$inject="$scope $timeout gettextCatalog gmfDataSourceBeingFiltered gmfDataSourcesHelper gmfSavedFilters gmfUser ngeoNotification ngeoFeatureOverlayMgr ngeoRuleHelper".split(" ");T.component("gmfFilterselector",{bindings:{active:"=",map:"<",toolGroup:"<"},controller:Fz,controllerAs:"fsCtrl",templateUrl:function(){return"gmf/filterselector.html"}});function Hz(a){a=a?a:{};var b=document.createElement("DIV");b.className=void 0!==a.className?a.className:"ol-mouse-position";yh.call(this,{element:b,render:a.render?a.render:Iz,target:a.target});B(this,cb(Jz),this.jn,this);a.Fh&&this.set(Kz,a.Fh);a.projection&&this.Tb(lc(a.projection));this.s=void 0!==a.fk?a.fk:"";this.o=b.innerHTML;this.j=this.f=this.b=null}u(Hz,yh);function Iz(a){a=a.frameState;a?this.b!=a.ka.projection&&(this.b=a.ka.projection,this.f=null):this.b=null;Lz(this,this.j)}m=Hz.prototype;
m.jn=function(){this.f=null};m.getProjection=function(){return this.get(Jz)};m.Ym=function(a){this.j=qi(this.i,a);Lz(this,this.j)};m.Zm=function(){Lz(this,null);this.j=null};m.setMap=function(a){yh.prototype.setMap.call(this,a);a&&(a=a.sa,this.u.push(B(a,"mousemove",this.Ym,this),B(a,"mouseout",this.Zm,this)))};m.Tb=function(a){this.set(Jz,a)};
function Lz(a,b){var d=a.s;if(b&&a.b){if(!a.f){var e=a.getProjection();a.f=e?kc(a.b,e):vc}if(b=a.i.wa(b))a.f(b,b),d=(d=a.get(Kz))?d(b):b.toString()}a.o&&d==a.o||(a.element.innerHTML=d,a.o=d)}var Jz="projection",Kz="coordinateFormat";T.component("gmfMouseposition",{controller:"gmfMousepositionController as ctrl",bindings:{map:"<gmfMousepositionMap",projections:"<gmfMousepositionProjections"},templateUrl:function(){return"gmf/mouseposition.html"}});
function Mz(a,b,d){this.control=new Hz({className:"gmf-mouseposition-control",Fh:function(a){var d=this.projection.filter.split(":"),e=b(d.shift());d.unshift(a);return e.apply(this,d)}.bind(this),target:angular.element(".gmf-mouseposition-control-target",a)[0],fk:d("Coordinates")})}Mz.$inject=["$element","$filter","gettext"];Mz.prototype.$onInit=function(){this.Tb(this.projections[0]);this.map.getControls().push(this.control)};
Mz.prototype.Tb=function(a){this.control.Tb(lc(a.code));this.projection=a};Mz.prototype.setProjection=Mz.prototype.Tb;T.controller("gmfMousepositionController",Mz);function Nz(a,b,d){a=Number(a);b=Number(b);d=Number(d);if(a!=(a&255)||b!=(b&255)||d!=(d&255))throw Error('"('+a+","+b+","+d+'") is not a valid RGB color');a=Oz(a.toString(16));b=Oz(b.toString(16));d=Oz(d.toString(16));return"#"+a+b+d}function Pz(a,b,d){0>d?d+=1:1<d&&--d;return 1>6*d?a+6*(b-a)*d:1>2*d?b:2>3*d?a+(b-a)*(2/3-d)*6:a}function Oz(a){return 1==a.length?"0"+a:a};function Qz(a){var b={};a=String(a);var d="#"==a.charAt(0)?a:"#"+a;if(Rz.test(d))return b.ug=Sz(d),b.type="hex",b;var e;a:{var f=a.match(Tz);if(f){var d=Number(f[1]),g=Number(f[2]);e=Number(f[3]);f=Number(f[4]);if(0<=d&&255>=d&&0<=g&&255>=g&&0<=e&&255>=e&&0<=f&&1>=f){e=[d,g,e,f];break a}}e=[]}if(e.length){a=e[0];d=e[1];g=e[2];e=e[3];f=Math.floor(255*e);if(isNaN(f)||0>f||255<f)throw Error('"('+a+","+d+","+g+","+e+'") is not a valid RGBA color');e=Oz(f.toString(16));a=Nz(a,d,g)+e;b.ug=a;b.type="rgba";
return b}a:{if(f=a.match(Uz))if(d=Number(f[1]),g=Number(f[2]),e=Number(f[3]),f=Number(f[4]),0<=d&&360>=d&&0<=g&&100>=g&&0<=e&&100>=e&&0<=f&&1>=f){f=[d,g,e,f];break a}f=[]}if(f.length){d=f[0];e=f[1];g=f[2];a=f[3];f=Math.floor(255*a);if(isNaN(f)||0>f||255<f)throw Error('"('+d+","+e+","+g+","+a+'") is not a valid HSLA color');a=Oz(f.toString(16));e/=100;g/=100;d/=360;if(e){var h,f=.5>g?g*(1+e):g+e-e*g;h=2*g-f;g=255*Pz(h,f,d+1/3);e=255*Pz(h,f,d);d=255*Pz(h,f,d-1/3)}else g=e=d=255*g;d=[Math.round(g),Math.round(e),
Math.round(d)];d=Nz(d[0],d[1],d[2]);b.ug=d+a;b.type="hsla";return b}throw Error(a+" is not a valid color string");}var Vz=/#(.)(.)(.)(.)/;function Sz(a){if(!Rz.test(a))throw Error("'"+a+"' is not a valid alpha hex color");5==a.length&&(a=a.replace(Vz,"#$1$1$2$2$3$3$4$4"));return a.toLowerCase()}var Rz=/^#(?:[0-9a-f]{4}){1,2}$/i,Tz=/^(?:rgba)?\((0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2}),\s?(0|1|0\.\d{0,10})\)$/i,Uz=/^(?:hsla)\((0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2})\%,\s?(0|[1-9]\d{0,2})\%,\s?(0|1|0\.\d{0,10})\)$/i;var Wz={LineString:"LineString",Point:"Point",Polygon:"Polygon",MultiLineString:"LineString",MultiPoint:"Point",MultiPolygon:"Polygon"};function Xz(a,b,d){this.c=a;this.b=b;this.g=d}Xz.prototype.cancel=function(a,b){return this.b["delete"](this.c+"/cancel/"+a,void 0!==b?b:{})};Xz.prototype.cancel=Xz.prototype.cancel;Xz.prototype.Kh=function(a,b,d,e,f,g){d={dpi:d,rotation:g.rotation};Yz(this,a,b,d);a={map:d};w(a,g);return{attributes:a,format:f,layout:e}};Xz.prototype.createSpec=Xz.prototype.Kh;
function Yz(a,b,d,e){var f=O(b),g=f.getCenter(),h=f.getProjection(),k=f.S(),f=e.rotation||180*tj(f)/Math.PI;e.center=g;e.projection=h.Ca;e.rotation=f;e.scale=d;e.layers=[];b=dl(b);b=a.g.bg(b);b=b.slice().reverse();b.forEach(function(a){ve(a)&&Zz(e.layers,a,k)},a)}
function Zz(a,b,d){if(b instanceof Fg){if(E(b)instanceof Vn){var e=E(b);d=e.getUrl();if(void 0!==d){b=b.getOpacity();var e=e.f,f={TRANSPARENT:!0};w(f,e);delete f.LAYERS;delete f.FORMAT;delete f.SERVERTYPE;delete f.VERSION;b={baseURL:$z(d),imageFormat:"FORMAT"in e?e.FORMAT:"image/png",layers:e.LAYERS.split(","),customParams:f,serverType:e.SERVERTYPE,type:"wms",opacity:b,version:e.VERSION};a.push(b)}}}else if(b instanceof Jg){if(E(b)instanceof Vh){d=E(b);for(var f=d.getProjection(),g=d.Sa,h=g.s,e=[],
k=0,l=h.length;k<l;++k){var n=g.c?g.c[k]:null;e.push({identifier:h[k],scaleDenominator:g.S(k)*Rb(f)/2.8E-4,tileSize:hg(qg(g,k)),topLeftCorner:lg(g,k),matrixSize:[n.W-n.U,n.ba-n.Y]})}f=d.f;g=Object.keys(f);h=d.urls[0];k=d.xa();0<=h.indexOf("{Layer}")&&(h=h.replace("{Layer}",k));b={baseURL:$z(h),dimensions:g,dimensionParams:f,imageFormat:d.D,layer:d.xa(),matrices:e,matrixSet:d.u,opacity:b.getOpacity(),requestEncoding:d.V,style:d.getStyle(),type:"WMTS",version:d.ta};a.push(b)}}else if(b instanceof gi){e=
E(b).cd();f=new Il;g=[];h={version:2};k=0;for(l=e.length;k<l;++k){var n=e[k],p=null,q=n.i;q?p=q.call(n,d):(q=b.o)&&(p=q.call(b,n,d));q=rl(f,n);p=null===p||Array.isArray(p)?p:[p];if(null!==p&&0<p.length)for(var r=!1,t=0,C=p.length;t<C;++t){var x=p[t],K=v(x).toString(),L=x.getGeometry(),M;if(L){var N=n.clone();N.setGeometry(L);M=rl(f,N);L=N.getGeometry();g.push(M)}else{M=q;L=n.getGeometry();if(!L)continue;r||(g.push(M),r=!0)}N=L.getType();null===M.properties&&(M.properties={});var L="_ngeo_style_"+
t,G=void 0;if(N in Wz){var Z=Wz[N],z="["+L+" = '"+K+"']";if(!(z in h)){N={symbolizers:[]};h[z]=N;var y=x.la(),z=x.ea(),Q=x.pa(),x=x.za();"Polygon"==Z?null!==y&&(G=N.symbolizers,z={type:"polygon"},aA(z,y),null!==Q&&bA(z,Q),G.push(z)):"LineString"==Z?null!==Q&&(G=N.symbolizers,z={type:"line"},bA(z,Q),G.push(z)):"Point"==Z&&null!==z&&(Q=N.symbolizers,z instanceof bd?(G={type:"point"},G.pointRadius=z.c,y=z.la(),null!==y&&aA(G,y),z=z.pa(),null!==z&&bA(G,z)):z instanceof bi?(y=z.g.o,void 0!==y&&(G={type:"point",
externalGraphic:y},y=z.getOpacity(),null!==y&&(G.graphicOpacity=y),y=z.ha(),null!==y&&(Z=z.Ha(),isNaN(Z)&&(Z=1),G.graphicWidth=y[0]*Z,G.graphicHeight=y[1]*Z),z=z.j,isNaN(z)&&(z=0),G.rotation=180*z/Math.PI)):z instanceof $c&&(y=z.b,null!==y&&(G={type:"point"},4===y?G.graphicName="square":3===y?G.graphicName="triangle":5===y?G.graphicName="star":8===y&&(G.graphicName="cross"),y=z.ha(),null!==y&&(G.graphicWidth=y[0],G.graphicHeight=y[1]),y=z.j,!isNaN(y)&&y&&(G.rotation=180*y/Math.PI),y=z.getOpacity(),
null!==y&&(G.graphicOpacity=y),y=z.pa(),null!==y&&bA(G,y),z=z.la(),null!==z&&aA(G,z))),void 0!==G&&Q.push(G));null!==x&&(N=N.symbolizers,G={type:"Text"},z=x.za(),void 0!==z&&(G.label=z,z=x.i,void 0!==z&&(G.labelAlign=z),z=x.f,void 0!==z&&(G.labelRotation=(180*z/Math.PI).toString(),G.labelAlign="cm"),z=x.c,void 0!==z&&(z=z.split(" "),3<=z.length&&(G.fontWeight=z[0],G.fontSize=z[1],G.fontFamily=z.splice(2).join(" "))),z=x.pa(),null!==z&&(Q=Cc(z.qa()),G.haloColor=oo(Q),G.haloOpacity=Q[3],z=z.c,void 0!==
z&&(G.haloRadius=z)),z=x.la(),null!==z&&(z=Cc(z.qa()),G.fontColor=oo(z)),void 0!==G.labelAlign&&(G.labelXOffset=x.b,G.labelYOffset=-x.g),N.push(G)))}}M.properties[L]=K}}0<g.length&&(b={geoJson:{type:"FeatureCollection",features:g},opacity:b.getOpacity(),style:h,type:"geojson"},a.push(b))}}function $z(a){var b=document.createElement("a");b.href=encodeURI(a);return decodeURI(b.href)}
function aA(a,b){b=b.qa();null!==b&&("string"===typeof b&&(b=Qz(b).ug,b=Sz(b),b=[parseInt(b.substr(1,2),16),parseInt(b.substr(3,2),16),parseInt(b.substr(5,2),16),parseInt(b.substr(7,2),16)/255]),a.fillColor=oo(b),a.fillOpacity=b[3])}function bA(a,b){var d=b.qa();null!==d&&(d=Cc(d),a.strokeColor=oo(d),a.strokeOpacity=d[3]);d=b.b;null!==d&&(a.strokeDashstyle=d.join(" "));b=b.c;void 0!==b&&(a.strokeWidth=b)}
Xz.prototype.Ih=function(a,b){var d=this.c+"/report."+(a.format||"pdf"),e={headers:{"Content-Type":"application/json; charset=UTF-8"}};w(e,void 0!==b?b:{});return this.b.post(d,a,e)};Xz.prototype.createReport=Xz.prototype.Ih;Xz.prototype.getStatus=function(a,b){return this.b.get(this.c+"/status/"+a+".json",void 0!==b?b:{})};Xz.prototype.getStatus=Xz.prototype.getStatus;Xz.prototype.mi=function(a){return this.c+"/report/"+a};Xz.prototype.getReportUrl=Xz.prototype.mi;
function cA(a,b){return function(d){return new Xz(d,a,b)}}cA.$inject=["$http","ngeoLayerHelper"];S.factory("ngeoCreatePrint",cA);function dA(){}
dA.prototype.Hh=function(a,b,d){var e=this;return function(f){var g=f.context,h=f.frameState,k=h.ka.resolution,l=h.size[0]*h.Ka,n=h.size[1]*h.Ka;f=[l/2,n/2];var p=a(),q=p[1]*Pc,r=p[0]*Pc,h=b(h),r=r/72/39.37*h/k/2;e.c=p[0]/72/39.37*h/2;k=q/72/39.37*h/k/2;e.b=p[1]/72/39.37*h/2;g.beginPath();g.moveTo(0,0);g.lineTo(l,0);g.lineTo(l,n);g.lineTo(0,n);g.lineTo(0,0);g.closePath();if(d){var p=Ib(d()),l=Math.sqrt(Math.pow(r,2)+Math.pow(k,2)),n=Math.atan(k/r)-p,t=Math.atan(r/k)-p,r=f[0]-Math.cos(n)*l,k=f[1]+
Math.sin(n)*l,p=f[0]+Math.sin(t)*l,q=f[1]+Math.cos(t)*l,h=f[0]+Math.cos(n)*l,n=f[1]-Math.sin(n)*l,C=f[0]-Math.sin(t)*l;f=f[1]-Math.cos(t)*l;g.moveTo(r,k);g.lineTo(p,q);g.lineTo(h,n);g.lineTo(C,f);g.lineTo(r,k)}else l=f[0]-r,n=f[1]-k,r=f[0]+r,f=f[1]+k,g.moveTo(l,n),g.lineTo(l,f),g.lineTo(r,f),g.lineTo(r,n),g.lineTo(l,n);g.closePath();g.fillStyle="rgba(0, 5, 25, 0.5)";g.fill()}};dA.prototype.createPrintMaskPostcompose=dA.prototype.Hh;
dA.prototype.ji=function(a,b,d,e){a=Math.min(a[0]*b*2834.64/d[0],a[1]*b*2834.64/d[1]);b=-1;d=0;for(var f=e.length;d<f;++d)a>e[d]&&(b=e[d]);return b};dA.prototype.getOptimalScale=dA.prototype.ji;dA.prototype.ii=function(a,b,d){return Math.max(b[0]*d/(2834.64*a[0]),b[1]*d/(2834.64*a[1]))};dA.prototype.getOptimalResolution=dA.prototype.ii;S.service("ngeoPrintUtils",dA);var eA={NOT_IN_USE:"notInUse",PRINTING:"printing",ERROR_ON_REPORT:"errorOnReport",CAPABILITIES_NOT_LOADED:"capabilitiesNotLoaded",ERROR_ON_GETCAPABILITIES:"errorOnGetCapabilities"};Ea("gmf.PrintStateEnum",eA);T.value("gmfPrintState",{state:"capabilitiesNotLoaded"});T.value("gmfPrintTemplateUrl",function(a,b){a=b.gmfPrintTemplateurl;return void 0!==a?a:"gmf/print.html"});
function fA(a){return{bindToController:!0,controller:"GmfPrintController as ctrl",templateUrl:a,replace:!0,restrict:"E",scope:{map:"=gmfPrintMap",active:"=gmfPrintActive",rotateMask:"&?gmfPrintRotatemask",fieldValues:"&?gmfPrintFieldvalues"},link:function(a){var b=a.ctrl;a.$watch(function(){return b.active},function(a){gA(this,a)}.bind(b))}}}fA.$inject=["gmfPrintTemplateUrl"];T.directive("gmfPrint",fA);
function hA(a,b,d,e,f,g,h,k,l,n,p,q,r,t,C,x){var K=this;this.c=x;this.M=C("translate");this.ngeoFeatureHelper_=t;this.R=this.rotateMask?this.rotateMask():!1;this.O=this.fieldValues?this.fieldValues():{};this.Oa=b;this.$timeout_=d;this.cb=e;this.ga=g;this.o=h;this.V=k.xa();this.X=l;this.b=n(p);this.Qa=r;this.G="0";f.has("cacheVersion")&&(this.G=f.get("cacheVersion"));this.scaleInput=!1;f.has("gmfPrintOptions")&&(this.scaleInput=f.get("gmfPrintOptions").scaleInput);this.u=this.s=this.D=this.g=null;
this.j="";this.ia=[];this.N=[];this.f={};this.B=[];this.fields={};this.rotation=0;var L;this.R&&(L=function(){return K.rotation});this.fb=l.Hh(function(){return K.B},function(a){yd(K.fields.scales,K.fields.scale)&&(K.fields.scale=iA(K,a.size,a.ka.resolution));return K.fields.scale},L);b.$watch(function(){return q.c.role_id},function(){K.c.state="capabilitiesNotLoaded";K.i=null});a.$on("gmfStartPrint",function(a,b){K.print(""+b)});a.$on("gmfCancelPrint",function(){K.cancel()})}hA.$inject="$rootScope $scope $timeout $q $injector gettextCatalog ngeoLayerHelper ngeoFeatureOverlayMgr ngeoPrintUtils ngeoCreatePrint gmfPrintUrl gmfAuthentication ngeoQueryResult ngeoFeatureHelper $filter gmfPrintState".split(" ");
function gA(a,b){b?(a.i||jA(a),a.i.then(function(b){a.active&&(a.c.state="notInUse",kA(a,b),a.eb=a.map.on("postcompose",a.fb),a.Ta=a.map.on("pointerdrag",a.Bb.bind(a)),a.map.render())},function(){a.c.state="errorOnGetCapabilities";a.i=null})):(Za(a.eb),Za(a.Ta),a.lg(0),a.map.render())}function jA(a){var b;b=a.b;var d={withCredentials:!0,params:{cache_version:a.G}};b=b.b.get(b.c+"/capabilities.json",void 0!==d?d:{withCredentials:!0});a.i=b}
function kA(a,b){b=b.data;a.ia=b.formats||[];a.N=b.layouts;a.f=b.layouts[0];a.fields.layouts=[];a.N.forEach(function(b){a.fields.layouts.push(b.name)});lA(a)}
function lA(a){a.fields.layout=a.f.name;var b=mA(a,"map").clientInfo;a.B=[b.width,b.height];nA(a);var d=mA(a,"legend");void 0===a.fields.legend&&(a.fields.legend=!(void 0!==d?!d:!a.O.legend));a.fields.scales=b.scales||[];a.fields.dpis=b.dpiSuggestions||[];b=a.map.ha();d=O(a.map).S();a.fields.scale=iA(a,b,d);a.fields.dpi=a.fields.dpi&&0<a.fields.dpis.indexOf(a.fields.dpi)?a.fields.dpi:a.fields.dpis[0];a.fields.formats={};a.ia.forEach(function(b){a.fields.formats[b]=!0});a.map.render()}
function nA(a){var b,d,e,f;a.fields.customs||(a.fields.customs=[]);var g=a.fields.customs,h=g.splice(0,g.length);a.f.attributes.forEach(function(g){if(!g.clientParams){b=""+g.name;var k=g.default;e=void 0!==k&&""!==k?k:a.O[b];d=""+g.type;switch(d){case "String":f="comments"===b?"textarea":"text";break;case "Boolean":f="checkbox";break;case "Number":f="number";e=parseFloat(e);e=isNaN(e)?0:e;break;default:f=d}h.forEach(function(a){if(a.name===b&&a.type===f)return e=a.value});a.fields.customs.push({name:b,
type:f,value:e})}})}function mA(a,b){var d=null;a.f.attributes.forEach(function(a){if(a.name===b)return d=a});return d}hA.prototype.lg=function(a){void 0!==a&&(a=parseInt(a,10),180<a?a=-180:-180>a&&(a=180),this.rotation=a,this.R?this.map.render():O(this.map).zd(Ib(this.rotation)));return this.rotation};hA.prototype.getSetRotation=hA.prototype.lg;
hA.prototype.Bb=function(a){var b=this,d=a.originalEvent;if(this.active&&d.altKey&&d.shiftKey){var e=wh(this.map,O(this.map).getCenter());a=a.pixel;if(null===this.u)this.s=null;else{this.$timeout_.cancel(this.u);var d=this.s[0]-e[0],f=this.s[1]-e[1],g=a[0]-e[0],e=a[1]-e[1],h=Math.sqrt(Math.pow(g,2)+Math.pow(e,2)),k=(d*g+f*e)/(Math.sqrt(Math.pow(d,2)+Math.pow(f,2))*h),k=1>=k?(0<d*e-f*g?1:-1)*Math.acos(k):0;this.lg(this.rotation+Math.round(180*k/Math.PI*(h/200)));this.Oa.$digest()}this.u=this.$timeout_(function(){b.u=
null},500);this.s=a}};
hA.prototype.print=function(a){if("printing"!==this.c.state){this.g=this.cb.defer();this.c.state="printing";var b=this.map.ha(),d=O(this.map).S(),b=iA(this,b,d),e=this.R?-this.rotation:this.rotation,f={datasource:oA(this),lang:this.ga.currentLanguage,rotation:e,scale:this.fields.scale};this.fields.customs&&this.fields.customs.forEach(function(a){f[a.name]=a.value});this.fields.legend&&null!==pA(this,b)&&(f.legend=pA(this,b));a=this.b.Kh(this.map,b,this.fields.dpi,this.fields.layout,a,f);b=[];Zz(b,
this.V,d);0<b.length&&a.attributes.map.layers.unshift(b[0]);this.b.Ih(a,{timeout:this.g.promise}).then(this.da.bind(this),this.C.bind(this))}};hA.prototype.print=hA.prototype.print;hA.prototype.cancel=function(){null!==this.g&&this.g.resolve();null!==this.D&&this.$timeout_.cancel(this.D);0<this.j.length&&this.b.cancel(this.j);qA(this)};hA.prototype.cancel=hA.prototype.cancel;function qA(a,b){a.c.state=b||"notInUse";a.j=""}
function oA(a){var b,d,e,f=[];a.Qa.sources.forEach(function(a){d=[];e=[];a.features.forEach(function(a,b){var f=this.ngeoFeatureHelper_.ge(a);b||(e=Object.keys(f).map(function(a){return this.M(a)},this));d.push(Object.keys(f).map(function(a){return f[a]}))},this);e.length&&(b={title:this.M(a.label),table:{columns:e,data:d}},f.push(b))},a);return f}function iA(a,b,d){var e=a.fields.scales.slice();return void 0!==b&&void 0!==d?a.X.ji(b,d,a.B,e.reverse()):a.fields.scales[0]}
hA.prototype.da=function(a){this.j=a=a.data.ref;rA(this,a)};function rA(a,b){a.g=a.cb.defer();a.b.getStatus(b,{timeout:a.g.promise}).then(a.ta.bind(a,b),a.C.bind(a))}hA.prototype.ta=function(a,b){var d=this;b=b.data;b.done?"error"!=b.status?(window.location.href=this.b.mi(a),qA(this)):(console.error(b.error),this.C()):this.D=this.$timeout_(function(){rA(d,a)},1E3,!1)};hA.prototype.C=function(){qA(this,"errorOnReport")};
function pA(a,b){var d={classes:[]},e,f,g,h,k=a.ga,l=a.o.he(a.map,"data");a.o.bg(l).reverse().forEach(function(l){e=[];if(ve(l)&&E(l))if(l instanceof Jg)g=l.get("layerNodeName"),(h=a.o.og(l))&&e.push({name:k.getString(""+g),icons:[h]});else{var n=E(l);f=n.f.LAYERS.split(",");f.forEach(function(d){(h=a.o.pe(n.getUrl(),d,b))&&0!==d.length&&e.push({name:k.getString(""+d),icons:[h]})})}0<e.length&&d.classes.push({classes:e})});return 0<d.classes.length?d:null}
hA.prototype.xb=function(a){var b;this.N.forEach(function(d){if(d.name===a)return b=d,!0});this.f=b;lA(this)};hA.prototype.setLayout=hA.prototype.xb;hA.prototype.hm=function(a){if(void 0!==a){var b=this.map.ha();this.fields.scale=a;a=this.X.ii(b,this.B,a);a=O(this.map).va(a,0,1);Ej(O(this.map),a)}return this.fields.scale};hA.prototype.getSetScale=hA.prototype.hm;hA.prototype.rq=function(a){this.fields.dpi=a};hA.prototype.setDpi=hA.prototype.rq;hA.prototype.Jn=function(a){return this.c.state===eA[a]};
hA.prototype.isState=hA.prototype.Jn;T.controller("GmfPrintController",hA);function sA(a){function b(a){a.each(function(a){d3.select(this).selectAll("svg").remove();if(void 0!==a){Q=Math.max(this.clientWidth-e.right-e.left,0);N=d3.scaleLinear().range([0,Q]);y=Math.max(this.clientHeight-e.top-e.bottom,0);G=d3.scaleLinear().range([y,0]);var f=d3.axisBottom(N),g=d3.axisLeft(G),n;1===l&&(n=d3.area().x(function(a){return N(h(a))}).y0(y).y1(function(a){var b=Object.keys(k)[0];return G(k[b].zExtractor(a))}));M=d3.select(this).selectAll("svg").data([a]);var p=M.enter().append("svg");
M=d3.select(this).selectAll("svg").data([a]);void 0!==q&&p.append("defs").append("style").attr("type","text/css").text(q);p=p.append("g");b.Zj([]);p.style("font","11px Arial");1===l&&p.append("path").attr("class","area").style("fill","rgba(222, 222, 222, 0.5)");p.insert("g",":first-child").attr("class","grid-y");d||(p.append("g").attr("class","x axis").attr("transform","translate(0,"+y+")"),p.append("text").attr("class","x label").attr("text-anchor","end").attr("x",Q-4).attr("y",y-4),p.append("g").attr("class",
"y axis"),p.append("text").attr("class","y label").attr("text-anchor","end").attr("y",6).attr("dy",".75em").attr("transform","rotate(-90)").style("fill","grey").text(x+" [m]"),p.append("g").attr("class","metas").attr("transform","translate("+(Q+3)+", 0)"));p.append("g").attr("class","pois");var r=p.append("g").attr("class","x grid-hover");r.append("svg:line").attr("stroke-dasharray","5,5");r.append("text");p.append("rect").attr("class","overlay").attr("width",Q).attr("height",y).style("fill","none").style("pointer-events",
"all");M.attr("width",Q+e.left+e.right).attr("height",y+e.top+e.bottom);z=M.select("g").attr("transform","translate("+e.left+","+e.top+")");aa=d3.extent(a,function(a){return h(a)});N.domain(aa);r=function(){var b=[],d,e;for(e in k)d=d3.extent(a,function(a){return k[e].zExtractor(a)}),b=b.concat(d);return[Math.min.apply(null,b),Math.max.apply(null,b)]}();G.domain(r);if(Z)Z(N,G,Q,y);else{var t=.1*(r[1]-r[0]);G.domain([r[0]-t,r[1]+t])}1===l&&z.select(".area").transition().attr("d",n);for(var qa in k)p.append("path").attr("class",
"line "+qa).style("stroke",k[qa].color||"#F00").style("fill","none"),n=p.append("g").attr("class","y grid-hover "+qa),n.append("svg:line").attr("stroke-dasharray","5,5"),n.append("text"),n=d3.line().x(function(a){return N(h(a))}).y(function(a){return G(k[qa].zExtractor(a))}),z.select(".line."+qa).transition().attr("d",n);2E3<aa[1]?(ea=1E3,P="km"):(ea=1,P="m");d||(f.tickFormat(function(a){return K.xtick(a/ea,P)}),L&&f.tickValues([0,N.domain()[1]]),g.tickFormat(function(a){return K.ytick(a,"m")}),z.select(".x.axis").transition().call(f),
z.select(".x.label").text(C+" ["+P+"]").style("fill","grey").style("shape-rendering","crispEdges"),10>y/15&&g.ticks(y/15),z.select(".y.axis").transition().call(g));z.select(".grid-y").transition().call(g.tickSize(-Q,0).tickFormat("")).selectAll(".tick line").style("stroke","#ccc").style("opacity",.7);z.selectAll(".axis").selectAll("path, line").style("fill","none").style("stroke","#000").style("shape-rendering","crispEdges");z.select(".grid-y").select("path").style("stroke","none");z.selectAll(".grid-hover line").style("stroke",
"#222").style("opacity",.8);z.select(".overlay").on("mouseout",function(){b.Ah()}).on("mousemove",function(){var a=d3.mouse(this)[0],a=N.invert(a);b.highlight(a)})}})}var d=void 0!==a.light?a.light:!1,e=d?{top:0,right:0,bottom:0,left:0}:{top:10,right:20,bottom:30,left:40},f=a.hoverCallback?a.hoverCallback:Ga,g=a.outCallback?a.outCallback:Ga,h=a.distanceExtractor,k=a.linesConfiguration,l=Object.keys(k).length,n=d3.bisector(function(a){return h(a)}).left,p=a.poiExtractor,q=a.styleDefs,r=void 0!==a.poiLabelAngle?
a.poiLabelAngle:-60,t=a.i18n||{},C=t.xAxis||"Distance",x=t.yAxis||"Elevation",K={xhover:function(a,b){return parseFloat(a.toPrecision(3))+" "+b},yhover:function(a){return Math.round(a)+" m"},xtick:function(a){return a},ytick:function(a){return a}};a.formatter&&w(K,a.formatter);var L=void 0!==a.lightXAxis?a.lightXAxis:!1,M,N,G,Z=a.scaleModifier,z,y,Q,ea,P,aa;b.Ah=function(){z.selectAll(".grid-hover").style("display","none");g.call(null)};b.highlight=function(a){var b=M.datum();a=n(b,a);if(!(a>=b.length)){b=
b[a];a=h(b);var d,e=[],g={},p;for(p in k)d=k[p].zExtractor(b),e.push(d),g[p]=d,z.select(".y.grid-hover."+p).style("display","inline").select("line").attr("x1",N(0)).attr("y1",G(d)).attr("x2",Q).attr("y2",G(d));z.select(".x.grid-hover").style("display","inline").select("line").attr("x1",N(a)).attr("y1",y).attr("x2",N(a)).attr("y2",G(Math.max.apply(null,e)));p=a>aa[1]/2;d=N(a);d+=p?-10:10;z.select(".x.grid-hover text").text(K.xhover(a/ea,P)).style("text-anchor",p?"end":"start").attr("transform","translate("+
d+","+(y-10)+")");1===l&&z.select(".y.grid-hover text").text(K.yhover(e[0],"m")).style("text-anchor",p?"end":"start").attr("transform","translate("+d+","+(G(e[0])-10)+")");f.call(null,b,a/ea,P,g,"m")}};b.Zj=function(a){a=void 0!==a?a:[];var b=M.select("g"),e=M.datum();a=b.select(".pois").selectAll(".poi").data(a,function(a){var b=n(e,Math.round(10*p.dist(a))/10,1);if(b=e[b]){var d,f=[];for(d in k)f.push(k[d].zExtractor(b));d=Math.max.apply(null,f);p.z(a,d)}return p.id(a)}).enter().append("g").attr("class",
"poi");a.append("text").attr("x",d?0:9).attr("dy",".35em").attr("text-anchor",d?"middle":"start");a.append("line").style("shape-rendering","crispEdges");a.style("opacity",0).transition().duration(1E3).delay(100).style("opacity",1);a.selectAll("text").attr("transform",function(a){return d?["translate(",N(p.dist(a)),",",G(p.z(a))-10,")"].join(""):["translate(",N(p.dist(a)),",",G(p.z(a))-20,") rotate(",r,")"].join("")}).text(function(a){return p.sort(a)+(d?"":" - "+p.title(a))});a.selectAll("line").style("stroke",
"grey").attr("x1",function(a){return N(p.dist(a))}).attr("y1",function(){return G(G.domain()[0])}).attr("x2",function(a){return N(p.dist(a))}).attr("y2",function(a){return G(p.z(a))});a.exit().remove()};return b}Ea("ngeo.profile",sA);function tA(a){return{restrict:"A",link:function(b,d,e){function f(){void 0!==k&&(h.datum(l).call(k),void 0!==l&&k.Zj(n))}var g=e.ngeoProfileOptions,h=d3.select(d[0]),k,l,n;b.$watchCollection(g,function(a){if(a=w({},a)){if(a.hoverCallback){var d=a.hoverCallback;a.hoverCallback=function(a){for(var e=[],f=0;f<arguments.length;++f)e[f-0]=arguments[f];d.apply(null,[].concat(la(e)));b.$applyAsync()}}if(a.outCallback){var e=a.outCallback;a.outCallback=function(){e();b.$applyAsync()}}k=sA(a);f()}});b.$watch(e.ngeoProfile,
function(a){l=a;f()});b.$watch(e.ngeoProfilePois,function(a){n=a;f()});b.$watch(e.ngeoProfileHighlight,function(a){void 0!==a&&(0<a?k.highlight(a):k.Ah())});Tu(window,"resize",a(f,50,!0),!1,this)}}}tA.$inject=["ngeoDebounce"];S.directive("ngeoProfile",tA);S.value("gmfProfileTemplateUrl",function(a,b){a=b.gmfProfileTemplateurl;return void 0!==a?a:"gmf/profile.html"});function uA(a,b,d){return d(a,b)}uA.$inject=["$element","$attrs","gmfProfileTemplateUrl"];
T.component("gmfProfile",{controller:"GmfProfileController as ctrl",bindings:{active:"=gmfProfileActive",line:"=gmfProfileLine",getMapFn:"&?gmfProfileMap",getLinesConfigurationFn:"&gmfProfileLinesconfiguration",getHoverPointStyleFn:"&?gmfProfileHoverpointstyle",getNbPointsFn:"&?gmfProfileNumberofpoints",getOptionsFn:"&?gmfProfileOptions"},templateUrl:uA});
function vA(a,b,d,e,f,g,h,k){var l=this;this.D=a;this.R=b;this.$filter_=e;this.ga=f;this.o=g.ob();this.N=h;this.O=k;this.b=this.c=null;this.f=[];this.j=100;this.profileData=[];this.currentPoint={coordinate:void 0,distance:void 0,elevations:{},xUnits:void 0,yUnits:void 0};this.profileHighlight=-1;this.Ba=this.g=null;this.i=new jd;this.o.oa(this.i);this.s={xAxis:f.getString("Distance"),yAxis:f.getString("Elevation")};this.profileOptions=null;this.isErrored=this.active=!1;a.$watch(function(){return l.active},
function(a,b){b!==a&&wA(l)});a.$watch(function(){return l.line},function(a,b){b!==a&&(l.isErrored=!1,l.line?(a={type:"LineString",coordinates:l.line.J()},a={layers:l.f.join(","),geom:JSON.stringify(a),nbPoints:l.j},l.R({url:l.N,method:"POST",params:a,paramSerializer:"$httpParamSerializerJQLike",headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(l.C.bind(l),l.u.bind(l))):l.profileData=[],l.active=!!l.line)});wA(this)}vA.$inject="$scope $http $element $filter gettextCatalog ngeoFeatureOverlayMgr gmfProfileJsonUrl ngeoCsvDownload".split(" ");
m=vA.prototype;
m.$onInit=function(){this.c=this.getMapFn?this.getMapFn():null;this.j=this.getNbPointsFn?this.getNbPointsFn():100;var a,b=this.getHoverPointStyleFn;b?a=b():a=new D({image:new bd({fill:new cd({color:"#ffffff"}),radius:3})});this.o.setStyle(a);this.b=this.getLinesConfigurationFn();for(var d in this.b)this.f.push(d),this.b[d].zExtractor||(this.b[d].zExtractor=xA(d));this.profileOptions={linesConfiguration:this.b,distanceExtractor:this.B,hoverCallback:this.wn.bind(this),outCallback:this.yp.bind(this),i18n:this.s};
if(a=this.getOptionsFn)a=a(),w(this.profileOptions,a)};function wA(a){a.active&&null!==a.c?a.G=B(a.c,"pointermove",a.vp.bind(a)):Za(a.G)}m.vp=function(a){if(!a.dragging&&this.line){var b=this.c;a=b.wa(qi(b,a.originalEvent));b=zc(this.line,a);16>ke(new ge([b,a]))/O(this.c).S()?this.profileHighlight=yA(this,b):this.profileHighlight=-1;this.D.$apply()}};
function yA(a,b){var d,e=0,f=[b[0]-.5,b[1]-.5,b[0]+.5,b[1]+.5];ie(a.line,function(a,h){d=new ge([a,h]);if(d.qb(f))return d.fa([a,b]),e+=ke(d);e+=ke(d)});return e}
m.wn=function(a,b,d,e,f){var g;a=[a.x,a.y];for(g in e)this.currentPoint.elevations[g]=e[g];this.currentPoint.distance=b;this.currentPoint.xUnits=d;this.currentPoint.yUnits=f;this.currentPoint.coordinate=a;b=new ij(a);zA(this);this.Ba=document.createElement("div");this.Ba.className+="tooltip ngeo-tooltip-measure";this.g=new nh({element:this.Ba,offset:[0,-15],Lc:"bottom-center"});this.c.Ja.push(this.g);d=this.Ba;var h;f=[];g=this.$filter_("number");f.push(this.s.xAxis+" : "+g(this.currentPoint.distance,
"m"===this.currentPoint.xUnits?0:2)+" "+this.currentPoint.xUnits);for(h in this.currentPoint.elevations)e=this.ga.getString(h),f.push(e+" : "+g(this.currentPoint.elevations[h],0)+" "+this.currentPoint.yUnits);d.innerHTML=f.join("</br>");this.g.setPosition(a);this.i.setGeometry(b)};m.yp=function(){this.currentPoint.coordinate=void 0;this.currentPoint.distance=void 0;this.currentPoint.elevations={};this.currentPoint.xUnits=void 0;this.currentPoint.yUnits=void 0;zA(this);this.i.setGeometry(null)};
function zA(a){null!==a.Ba&&(a.Ba.parentNode.removeChild(a.Ba),a.Ba=null,a.c.Ja.remove(a.g))}m.qa=function(a){if(a=this.b[a])return a.color};vA.prototype.getColor=vA.prototype.qa;vA.prototype.Vl=function(){return this.f.slice(0)};vA.prototype.getLayersNames=vA.prototype.Vl;function xA(a){return function(b){return"values"in b&&a in b.values?parseFloat(b.values[a]):0}}vA.prototype.B=function(a){return"dist"in a?a.dist:0};
vA.prototype.C=function(a){a=a.data.profile;a instanceof Array&&(this.profileData=a)};vA.prototype.u=function(){this.isErrored=!0;console.error("Can not get JSON profile.")};
vA.prototype.Hf=function(){if(this.profileData.length){var a=[],b=!1,d=this.profileData[0];"dist"in d&&(a.push({name:"distance"}),b=!0);var e=[],f;for(f in d.values)a.push({name:f}),e.push(f);a.push({name:"x"});a.push({name:"y"});d=this.profileData.map(function(a){var d={};b&&(d.distance=a.dist);e.forEach(function(b){d[b]=a.values[b]});d.x=a.x;d.y=a.y;return d});this.O.Wg(d,a,"profile.csv")}};vA.prototype.downloadCsv=vA.prototype.Hf;T.controller("GmfProfileController",vA);T.directive("gmfDrawprofileline",function(){return{scope:!0,controller:"GmfDrawprofilelineController as ctrl",restrict:"A",bindToController:{getMapFn:"&gmfDrawprofilelineMap",line:"=gmfDrawprofilelineLine",active:"=gmfDrawprofilelineActive",getStyleFn:"&?gmfDrawprofilelineStyle"},link:function(a,b,d,e){e.Wa()}}});
function AA(a,b,d,e,f){var g=this;this.b=null;this.c=new hi;b=e.ob();b.pc(this.c);var h;(e=this.getStyleFn)?h=e():h=new D({stroke:new dd({color:"#ffcc33",width:2})});b.setStyle(h);this.interaction=new rq({type:"LineString",features:this.c});f(this.interaction);this.interaction.on(cb("active"),function(){this.interaction.getActive()&&BA(this)},this);this.interaction.on("drawend",function(a){var b=this;this.line=a.feature.getGeometry();d(function(){b.interaction.setActive(!1)},0)},this);a.$watch(function(){return g.line},
function(a){null===a&&BA(g)});a.$watch(function(){return g.active},function(a){!1===a&&BA(g);g.interaction.setActive(g.active)})}AA.$inject=["$scope","$element","$timeout","ngeoFeatureOverlayMgr","ngeoDecorateInteraction"];AA.prototype.Wa=function(){this.b=this.getMapFn();bl(this.b,this.interaction)};function BA(a){a.c.clear();a.line=null}T.controller("GmfDrawprofilelineController",AA);function CA(){return{scope:{onDateSelected:"&gmfTimeSliderOnDateSelected",time:"=gmfTimeSliderTime"},bindToController:!0,controller:"gmfTimeSliderController as sliderCtrl",restrict:"AE",templateUrl:"gmf/timeslider.html",link:{pre:function(a,b,d,e){function f(b,d){d.values?(b=new Date(DA(e,d.values[0])),d=new Date(DA(e,d.values[1])),e.dates=[b,d],d={start:b.getTime(),end:d.getTime()}):(b=new Date(DA(e,d.value)),e.dates=b,d={start:b.getTime()});a.$apply();return d}e.Wa();e.sliderOptions.stop=function(a,
b){e.onDateSelected({time:f(0,b)})};e.sliderOptions.slide=f}}}}CA.$inject=["$timeout","$filter"];function EA(a,b){this.b=b}EA.$inject=["$scope","ngeoWMSTime"];EA.prototype.Wa=function(){this.c=FA(this);var a=this.b.le(this.time);this.isModeRange="range"===this.time.mode;this.minValue=a.Ti;this.maxValue=a.Qi;this.dates=this.isModeRange?[a.values[0],a.values[1]]:a.values;this.sliderOptions={range:this.isModeRange,min:this.minValue,max:this.maxValue}};
function FA(a){var b=a.time,d=null,e=new Date(a.minValue);a=new Date(a.maxValue);if(b.values)d=[],b.values.forEach(function(a){d.push((new Date(a)).getTime())});else{var f=new Date(e.getTime());f.setFullYear(e.getFullYear()+1024*b.interval[0]);f.setMonth(e.getMonth()+1024*b.interval[1],e.getDate()+1024*b.interval[2]);f.setSeconds(e.getSeconds()+1024*b.interval[3]);if(f>a)for(d=[],f=0;;f++){var g=new Date(e.getTime());g.setFullYear(e.getFullYear()+f*b.interval[0]);g.setMonth(e.getMonth()+f*b.interval[1],
e.getDate()+f*b.interval[2]);g.setSeconds(e.getSeconds()+f*b.interval[3]);if(g<=a)d.push(g.getTime());else break}}return d}
function DA(a,b){if(b<=a.minValue)return a.minValue;if(b>=a.maxValue)return a.maxValue;if(a.c){for(var d,e=0,f=a.c.length-1;1<f-e;)d=Math.floor((e+f)/2),a.c[d]>=b?f=d:e=d;return a.c[Math.abs(a.c[e]-b)<Math.abs(a.c[f]-b)?e:f]}b=new Date(b);d=new Date(a.minValue);for(var e=new Date(a.minValue),f=new Date(a.maxValue),g=Math.abs(b-e),h=1;;h++){var k=new Date(d.getTime());k.setFullYear(d.getFullYear()+h*a.time.interval[0]);k.setMonth(d.getMonth()+h*a.time.interval[1],d.getDate()+h*a.time.interval[2]);
k.setSeconds(d.getSeconds()+h*a.time.interval[3]);if(k>f)break;var l=Math.abs(b-k);if(l<=g)e=k,g=l;else break}return e.getTime()}T.controller("gmfTimeSliderController",EA);T.directive("gmfTimeSlider",CA);function GA(a,b){this.b=a;this.c=b}Ea("gmf.ShareService",GA);GA.$inject=["$http","gmfShortenerCreateUrl"];GA.prototype.ne=function(a){return this.c?HA(this,{url:a}):{data:{short_url:a},status:200}};GA.prototype.Pg=function(a,b,d){a={url:a,email:b};d&&(a.message=d);return HA(this,a)};function HA(a,b){return a.b.post(a.c,$.param(b),{headers:{"Content-Type":"application/x-www-form-urlencoded"}})}T.service("gmfShareService",GA);function IA(a,b,d,e,f){this.b=a;this.c=d;this.cb=e;this.enableEmail="true"===f.gmfShareEmail;this.permalink=b.kd();this.showLenghtWarning=2083<this.permalink.length||2048<b.getPath();this.errorOnsend=this.successfullySent=!1;this.ne()}IA.$inject=["$scope","ngeoLocation","gmfShareService","$q","$attrs"];IA.prototype.ne=function(){this.cb.when(this.c.ne(this.permalink)).then(function(a){this.shortLink=a.data.short_url}.bind(this),function(){this.shortLink=this.permalink;this.errorOnGetShortUrl=!0}.bind(this))};
IA.prototype.getShortUrl=IA.prototype.ne;IA.prototype.Pg=function(){function a(){this.successfullySent=!0}function b(){}this.b.gmfShareForm.$valid&&this.cb.when(this.c.Pg(this.permalink,this.email,this.message)).then(a.bind(this),b.bind(this))};IA.prototype.sendShortUrl=IA.prototype.Pg;T.directive("gmfShare",function(){return{restrict:"E",controller:"GmfShareController as shareCtrl",templateUrl:"gmf/share.html"}});T.controller("GmfShareController",IA);function JA(a){return{restrict:"A",link:function(b,d,e){function f(){g.cf();g.Db&&cancelAnimationFrame(g.Db);g.pf();1E3>Date.now()-h&&(k=a.requestAnimationFrame(f))}var g=b.$eval(e.ngeoResizemap);e=e.ngeoResizemapState;var h,k;d.on("transitionend",function(){g.cf();g.Db&&cancelAnimationFrame(g.Db);g.pf()});b.$watch(e,function(b,d){b!=d&&(h=Date.now(),a.cancelAnimationFrame(k),k=a.requestAnimationFrame(f))})}}}JA.$inject=["$window"];S.directive("ngeoResizemap",JA);S.value("ngeoScaleselectorTemplateUrl",function(a,b){a=b.ngeoScaleselectorTemplateurl;return void 0!==a?a:"ngeo/scaleselector.html"});function KA(a){return{restrict:"A",scope:!0,controller:"NgeoScaleselectorController",templateUrl:a}}KA.$inject=["ngeoScaleselectorTemplateUrl"];S.directive("ngeoScaleselector",KA);
function LA(a,b,d){var e=this;this.scales=a.$eval(d.ngeoScaleselector);a.$watch(function(){return Object.keys(e.scales).length},function(){e.zoomLevels=Object.keys(e.scales).map(Number);e.zoomLevels.sort(xd)});this.c=a.$eval(d.ngeoScaleselectorMap);b=a.$eval(d.ngeoScaleselectorOptions);this.options=MA(b);this.i=a;this.b=null;this.currentScale=void 0;null!==O(this.c)&&(b=Cj(O(this.c)),void 0!==b&&(this.currentScale=this.Ha(b)));B(this.c,cb("view"),this.f,this);NA(this);a.scaleselectorCtrl=this}
LA.$inject=["$scope","$element","$attrs"];function MA(a){void 0===a?a={dropup:!1}:void 0===a.dropup&&(a.dropup=!1);return a}LA.prototype.Ha=function(a){return this.scales[a]};LA.prototype.getScale=LA.prototype.Ha;LA.prototype.gl=function(a){Fj(O(this.c),a)};LA.prototype.changeZoom=LA.prototype.gl;LA.prototype.g=function(){var a=this,b=O(this.c),d=this.scales[Cj(b)];this.i.$applyAsync(function(){a.currentScale=d})};LA.prototype.f=function(){NA(this);this.g()};
function NA(a){null!==a.b&&A(a.b);var b=O(a.c);a.b=B(b,cb("resolution"),a.g,a)}S.controller("NgeoScaleselectorController",LA);var OA=!lu||9<=Number(wu),PA=!nu&&!lu||lu&&9<=Number(wu)||nu&&vu("1.9.1");function QA(a,b){this.x=pa(a)?a:0;this.y=pa(b)?b:0}m=QA.prototype;m.clone=function(){return new QA(this.x,this.y)};m.toString=function(){return"("+this.x+", "+this.y+")"};m.equals=function(a){return a instanceof QA&&(this==a?!0:this&&a?this.x==a.x&&this.y==a.y:!1)};m.ceil=function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this};m.floor=function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this};
m.round=function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this};m.translate=function(a,b){a instanceof QA?(this.x+=a.x,this.y+=a.y):(this.x+=Number(a),va(b)&&(this.y+=b));return this};m.scale=function(a,b){b=va(b)?b:a;this.x*=a;this.y*=b;return this};function RA(a,b){this.width=a;this.height=b}m=RA.prototype;m.clone=function(){return new RA(this.width,this.height)};m.toString=function(){return"("+this.width+" x "+this.height+")"};m.area=function(){return this.width*this.height};m.ceil=function(){this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};m.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};
m.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};m.scale=function(a,b){b=va(b)?b:a;this.width*=a;this.height*=b;return this};function SA(a){return a?new TA(UA(a)):Um||(Um=new TA)}function VA(a,b){du(b,function(b,e){"style"==e?a.style.cssText=b:"class"==e?a.className=b:"for"==e?a.htmlFor=b:WA.hasOwnProperty(e)?a.setAttribute(WA[e],b):e.lastIndexOf("aria-",0)&&e.lastIndexOf("data-",0)?a[e]=b:a.setAttribute(e,b)})}
var WA={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};
function XA(a){var b=a.scrollingElement?a.scrollingElement:ou||"CSS1Compat"!=a.compatMode?a.body||a.documentElement:a.documentElement;a=a.parentWindow||a.defaultView;return lu&&vu("10")&&a.pageYOffset!=b.scrollTop?new QA(b.scrollLeft,b.scrollTop):new QA(a.pageXOffset||b.scrollLeft,a.pageYOffset||b.scrollTop)}
function YA(a,b,d){var e=arguments,f=document,g=String(e[0]),h=e[1];if(!OA&&h&&(h.name||h.type)){g=["<",g];h.name&&g.push(' name="',Xm(h.name),'"');if(h.type){g.push(' type="',Xm(h.type),'"');var k={};gu(k,h);delete k.type;h=k}g.push(">");g=g.join("")}g=f.createElement(g);h&&(ua(h)?g.className=h:sa(h)?g.className=h.join(" "):VA(g,h));2<e.length&&ZA(f,g,e,2);return g}
function ZA(a,b,d,e){function f(d){d&&b.appendChild(ua(d)?a.createTextNode(d):d)}for(;e<d.length;e++){var g=d[e];!ta(g)||wa(g)&&0<g.nodeType?f(g):Xt($A(g)?Zt(g):g,f)}}function aB(a){return a&&a.parentNode?a.parentNode.removeChild(a):null}function bB(a){return PA&&a.children?a.children:Yt(a.childNodes,function(a){return 1==a.nodeType})}function cB(a){if(pa(a.nextElementSibling))a=a.nextElementSibling;else for(a=a.nextSibling;a&&1!=a.nodeType;)a=a.nextSibling;return a}
function UA(a){return 9==a.nodeType?a:a.ownerDocument||a.document}function $A(a){if(a&&"number"==typeof a.length){if(wa(a))return"function"==typeof a.item||"string"==typeof a.item;if("function"==ra(a))return"function"==typeof a.item}return!1}function TA(a){this.c=a||oa.document||document}m=TA.prototype;m.getElementsByTagName=function(a,b){return(b||this.c).getElementsByTagName(String(a))};m.Ea=VA;m.appendChild=function(a,b){a.appendChild(b)};m.append=function(a,b){ZA(UA(a),a,arguments,1)};
m.removeNode=aB;m.isElement=function(a){return wa(a)&&1==a.nodeType};function dB(a){if(a.classList)return a.classList;a=a.className;return ua(a)&&a.match(/\S+/g)||[]}function eB(a,b){return a.classList?a.classList.contains(b):0<=Wt(dB(a),b)}function fB(a,b){a.classList?a.classList.add(b):eB(a,b)||(a.className+=0<a.className.length?" "+b:b)}function gB(a,b){if(a.classList)Xt(b,function(b){fB(a,b)});else{var d={};Xt(dB(a),function(a){d[a]=!0});Xt(b,function(a){d[a]=!0});a.className="";for(var e in d)a.className+=0<a.className.length?" "+e:e}}
function hB(a,b){a.classList?a.classList.remove(b):eB(a,b)&&(a.className=Yt(dB(a),function(a){return a!=b}).join(" "))}function iB(a,b){a.classList?Xt(b,function(b){hB(a,b)}):a.className=Yt(dB(a),function(a){return!(0<=Wt(b,a))}).join(" ")};function jB(a){Bu.call(this);this.b=a;this.c={}}Fa(jB,Bu);var kB=[];m=jB.prototype;m.kb=function(a,b,d,e){sa(b)||(b&&(kB[0]=b.toString()),b=kB);for(var f=0;f<b.length;f++){var g=Tu(a,b[f],d||this.handleEvent,e||!1,this.b||this);if(!g)break;this.c[g.key]=g}return this};
m.Qc=function(a,b,d,e,f){if(sa(b))for(var g=0;g<b.length;g++)this.Qc(a,b[g],d,e,f);else d=d||this.handleEvent,f=f||this.b||this,d=Uu(d),e=!!e,b=a&&a[Iu]?Pu(a.f,String(b),d,e,f):a?(a=Vu(a))?Pu(a,b,d,e,f):null:null,b&&($u(b),delete this.c[b.key]);return this};m.removeAll=function(){du(this.c,function(a,b){this.c.hasOwnProperty(b)&&$u(a)},this);this.c={}};m.ja=function(){jB.Oc.ja.call(this);this.removeAll()};m.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented");};function lB(){Bu.call(this);this.f=new Mu(this);this.V=this;this.D=null}Fa(lB,Bu);lB.prototype[Iu]=!0;m=lB.prototype;m.removeEventListener=function(a,b,d,e){Zu(this,a,b,d,e)};
m.dispatchEvent=function(a){var b,d=this.D;if(d)for(b=[];d;d=d.D)b.push(d);var d=this.V,e=a.type||a;if(ua(a))a=new Fu(a,d);else if(a instanceof Fu)a.target=a.target||d;else{var f=a;a=new Fu(e,d);gu(a,f)}var f=!0,g;if(b)for(var h=b.length-1;!a.g&&0<=h;h--)g=a.c=b[h],f=mB(g,e,!0,a)&&f;a.g||(g=a.c=d,f=mB(g,e,!0,a)&&f,a.g||(f=mB(g,e,!1,a)&&f));if(b)for(h=0;!a.g&&h<b.length;h++)g=a.c=b[h],f=mB(g,e,!1,a)&&f;return f};m.ja=function(){lB.Oc.ja.call(this);this.f&&this.f.removeAll(void 0);this.D=null};
m.kb=function(a,b,d,e){return this.f.add(String(a),b,!1,d,e)};m.Qc=function(a,b,d,e){return this.f.remove(String(a),b,d,e)};function mB(a,b,d,e){b=a.f.listeners[String(b)];if(!b)return!0;b=b.concat();for(var f=!0,g=0;g<b.length;++g){var h=b[g];if(h&&!h.Mc&&h.capture==d){var k=h.listener,l=h.te||h.src;h.bc&&Ou(a.f,h);f=!1!==k.call(l,e)&&f}}return f&&0!=e.Rj}m.hasListener=function(a,b){return this.f.hasListener(pa(a)?String(a):void 0,b)};function nB(a,b,d,e){this.left=a;this.top=b;this.width=d;this.height=e}m=nB.prototype;m.clone=function(){return new nB(this.left,this.top,this.width,this.height)};m.toString=function(){return"("+this.left+", "+this.top+" - "+this.width+"w x "+this.height+"h)"};m.distance=function(a){var b=a.x<this.left?this.left-a.x:Math.max(a.x-(this.left+this.width),0);a=a.y<this.top?this.top-a.y:Math.max(a.y-(this.top+this.height),0);return Math.sqrt(b*b+a*a)};m.ha=function(){return new RA(this.width,this.height)};
m.getCenter=function(){return new QA(this.left+this.width/2,this.top+this.height/2)};m.ceil=function(){this.left=Math.ceil(this.left);this.top=Math.ceil(this.top);this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};m.floor=function(){this.left=Math.floor(this.left);this.top=Math.floor(this.top);this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};
m.round=function(){this.left=Math.round(this.left);this.top=Math.round(this.top);this.width=Math.round(this.width);this.height=Math.round(this.height);return this};m.translate=function(a,b){a instanceof QA?(this.left+=a.x,this.top+=a.y):(this.left+=a,va(b)&&(this.top+=b));return this};m.scale=function(a,b){b=va(b)?b:a;this.left*=a;this.width*=a;this.top*=b;this.height*=b;return this};function oB(a){var b;try{b=a.getBoundingClientRect()}catch(d){return{left:0,top:0,right:0,bottom:0}}lu&&a.ownerDocument.body&&(a=a.ownerDocument,b.left-=a.documentElement.clientLeft+a.body.clientLeft,b.top-=a.documentElement.clientTop+a.body.clientTop);return b}function pB(a){var b=UA(a),d=new QA(0,0),e;e=b?UA(b):document;e=!lu||9<=Number(wu)||"CSS1Compat"==SA(e).c.compatMode?e.documentElement:e.body;if(a==e)return d;a=oB(a);b=XA(SA(b).c);d.x=a.left+b.x;d.y=a.top+b.y;return d}
function qB(a){"number"==typeof a&&(a+="px");return a}
function rB(a){var b=sB,d;a:{d=UA(a);if(d.defaultView&&d.defaultView.getComputedStyle&&(d=d.defaultView.getComputedStyle(a,null))){d=d.display||d.getPropertyValue("display")||"";break a}d=""}if("none"!=(d||(a.currentStyle?a.currentStyle.display:null)||a.style&&a.style.display))return b(a);d=a.style;var e=d.display,f=d.visibility,g=d.position;d.visibility="hidden";d.position="absolute";d.display="inline";a=b(a);d.display=e;d.position=g;d.visibility=f;return a}
function sB(a){var b=a.offsetWidth,d=a.offsetHeight,e=ou&&!b&&!d;return pa(b)&&!e||!a.getBoundingClientRect?new RA(b,d):(a=oB(a),new RA(a.right-a.left,a.bottom-a.top))}function tB(a){var b=pB(a);a=rB(a);return new nB(b.x,b.y,a.width,a.height)};function uB(a,b,d){lB.call(this);this.target=a;this.handle=b||a;this.B=d||new nB(NaN,NaN,NaN,NaN);this.g=UA(a);this.c=new jB(this);a=Da(Eu,this.c);this.s?pa(void 0)?a.call(void 0):a():(this.j||(this.j=[]),this.j.push(pa(void 0)?Ca(a,void 0):a));this.deltaY=this.deltaX=this.C=this.u=this.screenY=this.screenX=this.clientY=this.clientX=0;this.b=!1;this.i=0;Tu(this.handle,["touchstart","mousedown"],this.Xg,!1,this)}Fa(uB,lB);
var vB=oa.document&&oa.document.documentElement&&!!oa.document.documentElement.setCapture&&!!oa.document.releaseCapture;m=uB.prototype;m.ja=function(){uB.Oc.ja.call(this);Zu(this.handle,["touchstart","mousedown"],this.Xg,!1,this);this.c.removeAll();vB&&this.g.releaseCapture();this.handle=this.target=null};
m.Xg=function(a){var b="mousedown"==a.type;if(this.b||b&&((yu?a.b.button:!("click"==a.type||a.b.button&Hu[0]))||ou&&pu&&a.ctrlKey))this.dispatchEvent("earlycancel");else{if(this.i)b&&a.preventDefault();else if(this.dispatchEvent(new wB("start",this,a.clientX,a.clientY,a)))this.b=!0,b&&a.preventDefault();else return;var b=this.g,d=b.documentElement,e=!vB;this.c.kb(b,["touchmove","mousemove"],this.Gm,e);this.c.kb(b,["touchend","mouseup"],this.ee,e);vB?(d.setCapture(!1),this.c.kb(d,"losecapture",this.ee)):
this.c.kb(b?b.parentWindow||b.defaultView:window,"blur",this.ee);this.N&&this.c.kb(this.N,"scroll",this.wp,e);this.clientX=this.u=a.clientX;this.clientY=this.C=a.clientY;this.screenX=a.screenX;this.screenY=a.screenY;this.deltaX=this.target.offsetLeft;this.deltaY=this.target.offsetTop;this.o=XA(SA(this.g).c)}};m.ee=function(a){this.c.removeAll();vB&&this.g.releaseCapture();this.b?(this.b=!1,this.dispatchEvent(new wB("end",this,a.clientX,a.clientY,a,xB(this,this.deltaX),yB(this,this.deltaY)))):this.dispatchEvent("earlycancel")};
m.Gm=function(a){var b=1*(a.clientX-this.clientX),d=a.clientY-this.clientY;this.clientX=a.clientX;this.clientY=a.clientY;this.screenX=a.screenX;this.screenY=a.screenY;if(!this.b){var e=this.u-this.clientX,f=this.C-this.clientY;if(e*e+f*f>this.i)if(this.dispatchEvent(new wB("start",this,a.clientX,a.clientY,a)))this.b=!0;else{this.s||this.ee(a);return}}d=zB(this,b,d);b=d.x;d=d.y;this.b&&this.dispatchEvent(new wB("beforedrag",this,a.clientX,a.clientY,a,b,d))&&(AB(this,a,b,d),a.preventDefault())};
function zB(a,b,d){var e=XA(SA(a.g).c);b+=e.x-a.o.x;d+=e.y-a.o.y;a.o=e;a.deltaX+=b;a.deltaY+=d;return new QA(xB(a,a.deltaX),yB(a,a.deltaY))}m.wp=function(a){var b=zB(this,0,0);a.clientX=this.clientX;a.clientY=this.clientY;AB(this,a,b.x,b.y)};function AB(a,b,d,e){a.target.style.left=d+"px";a.target.style.top=e+"px";a.dispatchEvent(new wB("drag",a,b.clientX,b.clientY,b,d,e))}
function xB(a,b){var d=a.B;a=isNaN(d.left)?null:d.left;d=isNaN(d.width)?0:d.width;return Math.min(null!=a?a+d:Infinity,Math.max(null!=a?a:-Infinity,b))}function yB(a,b){var d=a.B;a=isNaN(d.top)?null:d.top;d=isNaN(d.height)?0:d.height;return Math.min(null!=a?a+d:Infinity,Math.max(null!=a?a:-Infinity,b))}function wB(a,b,d,e,f,g,h){Fu.call(this,a);this.clientX=d;this.clientY=e;this.b=f;this.left=pa(g)?g:b.deltaX;this.top=pa(h)?h:b.deltaY}Fa(wB,Fu);function BB(){lB.call(this);this.g=[];this.o=[];this.N={};this.B=new jB(this);this.M=!1}Fa(BB,lB);function CB(a,b){b.b=0;b.c=void 0;a.g.push(b)}function DB(a,b){a.ai=b}m=BB.prototype;m.qq=function(a){this.u=$t(arguments,0)};
m.Wa=function(){if(!this.M){for(var a=0,b=this.g.length;a<b;a++)for(var d=bB(this.g[a]),e=0,f=d.length;e<f;++e){var g=d[e],h=this.ai(g),k=xa(h);this.N[k]=g;this.G&&(this.B.kb(g,"mouseover",this.Mm),this.B.kb(g,"mouseout",this.Lm));this.O&&(this.B.kb(h,"mouseover",this.Km),this.B.kb(h,"mouseout",this.Jm));this.o.push(g);this.B.kb(h,["mousedown","touchstart"],this.hn)}this.M=!0}};
m.ja=function(){this.B.Ua();for(var a=0,b=this.g.length;a<b;a++){var d=this.g[a];d.b=void 0;d.c=void 0}this.g.length=0;this.o.length=0;this.N=null;EB(this);BB.Oc.ja.call(this)};function FB(a,b){for(var d=0,e=a.g.length;d<e;d++){var f=a.g[d];f.yc=tB(f)}d=0;for(e=a.o.length;d<e;d++)f=a.o[d],f!=b&&(f.yc=tB(f))}
m.hn=function(a){var b=xa(a.c);this.c=this.N[b];a:{for(var b=this.c,d=b.cloneNode(!0),e=(b||document).getElementsByTagName("TEXTAREA"),f=(d||document).getElementsByTagName("TEXTAREA"),g=0;g<e.length;g++)f[g].value=e[g].value;switch(b.tagName){case "TR":b=YA("TABLE",null,YA("TBODY",null,d));break a;case "TD":case "TH":b=YA("TABLE",null,YA("TBODY",null,YA("TR",null,d)));break a;case "TEXTAREA":d.value=b.value;default:b=d}}this.b=b;this.ia&&gB(this.b,this.ia||[]);this.b.style.margin="0";this.b.style.position=
"absolute";this.b.style.visibility="hidden";UA(this.c).body.appendChild(this.b);var d=pB(this.c),b=this.b,e=d,h,d=pB(b);e instanceof QA&&(h=e.y,e=e.x);f=b.offsetLeft+(e-d.x);f instanceof QA?(e=f.x,h=f.y):(e=f,h=b.offsetTop+(Number(h)-d.y));b.style.left=qB(e);b.style.top=qB(h);this.i=new uB(this.b);this.i.i=Math.pow(0,2);Tu(this.i,"start",this.Om,!1,this);Tu(this.i,"end",this.Im,!1,this);Tu(this.i,"earlycancel",this.vf,!1,this);this.i.Xg(a)};
m.Om=function(a){if(this.dispatchEvent(new GB("beforedragstart",0,a.b,this.c,null))){this.R=this.c.parentNode;this.X=cB(this.c);this.C=this.R;this.u?gB(this.c,this.u||[]):this.c.style.visibility="hidden";var b=rB(this.b);this.b.i=b.width/2;this.b.g=b.height/2;this.b.style.visibility="";this.c.style.display="none";FB(this,this.c);this.c.style.display="";Tu(this.i,"drag",this.Nm,!1,this);this.dispatchEvent(new GB("dragstart",0,a.b,this.c,this.b))}else a.preventDefault(),this.vf()};
m.Nm=function(a){var b=pB(this.b),b=new QA(b.x+this.b.i,b.y+this.b.g),d;a:{d=null;if("none"!=this.c.style.display){d=this.c.parentNode;var e=tB(d);if(HB(b,e))break a}for(var e=0,f=this.g.length;e<f;e++){var g=this.g[e];if(g!=d&&HB(b,g.yc)){d=g;break a}}d=null}var h;if(d){if(!d)throw Error("getHoverNextItem_ called with null hoverList.");var k,l,e=!1,f=void 0;switch(d.b){case 0:h=b.y;k=IB;l=JB;break;case 4:e=!0;case 2:h=b.x;k=KB;l=JB;break;case 5:e=!0;case 3:h=b.x,k=LB,l=MB}for(var g=null,n,p=bB(d),
q=0,r=p.length;q<r;q++){var t=p[q];if(t!=this.c){var C=k(t.yc);if(e){var x=NB(t,b);pa(f)||(f=x);l(h,C)&&(void 0==n||x<f||x==f&&(l(C,n)||C==n))&&(g=t,n=C);x<f&&(f=x)}else l(h,C)&&(void 0==n||l(C,n))&&(g=t,n=C)}}h=null!==g&&NB(g,b)>f?null:g}else h=null;if(!this.dispatchEvent(new GB("beforedragmove",0,a,this.c,this.b,0,0,d,h)))return!1;if(d)this.c.parentNode==d&&cB(this.c)==h||d.insertBefore(this.c,h),this.c.style.display="",d.c&&fB(d,d.c);else for(this.c.style.display="none",k=0,l=this.g.length;k<l;k++)n=
this.g[k],n.c&&hB(n,n.c);d!=this.C&&(this.C=d,FB(this,this.c));this.dispatchEvent(new GB("dragmove",0,a,this.c,this.b,0,0,d,h));return!1};m.vf=function(){EB(this);this.i=this.b=this.X=this.R=this.C=this.c=null;for(var a=0,b=this.g.length;a<b;a++)this.g[a].yc=null;a=0;for(b=this.o.length;a<b;a++)this.o[a].yc=null};m.Im=function(a){if(!this.dispatchEvent(new GB("beforedragend",0,a,this.c,this.b)))return!1;EB(this);this.dispatchEvent(new GB("dragend",0,a,this.c,this.b));this.vf();return!0};
function EB(a){Eu(a.i);a.b&&aB(a.b);a.c&&"none"==a.c.style.display&&(a.R.insertBefore(a.c,a.X),a.c.style.display="");a.u&&a.c?iB(a.c,a.u||[]):a.c&&(a.c.style.visibility="");for(var b=0,d=a.g.length;b<d;b++){var e=a.g[b];e.c&&hB(e,e.c)}}m.ai=function(a){return a};m.Mm=function(a){gB(a.c,this.G||[])};m.Lm=function(a){iB(a.c,this.G||[])};m.Km=function(a){gB(a.c,this.O||[])};m.Jm=function(a){iB(a.c,this.O||[])};function HB(a,b){return a.x>b.left&&a.x<b.left+b.width&&a.y>b.top&&a.y<b.top+b.height}
function NB(a,b){a=a.yc;return Math.abs(b.y-(a.top+(a.height-1)/2))}function IB(a){return a.top+a.height-1}function KB(a){return a.left+a.width-1}function LB(a){return a.left||0}function JB(a,b){return a<b}function MB(a,b){return a>b}function GB(a,b,d,e,f,g,h,k,l){Fu.call(this,a);this.event=d;this.Lh=e;this.yl=f;this.xn=k;this.yn=l}Fa(GB,Fu);function OB(a){return{restrict:"A",link:function(b,d,e){function f(){for(var a=d.contents(),e=d.children(),f=0;f<e.length;++f)angular.element(e[f]).data("idx",f);null!==n&&n.Ua();n=new BB;CB(n,d[0]);DB(n,function(a){return a.getElementsByClassName(h.handleClassName)[0]});void 0!==h.draggerClassName&&(n.ia=Wm(h.draggerClassName).split(" "));void 0!==h.currDragItemClassName&&n.qq(h.currDragItemClassName);var t=-1,C=null;Tu(n,"dragstart",function(a){t=-1;C=null;angular.element(a.yl).css("width",a.Lh.offsetWidth)});
Tu(n,"dragmove",function(a){var b=a.yn;t=null===b?-1:angular.element(b).data("idx");C=a.xn});Tu(n,"dragend",function(e){var f=angular.element(e.Lh).data("idx");null===C||t==f+1||-1==t&&f==d.children().length-1?d.append(a):-1!=t?t!=f&&(t>f&&t--,b.$apply(function(){g.splice(t,0,g.splice(f,1)[0])})):b.$apply(function(){g.push(g.splice(f,1)[0])});k instanceof Function&&k.apply(l,[d,g])});n.Wa()}var g=b.$eval(e.ngeoSortable)||[],h=function(a){void 0===a?a={handleClassName:"ngeo-sortable-handle"}:void 0===
a.handleClassName&&(a.handleClassName="ngeo-sortable-handle");return a}(b.$eval(e.ngeoSortableOptions)),k=b.$eval(e.ngeoSortableCallback),l=b.$eval(e.ngeoSortableCallbackCtx),n=null;b.$watchCollection(function(){return g},function(){g.length&&a(f,0)})}}}OB.$inject=["$timeout"];S.directive("ngeoSortable",OB);T.value("isDesktop",!0);
function PB(a,b,d){var e=this,f={projection:lc("EPSG:"+(a.srid||21781))};w(f,a.mapViewConfig||{});this.map=new $k({layers:[],view:new sj(f),controls:a.mapControls||[new zh({target:document.getElementById("scaleline")}),new Kj({uk:"",vk:""})],hc:a.mapInteractions||Qk({wj:!1,xh:!1}),Ni:!0,Oi:!0});this.googleStreetViewActive=this.editFeatureActive=this.filterSelectorActive=this.modalShareShown=this.toolsActive=this.loginActive=!1;this.googleStreetViewStyle=new D({text:new Br({fill:new cd({color:"#279B61"}),font:"normal 30px FontAwesome",
offsetY:-15,stroke:new dd({color:"#ffffff",width:3}),text:"\uf041"})});var g=$("body");g.tooltip({container:"body",trigger:"hover",selector:'[data-toggle="tooltip"]'});g.on("touchstart.detectTouch",function(){g.tooltip("destroy");g.off("touchstart.detectTouch")});f=d.get("ngeoFeatures");this.drawFeatureLayer=d.get("ngeoFeatureOverlayMgr").ob();this.drawFeatureLayer.pc(f);var h=d.get("ngeoFeatureHelper");this.editFeatureVectorLayer=new gi({source:new gl({wrapX:!1,features:new hi}),style:function(a){return h.Gh(a)}});
this.editFeatureVectorLayer.setMap(this.map);f=d.get("ngeoToolActivateMgr");f.ra("mapTools",new ex(this,"editFeatureActive"),!1);f.ra("mapTools",new ex(this,"googleStreetViewActive"),!1);this.scaleSelectorOptions={dropup:!0};this.profileLine=null;gx.call(this,a,b,d);b.$watch(function(){return e.gmfUser.username},function(a){null!==a&&e.loginActive&&(e.loginActive=!1)})}u(PB,gx);Ea("gmf.AbstractDesktopController",PB);PB.$inject=["config","$scope","$injector"];
T.controller("AbstractDesktopController",PB);function QB(a,b,d){var e=this;b.$watch(function(){return e.active},this.lo.bind(this));this.I=b;this.c=new jd;this.f=d.ob();this.listenerKeys_=[];this.location=null;this.noDataAtLocation=!1;this.g=new google.maps.StreetViewPanorama(a[0],{pov:{heading:0,pitch:0},visible:!1,zoom:1});this.b=null;this.i=new ij([0,0]);this.c.setGeometry(this.i);this.j=new google.maps.StreetViewService}m=QB.prototype;
m.$onInit=function(){var a=this;this.I.$watch(function(){return a.location},this.Vm.bind(this));this.I.$watch(function(){var b=null!==a.location;return a.active&&b},this.kn.bind(this));this.I.$watch(function(){var b=null!==a.location,d=!1===a.noDataAtLocation;return a.active&&b&&d},function(b,d){b!==d&&(a.g.setVisible(b),b?a.b=google.maps.event.addListener(a.g,"position_changed",a.bn.bind(a)):a.b&&(google.maps.event.removeListener(a.b),a.b=null))});this.featureStyle&&this.c.setStyle(this.featureStyle)};
m.lo=function(a){var b=this.listenerKeys_;a?b.push(B(this.map,"click",this.mo,this)):(Za(b),b.length=0)};m.Vm=function(a,b){a===b||Array.isArray(a)&&Array.isArray(b)&&Dd(a,b)||(this.i.fa(a),a&&(b=O(this.map).getProjection(),a=wc(a,void 0!==b?b:"EPSG:3857","EPSG:4326"),this.j.getPanorama({location:{lat:a[1],lng:a[0]},radius:this.radius},this.qn.bind(this))))};m.mo=function(a){this.location=a.coordinate;this.I.$apply()};m.kn=function(a,b){a!==b&&(a?this.f.oa(this.c):this.f.na(this.c))};
m.qn=function(a,b){var d=this.g;b===google.maps.StreetViewStatus.OK?(this.noDataAtLocation=!1,d.setPosition(a.location.latLng)):this.noDataAtLocation=!0;this.I.$apply()};m.bn=function(){var a=this.g.getPosition(),a=[a.lng(),a.lat()],b=O(this.map).getProjection();this.location=wc(a,"EPSG:4326",void 0!==b?b:"EPSG:3857");this.I.$apply()};QB.$inject=["$element","$scope","ngeoFeatureOverlayMgr"];
S.component("ngeoGooglestreetview",{bindings:{active:"<",featureStyle:"<?",map:"<",radius:"<?"},controller:QB,controllerAs:"gsvCtrl",templateUrl:function(){return"ngeo/googlestreetview.html"}});"function"!==typeof Pb()&&"function"===typeof proj4&&(Ob=proj4);if("function"==typeof Pb()){Pb().defs("EPSG:2056","+proj=somerc +lat_0=46.95240555555556 +lon_0=7.439583333333333 +k_0=1 +x_0=2600000 +y_0=1200000 +ellps=bessel +towgs84=674.374,15.056,405.346,0,0,0,0 +units=m +no_defs");var RB=lc("EPSG:2056"),SB=[242E4,103E4,29E5,135E4];RB.i=SB;RB.b=!(!RB.g||!SB)};function TB(a,b,d,e,f){this.g=a;this.b=b;b.map=a;this.o=e;this.cb=f;this.i=new Tq;this.j=new Cr;this.c=d;this.urls=[{name:"geoadmin",url:"https://wms.geo.admin.ch/"},{name:"heig",url:"http://ogc.heig-vd.ch/mapserver/wms"}]}
TB.prototype.f=function(a){var b={LAYERS:a.Name,VERSION:a.wmsVersion};a=a={url:a.wmsUrl,label:a.Title,useReprojection:a.useReprojection};a.id="WMS||"+a.label+"||"+a.url+"||"+b.LAYERS;b.VERSION?(a.id+="||"+b.VERSION,a.useReprojection&&(a.projection="EPSG:4326",a.id+="||true")):b.VERSION="1.3.0";b=new Vn({params:b,url:a.url,ratio:a.ratio||1,projection:a.projection});return new Fg({id:a.id,url:a.url,type:"WMS",opacity:a.opacity,visible:a.visible,attribution:a.attribution,extent:a.extent,source:b})};
function UB(a,b){b=new gl({features:b});var d=new gi({source:b});cl(a,d);(d=a.ha())&&Dj(O(a),b.H(),{size:d,padding:[30,30,30,30]})}
TB.prototype.handleFileContent=function(a){var b=this.g,d=this.cb.defer(),e=this.b,f=this.o;e.gpxContent=null;e.kmlContent=null;e.wmsGetCap=null;e.wmtsGetCap=null;f.f(a)?(e.wmsGetCap=a,d.resolve({message:this.c("Download succeeded")})):f.b(a)?(a=this.j.readFeatures(a,{ib:O(b).getProjection()}),UB(b,a),d.reject({message:this.c("Parsing failed"),reason:this.c("Not implemented yet")})):f.c(a)?(a=this.i.readFeatures(a,{ib:O(b).getProjection()}),UB(b,a),d.resolve({message:this.c("Parsing succeeded")})):
(console.error("Unparseable content: ",a),d.reject({message:this.c("Parsing failed"),reason:this.c("unsupported format")}));return d.promise};function VB(a){return{urls:a.urls,getOlLayerFromGetCapLayer:a.f.bind(a),addPreviewLayer:function(){},removePreviewLayer:function(){},transformUrl:function(a){/(wms|service\.svc|osm)/i.test(a)&&(a+="?SERVICE=WMS&REQUEST=GetCapabilities&VERSION=1.3.0");return this.cb.when(a)},handleFileContent:a.handleFileContent.bind(a)}};T.value("ngeoQueryOptions",{limit:20,queryCountFirst:!0,cursorHover:!0});T.value("gmfPrintOptions",{scaleInput:!0});
function WB(a,b,d,e,f){PB.call(this,{srid:21781,mapViewConfig:{center:[632464,185457],zoom:3,mb:[250,100,50,20,10,5,2,1,.5,.25,.1,.05]}},a,b);this.searchCoordinatesProjections=["EPSG:21781","EPSG:2056","EPSG:4326"];this.showInfobar=!0;this.scaleSelectorValues=[25E4,1E5,5E4,2E4,1E4,5E3,2E3,1E3,500,250,100,50];this.elevationLayers=["srtm"];this.profileLinesconfiguration={srtm:{}};this.mousePositionProjections=[{code:"EPSG:2056",label:"CH1903+ / LV03",filter:"ngeoNumberCoordinates::{x}, {y} m"},{code:"EPSG:21781",
label:"CH1903 / LV03",filter:"ngeoNumberCoordinates::{x}, {y} m"},{code:"EPSG:4326",label:"WGS84",filter:"ngeoDMSCoordinates:2"}];this.gridMergeTabs={merged_osm_times:["110","126","147"]};b=b.get("gettextCatalog");b.getString("merged_osm_times");b.getString("Add a theme");b.getString("Add a sub theme");b.getString("Add a layer");this.importOptions=VB(new TB(this.map,a,e,d,f))}u(WB,PB);Ea("app.AlternativeDesktopController",WB);WB.$inject=["$scope","$injector","ngeoFile","gettext","$q"];
WB.prototype.up=function(a){a.ctrlKey&&"p"===a.key&&(this.printPanelActive=!0,a.preventDefault())};WB.prototype.onKeydown=WB.prototype.up;Pm.controller("AlternativeDesktopController",WB);(function(){function a(a){a.put("ngeo/popup.html",'<h4 class="popover-title ngeo-popup-title"> <span ng-bind-html=title></span> <button type=button class=close ng-click="open = false"> &times;</button> </h4> <div class=popover-content ng-bind-html=content></div> ');a.put("gmf/elevationwidget.html",'<div class="text-center btn-group dropup" gmf-elevation gmf-elevation-active=ctrl.active gmf-elevation-elevation=ctrl.elevationValue gmf-elevation-loading=ctrl.elevationLoading gmf-elevation-layer=ctrl.selectedElevationLayer gmf-elevation-map=::ctrl.map> <a type=button class="btn btn-default" aria-expanded=false ng-class="::{\'dropdown-toggle\': ctrl.layers.length > 1}" ng-attr-data-toggle="{{::(ctrl.layers.length > 1) ? \'dropdown\' : \'\'}}"> <span class=gmf-elevationwidget-value> {{ctrl.elevationValue | number}}<span ng-show=ctrl.elevationValue> m</span> <span ng-show=ctrl.elevationLoading class="fa fa-spinner"></span> <span ng-show="!ctrl.elevationValue && !ctrl.elevationLoading" translate>Elevation\u2026</span> </span><span class=caret ng-if="::ctrl.layers.length > 1"></span> </a> <ul class="dropdown-menu dropdown-menu-right" role=menu ng-if="::ctrl.layers.length > 1"> <li class=dropdown-header translate>Elevation data sources</li> <li ng-repeat="elevationItem in ::ctrl.layers"> <a href ng-click="ctrl.selectedElevationLayer = elevationItem"> <span class="fa fa-fw" ng-class="{\'fa-check\': ctrl.selectedElevationLayer === elevationItem}"></span> {{::elevationItem}} </a> </li> </ul> </div> ');
a.put("ngeo/googlestreetview.html",'<div class=ngeo-googlestreetview-instructions ng-if="gsvCtrl.location === null" translate> Click on a road on the map to start StreetView. </div> <div class=ngeo-googlestreetview-nodata ng-if=gsvCtrl.noDataAtLocation translate> Street View data not found for this location. </div> ');a.put("ngeo/datepicker.html","<div class=ngeo-datepicker> <form name=dateForm class=ngeo-datepicker-form novalidate> <div ng-if=\"::datepickerCtrl.time.widget === 'datepicker'\"> <div class=ngeo-datepicker-start-date> <span ng-if=\"::datepickerCtrl.time.mode === 'range'\" translate>From:</span> <span ng-if=\"::datepickerCtrl.time.mode !== 'range'\" translate>Date:</span> <input name=sdate ui-date=datepickerCtrl.sdateOptions ng-model=datepickerCtrl.sdate required> </div> <div class=ngeo-datepicker-end-date ng-if=\"::datepickerCtrl.time.mode === 'range'\"> <span translate>To:</span> <input name=edate ui-date=datepickerCtrl.edateOptions ng-model=datepickerCtrl.edate required> </div> </div> </form> </div> ");
a.put("gmf/drawfeature.html",'<ngeo-drawfeature ngeo-btn-group class=btn-group ngeo-drawfeature-active=efCtrl.drawActive ngeo-drawfeature-map=efCtrl.map> <a data-toggle=tooltip title="{{\'Draw a point on the map\' | translate}}" href ngeo-btn ngeo-drawpoint class="btn btn-default ngeo-drawfeature-point" ng-class="{active: dfCtrl.drawPoint.active}" ng-model=dfCtrl.drawPoint.active> <span class="gmf-icon gmf-icon-point"></span> </a> <a data-toggle=tooltip title="{{\'Draw a line on the map\' | translate}}" href ngeo-btn ngeo-measurelength class="btn btn-default ngeo-drawfeature-linestring" ng-class="{active: dfCtrl.measureLength.active}" ng-model=dfCtrl.measureLength.active> <span class="gmf-icon gmf-icon-line"></span> </a> <a data-toggle=tooltip title="{{\'Draw a polygon on the map\' | translate}}" href ngeo-btn ngeo-measurearea class="btn btn-default ngeo-drawfeature-polygon" ng-class="{active: dfCtrl.measureArea.active}" ng-model=dfCtrl.measureArea.active> <span class="gmf-icon gmf-icon-polygon"></span> </a> <a data-toggle=tooltip title="{{\'Draw a circle on the map\' | translate}}" href ngeo-btn ngeo-measureazimut class="btn btn-default ngeo-drawfeature-circle" ng-class="{active: dfCtrl.measureAzimut.active}" ng-model=dfCtrl.measureAzimut.active> <span class="gmf-icon gmf-icon-circle"></span> </a> <a data-toggle=tooltip title="{{\'Draw a rectangle on the map\' | translate}}" href ngeo-btn ngeo-drawrectangle class="btn btn-default ngeo-drawfeature-rectangle" ng-class="{active: dfCtrl.drawRectangle.active}" ng-model=dfCtrl.drawRectangle.active> <span class="gmf-icon gmf-icon-rectangle"></span> </a> <a data-toggle=tooltip title="{{\'Draw a text label on the map\' | translate}}" href ngeo-btn ngeo-drawtext class="btn btn-default ngeo-drawfeature-text" ng-class="{active: dfCtrl.drawText.active}" ng-model=dfCtrl.drawText.active> <span class="gmf-icon gmf-icon-text"></span> </a> </ngeo-drawfeature> <div ng-switch=efCtrl.selectedFeature class=gmf-drawfeature-featurelistctn> <div ng-switch-when=null> <div ng-show="efCtrl.getFeaturesArray().length > 0"> <div class=ngeo-drawfeature-actionbuttons> <button type=button data-toggle=dropdown aria-haspopup=true aria-expanded=false ngeo-exportfeatures ngeo-exportfeatures-features=efCtrl.features class="btn btn-link btn-sm"> <span class="fa fa-mail-forward"></span> {{\'Export\' | translate}} <span class=caret></span> </button> <button ng-click=efCtrl.clearFeatures() class="btn btn-link btn-xs"> <span class="fa fa-trash"></span> {{\'Delete All\' | translate}} </button> </div> <div class=gmf-eol></div> <div class="gmf-drawfeature-featurelist list-group list-group-sm"> <button role=button class=list-group-item ng-repeat="feature in efCtrl.getFeaturesArray()" ng-click=efCtrl.selectFeatureFromList(feature);> {{ feature.get(efCtrl.nameProperty) }} </button> </div> </div> </div> <div ng-switch-default> <button ng-click="efCtrl.selectedFeature = null;" class="btn btn-link btn-xs"> <span class="fa fa-arrow-left"></span> {{\'List\' | translate}} </button> <div class=ngeo-drawfeature-actionbuttons> <button type=button data-toggle=dropdown aria-haspopup=true aria-expanded=false ngeo-exportfeatures ngeo-exportfeatures-features=efCtrl.selectedFeatures class="btn btn-link btn-xs"> <span class="fa fa-mail-forward"></span> {{\'Export\' | translate}} <span class=caret></span> </button> <button ng-click=efCtrl.removeFeature(efCtrl.selectedFeature); class="btn btn-link btn-xs"> <span class="fa fa-trash"></span> {{\'Delete\' | translate}} </button> </div> <div class=gmf-eol></div> <gmf-featurestyle gmf-featurestyle-feature=efCtrl.selectedFeature> </gmf-featurestyle> </div> </div> ');
a.put("gmf/authentication.html",'<div ng-if=authCtrl.gmfUser.username> <div class=form-group> <span>{{\'Logged in as\' | translate}}</span> <strong>{{ ::authCtrl.gmfUser.username }}</strong>. </div> <form name=logoutForm role=form ng-submit=authCtrl.logout() ng-controller=GmfAuthenticationController ng-class="{\'has-error\': authCtrl.error}" ng-if=!authCtrl.changingPassword> <div class=form-group> <input type=submit class="form-control btn btn-primary" value="{{\'Logout\' | translate}}"> </div> <span ng-show=authCtrl.error class="gmf-authentication-error help-block"></span> <div class=form-group> <input type=button class="form-control btn btn-default" value="{{\'Change password\' | translate}}" ng-click="authCtrl.changingPassword = true"> </div> </form> <form name=changePasswordForm role=form ng-submit=authCtrl.changePassword() ng-controller=GmfAuthenticationController ng-class="{\'has-error\': authCtrl.error}" ng-if=authCtrl.changingPassword> <div class=form-group> <input type=password class=form-control name=oldpassword ng-model=authCtrl.oldPwdVal placeholder="{{\'Old password\' | translate}}"> </div> <div class=form-group> <input type=password class=form-control name=newpassword ng-model=authCtrl.newPwdVal placeholder="{{\'New password\' | translate}}"> </div> <div class=form-group> <input type=password class=form-control name=newpasswordconfirm ng-model=authCtrl.newPwdConfVal placeholder="{{\'Confirm new password\' | translate}}"> </div> <div class=form-group> <input type=submit class="form-control btn btn-primary" value="{{\'Change password\' | translate}}"> </div> <div class=form-group> <span ng-show=authCtrl.error class="gmf-authentication-error help-block"></span> <input type=button class="form-control btn btn-default" value="{{\'Cancel\' | translate}}" ng-click=authCtrl.changePasswordReset()> </div> </form> <ngeo-modal ng-model=authCtrl.changePasswordModalShown> <div class=modal-header> <button type=button class=close data-dismiss=modal aria-label="{{\'Close\' | translate}}"> <span aria-hidden=true>&times;</span> </button> <h4 class=modal-title> {{\'Password Changed\' | translate}} </h4> </div> <div class=modal-body> {{\'Your password has succesfully been changed.\' | translate}} </div> <div class=modal-footer> <button type=button class="btn btn-default" data-dismiss=modal>{{\'OK\' | translate}}</button> </div> </ngeo-modal> </div> <div ng-if=!authCtrl.gmfUser.username> <form name=loginForm role=form ng-submit=authCtrl.login() ng-controller=GmfAuthenticationController ng-class="{\'has-error\': authCtrl.error}"> <div class=form-group> <input type=text class=form-control name=login ng-model=authCtrl.loginVal placeholder="{{\'Username\' | translate}}"> </div> <div class=form-group> <input type=password class=form-control name=password ng-model=authCtrl.pwdVal placeholder="{{\'Password\' | translate}}"> </div> <div class=form-group> <input type=submit class="form-control btn btn-primary" value="{{\'Connect\' | translate}}"> </div> <span ng-show=authCtrl.error class="gmf-authentication-error help-block"></span> <div class=form-group> <a ng-click=authCtrl.resetPassword() href>{{\'Password forgotten?\' | translate}}</a> </div> </form> <ngeo-modal ng-model=authCtrl.resetPasswordModalShown> <div class=modal-header> <button type=button class=close data-dismiss=modal aria-label="{{\'Close\' | translate}}"> <span aria-hidden=true>&times;</span> </button> <h4 class=modal-title> {{\'Password forgotten?\' | translate}} </h4> </div> <div class=modal-body> {{ ::authCtrl.translate( \'A new password has just been sent to you by e-mail.\') }} </div> <div class=modal-footer> <button type=button class="btn btn-default" data-dismiss=modal>{{\'OK\' | translate}}</button> </div> </ngeo-modal> </div> ');
a.put("ngeomodule/import/partials/import-dnd.html","<div translate>Drop file here</div> ");a.put("gmf/editfeature.html",'<div> <div ng-switch=efCtrl.feature> <a ng-switch-when=null ng-if=efCtrl.geomType href ngeo-btn ngeo-createfeature ngeo-createfeature-active=efCtrl.createActive ngeo-createfeature-features=::efCtrl.features ngeo-createfeature-geom-type=::efCtrl.geomType ngeo-createfeature-map=::efCtrl.map class="btn btn-default" ng-class="{active: efCtrl.createActive}" ng-model=efCtrl.createActive> <span ng-switch=::efCtrl.geomType> <span ng-switch-when=Point> <span class="gmf-icon gmf-icon-point"></span> {{\'Draw new point\' | translate}} </span> <span ng-switch-when=MultiPoint> <span class="gmf-icon gmf-icon-point"></span> {{\'Draw new point\' | translate}} </span> <span ng-switch-when=LineString> <span class="gmf-icon gmf-icon-line"></span> {{\'Draw new linestring\' | translate}} </span> <span ng-switch-when=MultiLineString> <span class="gmf-icon gmf-icon-line"></span> {{\'Draw new linestring\' | translate}} </span> <span ng-switch-when=Polygon> <span class="gmf-icon gmf-icon-polygon"></span> {{\'Draw new polygon\' | translate}} </span> <span ng-switch-when=MultiPolygon> <span class="gmf-icon gmf-icon-polygon"></span> {{\'Draw new polygon\' | translate}} </span> </span> </a> <div ng-switch-default> <ngeo-modal ng-model=efCtrl.unsavedModificationsModalShown ngeo-modal-destroy-content-on-hide=true> <div class=modal-header> <button type=button class=close data-dismiss=modal aria-label="{{\'Close\' | translate}}"> <span aria-hidden=true>&times;</span> </button> <h4 class=modal-title> {{\'Unsaved modifications!\' | translate}} </h4> </div> <div class=modal-body> {{\'There are unsaved changes.\' | translate}} </div> <div class=modal-footer> <button type=button class="btn btn-default" data-dismiss=modal ng-click=efCtrl.continueWithoutSaving()> {{\'Continue without saving\' | translate}} </button> <button type=button class="btn btn-primary" data-dismiss=modal> {{\'Cancel\' | translate}} </button> <button type=button class="btn btn-default" data-dismiss=modal ng-click=efCtrl.submit()> {{\'Save\' | translate}} </button> </div> </ngeo-modal> <form novalidate name=form class="form gmf-editfeature-attributes-container" ng-if=efCtrl.attributes> <div class=row> <div class=col-sm-12> <a class=close ng-click=efCtrl.cancel() ng-disabled=efCtrl.pending title="{{\'Cancel modifications | translate\'}}" href>&times;</a> </div> </div> <ngeo-attributes ngeo-attributes-attributes=::efCtrl.attributes ngeo-attributes-disabled=efCtrl.pending ngeo-attributes-feature=::efCtrl.feature> </ngeo-attributes> <input type=submit value="{{\'Save\' | translate}}" class="btn btn-sm btn-default gmf-editfeature-btn-save" ng-click="form.$valid && efCtrl.save()" ng-disabled="!efCtrl.dirty || efCtrl.pending" title="{{\'Save modifications | translate\'}}"> <a class="btn btn-sm btn-default gmf-editfeature-btn-cancel" ng-click=efCtrl.confirmCancel() ng-disabled=efCtrl.pending title="{{\'Cancel modifications | translate\'}}" href>{{\'Cancel\' | translate}}</a> <button class="btn btn-sm btn-link gmf-editfeature-btn-delete" ng-click=efCtrl.delete() ng-disabled=efCtrl.pending ng-show=efCtrl.featureId title="{{\'Delete this feature | translate\'}}"> <span class="fa fa-trash"></span> {{\'Delete\' | translate}} </button> </form> </div> </div> <ngeo-modal ng-model=efCtrl.showServerError ngeo-modal-destroy-content-on-hide=true> <div class=modal-header>{{\'Server error.\' | translate}}</div> <div class=modal-body>{{\'Unexpected server error.\' | translate}}</div> </ngeo-modal> </div> ');
a.put("gmf/layertree.html",'<div class=gmf-layertree-root-tools ng-if=layertreeCtrl.isRoot> <a href ng-if="gmfLayertreeCtrl.nodesCount() > 0" ng-click=gmfLayertreeCtrl.removeAllNodes()> <span class="fa fa-trash"></span> {{\'Clear all\' | translate}} </a> </div> <div ng-if=::!layertreeCtrl.isRoot id=gmf-layertree-node-{{::layertreeCtrl.uid}} ng-class="[layertreeCtrl.node.children ? \'gmf-layertree-group\' : \'gmf-layertree-leaf\', \'gmf-layertree-depth-\' + layertreeCtrl.depth, gmfLayertreeCtrl.getResolutionStyle(layertreeCtrl.node), gmfLayertreeCtrl.getNodeState(layertreeCtrl)]"> <div class=ngeo-sortable-handle ng-show="layertreeCtrl.depth === 1 && layertreeCtrl.parent.children.length > 1"> <i class="gmf-layertree-sortable-handle-icon fa fa-ellipsis-v"></i> </div> <a ng-if=::layertreeCtrl.node.children data-toggle=collapse href=#gmf-layertree-layer-group-{{::layertreeCtrl.uid}} aria-expanded={{::layertreeCtrl.node.metadata.isExpanded}} class="fa gmf-layertree-expand-node fa-fw"> </a> <a href ng-click=::gmfLayertreeCtrl.toggleActive(layertreeCtrl) ng-if=::!layertreeCtrl.node.children ng-class="::{\'gmf-layertree-no-layer-icon\' : !gmfLayertreeCtrl.getLegendIconURL(layertreeCtrl)}" class=gmf-layertree-layer-icon> <img ng-if=::(legendIconUrl=gmfLayertreeCtrl.getLegendIconURL(layertreeCtrl)) ng-src={{::legendIconUrl}}> </a> <a href ng-click=::gmfLayertreeCtrl.toggleActive(layertreeCtrl) ng-if=::layertreeCtrl.node.children ng-class="[\'fa fa-fw\', layertreeCtrl.node.children && !layertreeCtrl.layer.loading ? \'gmf-layertree-state\' : \'fa-refresh fa-spin\']"> </a> <a href ng-click=::gmfLayertreeCtrl.toggleActive(layertreeCtrl) class=gmf-layertree-name title="{{layertreeCtrl.node.name | translate}}"> {{layertreeCtrl.node.name | translate}} <i class="gmf-icon gmf-icon-search-go gmf-layertree-zoom" data-toggle=tooltip data-title="{{\'Not visible at current scale. Click to zoom.\'|translate}}" ng-click="::gmfLayertreeCtrl.zoomToResolution(layertreeCtrl); $event.preventDefault(); $event.stopPropagation();" ng-if="gmfLayertreeCtrl.getNodeState(layertreeCtrl) == \'on\'"> </i> <span ngeo-popover ngeo-popover-dismiss=.content ng-if="gmfLayertreeCtrl.getNodeState(layertreeCtrl) !== \'off\' && layertreeCtrl.node.time && layertreeCtrl.node.time.mode !== \'disabled\'"> <span ngeo-popover-anchor class="fa fa-clock-o" ng-click="$event.preventDefault(); $event.stopPropagation()"> </span> <div ngeo-popover-content> <ngeo-date-picker ng-if="::layertreeCtrl.node.time.widget === \'datepicker\'" time=layertreeCtrl.node.time on-date-selected="gmfLayertreeCtrl.updateWMSTimeLayerState(layertreeCtrl, time)"> </ngeo-date-picker> <gmf-time-slider ng-if="::layertreeCtrl.node.time.widget === \'slider\'" gmf-time-slider-time=layertreeCtrl.node.time gmf-time-slider-on-date-selected="gmfLayertreeCtrl.updateWMSTimeLayerState(layertreeCtrl, time)"> </gmf-time-slider> </div> </span> <span class="fa fa-pencil" title="{{\'Currently editing this layer\'|translate}}" ng-if=layertreeCtrl.properties.editing> </span> </a> <span class=gmf-layertree-right-buttons> <a href ng-if="::layertreeCtrl.depth == 1" ng-click=gmfLayertreeCtrl.removeNode(layertreeCtrl.node)> <span class="fa fa-trash"></span> </a> <span ngeo-popover ng-if="::(layertreeCtrl.depth === 1 && !layertreeCtrl.node.mixed) || (layertreeCtrl.depth > 1 && layertreeCtrl.parent.node.mixed && !layertreeCtrl.node.children) || (gmfLayertreeCtrl.getLegendURL(layertreeCtrl) && layertreeCtrl.node.metadata.legend)" ngeo-popover-dismiss=.content> <span ngeo-popover-anchor class="extra-actions fa fa-cog"> </span> <div ngeo-popover-content> <ul> <li ng-if="::(layertreeCtrl.depth === 1 && !layertreeCtrl.node.mixed) || (layertreeCtrl.depth > 1 && layertreeCtrl.parent.node.mixed)"> <i class="fa fa-tint fa-fw"></i> <span for=layer-opactity>{{\'Opacity\'|translate}}</span> <input class=input-action name=layer-opactity type=range min=0 max=1 step=0.01 ng-model=layertreeCtrl.layer.opacity> </li> <li ng-if="::gmfLayertreeCtrl.getLegendURL(layertreeCtrl) && layertreeCtrl.node.metadata.legend"> <i class="fa fa-th-list fa-fw"></i> <a title="{{\'Show/hide legend\'|translate}}" ng-click="::gmfLayertreeCtrl.toggleNodeLegend(\'#gmf-layertree-node-\' + layertreeCtrl.uid + \'-legend\'); popoverCtrl.dismissPopover()" data-toggle=collapse href> {{\'Show/hide legend\'|translate}} </a> </li> <li ng-if="layertreeCtrl.getDataSource() && layertreeCtrl.getDataSource().filtrable"> <i class="fa fa-filter fa-fw"></i> <a title="{{\'Filter\'|translate}}" ng-click=gmfLayertreeCtrl.toggleFiltrableDataSource(layertreeCtrl.getDataSource()) href> {{\'Filter\'|translate}} </a> </li> </ul> </div> </span> <span class=gmf-layertree-metadata ng-if=::layertreeCtrl.node.metadata.metadataUrl> <span ng-if="::gmfLayertreeCtrl.openLinksInNewWindow === true"> <a title="{{\'More informations\'|translate}}" href={{::layertreeCtrl.node.metadata.metadataUrl}} target=blank_> </a> </span> <span ng-if="::gmfLayertreeCtrl.openLinksInNewWindow !== true"> <a title="{{\'More informations\'|translate}}" href ng-click=gmfLayertreeCtrl.displayMetadata(layertreeCtrl)> </a> </span> </span> <a class="fa fa-align-left gmf-layertree-legend-button" ng-if="::gmfLayertreeCtrl.getLegendURL(layertreeCtrl) && layertreeCtrl.node.metadata.legend" title="{{\'Show/hide legend\'|translate}}" data-toggle=collapse href=#gmf-layertree-node-{{::layertreeCtrl.uid}}-legend> </a> </span> </div> <div ng-if="::!layertreeCtrl.isRoot && gmfLayertreeCtrl.getLegendURL(layertreeCtrl) && layertreeCtrl.node.metadata.legend" id=gmf-layertree-node-{{::layertreeCtrl.uid}}-legend class="collapse gmf-layertree-legend" ng-class="::[layertreeCtrl.node.metadata.isLegendExpanded ? \'in\' : \'\']"> <a title="{{\'Hide legend\'|translate}}" data-toggle=collapse ng-click="::gmfLayertreeCtrl.toggleNodeLegend(\'#gmf-layertree-node-\' + layertreeCtrl.uid + \'-legend\')" href> {{\'Hide legend\'|translate}} </a> <img ng-if="gmfLayertreeCtrl.isNodeLegendVisible(\'#gmf-layertree-node-\' + layertreeCtrl.uid + \'-legend\')" ng-src={{gmfLayertreeCtrl.getLegendURL(layertreeCtrl)}}> </div> <ul id=gmf-layertree-layer-group-{{::layertreeCtrl.uid}} ng-if=::layertreeCtrl.node.children ng-class="{collapse: !layertreeCtrl.isRoot, in : layertreeCtrl.node.metadata.isExpanded}" ngeo-sortable="::layertreeCtrl.isRoot && layertreeCtrl.node.children" ngeo-sortable-options="{handleClassName: \'ngeo-sortable-handle\', draggerClassName: \'gmf-layertree-dragger\', currDragItemClassName : \'gmf-layertree-curr-drag-item\'}" ngeo-sortable-callback=::gmfLayertreeCtrl.afterReorder ngeo-sortable-callback-ctx=::gmfLayertreeCtrl> <li class=gmf-layertree-node ng-repeat="node in layertreeCtrl.node.children" ng-class="\'gmf-layertree-depth-\' + layertreeCtrl.depth" ngeo-layertree=node ngeo-layertree-notroot ngeo-layertree-map=layertreeCtrl.map ngeo-layertree-nodelayerexpr=layertreeCtrl.nodelayerExpr ngeo-layertree-listenersexpr=layertreeCtrl.listenersExpr> </li> </ul> ');
a.put("ngeo/filter.html",'<div class=dropdown> <a class="btn btn-link dropdown-toggle ngeo-filter-condition-button" ng-class="{disabled: filterCtrl.aRuleIsActive}" type=button data-toggle=dropdown ng-disabled=filterCtrl.aRuleIsActive> <span class="fa fa-cog"></span> <span class=caret></span> </a> <ul class=dropdown-menu> <li class=ngeo-filter-condition-criteria-header translate>Criteria taken into account</li> <li ng-repeat="condition in ::filterCtrl.conditions"> <a href ng-click=filterCtrl.setCondition(condition)> <span ng-class="{\'ngeo-filter-condition-criteria-active\': condition.value == filterCtrl.datasource.filterCondition}" class="fa fa-check ngeo-filter-condition-criteria"> </span> <span>{{::condition.text | translate}}</span> </a> </li> </ul> </div> <ngeo-rule ng-repeat="rule in filterCtrl.directedRules" feature-overlay=::filterCtrl.featureOverlay class=ngeo-filter-rule-directed map=filterCtrl.map rule=rule tool-group=filterCtrl.toolGroup> </ngeo-rule> <hr class=ngeo-filter-separator-rules> <div ng-repeat="rule in filterCtrl.customRules"> <a class="btn btn-xs btn-link ngeo-filter-rule-custom-rm-btn" ng-click="!filterCtrl.aRuleIsActive && filterCtrl.removeCustomRule(rule)" ng-disabled=filterCtrl.aRuleIsActive href> <span class="fa fa-remove"></span> </a> <ngeo-rule feature-overlay=::filterCtrl.featureOverlay class=ngeo-filter-rule-custom map=filterCtrl.map rule=rule tool-group=filterCtrl.toolGroup> </ngeo-rule> </div> <div class=dropdown> <a class="btn btn-link dropdown-toggle" ng-class="{disabled: filterCtrl.aRuleIsActive}" type=button data-toggle=dropdown ng-disabled=filterCtrl.aRuleIsActive> <span translate>+ Add a new criteria</span> <span class=caret></span> </a> <ul class=dropdown-menu> <li ng-repeat="attribute in ::filterCtrl.geometryAttributes"> <a href ng-click=filterCtrl.createAndAddCustomRule(attribute)> <span translate>Spatial filter</span> </a> </li> <li role=presentation class=divider></li> <li ng-repeat="attribute in ::filterCtrl.otherAttributes"> <a href ng-click=filterCtrl.createAndAddCustomRule(attribute)> <span>{{::attribute.name | translate}}</span> </a> </li> </ul> </div> <hr class=ngeo-filter-separator-criteria> <a class="btn btn-link" type=button ng-click="!filterCtrl.aRuleIsActive && filterCtrl.apply()" ng-disabled=filterCtrl.aRuleIsActive> <span class="fa fa-check"></span> <span translate>Apply filter</span> </a> <a class="btn btn-link" type=button ng-click="!filterCtrl.aRuleIsActive && filterCtrl.getData()" ng-disabled=filterCtrl.aRuleIsActive> <span class="fa fa-chevron-right"></span> <span translate>Get data</span> </a> ');
a.put("ngeomodule/import/partials/wms-get-cap.html",'<div class=ngeo-message>{{limitations}}</div> <div class=ngeo-container> <div class=ngeo-header ng-click="reverse = !reverse"> <label translate>Layer</label> <button class="pull-right fa" ng-class="{\'fa-sort-by-alphabet\': !reverse, \'fa-sort-by-alphabet-alt\': reverse}"></button> </div> <div class=ngeo-content> <ul> <li ng-repeat="layer in layers | orderBy:\'Title\':reverse"> <div ngeo-wms-get-cap-item></div> </li> </ul> </div> <div class="modal-backdrop fade in" ng-show="progress > 0 && progress < 100"> <div class="progress progress-striped active"> <div class=progress-bar style="width: 100%;"></div> </div> </div> </div> <div class=ngeo-descr> <label translate>Description</label> <textarea placeholder="{{\'description instructions\' | translate}}" class=form-control readonly>{{getAbstract()}}</textarea> <button type=button class="btn btn-default btn-sm ngeo-add" ng-disabled="(!options.layerSelected || options.layerSelected.isInvalid)" ng-click=addLayerSelected() translate>Add layer</button> </div> ');
a.put("gmf/mobilemeasurepoint.html",'<a class="btn btn-default" ng-if=ctrl.active ng-click=ctrl.deactivate()> <span class="fa fa-times"></span> {{\'Close\' | translate}} </a> ');a.put("gmf/print.html",'<div class=gmf-print> <div ng-show="ctrl.isState(\'CAPABILITIES_NOT_LOADED\') !== true && ctrl.isState(\'ERROR_ON_GETCAPABILITIES\') !== true"> <div ng-repeat="customField in ctrl.fields.customs" class="gmf-print-custom-fields form-group"> <input ng-if="customField.type === \'number\'" ng-model=customField.value class=form-control type=number placeholder="{{customField.name | translate}}"> <input ng-if="customField.type === \'text\'" ng-model=customField.value class=form-control type=text placeholder="{{customField.name | translate}}"> <textarea ng-if="customField.type === \'textarea\'" ng-model=customField.value class=form-control row=3 placeholder="{{customField.name | translate}}"></textarea> <div ng-if="customField.type === \'checkbox\'" class=checkbox> <label> <input ng-model=customField.value type=checkbox> <span>{{customField.name | translate}}</span> </label> </div> </div> <div ng-show="ctrl.fields.legend !== undefined" class="gmf-print-legend checkbox"> <label> <input ng-model=ctrl.fields.legend type=checkbox> <span translate>Legend</span> </label> </div> <div class="gmf-print-layout-selector form-horizontal"> <div ng-show="ctrl.fields.layouts.length !== 1" class=form-group> <label class="control-label col-md-5" translate>Layout</label> <div class=col-md-7> <div class="btn-group btn-block"> <button type=button class="btn btn-default form-control" data-toggle=dropdown> <span>{{ctrl.fields.layout | translate}}&nbsp;</span> <i class="fa fa-caret-down"></i> </button> <ul class="dropdown-menu dropdown-menu-right btn-block" role=menu> <li ng-repeat="layout in ctrl.fields.layouts"> <a ng-click=ctrl.setLayout(layout) href>{{layout | translate}}</a> </li> </ul> </div> </div> </div> <div ng-show="ctrl.fields.scales.length !== 1" class="gmf-print-scale-selector form-group"> <label class="control-label col-md-5" translate>Scale</label> <div class=col-md-7> <div class="btn-group btn-block"> <button type=button class="btn btn-default form-control" data-toggle=dropdown aria-expanded=false> <span>{{ctrl.fields.scale | ngeoScalify}}&nbsp;</span> <i class="fa fa-caret-down"></i> </button> <ul class="dropdown-menu dropdown-menu-right btn-block" role=menu> <li ng-repeat="scale in ctrl.fields.scales"> <a ng-click=ctrl.getSetScale(scale) href>{{scale | ngeoScalify}}</a> </li> <span ng-if=ctrl.scaleInput> <li class=dropdown-header translate>Manual entry</li> <li> <div class=gmf-print-custom-scale> 1 : <input class=gmf-print-custom-scale-input type=number min=1 ng-model=ctrl.getSetScale ng-model-options="{getterSetter: true}"> </div> </li> </span> </ul> </div> </div> </div> <div ng-show="ctrl.fields.dpis.length !== 1" class="gmf-print-dpi-selector form-group"> <label class="control-label col-md-3" translate>DPI</label> <div class=col-md-5> <div class="btn-group btn-block"> <button type=button class="btn btn-default form-control" data-toggle=dropdown aria-expanded=false> <span>{{ctrl.fields.dpi}}&nbsp;</span> <i class="fa fa-caret-down"></i> </button> <ul class="dropdown-menu dropdown-menu-right btn-block" role=menu> <li ng-repeat="dpi in ctrl.fields.dpis"> <a href ng-click=ctrl.setDpi(dpi)>{{dpi}}</a> </li> </ul> </div> </div> </div> <div class="gmf-print-rotation-selector form-group"> <label class="control-label col-md-3" translate>Rotation</label> <div class=col-md-5> <input class=form-control type=range ng-model=ctrl.getSetRotation ng-model-options="{getterSetter: true}" min=-180 max=180 data-toggle=tooltip title="{{\'You can also use Alt+Shift on the map\' | translate}}"> </div> <div class=col-md-4> <input class=form-control type=number ng-model=ctrl.getSetRotation ng-model-options="{getterSetter: true}"> </div> </div> </div> <div class="gmf-print-actions form-group pull-right"> <span ng-show="ctrl.isState(\'PRINTING\')"> <i class="fa fa-refresh fa-spin"></i> </span> <a ng-show="ctrl.isState(\'PRINTING\')" class="gmf-print-cancel btn btn-link" href ng-click=ctrl.cancel() translate>Abort</a> <button ng-show=ctrl.fields.formats.png class="gmf-print-image btn btn-primary" ng-disabled="ctrl.isState(\'PRINTING\')" ng-click="ctrl.print(\'png\')">Image</button> <button ng-show=ctrl.fields.formats.pdf class="gmf-print-pdf btn btn-primary" ng-disabled="ctrl.isState(\'PRINTING\')" ng-click="ctrl.print(\'pdf\')">PDF</button> </div> <div ng-show="ctrl.isState(\'ERROR_ON_REPORT\')" class="gmf-print-error-report form-group pull-left text-danger"> <p>{{\'Error during the print, please try again.\' | translate}}</p> </div> </div> <div ng-show="ctrl.isState(\'CAPABILITIES_NOT_LOADED\')" class="gmf-print-wait form-group pull-left"> <p>{{\'Connecting to the print server, please wait.\' | translate}}</p> </div> <div ng-show="ctrl.isState(\'ERROR_ON_GETCAPABILITIES\')" class="gmf-print-error-capabilities form-group pull-left text-danger"> <p>{{\'The print server is unavailable. Please, try later.\' | translate}}</p> </div> </div> ');
a.put("gmf/filterselector.html",'<div class=form-group ng-switch=fsCtrl.filtrableDataSources.length> <span ng-switch-when=0 translate>No filtrable layer available!</span> <select class=form-control ng-disabled=fsCtrl.aRuleIsActive ng-switch-default ng-model=fsCtrl.gmfDataSourceBeingFiltered.dataSource ng-options="dataSource.name | translate for dataSource in fsCtrl.filtrableDataSources"> <option value translate>-- Layer to filter --</option> </select> <div ng-if="fsCtrl.customRules && fsCtrl.directedRules && fsCtrl.readyDataSource"> <hr class=gmf-filterselector-separator> <div class="dropdown gmf-filterselector-savedfilters"> <a class="btn btn-link dropdown-toggle ngeo-filter-condition-button" ng-class="{disabled: fsCtrl.aRuleIsActive || fsCtrl.gmfSavedFilters.currentDataSourceItems.length === 0}" type=button data-toggle=dropdown ng-disabled="fsCtrl.aRuleIsActive || fsCtrl.gmfSavedFilters.currentDataSourceItems.length === 0"> <span translate>Saved</span> <span class=caret></span> </a> <ul class=dropdown-menu> <li ng-repeat="item in fsCtrl.gmfSavedFilters.currentDataSourceItems"> <a href ng-click=fsCtrl.saveFilterLoadItem(item)> <span>{{::item.name}}</span> </a> </li> <li role=separator class=divider></li> <li> <a href ng-click=fsCtrl.saveFilterManage()> <span translate>Manage saved filters</span> </a> </li> </ul> </div> <ngeo-filter a-rule-is-active=fsCtrl.aRuleIsActive custom-rules=fsCtrl.customRules datasource=fsCtrl.readyDataSource directed-rules=fsCtrl.directedRules feature-overlay=fsCtrl.featureOverlay map=fsCtrl.map tool-group=fsCtrl.toolGroup> </ngeo-filter> <div> <a class="btn btn-link gmf-filterselector-savebtn" type=button data-toggle=dropdown ng-click="!fsCtrl.aRuleIsActive && fsCtrl.saveFilterShowModal()" ng-disabled=fsCtrl.aRuleIsActive> <span class="fa fa-save"></span> <span translate>Save</span> </a> </div> </div> <ngeo-modal ng-model=fsCtrl.saveFilterSaveModalShown> <div class=modal-header> <button type=button class=close data-dismiss=modal aria-label="{{\'Close\' | translate}}"> <span aria-hidden=true>&times;</span> </button> <h4 class=modal-title>{{\'Save filter\' | translate}}</h4> </div> <div class=modal-body> <p class=gmf-filterselector-savefilter-desc translate> You can save the filter that you created to re-load it later. </p> <input type=text class=form-control name=name ng-model=fsCtrl.saveFilterName placeholder="{{\'Filter name\' | translate}}"> </div> <div class=modal-footer> <button type=button class="btn btn-default" data-dismiss=modal>{{\'Cancel\' | translate}}</button> <button type=button ng-click=fsCtrl.saveFilterSave() ng-disabled="fsCtrl.saveFilterName === \'\'" class="btn btn-primary">{{\'Save\' | translate}}</button> </div> </ngeo-modal> <ngeo-modal ng-model=fsCtrl.saveFilterManageModalShown> <div class=gmf-filterselector-managefilter-modal> <div class=modal-header> <button type=button class=close data-dismiss=modal aria-label="{{\'Close\' | translate}}"> <span aria-hidden=true>&times;</span> </button> <h4 class=modal-title>{{\'Manage filters\' | translate}}</h4> </div> <div class=modal-body> <ul> <li ng-repeat="item in fsCtrl.gmfSavedFilters.currentDataSourceItems"> <span>{{::item.name}}</span> <a href ng-click=fsCtrl.saveFilterRemoveItem(item)> {{ \'Delete\' | translate }} </a> <div class=gmf-eol></div> </li> </ul> </div> <div class=modal-footer> <button type=button class="btn btn-default" data-dismiss=modal>{{\'Close\' | translate}}</button> </div> </div> </ngeo-modal> </div> ');
a.put("ngeo/attributes.html",'<fieldset ng-disabled=attrCtrl.disabled> <div class=form-group ng-repeat="attribute in ::attrCtrl.attributes"> <div ng-if="attribute.type !== \'geometry\'"> <label class=control-label>{{ ::attribute.name | translate }} <span class=text-muted>{{::attribute.required ? "*" : ""}}</span></label> <div ng-switch=attribute.type> <select name={{::attribute.name}} ng-required=attribute.required ng-switch-when=select ng-model=attrCtrl.properties[attribute.name] ng-change=attrCtrl.handleInputChange(attribute.name); class=form-control type=text> <option ng-repeat="attribute in ::attribute.choices" value="{{ ::attribute }}"> {{ ::attribute }} </option> </select> <input name={{::attribute.name}} ng-required=attribute.required ng-switch-when=date ui-date=attrCtrl.dateOptions ng-model=attrCtrl.properties[attribute.name] ng-change=attrCtrl.handleInputChange(attribute.name); class=form-control type=text> <input name={{::attribute.name}} ng-required=attribute.required ng-switch-when=datetime ui-date=attrCtrl.dateOptions ng-model=attrCtrl.properties[attribute.name] ng-change=attrCtrl.handleInputChange(attribute.name); class=form-control type=text> <input name={{::attribute.name}} ng-required=attribute.required ng-switch-default ng-model=attrCtrl.properties[attribute.name] ng-change=attrCtrl.handleInputChange(attribute.name); class=form-control type=text> <div ng-show="form.$submitted || form[attribute.name].$touched"> <p class=text-danger ng-show=form[attribute.name].$error.required> {{\'This field is required\' | translate}} </p> </div> </div> </div> </div> </fieldset> ');
a.put("gmf/share.html",'<div class=modal-header> <button type=button class=close data-dismiss=modal aria-label=Close><span aria-hidden=true>&times;</span></button> <h4 class=modal-title translate>Share this map</h4> </div> <div class=modal-body> <form role=form name=gmfShareForm novalidate> <div class=form-group> <label for=gmfShareInputShortLink translate>Permalink</label> <input type=text class=form-control id=gmfShareInputShortLink onclick=this.select() ng-model=shareCtrl.shortLink readonly=True> <p class=help-block translate>Copy this link to share it.</p> <p class=text-danger ng-if=shareCtrl.showLenghtWarning> <span class="fa fa-exclamation-triangle"></span> {{\'You have a lot of drawn elements in this map. The above link may not be correctly supported by some browsers.\' | translate}} </p> <p class=text-danger ng-if=::shareCtrl.errorOnGetShortUrl> <span class="fa fa-exclamation"></span> {{\'Error, cannot get the shortened URL.\' | translate}} </p> </div> <hr> <div class=gmf-share-email ng-if=::shareCtrl.enableEmail> <div class=form-group> <label for=gmfShareInputEmail translate>Send this link to</label> <input type=email class=form-control name=inputEmail id=gmfShareInputEmail placeholder=Email ng-model=shareCtrl.email required> <span ng-show="gmfShareForm.$submitted || gmfShareForm.inputEmail.$touched"> <span class=text-danger ng-show="gmfShareForm.inputEmail.$error.email || gmfShareForm.inputEmail.$error.required"> <i class="fa fa-exclamation-triangle" aria-hidden=true></i> {{\'Invalid email.\' | translate}}</span> </span> </div> <div class=form-group> <textarea class=form-control placeholder="{{\'Message (optional)\' |\u00a0translate }}" ng-model=shareCtrl.message></textarea> </div> <span class=text-success ng-if=shareCtrl.successfullySent> <i class="fa fa-check" aria-hidden=true></i> {{ \'Link successfully sent.\' | translate }} </span> <span class=text-danger ng-if=shareCtrl.errorOnsend> <i class="fa fa-exclamation" aria-hidden=true></i> {{ \'Error, the link has not been sent.\' | translate }} </span> </div> <div class=text-right> <button type=button class="btn btn-default" data-dismiss=modal translate>Close</button> <button ng-if=::shareCtrl.enableEmail type=submit class="btn btn-default btn-primary" ng-click=shareCtrl.sendShortUrl() ng-disabled=!gmfShareForm.$valid translate>Send </button> </div> </form> </div> ');
a.put("ngeo/grid.html",'<div class=ngeo-grid-table-container> <table float-thead=ctrl.floatTheadConfig ng-model=ctrl.configuration.data class="table table-bordered table-striped table-hover"> <thead class=table-header> <tr> <th ng-repeat="columnDefs in ctrl.configuration.columnDefs" ng-click=ctrl.sort(columnDefs.name)>{{columnDefs.name | translate}} <i ng-show="ctrl.sortedBy !== columnDefs.name" class="fa fa-fw"></i> <i ng-show="ctrl.sortedBy === columnDefs.name && ctrl.sortAscending === true" class="fa fa-caret-up"></i> <i ng-show="ctrl.sortedBy === columnDefs.name && ctrl.sortAscending === false" class="fa fa-caret-down"></i> </th> </tr> </thead> <tbody> <tr ng-repeat="attributes in ctrl.configuration.data" ng-class="[\'row-\' + ctrl.configuration.getRowUid(attributes), ctrl.configuration.isRowSelected(attributes) ? \'ngeo-grid-active\': \'\']" ng-click="ctrl.clickRow(attributes, $event)" ng-mousedown=ctrl.preventTextSelection($event)> <td ng-repeat="columnDefs in ctrl.configuration.columnDefs" ng-bind-html="attributes[columnDefs.name] | ngeoTrustHtml"></td> </tr> </tbody> </table> </div> ');
a.put("ngeo/scaleselector.html",'<div class="btn-group btn-block" ng-class="::{\'dropup\': scaleselectorCtrl.options.dropup}"> <button type=button class="btn btn-default dropdown-toggle" data-toggle=dropdown aria-expanded=false> <span ng-bind-html=scaleselectorCtrl.currentScale|ngeoScalify></span>&nbsp;<i class=caret></i> </button> <ul class="dropdown-menu btn-block" role=menu> <li ng-repeat="zoomLevel in ::scaleselectorCtrl.zoomLevels"> <a href ng-click=scaleselectorCtrl.changeZoom(zoomLevel) ng-bind-html=::scaleselectorCtrl.getScale(zoomLevel)|ngeoScalify> </a> </li> </ul> </div> ');
a.put("gmf/mobilemeasurelength.html",'<a class="btn btn-default" ng-if="ctrl.drawing && (!ctrl.valid)" ng-click=ctrl.addPoint()> <span class="fa fa-check"></span> {{\'Set as starting point\' | translate}} </a> <a class="btn btn-default" ng-if=ctrl.dirty ng-click=ctrl.addPoint()> <span class="fa fa-plus"></span> {{\'Add new point\' | translate}} </a> <a class="btn btn-default" ng-if="ctrl.drawing && ctrl.valid && !ctrl.dirty" ng-click=ctrl.finish()> <span class="fa fa-check"></span> {{\'Terminate\' | translate}} </a> <a class="btn btn-default" ng-if=ctrl.valid ng-click=ctrl.clear()> <span class="fa fa-repeat"></span> {{\'Clear\' | translate}} </a> <a class="btn btn-default" ng-if=ctrl.active ng-click=ctrl.deactivate()> <span class="fa fa-times"></span> {{\'Close\' | translate}} </a> ');
a.put("ngeomodule/import/partials/wms-get-cap-item.html",'<div class=ngeo-header-group ng-class="{\'ngeo-odd\': $odd, \'ngeo-invalid\': layer.isInvalid, \'ngeo-selected\': (options.layerSelected === layer)}" ng-mouseenter="addPreviewLayer($event, layer)" ng-mouseleave=removePreviewLayer($event) ng-click="toggleLayerSelected($event, layer)"> <button class="fa fa-zoom-in ngeo-btn" ng-disabled=!(layer.extent)></button> <button class="fa fa-plus" ng-hide=!(layer.Layer)></button> {{layer.Title}} </div> <ul class=ngeo-child-group ng-if=!!(layer.Layer)> <li ng-repeat="layer in layer.Layer | orderBy:\'Title\'"> <div ngeo-wms-get-cap-item></div> </li> </ul> ');
a.put("gmf/profile.html",'<div class="gmf-profile-container panel" ng-show=ctrl.active> <div class=ngeo-profile ng-show=!ctrl.isErrored ngeo-profile=ctrl.profileData ngeo-profile-highlight=ctrl.profileHighlight ngeo-profile-options=::ctrl.profileOptions> </div> <ul class=gmf-profile-legend ng-show=!ctrl.isErrored> <li ng-repeat="name in ::ctrl.getLayersNames()"> <i class="fa fa-minus" style=color:{{::ctrl.getColor(name)}};></i> &nbsp;{{name | translate}}&nbsp;{{ctrl.currentPoint.elevations[name]}}&nbsp;{{ctrl.currentPoint.yUnits}} </li> </ul> <div class="gmf-profile-export btn-group dropup" ng-show=!ctrl.isErrored> <a class=dropdown-toggle href ng-show="ctrl.profileData.length !== 0" data-toggle=dropdown aria-expanded=false> {{\'Export\' | translate}}&nbsp;<i class="fa fa-caret-up"></i> </a> <ul class="dropdown-menu dropdown-menu-right" role=menu> <li> <a href ng-click=::ctrl.downloadCsv()> <i class="fa fa-table"></i>&nbsp;{{\'Download CSV\' | translate}}</a> </li> </ul> </div> <div class=gmf-profile-error ng-show=ctrl.isErrored> <p>{{\'The profile service does not respond, please try later.\' | translate}}</p> </div> <div class=close ng-click="ctrl.line = null">&times;</div> </div> ');
a.put("gmf/featurestyle.html",'<div ng-if="fsCtrl.feature && fsCtrl.type"> <div class=form-group> <input ng-model=fsCtrl.getSetName ng-model-options="{getterSetter: true}" placeholder="{{\'Name\' | translate}}" class=form-control> </div> </div> <div ng-if="fsCtrl.feature && fsCtrl.type" class=form-horizontal> <div class=form-group> <div ngeo-colorpicker ngeo-colorpicker-color=fsCtrl.color class=col-md-12> </div> </div> <div ng-if="fsCtrl.type === \'Point\'" class="form-group form-group-nomargin"> <label class="control-label col-md-4">{{\'Size\' | translate}}</label> <div class=col-md-8> <input type=range class=form-control min=3 max=20 step=1 ng-model=fsCtrl.getSetSize ng-model-options="{getterSetter: true}"> </div> </div> <div ng-if="fsCtrl.type === \'Text\'" class="form-group form-group-nomargin"> <label class="control-label col-md-4">{{\'Size\' | translate}}</label> <div class=col-md-8> <input type=range class=form-control min=8 max=30 step=1 ng-model=fsCtrl.getSetSize ng-model-options="{getterSetter: true}"> </div> </div> <div ng-if="fsCtrl.type === \'Circle\' || fsCtrl.type === \'LineString\' || fsCtrl.type === \'Polygon\' || fsCtrl.type === \'Rectangle\'" class="form-group form-group-nomargin"> <label class="control-label col-md-4">{{\'Stroke\' | translate}}</label> <div class=col-md-8> <input type=range class=form-control min=0.5 max=5 step=0.5 ng-model=fsCtrl.getSetStroke ng-model-options="{getterSetter: true}"> </div> </div> <div ng-if="fsCtrl.type === \'Circle\' || fsCtrl.type === \'Polygon\' || fsCtrl.type === \'Rectangle\'" class="form-group form-group-nomargin"> <label class="control-label col-md-4">{{\'Opacity\' | translate}}</label> <div class=col-md-8> <input type=range class=form-control min=0 max=1 step=0.05 ng-model=fsCtrl.getSetOpacity ng-model-options="{getterSetter: true}"> </div> </div> <div ng-if="fsCtrl.type === \'Text\'" class="form-group form-group-nomargin"> <label class="control-label col-md-4">{{\'Angle\' | translate}}</label> <div class=col-md-8> <input type=range class=form-control min=-180 max=180 step=22.5 ng-model=fsCtrl.getSetAngle ng-model-options="{getterSetter: true}"> </div> </div> <div ng-if="fsCtrl.type !== \'Text\'" class=form-group> <div class=col-md-12> <input id=gmf-featurestyle-showmeasure type=checkbox ng-model=fsCtrl.getSetShowMeasure ng-model-options="{getterSetter: true}"> <label ng-switch=fsCtrl.type for=gmf-featurestyle-showmeasure class=control-label> <span ng-switch-when=Circle> {{\'Display azimuth and radius\' | translate}} </span> <span ng-switch-when=Polygon> {{\'Display surface\' | translate}} </span> <span ng-switch-when=Rectangle> {{\'Display surface\' | translate}} </span> <span ng-switch-when=LineString> {{\'Display length\' | translate}} </span> <span ng-switch-when=Point> {{\'Display coordinates\' | translate}} </span> </label> <em class=text-muted> ({{ fsCtrl.measure }}) </em> </div> </div> </div> ');
a.put("ngeo/rule.html",'<div class=dropdown ng-class="{open: ruleCtrl.rule.active}"> <a class="btn btn-default btn-sm dropdown-toggle" type=button ng-click=ruleCtrl.toggle()> <span translate>{{ ::ruleCtrl.clone.name }}</span> <span class=caret></span> </a> <div class="dropdown-menu form-group"> <select class="form-control input-sm ngeo-rule-operators-list" ng-disabled=ruleCtrl.drawActive ng-if=::ruleCtrl.clone.operators ng-model=ruleCtrl.clone.operator ng-options="ruleCtrl.operators[operator] | translate for operator in ::ruleCtrl.clone.operators track by operator"> </select> <div ng-switch=::ruleCtrl.clone.type> <div class="ngeo-rule-type-date form-group" ng-if=ruleCtrl.rule.active ng-switch-when=date|datetime ng-switch-when-separator=|> <div ng-switch=ruleCtrl.clone.operator> <div ng-switch-when=..> <ngeo-date-picker time=ruleCtrl.timeRangeMode on-date-selected=ruleCtrl.onDateRangeSelected(time)> </ngeo-date-picker> </div> <div ng-switch-default> <ngeo-date-picker time=ruleCtrl.timeValueMode on-date-selected=ruleCtrl.onDateSelected(time)> </ngeo-date-picker> </div> </div> </div> <div class="ngeo-rule-type-geometry form-group" ng-switch-when=geometry> <div ng-switch=ruleCtrl.geomType> <span class="gmf-icon gmf-icon-point" ng-switch-when=Point> </span> <span class="gmf-icon gmf-icon-line" ng-switch-when=LineString> </span> <span class="gmf-icon gmf-icon-polygon" ng-switch-when=Polygon> </span> <span class="gmf-icon gmf-icon-circle" ng-switch-when=Circle> </span> <span class="gmf-icon gmf-icon-rectangle" ng-switch-when=Rectangle> </span> </div> <ngeo-drawfeature ngeo-drawfeature-active=ruleCtrl.drawActive ngeo-drawfeature-features=ruleCtrl.drawnFeatures ngeo-drawfeature-map=ruleCtrl.map> <div ngeo-btn-group class=btn-group> <a data-toggle=tooltip title="{{\'Draw a point on the map\' | translate}}" href ngeo-btn ngeo-drawpoint class="btn btn-sm btn-default ngeo-drawfeature-point" ng-show="[\'intersects\', \'within\'].indexOf(ruleCtrl.clone.operator) !== -1" ng-class="{active: dfCtrl.drawPoint.active}" ng-model=dfCtrl.drawPoint.active> <span class="gmf-icon gmf-icon-point"></span> </a> <a data-toggle=tooltip title="{{\'Draw a line on the map\' | translate}}" href ngeo-btn ngeo-measurelength class="btn btn-sm btn-default ngeo-drawfeature-linestring" ng-show="[\'intersects\', \'within\'].indexOf(ruleCtrl.clone.operator) !== -1" ng-class="{active: dfCtrl.measureLength.active}" ng-model=dfCtrl.measureLength.active> <span class="gmf-icon gmf-icon-line"></span> </a> <a data-toggle=tooltip title="{{\'Draw a polygon on the map\' | translate}}" href ngeo-btn ngeo-measurearea class="btn btn-sm btn-default ngeo-drawfeature-polygon" ng-class="{active: dfCtrl.measureArea.active}" ng-model=dfCtrl.measureArea.active> <span class="gmf-icon gmf-icon-polygon"></span> </a> <a data-toggle=tooltip title="{{\'Draw a circle on the map\' | translate}}" href ngeo-btn ngeo-measureazimut class="btn btn-sm btn-default ngeo-drawfeature-circle" ng-class="{active: dfCtrl.measureAzimut.active}" ng-model=dfCtrl.measureAzimut.active> <span class="gmf-icon gmf-icon-circle"></span> </a> <a data-toggle=tooltip title="{{\'Draw a rectangle on the map\' | translate}}" href ngeo-btn ngeo-drawrectangle class="btn btn-sm btn-default ngeo-drawfeature-rectangle" ng-class="{active: dfCtrl.drawRectangle.active}" ng-model=dfCtrl.drawRectangle.active> <span class="gmf-icon gmf-icon-rectangle"></span> </a> </div> <div class=ngeo-rule-type-geometry-instructions ng-if=ruleCtrl.drawActive> <span ng-if=dfCtrl.drawPoint.active> {{ \'Draw a point on the map.\' | translate }} </span> <span ng-if=dfCtrl.measureLength.active> {{ \'Draw a line string on the map.\' | translate }} </span> <span ng-if=dfCtrl.measureArea.active> {{ \'Draw a polygon on the map.\' | translate }} </span> <span ng-if=dfCtrl.measureAzimut.active> {{ \'Draw a circle on the map.\' | translate }} </span> <span ng-if=dfCtrl.drawRectangle.active> {{ \'Draw a rectangle on the map.\' | translate }} </span> </div> </ngeo-drawfeature> </div> <div class="checkbox ngeo-rule-type-select" ng-switch-when=select> <a ng-click=ruleCtrl.selectAllChoices() href>{{ All | translate}} </a> <label class="form-group ol-unselectable" ng-repeat="choice in ::ruleCtrl.clone.choices"> <input ng-checked="ruleCtrl.clone.getExpression() && ruleCtrl.clone.getExpression().split(\',\').indexOf(choice) > -1" ng-click=ruleCtrl.toggleChoiceSelection(choice) type=checkbox value=choice> <span>{{ choice | translate }}</span> </label> </div> <div class="form-group ngeo-rule-type-text" ng-switch-default> <div ng-switch=ruleCtrl.clone.operator> <div ng-switch-when=..> <input type=number class="form-control input-sm" ng-model=ruleCtrl.clone.lowerBoundary> <input type=number class="form-control input-sm" ng-model=ruleCtrl.clone.upperBoundary> </div> <div ng-switch-default> <input type=number class="form-control input-sm" ng-if="ruleCtrl.clone.type === \'number\'" ng-model=ruleCtrl.clone.expression> <input type=text class="form-control input-sm" ng-if="ruleCtrl.clone.type !== \'number\'" ng-model=ruleCtrl.clone.expression> </div> </div> </div> <div class=ngeo-rule-btns> <button class="btn btn-xs btn-default" ng-click=ruleCtrl.apply() type=button>{{\'Apply\' | translate}}</button> <button class="btn btn-xs btn-default" ng-click=ruleCtrl.cancel() type=button>{{\'Cancel\' | translate}}</button> </div> </div> </div> </div> <div class=ngeo-rule-value ng-if="ruleCtrl.rule.value !== null"> <a class="btn btn-xs btn-link" ng-click="!ruleCtrl.rule.active && ruleCtrl.reset()" ng-disabled=ruleCtrl.rule.active href> <span class="fa fa-remove"></span> </a> <div ng-switch=::ruleCtrl.rule.type> <div ng-switch-when=date|datetime ng-switch-when-separator=|> <div ng-switch=ruleCtrl.rule.operator> <div ng-switch-when=..> <span translate>From </span> <span>{{ ruleCtrl.timeToDate(ruleCtrl.rule.lowerBoundary) }}</span> <span translate> to </span> <span>{{ ruleCtrl.timeToDate(ruleCtrl.rule.upperBoundary) }}</span> </div> <div ng-switch-default> <span>{{ ruleCtrl.rule.operator }}</span> <span>{{ ruleCtrl.timeToDate(ruleCtrl.rule.getExpression()) }}</span> </div> </div> </div> <div ng-switch-when=geometry> <span>{{ ruleCtrl.operators[ruleCtrl.rule.operator] }}</span> <span ng-switch=ruleCtrl.getRuleGeometryType()> <span class="gmf-icon gmf-icon-point" ng-switch-when=Point> </span> <span class="gmf-icon gmf-icon-line" ng-switch-when=LineString> </span> <span class="gmf-icon gmf-icon-polygon" ng-switch-when=Polygon> </span> <span class="gmf-icon gmf-icon-circle" ng-switch-when=Circle> </span> <span class="gmf-icon gmf-icon-rectangle" ng-switch-when=Rectangle> </span> </span> </div> <div ng-switch-when=select> <span ng-repeat="choice in ruleCtrl.rule.getExpression().split(\',\')"> {{ choice | translate }}{{ $last ? \'\' : \', \' }} </span> </div> <div ng-switch-default> <div ng-switch=ruleCtrl.rule.operator> <div ng-switch-when=..> <span translate>Between </span> <span>{{ ruleCtrl.rule.lowerBoundary }}</span> <span translate> and </span> <span>{{ ruleCtrl.rule.upperBoundary }}</span> </div> <div ng-switch-default> <span>{{ ruleCtrl.rule.operator }}</span> <span>{{ ruleCtrl.rule.getExpression() }}</span> </div> </div> </div> </div> </div> ');
a.put("gmf/displayquerygrid.html",'<div class="gmf-displayquerygrid panel"> <div class=close ng-click=ctrl.clear()> &times; </div> <ul class="nav nav-pills small" role=tablist> <li ng-repeat="gridSource in ctrl.getGridSources() track by gridSource.source.id" role=presentation ng-class="{\'active\' : ctrl.isSelected(gridSource)}" ng-click=ctrl.selectTab(gridSource)> <a href=#{{gridSource.source.id}} data-target=#{{gridSource.source.id}} aria-controls={{gridSource.source.id}} role=tab data-toggle=tab> <span ng-if="gridSource.source.tooManyResults !== true"> {{gridSource.source.label | translate}} ({{gridSource.source.features.length}}) </span> <span ng-if="gridSource.source.tooManyResults === true"> {{gridSource.source.label | translate}} ({{gridSource.source.totalFeatureCount}}*) </span> </a> </li> </ul> <div class=tab-content> <div ng-repeat="gridSource in ctrl.getGridSources() track by gridSource.source.id" role=tabpanel class=tab-pane ng-class="{\'active\' : ctrl.isSelected(gridSource)}" id={{gridSource.source.id}}> <ngeo-grid ngeo-grid-configuration=gridSource.configuration ng-if="gridSource.source.tooManyResults !== true"> </ngeo-grid> <div ng-if="gridSource.source.tooManyResults === true"> <div class="gmf-displayquerygrid-message alert alert-warning"> <p><span translate>The results can not be displayed because the maximum number has been reached</span> ({{gridSource.source.limit}}).</p> <p translate>Please refine your query.</p> </div> </div> </div> </div> <div class=navbar ng-show="!ctrl.pending && ctrl.getActiveGridSource() && ctrl.getActiveGridSource().configuration !== null"> <ul class="nav navbar-nav navbar-right"> <li class="small ng-hide" ng-show=ctrl.isOneSelected()> <p class="navbar-text ng-binding"> {{ctrl.getSelectedRowCount()}} <span translate>selected element(s)</span> </p> </li> <li ng-show=ctrl.isOneSelected() class=ng-hide> <button class="btn btn-link btn-xs" title="{{\'Zoom to selection\' | translate}}" ng-click=ctrl.zoomToSelection()> <i class="fa fa-search-plus"></i> <span translate>Zoom to</span> </button> </li> <li ng-show=ctrl.isOneSelected() class=ng-hide> <button class="btn btn-link btn-xs" title="{{\'Export selection as CSV\' | translate}}" ng-click=ctrl.downloadCsv()> <i class="fa fa-download"></i> <span translate>Export as CSV</span> </button> </li> <li class="dropdown navbar-link dropup"> <button type=button class="dropup btn btn-default btn-xs" data-toggle=dropdown aria-haspopup=true aria-expanded=false> <span translate>Select</span> <span class=caret></span> </button> <ul class=dropdown-menu aria-labelledby=dLabel> <li> <a href ng-click=ctrl.selectAll() translate>All</a> </li> <li> <a href ng-click=ctrl.unselectAll() translate>None</a> </li> <li> <a href ng-click=ctrl.invertSelection() translate>Reverse selection</a> </li> </ul> </li> </ul> </div> <div ng-show=ctrl.pending class=gmf-displayquerygrid-pending> <span class="fa fa-spinner fa-spin"></span> </div> </div> ');
a.put("gmf/mouseposition.html",'<div class="btn-group dropup"> <a type=button class="btn btn-default dropdown-toggle" data-toggle=dropdown aria-expanded=false> <span class=gmf-mouseposition-control-target></span> <span class=caret></span> </a> <ul class="dropdown-menu dropdown-menu-right" role=menu> <li class=dropdown-header translate>Coordinate systems</li> <li ng-repeat="projitem in ::ctrl.projections"> <a href ng-click=ctrl.setProjection(projitem)> <span class="fa fa-fw" ng-class="{\'fa-check\': ctrl.projection == projitem}"></span> {{::projitem.label}} </a> </li> </ul> </div> ');
a.put("gmf/editfeatureselector.html",'<div ng-switch=efsCtrl.selectedEditableTreeCtrl> <div ng-switch-when=null> <select class=form-control ng-model=efsCtrl.selectedEditableTreeCtrl ng-show="efsCtrl.editableTreeCtrls.length > 0" ng-options="treeCtrl.node.name | translate for treeCtrl in efsCtrl.editableTreeCtrls"> <option value translate>-- Choose a layer --</option> </select> <span ng-show="efsCtrl.editableTreeCtrls.length == 0" translate>No editable layer available!</span> </div> <div ng-switch-default> <div class=row> <div class=col-sm-12> <span translate>Currently editing: </span> <b>{{ efsCtrl.selectedEditableTreeCtrl.node.name | translate }}</b> <span class="fa fa-pencil"></span> <br> <button ng-click=efsCtrl.stopEditing() class="btn btn-link btn-xs pull-right"> <span class="fa fa-times"></span> {{\'Stop editing\' | translate}} </button> </div> </div> <gmf-editfeature gmf-editfeature-dirty=efsCtrl.dirty gmf-editfeature-editabletreectrl=::efsCtrl.selectedEditableTreeCtrl gmf-editfeature-map=::efsCtrl.map gmf-editfeature-state=efsCtrl.state gmf-editfeature-tolerance=::efsCtrl.tolerance gmf-editfeature-vector=::efsCtrl.vectorLayer> </gmf-editfeature> </div> </div> ');
a.put("gmf/objecteditingtools.html",'<div class=btn-group role=group aria-label> <a href ngeo-btn ngeo-createfeature ngeo-createfeature-active=oetCtrl.drawActive ngeo-createfeature-features=::oetCtrl.sketchFeatures ngeo-createfeature-geom-type=::oetCtrl.geomType ngeo-createfeature-map=::oetCtrl.map class="btn btn-sm btn-default" ng-class="{active: oetCtrl.drawActive}" ng-if="::(oetCtrl.geomType === \'MultiPoint\')" ng-model=oetCtrl.drawActive title="{{\'Add a point to the geometry\' | translate}}"> <span class="fa fa-plus-square-o gmf-icon-oe-draw"> </span> </a> <a href ngeo-btn ngeo-createfeature ngeo-createfeature-active=oetCtrl.drawActive ngeo-createfeature-features=::oetCtrl.sketchFeatures ngeo-createfeature-geom-type=::oetCtrl.geomType ngeo-createfeature-map=::oetCtrl.map class="btn btn-sm btn-default" ng-class="{active: oetCtrl.drawActive}" ng-if="::(oetCtrl.geomType === \'MultiLineString\')" ng-model=oetCtrl.drawActive title="{{\'Add a linestring to the geometry\' | translate}}"> <span class="fa fa-plus-square-o gmf-icon-oe-draw"> </span> </a> <a href ngeo-btn ngeo-createfeature ngeo-createfeature-active=oetCtrl.drawActive ngeo-createfeature-features=::oetCtrl.sketchFeatures ngeo-createfeature-geom-type=::oetCtrl.geomType ngeo-createfeature-map=::oetCtrl.map class="btn btn-sm btn-default" ng-class="{active: oetCtrl.drawActive}" ng-if="::(oetCtrl.geomType === \'MultiPolygon\')" ng-model=oetCtrl.drawActive title="{{\'Add a polygon to the geometry\' | translate}}"> <span class="fa fa-plus-square-o gmf-icon-oe-draw"> </span> </a> <a href ngeo-btn ngeo-createfeature ngeo-createfeature-active=oetCtrl.eraseActive ngeo-createfeature-features=::oetCtrl.sketchFeatures ngeo-createfeature-geom-type=::oetCtrl.geomTypePolygon ngeo-createfeature-map=::oetCtrl.map class="btn btn-sm btn-default" ng-class="{active: oetCtrl.eraseActive}" ng-model=oetCtrl.eraseActive title="{{\'Erase geometry\' | translate}}"> <span class="fa fa-minus-square-o gmf-icon-oe-erase"> </span> </a> <a href ng-if="::oetCtrl.geomType === \'MultiPolygon\'" ngeo-btn ngeo-createregularpolygonfromclick ngeo-createregularpolygonfromclick-active=oetCtrl.drawTriangleActive ngeo-createregularpolygonfromclick-angle=oetCtrl.triangleAngle ngeo-createregularpolygonfromclick-features=::oetCtrl.sketchFeatures ngeo-createregularpolygonfromclick-map=::oetCtrl.map ngeo-createregularpolygonfromclick-radius=::oetCtrl.triangleRadius class="btn btn-sm btn-default ngeo-createregularpolygonfromclick" ng-class="{active: oetCtrl.drawTriangleActive}" ng-model=oetCtrl.drawTriangleActive title="{{\'Draw a triangle\' | translate}}"> <span class="fa fa-play fa-rotate-270 gmf-icon-oe-triangle"> </span> </a> <a href ngeo-btn gmf-objecteditinggetwmsfeature gmf-objecteditinggetwmsfeature-active=oetCtrl.copyFromActive gmf-objecteditinggetwmsfeature-features=::oetCtrl.sketchFeatures gmf-objecteditinggetwmsfeature-layerinfo=oetCtrl.queryableLayerInfo gmf-objecteditinggetwmsfeature-map=::oetCtrl.map class="btn btn-sm btn-default gmf-objecteditinggetwmsfeature-add" ng-class="{active: oetCtrl.copyFromActive}" ng-model=oetCtrl.copyFromActive title="{{\'Copy from external WMS feature\' | translate}}"> <span class="fa fa-clone gmf-icon-oe-copyfrom"> </span> </a> <a href ngeo-btn gmf-objecteditinggetwmsfeature gmf-objecteditinggetwmsfeature-active=oetCtrl.deleteFromActive gmf-objecteditinggetwmsfeature-features=::oetCtrl.sketchFeatures gmf-objecteditinggetwmsfeature-layerinfo=oetCtrl.queryableLayerInfo gmf-objecteditinggetwmsfeature-map=::oetCtrl.map class="btn btn-sm btn-default gmf-objecteditinggetwmsfeature-delete" ng-class="{active: oetCtrl.deleteFromActive}" ng-model=oetCtrl.deleteFromActive title="{{\'Cut from external WMS feature\' | translate}}"> <span class="fa fa-scissors gmf-icon-oe-deletefrom"> </span> </a> </div> ');
a.put("ngeomodule/import/partials/import-online.html",'<form class="form-group form-group-sm"> <input type=url name=url autocomplete=off placeholder="{{\'Choose or enter online resource URL\' | translate}}" ng-model=fileUrl required class=form-control> <div class="ngeo-import-open fa fa-collapse"></div> </form> <div class=tabbable-footer> <button type=button class="btn btn-default btn-sm" ng-class="{\'btn-danger\': canceler}" ng-disabled="!fileUrl || !isValid(fileUrl) || (loading && !canceler)" ng-click="loading ? cancel() : handleFileUrl()"> <span>{{userMessage | translate}}</span> </button> </div> ');
a.put("ngeomodule/import/partials/import-local.html",'<div class="input-group input-group-sm"> <input type=file name=file> <input class=form-control type=text readonly value="{{(file.name) ? file.name + \', \' + file.size/1000 + \' ko\' : \'\'}}" placeholder="{{\'No file\' | translate}}"> <span class=input-group-btn> <button type=button class="btn btn-default ngeo-import-browse" translate>Browse</button> </span> </div> <div ng-hide=isValid(file) class=ngeo-error translate>File too large</div> <div class=tabbable-footer> <button type=button class="btn btn-default btn-sm ngeo-load" ng-class="{\'btn-danger\': loading}" ng-disabled="!isValid(file) || (loading && !fileReader)" ng-click="loading ? cancel() : handleFile()"> <span>{{userMessage | translate}}</span> </button> </div> ');
a.put("gmf/displayquerywindow.html",'<div class=gmf-displayquerywindow ng-class="{\'gmf-displayquerywindow-desktop\': ctrl.desktop, \'gmf-displayquerywindow-mobile\': !ctrl.desktop}" ng-show=ctrl.open ng-swipe-disable-mouse ng-swipe-left=ctrl.next() ng-swipe-right=ctrl.previous()> <button class=gmf-displayquerywindow-collapse-button type=button ng-show=::!ctrl.desktop ng-click="ctrl.collapsed = !ctrl.collapsed" ng-class="[ctrl.collapsed ? \'gmf-displayquerywindow-collapse-button-up\' : \'gmf-displayquerywindow-collapse-button-down\']"> </button> <div class=gmf-displayquerywindow-container> <button type=button class="btn fa-close close" ng-click=ctrl.close()> </button> <div class=gmf-displayquerywindow-animation-container ng-class="[ctrl.collapsed ? \'\' : \'gmf-displayquerywindow-animation-container-detailed\', ctrl.isNext ? \'gmf-displayquerywindow-next\' : \'gmf-displayquerywindow-previous\']"> <div ng-animate-swap=ctrl.animate class="gmf-displayquerywindow-slide-animation gmf-animatable"> <div class=gmf-displayquerywindow-header> <p class=gmf-displayquerywindow-title>{{ctrl.source.label | translate}}</p> <p class=gmf-displayquerywindow-subtitle>{{ctrl.getFeatureValues()[ctrl.source.identifierAttributeField]}}</p> </div> <div class=gmf-displayquerywindow-details> <table> <tr ng-repeat="(key, value) in ctrl.getFeatureValues()" ng-if="value !== undefined"> <td class=gmf-displayquerywindow-details-key>{{key | translate}}</td> <td class=gmf-displayquerywindow-details-value ng-bind-html="value | ngeoTrustHtml"></td> </tr> </table> </div> </div> </div> <div class=gmf-displayquerywindow-navigate> <div class=gmf-displayquerywindow-placeholder> <button type=button class="gmf-displayquerywindow-previous btn" ng-disabled=ctrl.isFirst() ng-show="ctrl.getResultLength() > 1" ng-click=ctrl.previous()> <span ng-show=::ctrl.desktop>{{\'Prev.\' | translate}}</span> </button> </div> <div class=gmf-displayquerywindow-results> <span ng-show=::!ctrl.desktop>{{\'Result\' | translate}}</span> <span>{{ctrl.currentResult + 1}}</span> <span>/</span> <span>{{ctrl.getResultLength()}}</span> <div ng-show=::ctrl.desktop class=dropup> <button type=button class="btn btn-default dropdown-toggle" data-toggle=dropdown aria-expanded=false> <span class="fa fa-filter"></span> <span class="fa fa-caret-up"></span> </button> <ul class="dropdown-menu dropdown-menu-right" role=menu> <li> <a href=# ng-click=ctrl.setSelectedSource(null)> <i class="fa fa-fw" ng-class="{\'fa-check\': ctrl.selectedSource === null}"> </i> <span>{{\'All layers\' | translate}} ({{ctrl.ngeoQueryResult.total}})</span> </a> </li> <li role=separator class=divider> </li> <li ng-repeat-start="source in ctrl.ngeoQueryResult.sources | filter: ctrl.sourcesFilter" ng-repeat-end ng-class="{\'disabled\': source.features.length <= 0}"> <a href=# ng-click=ctrl.setSelectedSource(source)> <i class="fa fa-fw" ng-class="{\'fa-check\': ctrl.selectedSource === source}"> </i> <span>{{source.label | translate}} ({{source.features.length}})</span> </a> </li> </ul> </div> </div> <div class=gmf-displayquerywindow-placeholder> <button type=button class="gmf-displayquerywindow-next btn" ng-disabled=ctrl.isLast() ng-show="ctrl.getResultLength() > 1" ng-click=ctrl.next()> <span ng-show=::ctrl.desktop>{{\'Next\' | translate}}</span> </button> </div> </div> </div> </div> ');
a.put("gmf/objectediting.html",'<gmf-objecteditingtools gmf-objecteditingtools-active=oeCtrl.toolsActive gmf-objecteditingtools-copyfromactive=oeCtrl.copyFromActive gmf-objecteditingtools-deletefromactive=oeCtrl.deleteFromActive gmf-objecteditingtools-feature=oeCtrl.feature gmf-objecteditingtools-geomtype=::oeCtrl.geomType gmf-objecteditingtools-map=::oeCtrl.map gmf-objecteditingtools-process=oeCtrl.process gmf-objecteditingtools-queryablelayerinfo=oeCtrl.selectedQueryableLayerInfo gmf-objecteditingtools-requireslayer=oeCtrl.queryableLayerListShown gmf-objecteditingtools-sketchfeatures=::oeCtrl.sketchFeatures> </gmf-objecteditingtools> <div class=form-group ng-show=oeCtrl.queryableLayerListShown> <label ng-show="oeCtrl.copyFromActive === true" class=control-label>{{\'Copy from:\' | translate}}</label> <label ng-show="oeCtrl.deleteFromActive === true" class=control-label>{{\'Cut from:\' | translate}}</label> <select class=form-control ng-model=oeCtrl.selectedQueryableLayerInfo ng-options="layerInfo.layerNode.name | translate for layerInfo in oeCtrl.queryableLayersInfo"> </select> </div> <form novalidate name=form class="form gmf-objectediting-form"> <input type=submit value="{{\'Save\' | translate}}" class="btn btn-sm btn-default gmf-objectediting-btn-save" ng-click="form.$valid && oeCtrl.save()" ng-disabled="!oeCtrl.dirty || oeCtrl.pending" title="{{\'Save modifications | translate\'}}"> <a class="btn btn-sm btn-link gmf-objectediting-btn-undo" ng-click=oeCtrl.undo() ng-disabled="!oeCtrl.dirty || oeCtrl.pending" title="{{\'Undo latest modifications | translate\'}}" href>{{\'Undo\' | translate}}</a> <a class="btn btn-sm btn-link gmf-objectediting-btn-delete" ng-click=oeCtrl.delete() ng-disabled="oeCtrl.isStateInsert() || oeCtrl.pending" title="{{\'Delete the feature | translate\'}}" href>{{\'Delete\' | translate}}</a> </form> ');
a.put("gmf/timeslider.html","<div class=gmf-time-slider> <div ui-slider=sliderCtrl.sliderOptions ng-model=sliderCtrl.dates> <span class=\"ui-slider-handle ui-state-default ui-corner-all\" tabindex=0 data-toggle=tooltip title> </span> </div> <div class=gmf-time-slider-displayed-dates> <div class=gmf-time-slider-start-date ng-if=\"::sliderCtrl.time.mode === 'range'\"> <span>{{sliderCtrl.dates[0] | date : 'shortDate'}}</span> </div> <div class=gmf-time-slider-start-date ng-if=\"::sliderCtrl.time.mode === 'value'\"> <span>{{sliderCtrl.dates |\u00a0date : 'shortDate'}}</span> </div> <div class=gmf-time-slider-end-date ng-if=\"::sliderCtrl.time.mode === 'range'\"> <span>{{sliderCtrl.dates[1] |\u00a0date : 'shortDate'}}</span> </div> </div> </div> ");
a.put("gmf/backgroundlayerselector.html",'<ul class=gmf-backgroundlayerselector> <li ng-repeat="layer in ::ctrl.bgLayers" ng-click=ctrl.setLayer(layer) ng-class="{\'gmf-backgroundlayerselector-active\': ctrl.bgLayer == layer}"> <img class=gmf-thumb ng-src="{{::layer.get(\'metadata\')[\'thumbnail\']}}"> <span class=gmf-text>{{layer.get("label") | translate}}</span> </li> </ul> ');a.put("gmf/themeselector.html",'<ul class=gmf-theme-selector> <li ng-repeat="theme in tsCtrl.themes" ng-click=tsCtrl.setTheme(theme) ng-class="{\'gmf-theme-selector-active\': tsCtrl.gmfThemeManager.themeName == theme.name}"> <img class=gmf-thumb ng-src={{::theme.icon}}> <span class=gmf-text>{{theme.name | translate}}</span> </li> </ul> ');
a.put("ngeo/layertree.html",'<span ng-if=::!layertreeCtrl.isRoot>{{::layertreeCtrl.node.name}}</span> <input type=checkbox ng-if="::layertreeCtrl.node && !layertreeCtrl.node.children" ng-model=layertreeCtrl.getSetActive ng-model-options="{getterSetter: true}"> <ul ng-if=::layertreeCtrl.node.children> <li ng-repeat="node in ::layertreeCtrl.node.children" ngeo-layertree=::node ngeo-layertree-notroot ngeo-layertree-map=layertreeCtrl.map ngeo-layertree-nodelayerexpr=layertreeCtrl.nodelayerExpr ngeo-layertree-listenersexpr=layertreeCtrl.listenersExpr> </li> </ul> ');
a.put("ngeo/colorpicker.html",'<table class=ngeo-colorpicker-palette> <tr ng-repeat="colors in ::ctrl.colors"> <td ng-repeat="color in ::colors" ng-click=ctrl.setColor(color) ng-class="{\'ngeo-colorpicker-selected\': color == ctrl.color}"> <div ng-style="::{\'background-color\': color}"></div> </td> </tr> </table> ');a.put("gmf/search.html",'<div class=gmf-search> <input type=text placeholder={{ctrl.placeholder}} class=form-control ng-model=ctrl.inputValue ngeo-search=ctrl.options ngeo-search-datasets=ctrl.datasets ngeo-search-listeners=ctrl.listeners> <span class="gmf-clear-button ng-hide" ng-hide="!ctrl.clearButton || ctrl.inputValue == \'\'" ng-click=ctrl.onClearButton()> </span> </div> <span ng-if=ctrl.colorchooser> <span ng-show=ctrl.displayColorPicker ngeo-popover ngeo-popover-placement=bottom> <button class="gmf-color-button fa fa-tint" ngeo-popover-anchor data-original-title="{{\'Change the color of the search result\'|translate}}"></button> <div ngeo-popover-content> <div ngeo-colorpicker ngeo-colorpicker-color=ctrl.color></div> </div> </span> </span> ')}
a.$inject=["$templateCache"];T.run(a)})();}).call(window);
//# sourceMappingURL=desktop_alt.js.map
