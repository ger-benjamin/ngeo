(function(){'use strict';var m,t=this;function ba(b){return void 0!==b}function ca(){}
function da(b){var c=typeof b;if("object"==c)if(b){if(b instanceof Array)return"array";if(b instanceof Object)return c;var d=Object.prototype.toString.call(b);if("[object Window]"==d)return"object";if("[object Array]"==d||"number"==typeof b.length&&"undefined"!=typeof b.splice&&"undefined"!=typeof b.propertyIsEnumerable&&!b.propertyIsEnumerable("splice"))return"array";if("[object Function]"==d||"undefined"!=typeof b.call&&"undefined"!=typeof b.propertyIsEnumerable&&!b.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==c&&"undefined"==typeof b.call)return"object";return c}function ea(b){return"array"==da(b)}function fa(b){var c=da(b);return"array"==c||"object"==c&&"number"==typeof b.length}function ga(b){return"string"==typeof b}function ha(b){return"number"==typeof b}function ia(b){return"function"==da(b)}function ka(b){var c=typeof b;return"object"==c&&null!=b||"function"==c}function w(b){return b[la]||(b[la]=++ma)}var la="closure_uid_"+(1E9*Math.random()>>>0),ma=0;
function na(b,c,d){return b.call.apply(b.bind,arguments)}function oa(b,c,d){if(!b)throw Error();if(2<arguments.length){var e=Array.prototype.slice.call(arguments,2);return function(){var d=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(d,e);return b.apply(c,d)}}return function(){return b.apply(c,arguments)}}function pa(b,c,d){pa=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?na:oa;return pa.apply(null,arguments)}
function qa(b,c){var d=Array.prototype.slice.call(arguments,1);return function(){var c=d.slice();c.push.apply(c,arguments);return b.apply(this,c)}}var ra=Date.now||function(){return+new Date};function sa(b,c){var d=b.split("."),e=t;d[0]in e||!e.execScript||e.execScript("var "+d[0]);for(var f;d.length&&(f=d.shift());)!d.length&&ba(c)?e[f]=c:e[f]?e=e[f]:e=e[f]={}}
function y(b,c){function d(){}d.prototype=c.prototype;b.U=c.prototype;b.prototype=new d;b.prototype.constructor=b;b.ck=function(b,d,g){for(var h=Array(arguments.length-2),k=2;k<arguments.length;k++)h[k-2]=arguments[k];return c.prototype[d].apply(b,h)}};var A=angular.module("ngeo",[]);var B=angular.module("gmf",[A.name,"gettext","ngAnimate","ngTouch"]);var ta=angular.module("app",[B.name]);var ua;var va=String.prototype.trim?function(b){return b.trim()}:function(b){return b.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")};function wa(b){if(!xa.test(b))return b;-1!=b.indexOf("&")&&(b=b.replace(ya,"&amp;"));-1!=b.indexOf("<")&&(b=b.replace(Aa,"&lt;"));-1!=b.indexOf(">")&&(b=b.replace(Ba,"&gt;"));-1!=b.indexOf('"')&&(b=b.replace(Ca,"&quot;"));-1!=b.indexOf("'")&&(b=b.replace(Da,"&#39;"));-1!=b.indexOf("\x00")&&(b=b.replace(Ea,"&#0;"));return b}
var ya=/&/g,Aa=/</g,Ba=/>/g,Ca=/"/g,Da=/'/g,Ea=/\x00/g,xa=/[\x00&<>"']/,Fa=String.prototype.repeat?function(b,c){return b.repeat(c)}:function(b,c){return Array(c+1).join(b)};function Ga(b,c,d){b=ba(d)?b.toFixed(d):String(b);d=b.indexOf(".");-1==d&&(d=b.length);return Fa("0",Math.max(0,c-d))+b}function Ha(b){return Array.prototype.join.call(arguments,"")}
function Ia(b,c){for(var d=0,e=va(String(b)).split("."),f=va(String(c)).split("."),g=Math.max(e.length,f.length),h=0;0==d&&h<g;h++){var k=e[h]||"",l=f[h]||"",n=/(\d*)(\D*)/g,q=/(\d*)(\D*)/g;do{var p=n.exec(k)||["","",""],r=q.exec(l)||["","",""];if(0==p[0].length&&0==r[0].length)break;d=Ja(0==p[1].length?0:parseInt(p[1],10),0==r[1].length?0:parseInt(r[1],10))||Ja(0==p[2].length,0==r[2].length)||Ja(p[2],r[2])}while(0==d)}return d}function Ja(b,c){return b<c?-1:b>c?1:0};function Ka(b,c,d){Array.prototype.forEach.call(b,c,d)}function La(b,c){return Array.prototype.filter.call(b,c,void 0)}function Ma(b,c){var d;a:{d=b.length;for(var e=ga(b)?b.split(""):b,f=0;f<d;f++)if(f in e&&c.call(void 0,e[f],f,b)){d=f;break a}d=-1}return 0>d?null:ga(b)?b.charAt(d):b[d]}function Na(b,c){return 0<=Array.prototype.indexOf.call(b,c,void 0)}function Oa(b,c){var d=Array.prototype.indexOf.call(b,c,void 0),e;(e=0<=d)&&Array.prototype.splice.call(b,d,1);return e}
function Pa(b){return Array.prototype.concat.apply(Array.prototype,arguments)}function Qa(b){var c=b.length;if(0<c){for(var d=Array(c),e=0;e<c;e++)d[e]=b[e];return d}return[]}function Ra(b,c,d){return 2>=arguments.length?Array.prototype.slice.call(b,c):Array.prototype.slice.call(b,c,d)};function Sa(b,c){this.type=b;this.target=c}Sa.prototype.preventDefault=Sa.prototype.stopPropagation=function(){this.Qi=!0};function Ta(b){b.stopPropagation()};var Ua="function"===typeof Object.assign?Object.assign:function(b,c){if(void 0===b||null===b)throw new TypeError("Cannot convert undefined or null to object");for(var d=Object(b),e=1,f=arguments.length;e<f;++e){var g=arguments[e];if(void 0!==g&&null!==g)for(var h in g)g.hasOwnProperty(h)&&(d[h]=g[h])}return d};function Va(b){for(var c in b)delete b[c]}function Wa(b){for(var c in b)return!1;return!c};var Xa="olm_"+(1E4*Math.random()|0);function Ya(b){function c(c){var e=b.listener,f=b.Ie||b.target;b.hb&&G(b);return e.call(f,c)}return b.Je=c}function Za(b,c,d,e){for(var f,g=0,h=b.length;g<h;++g)if(f=b[g],f.listener===c&&f.Ie===d)return e&&(f.deleteIndex=g),f}function $a(b,c){var d=b[Xa];return d?d[c]:void 0}function ab(b){var c=b[Xa];c||(c=b[Xa]={});return c}
function bb(b,c){var d=$a(b,c);if(d){for(var e=0,f=d.length;e<f;++e)b.removeEventListener(c,d[e].Je),Va(d[e]);d.length=0;if(d=b[Xa])delete d[c],0===Object.keys(d).length&&delete b[Xa]}}function I(b,c,d,e,f){var g=ab(b),h=g[c];h||(h=g[c]=[]);(g=Za(h,d,e,!1))?f||(g.hb=!1):(g={Ie:e,hb:!!f,listener:d,target:b,type:c},b.addEventListener(c,Ya(g)),h.push(g));return g}function cb(b,c,d,e){(b=$a(b,c))&&(d=Za(b,d,e,!0))&&G(d)}
function G(b){if(b&&b.target){b.target.removeEventListener(b.type,b.Je);var c=$a(b.target,b.type);if(c){var d="deleteIndex"in b?b.deleteIndex:c.indexOf(b);-1!==d&&c.splice(d,1);0===c.length&&bb(b.target,b.type)}Va(b)}};function db(){0!=eb&&(fb[w(this)]=this);this.Z=this.Z;this.W=this.W}var eb=0,fb={};db.prototype.Z=!1;db.prototype.Db=function(){if(!this.Z&&(this.Z=!0,this.L(),0!=eb)){var b=w(this);delete fb[b]}};function gb(b,c){b.Z?c.call(void 0):(b.W||(b.W=[]),b.W.push(ba(void 0)?pa(c,void 0):c))}db.prototype.L=function(){if(this.W)for(;this.W.length;)this.W.shift()()};function hb(b){b&&"function"==typeof b.Db&&b.Db()};function ib(){db.call(this);this.N={}}y(ib,db);ib.prototype.addEventListener=function(b,c){var d=this.N[b];d||(d=this.N[b]=[]);-1===d.indexOf(c)&&d.unshift(c)};ib.prototype.B=function(b){b="string"===typeof b?new Sa(b):b;var c=b.type;b.target=this;if(c=this.N[c])for(var d=c.length-1;0<=d;--d)if(!1===c[d].call(this,b)||b.Qi)return!1};ib.prototype.L=function(){var b=ab(this),c;for(c in b)bb(this,c);ib.U.L.call(this)};function jb(b,c){return c?c in b.N:0<Object.keys(b.N).length}
ib.prototype.removeEventListener=function(b,c){var d=this.N[b];d&&(d.splice(d.indexOf(c),1),0===d.length&&delete this.N[b])};function kb(){ib.call(this);this.f=0}y(kb,ib);kb.prototype.b=function(){++this.f;this.B("change")};kb.prototype.on=function(b,c,d){if(Array.isArray(b)){for(var e=b.length,f=Array(e),g=0;g<e;++g)f[g]=I(this,b[g],c,d);return f}return I(this,b,c,d)};function lb(b,c,d){Sa.call(this,b);this.key=c;this.oldValue=d}y(lb,Sa);function mb(b){kb.call(this);w(this);this.u={};void 0!==b&&this.ka(b)}y(mb,kb);var nb={};function L(b){return nb.hasOwnProperty(b)?nb[b]:nb[b]="change:"+b}mb.prototype.get=function(b){var c;this.u.hasOwnProperty(b)&&(c=this.u[b]);return c};mb.prototype.ya=function(){return Object.keys(this.u)};
mb.prototype.set=function(b,c,d){d?this.u[b]=c:(d=this.u[b],this.u[b]=c,d!==c&&(c=L(b),this.B(new lb(c,b,d)),this.B(new lb("propertychange",b,d))))};mb.prototype.ka=function(b,c){for(var d in b)this.set(d,b[d],c)};function ob(b,c,d){Sa.call(this,b,d);this.element=c}y(ob,Sa);function pb(b){mb.call(this);this.a=b?b:[];qb(this)}y(pb,mb);m=pb.prototype;m.clear=function(){for(;0<this.get("length");)this.pop()};m.extend=function(b){var c,d;c=0;for(d=b.length;c<d;++c)this.push(b[c]);return this};m.forEach=function(b,c){this.a.forEach(b,c)};m.item=function(b){return this.a[b]};function rb(b,c,d){b.a.splice(c,0,d);qb(b);b.B(new ob("add",d,b))}m.pop=function(){return sb(this,this.get("length")-1)};
m.push=function(b){var c=this.a.length;rb(this,c,b);return c};m.remove=function(b){var c=this.a,d,e;d=0;for(e=c.length;d<e;++d)if(c[d]===b)return sb(this,d)};function sb(b,c){var d=b.a[c];b.a.splice(c,1);qb(b);b.B(new ob("remove",d,b));return d}function qb(b){b.set("length",b.a.length)};function tb(b){this.length=b.length||b;for(var c=0;c<this.length;c++)this[c]=b[c]||0}tb.prototype.a=4;tb.prototype.set=function(b,c){c=c||0;for(var d=0;d<b.length&&c+d<this.length;d++)this[c+d]=b[d]};tb.prototype.toString=Array.prototype.join;"undefined"==typeof Float32Array&&(tb.BYTES_PER_ELEMENT=4,tb.prototype.BYTES_PER_ELEMENT=tb.prototype.a,tb.prototype.set=tb.prototype.set,tb.prototype.toString=tb.prototype.toString,sa("Float32Array",tb));function ub(b){this.length=b.length||b;for(var c=0;c<this.length;c++)this[c]=b[c]||0}ub.prototype.a=8;ub.prototype.set=function(b,c){c=c||0;for(var d=0;d<b.length&&c+d<this.length;d++)this[c+d]=b[d]};ub.prototype.toString=Array.prototype.join;if("undefined"==typeof Float64Array){try{ub.BYTES_PER_ELEMENT=8}catch(b){}ub.prototype.BYTES_PER_ELEMENT=ub.prototype.a;ub.prototype.set=ub.prototype.set;ub.prototype.toString=ub.prototype.toString;sa("Float64Array",ub)};function vb(){var b=Array(16);b[0]=0;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=0;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=0;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=0;return b}
function wb(b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],k=b[5],l=b[6],n=b[7],q=b[8],p=b[9],r=b[10],u=b[11],v=b[12],z=b[13],x=b[14],C=b[15],H=d*k-e*h,E=d*l-f*h,D=d*n-g*h,R=e*l-f*k,F=e*n-g*k,M=f*n-g*l,T=q*z-p*v,K=q*x-r*v,Z=q*C-u*v,X=p*x-r*z,W=p*C-u*z,J=r*C-u*x,aa=H*J-E*W+D*X+R*Z-F*K+M*T;0!=aa&&(aa=1/aa,c[0]=(k*J-l*W+n*X)*aa,c[1]=(-e*J+f*W-g*X)*aa,c[2]=(z*M-x*F+C*R)*aa,c[3]=(-p*M+r*F-u*R)*aa,c[4]=(-h*J+l*Z-n*K)*aa,c[5]=(d*J-f*Z+g*K)*aa,c[6]=(-v*M+x*D-C*E)*aa,c[7]=(q*M-r*D+u*E)*aa,c[8]=(h*W-k*Z+n*T)*
aa,c[9]=(-d*W+e*Z-g*T)*aa,c[10]=(v*F-z*D+C*H)*aa,c[11]=(-q*F+p*D-u*H)*aa,c[12]=(-h*X+k*K-l*T)*aa,c[13]=(d*X-e*K+f*T)*aa,c[14]=(-v*R+z*E-x*H)*aa,c[15]=(q*R-p*E+r*H)*aa)}function xb(b,c,d){var e=b[1]*c+b[5]*d+0*b[9]+b[13],f=b[2]*c+b[6]*d+0*b[10]+b[14],g=b[3]*c+b[7]*d+0*b[11]+b[15];b[12]=b[0]*c+b[4]*d+0*b[8]+b[12];b[13]=e;b[14]=f;b[15]=g}new Float64Array(3);new Float64Array(3);new Float64Array(4);new Float64Array(4);new Float64Array(4);new Float64Array(16);function yb(b,c){var d=b%c;return 0>d*c?d+c:d};function zb(b,c){b[0]+=c[0];b[1]+=c[1]}function Ab(b,c){var d=Math.cos(c),e=Math.sin(c),f=b[1]*d+b[0]*e;b[0]=b[0]*d-b[1]*e;b[1]=f};function Bb(b,c){if(ea(b))return b;void 0===c?c=[b,b]:(c[0]=b,c[1]=b);return c};function Db(b){for(var c=Eb(),d=0,e=b.length;d<e;++d)Fb(c,b[d]);return c}function Gb(b,c,d){return d?(d[0]=b[0]-c,d[1]=b[1]-c,d[2]=b[2]+c,d[3]=b[3]+c,d):[b[0]-c,b[1]-c,b[2]+c,b[3]+c]}function Hb(b,c){return c?(c[0]=b[0],c[1]=b[1],c[2]=b[2],c[3]=b[3],c):b.slice()}function Ib(b,c){return b[0]<=c[0]&&c[2]<=b[2]&&b[1]<=c[1]&&c[3]<=b[3]}function Eb(){return[Infinity,Infinity,-Infinity,-Infinity]}function Jb(b,c,d,e,f){return f?(f[0]=b,f[1]=c,f[2]=d,f[3]=e,f):[b,c,d,e]}
function Kb(b,c){return b[0]==c[0]&&b[2]==c[2]&&b[1]==c[1]&&b[3]==c[3]}function Lb(b,c){c[0]<b[0]&&(b[0]=c[0]);c[2]>b[2]&&(b[2]=c[2]);c[1]<b[1]&&(b[1]=c[1]);c[3]>b[3]&&(b[3]=c[3])}function Fb(b,c){c[0]<b[0]&&(b[0]=c[0]);c[0]>b[2]&&(b[2]=c[0]);c[1]<b[1]&&(b[1]=c[1]);c[1]>b[3]&&(b[3]=c[1])}function Mb(b,c,d,e,f){for(;d<e;d+=f){var g=b,h=c[d],k=c[d+1];g[0]=Math.min(g[0],h);g[1]=Math.min(g[1],k);g[2]=Math.max(g[2],h);g[3]=Math.max(g[3],k)}return b}
function Nb(b){var c=0;Ob(b)||(c=Pb(b)*Qb(b));return c}function Rb(b){return[(b[0]+b[2])/2,(b[1]+b[3])/2]}function Sb(b,c,d,e,f){var g=c*e[0]/2;e=c*e[1]/2;c=Math.cos(d);var h=Math.sin(d);d=g*c;g*=h;c*=e;var k=e*h,l=b[0],n=b[1];b=l-d+k;e=l-d-k;h=l+d-k;d=l+d+k;var k=n-g-c,l=n-g+c,q=n+g+c,g=n+g-c;return Jb(Math.min(b,e,h,d),Math.min(k,l,q,g),Math.max(b,e,h,d),Math.max(k,l,q,g),f)}function Qb(b){return b[3]-b[1]}
function Tb(b,c){var d=Eb();Ub(b,c)&&(d[0]=b[0]>c[0]?b[0]:c[0],d[1]=b[1]>c[1]?b[1]:c[1],d[2]=b[2]<c[2]?b[2]:c[2],d[3]=b[3]<c[3]?b[3]:c[3]);return d}function Pb(b){return b[2]-b[0]}function Ub(b,c){return b[0]<=c[2]&&b[2]>=c[0]&&b[1]<=c[3]&&b[3]>=c[1]}function Ob(b){return b[2]<b[0]||b[3]<b[1]};function Vb(b){return b.getAttributeNS("http://www.w3.org/1999/xlink","href")};var Wb;a:{var Xb=t.navigator;if(Xb){var Yb=Xb.userAgent;if(Yb){Wb=Yb;break a}}Wb=""}function Zb(b){return-1!=Wb.indexOf(b)};function $b(b,c,d){for(var e in b)c.call(d,b[e],e,b)}function ac(b){var c=[],d=0,e;for(e in b)c[d++]=b[e];return c}function bc(b){var c=[],d=0,e;for(e in b)c[d++]=e;return c}function cc(b,c){return null!==b&&c in b}function dc(b){var c={},d;for(d in b)c[d]=b[d];return c}var ec="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");
function fc(b,c){for(var d,e,f=1;f<arguments.length;f++){e=arguments[f];for(d in e)b[d]=e[d];for(var g=0;g<ec.length;g++)d=ec[g],Object.prototype.hasOwnProperty.call(e,d)&&(b[d]=e[d])}};var gc=Zb("Opera")||Zb("OPR"),hc=Zb("Trident")||Zb("MSIE"),ic=Zb("Edge"),jc=Zb("Gecko")&&!(-1!=Wb.toLowerCase().indexOf("webkit")&&!Zb("Edge"))&&!(Zb("Trident")||Zb("MSIE"))&&!Zb("Edge"),kc=-1!=Wb.toLowerCase().indexOf("webkit")&&!Zb("Edge"),lc=Zb("Macintosh");function mc(){var b=Wb;if(jc)return/rv\:([^\);]+)(\)|;)/.exec(b);if(ic)return/Edge\/([\d\.]+)/.exec(b);if(hc)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(b);if(kc)return/WebKit\/(\S+)/.exec(b)}
function nc(){var b=t.document;return b?b.documentMode:void 0}var oc=function(){if(gc&&t.opera){var b;var c=t.opera.version;try{b=c()}catch(d){b=c}return b}b="";(c=mc())&&(b=c?c[1]:"");return hc&&(c=nc(),null!=c&&c>parseFloat(b))?String(c):b}(),pc={};function qc(b){return pc[b]||(pc[b]=0<=Ia(oc,b))}var rc=t.document,sc=rc&&hc?nc()||("CSS1Compat"==rc.compatMode?parseInt(oc,10):5):void 0;var tc=!hc||9<=Number(sc),uc=!jc&&!hc||hc&&9<=Number(sc)||jc&&qc("1.9.1");hc&&qc("9");function vc(b,c){this.x=ba(b)?b:0;this.y=ba(c)?c:0}m=vc.prototype;m.clone=function(){return new vc(this.x,this.y)};m.ceil=function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this};m.floor=function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this};m.round=function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this};m.translate=function(b,c){b instanceof vc?(this.x+=b.x,this.y+=b.y):(this.x+=Number(b),ha(c)&&(this.y+=c));return this};
m.scale=function(b,c){var d=ha(c)?c:b;this.x*=b;this.y*=d;return this};function wc(b,c){this.width=b;this.height=c}m=wc.prototype;m.clone=function(){return new wc(this.width,this.height)};m.area=function(){return this.width*this.height};m.Ia=function(){return!this.area()};m.ceil=function(){this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};m.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};m.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};
m.scale=function(b,c){var d=ha(c)?c:b;this.width*=b;this.height*=d;return this};function xc(b){return b?new yc(zc(b)):ua||(ua=new yc)}function Ac(b){var c=document;return ga(b)?c.getElementById(b):b}function Bc(b,c){var d=c||document,e=null;d.getElementsByClassName?e=d.getElementsByClassName(b)[0]:d.querySelectorAll&&d.querySelector?e=d.querySelector("."+b):e=Cc(b,c)[0];return e||null}
function Cc(b,c){var d,e,f,g;d=document;d=c||d;if(d.querySelectorAll&&d.querySelector&&b)return d.querySelectorAll(""+(b?"."+b:""));if(b&&d.getElementsByClassName){var h=d.getElementsByClassName(b);return h}h=d.getElementsByTagName("*");if(b){g={};for(e=f=0;d=h[e];e++){var k=d.className;"function"==typeof k.split&&Na(k.split(/\s+/),b)&&(g[f++]=d)}g.length=f;return g}return h}
function Dc(b,c){$b(c,function(c,e){"style"==e?b.style.cssText=c:"class"==e?b.className=c:"for"==e?b.htmlFor=c:Ec.hasOwnProperty(e)?b.setAttribute(Ec[e],c):0==e.lastIndexOf("aria-",0)||0==e.lastIndexOf("data-",0)?b.setAttribute(e,c):b[e]=c})}var Ec={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};
function Fc(b,c,d){var e=arguments,f=document,g=e[0],h=e[1];if(!tc&&h&&(h.name||h.type)){g=["<",g];h.name&&g.push(' name="',wa(h.name),'"');if(h.type){g.push(' type="',wa(h.type),'"');var k={};fc(k,h);delete k.type;h=k}g.push(">");g=g.join("")}g=f.createElement(g);h&&(ga(h)?g.className=h:ea(h)?g.className=h.join(" "):Dc(g,h));2<e.length&&Gc(f,g,e,2);return g}
function Gc(b,c,d,e){function f(d){d&&c.appendChild(ga(d)?b.createTextNode(d):d)}for(;e<d.length;e++){var g=d[e];!fa(g)||ka(g)&&0<g.nodeType?f(g):Ka(Hc(g)?Qa(g):g,f)}}function Ic(b){for(var c;c=b.firstChild;)b.removeChild(c)}function Jc(b){b&&b.parentNode&&b.parentNode.removeChild(b)}function Kc(b){return uc&&void 0!=b.children?b.children:La(b.childNodes,function(b){return 1==b.nodeType})}
function Lc(b){if(ba(b.nextElementSibling))b=b.nextElementSibling;else for(b=b.nextSibling;b&&1!=b.nodeType;)b=b.nextSibling;return b}function Mc(b,c){if(!b||!c)return!1;if(b.contains&&1==c.nodeType)return b==c||b.contains(c);if("undefined"!=typeof b.compareDocumentPosition)return b==c||!!(b.compareDocumentPosition(c)&16);for(;c&&b!=c;)c=c.parentNode;return c==b}function zc(b){return 9==b.nodeType?b:b.ownerDocument||b.document}
function Hc(b){if(b&&"number"==typeof b.length){if(ka(b))return"function"==typeof b.item||"string"==typeof b.item;if(ia(b))return"function"==typeof b.item}return!1}function yc(b){this.a=b||t.document||document}m=yc.prototype;m.ka=Dc;
function Nc(b){var c=b.a;b=c.scrollingElement?c.scrollingElement:kc?c.body||c.documentElement:c.documentElement;c=c.parentWindow||c.defaultView;return hc&&qc("10")&&c.pageYOffset!=b.scrollTop?new vc(b.scrollLeft,b.scrollTop):new vc(c.pageXOffset||b.scrollLeft,c.pageYOffset||b.scrollTop)}m.appendChild=function(b,c){b.appendChild(c)};m.append=function(b,c){Gc(zc(b),b,arguments,1)};m.isElement=function(b){return ka(b)&&1==b.nodeType};m.contains=Mc;function Oc(){if(!hc)return!1;try{return new ActiveXObject("MSXML2.DOMDocument"),!0}catch(b){return!1}}var Qc=hc&&Oc();function Rc(b,c){return b>c?1:b<c?-1:0}function Sc(b,c,d){var e=b.length;if(b[0]<=c)return 0;if(!(c<=b[e-1]))if(0<d)for(d=1;d<e;++d){if(b[d]<c)return d-1}else if(0>d)for(d=1;d<e;++d){if(b[d]<=c)return d}else for(d=1;d<e;++d){if(b[d]==c)return d;if(b[d]<c)return b[d-1]-c<c-b[d]?d-1:d}return e-1}function Tc(b,c){var d,e=fa(c)?c:[c],f=e.length;for(d=0;d<f;d++)b[b.length]=e[d]}function Uc(b,c){var d=b.indexOf(c),e=-1<d;e&&b.splice(d,1);return e}
function Vc(b,c){for(var d=b.length>>>0,e,f=0;f<d;f++)if(e=b[f],c(e,f,b))return e;return null}function Wc(b,c){var d=b.length;if(d!==c.length)return!1;for(var e=0;e<d;e++)if(b[e]!==c[e])return!1;return!0}function Xc(b){var c=Yc,d=b.length,e=Array(b.length),f;for(f=0;f<d;f++)e[f]={index:f,value:b[f]};e.sort(function(b,d){return c(b.value,d.value)||b.index-d.index});for(f=0;f<b.length;f++)b[f]=e[f].value}function Zc(b,c){var d;return b.every(function(e,f){d=f;return!c(e,f,b)})?-1:d};var $c;a:if(document.implementation&&document.implementation.createDocument)$c=document.implementation.createDocument("","",null);else{if(Qc){var ad=new ActiveXObject("MSXML2.DOMDocument");ad.resolveExternals=!1;ad.validateOnParse=!1;try{ad.setProperty("ProhibitDTD",!0),ad.setProperty("MaxXMLSize",2048),ad.setProperty("MaxElementDepth",256)}catch(b){}if(ad){$c=ad;break a}}throw Error("Your browser does not support creating new documents");}var bd=$c;
function cd(b,c){return bd.createElementNS(b,c)}function dd(b,c){b||(b="");return bd.createNode(1,c,b)}var ed=document.implementation&&document.implementation.createDocument?cd:dd;function fd(b){return gd(b,!1,[]).join("")}function gd(b,c,d){if(4==b.nodeType||3==b.nodeType)c?d.push(String(b.nodeValue).replace(/(\r\n|\r|\n)/g,"")):d.push(b.nodeValue);else for(b=b.firstChild;b;b=b.nextSibling)gd(b,c,d);return d}function hd(b){return b.localName}
function id(b){var c=b.localName;return void 0!==c?c:b.baseName}var jd=hc?id:hd;function kd(b){return b instanceof Document}function ld(b){return ka(b)&&9==b.nodeType}var md=hc?ld:kd;function nd(b){return b instanceof Node}function od(b){return ka(b)&&void 0!==b.nodeType}var pd=hc?od:nd;function qd(b,c,d){return b.getAttributeNS(c,d)||""}function rd(b,c,d){var e="";b=sd(b,c,d);void 0!==b&&(e=b.nodeValue);return e}var td=document.implementation&&document.implementation.createDocument?qd:rd;
function ud(b,c,d){return b.getAttributeNodeNS(c,d)}function vd(b,c,d){var e=null;b=b.attributes;for(var f,g,h=0,k=b.length;h<k;++h)if(f=b[h],f.namespaceURI==c&&(g=f.prefix?f.prefix+":"+d:d,g==f.nodeName)){e=f;break}return e}var sd=document.implementation&&document.implementation.createDocument?ud:vd;function wd(b,c,d,e){b.setAttributeNS(c,d,e)}function xd(b,c,d,e){c?(c=b.ownerDocument.createNode(2,d,c),c.nodeValue=e,b.setAttributeNode(c)):b.setAttribute(d,e)}
var zd=document.implementation&&document.implementation.createDocument?wd:xd;function Ad(b){return(new DOMParser).parseFromString(b,"application/xml")}function Bd(b,c){return function(d,e){var f=b.call(void 0!==c?c:this,d,e);void 0!==f&&e[e.length-1].push(f)}}function Cd(b,c){return function(d,e){var f=b.call(void 0!==c?c:this,d,e);void 0!==f&&(e[e.length-1]=f)}}
function Dd(b){return function(c,d){var e=b.call(this,c,d);if(void 0!==e){var f=d[d.length-1],g=c.localName,h;g in f?h=f[g]:h=f[g]=[];h.push(e)}}}function N(b,c){return function(d,e){var f=b.call(this,d,e);void 0!==f&&(e[e.length-1][void 0!==c?c:d.localName]=f)}}function O(b){return function(c,d,e){b.call(this,c,d,e);e[e.length-1].node.appendChild(c)}}function Ed(b){var c,d;return function(e,f,g){if(void 0===c){c={};var h={};h[e.localName]=b;c[e.namespaceURI]=h;d=Fd(e.localName)}Gd(c,d,f,g)}}
function Fd(b){return function(c,d,e){c=d[d.length-1].node;d=b;void 0===d&&(d=e);e=void 0;e=c.namespaceURI;return ed(e,d)}}var Hd=Fd();function Id(b,c){for(var d=c.length,e=Array(d),f=0;f<d;++f)e[f]=b[c[f]];return e}function P(b,c,d){d=void 0!==d?d:{};var e,f;e=0;for(f=b.length;e<f;++e)d[b[e]]=c;return d}function Jd(b,c,d,e){for(c=c.firstElementChild;c;c=c.nextElementSibling){var f=b[c.namespaceURI];void 0!==f&&(f=f[c.localName],void 0!==f&&f.call(e,c,d))}}
function Q(b,c,d,e,f){e.push(b);Jd(c,d,e,f);return e.pop()}function Gd(b,c,d,e,f,g){for(var h=(void 0!==f?f:d).length,k,l,n=0;n<h;++n)k=d[n],void 0!==k&&(l=c.call(g,k,e,void 0!==f?f[n]:void 0),void 0!==l&&b[l.namespaceURI][l.localName].call(g,l,k,e))}function Kd(b,c,d,e,f,g,h){f.push(b);Gd(c,d,e,f,g,h);f.pop()};function Ld(){}Ld.prototype.read=function(b){return md(b)?this.b(b):pd(b)?this.a(b):"string"===typeof b?(b=Ad(b),this.b(b)):null};function Md(){};function Nd(b){b=fd(b);return Od(b)}function Od(b){if(b=/^\s*(true|1)|(false|0)\s*$/.exec(b))return void 0!==b[1]||!1}function Pd(b){b=fd(b);if(b=/^\s*(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(Z|(?:([+\-])(\d{2})(?::(\d{2}))?))\s*$/.exec(b)){var c=Date.UTC(parseInt(b[1],10),parseInt(b[2],10)-1,parseInt(b[3],10),parseInt(b[4],10),parseInt(b[5],10),parseInt(b[6],10))/1E3;if("Z"!=b[7]){var d="-"==b[8]?-1:1,c=c+60*d*parseInt(b[9],10);void 0!==b[10]&&(c+=3600*d*parseInt(b[10],10))}return c}}
function Qd(b){b=fd(b);return Rd(b)}function Rd(b){if(b=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(b))return parseFloat(b[1])}function Sd(b){b=fd(b);return Td(b)}function Td(b){if(b=/^\s*(\d+)\s*$/.exec(b))return parseInt(b[1],10)}function S(b){return fd(b).trim()}function Ud(b,c){Vd(b,c?"1":"0")}function Wd(b,c){b.appendChild(bd.createTextNode(c.toPrecision()))}function Xd(b,c){b.appendChild(bd.createTextNode(c.toString()))}function Vd(b,c){b.appendChild(bd.createTextNode(c))};function Yd(){}y(Yd,Ld);Yd.prototype.b=function(b){for(b=b.firstChild;b;b=b.nextSibling)if(1==b.nodeType)return this.a(b);return null};Yd.prototype.a=function(b){return(b=Q({},Zd,b,[]))?b:null};
var $d=[null,"http://www.opengis.net/ows/1.1"],Zd=P($d,{ServiceIdentification:N(function(b,c){return Q({},ae,b,c)}),ServiceProvider:N(function(b,c){return Q({},be,b,c)}),OperationsMetadata:N(function(b,c){return Q({},ce,b,c)})}),de=P($d,{DeliveryPoint:N(S),City:N(S),AdministrativeArea:N(S),PostalCode:N(S),Country:N(S),ElectronicMailAddress:N(S)}),ee=P($d,{Value:Dd(function(b){return S(b)})}),fe=P($d,{AllowedValues:N(function(b,c){return Q({},ee,b,c)})}),he=P($d,{Phone:N(function(b,c){return Q({},
ge,b,c)}),Address:N(function(b,c){return Q({},de,b,c)})}),je=P($d,{HTTP:N(function(b,c){return Q({},ie,b,c)})}),ie=P($d,{Get:Dd(function(b,c){var d=Vb(b);return d?Q({href:d},ke,b,c):void 0}),Post:void 0}),le=P($d,{DCP:N(function(b,c){return Q({},je,b,c)})}),ce=P($d,{Operation:function(b,c){var d=b.getAttribute("name"),e=Q({},le,b,c);e&&(c[c.length-1][d]=e)}}),ge=P($d,{Voice:N(S),Facsimile:N(S)}),ke=P($d,{Constraint:Dd(function(b,c){var d=b.getAttribute("name");return d?Q({name:d},fe,b,c):void 0})}),
me=P($d,{IndividualName:N(S),PositionName:N(S),ContactInfo:N(function(b,c){return Q({},he,b,c)})}),ae=P($d,{Title:N(S),ServiceTypeVersion:N(S),ServiceType:N(S)}),be=P($d,{ProviderName:N(S),ProviderSite:N(Vb),ServiceContact:N(function(b,c){return Q({},me,b,c)})});function ne(){this.f=new Yd}y(ne,Ld);ne.prototype.b=function(b){for(b=b.firstChild;b;b=b.nextSibling)if(1==b.nodeType)return this.a(b);return null};ne.prototype.a=function(b){var c=b.getAttribute("version").trim(),d=this.f.a(b);if(!d)return null;d.version=c;return(d=Q(d,oe,b,[]))?d:null};function pe(b){var c=S(b).split(" ");if(c&&2==c.length)return b=+c[0],c=+c[1],isNaN(b)||isNaN(c)?void 0:[b,c]}
var qe=[null,"http://www.opengis.net/wmts/1.0"],re=[null,"http://www.opengis.net/ows/1.1"],oe=P(qe,{Contents:N(function(b,c){return Q({},se,b,c)})}),se=P(qe,{Layer:Dd(function(b,c){return Q({},te,b,c)}),TileMatrixSet:Dd(function(b,c){return Q({},we,b,c)})}),te=P(qe,{Style:Dd(function(b,c){var d=Q({},xe,b,c);if(d){var e="true"===b.getAttribute("isDefault");d.isDefault=e;return d}}),Format:Dd(S),TileMatrixSetLink:Dd(function(b,c){return Q({},ye,b,c)}),Dimension:Dd(function(b,c){return Q({},ze,b,c)}),
ResourceURL:Dd(function(b){var c=b.getAttribute("format"),d=b.getAttribute("template");b=b.getAttribute("resourceType");var e={};c&&(e.format=c);d&&(e.template=d);b&&(e.resourceType=b);return e})},P(re,{Title:N(S),Abstract:N(S),WGS84BoundingBox:N(function(b,c){var d=Q([],Ae,b,c);return 2!=d.length?void 0:Db(d)}),Identifier:N(S)})),xe=P(qe,{LegendURL:Dd(function(b){var c={};c.format=b.getAttribute("format");c.href=Vb(b);return c})},P(re,{Title:N(S),Identifier:N(S)})),ye=P(qe,{TileMatrixSet:N(S)}),
ze=P(qe,{Default:N(S),Value:Dd(S)},P(re,{Identifier:N(S)})),Ae=P(re,{LowerCorner:Bd(pe),UpperCorner:Bd(pe)}),we=P(qe,{WellKnownScaleSet:N(S),TileMatrix:Dd(function(b,c){return Q({},Be,b,c)})},P(re,{SupportedCRS:N(S),Identifier:N(S)})),Be=P(qe,{TopLeftCorner:N(pe),ScaleDenominator:N(Qd),TileWidth:N(Sd),TileHeight:N(Sd),MatrixWidth:N(Sd),MatrixHeight:N(Sd)},P(re,{Identifier:N(S)}));function Ce(b,c,d){return Math.min(Math.max(b,c),d)}var De=function(){var b;"cosh"in Math?b=Math.cosh:b=function(b){b=Math.exp(b);return(b+1/b)/2};return b}();function Ee(b,c,d,e){this.b=b;this.a=c;this.c=d;this.f=e}Ee.prototype.contains=function(b){return Fe(this,b[1],b[2])};function Fe(b,c,d){return b.b<=c&&c<=b.a&&b.c<=d&&d<=b.f}Ee.prototype.equals=function(b){return this.b==b.b&&this.c==b.c&&this.a==b.a&&this.f==b.f};Ee.prototype.extend=function(b){b.b<this.b&&(this.b=b.b);b.a>this.a&&(this.a=b.a);b.c<this.c&&(this.c=b.c);b.f>this.f&&(this.f=b.f)};function Ge(b,c){return b.b<=c.a&&b.a>=c.b&&b.c<=c.f&&b.f>=c.c};/*

 Latitude/longitude spherical geodesy formulae taken from
 http://www.movable-type.co.uk/scripts/latlong.html
 Licensed under CC-BY-3.0.
*/
function He(b){this.radius=b}function Ie(b,c,d){var e=c[1]*Math.PI/180,f=d[1]*Math.PI/180,g=(f-e)/2;c=(d[0]-c[0])*Math.PI/180/2;e=Math.sin(g)*Math.sin(g)+Math.sin(c)*Math.sin(c)*Math.cos(e)*Math.cos(f);return 2*b.radius*Math.atan2(Math.sqrt(e),Math.sqrt(1-e))}
He.prototype.offset=function(b,c,d){var e=b[1]*Math.PI/180;c/=this.radius;var f=Math.asin(Math.sin(e)*Math.cos(c)+Math.cos(e)*Math.sin(c)*Math.cos(d));return[180*(b[0]*Math.PI/180+Math.atan2(Math.sin(d)*Math.sin(c)*Math.cos(e),Math.cos(c)-Math.sin(e)*Math.sin(f)))/Math.PI,180*f/Math.PI]};var Je=new He(6370997);var Ke={};Ke.degrees=2*Math.PI*Je.radius/360;Ke.ft=.3048;Ke.m=1;Ke["us-ft"]=1200/3937;
function Le(b){this.a=b.code;this.c=b.units;this.i=void 0!==b.extent?b.extent:null;this.g=void 0!==b.od?b.od:"enu";this.f=void 0!==b.global?b.global:!1;this.b=!(!this.f||!this.i);this.l=void 0!==b.lb?b.lb:this.s;this.j=null;this.u=b.lf;var c=Me,d=b.code,e=Ne||t.proj4;if("function"==typeof e&&void 0===c[d]){var f=e.defs(d);if(void 0!==f){void 0!==f.axis&&void 0===b.od&&(this.g=f.axis);void 0===b.lf&&(this.u=f.to_meter);void 0===b.units&&(this.c=f.units);var g,h;for(g in c)if(b=e.defs(g),void 0!==b)if(c=
Oe(g),b===f)Pe([c,this]);else{h=e(g,d);b=h.forward;h=h.inverse;var c=Oe(c),k=Oe(this);Qe(c,k,Re(b));Qe(k,c,Re(h))}}}}function Se(b){return b.a}Le.prototype.G=function(){return this.i};function Te(b){return b.u||Ke[b.c]}function Ue(b,c){b.i=c;b.b=!(!b.f||!c)}
Le.prototype.s=function(b,c){if("degrees"==this.c)return b;var d=Ve(this,Oe("EPSG:4326")),e=[c[0]-b/2,c[1],c[0]+b/2,c[1],c[0],c[1]-b/2,c[0],c[1]+b/2],e=d(e,e,2),d=Ie(Je,e.slice(0,2),e.slice(2,4)),e=Ie(Je,e.slice(4,6),e.slice(6,8)),e=(d+e)/2,d=Te(this);void 0!==d&&(e/=d);return e};Le.prototype.lb=function(b,c){return this.l(b,c)};var Me={},We={},Ne=null;function Pe(b){Xe(b);b.forEach(function(c){b.forEach(function(b){c!==b&&Qe(c,b,Ye)})})}function Ze(b){Me[b.a]=b;Qe(b,b,Ye)}
function Xe(b){var c=[];b.forEach(function(b){c.push(Ze(b))})}function $e(b){return b?"string"===typeof b?Oe(b):b:Oe("EPSG:3857")}function Qe(b,c,d){b=b.a;c=c.a;b in We||(We[b]={});We[b][c]=d}function Re(b){return function(c,d,e){var f=c.length;e=void 0!==e?e:2;d=void 0!==d?d:Array(f);var g,h;for(h=0;h<f;h+=e)for(g=b([c[h],c[h+1]]),d[h]=g[0],d[h+1]=g[1],g=e-1;2<=g;--g)d[h+g]=c[h+g];return d}}
function Oe(b){var c;if(b instanceof Le)c=b;else if("string"===typeof b){c=Me[b];var d=Ne||t.proj4;void 0===c&&"function"==typeof d&&void 0!==d.defs(b)&&(c=new Le({code:b}),Ze(c))}else c=null;return c}function af(b,c){if(b===c)return!0;var d=b.c===c.c;return b.a===c.a?d:Ve(b,c)===Ye&&d}function bf(b,c){var d=Oe(b),e=Oe(c);return Ve(d,e)}function Ve(b,c){var d=b.a,e=c.a,f;d in We&&e in We[d]&&(f=We[d][e]);void 0===f&&(f=cf);return f}
function cf(b,c){if(void 0!==c&&b!==c){for(var d=0,e=b.length;d<e;++d)c[d]=b[d];b=c}return b}function Ye(b,c){var d;if(void 0!==c){d=0;for(var e=b.length;d<e;++d)c[d]=b[d];d=c}else d=b.slice();return d}function df(b,c,d){return bf(c,d)(b,void 0,b.length)}
function ef(b,c,d){c=bf(c,d);b=[b[0],b[1],b[0],b[3],b[2],b[1],b[2],b[3]];c(b,b,2);d=[b[0],b[2],b[4],b[6]];var e=[b[1],b[3],b[5],b[7]];b=Math.min.apply(null,d);c=Math.min.apply(null,e);d=Math.max.apply(null,d);e=Math.max.apply(null,e);return Jb(b,c,d,e,void 0)};function ff(b){mb.call(this);this.Ka=Oe(b.projection);this.Da=void 0!==b.ca?b.ca:null;this.qa=b.ea;this.La=void 0!==b.state?b.state:"ready";this.C=void 0!==b.wrapX?b.wrapX:!1}y(ff,mb);ff.prototype.s=function(){return this.Da};ff.prototype.X=function(){return this.Ka};ff.prototype.T=function(){return this.La};function gf(b){mb.call(this);var c=Ua({},b);c.opacity=void 0!==b.opacity?b.opacity:1;c.visible=void 0!==b.visible?b.visible:!0;c.zIndex=void 0!==b.zIndex?b.zIndex:0;c.maxResolution=void 0!==b.bb?b.bb:Infinity;c.minResolution=void 0!==b.Sa?b.Sa:0;this.ka(c)}y(gf,mb);function hf(b){var c=b.get("opacity"),d=b.Md(),e=jf(b),f=b.G(),g=b.get("zIndex"),h=b.get("maxResolution"),k=b.get("minResolution");return{layer:b,opacity:Ce(c,0,1),lj:d,visible:e,kf:!0,extent:f,zIndex:g,bb:h,Sa:Math.max(k,0)}}
gf.prototype.G=function(){return this.get("extent")};function jf(b){return b.get("visible")}gf.prototype.Ta=function(b){this.set("visible",b)};function kf(b){var c=b||{};b=Ua({},c);delete b.layers;c=c.layers;gf.call(this,b);this.c=[];this.a={};I(this,L("layers"),this.ph,this);c?ea(c)&&(c=new pb(c.slice())):c=new pb;this.set("layers",c)}y(kf,gf);m=kf.prototype;m.Ic=function(){jf(this)&&this.b()};
m.ph=function(){this.c.forEach(G);this.c.length=0;var b=lf(this);this.c.push(I(b,"add",this.oh,this),I(b,"remove",this.qh,this));for(var c in this.a)this.a[c].forEach(G);Va(this.a);var b=b.a,d,e;c=0;for(d=b.length;c<d;c++)e=b[c],this.a[w(e).toString()]=[I(e,"propertychange",this.Ic,this),I(e,"change",this.Ic,this)];this.b()};m.oh=function(b){b=b.element;var c=w(b).toString();this.a[c]=[I(b,"propertychange",this.Ic,this),I(b,"change",this.Ic,this)];this.b()};
m.qh=function(b){b=w(b.element).toString();this.a[b].forEach(G);delete this.a[b];this.b()};function lf(b){return b.get("layers")}m.Kd=function(b){var c=void 0!==b?b:[],d=c.length;lf(this).forEach(function(b){b.Kd(c)});b=hf(this);var e,f;for(e=c.length;d<e;d++)f=c[d],f.opacity*=b.opacity,f.visible=f.visible&&b.visible,f.bb=Math.min(f.bb,b.bb),f.Sa=Math.max(f.Sa,b.Sa),void 0!==b.extent&&(f.extent=void 0!==f.extent?Tb(f.extent,b.extent):b.extent);return c};m.Md=function(){return"ready"};function mf(){};function nf(b,c,d,e,f,g){Sa.call(this,b,c);this.vectorContext=d;this.frameState=e;this.context=f;this.glContext=g}y(nf,Sa);function of(b){var c=Ua({},b);delete c.source;gf.call(this,c);this.g=this.c=this.a=null;b.map&&this.setMap(b.map);I(this,L("source"),this.Bh,this);pf(this,b.source?b.source:null)}y(of,gf);m=of.prototype;m.Kd=function(b){b=b?b:[];b.push(hf(this));return b};m.S=function(){return this.get("source")||null};m.Md=function(){var b=this.S();return b?b.T():"undefined"};m.ti=function(){this.b()};m.Bh=function(){this.g&&(G(this.g),this.g=null);var b=this.S();b&&(this.g=I(b,"change",this.ti,this));this.b()};
m.setMap=function(b){this.a&&(G(this.a),this.a=null);b||this.b();this.c&&(G(this.c),this.c=null);b&&(this.a=I(b,"precompose",function(b){var d=hf(this);d.kf=!1;d.zIndex=Infinity;b.frameState.Rd.push(d);b.frameState.Qd[w(this)]=d},this),this.c=I(this,"change",b.render,b),this.b())};function pf(b,c){b.set("source",c)};function qf(b){of.call(this,b?b:{})}y(qf,of);function rf(b){b=b?b:{};var c=Ua({},b);delete c.Ef;delete c.Vf;of.call(this,c);this.set("preload",void 0!==b.Ef?b.Ef:0);this.set("useInterimTilesOnError",void 0!==b.Vf?b.Vf:!0)}y(rf,of);var sf=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/;function tf(b,c){if(b)for(var d=b.split("&"),e=0;e<d.length;e++){var f=d[e].indexOf("="),g=null,h=null;0<=f?(g=d[e].substring(0,f),h=d[e].substring(f+1)):g=d[e];c(g,h?decodeURIComponent(h.replace(/\+/g," ")):"")}}
function uf(b){if(b[1]){var c=b[0],d=c.indexOf("#");0<=d&&(b.push(c.substr(d)),b[0]=c=c.substr(0,d));d=c.indexOf("?");0>d?b[1]="?":d==c.length-1&&(b[1]=void 0)}return b.join("")}function vf(b,c,d){if(ea(c))for(var e=0;e<c.length;e++)vf(b,String(c[e]),d);else null!=c&&d.push("&",b,""===c?"":"=",encodeURIComponent(String(c)))}function yf(b,c){for(var d in c)vf(d,c[d],b);return b}
function zf(b,c,d,e){for(var f=d.length;0<=(c=b.indexOf(d,c))&&c<e;){var g=b.charCodeAt(c-1);if(38==g||63==g)if(g=b.charCodeAt(c+f),!g||61==g||38==g||35==g)return c;c+=f+1}return-1}var Af=/#|$/,Bf=/[?&]($|#)/;function Cf(b,c,d){for(var e=b.search(Af),f=0,g,h=[];0<=(g=zf(b,f,c,e));)h.push(b.substring(f,g)),f=Math.min(b.indexOf("&",g)+1||e,e);h.push(b.substr(f));b=[h.join("").replace(Bf,"$1"),"&",c];null!=d&&b.push("=",encodeURIComponent(String(d)));return uf(b)}
function Df(b,c){var d=b.length-1;0<=d&&b.indexOf("/",d)==d&&(b=b.substr(0,b.length-1));0==c.lastIndexOf("/",0)&&(c=c.substr(1));return Ha(b,"/",c)};function Ef(b,c,d,e,f){ib.call(this);this.j=f;this.extent=b;this.c=d;this.resolution=c;this.state=e}y(Ef,ib);function Ff(b){b.B("change")}Ef.prototype.s=function(){return this.j};Ef.prototype.G=function(){return this.extent};Ef.prototype.R=function(){return this.resolution};Ef.prototype.T=function(){return this.state};function Gf(b,c,d,e,f,g,h){Ef.call(this,b,c,d,0,e);this.i=f;this.a=new Image;null!==g&&(this.a.crossOrigin=g);this.f={};this.b=null;this.state=0;this.g=h}y(Gf,Ef);Gf.prototype.Nc=function(b){if(void 0!==b){var c;b=w(b);if(b in this.f)return this.f[b];Wa(this.f)?c=this.a:c=this.a.cloneNode(!1);return this.f[b]=c}return this.a};Gf.prototype.u=function(){this.state=3;this.b.forEach(G);this.b=null;Ff(this)};
Gf.prototype.l=function(){void 0===this.resolution&&(this.resolution=Qb(this.extent)/this.a.height);this.state=2;this.b.forEach(G);this.b=null;Ff(this)};Gf.prototype.load=function(){0==this.state&&(this.state=1,Ff(this),this.b=[I(this.a,"error",this.u,this,!0),I(this.a,"load",this.l,this,!0)],this.g(this,this.i))};function Hf(b,c){var d=document.createElement("CANVAS");b&&(d.width=b);c&&(d.height=c);return d.getContext("2d")};var If=!((Zb("Chrome")||Zb("CriOS"))&&!Zb("Opera")&&!Zb("OPR")&&!Zb("Edge"))||Zb("iPhone")&&!Zb("iPod")&&!Zb("iPad")||Zb("iPad")||Zb("iPod");function Jf(b,c,d,e){var f=df(d,c,b);d=c.lb(e,d);c=Te(c);void 0!==c&&(d*=c);c=Te(b);void 0!==c&&(d/=c);b=b.lb(d,f)/d;isFinite(b)&&0<b&&(d/=b);return d}function Kf(b,c,d,e){b=d-b;c=e-c;var f=Math.sqrt(b*b+c*c);return[Math.round(d+b/f),Math.round(e+c/f)]}
function Lf(b,c,d,e,f,g,h,k,l,n,q){var p=Hf(Math.round(d*b),Math.round(d*c));if(0===l.length)return p.canvas;p.scale(d,d);var r=Eb();l.forEach(function(b){Lb(r,b.extent)});var u=Hf(Math.round(d*Pb(r)/e),Math.round(d*Qb(r)/e)),v=d/e;l.forEach(function(b){u.drawImage(b.image,n,n,b.image.width-2*n,b.image.height-2*n,(b.extent[0]-r[0])*v,-(b.extent[3]-r[3])*v,Pb(b.extent)*v,Qb(b.extent)*v)});var z=[h[0],h[3]];k.c.forEach(function(b){var c=b.source,f=b.target,h=c[1][0],k=c[1][1],l=c[2][0],n=c[2][1];b=
(f[0][0]-z[0])/g;var q=-(f[0][1]-z[1])/g,v=(f[1][0]-z[0])/g,K=-(f[1][1]-z[1])/g,Z=(f[2][0]-z[0])/g,X=-(f[2][1]-z[1])/g,f=c[0][0],c=c[0][1],h=h-f,k=k-c,l=l-f,n=n-c;a:{h=[[h,k,0,0,v-b],[l,n,0,0,Z-b],[0,0,h,k,K-q],[0,0,l,n,X-q]];k=h.length;for(l=0;l<k;l++){for(var n=l,W=Math.abs(h[l][l]),J=l+1;J<k;J++){var aa=Math.abs(h[J][l]);aa>W&&(W=aa,n=J)}if(0===W){h=null;break a}W=h[n];h[n]=h[l];h[l]=W;for(n=l+1;n<k;n++)for(W=-h[n][l]/h[l][l],J=l;J<k+1;J++)h[n][J]=l==J?0:h[n][J]+W*h[l][J]}l=Array(k);for(n=k-1;0<=
n;n--)for(l[n]=h[n][k]/h[n][n],W=n-1;0<=W;W--)h[W][k]-=h[W][n]*l[n];h=l}h&&(p.save(),p.beginPath(),If?(l=(b+v+Z)/3,n=(q+K+X)/3,k=Kf(l,n,b,q),v=Kf(l,n,v,K),Z=Kf(l,n,Z,X),p.moveTo(k[0],k[1]),p.lineTo(v[0],v[1]),p.lineTo(Z[0],Z[1])):(p.moveTo(b,q),p.lineTo(v,K),p.lineTo(Z,X)),p.closePath(),p.clip(),p.transform(h[0],h[2],h[1],h[3],b,q),p.translate(r[0]-f,r[3]-c),p.scale(e/d,-e/d),p.drawImage(u.canvas,0,0),p.restore())});q&&(p.save(),p.strokeStyle="black",p.lineWidth=1,k.c.forEach(function(b){var c=b.target;
b=(c[0][0]-z[0])/g;var d=-(c[0][1]-z[1])/g,e=(c[1][0]-z[0])/g,f=-(c[1][1]-z[1])/g,h=(c[2][0]-z[0])/g,c=-(c[2][1]-z[1])/g;p.beginPath();p.moveTo(b,d);p.lineTo(e,f);p.lineTo(h,c);p.closePath();p.stroke()}),p.restore());return p.canvas};function Mf(b,c,d,e,f){this.f=b;this.g=c;var g={},h=bf(this.g,this.f);this.b=function(b){var c=b[0]+"/"+b[1];g[c]||(g[c]=h(b));return g[c]};this.i=e;this.s=f*f;this.c=[];this.u=!1;this.l=this.f.b&&!!e&&!!this.f.G()&&Pb(e)==Pb(this.f.G());this.a=this.f.G()?Pb(this.f.G()):null;this.j=this.g.G()?Pb(this.g.G()):null;b=[d[0],d[3]];c=[d[2],d[3]];e=[d[2],d[1]];d=[d[0],d[1]];f=this.b(b);var k=this.b(c),l=this.b(e),n=this.b(d);Nf(this,b,c,e,d,f,k,l,n,10);if(this.u){var q=Infinity;this.c.forEach(function(b){q=
Math.min(q,b.source[0][0],b.source[1][0],b.source[2][0])});this.c.forEach(function(b){if(Math.max(b.source[0][0],b.source[1][0],b.source[2][0])-q>this.a/2){var c=[[b.source[0][0],b.source[0][1]],[b.source[1][0],b.source[1][1]],[b.source[2][0],b.source[2][1]]];c[0][0]-q>this.a/2&&(c[0][0]-=this.a);c[1][0]-q>this.a/2&&(c[1][0]-=this.a);c[2][0]-q>this.a/2&&(c[2][0]-=this.a);Math.max(c[0][0],c[1][0],c[2][0])-Math.min(c[0][0],c[1][0],c[2][0])<this.a/2&&(b.source=c)}},this)}g={}}
function Nf(b,c,d,e,f,g,h,k,l,n){var q=Db([g,h,k,l]),p=b.a?Pb(q)/b.a:null,r=b.f.b&&.5<p&&1>p,u=!1;if(0<n){if(b.g.f&&b.j)var v=Db([c,d,e,f]),u=u|.25<Pb(v)/b.j;!r&&b.f.f&&p&&(u|=.25<p)}if(u||!b.i||Ub(q,b.i)){if(!(u||isFinite(g[0])&&isFinite(g[1])&&isFinite(h[0])&&isFinite(h[1])&&isFinite(k[0])&&isFinite(k[1])&&isFinite(l[0])&&isFinite(l[1])))if(0<n)u=!0;else return;if(0<n&&(u||(p=b.b([(c[0]+e[0])/2,(c[1]+e[1])/2]),q=r?(yb(g[0],b.a)+yb(k[0],b.a))/2-yb(p[0],b.a):(g[0]+k[0])/2-p[0],p=(g[1]+k[1])/2-p[1],
u=q*q+p*p>b.s),u)){Math.abs(c[0]-e[0])<=Math.abs(c[1]-e[1])?(r=[(d[0]+e[0])/2,(d[1]+e[1])/2],q=b.b(r),p=[(f[0]+c[0])/2,(f[1]+c[1])/2],u=b.b(p),Nf(b,c,d,r,p,g,h,q,u,n-1),Nf(b,p,r,e,f,u,q,k,l,n-1)):(r=[(c[0]+d[0])/2,(c[1]+d[1])/2],q=b.b(r),p=[(e[0]+f[0])/2,(e[1]+f[1])/2],u=b.b(p),Nf(b,c,r,p,f,g,q,u,l,n-1),Nf(b,r,d,e,p,q,h,k,u,n-1));return}if(r){if(!b.l)return;b.u=!0}b.c.push({source:[g,k,l],target:[c,e,f]});b.c.push({source:[g,h,k],target:[c,d,e]})}}
function Of(b){var c=Eb();b.c.forEach(function(b){b=b.source;Fb(c,b[0]);Fb(c,b[1]);Fb(c,b[2])});return c};function Pf(b,c,d,e,f,g){this.l=c;this.u=b.G();var h=c.G(),k=h?Tb(d,h):d,h=Jf(b,c,Rb(k),e);this.g=new Mf(b,c,k,this.u,.5*h);this.b=e;this.a=d;b=Of(this.g);this.i=(this.Ca=g(b,h,f))?this.Ca.c:1;this.ic=this.f=null;f=2;g=[];this.Ca&&(f=0,g=this.Ca.s());Ef.call(this,d,e,this.i,f,g)}y(Pf,Ef);m=Pf.prototype;m.L=function(){1==this.state&&(G(this.ic),this.ic=null);Pf.U.L.call(this)};m.Nc=function(){return this.f};m.X=function(){return this.l};
m.gc=function(){var b=this.Ca.T();2==b&&(this.f=Lf(Pb(this.a)/this.b,Qb(this.a)/this.b,this.i,this.Ca.R(),0,this.b,this.a,this.g,[{extent:this.Ca.G(),image:this.Ca.Nc()}],0));this.state=b;Ff(this)};m.load=function(){if(0==this.state){this.state=1;Ff(this);var b=this.Ca.T();2==b||3==b?this.gc():(this.ic=I(this.Ca,"change",function(){var b=this.Ca.T();if(2==b||3==b)G(this.ic),this.ic=null,this.gc()},this),this.Ca.load())}};function Qf(b){ff.call(this,{ca:b.ca,extent:b.extent,ea:b.ea,projection:b.projection,state:b.state});this.v=void 0!==b.Ba?b.Ba:null;this.c=null;this.O=0}y(Qf,ff);function Rf(b,c,d,e,f){var g=b.X();if(g&&f&&!af(g,f)){if(b.c){if(b.O==b.f&&af(b.c.X(),f)&&b.c.R()==d&&b.c.c==e&&Kb(b.c.G(),c))return b.c;b.c.Db();b.c=null}b.c=new Pf(g,f,c,d,e,function(b,c,d){return Sf(this,b,c,d,g)}.bind(b));b.O=b.f;return b.c}g&&(f=g);return Sf(b,c,d,e,f)}
Qf.prototype.V=function(b){b=b.target;switch(b.T()){case 1:this.B(new Tf(Uf,b));break;case 2:this.B(new Tf(Vf,b));break;case 3:this.B(new Tf(Wf,b))}};function Xf(b,c){b.Nc().src=c}function Tf(b,c){Sa.call(this,b);this.image=c}y(Tf,Sa);var Uf="imageloadstart",Vf="imageloadend",Wf="imageloaderror";function Yf(b){b=b||{};Qf.call(this,{ca:b.ca,ea:b.ea,projection:b.projection,Ba:b.Ba});this.ha=void 0!==b.crossOrigin?b.crossOrigin:null;this.l=b.url;this.sa=void 0!==b.Lh?b.Lh:Xf;this.a=b.params||{};this.j=!0;Zf(this);this.I=b.serverType;this.ra=void 0!==b.Hh?b.Hh:!0;this.g=null;this.A=[0,0];this.D=0;this.i=void 0!==b.ratio?b.ratio:1.5}y(Yf,Qf);var $f=[101,101];
function ag(b,c,d,e,f){if(void 0!==b.l){var g=Sb(c,d,0,$f),h={SERVICE:"WMS",VERSION:"1.3.0",REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:b.a.LAYERS};Ua(h,b.a,f);f=Math.floor((g[3]-c[1])/d);h[b.j?"I":"X"]=Math.floor((c[0]-g[0])/d);h[b.j?"J":"Y"]=f;return bg(b,g,$f,1,Oe(e),h)}}
function Sf(b,c,d,e,f){if(void 0===b.l)return null;b.v&&(d=Sc(b.v,d,0),d=b.v[d]);1==e||b.ra&&void 0!==b.I||(e=1);c=c.slice();var g=(c[0]+c[2])/2,h=(c[1]+c[3])/2,k=d/e,l=Pb(c)/k,k=Qb(c)/k,n=b.g;if(n&&b.D==b.f&&n.R()==d&&n.c==e&&Ib(n.G(),c))return n;if(1!=b.i){var n=b.i*Pb(c)/2,q=b.i*Qb(c)/2;c[0]=g-n;c[1]=h-q;c[2]=g+n;c[3]=h+q}g={SERVICE:"WMS",VERSION:"1.3.0",REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};Ua(g,b.a);b.A[0]=Math.ceil(l*b.i);b.A[1]=Math.ceil(k*b.i);f=bg(b,c,b.A,e,f,g);b.g=new Gf(c,
d,e,b.s(),f,b.ha,b.sa);b.D=b.f;I(b.g,"change",b.V,b);return b.g}
function bg(b,c,d,e,f,g){g[b.j?"CRS":"SRS"]=f.a;"STYLES"in b.a||(g.STYLES=new String(""));if(1!=e)switch(b.I){case "geoserver":e=90*e+.5|0;g.FORMAT_OPTIONS="FORMAT_OPTIONS"in g?g.FORMAT_OPTIONS+(";dpi:"+e):"dpi:"+e;break;case "mapserver":g.MAP_RESOLUTION=90*e;break;case "carmentaserver":case "qgis":g.DPI=90*e}g.WIDTH=d[0];g.HEIGHT=d[1];d=f.g;var h;b.j&&"ne"==d.substr(0,2)?h=[c[1],c[0],c[3],c[2]]:h=c;g.BBOX=h.join(",");return uf(yf([b.l],g))}function Zf(b){b.j=0<=Ia(b.a.VERSION||"1.3.0","1.3")};function cg(b,c){var d=/\{z\}/g,e=/\{x\}/g,f=/\{y\}/g,g=/\{-y\}/g;return function(h){if(h)return b.replace(d,h[0].toString()).replace(e,h[1].toString()).replace(f,function(){return(-h[2]-1).toString()}).replace(g,function(){var b=c.a?c.a[h[0]]:null;return(b.f-b.c+1+h[2]).toString()})}}function dg(b,c){for(var d=b.length,e=Array(d),f=0;f<d;++f)e[f]=cg(b[f],c);return eg(e)}function eg(b){return 1===b.length?b[0]:function(c,d,e){if(c)return b[yb((c[1]<<c[0])+c[2],b.length)](c,d,e)}}function fg(){}
function gg(b){var c=[],d=/\{(\d)-(\d)\}/.exec(b)||/\{([a-z])-([a-z])\}/.exec(b);if(d){var e=d[2].charCodeAt(0),f;for(f=d[1].charCodeAt(0);f<=e;++f)c.push(b.replace(d[0],String.fromCharCode(f)))}else c.push(b);return c};function hg(b,c){ib.call(this);this.oa=b;this.state=c;this.a=null;this.key=""}y(hg,ib);function ig(b){b.B("change")}hg.prototype.bc=function(){return w(this).toString()};hg.prototype.T=function(){return this.state};function jg(b,c,d,e,f){hg.call(this,b,c);this.g=d;this.b=new Image;null!==e&&(this.b.crossOrigin=e);this.f={};this.c=null;this.i=f}y(jg,hg);m=jg.prototype;m.L=function(){1==this.state&&kg(this);this.a&&hb(this.a);jg.U.L.call(this)};m.Oc=function(b){if(void 0!==b){var c=w(b);if(c in this.f)return this.f[c];b=Wa(this.f)?this.b:this.b.cloneNode(!1);return this.f[c]=b}return this.b};m.bc=function(){return this.g};m.pi=function(){this.state=3;kg(this);ig(this)};
m.ri=function(){this.state=this.b.naturalWidth&&this.b.naturalHeight?2:4;kg(this);ig(this)};m.load=function(){0==this.state&&(this.state=1,ig(this),this.c=[I(this.b,"error",this.pi,this,!0),I(this.b,"load",this.ri,this,!0)],this.i(this,this.g))};function kg(b){b.c.forEach(G);b.c=null};function lg(){this.c=0;this.f={};this.a=this.b=null}m=lg.prototype;m.clear=function(){this.c=0;this.f={};this.a=this.b=null};m.forEach=function(b,c){for(var d=this.b;d;)b.call(c,d.wb,d.Od,this),d=d.Ga};m.get=function(b){b=this.f[b];if(b===this.a)return b.wb;b===this.b?(this.b=this.b.Ga,this.b.cb=null):(b.Ga.cb=b.cb,b.cb.Ga=b.Ga);b.Ga=null;b.cb=this.a;this.a=this.a.Ga=b;return b.wb};m.Oa=function(){return this.c};m.ya=function(){var b=Array(this.c),c=0,d;for(d=this.a;d;d=d.cb)b[c++]=d.Od;return b};
m.za=function(){var b=Array(this.c),c=0,d;for(d=this.a;d;d=d.cb)b[c++]=d.wb;return b};m.pop=function(){var b=this.b;delete this.f[b.Od];b.Ga&&(b.Ga.cb=null);this.b=b.Ga;this.b||(this.a=null);--this.c;return b.wb};m.replace=function(b,c){this.get(b);this.f[b].wb=c};m.set=function(b,c){var d={Od:b,Ga:null,cb:this.a,wb:c};this.a?this.a.Ga=d:this.b=d;this.a=d;this.f[b]=d;++this.c};function mg(b){lg.call(this);this.g=void 0!==b?b:2048}y(mg,lg);function ng(b){return b.Oa()>b.g}function og(b,c){for(var d,e;ng(b)&&!(d=b.b.wb,e=d.oa[0].toString(),e in c&&c[e].contains(d.oa));)b.pop().Db()};function pg(b,c,d,e,f,g,h,k,l,n,q){hg.call(this,f,0);this.A=void 0!==q?q:!1;this.v=h;this.s=k;this.c=null;this.f={};this.g=c;this.j=e;this.u=g?g:f;this.b=[];this.Pb=null;this.i=0;g=qg(e,this.u);k=this.j.G();f=this.g.G();g=k?Tb(g,k):g;if(0===Nb(g))this.state=4;else if((k=b.G())&&(f?f=Tb(f,k):f=k),e=e.R(this.u[0]),e=Jf(b,d,Rb(g),e),!isFinite(e)||0>=e)this.state=4;else if(this.l=new Mf(b,d,g,f,e*(void 0!==n?n:.5)),0===this.l.c.length)this.state=4;else if(this.i=rg(c,e),d=Of(this.l),f&&(b.b?(d[1]=Ce(d[1],
f[1],f[3]),d[3]=Ce(d[3],f[1],f[3])):d=Tb(d,f)),Nb(d))if(b=sg(c,d,this.i),100>(b.a-b.b+1)*(b.f-b.c+1)){for(c=b.b;c<=b.a;c++)for(d=b.c;d<=b.f;d++)(n=l(this.i,c,d,h))&&this.b.push(n);0===this.b.length&&(this.state=4)}else this.state=3;else this.state=4}y(pg,hg);pg.prototype.L=function(){1==this.state&&(this.Pb.forEach(G),this.Pb=null);pg.U.L.call(this)};pg.prototype.Oc=function(b){if(void 0!==b){var c=w(b);if(c in this.f)return this.f[c];b=Wa(this.f)?this.c:this.c.cloneNode(!1);return this.f[c]=b}return this.c};
pg.prototype.gc=function(){var b=[];this.b.forEach(function(c){c&&2==c.T()&&b.push({extent:qg(this.g,c.oa),image:c.Oc()})},this);this.b.length=0;if(0===b.length)this.state=3;else{var c=this.u[0],d=tg(this.j,c),e=ha(d)?d:d[0],d=ha(d)?d:d[1],c=this.j.R(c),f=this.g.R(this.i),g=qg(this.j,this.u);this.c=Lf(e,d,this.v,f,this.g.G(),c,g,this.l,b,this.s,this.A);this.state=2}ig(this)};
pg.prototype.load=function(){if(0==this.state){this.state=1;ig(this);var b=0;this.Pb=[];this.b.forEach(function(c){var d=c.T();if(0==d||1==d){b++;var e;e=I(c,"change",function(){var d=c.T();if(2==d||3==d||4==d)G(e),b--,0===b&&(this.Pb.forEach(G),this.Pb=null,this.gc())},this);this.Pb.push(e)}},this);this.b.forEach(function(b){0==b.T()&&b.load()});0===b&&t.setTimeout(this.gc.bind(this),0)}};function ug(b){this.Fa=void 0!==b.Fa?b.Fa:0;this.f=b.Ba;this.Ra=this.f.length-1;this.b=void 0!==b.origin?b.origin:null;this.g=null;void 0!==b.Qc&&(this.g=b.Qc);var c=b.extent;void 0===c||this.b||this.g||(this.b=[c[0],c[3]]);this.i=null;void 0!==b.$c&&(this.i=b.$c);this.j=void 0!==b.tileSize?b.tileSize:this.i?null:256;this.l=void 0!==c?c:null;this.a=null;void 0!==b.sizes?this.a=b.sizes.map(function(b){return new Ee(Math.min(0,b[0]),Math.max(b[0]-1,-1),Math.min(0,b[1]),Math.max(b[1]-1,-1))},this):c&&
vg(this,c);this.c=[0,0]}var wg=[0,0,0];function xg(b,c,d,e,f,g){g=qg(b,c,g);for(c=c[0]-1;c>=b.Fa;){if(d.call(e,c,sg(b,g,c,f)))return!0;--c}return!1}ug.prototype.G=function(){return this.l};ug.prototype.Pa=function(b){return this.b?this.b:this.g[b]};ug.prototype.R=function(b){return this.f[b]};function yg(b,c,d,e){return c[0]<b.Ra?(e=qg(b,c,e),sg(b,e,c[0]+1,d)):null}
function zg(b,c,d,e){Ag(b,c[0],c[1],d,!1,wg);var f=wg[1],g=wg[2];Ag(b,c[2],c[3],d,!0,wg);b=wg[1];c=wg[2];void 0!==e?(e.b=f,e.a=b,e.c=g,e.f=c):e=new Ee(f,b,g,c);return e}function sg(b,c,d,e){d=b.R(d);return zg(b,c,d,e)}function Bg(b,c){var d=b.Pa(c[0]),e=b.R(c[0]),f=Bb(tg(b,c[0]),b.c);return[d[0]+(c[1]+.5)*f[0]*e,d[1]+(c[2]+.5)*f[1]*e]}function qg(b,c,d){var e=b.Pa(c[0]),f=b.R(c[0]);b=Bb(tg(b,c[0]),b.c);var g=e[0]+c[1]*b[0]*f;c=e[1]+c[2]*b[1]*f;return Jb(g,c,g+b[0]*f,c+b[1]*f,d)}
function Ag(b,c,d,e,f,g){var h=rg(b,e),k=e/b.R(h),l=b.Pa(h);b=Bb(tg(b,h),b.c);c=k*Math.floor((c-l[0])/e+(f?.5:0))/b[0];d=k*Math.floor((d-l[1])/e+(f?0:.5))/b[1];f?(c=Math.ceil(c)-1,d=Math.ceil(d)-1):(c=Math.floor(c),d=Math.floor(d));f=c;void 0!==g?(g[0]=h,g[1]=f,g[2]=d):g=[h,f,d];return g}function Cg(b,c,d){d=b.R(d);return Ag(b,c[0],c[1],d,!1,void 0)}function tg(b,c){return b.j?b.j:b.i[c]}function rg(b,c){var d=Sc(b.f,c,0);return Ce(d,b.Fa,b.Ra)}
function vg(b,c){for(var d=b.f.length,e=Array(d),f=b.Fa;f<d;++f)e[f]=sg(b,c,f);b.a=e}function Dg(b){var c=b.j;if(!c){for(var c=Eg(b),d=Qb(c),e=Pb(c),f=Bb(256),d=Math.max(e/f[0],d/f[1]),e=Array(43),f=0;43>f;++f)e[f]=d/Math.pow(2,f);c=new ug({extent:c,origin:[c[0],c[3]],Ba:e,tileSize:void 0});b.j=c}return c}function Eg(b){b=Oe(b);var c=b.G();c||(b=180*Ke.degrees/Te(b),c=Jb(-b,-b,b,b));return c};function Fg(b){ff.call(this,{ca:b.ca,extent:b.extent,ea:b.ea,projection:b.projection,state:b.state,wrapX:b.wrapX});this.Ma=void 0!==b.dc?b.dc:!1;this.D=void 0!==b.ub?b.ub:1;this.pa=void 0!==b.pa?b.pa:null;this.c=new mg(b.Ke);this.I=[0,0]}y(Fg,ff);m=Fg.prototype;m.sf=function(){return ng(this.c)};m.tf=function(b,c){var d=this.$b(b);d&&og(d,c)};
function Gg(b,c,d,e,f){c=b.$b(c);if(!c)return!1;for(var g=!0,h,k,l=e.b;l<=e.a;++l)for(var n=e.c;n<=e.f;++n)h=b.Ec(d,l,n),k=!1,c.f.hasOwnProperty(h)&&(h=c.get(h),(k=2===h.T())&&(k=!1!==f(h))),k||(g=!1);return g}m.Ue=function(){return 0};m.Xe=function(){return""};m.Ec=function(b,c,d){return b+"/"+c+"/"+d};m.Fc=function(){return this.Ma};m.Za=function(b){return this.pa?this.pa:Dg(b)};m.$b=function(b){var c=this.X();return c&&!af(c,b)?null:this.c};
function Jg(b,c,d){var e=void 0!==d?d:b.X();d=b.Za(e);if(b.C&&e.f){var f=c;c=f[0];b=Bg(d,f);var e=Eg(e),g=b[0],h=b[1];e[0]<=g&&g<=e[2]&&e[1]<=h&&h<=e[3]?c=f:(f=Pb(e),b[0]+=f*Math.ceil((e[0]-b[0])/f),c=Cg(d,b,c))}e=c[0];b=c[1];f=c[2];d=d.Fa>e||e>d.Ra?!1:(d=(g=d.G())?sg(d,g,e):d.a?d.a[e]:null)?Fe(d,b,f):!0;return d?c:null}m.Wf=Md;function Kg(b,c){Sa.call(this,b);this.tile=c}y(Kg,Sa);function Lg(b){Fg.call(this,{ca:b.ca,Ke:b.Ke,extent:b.extent,ea:b.ea,dc:b.dc,projection:b.projection,state:b.state,pa:b.pa,ub:b.ub,wrapX:b.wrapX});this.tb=b.tb;this.vb=this.i?this.i.bind(this):fg;this.Va=null;if(b.Va){var c=b.Va;this.Va=c;Mg(this,this.i?this.i.bind(this):dg(c,this.pa))}else b.url&&(c=this.Va=gg(b.url),Mg(this,this.i?this.i.bind(this):dg(c,this.pa)));b.vb&&Mg(this,b.vb)}y(Lg,Fg);
Lg.prototype.V=function(b){b=b.target;switch(b.T()){case 1:this.B(new Kg("tileloadstart",b));break;case 2:this.B(new Kg("tileloadend",b));break;case 3:this.B(new Kg("tileloaderror",b))}};function Mg(b,c){b.c.clear();b.vb=c;b.b()}Lg.prototype.Wf=function(b,c,d){b=this.Ec(b,c,d);this.c.f.hasOwnProperty(b)&&this.c.get(b)};function Ng(b){Lg.call(this,{ca:b.ca,extent:b.extent,ea:b.ea,dc:b.dc,projection:b.projection,state:b.state,pa:b.pa,tb:b.tb?b.tb:Og,ub:b.ub,vb:b.vb,url:b.url,Va:b.Va,wrapX:b.wrapX});this.crossOrigin=void 0!==b.crossOrigin?b.crossOrigin:null;this.kc=void 0!==b.kc?b.kc:jg;this.g={};this.v={};this.Wa=b.Mf}y(Ng,Lg);m=Ng.prototype;m.sf=function(){if(ng(this.c))return!0;for(var b in this.g)if(ng(this.g[b]))return!0;return!1};
m.tf=function(b,c){var d=this.$b(b);og(this.c,this.c==d?c:{});for(var e in this.g){var f=this.g[e];og(f,f==d?c:{})}};m.Ue=function(b){return this.X()&&b&&this.X(),0};m.Fc=function(b){return this.X()&&b&&!af(this.X(),b)?!1:Ng.U.Fc.call(this,b)};m.Za=function(b){var c=this.X();return!this.pa||c&&!af(c,b)?(c=w(b).toString(),c in this.v||(this.v[c]=Dg(b)),this.v[c]):this.pa};m.$b=function(b){var c=this.X();if(!c||af(c,b))return this.c;b=w(b).toString();b in this.g||(this.g[b]=new mg);return this.g[b]};
function Pg(b,c,d,e,f,g,h){c=[c,d,e];f=(d=Jg(b,c,g))?b.vb(d,f,g):void 0;f=new b.kc(c,void 0!==f?0:4,void 0!==f?f:"",b.crossOrigin,b.tb);f.key=h;I(f,"change",b.V,b);return f}function Qg(b,c,d,e,f,g){if(b.X()&&g&&!af(b.X(),g)){f=b.$b(g);d=[c,d,e];c=b.Ec.apply(b,d);if(f.f.hasOwnProperty(c))return f.get(c);var h=b.X();e=b.Za(h);var k=b.Za(g),l=Jg(b,d,g);b=new pg(h,e,g,k,d,l,b.D,0,function(b,c,d,e){return Rg(this,b,c,d,e,h)}.bind(b),b.Wa,!1);f.set(c,b);return b}return Rg(b,c,d,e,f,g)}
function Rg(b,c,d,e,f,g){var h=null,k=b.Ec(c,d,e),l=b.Xe();if(b.c.f.hasOwnProperty(k)){if(h=b.c.get(k),h.key!=l){var n=h;h.a&&h.a.key==l?(h=h.a,2==n.T()&&(h.a=n)):(h=Pg(b,c,d,e,f,g,l),2==n.T()?h.a=n:n.a&&2==n.a.T()&&(h.a=n.a,n.a=null));h.a&&(h.a.a=null);b.c.replace(k,h)}}else h=Pg(b,c,d,e,f,g,l),b.c.set(k,h);return h}function Og(b,c){b.Oc().src=c};function Sg(b){this.u=b.Td;ug.call(this,{extent:b.extent,origin:b.origin,Qc:b.Qc,Ba:b.Ba,tileSize:b.tileSize,$c:b.$c,sizes:b.sizes})}y(Sg,ug);
function Tg(b,c){var d=[],e=[],f=[],g=[],h=[],k;k=Oe(b.SupportedCRS.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"));var l=Te(k),n="ne"==k.g.substr(0,2);b.TileMatrix.sort(function(b,c){return c.ScaleDenominator-b.ScaleDenominator});b.TileMatrix.forEach(function(b){e.push(b.Identifier);var c=2.8E-4*b.ScaleDenominator/l,k=b.TileWidth,u=b.TileHeight;n?f.push([b.TopLeftCorner[1],b.TopLeftCorner[0]]):f.push(b.TopLeftCorner);d.push(c);g.push(k==u?k:[k,u]);h.push([b.MatrixWidth,-b.MatrixHeight])});
return new Sg({extent:c,Qc:f,Ba:d,Td:e,$c:g,sizes:h})};function Ug(b){function c(b){b="KVP"==e?uf(yf([b],g)):b.replace(/\{(\w+?)\}/g,function(b,c){return c.toLowerCase()in g?g[c.toLowerCase()]:b});return function(c){if(c){var d={TileMatrix:f.u[c[0]],TileCol:c[1],TileRow:-c[2]-1};Ua(d,h);c=b;return c="KVP"==e?uf(yf([c],d)):c.replace(/\{(\w+?)\}/g,function(b,c){return d[c]})}}}this.sa=void 0!==b.version?b.version:"1.0.0";this.ha=void 0!==b.format?b.format:"image/jpeg";this.j=void 0!==b.dimensions?b.dimensions:{};this.l="";Vg(this);this.A=b.layer;this.O=
b.matrixSet;this.ra=b.style;var d=b.Va;void 0===d&&void 0!==b.url&&(d=gg(b.url));var e=this.Xa=void 0!==b.requestEncoding?b.requestEncoding:"KVP",f=b.pa,g={layer:this.A,style:this.ra,tilematrixset:this.O};"KVP"==e&&Ua(g,{Service:"WMTS",Request:"GetTile",Version:this.sa,Format:this.ha});var h=this.j,k=d&&0<d.length?eg(d.map(c)):fg;Ng.call(this,{ca:b.ca,crossOrigin:b.crossOrigin,ea:b.ea,projection:b.projection,Mf:b.Mf,kc:b.kc,pa:f,tb:b.tb,ub:b.ub,vb:k,Va:d,wrapX:void 0!==b.wrapX?b.wrapX:!1})}y(Ug,Ng);
Ug.prototype.Xe=function(){return this.l};Ug.prototype.ma=function(){return this.A};function Vg(b){var c=0,d=[],e;for(e in b.j)d[c++]=e+"-"+b.j[e];b.l=d.join("/")}
function Wg(b,c){var d=Vc(b.Contents.Layer,function(b){return b.Identifier==c.layer}),e=b.Contents.TileMatrixSet,f,g;f=1<d.TileMatrixSetLink.length?"projection"in c?Zc(d.TileMatrixSetLink,function(b){return Vc(e,function(c){return c.Identifier==b.TileMatrixSet}).SupportedCRS.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3")==c.projection}):Zc(d.TileMatrixSetLink,function(b){return b.TileMatrixSet==c.matrixSet}):0;0>f&&(f=0);g=d.TileMatrixSetLink[f].TileMatrixSet;var h=d.Format[0];"format"in c&&
(h=c.format);f=Zc(d.Style,function(b){return"style"in c?b.Title==c.style:b.isDefault});0>f&&(f=0);f=d.Style[f].Identifier;var k={};"Dimension"in d&&d.Dimension.forEach(function(b){var c=b.Identifier,d=b.Default;void 0===d&&(d=b.Value[0]);k[c]=d});var l=Vc(b.Contents.TileMatrixSet,function(b){return b.Identifier==g}),n;n="projection"in c?Oe(c.projection):Oe(l.SupportedCRS.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"));var q=d.WGS84BoundingBox,p,r;void 0!==q&&(r=Oe("EPSG:4326").G(),r=q[0]==
r[0]&&q[2]==r[2],p=ef(q,"EPSG:4326",n),(q=n.G())&&(Ib(q,p)||(p=void 0)));var l=Tg(l,p),u=[];p=c.requestEncoding;p=void 0!==p?p:"";if(b.hasOwnProperty("OperationsMetadata")&&b.OperationsMetadata.hasOwnProperty("GetTile")&&0!==p.indexOf("REST"))for(var d=b.OperationsMetadata.GetTile.DCP.HTTP.Get,q=0,v=d.length;q<v;++q){var z=Vc(d[q].Constraint,function(b){return"GetEncoding"==b.name}).AllowedValues.Value;0<z.length&&0<=z.indexOf("KVP")&&(p="KVP",u.push(d[q].href))}else p="REST",d.ResourceURL.forEach(function(b){"tile"==
b.resourceType&&(h=b.format,u.push(b.template))});return{Va:u,layer:c.layer,matrixSet:g,format:h,projection:n,requestEncoding:p,pa:l,style:f,dimensions:k,wrapX:r}};function Xg(b,c){this.b=b;this.a=c}Xg.$inject=["$q","$http"];Xg.prototype.wd=function(b,c){return new qf({source:new Yf({url:b,params:{LAYERS:c}})})};Xg.prototype.createBasicWMSLayer=Xg.prototype.wd;
Xg.prototype.xd=function(b,c){var d=new ne,e=new rf,f=this.b;return this.a.get(b).then(function(g){var h;g.data&&(h=d.read(g.data));return void 0!==h?(g=Wg(h,{layer:c,requestEncoding:"REST"}),pf(e,new Ug(g)),h=Ma(h.Contents.Layer,function(b){return b.Identifier==c}),e.set("capabilitiesStyles",h.Style),f.resolve(e)):f.reject("Failed to get WMTS capabilities from "+b)})};Xg.prototype.createWMTSLayerFromCapabilitites=Xg.prototype.xd;
Xg.prototype.vd=function(b){var c=new kf;null!=b&&c.set("layers",b);return c};Xg.prototype.createBasicGroup=Xg.prototype.vd;Xg.prototype.Te=function(b,c){lf(Yg(b)).forEach(function(b){if(b.get("groupName")===c)return b});var d=this.vd();d.set("groupName",c);Zg(b,d);return d};Xg.prototype.getGroupFromMap=Xg.prototype.Te;Xg.prototype.Dc=function(b){return $g(this,b,[])};Xg.prototype.getFlatLayers=Xg.prototype.Dc;
function $g(b,c,d){c instanceof kf?lf(c).forEach(function(b){$g(this,b,d)},b):0>d.indexOf(c)&&d.push(c);return d}A.service("ngeoLayerHelper",Xg);function ah(b,c,d,e,f){ib.call(this);this.f=d;this.b=b;this.g=c;this.Qa=e;this.c=f;this.a=null}y(ah,ib);ah.$inject=["$http","gmfTreeUrl","$q","ngeoLayerHelper","gettextCatalog"];function bh(b,c){return Ma(b,function(b){return b.name===c})}
function ch(b){var c=b.f,d=function(b){b=b.background_layers.map(function(b){function d(b,c){c.set("label",b.name);c.set("metadata",b.metadata);return c}if("WMTS"===b.type)return this.Qa.xd(b.url,b.name).then(d.bind(this,b)).then(null,function(b){console.error(b||"unknown error");return c.resolve(void 0)})},this);return c.all(b)}.bind(b);return b.a.then(d).then(function(b){var c=[];c.push(new rf({label:this.c.getString("blank"),metadata:{thumbnail:""}}));b.forEach(function(b){b&&c.push(b)});return c}.bind(b))}
ah.prototype.Zg=function(b){return this.a.then(function(c){return bh(c.themes,b)})};ah.prototype.getThemeObject=ah.prototype.Zg;ah.prototype.Gc=function(){return this.a.then(function(b){return b.themes})};ah.prototype.getThemesObject=ah.prototype.Gc;ah.prototype.jf=function(b){var c=function(b){this.B("load");return b.data}.bind(this);this.a=this.b.get(this.g,{params:void 0!==b?{role:b}:{},cache:!1,withCredentials:!0}).then(c)};ah.prototype.loadThemes=ah.prototype.jf;B.service("gmfThemes",ah);function dh(b){return function(){return b}}var eh=dh(!1),fh=dh(!0);function gh(b){var c;c=c||0;return function(){return b.apply(this,Array.prototype.slice.call(arguments,0,c))}}function hh(b){var c=arguments,d=c.length;return function(){for(var b=0;b<d;b++)if(!c[b].apply(this,arguments))return!1;return!0}};function ih(){mb.call(this);this.s=Eb();this.v=-1;this.i={};this.l=this.j=0}y(ih,mb);ih.prototype.G=function(b){this.v!=this.f&&(this.s=this.yc(this.s),this.v=this.f);var c=this.s;b?(b[0]=c[0],b[1]=c[1],b[2]=c[2],b[3]=c[3]):b=c;return b};ih.prototype.transform=function(b,c){this.tc(bf(b,c));return this};var jh=/^#(?:[0-9a-f]{3}){1,2}$/i,kh=/^(?:rgb)?\((0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2})\)$/i,lh=/^(?:rgba)?\((0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2}),\s?(0|1|0\.\d{0,10})\)$/i;function mh(b){return ea(b)?b:nh(b)}function oh(b){if("string"!==typeof b){var c=b[0];c!=(c|0)&&(c=c+.5|0);var d=b[1];d!=(d|0)&&(d=d+.5|0);var e=b[2];e!=(e|0)&&(e=e+.5|0);b="rgba("+c+","+d+","+e+","+b[3]+")"}return b}
var nh=function(){var b={},c=0;return function(d){var e;if(b.hasOwnProperty(d))e=b[d];else{if(1024<=c){e=0;for(var f in b)0===(e++&3)&&(delete b[f],--c)}var g,h;jh.exec(d)?(h=3==d.length-1?1:2,e=parseInt(d.substr(1+0*h,h),16),f=parseInt(d.substr(1+1*h,h),16),g=parseInt(d.substr(1+2*h,h),16),1==h&&(e=(e<<4)+e,f=(f<<4)+f,g=(g<<4)+g),e=[e,f,g,1]):(h=lh.exec(d))?(e=Number(h[1]),f=Number(h[2]),g=Number(h[3]),h=Number(h[4]),e=[e,f,g,h],e=ph(e,e)):(h=kh.exec(d))?(e=Number(h[1]),f=Number(h[2]),g=Number(h[3]),
e=[e,f,g,1],e=ph(e,e)):e=void 0;b[d]=e;++c}return e}}();function ph(b,c){var d=c||[];d[0]=Ce(b[0]+.5|0,0,255);d[1]=Ce(b[1]+.5|0,0,255);d[2]=Ce(b[2]+.5|0,0,255);d[3]=Ce(b[3],0,1);return d};function qh(b){return"string"===typeof b||b instanceof CanvasPattern||b instanceof CanvasGradient?b:oh(b)};var rh="undefined"!==typeof navigator?navigator.userAgent.toLowerCase():"",sh=-1!==rh.indexOf("firefox"),th=-1!==rh.indexOf("safari")&&-1===rh.indexOf("chrom"),uh=-1!==rh.indexOf("macintosh"),vh=t.devicePixelRatio||1,wh=!1,xh=function(){if(!("HTMLCanvasElement"in t))return!1;try{var b=Hf();return b?(void 0!==b.setLineDash&&(wh=!0),!0):!1}catch(c){return!1}}(),yh="geolocation"in t.navigator,zh="ontouchstart"in t,Ah="PointerEvent"in t,Bh=!!t.navigator.msPointerEnabled;var Ch=[0,0,0,1],Dh=[],Eh=[0,0,0,1];function Fh(b,c,d,e){0!==c&&(b.translate(d,e),b.rotate(c),b.translate(-d,-e))};function Gh(b){b=b||{};this.a=void 0!==b.color?b.color:null;this.b=void 0}function Hh(b){void 0===b.b&&(b.b=b.a instanceof CanvasPattern||b.a instanceof CanvasGradient?w(b.a).toString():"f"+(b.a?oh(b.a):"-"));return b.b};function Ih(b){this.N=b.opacity;this.W=b.qb;this.s=b.rotation;this.I=b.scale;this.Z=b.Ua}Ih.prototype.Ha=function(){return this.I};function Jh(){this.b=-1};function Kh(){this.b=-1;this.b=64;this.a=Array(4);this.g=Array(this.b);this.c=this.f=0;this.a[0]=1732584193;this.a[1]=4023233417;this.a[2]=2562383102;this.a[3]=271733878;this.c=this.f=0}y(Kh,Jh);
function Lh(b,c,d){d||(d=0);var e=Array(16);if(ga(c))for(var f=0;16>f;++f)e[f]=c.charCodeAt(d++)|c.charCodeAt(d++)<<8|c.charCodeAt(d++)<<16|c.charCodeAt(d++)<<24;else for(f=0;16>f;++f)e[f]=c[d++]|c[d++]<<8|c[d++]<<16|c[d++]<<24;c=b.a[0];d=b.a[1];var f=b.a[2],g=b.a[3],h=0,h=c+(g^d&(f^g))+e[0]+3614090360&4294967295;c=d+(h<<7&4294967295|h>>>25);h=g+(f^c&(d^f))+e[1]+3905402710&4294967295;g=c+(h<<12&4294967295|h>>>20);h=f+(d^g&(c^d))+e[2]+606105819&4294967295;f=g+(h<<17&4294967295|h>>>15);h=d+(c^f&(g^
c))+e[3]+3250441966&4294967295;d=f+(h<<22&4294967295|h>>>10);h=c+(g^d&(f^g))+e[4]+4118548399&4294967295;c=d+(h<<7&4294967295|h>>>25);h=g+(f^c&(d^f))+e[5]+1200080426&4294967295;g=c+(h<<12&4294967295|h>>>20);h=f+(d^g&(c^d))+e[6]+2821735955&4294967295;f=g+(h<<17&4294967295|h>>>15);h=d+(c^f&(g^c))+e[7]+4249261313&4294967295;d=f+(h<<22&4294967295|h>>>10);h=c+(g^d&(f^g))+e[8]+1770035416&4294967295;c=d+(h<<7&4294967295|h>>>25);h=g+(f^c&(d^f))+e[9]+2336552879&4294967295;g=c+(h<<12&4294967295|h>>>20);h=f+
(d^g&(c^d))+e[10]+4294925233&4294967295;f=g+(h<<17&4294967295|h>>>15);h=d+(c^f&(g^c))+e[11]+2304563134&4294967295;d=f+(h<<22&4294967295|h>>>10);h=c+(g^d&(f^g))+e[12]+1804603682&4294967295;c=d+(h<<7&4294967295|h>>>25);h=g+(f^c&(d^f))+e[13]+4254626195&4294967295;g=c+(h<<12&4294967295|h>>>20);h=f+(d^g&(c^d))+e[14]+2792965006&4294967295;f=g+(h<<17&4294967295|h>>>15);h=d+(c^f&(g^c))+e[15]+1236535329&4294967295;d=f+(h<<22&4294967295|h>>>10);h=c+(f^g&(d^f))+e[1]+4129170786&4294967295;c=d+(h<<5&4294967295|
h>>>27);h=g+(d^f&(c^d))+e[6]+3225465664&4294967295;g=c+(h<<9&4294967295|h>>>23);h=f+(c^d&(g^c))+e[11]+643717713&4294967295;f=g+(h<<14&4294967295|h>>>18);h=d+(g^c&(f^g))+e[0]+3921069994&4294967295;d=f+(h<<20&4294967295|h>>>12);h=c+(f^g&(d^f))+e[5]+3593408605&4294967295;c=d+(h<<5&4294967295|h>>>27);h=g+(d^f&(c^d))+e[10]+38016083&4294967295;g=c+(h<<9&4294967295|h>>>23);h=f+(c^d&(g^c))+e[15]+3634488961&4294967295;f=g+(h<<14&4294967295|h>>>18);h=d+(g^c&(f^g))+e[4]+3889429448&4294967295;d=f+(h<<20&4294967295|
h>>>12);h=c+(f^g&(d^f))+e[9]+568446438&4294967295;c=d+(h<<5&4294967295|h>>>27);h=g+(d^f&(c^d))+e[14]+3275163606&4294967295;g=c+(h<<9&4294967295|h>>>23);h=f+(c^d&(g^c))+e[3]+4107603335&4294967295;f=g+(h<<14&4294967295|h>>>18);h=d+(g^c&(f^g))+e[8]+1163531501&4294967295;d=f+(h<<20&4294967295|h>>>12);h=c+(f^g&(d^f))+e[13]+2850285829&4294967295;c=d+(h<<5&4294967295|h>>>27);h=g+(d^f&(c^d))+e[2]+4243563512&4294967295;g=c+(h<<9&4294967295|h>>>23);h=f+(c^d&(g^c))+e[7]+1735328473&4294967295;f=g+(h<<14&4294967295|
h>>>18);h=d+(g^c&(f^g))+e[12]+2368359562&4294967295;d=f+(h<<20&4294967295|h>>>12);h=c+(d^f^g)+e[5]+4294588738&4294967295;c=d+(h<<4&4294967295|h>>>28);h=g+(c^d^f)+e[8]+2272392833&4294967295;g=c+(h<<11&4294967295|h>>>21);h=f+(g^c^d)+e[11]+1839030562&4294967295;f=g+(h<<16&4294967295|h>>>16);h=d+(f^g^c)+e[14]+4259657740&4294967295;d=f+(h<<23&4294967295|h>>>9);h=c+(d^f^g)+e[1]+2763975236&4294967295;c=d+(h<<4&4294967295|h>>>28);h=g+(c^d^f)+e[4]+1272893353&4294967295;g=c+(h<<11&4294967295|h>>>21);h=f+(g^
c^d)+e[7]+4139469664&4294967295;f=g+(h<<16&4294967295|h>>>16);h=d+(f^g^c)+e[10]+3200236656&4294967295;d=f+(h<<23&4294967295|h>>>9);h=c+(d^f^g)+e[13]+681279174&4294967295;c=d+(h<<4&4294967295|h>>>28);h=g+(c^d^f)+e[0]+3936430074&4294967295;g=c+(h<<11&4294967295|h>>>21);h=f+(g^c^d)+e[3]+3572445317&4294967295;f=g+(h<<16&4294967295|h>>>16);h=d+(f^g^c)+e[6]+76029189&4294967295;d=f+(h<<23&4294967295|h>>>9);h=c+(d^f^g)+e[9]+3654602809&4294967295;c=d+(h<<4&4294967295|h>>>28);h=g+(c^d^f)+e[12]+3873151461&4294967295;
g=c+(h<<11&4294967295|h>>>21);h=f+(g^c^d)+e[15]+530742520&4294967295;f=g+(h<<16&4294967295|h>>>16);h=d+(f^g^c)+e[2]+3299628645&4294967295;d=f+(h<<23&4294967295|h>>>9);h=c+(f^(d|~g))+e[0]+4096336452&4294967295;c=d+(h<<6&4294967295|h>>>26);h=g+(d^(c|~f))+e[7]+1126891415&4294967295;g=c+(h<<10&4294967295|h>>>22);h=f+(c^(g|~d))+e[14]+2878612391&4294967295;f=g+(h<<15&4294967295|h>>>17);h=d+(g^(f|~c))+e[5]+4237533241&4294967295;d=f+(h<<21&4294967295|h>>>11);h=c+(f^(d|~g))+e[12]+1700485571&4294967295;c=d+
(h<<6&4294967295|h>>>26);h=g+(d^(c|~f))+e[3]+2399980690&4294967295;g=c+(h<<10&4294967295|h>>>22);h=f+(c^(g|~d))+e[10]+4293915773&4294967295;f=g+(h<<15&4294967295|h>>>17);h=d+(g^(f|~c))+e[1]+2240044497&4294967295;d=f+(h<<21&4294967295|h>>>11);h=c+(f^(d|~g))+e[8]+1873313359&4294967295;c=d+(h<<6&4294967295|h>>>26);h=g+(d^(c|~f))+e[15]+4264355552&4294967295;g=c+(h<<10&4294967295|h>>>22);h=f+(c^(g|~d))+e[6]+2734768916&4294967295;f=g+(h<<15&4294967295|h>>>17);h=d+(g^(f|~c))+e[13]+1309151649&4294967295;
d=f+(h<<21&4294967295|h>>>11);h=c+(f^(d|~g))+e[4]+4149444226&4294967295;c=d+(h<<6&4294967295|h>>>26);h=g+(d^(c|~f))+e[11]+3174756917&4294967295;g=c+(h<<10&4294967295|h>>>22);h=f+(c^(g|~d))+e[2]+718787259&4294967295;f=g+(h<<15&4294967295|h>>>17);h=d+(g^(f|~c))+e[9]+3951481745&4294967295;b.a[0]=b.a[0]+c&4294967295;b.a[1]=b.a[1]+(f+(h<<21&4294967295|h>>>11))&4294967295;b.a[2]=b.a[2]+f&4294967295;b.a[3]=b.a[3]+g&4294967295}
function Mh(b,c){var d;ba(d)||(d=c.length);for(var e=d-b.b,f=b.g,g=b.f,h=0;h<d;){if(0==g)for(;h<=e;)Lh(b,c,h),h+=b.b;if(ga(c))for(;h<d;){if(f[g++]=c.charCodeAt(h++),g==b.b){Lh(b,f);g=0;break}}else for(;h<d;)if(f[g++]=c[h++],g==b.b){Lh(b,f);g=0;break}}b.f=g;b.c+=d};function Nh(b){b=b||{};this.a=void 0!==b.color?b.color:null;this.c=b.lineCap;this.f=void 0!==b.H?b.H:null;this.g=b.lineJoin;this.i=b.miterLimit;this.b=b.width;this.j=void 0}
function Oh(b){if(void 0===b.j){var c="s"+(b.a?oh(b.a):"-")+","+(void 0!==b.c?b.c.toString():"-")+","+(b.f?b.f.toString():"-")+","+(void 0!==b.g?b.g:"-")+","+(void 0!==b.i?b.i.toString():"-")+","+(void 0!==b.b?b.b.toString():"-"),d=new Kh;Mh(d,c);c=Array((56>d.f?d.b:2*d.b)-d.f);c[0]=128;for(var e=1;e<c.length-8;++e)c[e]=0;for(var f=8*d.c,e=c.length-8;e<c.length;++e)c[e]=f&255,f/=256;Mh(d,c);c=Array(16);for(e=f=0;4>e;++e)for(var g=0;32>g;g+=8)c[f++]=d.a[e]>>>g&255;if(8192>=c.length)d=String.fromCharCode.apply(null,
c);else for(d="",e=0;e<c.length;e+=8192)f=Ra(c,e,e+8192),d+=String.fromCharCode.apply(null,f);b.j=d}return b.j};function Ph(b){b=b||{};this.i=this.a=this.c=null;this.g=void 0!==b.fill?b.fill:null;this.b=void 0!==b.stroke?b.stroke:null;this.f=b.radius;this.l=[0,0];this.u=this.v=this.j=null;var c=b.zg,d,e=null,f,g=0;this.b&&(f=oh(this.b.a),g=this.b.b,void 0===g&&(g=1),e=this.b.f,wh||(e=null));var h=2*(this.f+g)+1;f={strokeStyle:f,strokeWidth:g,size:h,H:e};if(void 0===c)this.a=document.createElement("CANVAS"),this.a.height=h,this.a.width=h,d=h=this.a.width,c=this.a.getContext("2d"),this.wf(f,c,0,0),this.g?this.i=
this.a:(c=this.i=document.createElement("CANVAS"),c.height=f.size,c.width=f.size,c=c.getContext("2d"),this.vf(f,c,0,0));else{h=Math.round(h);(e=!this.g)&&(d=this.vf.bind(this,f));var g=this.b?Oh(this.b):"-",k=this.g?Hh(this.g):"-";this.c&&g==this.c[1]&&k==this.c[2]&&this.f==this.c[3]||(this.c=["c"+g+k+(void 0!==this.f?this.f.toString():"-"),g,k,this.f]);f=c.a(this.c[0],h,h,this.wf.bind(this,f),d);this.a=f.image;this.l=[f.offsetX,f.offsetY];d=f.image.width;this.i=e?f.Ih:this.a}this.j=[h/2,h/2];this.v=
[h,h];this.u=[d,d];Ih.call(this,{opacity:1,qb:!1,rotation:0,scale:1,Ua:void 0!==b.Ua?b.Ua:!0})}y(Ph,Ih);m=Ph.prototype;m.Yb=function(){return this.j};m.Wd=function(){return this.i};m.Pc=function(){return this.a};m.cc=function(){return 2};m.Jd=function(){return this.u};m.Pa=function(){return this.l};m.ob=function(){return this.v};m.Sd=Md;m.load=Md;m.me=Md;
m.wf=function(b,c,d,e){c.setTransform(1,0,0,1,0,0);c.translate(d,e);c.beginPath();c.arc(b.size/2,b.size/2,this.f,0,2*Math.PI,!0);this.g&&(c.fillStyle=qh(this.g.a),c.fill());this.b&&(c.strokeStyle=b.strokeStyle,c.lineWidth=b.strokeWidth,b.H&&c.setLineDash(b.H),c.stroke());c.closePath()};
m.vf=function(b,c,d,e){c.setTransform(1,0,0,1,0,0);c.translate(d,e);c.beginPath();c.arc(b.size/2,b.size/2,this.f,0,2*Math.PI,!0);c.fillStyle=oh(Ch);c.fill();this.b&&(c.strokeStyle=b.strokeStyle,c.lineWidth=b.strokeWidth,b.H&&c.setLineDash(b.H),c.stroke());c.closePath()};function Qh(b){b=b||{};this.i=null;this.f=Rh;void 0!==b.geometry&&Sh(this,b.geometry);this.c=void 0!==b.fill?b.fill:null;this.g=void 0!==b.image?b.image:null;this.b=void 0!==b.stroke?b.stroke:null;this.j=void 0!==b.text?b.text:null;this.a=b.zIndex}Qh.prototype.J=function(){return this.i};Qh.prototype.va=function(){return this.j};function Sh(b,c){ia(c)?b.f=c:"string"===typeof c?b.f=function(b){return b.get(c)}:c?void 0!==c&&(b.f=function(){return c}):b.f=Rh;b.i=c}
function Th(b){if(!ia(b)){var c;c=ea(b)?b:[b];b=function(){return c}}return b}var Uh=null;function Vh(){if(!Uh){var b=new Gh({color:"rgba(255,255,255,0.4)"}),c=new Nh({color:"#3399CC",width:1.25});Uh=[new Qh({image:new Ph({fill:b,stroke:c,radius:5}),fill:b,stroke:c})]}return Uh}
function Wh(){var b={},c=[255,255,255,1],d=[0,153,255,1];b.Polygon=[new Qh({fill:new Gh({color:[255,255,255,.5]})})];b.MultiPolygon=b.Polygon;b.LineString=[new Qh({stroke:new Nh({color:c,width:5})}),new Qh({stroke:new Nh({color:d,width:3})})];b.MultiLineString=b.LineString;b.Circle=b.Polygon.concat(b.LineString);b.Point=[new Qh({image:new Ph({radius:6,fill:new Gh({color:d}),stroke:new Nh({color:c,width:1.5})}),zIndex:Infinity})];b.MultiPoint=b.Point;b.GeometryCollection=b.Polygon.concat(b.LineString,
b.Point);return b}function Rh(b){return b.J()};function Xh(b){mb.call(this);this.c=void 0;this.a="geometry";this.j=null;this.i=void 0;this.g=null;I(this,L(this.a),this.Hc,this);void 0!==b&&(b instanceof ih||!b?Yh(this,b):this.ka(b))}y(Xh,mb);m=Xh.prototype;m.clone=function(){var b=new Xh(Ua({},this.u));Zh(b,this.a);var c=this.J();c&&Yh(b,c.clone());(c=this.j)&&$h(b,c);return b};m.J=function(){return this.get(this.a)};m.Ya=function(){return this.c};m.mi=function(){this.b()};
m.Hc=function(){this.g&&(G(this.g),this.g=null);var b=this.J();b&&(this.g=I(b,"change",this.mi,this));this.b()};function Yh(b,c){b.set(b.a,c)}function $h(b,c){b.j=c;b.i=c?ai(c):void 0;b.b()}function Zh(b,c){cb(b,L(b.a),b.Hc,b);b.a=c;I(b,L(b.a),b.Hc,b);b.Hc()}function ai(b){if(!ia(b)){var c;c=ea(b)?b:[b];b=function(){return c}}return b};function bi(){this.ua=null}function ci(b,c,d){var e;d&&(e={ib:d.ib?d.ib:b.f(c),Fb:d.Fb});var f;e&&(f={Fb:e.Fb,ib:e.ib?e.ib:b.ua,fj:e.fj});return f}function di(b,c,d){var e=d?Oe(d.Fb):null;d=d?Oe(d.ib):null;return e&&d&&!af(e,d)?b instanceof ih?(c?b.clone():b).transform(c?e:d,c?d:e):ef(c?b.slice():b,c?e:d,c?d:e):b};function ei(){this.ua=null}y(ei,bi);ei.prototype.aa=function(){return"xml"};ei.prototype.Sc=function(b,c){if(md(b))return fi(this,b,c);if(pd(b))return this.ae(b,c);if("string"===typeof b){var d=Ad(b);return fi(this,d,c)}return[]};function fi(b,c,d){var e=[];for(c=c.firstChild;c;c=c.nextSibling)1==c.nodeType&&Tc(e,b.ae(c,d));return e}ei.prototype.f=function(b){return md(b)?this.ua:pd(b)?this.Jf(b):"string"===typeof b?(Ad(b),this.ua):null};ei.prototype.Jf=function(){return this.ua};function gi(b,c,d,e,f,g){var h=f[0],k=f[1],l=f[4],n=f[5],q=f[12];f=f[13];for(var p=g?g:[],r=0;c<d;c+=e){var u=b[c],v=b[c+1];p[r++]=h*u+l*v+q;p[r++]=k*u+n*v+f}g&&p.length!=r&&(p.length=r);return p};function hi(){ih.call(this);this.layout="XY";this.a=2;this.o=null}y(hi,ih);function ii(b){if("XY"==b)return 2;if("XYZ"==b||"XYM"==b)return 3;if("XYZM"==b)return 4}m=hi.prototype;m.yc=function(b){var c=this.o,d=this.o.length,e=this.a;b=Jb(Infinity,Infinity,-Infinity,-Infinity,b);return Mb(b,c,0,d,e)};
m.Ld=function(b){this.l!=this.f&&(Va(this.i),this.j=0,this.l=this.f);if(0>b||0!==this.j&&b<=this.j)return this;var c=b.toString();if(this.i.hasOwnProperty(c))return this.i[c];var d=this.Ib(b);if(d.o.length<this.o.length)return this.i[c]=d;this.j=b;return this};m.Ib=function(){return this};function ji(b,c,d){b.a=ii(c);b.layout=c;b.o=d}
function ki(b,c,d,e){if(c)d=ii(c);else{for(c=0;c<e;++c){if(0===d.length){b.layout="XY";b.a=2;return}d=d[0]}d=d.length;c=2==d?"XY":3==d?"XYZ":4==d?"XYZM":void 0}b.layout=c;b.a=d}m.tc=function(b){this.o&&(b(this.o,this.o,this.a),this.b())};m.translate=function(b,c){var d=this.o;if(d){var e=d.length,f=this.a,g=d?d:[],h=0,k,l;for(k=0;k<e;k+=f)for(g[h++]=d[k]+b,g[h++]=d[k+1]+c,l=k+2;l<k+f;++l)g[h++]=d[l];d&&g.length!=h&&(g.length=h);this.b()}};function li(b,c){var d=0,e,f;e=0;for(f=c.length;e<f;++e)b[d++]=c[e];return d}function mi(b,c,d,e){var f,g;f=0;for(g=d.length;f<g;++f){var h=d[f],k;for(k=0;k<e;++k)b[c++]=h[k]}return c}function ni(b,c,d,e,f){f=f?f:[];var g=0,h,k;h=0;for(k=d.length;h<k;++h)c=mi(b,c,d[h],e),f[g++]=c;f.length=g;return f};function oi(b,c,d,e,f){f=void 0!==f?f:[];for(var g=0;c<d;c+=e)f[g++]=b.slice(c,c+e);f.length=g;return f}function pi(b,c,d,e,f){f=void 0!==f?f:[];var g=0,h,k;h=0;for(k=d.length;h<k;++h){var l=d[h];f[g++]=oi(b,c,l,e,f[g]);c=l}f.length=g;return f};function qi(b,c,d,e,f){var g=NaN,h=NaN,k=(d-c)/e;if(0!==k)if(1==k)g=b[c],h=b[c+1];else if(2==k)g=.5*b[c]+.5*b[c+e],h=.5*b[c+1]+.5*b[c+e+1];else{var h=b[c],k=b[c+1],l=0,g=[0],n;for(n=c+e;n<d;n+=e){var q=b[n],p=b[n+1],l=l+Math.sqrt((q-h)*(q-h)+(p-k)*(p-k));g.push(l);h=q;k=p}d=.5*l;l=0;n=g.length;for(q=!1;l<n;)h=l+(n-l>>1),k=+Rc(g[h],d),0>k?l=h+1:(n=h,q=!k);h=q?l:~l;0>h?(d=(d-g[-h-2])/(g[-h-1]-g[-h-2]),c+=(-h-2)*e,g=b[c],g=g+d*(b[c+e]-g),h=b[c+1],h=h+d*(b[c+e+1]-h)):(g=b[c+h*e],h=b[c+h*e+1])}return f?
(f[0]=g,f[1]=h,f):[g,h]};function ri(b,c,d,e,f,g){for(var h=!1,k=b[d-e],l=b[d-e+1];c<d;c+=e){var n=b[c],q=b[c+1];l>g!=q>g&&f<(n-k)*(g-l)/(q-l)+k&&(h=!h);k=n;l=q}return h};function si(b,c,d,e,f,g,h){var k=(d-c)/e;if(3>k){for(;c<d;c+=e)g[h++]=b[c],g[h++]=b[c+1];return h}var l=Array(k);l[0]=1;l[k-1]=1;d=[c,d-e];for(var n=0,q;0<d.length;){var p=d.pop(),r=d.pop(),u=0,v=b[r],z=b[r+1],x=b[p],C=b[p+1];for(q=r+e;q<p;q+=e){var H,E=b[q];H=b[q+1];var D=v,R=z,F=x-D,M=C-R;if(0!==F||0!==M){var T=((E-D)*F+(H-R)*M)/(F*F+M*M);1<T?(D=x,R=C):0<T&&(D+=F*T,R+=M*T)}E=D-E;H=R-H;H=E*E+H*H;H>u&&(n=q,u=H)}u>f&&(l[(n-c)/e]=1,r+e<n&&d.push(r,n),n+e<p&&d.push(n,p))}for(q=0;q<k;++q)l[q]&&(g[h++]=
b[c+q*e],g[h++]=b[c+q*e+1]);return h}
function ti(b,c,d,e,f,g,h,k){var l,n;l=0;for(n=d.length;l<n;++l){var q=d[l];a:{var p=b,r=q,u=e,v=f,z=g;if(c!=r){var x=v*Math.round(p[c]/v),C=v*Math.round(p[c+1]/v);c+=u;z[h++]=x;z[h++]=C;var H=void 0,E=void 0;do if(H=v*Math.round(p[c]/v),E=v*Math.round(p[c+1]/v),c+=u,c==r){z[h++]=H;z[h++]=E;break a}while(H==x&&E==C);for(;c<r;){var D,R;D=v*Math.round(p[c]/v);R=v*Math.round(p[c+1]/v);c+=u;if(D!=H||R!=E){var F=H-x,M=E-C,T=D-x,K=R-C;F*K==M*T&&(0>F&&T<F||F==T||0<F&&T>F)&&(0>M&&K<M||M==K||0<M&&K>M)||(z[h++]=
H,z[h++]=E,x=H,C=E);H=D;E=R}}z[h++]=H;z[h++]=E}}k.push(h);c=q}return h};function ui(b,c){hi.call(this);this.c=null;this.g=-1;this.Y(b,c)}y(ui,hi);m=ui.prototype;m.clone=function(){var b=new ui(null);b.K(this.layout,this.o.slice());return b};m.ja=function(){return oi(this.o,0,this.o.length,this.a)};function vi(b){if(b.g!=b.f){var c;c=qi(b.o,0,b.o.length,b.a,b.c);b.c=c;b.g=b.f}return b.c}m.Ib=function(b){var c=[];c.length=si(this.o,0,this.o.length,this.a,b,c,0);b=new ui(null);b.K("XY",c);return b};m.aa=function(){return"LineString"};
m.Y=function(b,c){b?(ki(this,c,b,1),this.o||(this.o=[]),this.o.length=mi(this.o,0,b,this.a),this.b()):this.K("XY",null)};m.K=function(b,c){ji(this,b,c);this.b()};function wi(b,c){hi.call(this);this.Y(b,c)}y(wi,hi);m=wi.prototype;m.clone=function(){var b=new wi(null);xi(b,this.layout,this.o.slice());return b};m.ja=function(){return oi(this.o,0,this.o.length,this.a)};m.Ib=function(b){var c=[];c.length=si(this.o,0,this.o.length,this.a,b,c,0);b=new wi(null);xi(b,"XY",c);return b};m.aa=function(){return"LinearRing"};m.Y=function(b,c){b?(ki(this,c,b,1),this.o||(this.o=[]),this.o.length=mi(this.o,0,b,this.a),this.b()):xi(this,"XY",null)};
function xi(b,c,d){ji(b,c,d);b.b()};function yi(b,c){hi.call(this);this.g=[];this.Y(b,c)}y(yi,hi);m=yi.prototype;m.clone=function(){var b=new yi(null);b.K(this.layout,this.o.slice(),this.g.slice());return b};m.ja=function(){return pi(this.o,0,this.g,this.a)};m.Hb=function(){return this.g};function zi(b){var c=b.o,d=b.g;b=b.layout;var e=[],f=0,g,h;g=0;for(h=d.length;g<h;++g){var k=d[g],l=new ui(null);l.K(b,c.slice(f,k));e.push(l);f=k}return e}
function Ai(b){var c=[],d=b.o,e=0,f=b.g;b=b.a;var g,h;g=0;for(h=f.length;g<h;++g){var k=f[g],e=qi(d,e,k,b);Tc(c,e);e=k}return c}m.Ib=function(b){var c=[],d=[],e=this.o,f=this.g,g=this.a,h=0,k=0,l,n;l=0;for(n=f.length;l<n;++l){var q=f[l],k=si(e,h,q,g,b,c,k);d.push(k);h=q}c.length=k;b=new yi(null);b.K("XY",c,d);return b};m.aa=function(){return"MultiLineString"};
m.Y=function(b,c){if(b){ki(this,c,b,2);this.o||(this.o=[]);var d=ni(this.o,0,b,this.a,this.g);this.o.length=0===d.length?0:d[d.length-1];this.b()}else this.K("XY",null,this.g)};m.K=function(b,c,d){ji(this,b,c);this.g=d;this.b()};function Bi(b,c){var d=b.layout,e=[],f=[],g,h;g=0;for(h=c.length;g<h;++g){var k=c[g];0===g&&(d=k.layout);Tc(e,k.o);f.push(e.length)}b.K(d,e,f)};function Ci(b,c){hi.call(this);this.Y(b,c)}y(Ci,hi);m=Ci.prototype;m.clone=function(){var b=new Ci(null);b.K(this.layout,this.o.slice());return b};m.ja=function(){return this.o?this.o.slice():[]};m.yc=function(b){var c=this.o,d=c[0],c=c[1];return Jb(d,c,d,c,b)};m.aa=function(){return"Point"};m.Y=function(b,c){b?(ki(this,c,b,0),this.o||(this.o=[]),this.o.length=li(this.o,b),this.b()):this.K("XY",null)};m.K=function(b,c){ji(this,b,c);this.b()};function Di(b,c){hi.call(this);this.Y(b,c)}y(Di,hi);m=Di.prototype;m.clone=function(){var b=new Di(null);b.K(this.layout,this.o.slice());return b};m.ja=function(){return oi(this.o,0,this.o.length,this.a)};m.aa=function(){return"MultiPoint"};m.Y=function(b,c){b?(ki(this,c,b,1),this.o||(this.o=[]),this.o.length=mi(this.o,0,b,this.a),this.b()):this.K("XY",null)};m.K=function(b,c){ji(this,b,c);this.b()};function Ei(b,c,d,e,f,g,h){var k,l,n,q,p,r=f[g+1],u=[],v=d[0];n=b[v-e];p=b[v-e+1];for(k=c;k<v;k+=e){q=b[k];l=b[k+1];if(r<=p&&l<=r||p<=r&&r<=l)n=(r-p)/(l-p)*(q-n)+n,u.push(n);n=q;p=l}v=NaN;p=-Infinity;u.sort(Rc);n=u[0];k=1;for(l=u.length;k<l;++k){q=u[k];var z=Math.abs(q-n);if(z>p){n=(n+q)/2;var x;a:if(0!==d.length&&ri(b,c,d[0],e,n,r)){var C=x=void 0;x=1;for(C=d.length;x<C;++x)if(ri(b,d[x-1],d[x],e,n,r)){x=!1;break a}x=!0}else x=!1;x&&(v=n,p=z)}n=q}isNaN(v)&&(v=f[g]);return h?(h.push(v,r),h):[v,r]}
;function Fi(b,c,d,e){for(var f=0,g=b[d-e],h=b[d-e+1];c<d;c+=e)var k=b[c],l=b[c+1],f=f+(k-g)*(l+h),g=k,h=l;return 0<f}function Gi(b,c,d,e){var f=0;e=void 0!==e?e:!1;var g,h;g=0;for(h=c.length;g<h;++g){var k=c[g],f=Fi(b,f,k,d);if(0===g){if(e&&f||!e&&!f)return!1}else if(e&&!f||!e&&f)return!1;f=k}return!0}
function Hi(b,c,d,e,f){f=void 0!==f?f:!1;var g,h;g=0;for(h=d.length;g<h;++g){var k=d[g],l=Fi(b,c,k,e);if(0===g?f&&l||!f&&!l:f&&!l||!f&&l)for(var l=b,n=k,q=e;c<n-q;){var p;for(p=0;p<q;++p){var r=l[c+p];l[c+p]=l[n-q+p];l[n-q+p]=r}c+=q;n-=q}c=k}return c}function Ii(b,c,d,e){var f=0,g,h;g=0;for(h=c.length;g<h;++g)f=Hi(b,f,c[g],d,e);return f};function Ji(b,c){hi.call(this);this.c=[];this.A=-1;this.C=null;this.D=-1;this.g=null;this.Y(b,c)}y(Ji,hi);m=Ji.prototype;m.clone=function(){var b=new Ji(null);b.K(this.layout,this.o.slice(),this.c.slice());return b};m.ja=function(b){var c;void 0!==b?(c=Ki(this).slice(),Hi(c,0,this.c,this.a,b)):c=this.o;return pi(c,0,this.c,this.a)};m.Hb=function(){return this.c};function Li(b){if(b.A!=b.f){var c=Rb(b.G());b.C=Ei(Ki(b),0,b.c,b.a,c,0);b.A=b.f}return b.C}
function Ki(b){if(b.D!=b.f){var c=b.o;Gi(c,b.c,b.a)?b.g=c:(b.g=c.slice(),b.g.length=Hi(b.g,0,b.c,b.a));b.D=b.f}return b.g}m.Ib=function(b){var c=[],d=[];c.length=ti(this.o,0,this.c,this.a,Math.sqrt(b),c,0,d);b=new Ji(null);b.K("XY",c,d);return b};m.aa=function(){return"Polygon"};m.Y=function(b,c){if(b){ki(this,c,b,2);this.o||(this.o=[]);var d=ni(this.o,0,b,this.a,this.c);this.o.length=0===d.length?0:d[d.length-1];this.b()}else this.K("XY",null,this.c)};m.K=function(b,c,d){ji(this,b,c);this.c=d;this.b()};function Mi(b,c){hi.call(this);this.c=[];this.A=-1;this.C=null;this.D=-1;this.g=null;this.Y(b,c)}y(Mi,hi);m=Mi.prototype;m.clone=function(){for(var b=new Mi(null),c=this.c.length,d=Array(c),e=0;e<c;++e)d[e]=this.c[e].slice();Ni(b,this.layout,this.o.slice(),d);return b};m.ja=function(b){var c;void 0!==b?(c=Oi(this).slice(),Ii(c,this.c,this.a,b)):c=this.o;b=c;c=this.c;var d=this.a,e=0,f=[],g=0,h,k;h=0;for(k=c.length;h<k;++h){var l=c[h];f[g++]=pi(b,e,l,d,f[g]);e=l[l.length-1]}f.length=g;return f};
function Pi(b){if(b.A!=b.f){var c=b.o,d=b.c,e=b.a,f=0,g=[],h,k,l=Eb();h=0;for(k=d.length;h<k;++h){var n=d[h],l=Mb(Jb(Infinity,Infinity,-Infinity,-Infinity,void 0),c,f,n[0],e);g.push((l[0]+l[2])/2,(l[1]+l[3])/2);f=n[n.length-1]}c=Oi(b);d=b.c;e=b.a;f=0;h=[];k=0;for(l=d.length;k<l;++k)n=d[k],h=Ei(c,f,n,e,g,2*k,h),f=n[n.length-1];b.C=h;b.A=b.f}return b.C}
function Oi(b){if(b.D!=b.f){var c=b.o,d;a:{d=b.c;var e,f;e=0;for(f=d.length;e<f;++e)if(!Gi(c,d[e],b.a,void 0)){d=!1;break a}d=!0}d?b.g=c:(b.g=c.slice(),b.g.length=Ii(b.g,b.c,b.a));b.D=b.f}return b.g}m.Ib=function(b){var c=[],d=[],e=this.o,f=this.c,g=this.a;b=Math.sqrt(b);var h=0,k=0,l,n;l=0;for(n=f.length;l<n;++l){var q=f[l],p=[],k=ti(e,h,q,g,b,c,k,p);d.push(p);h=q[q.length-1]}c.length=k;e=new Mi(null);Ni(e,"XY",c,d);return e};m.aa=function(){return"MultiPolygon"};
m.Y=function(b,c){if(b){ki(this,c,b,3);this.o||(this.o=[]);var d=this.o,e=this.a,f=this.c,g=0,f=f?f:[],h=0,k,l;k=0;for(l=b.length;k<l;++k)g=ni(d,g,b[k],e,f[h]),f[h++]=g,g=g[g.length-1];f.length=h;0===f.length?this.o.length=0:(d=f[f.length-1],this.o.length=0===d.length?0:d[d.length-1]);this.b()}else Ni(this,"XY",null,this.c)};function Ni(b,c,d,e){ji(b,c,d);b.c=e;b.b()}
function Qi(b,c){var d=b.layout,e=[],f=[],g,h,k;g=0;for(h=c.length;g<h;++g){var l=c[g];0===g&&(d=l.layout);var n=e.length;k=l.Hb();var q,p;q=0;for(p=k.length;q<p;++q)k[q]+=n;Tc(e,l.o);f.push(k)}Ni(b,d,e,f)};function Ri(b){b=b?b:{};this.Bc=b.Bc;this.Ac=b.Ac;this.je=b.je;this.ge="";this.a={};this.a["http://www.opengis.net/gml"]={featureMember:Cd(Ri.prototype.Tc),featureMembers:Cd(Ri.prototype.Tc)};this.ua=null}y(Ri,ei);var Si=/^[\s\xa0]*$/;m=Ri.prototype;
m.Tc=function(b,c){var d=jd(b),e;if("FeatureCollection"==d)"http://www.opengis.net/wfs"===b.namespaceURI?e=Q([],this.a,b,c,this):e=Q(null,this.a,b,c,this);else if("featureMembers"==d||"featureMember"==d){var f=c[0],g=f.featureType;e=f.featureNS;var h,k;if(!g&&b.childNodes){g=[];e={};h=0;for(k=b.childNodes.length;h<k;++h){var l=b.childNodes[h];if(1===l.nodeType){var n=l.nodeName.split(":").pop();if(-1===g.indexOf(n)){var q="",p=0,l=l.namespaceURI,r;for(r in e){if(e[r]===l){q=r;break}++p}q||(q="p"+
p,e[q]=l);g.push(q+":"+n)}}}f.featureType=g;f.featureNS=e}"string"===typeof e&&(h=e,e={},e.p0=h);r={};var g=ea(g)?g:[g],u;for(u in e){f={};h=0;for(k=g.length;h<k;++h)(-1===g[h].indexOf(":")?"p0":g[h].split(":")[0])===u&&(f[g[h].split(":").pop()]="featureMembers"==d?Bd(this.$d,this):Cd(this.$d,this));r[e[u]]=f}e=Q([],r,b,c)}e||(e=[]);return e};
m.$d=function(b,c){var d,e=b.getAttribute("fid")||td(b,"http://www.opengis.net/gml","id"),f={},g;for(d=b.firstElementChild;d;d=d.nextElementSibling){var h=jd(d);if(0===d.childNodes.length||1===d.childNodes.length&&(3===d.firstChild.nodeType||4===d.firstChild.nodeType)){var k=fd(d);Si.test(k)&&(k=void 0);f[h]=k}else{"boundedBy"!==h&&(g=h);var l=d,n=c,k=n[0];k.srsName=l.firstElementChild.getAttribute("srsName");k=(l=Q(null,this.cg,l,n,this))?di(l,!1,k):void 0;f[h]=k}}d=new Xh(f);g&&Zh(d,g);e&&(d.c=
e,d.b());return d};m.$i=function(b,c){var d=this.Uc(b,c);if(d){var e=new Ci(null);e.K("XYZ",d);return e}};m.Yi=function(b,c){var d=Q([],this.fg,b,c,this);if(d)return new Di(d)};m.Xi=function(b,c){var d=Q([],this.eg,b,c,this);if(d){var e=new yi(null);Bi(e,d);return e}};m.Zi=function(b,c){var d=Q([],this.gg,b,c,this);if(d){var e=new Mi(null);Qi(e,d);return e}};m.Cf=function(b,c){Jd(this.hg,b,c,this)};m.hf=function(b,c){Jd(this.dg,b,c,this)};m.Df=function(b,c){Jd(this.ig,b,c,this)};
m.Hf=function(b,c){var d=this.Uc(b,c);if(d){var e=new ui(null);e.K("XYZ",d);return e}};m.Ui=function(b,c){var d=Q(null,this.se,b,c,this);if(d)return d};m.Wi=function(b,c){var d=this.Uc(b,c);if(d){var e=new wi(null);xi(e,"XYZ",d);return e}};m.If=function(b,c){var d=Q([null],this.bg,b,c,this);if(d&&d[0]){var e=new Ji(null),f=d[0],g=[f.length],h,k;h=1;for(k=d.length;h<k;++h)Tc(f,d[h]),g.push(f.length);e.K("XYZ",f,g);return e}};m.Uc=function(b,c){return Q(null,this.se,b,c,this)};
m.fg={"http://www.opengis.net/gml":{pointMember:Bd(Ri.prototype.Cf),pointMembers:Bd(Ri.prototype.Cf)}};m.eg={"http://www.opengis.net/gml":{lineStringMember:Bd(Ri.prototype.hf),lineStringMembers:Bd(Ri.prototype.hf)}};m.gg={"http://www.opengis.net/gml":{polygonMember:Bd(Ri.prototype.Df),polygonMembers:Bd(Ri.prototype.Df)}};m.hg={"http://www.opengis.net/gml":{Point:Bd(Ri.prototype.Uc)}};m.dg={"http://www.opengis.net/gml":{LineString:Bd(Ri.prototype.Hf)}};m.ig={"http://www.opengis.net/gml":{Polygon:Bd(Ri.prototype.If)}};
m.te={"http://www.opengis.net/gml":{LinearRing:Cd(Ri.prototype.Ui)}};m.ae=function(b,c){var d={Bc:this.Bc,Ac:this.Ac};c&&Ua(d,ci(this,b,c));return this.Tc(b,[d])};m.Jf=function(b){return Oe(this.je?this.je:b.firstElementChild.getAttribute("srsName"))};function Ti(b){b=b?b:{};Ri.call(this,b);this.a["http://www.opengis.net/gml"].featureMember=Bd(Ri.prototype.Tc);this.ge=b.ge?b.ge:"http://www.opengis.net/gml http://schemas.opengis.net/gml/2.1.2/feature.xsd"}y(Ti,Ri);m=Ti.prototype;
m.Ff=function(b,c){var d=fd(b).replace(/^\s*|\s*$/g,""),e=c[0].srsName,f=b.parentNode.getAttribute("srsDimension"),g="enu";e&&(e=Oe(e))&&(g=e.g);d=d.split(/[\s,]+/);e=2;b.getAttribute("srsDimension")?e=Td(b.getAttribute("srsDimension")):b.getAttribute("dimension")?e=Td(b.getAttribute("dimension")):f&&(e=Td(f));for(var h,k,l=[],n=0,q=d.length;n<q;n+=e)f=parseFloat(d[n]),h=parseFloat(d[n+1]),k=3===e?parseFloat(d[n+2]):0,"en"===g.substr(0,2)?l.push(f,h,k):l.push(h,f,k);return l};
m.Si=function(b,c){var d=Q([null],this.ag,b,c,this);return Jb(d[1][0],d[1][1],d[1][3],d[1][4])};m.Oh=function(b,c){var d=Q(void 0,this.te,b,c,this);d&&c[c.length-1].push(d)};m.Ei=function(b,c){var d=Q(void 0,this.te,b,c,this);d&&(c[c.length-1][0]=d)};m.se={"http://www.opengis.net/gml":{coordinates:Cd(Ti.prototype.Ff)}};m.bg={"http://www.opengis.net/gml":{innerBoundaryIs:Ti.prototype.Oh,outerBoundaryIs:Ti.prototype.Ei}};m.ag={"http://www.opengis.net/gml":{coordinates:Bd(Ti.prototype.Ff)}};
m.cg={"http://www.opengis.net/gml":{Point:Cd(Ri.prototype.$i),MultiPoint:Cd(Ri.prototype.Yi),LineString:Cd(Ri.prototype.Hf),MultiLineString:Cd(Ri.prototype.Xi),LinearRing:Cd(Ri.prototype.Wi),Polygon:Cd(Ri.prototype.If),MultiPolygon:Cd(Ri.prototype.Zi),Box:Cd(Ti.prototype.Si)}};function Ui(b){b=b?b:{};this.b="http://mapserver.gis.umn.edu/mapserver";this.a=new Ti;this.c=b.layers?b.layers:null;this.ua=null}y(Ui,ei);
Ui.prototype.ae=function(b,c){var d={featureType:this.Bc,featureNS:this.Ac};c&&Ua(d,ci(this,b,c));var e=[d];b.setAttribute("namespaceURI",this.b);var f=jd(b),d=[];if(0!==b.childNodes.length){if("msGMLOutput"==f)for(var g=0,h=b.childNodes.length;g<h;g++){var k=b.childNodes[g];if(1===k.nodeType){var l=e[0],n=k.localName.replace("_layer","");if(!this.c||0<=this.c.indexOf(n)){n+="_feature";l.featureType=n;l.featureNS=this.b;var q={};q[n]=Bd(this.a.$d,this.a);l=P([l.featureNS,null],q);k.setAttribute("namespaceURI",
this.b);(k=Q([],l,k,e,this.a))&&Tc(d,k)}}}"FeatureCollection"==f&&(e=Q([],this.a.a,b,[{}],this.a))&&(d=e)}return d};A.value("ngeoQueryResult",{Yc:[],total:0});function Vi(b,c,d,e){d=void 0!==d?d:{};this.b=void 0!==d.limit?d.limit:50;this.i=void 0!==d.sourceIdProperty?d.sourceIdProperty:"querySourceId";this.j=void 0!==d.sourceIdsProperty?d.sourceIdsProperty:"querySourceIds";this.f=e;this.c=b;this.hc=c;this.g=[];this.a={}}Vi.$inject=["$http","ngeoQueryResult","ngeoQueryOptions","ngeoLayerHelper"];
Vi.prototype.Ee=function(b){var c=b.id;if(!b.wmsSource)if(b.layer&&(b.layer instanceof qf||b.layer instanceof rf)){var d=b.layer.S();d&&d instanceof Yf&&(b.wmsSource=d)}else b.wmsSource=new Yf({url:b.url,params:b.params});b.format?!b.infoFormat&&b.format instanceof Ui&&(b.infoFormat="application/vnd.ogc.gml"):(b.infoFormat||(b.infoFormat="application/vnd.ogc.gml"),d=b.wmsSource.a.LAYERS.split(","),"application/vnd.ogc.gml"===b.infoFormat&&(b.format=new Ui({layers:d})));this.g.push(b);d={features:[],
id:c,identifierAttributeField:void 0!==b.identifierAttributeField?b.identifierAttributeField:c,label:void 0!==b.label?b.label:c,pending:!1};this.hc.Yc.push(d);this.a[c]={source:b,resultSource:d}};Vi.prototype.addSource=Vi.prototype.Ee;Vi.prototype.Fe=function(b){b.forEach(this.Ee,this)};Vi.prototype.addSources=Vi.prototype.Fe;Vi.prototype.clear=function(){Wi(this)};Vi.prototype.clear=Vi.prototype.clear;Vi.prototype.gf=function(b,c){Wi(this);2===c.length&&Xi(this,b,c)};Vi.prototype.issue=Vi.prototype.gf;
function Xi(b,c,d){var e=U(c),f=Se(e.X()),g,h,k,l,n,q,p={},r=e.R();b.f.Dc(Yg(c)).forEach(function(b){if(jf(b)){var c=b.get(this.i);g=c=ha(c)||ga(c)?c:"";h=(b.get(this.j)||[]).slice();if(g&&this.a[g]||h.length){g&&h.push(g);for(var c=0,d=h.length;c<d;c++){g=h[c];n=this.a[g];var e;(e=!n.source.validateLayerParams)||(e=-1!==b.S().a.LAYERS.split(",").indexOf(n.source.wmsSource.a.LAYERS));e&&(n.resultSource.pending=!0,k=n.source.infoFormat,"application/vnd.ogc.gml"===k?(l=n.source.wmsSource.l,p[l]||(p[l]=
[]),p[l].push(n)):n.resultSource.pending=!1)}}}},b);$b(p,function(b){k=b[0].source.infoFormat;var c=b[0].source.wmsSource.a.LAYERS.split(",");q=ag(b[0].source.wmsSource,d,r,f,{INFO_FORMAT:k,FEATURE_COUNT:this.b});for(var e=1,g=b.length;e<g;e++)c=c.concat(b[e].source.wmsSource.a.LAYERS.split(","));c=c.join(",");q=Cf(q,"LAYERS",c);q=Cf(q,"QUERY_LAYERS",c);this.c.get(q).then(function(b,c){b.forEach(function(b){var d=b.source.format.Sc(c.data);b.resultSource.pending=!1;b.resultSource.features=d;this.hc.total+=
d.length},this)}.bind(this,b))},b)}function Wi(b){b.hc.total=0;b.hc.Yc.forEach(function(b){b.features.length=0},b)}A.service("ngeoQuery",Vi);function Yi(b,c,d){this.i=b;this.f=c;this.c=d;this.b=[];this.a={};I(c,"load",this.g,this,!0)}Yi.$inject=["ngeoQuery","gmfThemes","gmfWmsUrl"];Yi.prototype.g=function(){this.f.Gc().then(function(b){for(var c=0,d=b.length;c<d;c++)Zi(this,b[c]);this.i.Fe(this.b)}.bind(this))};
function Zi(b,c){var d=c.metadata,e=c.children,f=c.id,g=d.identifierAttributeField,h=d.wmsLayers||d.queryLayers||c.layers,k=c.name,d=d.wmsUrl||c.url||b.c,l=!1;if(e)for(f=0,g=e.length;f<g;f++)Zi(b,e[f]);else if(!b.a[f]){if(c.childLayers&&c.childLayers.length){var n=[];c.childLayers.forEach(function(b){n.push(b.name)},b);h=n.join(",")}else"WMS"===c.type&&(l=!0);e={id:f,identifierAttributeField:g,label:k,params:{LAYERS:h},url:d,validateLayerParams:l};b.a[f]=e;b.b.push(e)}}
B.service("gmfQueryManager",Yi);A.value("ngeoPopupTemplateUrl",function(b,c){var d=c.ngeoPopupTemplateurl;return void 0!==d?d:"ngeo/popup.html"});function $i(b){return{restrict:"A",templateUrl:b,link:function(b,d){d.addClass("popover");b.close=function(b){b&&(b.stopPropagation(),b.preventDefault());d.addClass("hidden")};b.$watch("open",function(b){d.css("display",b?"block":"none")})}}}$i.$inject=["ngeoPopupTemplateUrl"];A.directive("ngeoPopup",$i);function aj(b,c){this.a=c.$new(!0);this.b=angular.element("<div ngeo-popup></div>");b(this.b)(this.a);angular.element(document.body).append(this.b)}function bj(b,c){return function(){return new aj(b,c)}}bj.$inject=["$compile","$rootScope"];A.factory("ngeoCreatePopup",bj);A.value("ngeoLayertreeTemplateUrl",function(b,c){var d=c.ngeoLayertreeTemplateurl;return void 0!==d?d:"ngeo/layertree.html"});function cj(b,c){return{restrict:"A",scope:!0,templateUrl:c,controller:"NgeoLayertreeController"}}cj.$inject=["$compile","ngeoLayertreeTemplateUrl"];A.directive("ngeoLayertree",cj);
function dj(b,c,d){this.isRoot=c=void 0===d.ngeoLayertreeNotroot;var e=d.ngeoLayertree;this.node=void 0;c?b.$watch(e,function(b){this.node=b}.bind(this)):this.node=b.$eval(e);e=b.$eval(d.ngeoLayertreeMap);this.parent=b.$parent.layertreeCtrl;this.uid=w(this);this.depth=c?0:this.parent.depth+1;b.uid=this.uid;b.depth=this.depth;this.map=e;e=d.ngeoLayertreeNodelayer;void 0===e&&(e=b.$eval(d.ngeoLayertreeNodelayerexpr));this.nodelayerExpr=e;this.layer=c?null:b.$eval(e,{node:this.node,depth:this.depth});
c=d.ngeoLayertreeListeners;void 0===c&&(c=b.$eval(d.ngeoLayertreeListenersexpr));this.listenersExpr=c;null!=c&&b.$eval(c,{treeScope:b,treeCtrl:this});b.layertreeCtrl=this}sa("ngeo.LayertreeController",dj);dj.$inject=["$scope","$element","$attrs"];dj.prototype.Yg=function(b){var c=this.layer,d=this.map;if(void 0!==b)b?Zg(d,c):lf(Yg(d)).remove(c);else return 0<=lf(Yg(d)).a.indexOf(c)};dj.prototype.getSetActive=dj.prototype.Yg;A.controller("NgeoLayertreeController",dj);B.value("gmfLayertreeTemplate",function(){return'<div ngeo-layertree="gmfLayertreeCtrl.tree" ngeo-layertree-map="gmfLayertreeCtrl.map" ngeo-layertree-nodelayer="gmfLayertreeCtrl.getLayer(node, depth)" ngeo-layertree-listeners="gmfLayertreeCtrl.listeners(treeScope, treeCtrl)" ngeo-layertree-templateurl="gmf/layertree.html"</div>'});A.value("ngeoLayertreeTemplateUrl",function(){return"gmf/layertree.html"});
function ej(b){return{scope:{map:"=gmfLayertreeMap",tree:"=gmfLayertreeSource",openLinksInNewWindowFn:"&gmfLayertreeOpenlinksinnewwindow"},bindToController:!0,controller:"GmfLayertreeController",controllerAs:"gmfLayertreeCtrl",template:b}}ej.$inject=["gmfLayertreeTemplate"];B.directive("gmfLayertree",ej);function V(b,c,d,e,f){this.i=b;this.g=c;this.a=f;this.Qa=e;this.j=d();this.f={};this.b={};this.openLinksInNewWindow=!0===this.openLinksInNewWindowFn()?!0:!1;this.c=this.Qa.Te(this.map,"data")}
sa("gmf.LayertreeController",V);V.$inject=["$http","$sce","ngeoCreatePopup","ngeoLayerHelper","gmfWmsUrl"];function fj(b){var c=b.mixed;return void 0!==b.children&&c?"MixedGroup":void 0===b.children||c?"WMTS"===b.type?"WMTS":null!=b.url?"externalWMS":"WMS":"NotMixedGroup"}
V.prototype.ma=function(b,c,d){var e=fj(b),f=null;if(1===c){switch(e){case "MixedGroup":d=new pb;var g,e=[],f=[];gj(this,b,e);for(b=0;b<e.length;b++)g=e[b],c=this.ma(g,1,!0),null!=c&&(d.push(c),f.push(g.name));b=this.Qa.vd(d);this.b[w(b)]=[];return b;case "NotMixedGroup":f=hj(this,b,!0),c=this.Qa.wd(b.url||this.a,""),ij(c,f),this.b[w(c)]=[],f=c}switch(e){case "WMTS":f=jj(this,b);break;case "WMS":case "externalWMS":e=b.url||this.a,f=d?this.Qa.wd(e,b.name):null}}null!=f&&(d=kj(this,b),f.set("querySourceIds",
d),f.set("layerName",b.name),rb(lf(this.c),0,f),d=b.metadata,void 0===b.children&&null!=d&&"true"!=d.isChecked&&f.Ta(!1));return f};V.prototype.getLayer=V.prototype.ma;function jj(b,c){var d=new rf;b.Qa.xd(c.url||"",c.name).then(function(b){pf(d,b.S());d.set("capabilitiesStyles",b.get("capabilitiesStyles"))});return d}function gj(b,c,d){var e=c.children;if(void 0!==e)for(c=0;c<e.length;c++)gj(b,e[c],d);else d.push(c)}
function hj(b,c,d){var e=[],f=[];gj(b,c,f);var g;for(g=0;g<f.length;g++)c=f[g],b=c.metadata,(!d||null!=b&&"false"!=b.isChecked)&&e.push(c.name);return e}function lj(b){for(;1<b.depth;)b=b.parent;return b}V.prototype.listeners=function(b,c){var d=this.c;b.$on("$destroy",function(){lf(d).remove(c.layer)}.bind(c))};V.prototype.listeners=V.prototype.listeners;
V.prototype.Wg=function(b){var c,d=U(this.map).R(),e=b.maxResolutionHint;b=b.minResolutionHint;if(void 0!==b&&d<b||void 0!==e&&d>e)c="outOfResolution";return c||null};V.prototype.getResolutionStyle=V.prototype.Wg;
V.prototype.pj=function(b){var c=b.node,d=fj(c),e=b.layer,f;f=lj(b);var g=f.layer;b="on"===this.bf(b)?!0:!1;switch(d){case "WMS":case "WMTS":case "externalWMS":if(g instanceof kf)e.Ta(!b);else{d=g.S();f=f.node;var e=jf(g)?d.a.LAYERS.split(","):[],h,k=[],d=hj(this,f);for(f=0;f<d.length;f++)h=d[f],h===c.name?b||k.push(h):0<=e.indexOf(h)&&k.push(h);ij(g,k)}break;case "MixedGroup":e=[];d=hj(this,c);c=this.Qa.Dc(g);for(f=0;f<c.length;f++)g=c[f],k=c[f].S(),k instanceof Ug?0<=d.indexOf(k.ma())&&e.push(g):
k instanceof Yf&&0<=d.indexOf(k.a.LAYERS)&&e.push(g);for(f=0;f<e.length;f++)e[f].Ta(!b);break;case "NotMixedGroup":d=hj(this,c);k=g.S();c=jf(g)?k.a.LAYERS.split(","):[];if(b)for(f=0;f<d.length;f++)Oa(c,d[f]);else for(f=0;f<d.length;f++)b=c,e=d[f],Na(b,e)||b.push(e);ij(g,c)}};V.prototype.toggleActive=V.prototype.pj;
V.prototype.bf=function(b){var c,d=b.layer,e=b.node,f=fj(e),g=lj(b).layer,h=this.b[w(g)];switch(f){case "WMS":case "WMTS":case "externalWMS":if(g instanceof kf){if(null==d){c=this.Qa.Dc(lj(b).layer);var g=b.node,k;for(k=0;k<c.length;k++)if(f=c[k],d=f.S(),d instanceof Ug&&d.ma()===g.name){b.layer=f;break}else if(d instanceof Yf&&d.a.LAYERS===g.name){b.layer=f;break}d=b.layer}c=null!=d&&jf(d)?"on":"off"}else b=g.S(),c=0>b.a.LAYERS.split(",").indexOf(e.name)||!jf(g)?"off":"on";"on"===c?(e=e.name,Na(h,
e)||h.push(e)):Oa(h,e.name);break;case "MixedGroup":case "NotMixedGroup":e=hj(this,e);for(b=c=0;b<e.length;b++)0<=h.indexOf(e[b])&&c++;c=0===c?"off":c===e.length?"on":"indeterminate"}return c||"off"};V.prototype.getNodeState=V.prototype.bf;function ij(b,c){if(0>=c.length)b.Ta(!1);else{b.Ta(!0);c.reverse();var d=b.S();Ua(d.a,{LAYERS:c.join(",")});Zf(d);d.g=null;d.b()}}
V.prototype.Tg=function(b){b=b.node;var c=b.metadata.legendRule;return void 0!==b.children||void 0===c||"WMTS"===b.type||"external WMS"===b.type||void 0!==b.childLayers&&1<b.childLayers.length?null:mj(this,b,c)};V.prototype.getLegendIconURL=V.prototype.Tg;V.prototype.Ug=function(b){var c=b.node;if(void 0!==c.children)return null;b=b.layer;var d;"WMTS"===c.type&&null!=b?(c=b.get("capabilitiesStyles"),void 0!==c&&(c=c[0].legendURL,void 0!==c&&(d=c[0].href)),d=d||null):d=mj(this,c);return d};
V.prototype.getLegendURL=V.prototype.Ug;function mj(b,c,d){var e,f=U(b.map);e=f.R();f=Te(f.X());e=25.4/.28*f*39.37*e;b=c.url||b.a;void 0!==b&&(b=Cf(b,"FORMAT","image/png"),b=Cf(b,"TRANSPARENT",!0),b=Cf(b,"SERVICE","wms"),b=Cf(b,"VERSION","1.1.1"),b=Cf(b,"REQUEST","GetLegendGraphic"),b=Cf(b,"LAYER",c.name),b=Cf(b,"SCALE",e),void 0!==d&&(b=Cf(b,"RULE",d)));return b||null}
V.prototype.Kg=function(b){var c=b.uid.toString(),d=b.node;b=d.metadata.metadataUrl;if(void 0!==b){c in this.f||(this.f[c]=this.i.get(b).then(function(b){return this.g.trustAsHtml(b.data)}.bind(this)));var e=this.j;this.f[c].then(function(b){e.a.title=d.name;e.a.content=b;e.a.open=!0})}};V.prototype.displayMetadata=V.prototype.Kg;V.prototype.Vg=function(b){b=b.layer;var c;if(c=void 0!==b&&b instanceof rf&&void 0!==b.S)c=null==b.S();return c?"noSource":null};V.prototype.getNoSourceStyle=V.prototype.Vg;
V.prototype.Ij=function(b){var c=U(this.map);b=b.minResolutionHint||b.maxResolutionHint;void 0!==b&&nj(c,b)};V.prototype.zoomToResolution=V.prototype.Ij;function kj(b,c){var d=[],e=c.children||c;e&&e.length?e.forEach(function(b){d=d.concat(kj(this,b))},b):void 0!==c.id&&d.push(c.id);return d}B.controller("GmfLayertreeController",V);function oj(b,c){Sa.call(this,b);this.previous=c}y(oj,Sa);function pj(){kb.call(this);this.a={}}y(pj,kb);pj.prototype.get=function(b){return w(b).toString()in this.a?lf(Yg(b)).item(0):null};
pj.prototype.set=function(b,c){var d=w(b).toString(),e=this.get(b);if(null!==e)if(null!==c){var d=lf(Yg(b)),f=d.get("length");if(0<f)f=d.a[0],d.a[0]=c,d.B(new ob("remove",f,d)),d.B(new ob("add",c,d));else{for(;0>f;++f)rb(d,f,void 0);rb(d,0,c)}}else sb(lf(Yg(b)),0),delete this.a[d];else null!==c&&(rb(lf(Yg(b)),0,c),this.a[d]=!0);this.B(new oj("change",e));return e};A.service("ngeoBackgroundLayerMgr",pj);function qj(b){return function(c,d,e){var f=null;return function(){var g=this,h=arguments;null!==f&&b.cancel(f);f=b(function(){f=null;c.apply(g,h)},d,e)}}}qj.$inject=["$timeout"];A.factory("ngeoDebounce",qj);function rj(b){b=b?b:{};var c=Ua({},b);delete c.style;delete c.Lf;delete c.bd;delete c.cd;of.call(this,c);this.l=void 0!==b.Lf?b.Lf:100;this.j=null;this.i=void 0;c=b.style;this.j=void 0!==c?c:Vh;this.i=null===c?void 0:Th(this.j);this.b();this.s=void 0!==b.bd?b.bd:!1;this.v=void 0!==b.cd?b.cd:!1}y(rj,of);function sj(b,c,d){return function(e,f,g){var h=new XMLHttpRequest;h.open("GET",ia(b)?b(e,f,g):b,!0);"arraybuffer"==c.aa()&&(h.responseType="arraybuffer");h.onload=function(){if(200<=h.status&&300>h.status){var b=c.aa(),e;"json"==b||"text"==b?e=h.responseText:"xml"==b?(e=h.responseXML)||(e=Ad(h.responseText)):"arraybuffer"==b&&(e=h.response);e&&d.call(this,c.Sc(e,{Fb:g}),c.f(e))}}.bind(this);h.send()}}function tj(b,c){return sj(b,c,function(b){uj(this,b)})};function vj(){return[[-Infinity,-Infinity,Infinity,Infinity]]};var wj;
(function(){var b={P:{}};(function(){function c(b,d){if(!(this instanceof c))return new c(b,d);this.hd=Math.max(4,b||9);this.ze=Math.max(2,Math.ceil(.4*this.hd));d&&this.rg(d);this.clear()}function d(b,c){b.bbox=e(b,0,b.children.length,c)}function e(b,c,d,e){for(var g=[Infinity,Infinity,-Infinity,-Infinity],h;c<d;c++)h=b.children[c],f(g,b.ga?e(h):h.bbox);return g}function f(b,c){b[0]=Math.min(b[0],c[0]);b[1]=Math.min(b[1],c[1]);b[2]=Math.max(b[2],c[2]);b[3]=Math.max(b[3],c[3])}function g(b,c){return b.bbox[0]-
c.bbox[0]}function h(b,c){return b.bbox[1]-c.bbox[1]}function k(b){return(b[2]-b[0])*(b[3]-b[1])}function l(b){return b[2]-b[0]+(b[3]-b[1])}function n(b,c){return b[0]<=c[0]&&b[1]<=c[1]&&c[2]<=b[2]&&c[3]<=b[3]}function q(b,c){return c[0]<=b[2]&&c[1]<=b[3]&&c[2]>=b[0]&&c[3]>=b[1]}function p(b,c,d,e,f){for(var g=[c,d],h;g.length;)d=g.pop(),c=g.pop(),d-c<=e||(h=c+Math.ceil((d-c)/e/2)*e,r(b,c,d,h,f),g.push(c,h,h,d))}function r(b,c,d,e,f){for(var g,h,k,l,n;d>c;){600<d-c&&(g=d-c+1,h=e-c+1,k=Math.log(g),
l=.5*Math.exp(2*k/3),n=.5*Math.sqrt(k*l*(g-l)/g)*(0>h-g/2?-1:1),k=Math.max(c,Math.floor(e-h*l/g+n)),h=Math.min(d,Math.floor(e+(g-h)*l/g+n)),r(b,k,h,e,f));g=b[e];h=c;l=d;u(b,c,e);for(0<f(b[d],g)&&u(b,c,d);h<l;){u(b,h,l);h++;for(l--;0>f(b[h],g);)h++;for(;0<f(b[l],g);)l--}0===f(b[c],g)?u(b,c,l):(l++,u(b,l,d));l<=e&&(c=l+1);e<=l&&(d=l-1)}}function u(b,c,d){var e=b[c];b[c]=b[d];b[d]=e}c.prototype={all:function(){return this.ue(this.data,[])},search:function(b){var c=this.data,d=[],e=this.wa;if(!q(b,c.bbox))return d;
for(var f=[],g,h,k,l;c;){g=0;for(h=c.children.length;g<h;g++)k=c.children[g],l=c.ga?e(k):k.bbox,q(b,l)&&(c.ga?d.push(k):n(b,l)?this.ue(k,d):f.push(k));c=f.pop()}return d},load:function(b){if(!b||!b.length)return this;if(b.length<this.ze){for(var c=0,d=b.length;c<d;c++)this.insert(b[c]);return this}b=this.we(b.slice(),0,b.length-1,0);this.data.children.length?this.data.height===b.height?this.Ce(this.data,b):(this.data.height<b.height&&(c=this.data,this.data=b,b=c),this.ye(b,this.data.height-b.height-
1,!0)):this.data=b;return this},insert:function(b){b&&this.ye(b,this.data.height-1);return this},clear:function(){this.data={children:[],height:1,bbox:[Infinity,Infinity,-Infinity,-Infinity],ga:!0};return this},remove:function(b){if(!b)return this;for(var c=this.data,d=this.wa(b),e=[],f=[],g,h,k,l;c||e.length;){c||(c=e.pop(),h=e[e.length-1],g=f.pop(),l=!0);if(c.ga&&(k=c.children.indexOf(b),-1!==k)){c.children.splice(k,1);e.push(c);this.pg(e);break}l||c.ga||!n(c.bbox,d)?h?(g++,c=h.children[g],l=!1):
c=null:(e.push(c),f.push(g),g=0,h=c,c=c.children[0])}return this},wa:function(b){return b},sd:function(b,c){return b[0]-c[0]},td:function(b,c){return b[1]-c[1]},toJSON:function(){return this.data},ue:function(b,c){for(var d=[];b;)b.ga?c.push.apply(c,b.children):d.push.apply(d,b.children),b=d.pop();return c},we:function(b,c,e,f){var g=e-c+1,h=this.hd,k;if(g<=h)return k={children:b.slice(c,e+1),height:1,bbox:null,ga:!0},d(k,this.wa),k;f||(f=Math.ceil(Math.log(g)/Math.log(h)),h=Math.ceil(g/Math.pow(h,
f-1)));k={children:[],height:f,bbox:null,ga:!1};var g=Math.ceil(g/h),h=g*Math.ceil(Math.sqrt(h)),l,n,q;for(p(b,c,e,h,this.sd);c<=e;c+=h)for(n=Math.min(c+h-1,e),p(b,c,n,g,this.td),l=c;l<=n;l+=g)q=Math.min(l+g-1,n),k.children.push(this.we(b,l,q,f-1));d(k,this.wa);return k},og:function(b,c,d,e){for(var f,g,h,l,n,p,q,r;;){e.push(c);if(c.ga||e.length-1===d)break;q=r=Infinity;f=0;for(g=c.children.length;f<g;f++)h=c.children[f],n=k(h.bbox),p=h.bbox,p=(Math.max(p[2],b[2])-Math.min(p[0],b[0]))*(Math.max(p[3],
b[3])-Math.min(p[1],b[1]))-n,p<r?(r=p,q=n<q?n:q,l=h):p===r&&n<q&&(q=n,l=h);c=l}return c},ye:function(b,c,d){var e=this.wa;d=d?b.bbox:e(b);var e=[],g=this.og(d,this.data,c,e);g.children.push(b);for(f(g.bbox,d);0<=c;)if(e[c].children.length>this.hd)this.wg(e,c),c--;else break;this.lg(d,e,c)},wg:function(b,c){var e=b[c],f=e.children.length,g=this.ze;this.mg(e,g,f);f=this.ng(e,g,f);f={children:e.children.splice(f,e.children.length-f),height:e.height,bbox:null,ga:!1};e.ga&&(f.ga=!0);d(e,this.wa);d(f,this.wa);
c?b[c-1].children.push(f):this.Ce(e,f)},Ce:function(b,c){this.data={children:[b,c],height:b.height+1,bbox:null,ga:!1};d(this.data,this.wa)},ng:function(b,c,d){var f,g,h,l,n,p,q;n=p=Infinity;for(f=c;f<=d-c;f++)g=e(b,0,f,this.wa),h=e(b,f,d,this.wa),l=Math.max(0,Math.min(g[2],h[2])-Math.max(g[0],h[0]))*Math.max(0,Math.min(g[3],h[3])-Math.max(g[1],h[1])),g=k(g)+k(h),l<n?(n=l,q=f,p=g<p?g:p):l===n&&g<p&&(p=g,q=f);return q},mg:function(b,c,d){var e=b.ga?this.sd:g,f=b.ga?this.td:h,k=this.ve(b,c,d,e);c=this.ve(b,
c,d,f);k<c&&b.children.sort(e)},ve:function(b,c,d,g){b.children.sort(g);g=this.wa;var h=e(b,0,c,g),k=e(b,d-c,d,g),n=l(h)+l(k),p,q;for(p=c;p<d-c;p++)q=b.children[p],f(h,b.ga?g(q):q.bbox),n+=l(h);for(p=d-c-1;p>=c;p--)q=b.children[p],f(k,b.ga?g(q):q.bbox),n+=l(k);return n},lg:function(b,c,d){for(;0<=d;d--)f(c[d].bbox,b)},pg:function(b){for(var c=b.length-1,e;0<=c;c--)0===b[c].children.length?0<c?(e=b[c-1].children,e.splice(e.indexOf(b[c]),1)):this.clear():d(b[c],this.wa)},rg:function(b){var c=["return a",
" - b",";"];this.sd=new Function("a","b",c.join(b[0]));this.td=new Function("a","b",c.join(b[1]));this.wa=new Function("a","return [a"+b.join(", a")+"];")}};"undefined"!==typeof b?b.P=c:"undefined"!==typeof self?self.a=c:window.a=c})();wj=b.P})();function xj(b){this.b=wj(b);this.a={}}m=xj.prototype;m.insert=function(b,c){var d=[b[0],b[1],b[2],b[3],c];this.b.insert(d);this.a[w(c)]=d};m.load=function(b,c){for(var d=Array(c.length),e=0,f=c.length;e<f;e++){var g=b[e],h=c[e],g=[g[0],g[1],g[2],g[3],h];d[e]=g;this.a[w(h)]=g}this.b.load(d)};m.remove=function(b){b=w(b);var c=this.a[b];delete this.a[b];return null!==this.b.remove(c)};function yj(b){return b.b.all().map(function(b){return b[4]})}
function zj(b,c){return b.b.search(c).map(function(b){return b[4]})}m.forEach=function(b,c){return Aj(yj(this),b,c)};function Bj(b,c,d,e){return Aj(zj(b,c),d,e)}function Aj(b,c,d){for(var e,f=0,g=b.length;f<g&&!(e=c.call(d,b[f]));f++);return e}m.Ia=function(){return Wa(this.a)};m.clear=function(){this.b.clear();this.a={}};m.G=function(){return this.b.data.bbox};function Cj(b){b=b||{};ff.call(this,{ca:b.ca,ea:b.ea,projection:void 0,state:"ready",wrapX:void 0!==b.wrapX?b.wrapX:!0});this.v=Md;void 0!==b.Wh?this.v=b.Wh:void 0!==b.url&&(this.v=tj(b.url,b.format));this.D=void 0!==b.mj?b.mj:vj;var c=void 0!==b.mc?b.mc:!0;this.a=c?new xj:null;this.A=new xj;this.c={};this.g={};this.i={};this.j={};this.l=null;var d,e;b.features instanceof pb?(d=b.features,e=d.a):ea(b.features)&&(e=b.features);c||void 0!==d||(d=new pb(e));void 0!==e&&Dj(this,e);void 0!==d&&Ej(this,
d)}y(Cj,ff);m=Cj.prototype;m.ia=function(b){var c=w(b).toString();if(Fj(this,c,b)){Gj(this,c,b);var d=b.J();d?(c=d.G(),this.a&&this.a.insert(c,b)):this.c[c]=b;this.B(new Hj("addfeature",b))}this.b()};function Gj(b,c,d){b.j[c]=[I(d,"change",b.uf,b),I(d,"propertychange",b.uf,b)]}function Fj(b,c,d){var e=!0,f=d.Ya();void 0!==f?f.toString()in b.g?e=!1:b.g[f.toString()]=d:b.i[c]=d;return e}function uj(b,c){Dj(b,c);b.b()}
function Dj(b,c){var d,e,f,g,h=[],k=[],l=[];e=0;for(f=c.length;e<f;e++)g=c[e],d=w(g).toString(),Fj(b,d,g)&&k.push(g);e=0;for(f=k.length;e<f;e++){g=k[e];d=w(g).toString();Gj(b,d,g);var n=g.J();n?(d=n.G(),h.push(d),l.push(g)):b.c[d]=g}b.a&&b.a.load(h,l);e=0;for(f=k.length;e<f;e++)b.B(new Hj("addfeature",k[e]))}
function Ej(b,c){var d=!1;I(b,"addfeature",function(b){d||(d=!0,c.push(b.feature),d=!1)});I(b,"removefeature",function(b){d||(d=!0,c.remove(b.feature),d=!1)});I(c,"add",function(b){d||(b=b.element,d=!0,this.ia(b),d=!1)},b);I(c,"remove",function(b){d||(b=b.element,d=!0,this.pb(b),d=!1)},b);b.l=c}
m.clear=function(b){if(b){for(var c in this.j)this.j[c].forEach(G);this.l||(this.j={},this.g={},this.i={})}else if(this.a){this.a.forEach(this.fe,this);for(var d in this.c)this.fe(this.c[d])}this.l&&this.l.clear();this.a&&this.a.clear();this.A.clear();this.c={};this.B(new Hj("clear"));this.b()};function Ij(b,c,d,e){b.a?Bj(b.a,c,d,e):b.l&&b.l.forEach(d,e)}m.G=function(){return this.a.G()};
m.uf=function(b){b=b.target;var c=w(b).toString(),d=b.J();if(d)if(d=d.G(),c in this.c)delete this.c[c],this.a&&this.a.insert(d,b);else{if(this.a){var e=this.a,f=w(b);Kb(e.a[f].slice(0,4),d)||(e.remove(b),e.insert(d,b))}}else c in this.c||(this.a&&this.a.remove(b),this.c[c]=b);d=b.Ya();void 0!==d?(d=d.toString(),c in this.i?(delete this.i[c],this.g[d]=b):this.g[d]!==b&&(Jj(this,b),this.g[d]=b)):c in this.i||(Jj(this,b),this.i[c]=b);this.b();this.B(new Hj("changefeature",b))};
m.Ia=function(){return this.a.Ia()&&Wa(this.c)};function Kj(b,c,d,e){var f=b.A;c=b.D(c,d);var g,h;g=0;for(h=c.length;g<h;++g){var k=c[g];Bj(f,k,function(b){return Ib(b.extent,k)})||(b.v.call(b,k,d,e),f.insert(k,{extent:k.slice()}))}}m.pb=function(b){var c=w(b).toString();c in this.c?delete this.c[c]:this.a&&this.a.remove(b);this.fe(b);this.b()};
m.fe=function(b){var c=w(b).toString();this.j[c].forEach(G);delete this.j[c];var d=b.Ya();void 0!==d?delete this.g[d.toString()]:delete this.i[c];this.B(new Hj("removefeature",b))};function Jj(b,c){for(var d in b.g)if(b.g[d]===c){delete b.g[d];break}}function Hj(b,c){Sa.call(this,b);this.feature=c}y(Hj,Sa);function Lj(){this.b={};this.a=[];this.f=new Cj({mc:!1});this.Vd=new rj({source:this.f,style:this.ki.bind(this),bd:!0,cd:!0})}m=Lj.prototype;m.ia=function(b,c){var d=w(b).toString();this.b[d]=c;this.a[c].features[d]=b;this.f.ia(b)};m.pb=function(b,c){var d=w(b).toString();delete this.b[d];delete this.a[c].features[d];this.f.pb(b)};m.clear=function(b){var c=this.a[b],d;for(d in c.features)this.pb(c.features[d],b)};m.ma=function(){return this.Vd};
function Mj(b){var c=b.a.length;b.a.push({Sf:Vh,features:{}});return new Nj(b,c)}m.ki=function(b,c){var d=w(b).toString();return this.a[this.b[d]].Sf(b,c)};function Nj(b,c){this.b=b;this.a=null;this.f=c}m=Nj.prototype;m.ia=function(b){this.b.ia(b,this.f)};m.pb=function(b){this.b.pb(b,this.f)};m.clear=function(){this.b.clear(this.f)};
function Oj(b,c){null!==b.a&&(b.a.clear(),cb(b.a,"add",b.mf,b),cb(b.a,"remove",b.nf,b));null!==c&&(c.forEach(function(b){this.ia(b)},b),I(c,"add",b.mf,b),I(c,"remove",b.nf,b));b.a=c}function Pj(b,c){b.b.a[b.f].Sf=null===c?Vh:Th(c)}m.mf=function(b){this.ia(b.element)};m.nf=function(b){this.pb(b.element)};A.service("ngeoFeatureOverlayMgr",Lj);function Qj(b,c,d,e){this.top=b;this.right=c;this.bottom=d;this.left=e}m=Qj.prototype;m.clone=function(){return new Qj(this.top,this.right,this.bottom,this.left)};m.contains=function(b){return this&&b?b instanceof Qj?b.left>=this.left&&b.right<=this.right&&b.top>=this.top&&b.bottom<=this.bottom:b.x>=this.left&&b.x<=this.right&&b.y>=this.top&&b.y<=this.bottom:!1};
m.ceil=function(){this.top=Math.ceil(this.top);this.right=Math.ceil(this.right);this.bottom=Math.ceil(this.bottom);this.left=Math.ceil(this.left);return this};m.floor=function(){this.top=Math.floor(this.top);this.right=Math.floor(this.right);this.bottom=Math.floor(this.bottom);this.left=Math.floor(this.left);return this};m.round=function(){this.top=Math.round(this.top);this.right=Math.round(this.right);this.bottom=Math.round(this.bottom);this.left=Math.round(this.left);return this};
m.translate=function(b,c){b instanceof vc?(this.left+=b.x,this.right+=b.x,this.top+=b.y,this.bottom+=b.y):(this.left+=b,this.right+=b,ha(c)&&(this.top+=c,this.bottom+=c));return this};m.scale=function(b,c){var d=ha(c)?c:b;this.left*=b;this.right*=b;this.top*=d;this.bottom*=d;return this};function Rj(b,c,d,e){this.left=b;this.top=c;this.width=d;this.height=e}m=Rj.prototype;m.clone=function(){return new Rj(this.left,this.top,this.width,this.height)};m.contains=function(b){return b instanceof Rj?this.left<=b.left&&this.left+this.width>=b.left+b.width&&this.top<=b.top&&this.top+this.height>=b.top+b.height:b.x>=this.left&&b.x<=this.left+this.width&&b.y>=this.top&&b.y<=this.top+this.height};
m.ceil=function(){this.left=Math.ceil(this.left);this.top=Math.ceil(this.top);this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};m.floor=function(){this.left=Math.floor(this.left);this.top=Math.floor(this.top);this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};m.round=function(){this.left=Math.round(this.left);this.top=Math.round(this.top);this.width=Math.round(this.width);this.height=Math.round(this.height);return this};
m.translate=function(b,c){b instanceof vc?(this.left+=b.x,this.top+=b.y):(this.left+=b,ha(c)&&(this.top+=c));return this};m.scale=function(b,c){var d=ha(c)?c:b;this.left*=b;this.width*=b;this.top*=d;this.height*=d;return this};function Sj(b){Sj[" "](b);return b}Sj[" "]=ca;function Tj(b,c){var d=zc(b);return d.defaultView&&d.defaultView.getComputedStyle&&(d=d.defaultView.getComputedStyle(b,null))?d[c]||d.getPropertyValue(c)||"":""}function Uj(b){var c;try{c=b.getBoundingClientRect()}catch(d){return{left:0,top:0,right:0,bottom:0}}hc&&b.ownerDocument.body&&(b=b.ownerDocument,c.left-=b.documentElement.clientLeft+b.body.clientLeft,c.top-=b.documentElement.clientTop+b.body.clientTop);return c}
function Vj(b){var c=zc(b),d=new vc(0,0),e;e=c?zc(c):document;var f;(f=!hc||9<=Number(sc))||(xc(e),f=!0);if(b==(f?e.documentElement:e.body))return d;b=Uj(b);c=Nc(xc(c));d.x=b.left+c.x;d.y=b.top+c.y;return d}function Wj(b){"number"==typeof b&&(b=b+"px");return b}
function Xj(b){var c=Yj;if("none"!=(Tj(b,"display")||(b.currentStyle?b.currentStyle.display:null)||b.style&&b.style.display))return c(b);var d=b.style,e=d.display,f=d.visibility,g=d.position;d.visibility="hidden";d.position="absolute";d.display="inline";b=c(b);d.display=e;d.position=g;d.visibility=f;return b}function Yj(b){var c=b.offsetWidth,d=b.offsetHeight,e=kc&&!c&&!d;return ba(c)&&!e||!b.getBoundingClientRect?new wc(c,d):(b=Uj(b),new wc(b.right-b.left,b.bottom-b.top))}
function Zj(b){var c=Vj(b);b=Xj(b);return new Rj(c.x,c.y,b.width,b.height)}function ak(b,c){b.style.display=c?"":"none"}function bk(b,c,d,e){if(/^\d+px?$/.test(c))return parseInt(c,10);var f=b.style[d],g=b.runtimeStyle[d];b.runtimeStyle[d]=b.currentStyle[d];b.style[d]=c;c=b.style[e];b.style[d]=f;b.runtimeStyle[d]=g;return c}function ck(b,c){var d=b.currentStyle?b.currentStyle[c]:null;return d?bk(b,d,"left","pixelLeft"):0}var dk={thin:2,medium:4,thick:6};
function ek(b,c){if("none"==(b.currentStyle?b.currentStyle[c+"Style"]:null))return 0;var d=b.currentStyle?b.currentStyle[c+"Width"]:null;return d in dk?dk[d]:bk(b,d,"left","pixelLeft")};var fk;
function gk(){var b=t.MessageChannel;"undefined"===typeof b&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!Zb("Presto")&&(b=function(){var b=document.createElement("IFRAME");b.style.display="none";b.src="";document.documentElement.appendChild(b);var c=b.contentWindow,b=c.document;b.open();b.write("");b.close();var d="callImmediate"+Math.random(),e="file:"==c.location.protocol?"*":c.location.protocol+"//"+c.location.host,b=pa(function(b){if(("*"==e||b.origin==e)&&b.data==
d)this.port1.onmessage()},this);c.addEventListener("message",b,!1);this.port1={};this.port2={postMessage:function(){c.postMessage(d,e)}}});if("undefined"!==typeof b&&!Zb("Trident")&&!Zb("MSIE")){var c=new b,d={},e=d;c.port1.onmessage=function(){if(ba(d.next)){d=d.next;var b=d.Le;d.Le=null;b()}};return function(b){e.next={Le:b};e=e.next;c.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(b){var c=document.createElement("SCRIPT");
c.onreadystatechange=function(){c.onreadystatechange=null;c.parentNode.removeChild(c);c=null;b();b=null};document.documentElement.appendChild(c)}:function(b){t.setTimeout(b,0)}};function hk(b){if(b.za&&"function"==typeof b.za)return b.za();if(ga(b))return b.split("");if(fa(b)){for(var c=[],d=b.length,e=0;e<d;e++)c.push(b[e]);return c}return ac(b)}
function ik(b,c,d){if(b.forEach&&"function"==typeof b.forEach)b.forEach(c,d);else if(fa(b)||ga(b))Ka(b,c,d);else{var e;if(b.ya&&"function"==typeof b.ya)e=b.ya();else if(b.za&&"function"==typeof b.za)e=void 0;else if(fa(b)||ga(b)){e=[];for(var f=b.length,g=0;g<f;g++)e.push(g)}else e=bc(b);for(var f=hk(b),g=f.length,h=0;h<g;h++)c.call(d,f[h],e&&e[h],b)}};var jk="StopIteration"in t?t.StopIteration:{message:"StopIteration",stack:""};function kk(){}kk.prototype.next=function(){throw jk;};kk.prototype.zb=function(){return this};function lk(b){if(b instanceof kk)return b;if("function"==typeof b.zb)return b.zb(!1);if(fa(b)){var c=0,d=new kk;d.next=function(){for(;;){if(c>=b.length)throw jk;if(c in b)return b[c++];c++}};return d}throw Error("Not implemented");}
function mk(b,c){if(fa(b))try{Ka(b,c,void 0)}catch(d){if(d!==jk)throw d;}else{b=lk(b);try{for(;;)c.call(void 0,b.next(),void 0,b)}catch(d){if(d!==jk)throw d;}}}function nk(b){if(fa(b))return Qa(b);b=lk(b);var c=[];mk(b,function(b){c.push(b)});return c};function ok(b,c){this.b={};this.a=[];this.c=this.f=0;var d=arguments.length;if(1<d){if(d%2)throw Error("Uneven number of arguments");for(var e=0;e<d;e+=2)this.set(arguments[e],arguments[e+1])}else if(b){b instanceof ok?(d=b.ya(),e=b.za()):(d=bc(b),e=ac(b));for(var f=0;f<d.length;f++)this.set(d[f],e[f])}}m=ok.prototype;m.Oa=function(){return this.f};m.za=function(){pk(this);for(var b=[],c=0;c<this.a.length;c++)b.push(this.b[this.a[c]]);return b};m.ya=function(){pk(this);return this.a.concat()};
m.equals=function(b,c){if(this===b)return!0;if(this.f!=b.Oa())return!1;var d=c||qk;pk(this);for(var e,f=0;e=this.a[f];f++)if(!d(this.get(e),b.get(e)))return!1;return!0};function qk(b,c){return b===c}m.Ia=function(){return 0==this.f};m.clear=function(){this.b={};this.c=this.f=this.a.length=0};m.remove=function(b){return rk(this.b,b)?(delete this.b[b],this.f--,this.c++,this.a.length>2*this.f&&pk(this),!0):!1};
function pk(b){if(b.f!=b.a.length){for(var c=0,d=0;c<b.a.length;){var e=b.a[c];rk(b.b,e)&&(b.a[d++]=e);c++}b.a.length=d}if(b.f!=b.a.length){for(var f={},d=c=0;c<b.a.length;)e=b.a[c],rk(f,e)||(b.a[d++]=e,f[e]=1),c++;b.a.length=d}}m.get=function(b,c){return rk(this.b,b)?this.b[b]:c};m.set=function(b,c){rk(this.b,b)||(this.f++,this.a.push(b),this.c++);this.b[b]=c};m.forEach=function(b,c){for(var d=this.ya(),e=0;e<d.length;e++){var f=d[e],g=this.get(f);b.call(c,g,f,this)}};m.clone=function(){return new ok(this)};
m.transpose=function(){for(var b=new ok,c=0;c<this.a.length;c++){var d=this.a[c];b.set(this.b[d],d)}return b};m.zb=function(b){pk(this);var c=0,d=this.c,e=this,f=new kk;f.next=function(){if(d!=e.c)throw Error("The map has changed since the iterator was created");if(c>=e.a.length)throw jk;var f=e.a[c++];return b?f:e.b[f]};return f};function rk(b,c){return Object.prototype.hasOwnProperty.call(b,c)};function sk(){this.a=ra()}new sk;sk.prototype.set=function(b){this.a=b};sk.prototype.get=function(){return this.a};function tk(b){if(b.classList)return b.classList;b=b.className;return ga(b)&&b.match(/\S+/g)||[]}function uk(b,c){return b.classList?b.classList.contains(c):Na(tk(b),c)}function vk(b,c){b.classList?b.classList.add(c):uk(b,c)||(b.className+=0<b.className.length?" "+c:c)}function wk(b,c){if(b.classList)Ka(c,function(c){vk(b,c)});else{var d={};Ka(tk(b),function(b){d[b]=!0});Ka(c,function(b){d[b]=!0});b.className="";for(var e in d)b.className+=0<b.className.length?" "+e:e}}
function xk(b,c){b.classList?b.classList.remove(c):uk(b,c)&&(b.className=La(tk(b),function(b){return b!=c}).join(" "))}function yk(b,c){b.classList?Ka(c,function(c){xk(b,c)}):b.className=La(tk(b),function(b){return!Na(c,b)}).join(" ")};function zk(b,c,d){Sa.call(this,b);this.map=c;this.frameState=void 0!==d?d:null}y(zk,Sa);function Ak(b,c,d){Sa.call(this,b);this.a=c;b=d?d:{};this.buttons=Bk(b);this.pressure=Ck(b,this.buttons);this.bubbles="bubbles"in b?b.bubbles:!1;this.cancelable="cancelable"in b?b.cancelable:!1;this.view="view"in b?b.view:null;this.detail="detail"in b?b.detail:null;this.screenX="screenX"in b?b.screenX:0;this.screenY="screenY"in b?b.screenY:0;this.clientX="clientX"in b?b.clientX:0;this.clientY="clientY"in b?b.clientY:0;this.button="button"in b?b.button:0;this.relatedTarget="relatedTarget"in b?b.relatedTarget:
null;this.pointerId="pointerId"in b?b.pointerId:0;this.width="width"in b?b.width:0;this.height="height"in b?b.height:0;this.pointerType="pointerType"in b?b.pointerType:"";this.isPrimary="isPrimary"in b?b.isPrimary:!1;c.preventDefault&&(this.preventDefault=function(){c.preventDefault()})}y(Ak,Sa);function Bk(b){if(b.buttons||Dk)b=b.buttons;else switch(b.which){case 1:b=1;break;case 2:b=4;break;case 3:b=2;break;default:b=0}return b}
function Ck(b,c){var d=0;b.pressure?d=b.pressure:d=c?.5:0;return d}var Dk=!1;try{Dk=1===(new MouseEvent("click",{buttons:1})).buttons}catch(b){};function Ek(b,c){this.a=b;this.g=c};function Fk(b){Ek.call(this,b,{mousedown:this.ui,mousemove:this.vi,mouseup:this.yi,mouseover:this.xi,mouseout:this.wi});this.b=b.b;this.f=[]}y(Fk,Ek);function Gk(b,c){for(var d=b.f,e=c.clientX,f=c.clientY,g=0,h=d.length,k;g<h&&(k=d[g]);g++){var l=Math.abs(f-k[1]);if(25>=Math.abs(e-k[0])&&25>=l)return!0}return!1}function Hk(b){var c=Ik(b,b),d=c.preventDefault;c.preventDefault=function(){b.preventDefault();d()};c.pointerId=1;c.isPrimary=!0;c.pointerType="mouse";return c}m=Fk.prototype;
m.ui=function(b){if(!Gk(this,b)){(1).toString()in this.b&&this.cancel(b);var c=Hk(b);this.b[(1).toString()]=b;Jk(this.a,Kk,c,b)}};m.vi=function(b){if(!Gk(this,b)){var c=Hk(b);this.a.move(c,b)}};m.yi=function(b){if(!Gk(this,b)){var c=this.b[(1).toString()];c&&c.button===b.button&&(c=Hk(b),Jk(this.a,Lk,c,b),delete this.b[(1).toString()])}};m.xi=function(b){if(!Gk(this,b)){var c=Hk(b);Mk(this.a,c,b)}};m.wi=function(b){if(!Gk(this,b)){var c=Hk(b);Nk(this.a,c,b)}};
m.cancel=function(b){var c=Hk(b);this.a.cancel(c,b);delete this.b[(1).toString()]};function Ok(b){Ek.call(this,b,{MSPointerDown:this.di,MSPointerMove:this.ei,MSPointerUp:this.hi,MSPointerOut:this.fi,MSPointerOver:this.gi,MSPointerCancel:this.ci,MSGotPointerCapture:this.ai,MSLostPointerCapture:this.bi});this.b=b.b;this.f=["","unavailable","touch","pen","mouse"]}y(Ok,Ek);function Pk(b,c){var d=c;ha(c.pointerType)&&(d=Ik(c,c),d.pointerType=b.f[c.pointerType]);return d}m=Ok.prototype;m.di=function(b){this.b[b.pointerId.toString()]=b;var c=Pk(this,b);Jk(this.a,Kk,c,b)};
m.ei=function(b){var c=Pk(this,b);this.a.move(c,b)};m.hi=function(b){var c=Pk(this,b);Jk(this.a,Lk,c,b);delete this.b[b.pointerId.toString()]};m.fi=function(b){var c=Pk(this,b);Nk(this.a,c,b)};m.gi=function(b){var c=Pk(this,b);Mk(this.a,c,b)};m.ci=function(b){var c=Pk(this,b);this.a.cancel(c,b);delete this.b[b.pointerId.toString()]};m.bi=function(b){this.a.B(new Ak("lostpointercapture",b,b))};m.ai=function(b){this.a.B(new Ak("gotpointercapture",b,b))};function Qk(b){Ek.call(this,b,{pointerdown:this.Ji,pointermove:this.Ki,pointerup:this.Ni,pointerout:this.Li,pointerover:this.Mi,pointercancel:this.Ii,gotpointercapture:this.ah,lostpointercapture:this.Xh})}y(Qk,Ek);m=Qk.prototype;m.Ji=function(b){Rk(this.a,b)};m.Ki=function(b){Rk(this.a,b)};m.Ni=function(b){Rk(this.a,b)};m.Li=function(b){Rk(this.a,b)};m.Mi=function(b){Rk(this.a,b)};m.Ii=function(b){Rk(this.a,b)};m.Xh=function(b){Rk(this.a,b)};m.ah=function(b){Rk(this.a,b)};function Sk(b,c){Ek.call(this,b,{touchstart:this.vj,touchmove:this.uj,touchend:this.tj,touchcancel:this.sj});this.b=b.b;this.j=c;this.f=void 0;this.i=0;this.c=void 0}y(Sk,Ek);m=Sk.prototype;m.Nf=function(){this.i=0;this.c=void 0};
function Tk(b,c,d){c=Ik(c,d);c.pointerId=d.identifier+2;c.bubbles=!0;c.cancelable=!0;c.detail=b.i;c.button=0;c.buttons=1;c.width=d.webkitRadiusX||d.radiusX||0;c.height=d.webkitRadiusY||d.radiusY||0;c.pressure=d.webkitForce||d.force||.5;c.isPrimary=b.f===d.identifier;c.pointerType="touch";c.clientX=d.clientX;c.clientY=d.clientY;c.screenX=d.screenX;c.screenY=d.screenY;return c}
function Uk(b,c,d){function e(){c.preventDefault()}var f=Array.prototype.slice.call(c.changedTouches),g=f.length,h,k;for(h=0;h<g;++h)k=Tk(b,c,f[h]),k.preventDefault=e,d.call(b,c,k)}
m.vj=function(b){var c=b.touches,d=Object.keys(this.b),e=d.length;if(e>=c.length){var f=[],g,h,k;for(g=0;g<e;++g){h=d[g];k=this.b[h];var l;if(!(l=1==h))a:{l=c.length;for(var n=void 0,q=0;q<l;q++)if(n=c[q],n.identifier===h-2){l=!0;break a}l=!1}l||f.push(k.out)}for(g=0;g<f.length;++g)this.qd(b,f[g])}c=b.changedTouches[0];d=Object.keys(this.b).length;if(0===d||1===d&&(1).toString()in this.b)this.f=c.identifier,void 0!==this.c&&t.clearTimeout(this.c);Vk(this,b);this.i++;Uk(this,b,this.Fi)};
m.Fi=function(b,c){this.b[c.pointerId]={target:c.target,out:c,zf:c.target};var d=this.a;c.bubbles=!0;Jk(d,Wk,c,b);this.a.enter(c,b);Jk(this.a,Kk,c,b)};m.uj=function(b){b.preventDefault();Uk(this,b,this.$h)};m.$h=function(b,c){var d=this.b[c.pointerId];if(d){var e=d.out,f=d.zf;this.a.move(c,b);e&&f!==c.target&&(e.relatedTarget=c.target,c.relatedTarget=f,e.target=f,c.target?(Nk(this.a,e,b),Mk(this.a,c,b)):(c.target=f,c.relatedTarget=null,this.qd(b,c)));d.out=c;d.zf=c.target}};
m.tj=function(b){Vk(this,b);Uk(this,b,this.Aj)};m.Aj=function(b,c){Jk(this.a,Lk,c,b);this.a.out(c,b);this.a.leave(c,b);delete this.b[c.pointerId];c.isPrimary&&(this.f=void 0,this.c=t.setTimeout(this.Nf.bind(this),200))};m.sj=function(b){Uk(this,b,this.qd)};m.qd=function(b,c){this.a.cancel(c,b);this.a.out(c,b);this.a.leave(c,b);delete this.b[c.pointerId];c.isPrimary&&(this.f=void 0,this.c=t.setTimeout(this.Nf.bind(this),200))};
function Vk(b,c){var d=b.j.f,e=c.changedTouches[0];if(b.f===e.identifier){var f=[e.clientX,e.clientY];d.push(f);t.setTimeout(function(){Uc(d,f)},2500)}};function Xk(b){ib.call(this);this.c=b;this.b={};this.f={};this.a=[];Ah?Yk(this,new Qk(this)):Bh?Yk(this,new Ok(this)):(b=new Fk(this),Yk(this,b),zh&&Yk(this,new Sk(this,b)));b=this.a.length;for(var c,d=0;d<b;d++)c=this.a[d],Zk(this,Object.keys(c.g))}y(Xk,ib);function Yk(b,c){var d=Object.keys(c.g);d&&(d.forEach(function(b){var d=c.g[b];d&&(this.f[b]=d.bind(c))},b),b.a.push(c))}m=Xk.prototype;m.rf=function(b){var c=this.f[b.type];c&&c(b)};
function Zk(b,c){c.forEach(function(b){I(this.c,b,this.rf,this)},b)}function $k(b,c){c.forEach(function(b){cb(this.c,b,this.rf,this)},b)}function Ik(b,c){for(var d={},e,f=0,g=al.length;f<g;f++)e=al[f][0],d[e]=b[e]||c[e]||al[f][1];return d}m.move=function(b,c){Jk(this,bl,b,c)};m.enter=function(b,c){b.bubbles=!1;Jk(this,cl,b,c)};m.leave=function(b,c){b.bubbles=!1;Jk(this,dl,b,c)};m.out=function(b,c){b.bubbles=!0;Jk(this,el,b,c)};m.cancel=function(b,c){Jk(this,fl,b,c)};
function Nk(b,c,d){b.out(c,d);var e=c.relatedTarget;e&&Mc(c.target,e)||b.leave(c,d)}function Mk(b,c,d){c.bubbles=!0;Jk(b,Wk,c,d);var e=c.relatedTarget;e&&Mc(c.target,e)||b.enter(c,d)}function Jk(b,c,d,e){b.B(new Ak(c,e,d))}function Rk(b,c){b.B(new Ak(c.type,c,c))}m.L=function(){for(var b=this.a.length,c,d=0;d<b;d++)c=this.a[d],$k(this,Object.keys(c.g));Xk.U.L.call(this)};
var bl="pointermove",Kk="pointerdown",Lk="pointerup",Wk="pointerover",el="pointerout",cl="pointerenter",dl="pointerleave",fl="pointercancel",al=[["bubbles",!1],["cancelable",!1],["view",null],["detail",null],["screenX",0],["screenY",0],["clientX",0],["clientY",0],["ctrlKey",!1],["altKey",!1],["shiftKey",!1],["metaKey",!1],["button",0],["relatedTarget",null],["buttons",0],["pointerId",0],["width",0],["height",0],["pressure",0],["tiltX",0],["tiltY",0],["pointerType",""],["hwTimestamp",0],["isPrimary",
!1],["type",""],["target",null],["currentTarget",null],["which",0]];function gl(b,c,d,e,f){zk.call(this,b,c,f);this.originalEvent=d;b=c.a.getBoundingClientRect();d=d.changedTouches?d.changedTouches[0]:d;this.pixel=[d.clientX-b.left,d.clientY-b.top];this.coordinate=c.Gb(this.pixel);this.dragging=void 0!==e?e:!1}y(gl,zk);gl.prototype.preventDefault=function(){gl.U.preventDefault.call(this);this.originalEvent.preventDefault()};gl.prototype.stopPropagation=function(){gl.U.stopPropagation.call(this);this.originalEvent.stopPropagation()};
function hl(b,c,d,e,f){gl.call(this,b,c,d.a,e,f);this.a=d}y(hl,gl);function il(b){ib.call(this);this.f=b;this.i=0;this.j=!1;this.c=[];this.b=null;b=this.f.a;this.v=0;this.s={};this.g=new Xk(b);this.a=null;this.u=I(this.g,Kk,this.vh,this);this.l=I(this.g,bl,this.bj,this)}y(il,ib);function jl(b,c){var d;d=new hl(kl,b.f,c);b.B(d);0!==b.i?(t.clearTimeout(b.i),b.i=0,d=new hl(ll,b.f,c),b.B(d)):b.i=t.setTimeout(function(){this.i=0;var b=new hl(ml,this.f,c);this.B(b)}.bind(b),250)}
function nl(b,c){c.type==ol||c.type==pl?delete b.s[c.pointerId]:c.type==ql&&(b.s[c.pointerId]=!0);b.v=Object.keys(b.s).length}m=il.prototype;m.ef=function(b){nl(this,b);var c=new hl(ol,this.f,b);this.B(c);!this.j&&0===b.button&&jl(this,this.b);0===this.v&&(this.c.forEach(G),this.c.length=0,this.j=!1,this.b=null,hb(this.a),this.a=null)};
m.vh=function(b){nl(this,b);var c=new hl(ql,this.f,b);this.B(c);this.b=b;0===this.c.length&&(this.a=new Xk(document),this.c.push(I(this.a,rl,this.si,this),I(this.a,ol,this.ef,this),I(this.g,pl,this.ef,this)))};m.si=function(b){if(b.clientX!=this.b.clientX||b.clientY!=this.b.clientY){this.j=!0;var c=new hl(sl,this.f,b,this.j);this.B(c)}b.preventDefault()};m.bj=function(b){this.B(new hl(b.type,this.f,b,!(!this.b||b.clientX==this.b.clientX&&b.clientY==this.b.clientY)))};
m.L=function(){this.l&&(G(this.l),this.l=null);this.u&&(G(this.u),this.u=null);this.c.forEach(G);this.c.length=0;this.a&&(hb(this.a),this.a=null);this.g&&(hb(this.g),this.g=null);il.U.L.call(this)};var ml="singleclick",kl="click",ll="dblclick",sl="pointerdrag",rl="pointermove",ql="pointerdown",ol="pointerup",pl="pointercancel",tl={Wj:ml,Kj:kl,Lj:ll,Oj:sl,Rj:rl,Nj:ql,Uj:ol,Tj:"pointerover",Sj:"pointerout",Pj:"pointerenter",Qj:"pointerleave",Mj:pl};function ul(b,c,d,e,f,g,h,k){b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=1;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=1;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;0===c&&0===d||xb(b,c,d);if(1!=e||1!=f){c=b[1]*e;d=b[2]*e;var l=b[3]*e,n=b[4]*f,q=b[5]*f,p=b[6]*f;f=b[7]*f;var r=1*b[8],u=1*b[9],v=1*b[10],z=1*b[11],x=b[12],C=b[13],H=b[14],E=b[15];b[0]*=e;b[1]=c;b[2]=d;b[3]=l;b[4]=n;b[5]=q;b[6]=p;b[7]=f;b[8]=r;b[9]=u;b[10]=v;b[11]=z;b[12]=x;b[13]=C;b[14]=H;b[15]=E}0!==g&&(e=b[0],c=b[1],d=b[2],l=b[3],n=b[4],q=b[5],p=b[6],
f=b[7],r=Math.cos(g),g=Math.sin(g),b[0]=e*r+n*g,b[1]=c*r+q*g,b[2]=d*r+p*g,b[3]=l*r+f*g,b[4]=e*-g+n*r,b[5]=c*-g+q*r,b[6]=d*-g+p*r,b[7]=l*-g+f*r);0===h&&0===k||xb(b,h,k);return b}function vl(b,c,d){var e=b[1],f=b[5],g=b[13],h=c[0];c=c[1];d[0]=b[0]*h+b[4]*c+b[12];d[1]=e*h+f*c+g;return d};function wl(b){kb.call(this);this.I=b}y(wl,kb);function xl(b,c,d){return function(e,f){return Gg(b,c,e,f,function(b){d[e]||(d[e]={});d[e][b.oa.toString()]=b})}}wl.prototype.ma=function(){return this.I};wl.prototype.O=function(b){2===b.target.T()&&yl(this)};function yl(b){var c=b.ma();jf(c)&&"ready"==c.Md()&&b.b()}function zl(b,c){c.sf()&&b.Rc.push(qa(function(b,c,f){c=w(b).toString();b.tf(f.M.projection,f.oe[c])},c))}
function Al(b,c){if(c){var d,e,f;e=0;for(f=c.length;e<f;++e)d=c[e],b[w(d).toString()]=d}}function Bl(b,c){var d=c.qa;void 0!==d&&("string"===typeof d?b.Mb[d]="":ka(d)&&(b.Mb[d.src]=d.href))}function Cl(b,c,d,e){c=w(c).toString();d=d.toString();c in b?d in b[c]?b[c][d].extend(e):b[c][d]=e:(b[c]={},b[c][d]=e)}function Dl(b,c,d){return[c*(Math.round(b[0]/c)+d[0]%2/2),c*(Math.round(b[1]/c)+d[1]%2/2)]}
function El(b,c,d,e,f,g,h,k){var l=w(c).toString();l in b.nc||(b.nc[l]={});var n=b.nc[l];b=b.oj;var q=d.Fa,p,r,u,v,z,x;for(x=h;x>=q;--x)for(r=sg(d,g,x,r),u=d.R(x),v=r.b;v<=r.a;++v)for(z=r.c;z<=r.f;++z)h-x<=k?(p=Qg(c,x,v,z,e,f),0==p.T()&&(n[p.oa.toString()]=!0,p.bc()in b.f||b.i([p,l,Bg(d,p.oa),u]))):c.Wf(x,v,z,f)};function Fl(b){b=b||{};this.g=void 0!==b.anchor?b.anchor:[.5,.5];this.c=null;this.b=void 0!==b.jd?b.jd:"top-left";this.j=void 0!==b.kd?b.kd:"fraction";this.u=void 0!==b.ld?b.ld:"fraction";var c=void 0!==b.crossOrigin?b.crossOrigin:null,d=void 0!==b.Mh?b.Mh:null,e=void 0!==b.Nh?b.Nh:null,f=b.src;void 0!==f&&0!==f.length||!d||(f=d.src||w(d).toString());var g=void 0!==b.src?0:2,h=void 0!==b.color?mh(b.color):null,k=Gl.We(),l=k.get(f,c,h);l||(l=new Hl(d,f,e,c,g,h),k.set(f,c,h,l));this.a=l;this.v=void 0!==
b.offset?b.offset:[0,0];this.f=void 0!==b.pf?b.pf:"top-left";this.i=null;this.l=void 0!==b.size?b.size:null;Ih.call(this,{opacity:void 0!==b.opacity?b.opacity:1,rotation:void 0!==b.rotation?b.rotation:0,scale:void 0!==b.scale?b.scale:1,Ua:void 0!==b.Ua?b.Ua:!0,qb:void 0!==b.qb?b.qb:!1})}y(Fl,Ih);m=Fl.prototype;
m.Yb=function(){if(this.c)return this.c;var b=this.g,c=this.ob();if("fraction"==this.j||"fraction"==this.u){if(!c)return null;b=this.g.slice();"fraction"==this.j&&(b[0]*=c[0]);"fraction"==this.u&&(b[1]*=c[1])}if("top-left"!=this.b){if(!c)return null;b===this.g&&(b=this.g.slice());if("top-right"==this.b||"bottom-right"==this.b)b[0]=-b[0]+c[0];if("bottom-left"==this.b||"bottom-right"==this.b)b[1]=-b[1]+c[1]}return this.c=b};m.Pc=function(){var b=this.a;return b.c?b.c:b.a};m.Jd=function(){return this.a.f};
m.cc=function(){return this.a.b};m.Wd=function(){var b=this.a;if(!b.j)if(b.u){var c=b.f[0],d=b.f[1],e=Hf(c,d);e.fillRect(0,0,c,d);b.j=e.canvas}else b.j=b.a;return b.j};m.Pa=function(){if(this.i)return this.i;var b=this.v;if("top-left"!=this.f){var c=this.ob(),d=this.a.f;if(!c||!d)return null;b=b.slice();if("top-right"==this.f||"bottom-right"==this.f)b[0]=d[0]-c[0]-b[0];if("bottom-left"==this.f||"bottom-right"==this.f)b[1]=d[1]-c[1]-b[1]}return this.i=b};m.ob=function(){return this.l?this.l:this.a.f};
m.Sd=function(b,c){return I(this.a,"change",b,c)};m.load=function(){this.a.load()};m.me=function(b,c){cb(this.a,"change",b,c)};function Hl(b,c,d,e,f,g){ib.call(this);this.j=null;this.a=b?b:new Image;null!==e&&(this.a.crossOrigin=e);this.c=g?document.createElement("CANVAS"):null;this.i=g;this.g=null;this.b=f;this.f=d;this.l=c;this.u=!1;2==this.b&&Il(this)}y(Hl,ib);function Il(b){var c=Hf(1,1);try{c.drawImage(b.a,0,0),c.getImageData(0,0,1,1)}catch(d){b.u=!0}}
Hl.prototype.s=function(){this.b=3;this.g.forEach(G);this.g=null;this.B("change")};
Hl.prototype.v=function(){this.b=2;this.f=[this.a.width,this.a.height];this.g.forEach(G);this.g=null;Il(this);if(!this.u&&null!==this.i){this.c.width=this.a.width;this.c.height=this.a.height;var b=this.c.getContext("2d");b.drawImage(this.a,0,0);for(var c=b.getImageData(0,0,this.a.width,this.a.height),d=c.data,e=this.i[0]/255,f=this.i[1]/255,g=this.i[2]/255,h=0,k=d.length;h<k;h+=4)d[h]*=e,d[h+1]*=f,d[h+2]*=g;b.putImageData(c,0,0)}this.B("change")};
Hl.prototype.load=function(){if(0==this.b){this.b=1;this.g=[I(this.a,"error",this.s,this,!0),I(this.a,"load",this.v,this,!0)];try{this.a.src=this.l}catch(b){this.s()}}};function Gl(){this.a={};this.b=0}(function(){var b=Gl;b.We=function(){return b.ff?b.ff:b.ff=new b}})();Gl.prototype.clear=function(){this.a={};this.b=0};Gl.prototype.get=function(b,c,d){b=c+":"+b+":"+(d?oh(d):"null");return b in this.a?this.a[b]:null};Gl.prototype.set=function(b,c,d,e){this.a[c+":"+b+":"+(d?oh(d):"null")]=e;++this.b};function Jl(b,c){db.call(this);this.u=c;this.b={};this.g={}}y(Jl,db);Jl.prototype.L=function(){for(var b in this.b)hb(this.b[b]);Jl.U.L.call(this)};function Kl(){var b=Gl.We();if(32<b.b){var c=0,d,e;for(d in b.a)e=b.a[d],0!==(c++&3)||jb(e)||(delete b.a[d],--b.b)}}Jl.prototype.s=function(){this.u.render()};Jl.prototype.l=Md;Jl.prototype.C=function(b,c){for(var d in this.b)if(!(c&&d in c.Qd)){var e=d,f=this.b[e];delete this.b[e];G(this.g[e]);delete this.g[e];hb(f)}};
function Yc(b,c){return b.zIndex-c.zIndex};function Ll(b,c){this.l=b;this.g=c;this.a=[];this.b=[];this.f={}}Ll.prototype.clear=function(){this.a.length=0;this.b.length=0;Va(this.f)};Ll.prototype.i=function(b){var c=this.l(b);return Infinity!=c?(this.a.push(b),this.b.push(c),this.f[this.g(b)]=!0,Ml(this,0,this.a.length-1),!0):!1};Ll.prototype.Oa=function(){return this.a.length};Ll.prototype.Ia=function(){return 0===this.a.length};
function Nl(b,c){for(var d=b.a,e=b.b,f=d.length,g=d[c],h=e[c],k=c;c<f>>1;){var l=2*c+1,n=2*c+2,l=n<f&&e[n]<e[l]?n:l;d[c]=d[l];e[c]=e[l];c=l}d[c]=g;e[c]=h;Ml(b,k,c)}function Ml(b,c,d){var e=b.a;b=b.b;for(var f=e[d],g=b[d];d>c;){var h=d-1>>1;if(b[h]>g)e[d]=e[h],b[d]=b[h],d=h;else break}e[d]=f;b[d]=g};function Ol(b,c){Ll.call(this,function(c){return b.apply(null,c)},function(b){return b[0].bc()});this.s=c;this.c=0;this.j={}}y(Ol,Ll);Ol.prototype.i=function(b){var c=Ol.U.i.call(this,b);c&&I(b[0],"change",this.u,this);return c};Ol.prototype.u=function(b){b=b.target;var c=b.T();if(2===c||3===c||4===c)cb(b,"change",this.u,this),b=b.bc(),b in this.j&&(delete this.j[b],--this.c),this.s()};function Pl(b){return function(c){if(c)return[Ce(c[0],b[0],b[2]),Ce(c[1],b[1],b[3])]}}function Ql(b){return b};function Rl(b){return function(c,d,e){if(void 0!==c)return c=Sc(b,c,e),c=Ce(c+d,0,b.length-1),b[c]}}function Sl(b,c,d){return function(e,f,g){if(void 0!==e)return e=Math.max(Math.floor(Math.log(c/e)/Math.log(b)+(0<g?0:0>g?1:.5))+f,0),void 0!==d&&(e=Math.min(e,d)),c/Math.pow(b,e)}};function Tl(b){if(void 0!==b)return 0}function Ul(b,c){if(void 0!==b)return b+c}function Vl(b){var c=2*Math.PI/b;return function(b,e){if(void 0!==b)return b=Math.floor((b+e)/c+.5)*c}}function Wl(){var b=5*Math.PI/180;return function(c,d){if(void 0!==c)return Math.abs(c+d)<=b?0:c+d}};function Xl(b,c,d){this.center=b;this.resolution=c;this.rotation=d};function Yl(b){mb.call(this);b=b||{};this.i=[0,0];var c={};c.center=void 0!==b.center?b.center:null;this.l=$e(b.projection);var d,e,f,g=void 0!==b.Fa?b.Fa:0;d=void 0!==b.Ra?b.Ra:28;var h=void 0!==b.b?b.b:2;if(void 0!==b.Ba)d=b.Ba,e=d[0],f=d[d.length-1],d=Rl(d);else{e=$e(b.projection);f=e.G();var k=(f?Math.max(Pb(f),Qb(f)):360*Ke.degrees/Te(e))/256/Math.pow(2,0),l=k/Math.pow(2,28);e=b.bb;void 0!==e?g=0:e=k/Math.pow(h,g);f=b.Sa;void 0===f&&(f=void 0!==b.Ra?void 0!==b.bb?e/Math.pow(h,d):k/Math.pow(h,
d):l);d=g+Math.floor(Math.log(e/f)/Math.log(h));f=e/Math.pow(h,d-g);d=Sl(h,e,d-g)}this.c=e;this.j=f;this.g=g;g=void 0!==b.extent?Pl(b.extent):Ql;(void 0!==b.a?b.a:1)?(e=b.ud,e=void 0===e||!0===e?Wl():!1===e?Ul:ha(e)?Vl(e):Ul):e=Tl;this.a=new Xl(g,d,e);void 0!==b.resolution?c.resolution=b.resolution:void 0!==b.zoom&&(c.resolution=this.xa(this.c,b.zoom-this.g));c.rotation=void 0!==b.rotation?b.rotation:0;this.ka(c)}y(Yl,mb);m=Yl.prototype;m.xa=function(b,c,d){return this.a.resolution(b,c||0,d||0)};
m.ud=function(b,c){return this.a.rotation(b,c||0)};function Zl(b){return b.get("center")}m.X=function(){return this.l};m.R=function(){return this.get("resolution")};function $l(b){return b.get("rotation")}m.T=function(){var b=Zl(this),c=this.X(),d=this.R(),e=$l(this);return{center:[Math.round(b[0]/d)*d,Math.round(b[1]/d)*d],projection:void 0!==c?c:null,resolution:d,rotation:e}};
function am(b){var c,d=b.R();if(void 0!==d){var e,f=0;do{e=b.xa(b.c,f);if(e==d){c=f;break}++f}while(e>b.j)}return void 0!==c?b.g+c:c}
function bm(b,c,d,e){if(!(c instanceof hi)){var f=c[0],g=c[1],h=c[2],k=c[3],f=[f,g,f,k,h,k,h,g,f,g],g=new Ji(null);g.K("XY",f,[f.length]);c=g}f=e||{};e=void 0!==f.padding?f.padding:[0,0,0,0];var k=void 0!==f.xa?f.xa:!0,g=void 0!==f.ji?f.ji:!1,l;void 0!==f.Sa?l=f.Sa:void 0!==f.Ra?l=b.xa(b.c,f.Ra-b.g,0):l=0;var n=c.o,h=$l(b),f=Math.cos(-h),h=Math.sin(-h),q=Infinity,p=Infinity,r=-Infinity,u=-Infinity;c=c.a;for(var v=0,z=n.length;v<z;v+=c)var x=n[v]*f-n[v+1]*h,C=n[v]*h+n[v+1]*f,q=Math.min(q,x),p=Math.min(p,
C),r=Math.max(r,x),u=Math.max(u,C);c=[q,p,r,u];d=[d[0]-e[1]-e[3],d[1]-e[0]-e[2]];d=Math.max(Pb(c)/d[0],Qb(c)/d[1]);d=isNaN(d)?l:Math.max(d,l);k&&(l=b.xa(d,0,0),!g&&l<d&&(l=b.xa(l,-1,0)),d=l);nj(b,d);h=-h;l=(q+r)/2+(e[1]-e[3])/2*d;d=(p+u)/2+(e[0]-e[2])/2*d;cm(b,[l*f-d*h,d*f+l*h])}function dm(b){return!!Zl(b)&&void 0!==b.R()}m.rotate=function(b,c){if(void 0!==c){var d,e=Zl(this);void 0!==e&&(d=[e[0]-c[0],e[1]-c[1]],Ab(d,b-$l(this)),zb(d,c));cm(this,d)}this.set("rotation",b)};
function cm(b,c){b.set("center",c)}function em(b,c){b.i[1]+=c}function nj(b,c){b.set("resolution",c)}function fm(b,c){var d=b.xa(b.c,c-b.g,0);nj(b,d)};function gm(b){mb.call(this);this.element=b.element?b.element:null;this.i=this.A=null;this.j=[];this.render=b.render?b.render:Md;b.target&&(this.A=Ac(b.target))}y(gm,mb);gm.prototype.L=function(){Jc(this.element);gm.U.L.call(this)};gm.prototype.setMap=function(b){this.i&&Jc(this.element);for(var c=0,d=this.j.length;c<d;++c)G(this.j[c]);this.j.length=0;if(this.i=b)(this.A?this.A:b.s).appendChild(this.element),this.render!==Md&&this.j.push(I(b,"postrender",this.render,this)),b.render()};function hm(b){b=b?b:{};this.C=document.createElement("UL");this.l=document.createElement("LI");this.C.appendChild(this.l);ak(this.l,!1);this.g=void 0!==b.collapsed?b.collapsed:!0;this.s=void 0!==b.Gg?b.Gg:!0;this.s||(this.g=!1);var c=void 0!==b.className?b.className:"ol-attribution",d=void 0!==b.le?b.le:"Attributions",e=void 0!==b.Fg?b.Fg:"\u00bb";this.D="string"===typeof e?Fc("SPAN",{},e):e;e=void 0!==b.label?b.label:"i";this.I="string"===typeof e?Fc("SPAN",{},e):e;d=Fc("BUTTON",{type:"button",
title:d},this.s&&!this.g?this.D:this.I);I(d,"click",this.V,this);c=Fc("DIV",c+" ol-unselectable ol-control"+(this.g&&this.s?" ol-collapsed":"")+(this.s?"":" ol-uncollapsible"),this.C,d);gm.call(this,{element:c,render:b.render?b.render:im,target:b.target});this.v=!0;this.c={};this.a={};this.O={}}y(hm,gm);
function im(b){if(b=b.frameState){var c,d,e,f,g,h,k,l,n,q,p,r=b.Rd,u=Ua({},b.ca),v={},z=b.M.projection;d=0;for(c=r.length;d<c;d++)if(h=r[d].layer.S())if(q=w(h).toString(),n=h.s())for(e=0,f=n.length;e<f;e++)if(k=n[e],l=w(k).toString(),!(l in u)){if(g=b.oe[q]){var x=h.Za(z);a:{p=k;var C=z;if(p.a){var H=void 0,E=void 0,D=void 0,R=void 0;for(R in g)if(R in p.a)for(var D=g[R],F,H=0,E=p.a[R].length;H<E;++H){F=p.a[R][H];if(Ge(F,D)){p=!0;break a}var M=sg(x,Eg(C),parseInt(R,10)),T=M.a-M.b+1;if(D.b<M.b||D.a>
M.a)if(Ge(F,new Ee(yb(D.b,T),yb(D.a,T),D.c,D.f))||D.a-D.b+1>T&&Ge(F,M)){p=!0;break a}}p=!1}else p=!0}}else p=!1;p?(l in v&&delete v[l],u[l]=k):v[l]=k}c=[u,v];d=c[0];c=c[1];for(var K in this.c)K in d?(this.a[K]||(ak(this.c[K],!0),this.a[K]=!0),delete d[K]):K in c?(this.a[K]&&(ak(this.c[K],!1),delete this.a[K]),delete c[K]):(Jc(this.c[K]),delete this.c[K],delete this.a[K]);for(K in d)e=document.createElement("LI"),e.innerHTML=d[K].b,this.C.appendChild(e),this.c[K]=e,this.a[K]=!0;for(K in c)e=document.createElement("LI"),
e.innerHTML=c[K].b,ak(e,!1),this.C.appendChild(e),this.c[K]=e;K=!Wa(this.a)||!Wa(b.Mb);this.v!=K&&(ak(this.element,K),this.v=K);K&&Wa(this.a)?vk(this.element,"ol-logo-only"):xk(this.element,"ol-logo-only");var Z;b=b.Mb;K=this.O;for(Z in K)Z in b||(Jc(K[Z]),delete K[Z]);for(var X in b)X in K||(Z=new Image,Z.src=X,d=b[X],""===d?d=Z:(d=Fc("A",{href:d}),d.appendChild(Z)),this.l.appendChild(d),K[X]=d);ak(this.l,!Wa(b))}else this.v&&(ak(this.element,!1),this.v=!1)}
hm.prototype.V=function(b){b.preventDefault();b=this.element;uk(b,"ol-collapsed")?xk(b,"ol-collapsed"):vk(b,"ol-collapsed");if(this.g){b=this.I;var c=b.parentNode;c&&c.replaceChild(this.D,b)}else b=this.D,(c=b.parentNode)&&c.replaceChild(this.I,b);this.g=!this.g};function jm(b){return 1-Math.pow(1-b,3)}function km(b){return 3*b*b-2*b*b*b}function lm(b){return b};function mm(b){var c=b.source,d=b.start?b.start:Date.now(),e=c[0],f=c[1],g=void 0!==b.duration?b.duration:1E3,h=b.la?b.la:km;return function(b,c){if(c.time<d)return c.animate=!0,c.fa[0]+=1,!0;if(c.time<d+g){var n=1-h((c.time-d)/g),q=e-c.M.center[0],p=f-c.M.center[1];c.animate=!0;c.M.center[0]+=n*q;c.M.center[1]+=n*p;c.fa[0]+=1;return!0}return!1}}
function nm(b){var c=b.rotation?b.rotation:0,d=b.start?b.start:Date.now(),e=void 0!==b.duration?b.duration:1E3,f=b.la?b.la:km,g=b.anchor?b.anchor:null;return function(b,k){if(k.time<d)return k.animate=!0,k.fa[0]+=1,!0;if(k.time<d+e){var l=1-f((k.time-d)/e),l=(c-k.M.rotation)*l;k.animate=!0;k.M.rotation+=l;if(g){var n=k.M.center;n[0]-=g[0];n[1]-=g[1];Ab(n,l);zb(n,g)}k.fa[0]+=1;return!0}return!1}}
function om(b){var c=b.resolution,d=b.start?b.start:Date.now(),e=void 0!==b.duration?b.duration:1E3,f=b.la?b.la:km;return function(b,h){if(h.time<d)return h.animate=!0,h.fa[0]+=1,!0;if(h.time<d+e){var k=1-f((h.time-d)/e),l=c-h.M.resolution;h.animate=!0;h.M.resolution+=k*l;h.fa[0]+=1;return!0}return!1}};function pm(b){b=b?b:{};var c=void 0!==b.className?b.className:"ol-rotate",d=void 0!==b.label?b.label:"\u21e7";this.a=null;"string"===typeof d?this.a=Fc("SPAN","ol-compass",d):(this.a=d,vk(this.a,"ol-compass"));d=Fc("BUTTON",{"class":c+"-reset",type:"button",title:b.le?b.le:"Reset rotation"},this.a);I(d,"click",pm.prototype.v,this);c=Fc("DIV",c+" ol-unselectable ol-control",d);d=b.render?b.render:qm;this.g=b.ej?b.ej:void 0;gm.call(this,{element:c,render:d,target:b.target});this.l=void 0!==b.duration?
b.duration:250;this.c=void 0!==b.Ag?b.Ag:!0;this.s=void 0;this.c&&vk(this.element,"ol-hidden")}y(pm,gm);pm.prototype.v=function(b){b.preventDefault();if(void 0!==this.g)this.g();else{b=this.i;var c=U(b);if(c){var d=$l(c);void 0!==d&&(0<this.l&&(d%=2*Math.PI,d<-Math.PI&&(d+=2*Math.PI),d>Math.PI&&(d-=2*Math.PI),b.Ea(nm({rotation:d,duration:this.l,la:jm}))),c.set("rotation",0))}}};
function qm(b){if(b=b.frameState){b=b.M.rotation;if(b!=this.s){var c="rotate("+b+"rad)";if(this.c){var d=this.element;0===b?vk(d,"ol-hidden"):xk(d,"ol-hidden")}this.a.style.msTransform=c;this.a.style.webkitTransform=c;this.a.style.transform=c}this.s=b}};function rm(b){b=b?b:{};var c=void 0!==b.className?b.className:"ol-zoom",d=void 0!==b.jb?b.jb:1,e=void 0!==b.Gj?b.Gj:"\u2212",f=void 0!==b.Hj?b.Hj:"Zoom out",g=Fc("BUTTON",{"class":c+"-in",type:"button",title:void 0!==b.Fj?b.Fj:"Zoom in"},void 0!==b.Ej?b.Ej:"+");I(g,"click",qa(rm.prototype.c,d),this);e=Fc("BUTTON",{"class":c+"-out",type:"button",title:f},e);I(e,"click",qa(rm.prototype.c,-d),this);c=Fc("DIV",c+" ol-unselectable ol-control",g,e);gm.call(this,{element:c,target:b.target});this.a=void 0!==
b.duration?b.duration:250}y(rm,gm);rm.prototype.c=function(b,c){c.preventDefault();var d=this.i,e=U(d);if(e){var f=e.R();f&&(0<this.a&&d.Ea(om({resolution:f,duration:this.a,la:jm})),d=e.xa(f,b),nj(e,d))}};function sm(){this.a=[];this.b=this.f=0}function tm(b,c){var d=b.b,e=.05-d,f=Math.log(.05/b.b)/-.005;return mm({source:c,duration:f,la:function(b){return d*(Math.exp(-.005*b*f)-1)/e}})};function um(b){mb.call(this);this.g=null;this.setActive(!0);this.handleEvent=b.handleEvent}y(um,mb);um.prototype.getActive=function(){return this.get("active")};um.prototype.setActive=function(b){this.set("active",b)};um.prototype.setMap=function(b){this.g=b};function vm(b,c,d,e,f){if(void 0!==d){var g=$l(c),h=Zl(c);void 0!==g&&h&&f&&0<f&&(b.Ea(nm({rotation:g,duration:f,la:jm})),e&&b.Ea(mm({source:h,duration:f,la:jm})));c.rotate(d,e)}}
function wm(b,c,d,e,f){var g=c.R();d=c.xa(g,d,0);xm(b,c,d,e,f)}function xm(b,c,d,e,f){if(d){var g=c.R(),h=Zl(c);void 0!==g&&h&&d!==g&&f&&0<f&&(b.Ea(om({resolution:g,duration:f,la:jm})),e&&b.Ea(mm({source:h,duration:f,la:jm})));if(e){var k;b=Zl(c);f=c.R();void 0!==b&&void 0!==f&&(k=[e[0]-d*(e[0]-b[0])/f,e[1]-d*(e[1]-b[1])/f]);cm(c,k)}nj(c,d)}};function ym(b){b=b?b:{};this.a=b.jb?b.jb:1;um.call(this,{handleEvent:zm});this.c=void 0!==b.duration?b.duration:250}y(ym,um);function zm(b){var c=!1,d=b.originalEvent;if(b.type==ll){var c=b.map,e=b.coordinate,d=d.shiftKey?-this.a:this.a,f=U(c);wm(c,f,d,e,this.c);b.preventDefault();c=!0}return!c};function Am(b){b=b.originalEvent;return b.altKey&&!(b.metaKey||b.ctrlKey)&&b.shiftKey}function Bm(b){b=b.originalEvent;return 0==b.button&&!(kc&&uh&&b.ctrlKey)}function Cm(b){b=b.originalEvent;return!b.altKey&&!(b.metaKey||b.ctrlKey)&&!b.shiftKey}function Dm(b){b=b.originalEvent;return!b.altKey&&!(b.metaKey||b.ctrlKey)&&b.shiftKey}function Em(b){b=b.originalEvent.target.tagName;return"INPUT"!==b&&"SELECT"!==b&&"TEXTAREA"!==b}function Fm(b){return"mouse"==b.a.pointerType};function Gm(b){b=b?b:{};um.call(this,{handleEvent:b.handleEvent?b.handleEvent:Hm});this.Wa=b.$a?b.$a:eh;this.Xa=b.Kb?b.Kb:Md;this.xb=b.sh?b.sh:Md;this.yb=b.ab?b.ab:eh;this.A=!1;this.V={};this.i=[]}y(Gm,um);function Im(b){for(var c=b.length,d=0,e=0,f=0;f<c;f++)d+=b[f].clientX,e+=b[f].clientY;return[d/c,e/c]}
function Hm(b){if(!(b instanceof hl))return!0;var c=!1,d=b.type;if(d===ql||d===sl||d===ol){d=b.a;b.type==ol?delete this.V[d.pointerId]:b.type==ql?this.V[d.pointerId]=d:d.pointerId in this.V&&(this.V[d.pointerId]=d);var d=this.V,e=[],f;for(f in d)e.push(d[f]);this.i=e}this.A&&(b.type==sl?this.Xa(b):b.type==ol&&(this.A=this.yb(b)));b.type==ql?(this.A=b=this.Wa(b),c=this.sb(b)):b.type==rl&&this.xb(b);return!c}Gm.prototype.sb=function(b){return b};function Jm(b){Gm.call(this,{$a:Km,Kb:Lm,ab:Mm});b=b?b:{};this.a=b.Rh;this.c=this.j=null;this.s=b.ta?b.ta:Cm;this.l=!1}y(Jm,Gm);function Lm(b){var c=Im(this.i);this.a&&this.a.a.push(c[0],c[1],Date.now());if(this.c){var d=this.c[0]-c[0],e=c[1]-this.c[1];b=b.map;var f=U(b),g=f.T(),e=d=[d,e],h=g.resolution;e[0]*=h;e[1]*=h;Ab(d,g.rotation);zb(d,g.center);d=f.a.center(d);b.render();cm(f,d)}this.c=c}
function Mm(b){b=b.map;var c=U(b);if(0===this.i.length){var d;if(d=!this.l&&this.a)if(d=this.a,6>d.a.length)d=!1;else{var e=Date.now()-100,f=d.a.length-3;if(d.a[f+2]<e)d=!1;else{for(var g=f-3;0<g&&d.a[g+2]>e;)g-=3;var e=d.a[f+2]-d.a[g+2],h=d.a[f]-d.a[g],f=d.a[f+1]-d.a[g+1];d.f=Math.atan2(f,h);d.b=Math.sqrt(h*h+f*f)/e;d=.05<d.b}}d&&(d=(.05-this.a.b)/-.005,f=this.a.f,g=Zl(c),this.j=tm(this.a,g),b.Ea(this.j),g=Nm(b,g),d=b.Gb([g[0]-d*Math.cos(f),g[1]-d*Math.sin(f)]),d=c.a.center(d),cm(c,d));em(c,-1);
b.render();return!1}this.c=null;return!0}function Km(b){if(0<this.i.length&&this.s(b)){var c=b.map,d=U(c);this.c=null;this.A||em(d,1);c.render();this.j&&Uc(c.D,this.j)&&(cm(d,b.frameState.M.center),this.j=null);this.a&&(b=this.a,b.a.length=0,b.f=0,b.b=0);this.l=1<this.i.length;return!0}return!1}Jm.prototype.sb=eh;function Om(b){b=b?b:{};Gm.call(this,{$a:Pm,Kb:Qm,ab:Rm});this.c=b.ta?b.ta:Am;this.a=void 0;this.j=void 0!==b.duration?b.duration:250}y(Om,Gm);function Qm(b){if(Fm(b)){var c=b.map,d=Sm(c);b=b.pixel;d=Math.atan2(d[1]/2-b[1],b[0]-d[0]/2);if(void 0!==this.a){b=d-this.a;var e=U(c),f=$l(e);c.render();vm(c,e,f-b)}this.a=d}}function Rm(b){if(!Fm(b))return!0;b=b.map;var c=U(b);em(c,-1);var d=$l(c),e=this.j,d=c.ud(d,0);vm(b,c,d,void 0,e);return!1}
function Pm(b){return Fm(b)&&Bm(b)&&this.c(b)?(b=b.map,em(U(b),1),b.render(),this.a=void 0,!0):!1}Om.prototype.sb=eh;function Tm(b){this.c=null;this.b=document.createElement("div");this.b.style.position="absolute";this.b.className="ol-box "+b;this.f=this.g=this.a=null}y(Tm,db);Tm.prototype.L=function(){this.setMap(null);Tm.U.L.call(this)};function Um(b){var c=b.g,d=b.f;b=b.b.style;b.left=Math.min(c[0],d[0])+"px";b.top=Math.min(c[1],d[1])+"px";b.width=Math.abs(d[0]-c[0])+"px";b.height=Math.abs(d[1]-c[1])+"px"}
Tm.prototype.setMap=function(b){if(this.a){this.a.v.removeChild(this.b);var c=this.b.style;c.left=c.top=c.width=c.height="inherit"}(this.a=b)&&this.a.v.appendChild(this.b)};function Vm(b){var c=b.g,d=b.f,c=[c,[c[0],d[1]],d,[d[0],c[1]]].map(b.a.Gb,b.a);c[4]=c[0].slice();b.c?b.c.Y([c]):b.c=new Ji([c])}Tm.prototype.J=function(){return this.c};function Wm(b,c,d){Sa.call(this,b);this.coordinate=c;this.mapBrowserEvent=d}y(Wm,Sa);function Xm(b){Gm.call(this,{$a:Ym,Kb:Zm,ab:$m});b=b?b:{};this.a=new Tm(b.className||"ol-dragbox");this.c=null;this.v=b.ta?b.ta:fh;this.s=b.Dg?b.Dg:an}y(Xm,Gm);function an(b,c,d){b=d[0]-c[0];c=d[1]-c[1];return 64<=b*b+c*c}function Zm(b){if(Fm(b)){var c=this.a,d=b.pixel;c.g=this.c;c.f=d;Vm(c);Um(c);this.B(new Wm("boxdrag",b.coordinate,b))}}Xm.prototype.J=function(){return this.a.J()};Xm.prototype.l=Md;
function $m(b){if(!Fm(b))return!0;this.a.setMap(null);this.s(b,this.c,b.pixel)&&(this.l(b),this.B(new Wm("boxend",b.coordinate,b)));return!1}function Ym(b){if(Fm(b)&&Bm(b)&&this.v(b)){this.c=b.pixel;this.a.setMap(b.map);var c=this.a,d=this.c;c.g=this.c;c.f=d;Vm(c);Um(c);this.B(new Wm("boxstart",b.coordinate,b));return!0}return!1};function cn(b){b=b?b:{};var c=b.ta?b.ta:Dm;this.j=void 0!==b.duration?b.duration:200;Xm.call(this,{ta:c,className:b.className||"ol-dragzoom"})}y(cn,Xm);cn.prototype.l=function(){var b=this.g,c=U(b),d=Sm(b),e=this.J().G(),d=c.xa(Math.max(Pb(e)/d[0],Qb(e)/d[1])),f=c.R(),g=Zl(c);b.Ea(om({resolution:f,duration:this.j,la:jm}));b.Ea(mm({source:g,duration:this.j,la:jm}));cm(c,Rb(e));nj(c,d)};function dn(b){um.call(this,{handleEvent:en});b=b||{};this.a=void 0!==b.ta?b.ta:hh(Cm,Em);this.c=void 0!==b.duration?b.duration:100;this.i=void 0!==b.Hi?b.Hi:128}y(dn,um);
function en(b){var c=!1;if("keydown"==b.type){var d=b.originalEvent.keyCode;if(this.a(b)&&(40==d||37==d||39==d||38==d)){var e=b.map,c=U(e),f=c.R()*this.i,g=0,h=0;40==d?h=-f:37==d?g=-f:39==d?g=f:h=f;d=[g,h];Ab(d,$l(c));f=this.c;if(g=Zl(c))f&&0<f&&e.Ea(mm({source:g,duration:f,la:lm})),e=c.a.center([g[0]+d[0],g[1]+d[1]]),cm(c,e);b.preventDefault();c=!0}}return!c};function fn(b){um.call(this,{handleEvent:gn});b=b?b:{};this.c=b.ta?b.ta:Em;this.a=b.jb?b.jb:1;this.i=void 0!==b.duration?b.duration:100}y(fn,um);function gn(b){var c=!1;if("keydown"==b.type||"keypress"==b.type){var d=b.originalEvent.charCode;if(this.c(b)&&(43==d||45==d)){c=b.map;d=43==d?this.a:-this.a;c.render();var e=U(c);wm(c,e,d,void 0,this.i);b.preventDefault();c=!0}}return!c};function hn(b){um.call(this,{handleEvent:jn});b=b||{};this.a=0;this.s=void 0!==b.duration?b.duration:250;this.v=void 0!==b.Bj?b.Bj:!0;this.i=null;this.j=this.c=void 0}y(hn,um);
function jn(b){var c=!1;if("wheel"==b.type||"mousewheel"==b.type){var c=b.map,d=b.originalEvent;this.v&&(this.i=b.coordinate);var e;"wheel"==b.type?(e=d.deltaY,sh&&d.deltaMode===t.WheelEvent.DOM_DELTA_PIXEL&&(e/=vh),d.deltaMode===t.WheelEvent.DOM_DELTA_LINE&&(e*=40)):"mousewheel"==b.type&&(e=-d.wheelDeltaY,th&&(e/=3));this.a+=e;void 0===this.c&&(this.c=Date.now());e=Math.max(80-(Date.now()-this.c),0);t.clearTimeout(this.j);this.j=t.setTimeout(this.l.bind(this,c),e);b.preventDefault();c=!0}return!c}
hn.prototype.l=function(b){var c=Ce(this.a,-1,1),d=U(b);b.render();wm(b,d,-c,this.i,this.s);this.a=0;this.i=null;this.j=this.c=void 0};function kn(b){Gm.call(this,{$a:ln,Kb:mn,ab:nn});b=b||{};this.c=null;this.j=void 0;this.a=!1;this.l=0;this.v=void 0!==b.threshold?b.threshold:.3;this.s=void 0!==b.duration?b.duration:250}y(kn,Gm);
function mn(b){var c=0,d=this.i[0],e=this.i[1],d=Math.atan2(e.clientY-d.clientY,e.clientX-d.clientX);void 0!==this.j&&(c=d-this.j,this.l+=c,!this.a&&Math.abs(this.l)>this.v&&(this.a=!0));this.j=d;b=b.map;d=b.a.getBoundingClientRect();e=Im(this.i);e[0]-=d.left;e[1]-=d.top;this.c=b.Gb(e);this.a&&(d=U(b),e=$l(d),b.render(),vm(b,d,e+c,this.c))}function nn(b){if(2>this.i.length){b=b.map;var c=U(b);em(c,-1);if(this.a){var d=$l(c),e=this.c,f=this.s,d=c.ud(d,0);vm(b,c,d,e,f)}return!1}return!0}
function ln(b){return 2<=this.i.length?(b=b.map,this.c=null,this.j=void 0,this.a=!1,this.l=0,this.A||em(U(b),1),b.render(),!0):!1}kn.prototype.sb=eh;function on(b){Gm.call(this,{$a:pn,Kb:qn,ab:rn});b=b?b:{};this.c=null;this.l=void 0!==b.duration?b.duration:400;this.a=void 0;this.j=1}y(on,Gm);function qn(b){var c=1,d=this.i[0],e=this.i[1],f=d.clientX-e.clientX,d=d.clientY-e.clientY,f=Math.sqrt(f*f+d*d);void 0!==this.a&&(c=this.a/f);this.a=f;1!=c&&(this.j=c);b=b.map;var f=U(b),d=f.R(),e=b.a.getBoundingClientRect(),g=Im(this.i);g[0]-=e.left;g[1]-=e.top;this.c=b.Gb(g);b.render();xm(b,f,d*c,this.c)}
function rn(b){if(2>this.i.length){b=b.map;var c=U(b);em(c,-1);var d=c.R(),e=this.c,f=this.l,d=c.xa(d,0,this.j-1);xm(b,c,d,e,f);return!1}return!0}function pn(b){return 2<=this.i.length?(b=b.map,this.c=null,this.a=void 0,this.j=1,this.A||em(U(b),1),b.render(),!0):!1}on.prototype.sb=eh;function sn(b){b=b?b:{};var c=new pb,d=new sm;(void 0!==b.Ge?b.Ge:1)&&c.push(new Om);(void 0!==b.Mg?b.Mg:1)&&c.push(new ym({jb:b.Dj,duration:b.dd}));(void 0!==b.Ng?b.Ng:1)&&c.push(new Jm({Rh:d}));(void 0!==b.Xd?b.Xd:1)&&c.push(new kn);(void 0!==b.Gi?b.Gi:1)&&c.push(new on({duration:b.dd}));if(void 0!==b.Qh?b.Qh:1)c.push(new dn),c.push(new fn({jb:b.Dj,duration:b.dd}));(void 0!==b.Zh?b.Zh:1)&&c.push(new hn({duration:b.dd}));(void 0!==b.hj?b.hj:1)&&c.push(new cn({duration:b.dd}));return c};function tn(b){Le.call(this,{code:b,units:"m",extent:un,global:!0,Cj:vn})}y(tn,Le);tn.prototype.lb=function(b,c){return b/De(c[1]/6378137)};var wn=6378137*Math.PI,un=[-wn,-wn,wn,wn],vn=[-180,-85,180,85],xn="EPSG:3857 EPSG:102100 EPSG:102113 EPSG:900913 urn:ogc:def:crs:EPSG:6.18:3:3857 urn:ogc:def:crs:EPSG::3857 http://www.opengis.net/gml/srs/epsg.xml#3857".split(" ").map(function(b){return new tn(b)});
function yn(b,c,d){var e=b.length;d=1<d?d:2;void 0===c&&(2<d?c=b.slice():c=Array(e));for(var f=0;f<e;f+=d)c[f]=6378137*Math.PI*b[f]/180,c[f+1]=6378137*Math.log(Math.tan(Math.PI*(b[f+1]+90)/360));return c}function zn(b,c,d){var e=b.length;d=1<d?d:2;void 0===c&&(2<d?c=b.slice():c=Array(e));for(var f=0;f<e;f+=d)c[f]=180*b[f]/(6378137*Math.PI),c[f+1]=360*Math.atan(Math.exp(b[f+1]/6378137))/Math.PI-90;return c};var An=new He(6378137);function Bn(b,c){Le.call(this,{code:b,units:"degrees",extent:Cn,od:c,global:!0,lf:Dn,Cj:Cn})}y(Bn,Le);Bn.prototype.lb=function(b){return b};var Cn=[-180,-90,180,90],Dn=Math.PI*An.radius/180,En=[new Bn("CRS:84"),new Bn("EPSG:4326","neu"),new Bn("urn:ogc:def:crs:EPSG::4326","neu"),new Bn("urn:ogc:def:crs:EPSG:6.6:4326","neu"),new Bn("urn:ogc:def:crs:OGC:1.3:CRS84"),new Bn("urn:ogc:def:crs:OGC:2:84"),new Bn("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new Bn("urn:x-ogc:def:crs:EPSG:4326","neu")];function Fn(b,c,d,e,f){this.Wa={};this.f=b;this.W=c;this.j=d;this.A=e;this.ed=f;this.g=this.a=this.b=this.ra=this.ha=this.qa=null;this.Da=this.sa=this.v=this.I=this.D=this.C=0;this.Ka=!1;this.i=this.La=0;this.Ma=!1;this.O=0;this.c="";this.l=this.Z=this.xb=this.Xa=0;this.V=this.s=this.u=null;this.N=[];this.yb=vb()}
function Gn(b,c,d){if(b.g){c=gi(c,0,d,2,b.A,b.N);d=b.f;var e=b.yb,f=d.globalAlpha;1!=b.v&&(d.globalAlpha=f*b.v);var g=b.La;b.Ka&&(g+=b.ed);var h,k;h=0;for(k=c.length;h<k;h+=2){var l=c[h]-b.C,n=c[h+1]-b.D;b.Ma&&(l=Math.round(l),n=Math.round(n));if(0!==g||1!=b.i){var q=l+b.C,p=n+b.D;ul(e,q,p,b.i,b.i,g,-q,-p);d.setTransform(e[0],e[1],e[4],e[5],e[12],e[13])}d.drawImage(b.g,b.sa,b.Da,b.O,b.I,l,n,b.O,b.I)}0===g&&1==b.i||d.setTransform(1,0,0,1,0,0);1!=b.v&&(d.globalAlpha=f)}}
function Hn(b,c,d,e){var f=0;if(b.V&&""!==b.c){b.u&&In(b,b.u);b.s&&Jn(b,b.s);var g=b.V,h=b.f,k=b.ra;k?(k.font!=g.font&&(k.font=h.font=g.font),k.textAlign!=g.textAlign&&(k.textAlign=h.textAlign=g.textAlign),k.textBaseline!=g.textBaseline&&(k.textBaseline=h.textBaseline=g.textBaseline)):(h.font=g.font,h.textAlign=g.textAlign,h.textBaseline=g.textBaseline,b.ra={font:g.font,textAlign:g.textAlign,textBaseline:g.textBaseline});c=gi(c,f,d,e,b.A,b.N);for(g=b.f;f<d;f+=e){h=c[f]+b.Xa;k=c[f+1]+b.xb;if(0!==b.Z||
1!=b.l){var l=ul(b.yb,h,k,b.l,b.l,b.Z,-h,-k);g.setTransform(l[0],l[1],l[4],l[5],l[12],l[13])}b.s&&g.strokeText(b.c,h,k);b.u&&g.fillText(b.c,h,k)}0===b.Z&&1==b.l||g.setTransform(1,0,0,1,0,0)}}function Kn(b,c,d,e,f,g){var h=b.f;b=gi(c,d,e,f,b.A,b.N);h.moveTo(b[0],b[1]);for(c=2;c<b.length;c+=2)h.lineTo(b[c],b[c+1]);g&&h.lineTo(b[0],b[1]);return e}function Ln(b,c,d,e,f){var g=b.f,h,k;h=0;for(k=e.length;h<k;++h)d=Kn(b,c,d,e[h],f,!0),g.closePath();return d}m=Fn.prototype;
m.Ad=function(b){if(Ub(this.j,b.G())){if(this.b||this.a){this.b&&In(this,this.b);this.a&&Jn(this,this.a);var c;c=this.A;var d=this.N,e=b.o;c=e?gi(e,0,e.length,b.a,c,d):null;d=c[2]-c[0];e=c[3]-c[1];d=Math.sqrt(d*d+e*e);e=this.f;e.beginPath();e.arc(c[0],c[1],d,0,2*Math.PI);this.b&&e.fill();this.a&&e.stroke()}""!==this.c&&Hn(this,b.o.slice(0,b.a),2,2)}};m.Og=function(b,c){var d=b.a,e,f;e=0;for(f=d.length;e<f;++e){var g=d[e];Mn[g.aa()].call(this,g,c)}};
m.Fd=function(b){var c=b.o;b=b.a;this.g&&Gn(this,c,c.length);""!==this.c&&Hn(this,c,c.length,b)};m.Dd=function(b){var c=b.o;b=b.a;this.g&&Gn(this,c,c.length);""!==this.c&&Hn(this,c,c.length,b)};m.Bd=function(b){if(Ub(this.j,b.G())){if(this.a){Jn(this,this.a);var c=this.f,d=b.o;c.beginPath();Kn(this,d,0,d.length,b.a,!1);c.stroke()}""!==this.c&&(b=vi(b),Hn(this,b,2,2))}};
m.Cd=function(b){var c=b.G();if(Ub(this.j,c)){if(this.a){Jn(this,this.a);var c=this.f,d=b.o,e=0,f=b.Hb(),g=b.a;c.beginPath();var h,k;h=0;for(k=f.length;h<k;++h)e=Kn(this,d,e,f[h],g,!1);c.stroke()}""!==this.c&&(b=Ai(b),Hn(this,b,b.length,2))}};m.Gd=function(b){if(Ub(this.j,b.G())){if(this.a||this.b){this.b&&In(this,this.b);this.a&&Jn(this,this.a);var c=this.f;c.beginPath();Ln(this,Ki(b),0,b.Hb(),b.a);this.b&&c.fill();this.a&&c.stroke()}""!==this.c&&(b=Li(b),Hn(this,b,2,2))}};
m.Ed=function(b){if(Ub(this.j,b.G())){if(this.a||this.b){this.b&&In(this,this.b);this.a&&Jn(this,this.a);var c=this.f,d=Oi(b),e=0,f=b.c,g=b.a,h,k;h=0;for(k=f.length;h<k;++h){var l=f[h];c.beginPath();e=Ln(this,d,e,l,g);this.b&&c.fill();this.a&&c.stroke()}}""!==this.c&&(b=Pi(b),Hn(this,b,b.length,2))}};function Nn(b){var c=Object.keys(b.Wa).map(Number);c.sort(Rc);var d,e,f,g,h;d=0;for(e=c.length;d<e;++d)for(f=b.Wa[c[d].toString()],g=0,h=f.length;g<h;++g)f[g](b)}
function In(b,c){var d=b.f,e=b.qa;e?e.fillStyle!=c.fillStyle&&(e.fillStyle=d.fillStyle=c.fillStyle):(d.fillStyle=c.fillStyle,b.qa={fillStyle:c.fillStyle})}
function Jn(b,c){var d=b.f,e=b.ha;e?(e.lineCap!=c.lineCap&&(e.lineCap=d.lineCap=c.lineCap),wh&&!Wc(e.H,c.H)&&d.setLineDash(e.H=c.H),e.lineJoin!=c.lineJoin&&(e.lineJoin=d.lineJoin=c.lineJoin),e.lineWidth!=c.lineWidth&&(e.lineWidth=d.lineWidth=c.lineWidth),e.miterLimit!=c.miterLimit&&(e.miterLimit=d.miterLimit=c.miterLimit),e.strokeStyle!=c.strokeStyle&&(e.strokeStyle=d.strokeStyle=c.strokeStyle)):(d.lineCap=c.lineCap,wh&&d.setLineDash(c.H),d.lineJoin=c.lineJoin,d.lineWidth=c.lineWidth,d.miterLimit=
c.miterLimit,d.strokeStyle=c.strokeStyle,b.ha={lineCap:c.lineCap,H:c.H,lineJoin:c.lineJoin,lineWidth:c.lineWidth,miterLimit:c.miterLimit,strokeStyle:c.strokeStyle})}m.rb=function(b,c){if(b){var d=b.a;this.b={fillStyle:qh(d?d:Ch)}}else this.b=null;if(c){var d=c.a,e=c.c,f=c.f,g=c.g,h=c.b,k=c.i;this.a={lineCap:void 0!==e?e:"round",H:f?f:Dh,lineJoin:void 0!==g?g:"round",lineWidth:this.W*(void 0!==h?h:1),miterLimit:void 0!==k?k:10,strokeStyle:oh(d?d:Eh)}}else this.a=null};
m.he=function(b){if(b){var c=b.Yb(),d=b.Pc(1),e=b.Pa(),f=b.ob();this.C=c[0];this.D=c[1];this.I=f[1];this.g=d;this.v=b.N;this.sa=e[0];this.Da=e[1];this.Ka=b.W;this.La=b.s;this.i=b.Ha();this.Ma=b.Z;this.O=f[0]}else this.g=null};
m.eb=function(b){if(b){var c=b.a;c?(c=c.a,this.u={fillStyle:qh(c?c:Ch)}):this.u=null;var d=b.i;if(d){var c=d.a,e=d.c,f=d.f,g=d.g,h=d.b,d=d.i;this.s={lineCap:void 0!==e?e:"round",H:f?f:Dh,lineJoin:void 0!==g?g:"round",lineWidth:void 0!==h?h:1,miterLimit:void 0!==d?d:10,strokeStyle:oh(c?c:Eh)}}else this.s=null;var c=b.b,e=b.f,f=b.c,g=b.g,h=b.Ha(),d=b.va(),k=b.j;b=b.u;this.V={font:void 0!==c?c:"10px sans-serif",textAlign:void 0!==k?k:"center",textBaseline:void 0!==b?b:"middle"};this.c=void 0!==d?d:"";
this.Xa=void 0!==e?this.W*e:0;this.xb=void 0!==f?this.W*f:0;this.Z=void 0!==g?g:0;this.l=this.W*(void 0!==h?h:1)}else this.c=""};var Mn={Point:Fn.prototype.Fd,LineString:Fn.prototype.Bd,Polygon:Fn.prototype.Gd,MultiPoint:Fn.prototype.Dd,MultiLineString:Fn.prototype.Cd,MultiPolygon:Fn.prototype.Ed,GeometryCollection:Fn.prototype.Og,Circle:Fn.prototype.Ad};function On(b){wl.call(this,b);this.V=vb()}y(On,wl);
On.prototype.i=function(b,c,d){Pn(this,"precompose",d,b,void 0);var e=this.a?this.a.Nc():null;if(e){var f=c.extent,g=void 0!==f;if(g){var h=b.na,k=b.size[0]*h,l=b.size[1]*h,n=b.M.rotation,q=[f[0],f[3]],p=[f[2],f[3]],r=[f[2],f[1]],f=[f[0],f[1]];vl(b.Cb,q,q);vl(b.Cb,p,p);vl(b.Cb,r,r);vl(b.Cb,f,f);d.save();Fh(d,-n,k/2,l/2);d.beginPath();d.moveTo(q[0]*h,q[1]*h);d.lineTo(p[0]*h,p[1]*h);d.lineTo(r[0]*h,r[1]*h);d.lineTo(f[0]*h,f[1]*h);d.clip();Fh(d,n,k/2,l/2)}h=this.l;k=d.globalAlpha;d.globalAlpha=c.opacity;
d.drawImage(e,0,0,+e.width,+e.height,Math.round(h[12]),Math.round(h[13]),Math.round(e.width*h[0]),Math.round(e.height*h[5]));d.globalAlpha=k;g&&d.restore()}Pn(this,"postcompose",d,b,void 0)};function Pn(b,c,d,e,f){var g=b.ma();if(jb(g,c)){var h=e.size[0]*e.na,k=e.size[1]*e.na,l=e.M.rotation;Fh(d,-l,h/2,k/2);b=void 0!==f?f:Qn(b,e,0);b=new Fn(d,e.na,e.extent,b,e.M.rotation);g.B(new nf(c,g,b,e,d,null));Nn(b);Fh(d,l,h/2,k/2)}}
function Qn(b,c,d){var e=c.M,f=c.na;return ul(b.V,f*c.size[0]/2,f*c.size[1]/2,f/e.resolution,-f/e.resolution,-e.rotation,-e.center[0]+d,-e.center[1])};var Rn=["Polygon","LineString","Image","Text"];function Sn(b,c,d){this.Da=b;this.V=c;this.c=null;this.g=0;this.resolution=d;this.I=this.D=null;this.b=[];this.coordinates=[];this.ha=vb();this.a=[];this.qa=[];this.ra=vb();this.sa=vb()}y(Sn,mf);
function Tn(b,c,d,e,f,g){var h=b.coordinates.length,k=b.Id(),l=[c[d],c[d+1]],n=[NaN,NaN],q=!0,p,r,u;for(p=d+f;p<e;p+=f){n[0]=c[p];n[1]=c[p+1];u=k[1];var v=k[2],z=k[3],x=n[0],C=n[1],H=0;x<k[0]?H=H|16:x>v&&(H=H|4);C<u?H|=8:C>z&&(H|=2);0===H&&(H=1);u=H;u!==r?(q&&(b.coordinates[h++]=l[0],b.coordinates[h++]=l[1]),b.coordinates[h++]=n[0],b.coordinates[h++]=n[1],q=!1):1===u?(b.coordinates[h++]=n[0],b.coordinates[h++]=n[1],q=!1):q=!0;l[0]=n[0];l[1]=n[1];r=u}p===d+f&&(b.coordinates[h++]=l[0],b.coordinates[h++]=
l[1]);g&&(b.coordinates[h++]=c[d],b.coordinates[h++]=c[d+1]);return h}function Un(b,c){b.D=[0,c,0];b.b.push(b.D);b.I=[0,c,0];b.a.push(b.I)}function Vn(b){var c=b.a;c.reverse();var d,e=c.length,f,g,h=-1;for(d=0;d<e;++d)if(f=c[d],g=f[0],6==g)h=d;else if(0==g){f[2]=d;f=b.a;for(g=d;h<g;){var k=f[h];f[h]=f[g];f[g]=k;++h;--g}h=-1}}function Wn(b,c){b.D[2]=b.b.length;b.D=null;b.I[2]=b.a.length;b.I=null;var d=[6,c];b.b.push(d);b.a.push(d)}Sn.prototype.finish=Md;Sn.prototype.Id=function(){return this.V};
function Xn(b,c,d){Sn.call(this,b,c,d);this.u=this.O=null;this.C=this.A=this.Z=this.W=this.N=this.v=this.s=this.l=this.j=this.i=this.f=void 0}y(Xn,Sn);Xn.prototype.Fd=function(b,c){if(this.u){Un(this,c);var d=b.o,e=this.coordinates.length,d=Tn(this,d,0,d.length,b.a,!1);this.b.push([4,e,d,this.u,this.f,this.i,this.j,this.l,this.s,this.v,this.N,this.W,this.Z,this.A,this.C]);this.a.push([4,e,d,this.O,this.f,this.i,this.j,this.l,this.s,this.v,this.N,this.W,this.Z,this.A,this.C]);Wn(this,c)}};
Xn.prototype.Dd=function(b,c){if(this.u){Un(this,c);var d=b.o,e=this.coordinates.length,d=Tn(this,d,0,d.length,b.a,!1);this.b.push([4,e,d,this.u,this.f,this.i,this.j,this.l,this.s,this.v,this.N,this.W,this.Z,this.A,this.C]);this.a.push([4,e,d,this.O,this.f,this.i,this.j,this.l,this.s,this.v,this.N,this.W,this.Z,this.A,this.C]);Wn(this,c)}};Xn.prototype.finish=function(){Vn(this);this.i=this.f=void 0;this.u=this.O=null;this.C=this.A=this.W=this.N=this.v=this.s=this.l=this.Z=this.j=void 0};
Xn.prototype.he=function(b){var c=b.Yb(),d=b.ob(),e=b.Wd(1),f=b.Pc(1),g=b.Pa();this.f=c[0];this.i=c[1];this.O=e;this.u=f;this.j=d[1];this.l=b.N;this.s=g[0];this.v=g[1];this.N=b.W;this.W=b.s;this.Z=b.Ha();this.A=b.Z;this.C=d[0]};function Yn(b,c,d){Sn.call(this,b,c,d);this.f={Xb:void 0,Sb:void 0,Tb:null,Ub:void 0,Vb:void 0,Wb:void 0,Pd:0,strokeStyle:void 0,lineCap:void 0,H:null,lineJoin:void 0,lineWidth:void 0,miterLimit:void 0}}y(Yn,Sn);
function Zn(b,c,d,e,f){var g=b.coordinates.length;c=Tn(b,c,d,e,f,!1);g=[8,g,c];b.b.push(g);b.a.push(g);return e}m=Yn.prototype;m.Id=function(){this.c||(this.c=Hb(this.V),0<this.g&&Gb(this.c,this.resolution*(this.g+1)/2,this.c));return this.c};
function $n(b){var c=b.f,d=c.strokeStyle,e=c.lineCap,f=c.H,g=c.lineJoin,h=c.lineWidth,k=c.miterLimit;c.Xb==d&&c.Sb==e&&Wc(c.Tb,f)&&c.Ub==g&&c.Vb==h&&c.Wb==k||(c.Pd!=b.coordinates.length&&(b.b.push([12]),c.Pd=b.coordinates.length),b.b.push([10,d,h,e,g,k,f],[1]),c.Xb=d,c.Sb=e,c.Tb=f,c.Ub=g,c.Vb=h,c.Wb=k)}
m.Bd=function(b,c){var d=this.f,e=d.lineWidth;void 0!==d.strokeStyle&&void 0!==e&&($n(this),Un(this,c),this.a.push([10,d.strokeStyle,d.lineWidth,d.lineCap,d.lineJoin,d.miterLimit,d.H],[1]),d=b.o,Zn(this,d,0,d.length,b.a),this.a.push([12]),Wn(this,c))};
m.Cd=function(b,c){var d=this.f,e=d.lineWidth;if(void 0!==d.strokeStyle&&void 0!==e){$n(this);Un(this,c);this.a.push([10,d.strokeStyle,d.lineWidth,d.lineCap,d.lineJoin,d.miterLimit,d.H],[1]);var d=b.Hb(),e=b.o,f=b.a,g=0,h,k;h=0;for(k=d.length;h<k;++h)g=Zn(this,e,g,d[h],f);this.a.push([12]);Wn(this,c)}};m.finish=function(){this.f.Pd!=this.coordinates.length&&this.b.push([12]);Vn(this);this.f=null};
m.rb=function(b,c){var d=c.a;this.f.strokeStyle=oh(d?d:Eh);d=c.c;this.f.lineCap=void 0!==d?d:"round";d=c.f;this.f.H=d?d:Dh;d=c.g;this.f.lineJoin=void 0!==d?d:"round";d=c.b;this.f.lineWidth=void 0!==d?d:1;d=c.i;this.f.miterLimit=void 0!==d?d:10;this.f.lineWidth>this.g&&(this.g=this.f.lineWidth,this.c=null)};
function ao(b,c,d){Sn.call(this,b,c,d);this.f={Qe:void 0,Xb:void 0,Sb:void 0,Tb:null,Ub:void 0,Vb:void 0,Wb:void 0,fillStyle:void 0,strokeStyle:void 0,lineCap:void 0,H:null,lineJoin:void 0,lineWidth:void 0,miterLimit:void 0}}y(ao,Sn);
function bo(b,c,d,e,f){var g=b.f,h=[1];b.b.push(h);b.a.push(h);var k,h=0;for(k=e.length;h<k;++h){var l=e[h],n=b.coordinates.length;d=Tn(b,c,d,l,f,!0);d=[8,n,d];n=[3];b.b.push(d,n);b.a.push(d,n);d=l}c=[7];b.a.push(c);void 0!==g.fillStyle&&b.b.push(c);void 0!==g.strokeStyle&&(g=[12],b.b.push(g),b.a.push(g));return d}m=ao.prototype;
m.Ad=function(b,c){var d=this.f,e=d.strokeStyle;if(void 0!==d.fillStyle||void 0!==e){co(this);Un(this,c);this.a.push([9,oh(Ch)]);void 0!==d.strokeStyle&&this.a.push([10,d.strokeStyle,d.lineWidth,d.lineCap,d.lineJoin,d.miterLimit,d.H]);var f=b.o,e=this.coordinates.length;Tn(this,f,0,f.length,b.a,!1);f=[1];e=[2,e];this.b.push(f,e);this.a.push(f,e);e=[7];this.a.push(e);void 0!==d.fillStyle&&this.b.push(e);void 0!==d.strokeStyle&&(d=[12],this.b.push(d),this.a.push(d));Wn(this,c)}};
m.Gd=function(b,c){var d=this.f,e=d.strokeStyle;if(void 0!==d.fillStyle||void 0!==e)co(this),Un(this,c),this.a.push([9,oh(Ch)]),void 0!==d.strokeStyle&&this.a.push([10,d.strokeStyle,d.lineWidth,d.lineCap,d.lineJoin,d.miterLimit,d.H]),d=b.Hb(),e=Ki(b),bo(this,e,0,d,b.a),Wn(this,c)};
m.Ed=function(b,c){var d=this.f,e=d.strokeStyle;if(void 0!==d.fillStyle||void 0!==e){co(this);Un(this,c);this.a.push([9,oh(Ch)]);void 0!==d.strokeStyle&&this.a.push([10,d.strokeStyle,d.lineWidth,d.lineCap,d.lineJoin,d.miterLimit,d.H]);var d=b.c,e=Oi(b),f=b.a,g=0,h,k;h=0;for(k=d.length;h<k;++h)g=bo(this,e,g,d[h],f);Wn(this,c)}};m.finish=function(){Vn(this);this.f=null;var b=this.Da;if(0!==b){var c=this.coordinates,d,e;d=0;for(e=c.length;d<e;++d)c[d]=b*Math.round(c[d]/b)}};
m.Id=function(){this.c||(this.c=Hb(this.V),0<this.g&&Gb(this.c,this.resolution*(this.g+1)/2,this.c));return this.c};
m.rb=function(b,c){var d=this.f;if(b){var e=b.a;d.fillStyle=qh(e?e:Ch)}else d.fillStyle=void 0;c?(e=c.a,d.strokeStyle=oh(e?e:Eh),e=c.c,d.lineCap=void 0!==e?e:"round",e=c.f,d.H=e?e.slice():Dh,e=c.g,d.lineJoin=void 0!==e?e:"round",e=c.b,d.lineWidth=void 0!==e?e:1,e=c.i,d.miterLimit=void 0!==e?e:10,d.lineWidth>this.g&&(this.g=d.lineWidth,this.c=null)):(d.strokeStyle=void 0,d.lineCap=void 0,d.H=null,d.lineJoin=void 0,d.lineWidth=void 0,d.miterLimit=void 0)};
function co(b){var c=b.f,d=c.fillStyle,e=c.strokeStyle,f=c.lineCap,g=c.H,h=c.lineJoin,k=c.lineWidth,l=c.miterLimit;void 0!==d&&c.Qe!=d&&(b.b.push([9,d]),c.Qe=c.fillStyle);void 0===e||c.Xb==e&&c.Sb==f&&c.Tb==g&&c.Ub==h&&c.Vb==k&&c.Wb==l||(b.b.push([10,e,k,f,h,l,g]),c.Xb=e,c.Sb=f,c.Tb=g,c.Ub=h,c.Vb=k,c.Wb=l)}function eo(b,c,d){Sn.call(this,b,c,d);this.A=this.Z=this.W=null;this.u="";this.N=this.v=this.s=this.l=0;this.j=this.i=this.f=null}y(eo,Sn);
function fo(b,c,d,e,f){if(""!==b.u&&b.j&&(b.f||b.i)){if(b.f){var g=b.f,h=b.W;if(!h||h.fillStyle!=g.fillStyle){var k=[9,g.fillStyle];b.b.push(k);b.a.push(k);h?h.fillStyle=g.fillStyle:b.W={fillStyle:g.fillStyle}}}b.i&&(g=b.i,h=b.Z,h&&h.lineCap==g.lineCap&&h.H==g.H&&h.lineJoin==g.lineJoin&&h.lineWidth==g.lineWidth&&h.miterLimit==g.miterLimit&&h.strokeStyle==g.strokeStyle||(k=[10,g.strokeStyle,g.lineWidth,g.lineCap,g.lineJoin,g.miterLimit,g.H,!1],b.b.push(k),b.a.push(k),h?(h.lineCap=g.lineCap,h.H=g.H,
h.lineJoin=g.lineJoin,h.lineWidth=g.lineWidth,h.miterLimit=g.miterLimit,h.strokeStyle=g.strokeStyle):b.Z={lineCap:g.lineCap,H:g.H,lineJoin:g.lineJoin,lineWidth:g.lineWidth,miterLimit:g.miterLimit,strokeStyle:g.strokeStyle}));g=b.j;h=b.A;h&&h.font==g.font&&h.textAlign==g.textAlign&&h.textBaseline==g.textBaseline||(k=[11,g.font,g.textAlign,g.textBaseline],b.b.push(k),b.a.push(k),h?(h.font=g.font,h.textAlign=g.textAlign,h.textBaseline=g.textBaseline):b.A={font:g.font,textAlign:g.textAlign,textBaseline:g.textBaseline});
Un(b,f);g=b.coordinates.length;c=Tn(b,c,0,d,e,!1);c=[5,g,c,b.u,b.l,b.s,b.v,b.N,!!b.f,!!b.i];b.b.push(c);b.a.push(c);Wn(b,f)}}
eo.prototype.eb=function(b){if(b){var c=b.a;c?(c=c.a,c=qh(c?c:Ch),this.f?this.f.fillStyle=c:this.f={fillStyle:c}):this.f=null;var d=b.i;if(d){var c=d.a,e=d.c,f=d.f,g=d.g,h=d.b,d=d.i,e=void 0!==e?e:"round",f=f?f.slice():Dh,g=void 0!==g?g:"round",h=void 0!==h?h:1,d=void 0!==d?d:10,c=oh(c?c:Eh);if(this.i){var k=this.i;k.lineCap=e;k.H=f;k.lineJoin=g;k.lineWidth=h;k.miterLimit=d;k.strokeStyle=c}else this.i={lineCap:e,H:f,lineJoin:g,lineWidth:h,miterLimit:d,strokeStyle:c}}else this.i=null;var l=b.b,c=b.f,
e=b.c,f=b.g,h=b.Ha(),d=b.va(),g=b.j,k=b.u;b=void 0!==l?l:"10px sans-serif";g=void 0!==g?g:"center";k=void 0!==k?k:"middle";this.j?(l=this.j,l.font=b,l.textAlign=g,l.textBaseline=k):this.j={font:b,textAlign:g,textBaseline:k};this.u=void 0!==d?d:"";this.l=void 0!==c?c:0;this.s=void 0!==e?e:0;this.v=void 0!==f?f:0;this.N=void 0!==h?h:1}else this.u=""};function go(b,c,d){this.c=b;this.b=c;this.f=d;this.a={};Hf(1,1);vb()}go.prototype.finish=function(){for(var b in this.a){var c=this.a[b],d;for(d in c)c[d].finish()}};
function ho(b,c,d){var e=void 0!==c?c.toString():"0";c=b.a[e];void 0===c&&(c={},b.a[e]=c);e=c[d];void 0===e&&(e=new io[d](b.c,b.b,b.f),c[d]=e);return e}go.prototype.Ia=function(){return Wa(this.a)};
function jo(b,c,d,e,f,g){var h=Object.keys(b.a).map(Number);h.sort(Rc);var k=b.b,l=k[0],n=k[1],q=k[2],k=k[3],l=[l,n,l,k,q,k,q,n];gi(l,0,8,2,e,l);c.save();c.beginPath();c.moveTo(l[0],l[1]);c.lineTo(l[2],l[3]);c.lineTo(l[4],l[5]);c.lineTo(l[6],l[7]);c.closePath();c.clip();for(var p,r,l=0,n=h.length;l<n;++l)for(p=b.a[h[l].toString()],q=0,k=Rn.length;q<k;++q)if(r=p[Rn[q]],void 0!==r){var u=r,v=c,z=d,x=e,C=f,H=g;r=r.b;var E=void 0,E=u.ha;if(x[0]==E[0]&&x[1]==E[1]&&x[4]==E[4]&&x[5]==E[5]&&x[12]==E[12]&&
x[13]==E[13])E=u.qa;else{var E=gi(u.coordinates,0,u.coordinates.length,2,x,u.qa),D=u.ha;D[0]=x[0];D[1]=x[1];D[2]=x[2];D[3]=x[3];D[4]=x[4];D[5]=x[5];D[6]=x[6];D[7]=x[7];D[8]=x[8];D[9]=x[9];D[10]=x[10];D[11]=x[11];D[12]=x[12];D[13]=x[13];D[14]=x[14];D[15]=x[15]}for(var x=!Wa(H),D=0,R=r.length,F=0,M=void 0,T=u.ra,u=u.sa,K=void 0,Z=void 0,X=void 0,W=void 0;D<R;){var J=r[D],aa,ja,Cb,za;switch(J[0]){case 0:F=J[1];x&&H[w(F).toString()]||!F.J()?D=J[2]:++D;break;case 1:v.beginPath();++D;break;case 2:F=J[1];
M=E[F];J=E[F+1];X=E[F+2]-M;F=E[F+3]-J;v.arc(M,J,Math.sqrt(X*X+F*F),0,2*Math.PI,!0);++D;break;case 3:v.closePath();++D;break;case 4:F=J[1];M=J[2];aa=J[3];Cb=J[4]*z;var Hg=J[5]*z,Ig=J[6];ja=J[7];var ue=J[8],yd=J[9],X=J[11],W=J[12],wf=J[13],ve=J[14];for(J[10]&&(X+=C);F<M;F+=2){J=E[F]-Cb;za=E[F+1]-Hg;wf&&(J=Math.round(J),za=Math.round(za));if(1!=W||0!==X){var Pc=J+Cb,xf=za+Hg;ul(T,Pc,xf,W,W,X,-Pc,-xf);v.transform(T[0],T[1],T[4],T[5],T[12],T[13])}Pc=v.globalAlpha;1!=ja&&(v.globalAlpha=Pc*ja);var xf=ve+
ue>aa.width?aa.width-ue:ve,bn=Ig+yd>aa.height?aa.height-yd:Ig;v.drawImage(aa,ue,yd,xf,bn,J,za,xf*z,bn*z);1!=ja&&(v.globalAlpha=Pc);if(1!=W||0!==X)wb(T,u),v.transform(u[0],u[1],u[4],u[5],u[12],u[13])}++D;break;case 5:F=J[1];M=J[2];Cb=J[3];Hg=J[4]*z;Ig=J[5]*z;X=J[6];W=J[7]*z;aa=J[8];for(ja=J[9];F<M;F+=2){J=E[F]+Hg;za=E[F+1]+Ig;if(1!=W||0!==X)ul(T,J,za,W,W,X,-J,-za),v.transform(T[0],T[1],T[4],T[5],T[12],T[13]);ue=Cb.split("\n");yd=ue.length;1<yd?(wf=Math.round(1.5*v.measureText("M").width),za-=(yd-1)/
2*wf):wf=0;for(ve=0;ve<yd;ve++)Pc=ue[ve],ja&&v.strokeText(Pc,J,za),aa&&v.fillText(Pc,J,za),za+=wf;if(1!=W||0!==X)wb(T,u),v.transform(u[0],u[1],u[4],u[5],u[12],u[13])}++D;break;case 6:++D;break;case 7:v.fill();++D;break;case 8:F=J[1];M=J[2];J=E[F];za=E[F+1];X=J+.5|0;W=za+.5|0;if(X!==K||W!==Z)v.moveTo(J,za),K=X,Z=W;for(F+=2;F<M;F+=2)if(J=E[F],za=E[F+1],X=J+.5|0,W=za+.5|0,X!==K||W!==Z)v.lineTo(J,za),K=X,Z=W;++D;break;case 9:v.fillStyle=J[1];++D;break;case 10:K=void 0!==J[7]?J[7]:!0;Z=J[2];v.strokeStyle=
J[1];v.lineWidth=K?Z*z:Z;v.lineCap=J[3];v.lineJoin=J[4];v.miterLimit=J[5];wh&&v.setLineDash(J[6]);Z=K=NaN;++D;break;case 11:v.font=J[1];v.textAlign=J[2];v.textBaseline=J[3];++D;break;case 12:v.stroke();++D;break;default:++D}}}c.restore()}var io={Image:Xn,LineString:Yn,Polygon:ao,Text:eo};function ko(b,c){return w(b)-w(c)}function lo(b,c){var d=.5*b/c;return d*d}function mo(b,c,d,e,f,g){var h=!1,k,l;if(k=d.g)l=k.cc(),2==l||3==l?k.me(f,g):(0==l&&k.load(),k.Sd(f,g),h=!0);if(f=(0,d.f)(c))e=f.Ld(e),(0,no[e.aa()])(b,e,d,c);return h}
var no={Point:function(b,c,d,e){var f=d.g;if(f){if(2!=f.cc())return;var g=ho(b,d.a,"Image");g.he(f);g.Fd(c,e)}if(f=d.va())b=ho(b,d.a,"Text"),b.eb(f),fo(b,c.o,2,2,e)},LineString:function(b,c,d,e){var f=d.b;if(f){var g=ho(b,d.a,"LineString");g.rb(null,f);g.Bd(c,e)}if(f=d.va())b=ho(b,d.a,"Text"),b.eb(f),fo(b,vi(c),2,2,e)},Polygon:function(b,c,d,e){var f=d.c,g=d.b;if(f||g){var h=ho(b,d.a,"Polygon");h.rb(f,g);h.Gd(c,e)}if(f=d.va())b=ho(b,d.a,"Text"),b.eb(f),fo(b,Li(c),2,2,e)},MultiPoint:function(b,c,d,
e){var f=d.g;if(f){if(2!=f.cc())return;var g=ho(b,d.a,"Image");g.he(f);g.Dd(c,e)}if(f=d.va())b=ho(b,d.a,"Text"),b.eb(f),d=c.o,fo(b,d,d.length,c.a,e)},MultiLineString:function(b,c,d,e){var f=d.b;if(f){var g=ho(b,d.a,"LineString");g.rb(null,f);g.Cd(c,e)}if(f=d.va())b=ho(b,d.a,"Text"),b.eb(f),c=Ai(c),fo(b,c,c.length,2,e)},MultiPolygon:function(b,c,d,e){var f=d.c,g=d.b;if(g||f){var h=ho(b,d.a,"Polygon");h.rb(f,g);h.Ed(c,e)}if(f=d.va())b=ho(b,d.a,"Text"),b.eb(f),c=Pi(c),fo(b,c,c.length,2,e)},GeometryCollection:function(b,
c,d,e){c=c.a;var f,g;f=0;for(g=c.length;f<g;++f)(0,no[c[f].aa()])(b,c[f],d,e)},Circle:function(b,c,d,e){var f=d.c,g=d.b;if(f||g){var h=ho(b,d.a,"Polygon");h.rb(f,g);h.Ad(c,e)}if(f=d.va())b=ho(b,d.a,"Text"),b.eb(f),fo(b,c.o.slice(0,c.a),2,2,e)}};function oo(b){On.call(this,b);this.a=null;this.l=vb()}y(oo,On);
oo.prototype.j=function(b,c){var d=b.na,e=b.M,f=e.center,g=e.resolution,h=this.ma().S(),k=b.fa,l=b.extent;void 0!==c.extent&&(l=Tb(l,c.extent));if(!k[0]&&!k[1]&&!Ob(l)){if(k=e=Rf(h,l,g,d,e.projection))k=e,l=k.T(),2!=l&&3!=l&&I(k,"change",this.O,this),0==l&&(k.load(),l=k.T()),k=2==l;k&&(this.a=e)}if(this.a){var e=this.a,k=e.G(),l=e.R(),n=e.c,g=d*l/(g*n);ul(this.l,d*b.size[0]/2,d*b.size[1]/2,g,g,0,n*(k[0]-f[0])/l,n*(f[1]-k[3])/l);Al(b.ca,e.s());Bl(b,h)}return!!this.a};function po(b){On.call(this,b);this.g=null;this.c=Hf();this.u=null;this.s=Eb()}y(po,On);
po.prototype.i=function(b,c,d){var e=b.na,f=b.M,g=f.center,h=f.projection,k=b.size,f=e/f.resolution,l=this.ma(),n=l.S(),q=n.Ue(h),p=n.Fc(h),r=Qn(this,b,0);Pn(this,"precompose",d,b,r);jb(l,"render")?(this.c.canvas.width=d.canvas.width,this.c.canvas.height=d.canvas.height,l=this.c):l=d;var u=Math.round(e*k[0]/2),e=Math.round(e*k[1]/2),k=l.globalAlpha;l.globalAlpha=c.opacity;c=n.Za(h);var v=this.u,z,x,C,H,E,D,R,F,M,T,K;C=0;for(H=v.length;C<H;++C){R=v[C];F=qg(c,R.oa,this.s);if(z=!p&&this.g[R.oa.toString()]){l.save();
l.beginPath();l.moveTo((F[0]-g[0])*f+u,(g[1]-F[1])*f+e);l.lineTo((F[2]-g[0])*f+u,(g[1]-F[1])*f+e);l.lineTo((F[2]-g[0])*f+u,(g[1]-F[3])*f+e);l.lineTo((F[0]-g[0])*f+u,(g[1]-F[3])*f+e);l.closePath();E=0;for(D=z.length;E<D;++E)x=z[E],l.moveTo((x[0]-g[0])*f+u,(g[1]-x[1])*f+e),l.lineTo((x[0]-g[0])*f+u,(g[1]-x[3])*f+e),l.lineTo((x[2]-g[0])*f+u,(g[1]-x[3])*f+e),l.lineTo((x[2]-g[0])*f+u,(g[1]-x[1])*f+e),l.closePath();l.clip()}x=R.oa[0];D=n;K=x;M=D.Za(h);E=D.D;K=Bb(tg(M,K),D.I);M=void 0;1==E?M=K:(D=D.I,void 0===
D&&(D=[0,0]),D[0]=K[0]*E+.5|0,D[1]=K[1]*E+.5|0,M=D);D=M;E=[F[0],F[3]];K=Math.round(Pb(F)*f);F=Math.round(Qb(F)*f);x=qg(c,Cg(c,g,x));x=[x[0],x[1]];M=u+Math.round((x[0]-g[0])*f);T=e+Math.round((g[1]-x[1])*f);l.drawImage(R.Oc(),q,q,D[0],D[1],Math.round((E[0]-x[0])*f/K)*K+M,Math.round((x[1]-E[1])*f/F)*F+T,K,F);z&&l.restore()}l!=d&&(Pn(this,"render",l,b,r),d.drawImage(l.canvas,0,0));l.globalAlpha=k;Pn(this,"postcompose",d,b,r)};
po.prototype.j=function(b,c){function d(b){b=b.T();return 2==b||4==b||3==b&&!v}var e=b.na,f=b.M,g=f.projection,h=this.ma(),k=h.S(),l=k.Za(g),n=rg(l,f.resolution),q=l.R(n),p=f.center;q==f.resolution?(p=Dl(p,q,b.size),f=Sb(p,q,f.rotation,b.size)):f=b.extent;void 0!==c.extent&&(f=Tb(f,c.extent));if(Ob(f))return!1;var q=zg(l,f,q),r={};r[n]={};var u=xl(k,g,r),v=h.get("useInterimTilesOnError"),p=Eb(),z=new Ee(0,0,0,0),x,C,H,E;for(H=q.b;H<=q.a;++H)for(E=q.c;E<=q.f;++E)x=Qg(k,n,H,E,e,g),!d(x)&&x.a&&(x=x.a),
d(x)?r[n][x.oa.toString()]=x:(C=xg(l,x.oa,u,null,z,p),C||(x=yg(l,x.oa,z,p))&&u(n+1,x));u=Object.keys(r).map(Number);u.sort(Rc);H=[];var D,R;E=0;for(C=u.length;E<C;++E)for(D in x=u[E],R=r[x],R)x=R[D],2==x.T()&&H.push(x);this.u=H;if(!k.Fc(g)){var F={},M;for(E=H.length-1;0<=E;--E)M=H[E].oa,xg(l,M,function(b,c){var d=r[b];if(d){var e,f;for(e in d)if(f=d[e],c.contains(f.oa)&&2==f.T())return e in F||(F[e]=[]),F[e].push(qg(l,M)),!0}return!1},this,z,p);this.g=F}Cl(b.oe,k,n,q);El(b,k,l,e,g,f,n,h.get("preload"));
zl(b,k);Bl(b,k);return!0};function qo(b){On.call(this,b);this.c=!1;this.C=-1;this.A=NaN;this.s=Eb();this.g=this.v=null;this.u=Hf()}y(qo,On);
qo.prototype.i=function(b,c,d){var e=b.extent,f=b.na,g=c.kf?b.jj:{},h=b.M,k=h.projection,h=h.rotation,l=k.G(),n=this.ma().S(),q=Qn(this,b,0);Pn(this,"precompose",d,b,q);var p=this.g;if(p&&!p.Ia()){var r;jb(this.ma(),"render")?(this.u.canvas.width=d.canvas.width,this.u.canvas.height=d.canvas.height,r=this.u):r=d;var u=r.globalAlpha;r.globalAlpha=c.opacity;c=b.size[0]*f;var v=b.size[1]*f;Fh(r,-h,c/2,v/2);jo(p,r,f,q,h,g);if(n.C&&k.b&&!Ib(l,e)){for(var k=e[0],n=Pb(l),z=0;k<l[0];)--z,q=n*z,q=Qn(this,b,
q),jo(p,r,f,q,h,g),k+=n;z=0;for(k=e[2];k>l[2];)++z,q=n*z,q=Qn(this,b,q),jo(p,r,f,q,h,g),k-=n;q=Qn(this,b,0)}Fh(r,h,c/2,v/2);r!=d&&(Pn(this,"render",r,b,q),d.drawImage(r.canvas,0,0));r.globalAlpha=u}Pn(this,"postcompose",d,b,q)};qo.prototype.D=function(){yl(this)};
qo.prototype.j=function(b){function c(b){var c,e=b.i;e?c=e.call(b,n):(e=d.i)&&(c=e(b,n));if(c){if(c){e=!1;if(ea(c))for(var f=0,g=c.length;f<g;++f)e=mo(r,b,c[f],lo(n,q),this.D,this)||e;else e=mo(r,b,c,lo(n,q),this.D,this)||e;b=e}else b=!1;this.c=this.c||b}}var d=this.ma(),e=d.S();Al(b.ca,e.s());Bl(b,e);var f=b.fa[0],g=b.fa[1],h=d.s,k=d.v;if(!this.c&&!h&&f||!k&&g)return!0;var l=b.extent,k=b.M,f=k.projection,n=k.resolution,q=b.na,g=d.f,p=d.l,h=d.get("renderOrder");void 0===h&&(h=ko);l=Gb(l,p*n);p=k.projection.G();
e.C&&k.projection.b&&!Ib(p,b.extent)&&(b=Math.max(Pb(l)/2,Pb(p)),l[0]=p[0]-b,l[2]=p[2]+b);if(!this.c&&this.A==n&&this.C==g&&this.v==h&&Ib(this.s,l))return!0;hb(this.g);this.g=null;this.c=!1;var r=new go(.5*n/q,l,n);Kj(e,l,n,f);if(h){var u=[];Ij(e,l,function(b){u.push(b)},this);u.sort(h);u.forEach(c,this)}else Ij(e,l,c,this);r.finish();this.A=n;this.C=g;this.v=h;this.s=l;this.g=r;return!0};function ro(b,c){Jl.call(this,0,c);this.f=Hf();this.j=Hf();this.a=this.f.canvas;this.a.style.width="100%";this.a.style.height="100%";this.a.className="ol-unselectable";b.insertBefore(this.a,b.childNodes[0]||null);this.i=this.j.canvas;this.N=[0,0];this.A=Eb();this.c=!0;this.v=vb()}y(ro,Jl);
function so(b,c,d){var e=b.u,f=b.f;if(jb(e,c)){var g=d.extent,h=d.na,k=d.M.rotation,l=d.na,n=d.M,q=n.resolution;b=ul(b.v,b.a.width/2,b.a.height/2,l/q,-l/q,-n.rotation,-n.center[0],-n.center[1]);g=new Fn(f,h,g,b,k);e.B(new nf(c,e,g,d,f,null));Nn(g)}}ro.prototype.aa=function(){return"canvas"};
ro.prototype.l=function(b){if(b){var c,d=b.na,e=b.size[0]*d,f=b.size[1]*d;this.a.width=e;this.a.height=f;var g=b.M.rotation,h;if(g){c=this.j;h=Sb(this.N,d,g,b.size,this.A);var d=Pb(h),k=Qb(h);this.i.width=d+.5;this.i.height=k+.5;this.j.translate(Math.round((d-e)/2),Math.round((k-f)/2))}else c=this.f;d=b.M;k=b.Cb;ul(k,b.size[0]/2,b.size[1]/2,1/d.resolution,-1/d.resolution,-d.rotation,-d.center[0],-d.center[1]);wb(k,b.Bf);so(this,"precompose",b);d=b.Rd;Xc(d);var k=b.M.resolution,l,n,q,p;l=0;for(n=d.length;l<
n;++l){p=d[l];q=p.layer;var r=q;q=w(r).toString();q in this.b?q=this.b[q]:(r=r instanceof qf?new oo(r):r instanceof rf?new po(r):r instanceof rj?new qo(r):null,this.b[q]=r,this.g[q]=I(r,"change",this.s,this),q=r);p.visible&&k>=p.Sa&&k<p.bb&&"ready"==p.lj&&q.j(b,p)&&q.i(b,p,c)}g&&(this.f.translate(e/2,f/2),this.f.rotate(g),this.f.drawImage(this.i,Math.round(h[0]),Math.round(h[1])),this.f.rotate(-g),this.f.translate(-e/2,-f/2));so(this,"postcompose",b);this.c||(ak(this.a,!0),this.c=!0);for(var u in this.b)if(!(u in
b.Qd)){b.Rc.push(this.C.bind(this));break}b.Rc.push(Kl)}else this.c&&(ak(this.a,!1),this.c=!1)};var to=["canvas","webgl","dom"];
function uo(b){mb.call(this);var c=vo(b);this.La=void 0!==b.Uh?b.Uh:!1;this.Ma=void 0!==b.Vh?b.Vh:!1;this.Xa=void 0!==b.na?b.na:vh;this.Wa=c.Mb;this.He=function(){this.gb=void 0;this.cj.call(this,Date.now())}.bind(this);this.Da=vb();this.xb=vb();this.Ka=0;this.j=null;this.ra=Eb();this.C=this.I=null;this.a=document.createElement("DIV");this.a.className="ol-viewport";this.a.style.position="relative";this.a.style.overflow="hidden";this.a.style.width="100%";this.a.style.height="100%";this.a.style.msTouchAction=
"none";this.a.style.touchAction="none";zh&&vk(this.a,"ol-touch");this.v=document.createElement("DIV");this.v.className="ol-overlaycontainer";this.a.appendChild(this.v);this.s=document.createElement("DIV");this.s.className="ol-overlaycontainer-stopevent";b=["click","dblclick","mousedown","touchstart","mspointerdown",ql,jc?"DOMMouseScroll":"mousewheel"];for(var d=0,e=b.length;d<e;++d)I(this.s,b[d],Ta);this.a.appendChild(this.s);b=new il(this);for(var f in tl)I(b,tl[f],this.cf,this);gb(this,qa(hb,b));
this.V=c.ac;this.l=null;I(this.a,"wheel",this.Jb,this);I(this.a,"mousewheel",this.Jb,this);this.A=c.controls;this.i=c.mb;this.c=c.ec;this.Af={};this.sa=new c.dj(this.a,this);gb(this,qa(hb,this.sa));this.O=null;this.D=[];this.ha=[];this.qa=new Ol(this.$g.bind(this),this.Dh.bind(this));this.yb={};I(this,L("layergroup"),this.lh,this);I(this,L("view"),this.Eh,this);I(this,L("size"),this.Ah,this);I(this,L("target"),this.Ch,this);this.ka(c.values);this.A.forEach(function(b){b.setMap(this)},this);I(this.A,
"add",function(b){b.element.setMap(this)},this);I(this.A,"remove",function(b){b.element.setMap(null)},this);this.i.forEach(function(b){b.setMap(this)},this);I(this.i,"add",function(b){b.element.setMap(this)},this);I(this.i,"remove",function(b){b.element.setMap(null)},this);this.c.forEach(this.De,this);I(this.c,"add",function(b){this.De(b.element)},this);I(this.c,"remove",function(b){var c=b.element.Ya();void 0!==c&&delete this.Af[c.toString()];b.element.setMap(null)},this)}y(uo,mb);
function Zg(b,c){lf(Yg(b)).push(c)}m=uo.prototype;m.De=function(b){var c=b.Ya();void 0!==c&&(this.Af[c.toString()]=b);b.setMap(this)};m.Ea=function(b){this.render();Array.prototype.push.apply(this.D,arguments)};m.L=function(){cb(this.a,"wheel",this.Jb,this);cb(this.a,"mousewheel",this.Jb,this);void 0!==this.g&&(t.removeEventListener("resize",this.g,!1),this.g=void 0);this.gb&&(t.cancelAnimationFrame(this.gb),this.gb=void 0);Jc(this.a);uo.U.L.call(this)};
function wo(b){b=b.get("target");return void 0!==b?Ac(b):null}m.Gb=function(b){var c=this.j;return c?(b=b.slice(),vl(c.Bf,b,b)):null};function Yg(b){return b.get("layergroup")}function Nm(b,c){var d=b.j;if(d){var e=c.slice(0,2);return vl(d.Cb,e,e)}return null}function Sm(b){return b.get("size")}function U(b){return b.get("view")}
m.$g=function(b,c,d,e){var f=this.j;if(!(f&&c in f.nc&&f.nc[c][b.oa.toString()]))return Infinity;b=d[0]-f.focus[0];d=d[1]-f.focus[1];return 65536*Math.log(e)+Math.sqrt(b*b+d*d)/e};m.Jb=function(b,c){var d=new gl(c||b.type,this,b);this.cf(d)};m.cf=function(b){if(this.j){this.O=b.coordinate;b.frameState=this.j;var c=this.i.a,d;if(!1!==this.B(b))for(d=c.length-1;0<=d;d--){var e=c[d];if(e.getActive()&&!e.handleEvent(b))break}}};
m.yh=function(){var b=this.j,c=this.qa;if(!c.Ia()){var d=16,e=d;if(b){var f=b.fa;f[0]&&(d=this.La?8:0,e=2);f[1]&&(d=this.Ma?8:0,e=2)}if(c.c<d){var f=c.l,g=c.a,h=c.b,k=0,l=g.length,n,q,p;for(q=0;q<l;++q)n=g[q],p=f(n),Infinity==p?delete c.f[c.g(n)]:(h[k]=p,g[k++]=n);g.length=k;h.length=k;for(f=(c.a.length>>1)-1;0<=f;f--)Nl(c,f);for(f=0;c.c<d&&f<e&&0<c.Oa();)g=c,k=g.a,l=g.b,h=k[0],1==k.length?(k.length=0,l.length=0):(k[0]=k.pop(),l[0]=l.pop(),Nl(g,0)),k=g.g(h),delete g.f[k],g=h[0],0===g.T()&&(c.j[g.bc()]=
!0,++c.c,++f,g.load())}}c=this.ha;e=0;for(d=c.length;e<d;++e)c[e](this,b);c.length=0};m.Ah=function(){this.render()};m.Ch=function(){var b=wo(this);if(this.l){for(var c=0,d=this.l.length;c<d;++c)G(this.l[c]);this.l=null}b?(b.appendChild(this.a),b=this.V?this.V:b,this.l=[I(b,"keydown",this.Jb,this),I(b,"keypress",this.Jb,this)],this.g||(this.g=this.ne.bind(this),t.addEventListener("resize",this.g,!1))):(Jc(this.a),void 0!==this.g&&(t.removeEventListener("resize",this.g,!1),this.g=void 0));this.ne()};
m.Dh=function(){this.render()};m.Fh=function(){this.render()};m.Eh=function(){this.I&&(G(this.I),this.I=null);var b=U(this);b&&(this.I=I(b,"propertychange",this.Fh,this));this.render()};m.mh=function(){this.render()};m.nh=function(){this.render()};m.lh=function(){this.C&&(this.C.forEach(G),this.C=null);var b=Yg(this);b&&(this.C=[I(b,"propertychange",this.nh,this),I(b,"change",this.mh,this)]);this.render()};m.render=function(){void 0===this.gb&&(this.gb=t.requestAnimationFrame(this.He))};
m.cj=function(b){var c,d,e,f=Sm(this),g=U(this),h=null;if(void 0!==f&&0<f[0]&&0<f[1]&&g&&dm(g)){var h=g.i.slice(),k=Yg(this).Kd(),l={};c=0;for(d=k.length;c<d;++c)l[w(k[c].layer)]=k[c];e=g.T();h={animate:!1,ca:{},Cb:this.Da,extent:null,focus:this.O?this.O:e.center,index:this.Ka++,Qd:l,Rd:k,Mb:Ua({},this.Wa),na:this.Xa,Bf:this.xb,Rc:[],size:f,jj:this.yb,oj:this.qa,time:b,oe:{},M:e,fa:h,nc:{}}}if(h){b=this.D;c=f=0;for(d=b.length;c<d;++c)g=b[c],g(this,h)&&(b[f++]=g);b.length=f;h.extent=Sb(e.center,e.resolution,
e.rotation,h.size)}this.j=h;this.sa.l(h);h&&(h.animate&&this.render(),Array.prototype.push.apply(this.ha,h.Rc),0!==this.D.length||h.fa[0]||h.fa[1]||Kb(h.extent,this.ra)||(this.B(new zk("moveend",this,h)),Hb(h.extent,this.ra)));this.B(new zk("postrender",this,h));d=c=this.yh;this&&(d=pa(c,this));!ia(t.setImmediate)||t.Window&&t.Window.prototype&&!Zb("Edge")&&t.Window.prototype.setImmediate==t.setImmediate?(fk||(fk=gk()),fk(d)):t.setImmediate(d)};
m.ne=function(){var b=wo(this);if(b){var c=zc(b),d=hc&&b.currentStyle,e;if(e=d)xc(c),e=!0;if(e&&"auto"!=d.width&&"auto"!=d.height&&!d.boxSizing)c=bk(b,d.width,"width","pixelWidth"),b=bk(b,d.height,"height","pixelHeight"),b=new wc(c,b);else{d=new wc(b.offsetWidth,b.offsetHeight);if(hc){c=ck(b,"paddingLeft");e=ck(b,"paddingRight");var f=ck(b,"paddingTop"),g=ck(b,"paddingBottom"),c=new Qj(f,e,g,c)}else c=Tj(b,"paddingLeft"),e=Tj(b,"paddingRight"),f=Tj(b,"paddingTop"),g=Tj(b,"paddingBottom"),c=new Qj(parseFloat(f),
parseFloat(e),parseFloat(g),parseFloat(c));!hc||9<=Number(sc)?(e=Tj(b,"borderLeftWidth"),f=Tj(b,"borderRightWidth"),g=Tj(b,"borderTopWidth"),b=Tj(b,"borderBottomWidth"),b=new Qj(parseFloat(g),parseFloat(f),parseFloat(b),parseFloat(e))):(e=ek(b,"borderLeft"),f=ek(b,"borderRight"),g=ek(b,"borderTop"),b=ek(b,"borderBottom"),b=new Qj(g,f,b,e));b=new wc(d.width-b.left-c.left-c.right-b.right,d.height-b.top-c.top-c.bottom-b.bottom)}this.set("size",[b.width,b.height])}else this.set("size",void 0)};
function vo(b){var c=null;void 0!==b.ac&&(c="string"===typeof b.ac?document.getElementById(b.ac):b.ac);var d={},e={};if(void 0===b.ea||"boolean"===typeof b.ea&&b.ea)e["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAA3NCSVQICAjb4U/gAAAACXBIWXMAAAHGAAABxgEXwfpGAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAhNQTFRF////AP//AICAgP//AFVVQECA////K1VVSbbbYL/fJ05idsTYJFtbbcjbJllmZszWWMTOIFhoHlNiZszTa9DdUcHNHlNlV8XRIVdiasrUHlZjIVZjaMnVH1RlIFRkH1RkH1ZlasvYasvXVsPQH1VkacnVa8vWIVZjIFRjVMPQa8rXIVVkXsXRsNveIFVkIFZlIVVj3eDeh6GmbMvXH1ZkIFRka8rWbMvXIFVkIFVjIFVkbMvWH1VjbMvWIFVlbcvWIFVla8vVIFVkbMvWbMvVH1VkbMvWIFVlbcvWIFVkbcvVbMvWjNPbIFVkU8LPwMzNIFVkbczWIFVkbsvWbMvXIFVkRnB8bcvW2+TkW8XRIFVkIlZlJVloJlpoKlxrLl9tMmJwOWd0Omh1RXF8TneCT3iDUHiDU8LPVMLPVcLPVcPQVsPPVsPQV8PQWMTQWsTQW8TQXMXSXsXRX4SNX8bSYMfTYcfTYsfTY8jUZcfSZsnUaIqTacrVasrVa8jTa8rWbI2VbMvWbcvWdJObdcvUdszUd8vVeJaee87Yfc3WgJyjhqGnitDYjaarldPZnrK2oNbborW5o9bbo9fbpLa6q9ndrL3ArtndscDDutzfu8fJwN7gwt7gxc/QyuHhy+HizeHi0NfX0+Pj19zb1+Tj2uXk29/e3uLg3+Lh3+bl4uXj4ufl4+fl5Ofl5ufl5ujm5+jmySDnBAAAAFp0Uk5TAAECAgMEBAYHCA0NDg4UGRogIiMmKSssLzU7PkJJT1JTVFliY2hrdHZ3foSFhYeJjY2QkpugqbG1tre5w8zQ09XY3uXn6+zx8vT09vf4+Pj5+fr6/P39/f3+gz7SsAAAAVVJREFUOMtjYKA7EBDnwCPLrObS1BRiLoJLnte6CQy8FLHLCzs2QUG4FjZ5GbcmBDDjxJBXDWxCBrb8aM4zbkIDzpLYnAcE9VXlJSWlZRU13koIeW57mGx5XjoMZEUqwxWYQaQbSzLSkYGfKFSe0QMsX5WbjgY0YS4MBplemI4BdGBW+DQ11eZiymfqQuXZIjqwyadPNoSZ4L+0FVM6e+oGI6g8a9iKNT3o8kVzNkzRg5lgl7p4wyRUL9Yt2jAxVh6mQCogae6GmflI8p0r13VFWTHBQ0rWPW7ahgWVcPm+9cuLoyy4kCJDzCm6d8PSFoh0zvQNC5OjDJhQopPPJqph1doJBUD5tnkbZiUEqaCnB3bTqLTFG1bPn71kw4b+GFdpLElKIzRxxgYgWNYc5SCENVHKeUaltHdXx0dZ8uBI1hJ2UUDgq82CM2MwKeibqAvSO7MCABq0wXEPiqWEAAAAAElFTkSuQmCC"]=
"http://openlayers.org/";else{var f=b.ea;"string"===typeof f?e[f]="":ka(f)&&(e[f.src]=f.href)}f=b.layers instanceof kf?b.layers:new kf({layers:b.layers});d.layergroup=f;d.target=b.target;d.view=void 0!==b.view?b.view:new Yl;var f=Jl,g;void 0!==b.Vc?ea(b.Vc)?g=b.Vc:"string"===typeof b.Vc&&(g=[b.Vc]):g=to;var h,k;h=0;for(k=g.length;h<k;++h)if("canvas"==g[h]&&xh){f=ro;break}void 0!==b.controls?g=ea(b.controls)?new pb(b.controls.slice()):b.controls:(g={},h=new pb,(void 0!==g.zoom?g.zoom:1)&&h.push(new rm(g.mk)),
(void 0!==g.rotate?g.rotate:1)&&h.push(new pm(g.kk)),(void 0!==g.attribution?g.attribution:1)&&h.push(new hm(g.bk)),g=h);var l;void 0!==b.mb?l=ea(b.mb)?new pb(b.mb.slice()):b.mb:l=sn();b=void 0!==b.ec?ea(b.ec)?new pb(b.ec.slice()):b.ec:new pb;return{controls:g,mb:l,ac:c,Mb:e,ec:b,dj:f,values:d}}Pe(xn);Pe(En);En.forEach(function(b){xn.forEach(function(c){Qe(b,c,yn);Qe(c,b,zn)})});function xo(b){mb.call(this);this.D=b.id;this.C=void 0!==b.Ph?b.Ph:!0;this.I=void 0!==b.Rf?b.Rf:!0;this.c=document.createElement("DIV");this.c.className="ol-overlay-container";this.c.style.position="absolute";this.md=void 0!==b.md?b.md:!1;this.j=void 0!==b.Bg?b.Bg:{};this.s=void 0!==b.Cg?b.Cg:20;this.a={uc:"",Kc:"",Xc:"",ad:"",visible:!0};this.i=null;I(this,L("element"),this.kh,this);I(this,L("map"),this.rh,this);I(this,L("offset"),this.uh,this);I(this,L("position"),this.wh,this);I(this,L("positioning"),
this.xh,this);void 0!==b.element&&this.set("element",b.element);this.set("offset",void 0!==b.offset?b.offset:[0,0]);this.set("positioning",void 0!==b.Yd?b.Yd:"top-left");void 0!==b.position&&this.setPosition(b.position)}y(xo,mb);m=xo.prototype;m.Ya=function(){return this.D};m.kh=function(){Ic(this.c);var b=this.get("element");b&&this.c.appendChild(b)};
m.rh=function(){this.i&&(Jc(this.c),G(this.i),this.i=null);var b=this.get("map");b&&(this.i=I(b,"postrender",this.render,this),yo(this),b=this.I?b.s:b.v,this.C?b.insertBefore(this.c,b.childNodes[0]||null):b.appendChild(this.c))};m.render=function(){yo(this)};m.uh=function(){yo(this)};
m.wh=function(){yo(this);if(void 0!==this.get("position")&&this.md){var b=this.get("map");if(void 0!==b&&wo(b)){var c=zo(wo(b),Sm(b)),d=this.get("element"),e=d.offsetWidth,f=d.currentStyle||window.getComputedStyle(d),e=e+(parseInt(f.marginLeft,10)+parseInt(f.marginRight,10)),f=d.offsetHeight,g=d.currentStyle||window.getComputedStyle(d),f=f+(parseInt(g.marginTop,10)+parseInt(g.marginBottom,10)),h=zo(d,[e,f]),d=this.s;Ib(c,h)||(e=h[0]-c[0],f=c[2]-h[2],g=h[1]-c[1],h=c[3]-h[3],c=[0,0],0>e?c[0]=e-d:0>
f&&(c[0]=Math.abs(f)+d),0>g?c[1]=g-d:0>h&&(c[1]=Math.abs(h)+d),0===c[0]&&0===c[1])||(d=Zl(U(b)),e=Nm(b,d),c=[e[0]+c[0],e[1]+c[1]],this.j&&(this.j.source=d,b.Ea(mm(this.j))),cm(U(b),b.Gb(c)))}}};m.xh=function(){yo(this)};m.setMap=function(b){this.set("map",b)};m.setPosition=function(b){this.set("position",b)};function zo(b,c){var d=Vj(b);return[d.x,d.y,d.x+c[0],d.y+c[1]]}m.Ta=function(b){this.a.visible!==b&&(ak(this.c,b),this.a.visible=b)};
function yo(b){var c=b.get("map"),d=b.get("position");if(void 0!==c&&c.j&&void 0!==d){var d=Nm(c,d),e=Sm(c),c=b.c.style,f=b.get("offset"),g=b.get("positioning"),h=f[0],f=f[1];if("bottom-right"==g||"center-right"==g||"top-right"==g)""!==b.a.Kc&&(b.a.Kc=c.left=""),h=Math.round(e[0]-d[0]-h)+"px",b.a.Xc!=h&&(b.a.Xc=c.right=h);else{""!==b.a.Xc&&(b.a.Xc=c.right="");if("bottom-center"==g||"center-center"==g||"top-center"==g)h-=Xj(b.c).width/2;h=Math.round(d[0]+h)+"px";b.a.Kc!=h&&(b.a.Kc=c.left=h)}if("bottom-left"==
g||"bottom-center"==g||"bottom-right"==g)""!==b.a.ad&&(b.a.ad=c.top=""),d=Math.round(e[1]-d[1]-f)+"px",b.a.uc!=d&&(b.a.uc=c.bottom=d);else{""!==b.a.uc&&(b.a.uc=c.bottom="");if("center-left"==g||"center-center"==g||"center-right"==g)f-=Xj(b.c).height/2;d=Math.round(d[1]+f)+"px";b.a.ad!=d&&(b.a.ad=c.top=d)}b.Ta(!0)}else b.Ta(!1)};var Ao=!hc||9<=Number(sc),Bo=!hc||9<=Number(sc),Co=hc&&!qc("9");!kc||qc("528");jc&&qc("1.9b")||hc&&qc("8")||gc&&qc("9.5")||kc&&qc("528");jc&&!qc("8")||hc&&qc("9");function Do(b,c){this.type=b;this.a=this.target=c;this.defaultPrevented=this.f=!1;this.Of=!0}Do.prototype.stopPropagation=function(){this.f=!0};Do.prototype.preventDefault=function(){this.defaultPrevented=!0;this.Of=!1};function Eo(b,c){Do.call(this,b?b.type:"");this.relatedTarget=this.a=this.target=null;this.button=this.screenY=this.screenX=this.clientY=this.clientX=this.offsetY=this.offsetX=0;this.c=!1;this.b=this.state=null;if(b){var d=this.type=b.type,e=b.changedTouches?b.changedTouches[0]:null;this.target=b.target||b.srcElement;this.a=c;var f=b.relatedTarget;if(f){if(jc){var g;a:{try{Sj(f.nodeName);g=!0;break a}catch(h){}g=!1}g||(f=null)}}else"mouseover"==d?f=b.fromElement:"mouseout"==d&&(f=b.toElement);this.relatedTarget=
f;null===e?(this.offsetX=kc||void 0!==b.offsetX?b.offsetX:b.layerX,this.offsetY=kc||void 0!==b.offsetY?b.offsetY:b.layerY,this.clientX=void 0!==b.clientX?b.clientX:b.pageX,this.clientY=void 0!==b.clientY?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0);this.button=b.button;this.c=b.ctrlKey;this.state=b.state;this.b=b;b.defaultPrevented&&
this.preventDefault()}}y(Eo,Do);var Fo=[1,4,2];Eo.prototype.stopPropagation=function(){Eo.U.stopPropagation.call(this);this.b.stopPropagation?this.b.stopPropagation():this.b.cancelBubble=!0};Eo.prototype.preventDefault=function(){Eo.U.preventDefault.call(this);var b=this.b;if(b.preventDefault)b.preventDefault();else if(b.returnValue=!1,Co)try{if(b.ctrlKey||112<=b.keyCode&&123>=b.keyCode)b.keyCode=-1}catch(c){}};var Go="closure_listenable_"+(1E6*Math.random()|0),Ho=0;function Io(b,c,d,e,f){this.listener=b;this.a=null;this.src=c;this.type=d;this.wc=!!e;this.Jc=f;this.key=++Ho;this.Ob=this.hb=!1}function Jo(b){b.Ob=!0;b.listener=null;b.a=null;b.src=null;b.Jc=null};function Ko(b){this.src=b;this.listeners={};this.a=0}function Lo(b,c,d,e,f){var g=c.toString();c=b.listeners[g];c||(c=b.listeners[g]=[],b.a++);var h=Mo(c,d,e,f);-1<h?(b=c[h],b.hb=!1):(b=new Io(d,b.src,g,!!e,f),b.hb=!1,c.push(b));return b}Ko.prototype.remove=function(b,c,d,e){b=b.toString();if(!(b in this.listeners))return!1;var f=this.listeners[b];c=Mo(f,c,d,e);return-1<c?(Jo(f[c]),Array.prototype.splice.call(f,c,1),0==f.length&&(delete this.listeners[b],this.a--),!0):!1};
function No(b,c){var d=c.type;d in b.listeners&&Oa(b.listeners[d],c)&&(Jo(c),0==b.listeners[d].length&&(delete b.listeners[d],b.a--))}function Oo(b,c,d,e,f){b=b.listeners[c.toString()];c=-1;b&&(c=Mo(b,d,e,f));return-1<c?b[c]:null}function Mo(b,c,d,e){for(var f=0;f<b.length;++f){var g=b[f];if(!g.Ob&&g.listener==c&&g.wc==!!d&&g.Jc==e)return f}return-1};var Po="closure_lm_"+(1E6*Math.random()|0),Qo={},Ro=0;
function So(b,c,d,e,f){if(ea(c)){for(var g=0;g<c.length;g++)So(b,c[g],d,e,f);return null}d=To(d);if(b&&b[Go])b=b.Aa(c,d,e,f);else{if(!c)throw Error("Invalid event type");var g=!!e,h=Uo(b);h||(b[Po]=h=new Ko(b));d=Lo(h,c,d,e,f);if(!d.a){e=Vo();d.a=e;e.src=b;e.listener=d;if(b.addEventListener)b.addEventListener(c.toString(),e,g);else if(b.attachEvent)b.attachEvent(Wo(c.toString()),e);else throw Error("addEventListener and attachEvent are unavailable.");Ro++}b=d}return b}
function Vo(){var b=Xo,c=Bo?function(d){return b.call(c.src,c.listener,d)}:function(d){d=b.call(c.src,c.listener,d);if(!d)return d};return c}function Yo(b,c,d,e,f){if(ea(c))for(var g=0;g<c.length;g++)Yo(b,c[g],d,e,f);else d=To(d),b&&b[Go]?b.Qb(c,d,e,f):b&&(b=Uo(b))&&(c=Oo(b,c,d,!!e,f))&&Zo(c)}
function Zo(b){if(!ha(b)&&b&&!b.Ob){var c=b.src;if(c&&c[Go])No(c.g,b);else{var d=b.type,e=b.a;c.removeEventListener?c.removeEventListener(d,e,b.wc):c.detachEvent&&c.detachEvent(Wo(d),e);Ro--;(d=Uo(c))?(No(d,b),0==d.a&&(d.src=null,c[Po]=null)):Jo(b)}}}function Wo(b){return b in Qo?Qo[b]:Qo[b]="on"+b}function $o(b,c,d,e){var f=!0;if(b=Uo(b))if(c=b.listeners[c.toString()])for(c=c.concat(),b=0;b<c.length;b++){var g=c[b];g&&g.wc==d&&!g.Ob&&(g=ap(g,e),f=f&&!1!==g)}return f}
function ap(b,c){var d=b.listener,e=b.Jc||b.src;b.hb&&Zo(b);return d.call(e,c)}
function Xo(b,c){if(b.Ob)return!0;if(!Bo){var d;if(!(d=c))a:{d=["window","event"];for(var e=t,f;f=d.shift();)if(null!=e[f])e=e[f];else{d=null;break a}d=e}f=d;d=new Eo(f,this);e=!0;if(!(0>f.keyCode||void 0!=f.returnValue)){a:{var g=!1;if(0==f.keyCode)try{f.keyCode=-1;break a}catch(l){g=!0}if(g||void 0==f.returnValue)f.returnValue=!0}f=[];for(g=d.a;g;g=g.parentNode)f.push(g);for(var g=b.type,h=f.length-1;!d.f&&0<=h;h--){d.a=f[h];var k=$o(f[h],g,!0,d),e=e&&k}for(h=0;!d.f&&h<f.length;h++)d.a=f[h],k=$o(f[h],
g,!1,d),e=e&&k}return e}return ap(b,new Eo(c,this))}function Uo(b){b=b[Po];return b instanceof Ko?b:null}var bp="__closure_events_fn_"+(1E9*Math.random()>>>0);function To(b){if(ia(b))return b;b[bp]||(b[bp]=function(c){return b.handleEvent(c)});return b[bp]};function cp(b){b=void 0!==b?b:{};this.g=null;var c;b.element?(c=b.element,delete b.element):c=$("<div />")[0];this.l=$("<button>",{"class":"close",html:"&times;"});this.v=$("<div/>").append(this.l).append(c);b.element=$("<div />")[0];xo.call(this,b)}y(cp,xo);
cp.prototype.setMap=function(b){var c=this.get("element");this.get("map")&&(this.g&&(Zo(this.g),this.g=null),$(c).popover("destroy"));cp.U.setMap.call(this,b);if(b){var d=this.v;window.setTimeout(function(){$(c).popover({content:d,html:!0,placement:"top",template:'<div class="popover ngeo-popover" role="tooltip">  <div class="arrow"></div>  <h3 class="popover-title"></h3>  <div class="popover-content"></div></div>'}).popover("show")},0);this.g=So(this.l[0],"click",this.A,!1,this)}};
cp.prototype.setMap=cp.prototype.setMap;cp.prototype.A=function(){var b=this.get("map");b&&b.c.remove(this)};function dp(){};function ep(){}y(ep,dp);ep.prototype.Oa=function(){var b=0;mk(this.zb(!0),function(){b++});return b};ep.prototype.clear=function(){var b=nk(this.zb(!0)),c=this;Ka(b,function(b){c.remove(b)})};function fp(b){this.a=b}y(fp,ep);function gp(b){if(!b.a)return!1;try{return b.a.setItem("__sak","1"),b.a.removeItem("__sak"),!0}catch(c){return!1}}m=fp.prototype;m.set=function(b,c){try{this.a.setItem(b,c)}catch(d){if(0==this.a.length)throw"Storage mechanism: Storage disabled";throw"Storage mechanism: Quota exceeded";}};m.get=function(b){b=this.a.getItem(b);if(!ga(b)&&null!==b)throw"Storage mechanism: Invalid value was encountered";return b};m.remove=function(b){this.a.removeItem(b)};m.Oa=function(){return this.a.length};
m.zb=function(b){var c=0,d=this.a,e=new kk;e.next=function(){if(c>=d.length)throw jk;var e=d.key(c++);if(b)return e;e=d.getItem(e);if(!ga(e))throw"Storage mechanism: Invalid value was encountered";return e};return e};m.clear=function(){this.a.clear()};m.key=function(b){return this.a.key(b)};function hp(){var b=null;try{b=window.localStorage||null}catch(c){}this.a=b}y(hp,fp);function ip(b,c){this.f=this.j=this.c="";this.u=null;this.g=this.a="";this.i=!1;var d;b instanceof ip?(this.i=ba(c)?c:b.i,jp(this,b.c),this.j=b.j,this.f=b.f,kp(this,b.u),this.a=b.a,lp(this,b.b.clone()),this.g=b.g):b&&(d=String(b).match(sf))?(this.i=!!c,jp(this,d[1]||"",!0),this.j=mp(d[2]||""),this.f=mp(d[3]||"",!0),kp(this,d[4]),this.a=mp(d[5]||"",!0),lp(this,d[6]||"",!0),this.g=mp(d[7]||"")):(this.i=!!c,this.b=new np(null,0,this.i))}
ip.prototype.toString=function(){var b=[],c=this.c;c&&b.push(op(c,pp,!0),":");var d=this.f;if(d||"file"==c)b.push("//"),(c=this.j)&&b.push(op(c,pp,!0),"@"),b.push(encodeURIComponent(String(d)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d=this.u,null!=d&&b.push(":",String(d));if(d=this.a)this.f&&"/"!=d.charAt(0)&&b.push("/"),b.push(op(d,"/"==d.charAt(0)?qp:rp,!0));(d=this.b.toString())&&b.push("?",d);(d=this.g)&&b.push("#",op(d,sp));return b.join("")};
ip.prototype.resolve=function(b){var c=this.clone(),d=!!b.c;d?jp(c,b.c):d=!!b.j;d?c.j=b.j:d=!!b.f;d?c.f=b.f:d=null!=b.u;var e=b.a;if(d)kp(c,b.u);else if(d=!!b.a){if("/"!=e.charAt(0))if(this.f&&!this.a)e="/"+e;else{var f=c.a.lastIndexOf("/");-1!=f&&(e=c.a.substr(0,f+1)+e)}f=e;if(".."==f||"."==f)e="";else if(-1!=f.indexOf("./")||-1!=f.indexOf("/.")){for(var e=0==f.lastIndexOf("/",0),f=f.split("/"),g=[],h=0;h<f.length;){var k=f[h++];"."==k?e&&h==f.length&&g.push(""):".."==k?((1<g.length||1==g.length&&
""!=g[0])&&g.pop(),e&&h==f.length&&g.push("")):(g.push(k),e=!0)}e=g.join("/")}else e=f}d?c.a=e:d=""!==b.b.toString();d?lp(c,mp(b.b.toString())):d=!!b.g;d&&(c.g=b.g);return c};ip.prototype.clone=function(){return new ip(this)};function jp(b,c,d){b.c=d?mp(c,!0):c;b.c&&(b.c=b.c.replace(/:$/,""))}function kp(b,c){if(c){c=Number(c);if(isNaN(c)||0>c)throw Error("Bad port number "+c);b.u=c}else b.u=null}function lp(b,c,d){c instanceof np?(b.b=c,tp(b.b,b.i)):(d||(c=op(c,up)),b.b=new np(c,0,b.i))}
function vp(b){return b instanceof ip?b.clone():new ip(b,void 0)}function wp(b,c){b instanceof ip||(b=vp(b));c instanceof ip||(c=vp(c));return b.resolve(c)}function mp(b,c){return b?c?decodeURI(b.replace(/%25/g,"%2525")):decodeURIComponent(b):""}function op(b,c,d){return ga(b)?(b=encodeURI(b).replace(c,xp),d&&(b=b.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b):null}function xp(b){b=b.charCodeAt(0);return"%"+(b>>4&15).toString(16)+(b&15).toString(16)}
var pp=/[#\/\?@]/g,rp=/[\#\?:]/g,qp=/[\#\?]/g,up=/[\#\?@]/g,sp=/#/g;function np(b,c,d){this.b=this.a=null;this.f=b||null;this.c=!!d}function yp(b){b.a||(b.a=new ok,b.b=0,b.f&&tf(b.f,function(c,d){zp(b,decodeURIComponent(c.replace(/\+/g," ")),d)}))}m=np.prototype;m.Oa=function(){yp(this);return this.b};function zp(b,c,d){yp(b);b.f=null;c=Ap(b,c);var e=b.a.get(c);e||b.a.set(c,e=[]);e.push(d);b.b=b.b+1}
m.remove=function(b){yp(this);b=Ap(this,b);return rk(this.a.b,b)?(this.f=null,this.b=this.b-this.a.get(b).length,this.a.remove(b)):!1};m.clear=function(){this.a=this.f=null;this.b=0};m.Ia=function(){yp(this);return 0==this.b};function Bp(b,c){yp(b);c=Ap(b,c);return rk(b.a.b,c)}m.ya=function(){yp(this);for(var b=this.a.za(),c=this.a.ya(),d=[],e=0;e<c.length;e++)for(var f=b[e],g=0;g<f.length;g++)d.push(c[e]);return d};
m.za=function(b){yp(this);var c=[];if(ga(b))Bp(this,b)&&(c=Pa(c,this.a.get(Ap(this,b))));else{b=this.a.za();for(var d=0;d<b.length;d++)c=Pa(c,b[d])}return c};m.set=function(b,c){yp(this);this.f=null;b=Ap(this,b);Bp(this,b)&&(this.b=this.b-this.a.get(b).length);this.a.set(b,[c]);this.b=this.b+1;return this};m.get=function(b,c){var d=b?this.za(b):[];return 0<d.length?String(d[0]):c};
m.toString=function(){if(this.f)return this.f;if(!this.a)return"";for(var b=[],c=this.a.ya(),d=0;d<c.length;d++)for(var e=c[d],f=encodeURIComponent(String(e)),e=this.za(e),g=0;g<e.length;g++){var h=f;""!==e[g]&&(h+="="+encodeURIComponent(String(e[g])));b.push(h)}return this.f=b.join("&")};m.clone=function(){var b=new np;b.f=this.f;this.a&&(b.a=this.a.clone(),b.b=this.b);return b};function Ap(b,c){var d=String(c);b.c&&(d=d.toLowerCase());return d}
function tp(b,c){c&&!b.c&&(yp(b),b.f=null,b.a.forEach(function(b,c){var f=c.toLowerCase();c!=f&&(this.remove(c),this.remove(f),0<b.length&&(this.f=null,this.a.set(Ap(this,f),Qa(b)),this.b=this.b+b.length))},b));b.c=c}m.extend=function(b){for(var c=0;c<arguments.length;c++)ik(arguments[c],function(b,c){zp(this,c,b)},this)};function Cp(b){this.a=vp(b)}function Dp(b,c){var d=b.a.b;$b(c,function(b,c){d.set(c,b)})}function Ep(b,c){var d=c.history,e=new Cp(c.location),f=e.a.toString();b.$watch(function(){var c=e.a.toString();f!==c&&b.$evalAsync(function(){f=c;void 0!==d&&void 0!==d.replaceState&&d.replaceState(null,"",c);b.$broadcast("ngeoLocationChange")})});return e}Ep.$inject=["$rootScope","$window"];A.factory("ngeoLocation",Ep);function Fp(b){this.a={};this.f=b;this.b=new hp;var c=b.a.b.ya(),d;if(0===c.length||1===c.length&&"debug"==c[0]){if(gp(this.b))for(b=this.b.Oa(),c=0;c<b;++c)d=this.b.key(c),this.a[d]=this.b.get(d)}else for(var e=b.a.b.ya(),c=0;c<e.length;++c)d=e[c],this.a[d]=b.a.b.get(d);Dp(this.f,{})}Fp.$inject=["ngeoLocation"];function Gp(b,c){Dp(b.f,c);if(gp(b.b))for(var d in c)b.b.set(d,c[d])}A.service("ngeoStateManager",Fp);function Hp(b){this.l=this.c=this.g=null;this.u=void 0!==b.fill?b.fill:null;this.C=[0,0];this.a=b.points;this.f=void 0!==b.radius?b.radius:b.jk;this.i=void 0!==b.fc?b.fc:this.f;this.j=void 0!==b.angle?b.angle:0;this.b=void 0!==b.stroke?b.stroke:null;this.A=this.D=this.v=null;var c=b.zg,d="",e="",f=0,g=null,h,k=0;this.b&&(h=oh(this.b.a),k=this.b.b,void 0===k&&(k=1),g=this.b.f,wh||(g=null),e=this.b.g,void 0===e&&(e="round"),d=this.b.c,void 0===d&&(d="round"),f=this.b.i,void 0===f&&(f=10));var l=2*(this.f+
k)+1,d={strokeStyle:h,strokeWidth:k,size:l,lineCap:d,H:g,lineJoin:e,miterLimit:f};if(void 0===c){this.c=document.createElement("CANVAS");this.c.height=l;this.c.width=l;var c=l=this.c.width,n=this.c.getContext("2d");this.yf(d,n,0,0);this.u?this.l=this.c:(n=this.l=document.createElement("CANVAS"),n.height=d.size,n.width=d.size,n=n.getContext("2d"),this.xf(d,n,0,0))}else l=Math.round(l),(e=!this.u)&&(n=this.xf.bind(this,d)),f=this.b?Oh(this.b):"-",g=this.u?Hh(this.u):"-",this.g&&f==this.g[1]&&g==this.g[2]&&
this.f==this.g[3]&&this.i==this.g[4]&&this.j==this.g[5]&&this.a==this.g[6]||(this.g=["r"+f+g+(void 0!==this.f?this.f.toString():"-")+(void 0!==this.i?this.i.toString():"-")+(void 0!==this.j?this.j.toString():"-")+(void 0!==this.a?this.a.toString():"-"),f,g,this.f,this.i,this.j,this.a]),n=c.a(this.g[0],l,l,this.yf.bind(this,d),n),this.c=n.image,this.C=[n.offsetX,n.offsetY],c=n.image.width,this.l=e?n.Ih:this.c;this.v=[l/2,l/2];this.D=[l,l];this.A=[c,c];Ih.call(this,{opacity:1,qb:void 0!==b.qb?b.qb:
!1,rotation:void 0!==b.rotation?b.rotation:0,scale:1,Ua:void 0!==b.Ua?b.Ua:!0})}y(Hp,Ih);m=Hp.prototype;m.Yb=function(){return this.v};m.Wd=function(){return this.l};m.Pc=function(){return this.c};m.Jd=function(){return this.A};m.cc=function(){return 2};m.Pa=function(){return this.C};m.ob=function(){return this.D};m.Sd=Md;m.load=Md;m.me=Md;
m.yf=function(b,c,d,e){var f;c.setTransform(1,0,0,1,0,0);c.translate(d,e);c.beginPath();this.i!==this.f&&(this.a*=2);for(d=0;d<=this.a;d++)e=2*d*Math.PI/this.a-Math.PI/2+this.j,f=0===d%2?this.f:this.i,c.lineTo(b.size/2+f*Math.cos(e),b.size/2+f*Math.sin(e));this.u&&(c.fillStyle=qh(this.u.a),c.fill());this.b&&(c.strokeStyle=b.strokeStyle,c.lineWidth=b.strokeWidth,b.H&&c.setLineDash(b.H),c.lineCap=b.lineCap,c.lineJoin=b.lineJoin,c.miterLimit=b.miterLimit,c.stroke());c.closePath()};
m.xf=function(b,c,d,e){c.setTransform(1,0,0,1,0,0);c.translate(d,e);c.beginPath();this.i!==this.f&&(this.a*=2);var f;for(d=0;d<=this.a;d++)f=2*d*Math.PI/this.a-Math.PI/2+this.j,e=0===d%2?this.f:this.i,c.lineTo(b.size/2+e*Math.cos(f),b.size/2+e*Math.sin(f));c.fillStyle=Ch;c.fill();this.b&&(c.strokeStyle=b.strokeStyle,c.lineWidth=b.strokeWidth,b.H&&c.setLineDash(b.H),c.stroke());c.closePath()};B.constant("gmfPermalinkOptions",{});function Ip(b,c,d,e,f){this.i=b;this.u=c;this.j=Mj(d);this.a=e;this.b=null;void 0!==f.crosshairStyle?this.g=f.crosshairStyle:this.g=[new Qh({image:new Hp({stroke:new Nh({color:"rgba(255, 255, 255, 0.8)",width:5}),points:4,radius:8,fc:0,angle:0})}),new Qh({image:new Hp({stroke:new Nh({color:"rgba(255, 0, 0, 1)",width:2}),points:4,radius:8,fc:0,angle:0})})];I(this.i,"change",this.l,this);this.c=null}
Ip.$inject=["ngeoBackgroundLayerMgr","ngeoDebounce","ngeoFeatureOverlayMgr","ngeoStateManager","gmfPermalinkOptions"];Ip.prototype.Ye=function(){var b=null,c=this.a.a.map_x,d=this.a.a.map_y;void 0!==c&&void 0!==d&&(b=[+c,+d]);return b};Ip.prototype.getMapCenter=Ip.prototype.Ye;Ip.prototype.af=function(){var b=null,c=this.a.a.map_zoom;void 0!==c&&(b=+c);return b};Ip.prototype.getMapZoom=Ip.prototype.af;Ip.prototype.Ze=function(){var b=this.a.a.map_crosshair;return"true"===b?!0:!1};
Ip.prototype.getMapCrosshair=Ip.prototype.Ze;Ip.prototype.$e=function(){return this.a.a.map_tooltip||null};Ip.prototype.getMapTooltip=Ip.prototype.$e;Ip.prototype.setMap=function(b){b!==this.b&&(this.b&&(G(this.c),this.c=null,this.f&&(this.f.setMap(null),this.f.S().clear(),this.f=null),this.b=null),b&&(Jp(this,b),this.b=b))};Ip.prototype.setMap=Ip.prototype.setMap;
function Jp(b,c){var d=U(c),e=b.Ye();null!==e&&cm(d,e);var f=b.af();null!==f&&fm(d,f);b.c=I(d,"propertychange",b.u(function(){var b=Zl(d),c=am(d),e={};e.map_x=Math.round(b[0]);e.map_y=Math.round(b[1]);e.map_zoom=c;Gp(this.a,e)}.bind(b),300,!0),b);if(b.Ze()){var g;null!==e?g=e:g=Zl(d);f=new Xh(new Ci(g));$h(f,b.g);b.j.ia(f)}if(f=b.$e()){var h;null!==e?h=e:h=Zl(d);e=$("<div/>",{"class":"gmf-permalink-tooltip",text:f})[0];h=new cp({element:e,position:h});c.c.push(h)}}
Ip.prototype.Se=function(b){var c=null,d=this.a.a.baselayer_ref;if(void 0!==d)for(var e=0,f=b.length;e<f;e++)if(b[e].get("label")===d){c=b[e];break}return c};Ip.prototype.getBackgroundLayer=Ip.prototype.Se;Ip.prototype.l=function(){if(this.b){var b=this.i.get(this.b).get("label"),c={};c.baselayer_ref=b;Gp(this.a,c)}};B.service("gmfPermalink",Ip);A.directive("ngeoMap",function(){return{restrict:"A",link:function(b,c,d){b.$eval(d.ngeoMap).set("target",c[0])}}});B.directive("gmfMap",function(){return{scope:{getMapFn:"&gmfMapMap"},controller:"GmfMapController",controllerAs:"ctrl",template:'<div ngeo-map="ctrl.map"></div>'}});function Kp(b,c,d){this.map=b.getMapFn();c.Vd.setMap(this.map);d.setMap(this.map)}Kp.$inject=["$scope","ngeoFeatureOverlayMgr","gmfPermalink"];B.controller("GmfMapController",Kp);function Lp(){this.ua=null}y(Lp,bi);function Mp(b){return ka(b)?b:"string"===typeof b?(b=JSON.parse(b))?b:null:null}Lp.prototype.aa=function(){return"json"};Lp.prototype.Sc=function(b,c){var d;var e=Mp(b);d=ci(this,b,c);if("Feature"==e.type)d=[Np(this,e,d)];else if("FeatureCollection"==e.type){var f=[],e=e.features,g,h;g=0;for(h=e.length;g<h;++g)f.push(Np(this,e[g],d));d=f}else d=[];return d};
Lp.prototype.f=function(b){return(b=Mp(b).crs)?"name"==b.type?Oe(b.properties.name):"EPSG"==b.type?Oe("EPSG:"+b.properties.code):null:this.ua};function Op(b){ih.call(this);this.a=b?b:null;Pp(this)}y(Op,ih);function Qp(b){var c,d;if(b.a)for(c=0,d=b.a.length;c<d;++c)cb(b.a[c],"change",b.b,b)}function Pp(b){var c,d;if(b.a)for(c=0,d=b.a.length;c<d;++c)I(b.a[c],"change",b.b,b)}m=Op.prototype;m.clone=function(){var b=new Op(null),c=this.a,d=[],e,f;e=0;for(f=c.length;e<f;++e)d.push(c[e].clone());Qp(b);b.a=d;Pp(b);b.b();return b};
m.yc=function(b){Jb(Infinity,Infinity,-Infinity,-Infinity,b);for(var c=this.a,d=0,e=c.length;d<e;++d)Lb(b,c[d].G());return b};m.Ld=function(b){this.l!=this.f&&(Va(this.i),this.j=0,this.l=this.f);if(0>b||0!==this.j&&b<this.j)return this;var c=b.toString();if(this.i.hasOwnProperty(c))return this.i[c];var d=[],e=this.a,f=!1,g,h;g=0;for(h=e.length;g<h;++g){var k=e[g],l=k.Ld(b);d.push(l);l!==k&&(f=!0)}if(f)return b=new Op(null),Qp(b),b.a=d,Pp(b),b.b(),this.i[c]=b;this.j=b;return this};m.aa=function(){return"GeometryCollection"};
m.Ia=function(){return 0===this.a.length};m.tc=function(b){var c=this.a,d,e;d=0;for(e=c.length;d<e;++d)c[d].tc(b);this.b()};m.translate=function(b,c){var d=this.a,e,f;e=0;for(f=d.length;e<f;++e)d[e].translate(b,c);this.b()};m.L=function(){Qp(this);Op.U.L.call(this)};function Rp(b){b=b?b:{};this.ua=null;this.ua=Oe(b.ua?b.ua:"EPSG:4326");this.a=b.Qg}y(Rp,Lp);function Sp(b,c){return b?di((0,Tp[b.type])(b),!1,c):null}
var Tp={Point:function(b){return new Ci(b.coordinates)},LineString:function(b){return new ui(b.coordinates)},Polygon:function(b){return new Ji(b.coordinates)},MultiPoint:function(b){return new Di(b.coordinates)},MultiLineString:function(b){return new yi(b.coordinates)},MultiPolygon:function(b){return new Mi(b.coordinates)},GeometryCollection:function(b,c){var d=b.geometries.map(function(b){return Sp(b,c)});return new Op(d)}};
function Np(b,c,d){d=Sp(c.geometry,d);var e=new Xh;b.a&&Zh(e,b.a);Yh(e,d);void 0!==c.id&&(e.c=c.id,e.b());c.properties&&e.ka(c.properties);return e};A.value("ngeoCreateGeoJSONBloodhound",function(b,c,d,e,f,g){var h=new Rp;b={remote:{url:b,rateLimitWait:50,prepare:function(b,c){c.url=c.url.replace("%QUERY",b);return c},transform:function(b){void 0!==c&&(b={type:"FeatureCollection",features:b.features.filter(c)});return h.Sc(b,{Fb:d,ib:e})}},datumTokenizer:ca,queryTokenizer:Bloodhound.tokenizers.whitespace};f&&fc(b,f);g&&fc(b.remote,g);return new Bloodhound(b)});function Up(){return{restrict:"A",link:function(b,c,d){var e=b.$eval(d.ngeoSearch),f=b.$eval(d.ngeoSearchDatasets).slice();f.unshift(e);c.typeahead.apply(c,f);d=b.$eval(d.ngeoSearchListeners);var g=Up.a(d);c.on("typeahead:open",function(){b.$apply(function(){g.open()})});c.on("typeahead:close",function(){b.$apply(function(){g.close()})});c.on("typeahead:cursorchange",function(c,d,e){b.$apply(function(){g.cursorchange(c,d,e)})});c.on("typeahead:select",function(c,d,e){b.$apply(function(){g.select(c,
d,e)})});c.on("typeahead:autocomplete",function(c,d,e){b.$apply(function(){g.autocomplete(c,d,e)})})}}}Up.a=function(b){var c;void 0===b?c={open:ca,close:ca,cursorchange:ca,select:ca,autocomplete:ca}:c={open:void 0!==b.open?b.open:ca,close:void 0!==b.close?b.close:ca,cursorchange:void 0!==b.cursorchange?b.cursorchange:ca,select:void 0!==b.select?b.select:ca,autocomplete:void 0!==b.autocomplete?b.autocomplete:ca};return c};A.directive("ngeoSearch",Up);B.value("gmfSearchTemplateUrl",function(b,c){var d=c.gmfSearchTemplateurl;return void 0!==d?d:"gmf/search.html"});function Vp(b){return{restrict:"E",scope:{getMapFn:"&gmfSearchMap",getDatasourcesFn:"&gmfSearchDatasources",clearbutton:"=gmfSearchClearbutton",currentTheme:"=gmfSearchCurrenttheme"},controller:"GmfSearchController",controllerAs:"ctrl",templateUrl:b,link:function(b,d){if(!b.clearbutton){var e=b.ctrl;d.find("input").on("focus blur",function(){e.clear()})}}}}Vp.$inject=["gmfSearchTemplateUrl"];
B.directive("gmfSearch",Vp);
function Wp(b,c,d,e,f,g,h){this.a=b;this.g=c;this.l=d;this.i=e;this.j=h;this.u=f;this.f=this.a.getMapFn();this.clearButton=this.a.clearbutton||!1;this.b=Mj(g);this.c=this.a.getDatasourcesFn();this.options={highlight:!0,hint:void 0,minLength:void 0};this.datasets=[];this.input_value="";for(b=0;b<this.c.length;b++){var k=this.c[b];c=void 0!==k.groupValues?k.groupValues:[];d=k.groupActions?k.groupActions:[];var l=[];0===c.length?l.push({title:void 0,filter:void 0}):(c.forEach(function(b){l.push({title:b,filter:Xp(b)})},
this),d.forEach(function(b){l.push({title:b,filter:Yp(b)})},this));l.forEach(function(b){this.datasets.push(Zp(this,{bloodhoundOptions:k.bloodhoundOptions,Re:b.title,fk:"layer_name",labelKey:k.labelKey,projection:k.projection,typeaheadDatasetOptions:k.typeaheadDatasetOptions,url:k.url},b.filter))},this)}this.listeners={select:$p.bind(this),close:aq.bind(this)}}sa("gmf.SearchController",Wp);Wp.$inject="$scope $compile $timeout gettextCatalog ngeoCreateGeoJSONBloodhound ngeoFeatureOverlayMgr gmfThemes".split(" ");
function Zp(b,c,d){var e=b.a,f=b.g;b=bq(b,c,d);b={limit:Infinity,source:b.ttAdapter(),display:function(b){return b.get(c.labelKey)},templates:{header:function(){return void 0===c.Re?"":'<div class="search-header">'+c.Re+"</div>"},suggestion:function(b){var d=e.$new(!0);d.feature=b;var k='<p class="search-label">'+b.get(c.labelKey)+"</p>",k=k+('<p class="search-group">'+b.get("layer_name")+"</p>");return f('<div class="search-datum">'+k+"</div>")(d)}}};c.typeaheadDatasetOptions&&fc(b,c.typeaheadDatasetOptions);
return b}function Yp(b){return function(c){c=c.properties;return c.actions?!c.layer_name&&c.actions.some(function(c){return c.action===b}):!1}}function Xp(b){return function(c){return c.properties.layer_name===b}}function bq(b,c,d){var e=Se(U(b.f).X()),f=cq(b);b=b.u(c.url,d,Oe(e),Oe(c.projection),c.bloodhoundOptions,f);b.initialize();return b}
function cq(b){var c=b.i;return{prepare:function(b,e){var f=e.url,g=c.currentLanguage,f=Cf(f,"query",b),f=Cf(f,"lang",g),f=Cf(f,"interface","mobile");e.xhrFields={withCredentials:!0};e.url=f;return e}}}function dq(b){if(b.clearButton){var c=$(".twitter-typeahead .tt-menu");b.input_value?c.show():c.hide()}}function eq(b,c){b.j.Gc().then(function(b){(b=bh(b,c))&&(this.a.currentTheme=b)}.bind(b))}Wp.prototype.zi=function(){this.b.clear();this.clear()};Wp.prototype.onClearButton=Wp.prototype.zi;
Wp.prototype.clear=function(){var b=$(".twitter-typeahead"),c=b.children(".tt-menu"),b=b.children("input");this.input_value="";$(b[1]).typeahead("val","");c.children(".tt-dataset").empty();dq(this)};Wp.prototype.clear=Wp.prototype.clear;Wp.prototype.blur=function(){var b=$(".twitter-typeahead").children("input");this.l(function(){$(b[1]).blur()})};Wp.prototype.blur=Wp.prototype.blur;
function $p(b,c){var d=c.get("actions");if(d)for(var e=0,f=d.length;e<f;e++){var g=d[e],h=g.data;"add_theme"==g.action&&eq(this,h)}d=c.J();null!=d&&(this.b.clear(),this.b.ia(c),d="GeometryCollection"===d.aa()?d.G():d,e=Sm(this.f),bm(U(this.f),d,e,{Ra:16}),this.clearButton||this.clear());this.blur()}function aq(){this.clearButton||dq(this)}B.controller("GmfSearchController",Wp);B.directive("gmfThemeselector",function(){return{restrict:"E",controller:"gmfThemeselectorController",scope:{defaultTheme:"@gmfThemeselectorDefaulttheme",currentTheme:"=gmfThemeselectorCurrenttheme",filter:"=gmfThemeselectorFilter"},bindToController:!0,controllerAs:"tsCtrl",templateUrl:"gmf/themeselector.html"}});
function fq(b,c,d){b.$watch(function(){return this.currentTheme}.bind(this),function(b){if(b){b=b.name;var c=this.a.a.a.split("/");""===c[c.length-1]&&c.splice(c.length-1);gq(c)?c[c.length-1]=b:c.push("theme",b);this.a.a.a=c.join("/")}}.bind(this));this.defaultTheme=this.defaultTheme||"main";this.a=c;this.b=d;hq(this)}sa("gmf.ThemeselectorController",fq);fq.$inject=["$scope","ngeoLocation","gmfThemes"];function gq(b){return 0<=b.indexOf("theme")&&b.indexOf("theme")==b.length-2}
function hq(b){var c=function(b){this.themes=this.filter?b.filter(this.filter):b;var c=this.defaultTheme;b=this.a.a.a.split("/");gq(b)&&(c=b[b.length-1]);b=Ma(this.themes,function(b){return b.name===c});this.Tf(b)}.bind(b);b.b.Gc().then(c)}fq.prototype.Tf=function(b){b&&(this.currentTheme=b)};fq.prototype.switchTheme=fq.prototype.Tf;B.controller("gmfThemeselectorController",fq);function iq(b){return function(c){var d=b.navigator,d=d.languages||d.language||d.browserLanguage||d.systemLanguage||d.userLanguage;ea(d)||(d=[d]);d=d.map(function(b){return b.substring(0,2)});d=d.filter(function(b,c,d){return d.indexOf(b)==c});return d.filter(function(b){return-1!=c.indexOf(b)})[0]}}iq.$inject=["$window"];A.factory("ngeoGetBrowserLanguage",iq);function jq(b,c){this.getActive=function(){return b[c]};this.setActive=function(d){b[c]=d}}A.value("ngeoToolActivate",jq);function kq(b){this.a={};this.b=b}kq.$inject=["$rootScope"];
function lq(b,c,d){var e=b.a.mapTools;e||(e=b.a.mapTools=[]);b=b.b.$watch(c.getActive,function(b,d){if(b!==d)if(b)for(var e=this.a.mapTools,k=0;k<e.length;k++)c!=e[k].lc&&e[k].lc.setActive(!1);else{for(var e=this.a.mapTools,k=null,l=!1,n=0;n<e.length;n++)l=l||e[n].lc.getActive(),e[n].Jg&&(k=e[n].lc);l||null===k||k.setActive(!0)}}.bind(b));e.push({lc:c,Jg:d||!1,Qb:b})}kq.prototype.zj=function(b,c){var d=this.a[b];if(d)for(var e=0;e<d.length;e++)if(d[e].lc==c){d[e].Qb();d.splice(e,1);break}};
kq.prototype.unregisterTool=kq.prototype.zj;kq.prototype.yj=function(b){var c=this.a[b];if(c){for(var d=0;d<c.length;d++)c[d].Qb();delete this.a[b]}};kq.prototype.unregisterGroup=kq.prototype.yj;kq.prototype.xg=function(b){b.setActive(!0)};kq.prototype.activateTool=kq.prototype.xg;kq.prototype.Ig=function(b){b.setActive(!1)};kq.prototype.deactivateTool=kq.prototype.Ig;A.service("ngeoToolActivateMgr",kq);function mq(b,c,d){d.get("gmfThemes").jf();this.searchDatasources=[{labelKey:"label",groupValues:d.get("gmfSearchGroups"),groupActions:d.get("gmfSearchActions"),projection:"EPSG:"+(b.srid||21781),url:d.get("fulltextsearchUrl")}];this.rightNavVisible=this.leftNavVisible=!1;this.queryActive=!0;d.get("gmfQueryManager");this.measureLengthActive=this.measurePointActive=!1;this.i=d.get("ngeoGetBrowserLanguage");this.f=d.get("ngeoStateManager");this.c=c;this.g=d.get("defaultLang");this.a=d.get("langUrls");
this.b=d.get("gettextCatalog");nq(this);d.get("ngeoFeatureOverlayMgr").Vd.setMap(this.map);b=d.get("ngeoToolActivateMgr");lq(b,new jq(this,"queryActive"),!0);lq(b,new jq(this,"measurePointActive"),!1);lq(b,new jq(this,"measureLengthActive"),!1)}sa("gmf.AbstractController",mq);mq.$inject=["config","$scope","$injector"];mq.prototype.Zc=function(b){this.b.setCurrentLanguage(b);this.b.loadRemote(this.a[b]);this.lang=b};mq.prototype.switchLanguage=mq.prototype.Zc;
function nq(b){b.c.$watch(function(){return this.lang}.bind(b),function(b){Gp(this.f,{lang:b})}.bind(b));var c=b.i(Object.keys(b.a)),d=b.f.a.lang;void 0!==d&&cc(b.a,d)?b.Zc(d):void 0!==c&&cc(b.a,c)?b.Zc(c):b.Zc(b.g)}B.controller("AbstractController",mq);B.value("gmfMobileBackgroundlayerselectorTemplateUrl",function(b,c){var d=c.gmfMobileBackgroundlayerselectorTemplateurl;return void 0!==d?d:"gmf/mobilebackgroundlayerselector.html"});function oq(b){return{restrict:"E",scope:{map:"=gmfMobileBackgroundlayerselectorMap",select:"&?gmfMobileBackgroundlayerselectorSelect"},bindToController:!0,controller:"GmfMobileBackgroundlayerselectorController",controllerAs:"ctrl",templateUrl:b}}oq.$inject=["gmfMobileBackgroundlayerselectorTemplateUrl"];
B.directive("gmfMobileBackgroundlayerselector",oq);function pq(b,c,d){this.pd=b;this.a=c;b=function(b){this.bgLayers=b;(b=this.a.Se(b))||(b=void 0!==this.bgLayers[1]?this.bgLayers[1]:this.bgLayers[0]);this.Pf(b,!0)}.bind(this);ch(d).then(b);I(this.pd,"change",function(){this.bgLayer=this.pd.get(this.map)},this)}sa("gmf.MobileBackgroundlayerselectorController",pq);pq.$inject=["ngeoBackgroundLayerMgr","gmfPermalink","gmfThemes"];B.controller("GmfMobileBackgroundlayerselectorController",pq);
pq.prototype.Pf=function(b,c){this.bgLayer=b;this.pd.set(this.map,b);!c&&this.select&&this.select()};pq.prototype.setLayer=pq.prototype.Pf;function qq(b){return{restrict:"A",controller:"ngeoBtnGroupController",link:function(c,d,e,f){var g=b(e.ngeoBtnGroupActive).assign;g&&c.$watch(function(){return f.vc.some(function(b){return!0===b(c)})},function(b){g(c,b)})}}}qq.$inject=["$parse"];A.directive("ngeoBtnGroup",qq);function rq(b){this.vc=[];this.a=b}rq.$inject=["$scope"];function sq(b,c){b.vc.forEach(function(b,e){e!=c&&b.assign(this.a,!1)},b)}function tq(b,c){b.vc.push(c);return b.vc.length-1}A.controller("ngeoBtnGroupController",rq);
function uq(b){return{require:["?^ngeoBtnGroup","ngModel"],restrict:"A",link:function(c,d,e,f){var g=f[0],h=f[1],k=-1;e=b(e.ngModel);f=e.assign;void 0===e(c)&&f(c,!1);null!==g&&(k=tq(g,e));d.bind("click",function(){c.$apply(function(){h.$setViewValue(!h.$viewValue);h.$render()})});h.$render=function(){h.$viewValue&&null!==g&&sq(g,k);d.toggleClass("active",h.$viewValue)}}}}uq.$inject=["$parse"];A.directive("ngeoBtn",uq);function vq(b,c,d){db.call(this);this.a=null;this.c=!1;this.j=b;this.i=d;this.b=c||window;this.f=pa(this.g,this)}y(vq,db);vq.prototype.start=function(){wq(this);this.c=!1;var b=xq(this),c=yq(this);b&&!c&&this.b.mozRequestAnimationFrame?(this.a=So(this.b,"MozBeforePaint",this.f),this.b.mozRequestAnimationFrame(null),this.c=!0):this.a=b&&c?b.call(this.b,this.f):this.b.setTimeout(gh(this.f),20)};
function wq(b){if(null!=b.a){var c=xq(b),d=yq(b);c&&!d&&b.b.mozRequestAnimationFrame?Zo(b.a):c&&d?d.call(b.b,b.a):b.b.clearTimeout(b.a)}b.a=null}vq.prototype.g=function(){this.c&&this.a&&Zo(this.a);this.a=null;this.j.call(this.i,ra())};vq.prototype.L=function(){wq(this);vq.U.L.call(this)};function xq(b){b=b.b;return b.requestAnimationFrame||b.webkitRequestAnimationFrame||b.mozRequestAnimationFrame||b.oRequestAnimationFrame||b.msRequestAnimationFrame||null}
function yq(b){b=b.b;return b.cancelAnimationFrame||b.cancelRequestAnimationFrame||b.webkitCancelRequestAnimationFrame||b.mozCancelRequestAnimationFrame||b.oCancelRequestAnimationFrame||b.msCancelRequestAnimationFrame||null};function zq(b){return{restrict:"A",link:function(c,d,e){var f=c.$eval(e.ngeoResizemap);d=e.ngeoResizemapState;var g,h=new vq(function(){f.ne();f.gb&&t.cancelAnimationFrame(f.gb);f.He();1E3>ra()-g&&h.start()},b);c.$watch(d,function(b,c){b!=c&&(g=ra(),wq(h),h.start())})}}}zq.$inject=["$window","$animate"];A.directive("ngeoResizemap",zq);function Aq(b){b=b?b:{};var c=void 0!==b.className?b.className:"ol-scale-line";this.g=document.createElement("DIV");this.g.className=c+"-inner";this.a=document.createElement("DIV");this.a.className=c+" ol-unselectable";this.a.appendChild(this.g);this.s=null;this.l=void 0!==b.minWidth?b.minWidth:64;this.c=!1;this.C=void 0;this.v="";gm.call(this,{element:this.a,render:b.render?b.render:Bq,target:b.target});I(this,L("units"),this.D,this);this.set("units",b.units||"metric")}y(Aq,gm);var Cq=[1,2,5];
function Bq(b){(b=b.frameState)?this.s=b.M:this.s=null;Dq(this)}Aq.prototype.D=function(){Dq(this)};
function Dq(b){var c=b.s;if(c){var d=c.projection,e=Te(d),c=d.lb(c.resolution,c.center)*e,e=b.l*c,d="",f=b.get("units");"degrees"==f?(d=Ke.degrees,c/=d,e<d/60?(d="\u2033",c*=3600):e<d?(d="\u2032",c*=60):d="\u00b0"):"imperial"==f?.9144>e?(d="in",c/=.0254):1609.344>e?(d="ft",c/=.3048):(d="mi",c/=1609.344):"nautical"==f?(c/=1852,d="nm"):"metric"==f?1>e?(d="mm",c*=1E3):1E3>e?d="m":(d="km",c/=1E3):"us"==f&&(.9144>e?(d="in",c*=39.37):1609.344>e?(d="ft",c/=.30480061):(d="mi",c/=1609.3472));for(var f=3*Math.floor(Math.log(b.l*
c)/Math.log(10)),g;;){g=Cq[(f%3+3)%3]*Math.pow(10,Math.floor(f/3));e=Math.round(g/c);if(isNaN(e)){ak(b.a,!1);b.c=!1;return}if(e>=b.l)break;++f}c=g+" "+d;b.v!=c&&(b.g.innerHTML=c,b.v=c);b.C!=e&&(b.g.style.width=e+"px",b.C=e);b.c||(ak(b.a,!0),b.c=!0)}else b.c&&(ak(b.a,!1),b.c=!1)};B.constant("isDesktop",!0);function Eq(b,c,d){var e={projection:Oe("epsg:"+(b.srid||21781))};fc(e,b.mapViewConfig||{});this.map=new uo({layers:[],view:new Yl(e),controls:b.mapControls||[new Aq,new rm],mb:b.mapInteractions||sn({Xd:!1,Ge:!1})});this.toolsActive=!1;$('[data-toggle="tooltip"]').tooltip({container:"body"});mq.call(this,b,c,d)}y(Eq,mq);sa("gmf.AbstractDesktopController",Eq);Eq.$inject=["config","$scope","$injector"];B.controller("AbstractDesktopController",Eq);B.value("gmfUser",{functionalities:null,is_password_changed:null,role_id:null,role_name:null,username:null});function Fq(b,c,d){ib.call(this);this.b=b;this.a=c;this.f=d;b=Df(this.a,"loginuser");this.b.get(b,{withCredentials:!0}).then(this.c.bind(this))}y(Fq,ib);Fq.$inject=["$http","authenticationBaseUrl","gmfUser"];
Fq.prototype.xc=function(b,c,d){var e=Df(this.a,"loginchange");return this.b.post(e,$.param({oldPassword:b,newPassword:c,confirmNewPassword:d}),{headers:{"Content-Type":"application/x-www-form-urlencoded"},withCredentials:!0})};Fq.prototype.changePassword=Fq.prototype.xc;Fq.prototype.Lc=function(b,c){var d=Df(this.a,"login");return this.b.post(d,$.param({login:b,password:c}),{headers:{"Content-Type":"application/x-www-form-urlencoded"},withCredentials:!0}).then(this.c.bind(this))};
Fq.prototype.login=Fq.prototype.Lc;Fq.prototype.Mc=function(){var b=Df(this.a,"logout");return this.b.get(b,{withCredentials:!0}).then(this.g.bind(this))};Fq.prototype.logout=Fq.prototype.Mc;Fq.prototype.Wc=function(b){var c=Df(this.a,"loginresetpassword"),d=function(b){return b.data}.bind(this);return this.b.post(c,$.param({login:b}),{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(d)};Fq.prototype.resetPassword=Fq.prototype.Wc;
Fq.prototype.c=function(b){var c=b.data;if(void 0!==c.username)for(var d in c)this.f[d]=c[d];return b};Fq.prototype.g=function(){for(var b in this.f)this.f[b]=null};B.service("gmfAuthentication",Fq);function Gq(){return{template:'<div class="modal fade" tabindex="-1" role="dialog"><div class="modal-dialog"><div class="modal-content"><ng-transclude></ng-transclude></div></div></div>',restrict:"E",require:"ngModel",transclude:!0,link:function(b,c,d,e){var f=c.children();angular.element(document.body).append(f);e.$render=function(){f.modal(e.$viewValue?"show":"hide")};f.on("shown.bs.modal hidden.bs.modal",function(c){var d=c.type;b.$apply(function(){e.$setViewValue("shown"==d)})})}}}
Gq.$inject=["$parse"];A.directive("ngeoModal",Gq);B.value("gmfAuthenticationTemplateUrl",function(b,c){var d=c.gmfAuthenticationTemplateurl;return void 0!==d?d:"gmf/authentication.html"});function Hq(b){return{scope:{},controller:"GmfAuthenticationController",controllerAs:"authCtrl",templateUrl:b}}Hq.$inject=["gmfAuthenticationTemplateUrl"];B.directive("gmfAuthentication",Hq);
function Iq(b,c,d,e){this.gmfUser=e;this.b=b;this.f=d;this.resetPasswordModalShown=this.changePasswordModalShown=this.changingPassword=!1;this.newPwdConfVal=this.newPwdVal=this.oldPwdVal=this.pwdVal=this.loginVal=this.error=""}Iq.$inject=["gettextCatalog","$scope","gmfAuthentication","gmfUser"];
Iq.prototype.xc=function(){var b=this.oldPwdVal,c=this.newPwdVal,d=this.newPwdConfVal;if(b===c)this.a(this.b.getString("The old and new passwords are the same."));else if(c!==d)this.a(this.b.getString("The passwords don't match."));else{var e=this.b.getString("Could not change password.");this.f.xc(b,c,d).then(function(){this.changePasswordModalShown=!0;this.Me()}.bind(this),this.a.bind(this,e))}};Iq.prototype.changePassword=Iq.prototype.xc;
Iq.prototype.Lc=function(){var b=this.b.getString("Could not connect.");this.f.Lc(this.loginVal,this.pwdVal).then(this.c.bind(this),this.a.bind(this,b))};Iq.prototype.login=Iq.prototype.Lc;Iq.prototype.Mc=function(){var b=this.b.getString("Could not log out.");this.f.Mc().then(this.c.bind(this),this.a.bind(this,b))};Iq.prototype.logout=Iq.prototype.Mc;
Iq.prototype.Wc=function(){if(this.loginVal){var b=this.b.getString("An error occured while reseting the password."),c=function(){this.resetPasswordModalShown=!0;this.c()}.bind(this);this.f.Wc(this.loginVal).then(c,this.a.bind(this,b))}else this.a(this.b.getString("Please, input a login..."))};Iq.prototype.resetPassword=Iq.prototype.Wc;Iq.prototype.Me=function(){this.c();this.changingPassword=!1;this.newPwdConfVal=this.newPwdVal=this.oldPwdVal=""};Iq.prototype.changePasswordReset=Iq.prototype.Me;
Iq.prototype.a=function(b){this.error=b};Iq.prototype.c=function(){this.a("")};B.controller("GmfAuthenticationController",Iq);if("function"==typeof proj4){var Jq=[42E4,3E4,9E5,35E4];proj4.defs("epsg:21781","+proj=somerc +lat_0=46.95240555555556 +lon_0=7.439583333333333 +k_0=1 +x_0=600000 +y_0=200000 +ellps=bessel +towgs84=674.4,15.1,405.3,0,0,0,0 +units=m +no_defs");proj4.defs("EPSG:21781","+proj=somerc +lat_0=46.95240555555556 +lon_0=7.439583333333333 +k_0=1 +x_0=600000 +y_0=200000 +ellps=bessel +towgs84=674.4,15.1,405.3,0,0,0,0 +units=m +no_defs");Ue(Oe("epsg:21781"),Jq);Ue(Oe("EPSG:21781"),Jq)};ta.constant("authenticationBaseUrl","https://geomapfish-demo.camptocamp.net/2.0/wsgi");ta.constant("ngeoQueryOptions",{limit:20});function Kq(b,c){Eq.call(this,{srid:21781,mapViewConfig:{center:[632464,185457],Fa:3,zoom:3}},b,c)}y(Kq,Eq);sa("app.DesktopController",Kq);Kq.$inject=["$scope","$injector"];ta.controller("DesktopController",Kq);A.value("gmfMobiledisplayqueriesTemplateUrl",function(b,c){var d=c.gmfMobiledisplayqueriesTemplateurl;return void 0!==d?d:"gmf/mobiledisplayqueries.html"});function Lq(b){return{bindToController:!0,controller:"GmfMobiledisplayqueriesController",controllerAs:"ctrl",templateUrl:b,replace:!0,restrict:"E",scope:{featuresStyleFn:"&gmfMobiledisplayqueriesFeaturesstyle",selectedFeatureStyleFn:"&gmfMobiledisplayqueriesSelectedfeaturestyle"}}}Lq.$inject=["gmfMobiledisplayqueriesTemplateUrl"];
B.directive("gmfMobiledisplayqueries",Lq);
function Mq(b,c,d){this.c=b;this.b=c;this.a=new pb;b=Mj(d);var e=this.featuresStyleFn();void 0!==e&&Pj(b,e);Oj(b,this.a);this.f=Mj(d);d=this.selectedFeatureStyleFn();void 0===d&&(d=new Gh({color:[255,0,0,.6]}),b=new Nh({color:[255,0,0,1],width:2}),d=new Qh({fill:d,image:new Ph({fill:d,radius:5,stroke:b}),stroke:b}));Pj(this.f,d);this.feature=this.source=null;this.currentResult=-1;this.isNext=!0;this.animate=0;this.open=!1;this.c.$watchCollection(function(){return c},function(b,c){0<b.total?this.show():
c!==b&&this.close()}.bind(this))}sa("gmf.MobiledisplayqueriesController",Mq);Mq.$inject=["$scope","ngeoQueryResult","ngeoFeatureOverlayMgr"];Mq.prototype.show=function(){this.clear();Nq(this,0,!1);if(null!==this.source){var b,c,d,e=this.b.Yc;this.a.clear();for(b=0;b<e.length;b++)for(d=e[b].features,c=0;c<d.length;c++)this.a.push(d[c]);Oq(this);this.open=!0}};Mq.prototype.show=Mq.prototype.show;
function Nq(b,c,d){var e=!1;if(c!==b.currentResult){var f,g,h,k=b.feature,l=b.b.Yc;b.currentResult=c;for(f=0;f<l.length;f++)if(g=l[f],h=g.features,c>=h.length)c-=h.length;else{b.source=g;b.feature=g.features[c];e=!0;break}d&&Oq(b,k)}return e}Mq.prototype.previous=function(){var b=this.currentResult-1;0>b&&(b=this.b.total-1);Nq(this,b,!0)&&Pq(this,!1)};Mq.prototype.previous=Mq.prototype.previous;
Mq.prototype.next=function(){var b=this.currentResult+1;b>this.b.total-1&&(b=0);Nq(this,b,!0)&&Pq(this,!0)};Mq.prototype.next=Mq.prototype.next;Mq.prototype.Xg=function(){return this.b.total};Mq.prototype.getResultLength=Mq.prototype.Xg;Mq.prototype.Sg=function(){return null!=this.feature?Ua({},this.feature.u):null};Mq.prototype.getFeatureValues=Mq.prototype.Sg;function Pq(b,c){b.isNext=c;b.c.$evalAsync(function(){this.animate++}.bind(b))}
function Oq(b,c){b.f.clear();b.a.remove(b.feature);b.f.ia(b.feature);void 0!==c&&b.a.push(c)}Mq.prototype.close=function(){this.open=!1;this.clear()};Mq.prototype.close=Mq.prototype.close;Mq.prototype.clear=function(){this.source=this.feature=null;this.currentResult=-1;this.a.clear();this.f.clear()};Mq.prototype.clear=Mq.prototype.clear;B.controller("GmfMobiledisplayqueriesController",Mq);A.value("ngeoDecorateInteraction",function(b){Object.defineProperty(b,"active",{get:function(){return b.getActive()},set:function(c){b.setActive(c)}})});function Qq(b,c,d){hi.call(this);Rq(this,b,c?c:0,d)}y(Qq,hi);Qq.prototype.clone=function(){var b=new Qq(null),c=this.o.slice();ji(b,this.layout,c);b.b();return b};Qq.prototype.yc=function(b){var c=this.o,d=c[this.a]-c[0];return Jb(c[0]-d,c[1]-d,c[0]+d,c[1]+d,b)};Qq.prototype.aa=function(){return"Circle"};function Rq(b,c,d,e){if(c){ki(b,e,c,0);b.o||(b.o=[]);e=b.o;c=li(e,c);e[c++]=e[0]+d;var f;d=1;for(f=b.a;d<f;++d)e[c++]=e[d];e.length=c}else ji(b,"XY",null);b.b()};function Sq(b,c){Sa.call(this,b);this.feature=c}y(Sq,Sa);
function Tq(b){Gm.call(this,{$a:Uq,handleEvent:Vq,ab:Wq});this.qa=null;this.I=!1;this.Ma=b.source?b.source:null;this.Da=b.features?b.features:null;this.kg=b.kj?b.kj:12;this.O=b.type;this.c=Xq(this.O);this.La=b.minPoints?b.minPoints:this.c===Yq?3:2;this.sa=b.Yh?b.Yh:Infinity;var c=b.ek;if(!c)if("Circle"===this.O)c=function(b,c){var d=c?c:new Qq([NaN,NaN]),h=b[0],k=b[1],l=h[0]-k[0],h=h[1]-k[1];Rq(d,b[0],Math.sqrt(l*l+h*h));return d};else{var d,c=this.c;c===Zq?d=Ci:c===$q?d=ui:c===Yq&&(d=Ji);c=function(b,
c){var g=c;g?g.Y(b):g=new d(b);return g}}this.C=c;this.D=this.v=this.a=this.s=this.j=this.l=null;this.jg=b.Pe?b.Pe*b.Pe:36;this.ha=new rj({source:new Cj({mc:!1,wrapX:b.wrapX?b.wrapX:!1}),style:b.style?b.style:ar()});this.Ka=b.Qg;this.ed=b.ta?b.ta:Cm;this.ra=b.Pg?b.Pg:Dm;I(this,L("active"),this.qf,this)}y(Tq,Gm);function ar(){var b=Wh();return function(c){return b[c.J().aa()]}}m=Tq.prototype;m.setMap=function(b){Tq.U.setMap.call(this,b);this.qf()};
function Vq(b){var c=!this.I;this.I&&b.type===sl?(br(this,b),c=!1):b.type===rl?c=cr(this,b):b.type===ll&&(c=!1);return Hm.call(this,b)&&c}function Uq(b){if(this.ed(b))return this.qa=b.pixel,!0;if(this.c!==$q&&this.c!==Yq||!this.ra(b))return!1;this.qa=b.pixel;this.I=!0;this.l||dr(this,b);return!0}
function Wq(b){this.I=!1;var c=this.qa,d=b.pixel,e=c[0]-d[0],c=c[1]-d[1],d=!0;e*e+c*c<=this.jg&&(cr(this,b),this.l?this.c===er?this.kb():fr(this,b)?this.kb():br(this,b):(dr(this,b),this.c===Zq&&this.kb()),d=!1);return d}
function cr(b,c){if(b.l){var d=c.coordinate,e=b.j.J(),f;b.c===Zq?f=b.a:b.c===Yq?(f=b.a[0],f=f[f.length-1],fr(b,c)&&(d=b.l.slice())):(f=b.a,f=f[f.length-1]);f[0]=d[0];f[1]=d[1];b.C(b.a,e);b.s&&b.s.J().Y(d);e instanceof Ji&&b.c!==Yq?(b.v||(b.v=new Xh(new ui(null))),0>=e.c.length?d=null:(d=new wi(null),xi(d,e.layout,e.o.slice(0,e.c[0]))),e=b.v.J(),e.K(d.layout,d.o)):b.D&&(e=b.v.J(),e.Y(b.D));gr(b)}else e=c.coordinate.slice(),b.s?b.s.J().Y(e):(b.s=new Xh(new Ci(e)),gr(b));return!0}
function fr(b,c){var d=!1;if(b.j){var e=!1,f=[b.l];b.c===$q?e=b.a.length>b.La:b.c===Yq&&(e=b.a[0].length>b.La,f=[b.a[0][0],b.a[0][b.a[0].length-2]]);if(e)for(var e=c.map,g=0,h=f.length;g<h;g++){var k=f[g],l=Nm(e,k),n=c.pixel,d=n[0]-l[0],l=n[1]-l[1],n=b.I&&b.ra(c)?1:b.kg;if(d=Math.sqrt(d*d+l*l)<=n){b.l=k;break}}}return d}
function dr(b,c){var d=c.coordinate;b.l=d;b.c===Zq?b.a=d.slice():b.c===Yq?(b.a=[[d.slice(),d.slice()]],b.D=b.a[0]):(b.a=[d.slice(),d.slice()],b.c===er&&(b.D=b.a));b.D&&(b.v=new Xh(new ui(b.D)));d=b.C(b.a);b.j=new Xh;b.Ka&&Zh(b.j,b.Ka);Yh(b.j,d);gr(b);b.B(new Sq("drawstart",b.j))}
function br(b,c){var d=c.coordinate,e=b.j.J(),f,g;if(b.c===$q)b.l=d.slice(),g=b.a,g.push(d.slice()),f=g.length>b.sa,b.C(g,e);else if(b.c===Yq){g=b.a[0];g.push(d.slice());if(f=g.length>b.sa)b.l=g[0];b.C(b.a,e)}gr(b);f&&b.kb()}
m.kb=function(){var b=hr(this),c=this.a,d=b.J();this.c===$q?(c.pop(),this.C(c,d)):this.c===Yq&&(c[0].pop(),c[0].push(c[0][0]),this.C(c,d));"MultiPoint"===this.O?Yh(b,new Di([c])):"MultiLineString"===this.O?Yh(b,new yi([c])):"MultiPolygon"===this.O&&Yh(b,new Mi([c]));this.B(new Sq("drawend",b));this.Da&&this.Da.push(b);this.Ma&&this.Ma.ia(b)};function hr(b){b.l=null;var c=b.j;c&&(b.j=null,b.s=null,b.v=null,b.ha.S().clear(!0));return c}
m.extend=function(b){var c=b.J();this.j=b;this.a=c.ja();b=this.a[this.a.length-1];this.l=b.slice();this.a.push(b.slice());gr(this);this.B(new Sq("drawstart",this.j))};m.sb=eh;function gr(b){var c=[];b.j&&c.push(b.j);b.v&&c.push(b.v);b.s&&c.push(b.s);b=b.ha.S();b.clear(!0);uj(b,c)}m.qf=function(){var b=this.g,c=this.getActive();b&&c||hr(this);this.ha.setMap(c?b:null)};
function Xq(b){var c;"Point"===b||"MultiPoint"===b?c=Zq:"LineString"===b||"MultiLineString"===b?c=$q:"Polygon"===b||"MultiPolygon"===b?c=Yq:"Circle"===b&&(c=er);return c}var Zq="Point",$q="LineString",Yq="Polygon",er="Circle";function ir(b,c){Sa.call(this,b);this.feature=c}y(ir,Sa);
function jr(b){b=void 0!==b?b:{};um.call(this,{handleEvent:kr});this.continueMsg=this.i=this.nb=this.Ja=this.j=this.c=null;this.decimals=void 0!==b.decimals?b.decimals:null;this.v=void 0!==b.zd?b.zd:!0;this.startMsg=void 0!==b.startMsg?b.startMsg:Fc("SPAN",{},"Click to start drawing.");this.A=null;var c=void 0!==b.style?b.style:[new Qh({fill:new Gh({color:"rgba(255, 255, 255, 0.2)"})}),new Qh({stroke:new Nh({color:"white",width:5})}),new Qh({stroke:new Nh({color:"#ffcc33",width:3})})];this.l=new rj({source:new Cj,
style:c});this.a=this.s(b.sketchStyle,this.l.S());this.C=!0;I(this.a,L("active"),this.jh,this);I(this.a,"drawstart",this.Bi,this);I(this.a,"drawend",this.Ai,this);I(this,L("active"),this.li,this)}y(jr,um);function kr(b){if(b.type!=rl||b.dragging)return!0;var c=this.startMsg;null!==this.i&&(c=this.continueMsg);this.v&&(Ic(this.c),this.c.appendChild(c),this.j.setPosition(b.coordinate));return!0}jr.prototype.Rg=function(){return this.a};jr.prototype.getDrawInteraction=jr.prototype.Rg;m=jr.prototype;
m.setMap=function(b){jr.U.setMap.call(this,b);this.l.setMap(b);var c=this.a.g;null!==c&&c.i.remove(this.a);null!==b&&b.i.push(this.a)};m.Bi=function(b){this.i=b.feature;this.l.S().clear(!0);lr(this);b=this.i.J();this.A=I(b,"change",function(){this.df(function(b,d){null!==d&&(this.Ja.innerHTML=b,this.nb.setPosition(d))}.bind(this))},this)};m.Ai=function(){vk(this.Ja,"tooltip-static");this.nb.set("offset",[0,-7]);this.B(new ir("measureend",this.i));this.i=null;null!==this.A&&G(this.A)};
function mr(b){b.v&&(b.g.c.remove(b.j),null!==b.c&&b.c.parentNode.removeChild(b.c),b.c=null,b.j=null)}function lr(b){nr(b);b.Ja=Fc("DIV");wk(b.Ja,["tooltip","tooltip-measure"]);b.nb=new xo({element:b.Ja,offset:[0,-15],Yd:"bottom-center",Rf:!1});b.g.c.push(b.nb)}function nr(b){null!==b.Ja&&(b.Ja.parentNode.removeChild(b.Ja),b.Ja=null,b.nb=null)}
m.li=function(){var b=this.getActive();this.C=!1;this.a.setActive(b);this.C=!0;this.g&&(b?this.nb||(lr(this),mr(this),this.v&&(this.c=Fc("DIV"),vk(this.c,"tooltip"),this.j=new xo({element:this.c,offset:[15,0],Yd:"center-left"}),this.g.c.push(this.j))):(this.l.S().clear(!0),this.g.c.remove(this.nb),nr(this),mr(this)))};m.jh=function(){this.C&&this.setActive(this.a.getActive())};function or(b){b=void 0!==b?b:{};jr.call(this,b);this.continueMsg=void 0!==b.continueMsg?b.continueMsg:Fc("SPAN",{},"Click to continue drawing the line.",Fc("BR"),"Double-click or click last point to finish.")}y(or,jr);or.prototype.s=function(b,c){return new Tq({type:"LineString",source:c,style:b})};
or.prototype.df=function(b){var c=this.i.J(),d;d=U(this.g).X();for(var e=this.decimals,f=0,g=c.ja(),h=0,k=g.length-1;h<k;++h)var l=df(g[h],d,"EPSG:4326"),n=df(g[h+1],d,"EPSG:4326"),f=f+Ie(An,l,n);var q;1E3<f?(null!==e?q=Ga(f/1E3,0,e):q=parseFloat((f/1E3).toPrecision(3)),q+=" km"):(null!==e?q=Ga(f,0,e):q=parseFloat(f.toPrecision(3)),q+=" m");d=q;c=c.o.slice(c.o.length-c.a);b(d,c)};function pr(b){um.call(this,{handleEvent:fh});this.l=null;this.i=b.type;this.C=b.minPoints?b.minPoints:"Polygon"===this.i?3:2;this.a=null;this.j=[];this.c=null;this.s=new rj({source:new Cj({mc:!1,wrapX:b.wrapX?b.wrapX:!1}),style:b.style?b.style:ar(),bd:!0,cd:!0});I(this,L("active"),this.v,this);this.set("dirty",!1);this.set("drawing",!1);this.set("valid",!1)}y(pr,um);sa("ngeo.interaction.MobileDraw",pr);
pr.prototype.setMap=function(b){this.g&&this.l&&G(this.l);pr.U.setMap.call(this,b);b&&(this.l=I(U(b),L("center"),this.A,this));this.v()};pr.prototype.Cc=function(){return this.get("dirty")};pr.prototype.getDirty=pr.prototype.Cc;pr.prototype.Zb=function(){return this.get("drawing")};pr.prototype.getDrawing=pr.prototype.Zb;pr.prototype.Nd=function(){return this.get("valid")};pr.prototype.getValid=pr.prototype.Nd;pr.prototype.getFeature=function(){return this.a};pr.prototype.getFeature=pr.prototype.getFeature;
pr.prototype.Rb=function(){var b=this.getActive(),c=this.Zb();if(b&&c){var c=this.c.J().ja(),d;"Point"===this.i?(this.a||(this.a=new Xh(new Ci(c)),this.B(new Sq("drawstart",this.a))),b=this.a.J(),b.Y(c)):("LineString"===this.i&&(this.j.push(this.c),this.a?(b=this.a.J(),d=b.ja(),d.push(c.slice()),b.Y(d)):(d=[c.slice(),c.slice()],this.a=new Xh(new ui(d)),this.B(new Sq("drawstart",this.a)))),this.Cc()&&this.set("dirty",!1),b=this.Nd(),"LineString"===this.i&&(d.length>=this.C?b||this.set("valid",!0):
b&&this.set("valid",!1)),this.c=null,qr(this))}};pr.prototype.addToDrawing=pr.prototype.Rb;pr.prototype.Ne=function(){this.setActive(!1);this.setActive(!0)};pr.prototype.clearDrawing=pr.prototype.Ne;pr.prototype.kb=function(){var b=this.getActive(),c=this.Zb();b&&c&&(this.c&&this.Rb(),this.set("drawing",!1),this.B(new Sq("drawend",this.a)))};pr.prototype.finishDrawing=pr.prototype.kb;
pr.prototype.v=function(){var b=this.g,c=this.getActive();if(b&&c)this.set("drawing",!0),rr(this),qr(this),"Point"===this.i&&this.Rb();else{if(this.a||0<this.j.length)this.c=this.a=null,this.s.S().clear(!0);this.j=[];this.set("dirty",!1);this.set("drawing",!1);this.set("valid",!1)}this.s.setMap(c?b:null)};
pr.prototype.A=function(){var b=this.getActive(),c=this.Zb();if(b&&c)if(rr(this),"Point"===this.i)this.Rb();else{if(this.a){b=Zl(U(this.g));if("LineString"===this.i){var c=this.a.J(),d=c.ja();d.pop();d.push(b);c.Y(d)}this.Cc()||this.set("dirty",!0)}qr(this)}};function rr(b){var c=Zl(U(b.g));b.c?b.c.J().Y(c):b.c=new Xh(new Ci(c))}function qr(b){var c=[];b.a&&c.push(b.a);b.c&&c.push(b.c);var d=b.s.S();d.clear(!0);uj(d,c);uj(d,b.j)};function sr(b){b=void 0!==b?b:{};fc(b,{zd:!1});or.call(this,b)}y(sr,or);sa("ngeo.interaction.MeasureLengthMobile",sr);sr.prototype.s=function(b,c){return new pr({type:"LineString",style:b,source:c})};B.value("gmfMobileMeasureLengthTemplateUrl",function(b,c){var d=c.gmfMobileMeasureLengthTemplateurl;return void 0!==d?d:"gmf/mobilemeasurelength.html"});function tr(b){return{restrict:"A",scope:{active:"=gmfMobileMeasureLengthActive",decimals:"<?gmfMobileMeasureLengthDecimals",map:"=gmfMobileMeasureLengthMap",sketchStyle:"=?gmfMobileMeasureLengthSketchStyle"},controller:"GmfMobileMeasureLengthController",controllerAs:"ctrl",bindToController:!0,templateUrl:b}}tr.$inject=["gmfMobileMeasureLengthTemplateUrl"];
B.directive("gmfMobileMeasureLength",tr);
function ur(b,c){b.$watch(function(){return this.active}.bind(this),function(b){this.measure.setActive(b)}.bind(this));void 0===this.sketchStyle&&(this.sketchStyle=new Qh({fill:new Gh({color:"rgba(255, 255, 255, 0.2)"}),stroke:new Nh({color:"rgba(0, 0, 0, 0.5)",H:[10,10],width:2}),image:new Hp({stroke:new Nh({color:"rgba(0, 0, 0, 0.7)",width:2}),points:4,radius:8,fc:0,angle:0})}));this.measure=new sr({decimals:this.decimals,sketchStyle:this.sketchStyle});this.measure.setActive(this.active);c(this.measure);
this.map.i.push(this.measure);var d=this.drawInteraction=this.measure.a;c(d);Object.defineProperty(this,"hasPoints",{get:function(){return null!==this.drawInteraction.getFeature()}});this.dirty=!1;I(d,L("dirty"),function(){(this.dirty=d.Cc())&&b.$apply()},this);this.drawing=!1;I(d,L("drawing"),function(){this.drawing=d.Zb()},this);this.valid=!1;I(d,L("valid"),function(){this.valid=d.Nd()},this)}ur.$inject=["$scope","ngeoDecorateInteraction"];ur.prototype.yg=function(){this.drawInteraction.Rb()};
ur.prototype.addPoint=ur.prototype.yg;ur.prototype.clear=function(){this.drawInteraction.Ne()};ur.prototype.clear=ur.prototype.clear;ur.prototype.finish=function(){this.drawInteraction.kb()};ur.prototype.finish=ur.prototype.finish;ur.prototype.yd=function(){this.active=!1};ur.prototype.deactivate=ur.prototype.yd;B.controller("GmfMobileMeasureLengthController",ur);function vr(b,c){this.a=b;this.b=c}vr.$inject=["$http","gmfAltitudeUrl"];vr.prototype.Hd=function(b){var c={};c.lon=b[0];c.lat=b[1];return this.a.get(this.b,{params:c,withCredentials:!0}).then(this.f.bind(this))};vr.prototype.getAltitude=vr.prototype.Hd;vr.prototype.f=function(b){return b.data};B.service("gmfAltitude",vr);function wr(b){b=void 0!==b?b:{};fc(b,{zd:!1});jr.call(this,b)}y(wr,jr);sa("ngeo.interaction.MeasurePointMobile",wr);wr.prototype.s=function(b,c){return new pr({type:"Point",style:b,source:c})};wr.prototype.df=function(b){var c=this.i.J();U(this.g).X();var d;d=this.decimals;var e=c.ja(),f=e[0],e=e[1];d=null!==d?d:0;f=Ga(f,0,d);e=Ga(e,0,d);d=["X: ",f,", Y: ",e].join("");c=c.o.slice(c.o.length-c.a);b(d,c)};B.value("gmfMobileMeasurePointTemplateUrl",function(b,c){var d=c.gmfMobileMeasurePointTemplateurl;return void 0!==d?d:"gmf/mobilemeasurepoint.html"});function xr(b){return{restrict:"A",scope:{active:"=gmfMobileMeasurePointActive",decimals:"<?gmfMobileMeasurePointDecimals",map:"=gmfMobileMeasurePointMap",sketchStyle:"=?gmfMobileMeasurePointSketchStyle"},controller:"GmfMobileMeasurePointController",controllerAs:"ctrl",bindToController:!0,templateUrl:b}}xr.$inject=["gmfMobileMeasurePointTemplateUrl"];
B.directive("gmfMobileMeasurePoint",xr);
function yr(b,c,d,e,f){this.f=d;this.g=e;this.c=b;c.$watch(function(){return this.active}.bind(this),function(b){this.measure.setActive(b);this.measure.getActive()?(b=U(this.map),this.a=I(b,"propertychange",this.g(this.b.bind(this),300,!0),this),this.b()):this.a&&(G(this.a),this.a=null)}.bind(this));void 0===this.sketchStyle&&(this.sketchStyle=new Qh({fill:new Gh({color:"rgba(255, 255, 255, 0.2)"}),stroke:new Nh({color:"rgba(0, 0, 0, 0.5)",H:[10,10],width:2}),image:new Hp({stroke:new Nh({color:"rgba(0, 0, 0, 0.7)",
width:2}),points:4,radius:8,fc:0,angle:0})}));this.measure=new wr({decimals:this.decimals,sketchStyle:this.sketchStyle});this.measure.setActive(this.active);f(this.measure);this.map.i.push(this.measure);this.drawInteraction=this.measure.a;f(this.drawInteraction);this.a=null}yr.$inject=["gettextCatalog","$scope","gmfAltitude","ngeoDebounce","ngeoDecorateInteraction"];yr.prototype.yd=function(){this.active=!1};yr.prototype.deactivate=yr.prototype.yd;yr.prototype.translate=function(b){return this.c.getString(b)};
yr.prototype.translate=yr.prototype.translate;
yr.prototype.b=function(){var b=Zl(U(this.map));this.f.Hd(b).then(function(b){var d=this.measure.Ja,e=document.createElement("div");e.className="gmf-mobile-measure-point-altitude";$b(b,function(b,c){if(null!==b){var d=document.createElement("div");d.className="gmf-mobile-measure-altitude";var k;k=1E3<b?parseFloat((b/1E3).toPrecision(3))+" km":parseFloat(b.toPrecision(3))+" m";d.innerHTML=[this.translate(c),": ",k].join("");e.appendChild(d)}},this);(b=Bc("gmf-mobile-measure-point-altitude",d))&&b.remove();
d.appendChild(e)}.bind(this))};B.controller("GmfMobileMeasurePointController",yr);B.directive("gmfMobileNav",function(){return{restrict:"A",controller:"gmfMobileNavController",bindToController:!0,controllerAs:"navCtrl",scope:!0,link:function(b,c,d,e){zr(e,c)}}});function Ar(){this.f=[];this.c=this.b=this.a=null;this.back=this.g.bind(this)}sa("gmf.MobileNavController",Ar);B.controller("gmfMobileNavController",Ar);
function zr(b,c){b.a=$(c.find(".active.slide"));b.b=$(c.find("> header"));b.c=$(c.find("header > .go-back"));c.find("[data-toggle=slide-in]").on("click",function(b){var c=$(b.target).parents(".slide");this.f.push(c);c.addClass("slide-out").removeClass("active");b=$($(b.target).attr("data-target"));b.addClass("active");Br(this,b,!1);this.a=b}.bind(b));b.c.click(b.back.bind(b))}
function Br(b,c,d){b.b.toggleClass("back",d);b.b.find("nav:not(.active)").remove();b.b.find("nav.active").removeClass("active").addClass("slide-out");b.c.toggleClass("active",0<b.f.length);var e=$("<nav>");e.append($("<span>",{text:c.attr("data-header-title")}));b.b.append(e);window.setTimeout(function(){e.css("display","none");e.offset();e.css("display","");window.setTimeout(function(){e.position();e.addClass("active")},0)},0)}B.controller("gmfMobileNavController",Ar);
Ar.prototype.g=function(){if(!(0>=this.f.length)){this.a.removeClass("active");var b=this.f.pop();b.addClass("active").removeClass("slide-out");Br(this,b,!0);this.a=b}};B.directive("gmfMobileNavBack",function(){return{require:"^^gmfMobileNav",restrict:"A",scope:!1,link:function(b,c,d,e){b.$watch(d.gmfMobileNavBack,function(){null!==e.a&&e.a.is(c[0])&&e.g()})}}});function Cr(b){return{restrict:"A",scope:!1,link:function(c,d,e){function f(c){b.gf(g,c.coordinate)}var g=c.$eval(e.ngeoMobileQueryMap),h=null;c.$watch(e.ngeoMobileQueryActive,function(c){c?h=I(g,"click",f):(null!==h&&(G(h),h=null),b.clear())})}}}Cr.$inject=["ngeoQuery"];A.directive("ngeoMobileQuery",Cr);B.constant("isMobile",!0);B.constant("gmfAltitudeUrl","https://geomapfish-demo.camptocamp.net/2.0/wsgi/raster");
function Dr(b,c,d){this.rightNavVisible=this.leftNavVisible=!1;var e=b.positionFeatureStyle||new Qh({image:new Ph({radius:6,fill:new Gh({color:"rgba(230, 100, 100, 1)"}),stroke:new Nh({color:"rgba(230, 40, 40, 1)",width:2})})}),f=b.accuracyFeatureStyle||new Qh({fill:new Gh({color:"rgba(100, 100, 230, 0.3)"}),stroke:new Nh({color:"rgba(40, 40, 230, 1)",width:2})}),g=new Gh({color:[255,170,0,.6]}),h=new Nh({color:[255,170,0,1],width:2});this.queryFeatureStyle=new Qh({fill:g,image:new Ph({fill:g,radius:5,
stroke:h}),stroke:h});this.mobileGeolocationOptions={positionFeatureStyle:e,accuracyFeatureStyle:f,zoom:b.geolocationZoom||9};e={projection:Oe("epsg:"+(b.srid||21781))};fc(e,b.mapViewConfig||{});this.map=new uo({layers:[],view:new Yl(e),controls:b.mapControls||[new Aq,new rm],mb:b.mapInteractions||sn({Xd:!1})});c.$on(Er,function(b){b.stopPropagation();alert("Geo-location failed")}.bind(this));mq.call(this,b,c,d)}y(Dr,mq);sa("gmf.AbstractMobileController",Dr);Dr.$inject=["config","$scope","$injector"];
Dr.prototype.qj=function(){this.leftNavVisible=!this.leftNavVisible};Dr.prototype.toggleLeftNavVisibility=Dr.prototype.qj;Dr.prototype.rj=function(){this.rightNavVisible=!this.rightNavVisible};Dr.prototype.toggleRightNavVisibility=Dr.prototype.rj;Dr.prototype.Gh=function(){this.leftNavVisible=this.rightNavVisible=!1};Dr.prototype.hideNav=Dr.prototype.Gh;Dr.prototype.ii=function(){return this.leftNavVisible||this.rightNavVisible};Dr.prototype.navIsVisible=Dr.prototype.ii;Dr.prototype.Sh=function(){return this.leftNavVisible};
Dr.prototype.leftNavIsVisible=Dr.prototype.Sh;Dr.prototype.gj=function(){return this.rightNavVisible};Dr.prototype.rightNavIsVisible=Dr.prototype.gj;B.controller("AbstractMobileController",Dr);function Fr(b){Object.defineProperty(b,"tracking",{get:function(){return b.get("tracking")},set:function(c){Gr(b,c)}})}Fr.$inject=["geolocation"];A.value("ngeoDecorateGeolocation",Fr);function Hr(b){mb.call(this);b=b||{};this.a=null;this.g=cf;this.c=void 0;I(this,L("projection"),this.ni,this);I(this,L("tracking"),this.oi,this);if(void 0!==b.projection){var c=Oe(b.projection);this.set("projection",c)}void 0!==b.xj&&this.set("trackingOptions",b.xj);Gr(this,void 0!==b.wj?b.wj:!1)}y(Hr,mb);m=Hr.prototype;m.L=function(){Gr(this,!1);Hr.U.L.call(this)};m.ni=function(){var b=this.X();b&&(this.g=Ve(Oe("EPSG:4326"),b),this.a&&this.set("position",this.g(this.a)))};
m.oi=function(){if(yh){var b=this.get("tracking");b&&void 0===this.c?this.c=t.navigator.geolocation.watchPosition(this.Oi.bind(this),this.Pi.bind(this),this.get("trackingOptions")):b||void 0===this.c||(t.navigator.geolocation.clearWatch(this.c),this.c=void 0)}};
m.Oi=function(b){var c=b.coords;this.set("accuracy",c.accuracy);this.set("altitude",null===c.altitude?void 0:c.altitude);this.set("altitudeAccuracy",null===c.altitudeAccuracy?void 0:c.altitudeAccuracy);this.set("heading",null===c.heading?void 0:c.heading*Math.PI/180);this.a?(this.a[0]=c.longitude,this.a[1]=c.latitude):this.a=[c.longitude,c.latitude];b=this.g(this.a);this.set("position",b);this.set("speed",null===c.speed?void 0:c.speed);b=this.a;var d=c.accuracy,c=[],e;for(e=0;32>e;++e)Tc(c,An.offset(b,
d,2*Math.PI*e/32));c.push(c[0],c[1]);b=new Ji(null);b.K("XY",c,[c.length]);b.tc(this.g);this.set("accuracyGeometry",b);this.b()};m.Pi=function(b){b.type="error";Gr(this,!1);this.B(b)};m.Hd=function(){return this.get("altitude")};m.X=function(){return this.get("projection")};function Gr(b,c){b.set("tracking",c)};var Er="mobile-geolocation-error";sa("ngeo.MobileGeolocationEventType",{ERROR:Er});A.directive("ngeoMobileGeolocation",function(){return{restrict:"A",scope:{getMobileMapFn:"&ngeoMobileGeolocationMap",getMobileGeolocationOptionsFn:"&ngeoMobileGeolocationOptions"},controller:"NgeoMobileGeolocationController",controllerAs:"ctrl"}});
function Ir(b,c,d,e){c.on("click",this.Uf.bind(this));c=b.getMobileMapFn();this.u=b;this.f=c;var f=b.getMobileGeolocationOptionsFn()||{};this.b=Mj(e);this.da=new Hr({projection:U(c).X()});this.da.on("error",function(c){Jr(this);b.$emit(Er,c)},this);this.c=new Xh;f.positionFeatureStyle&&$h(this.c,f.positionFeatureStyle);this.fb=new Xh;f.accuracyFeatureStyle&&$h(this.fb,f.accuracyFeatureStyle);this.j=f.zoom;this.i=this.a=!1;I(this.da,L("accuracyGeometry"),function(){Yh(this.fb,this.da.get("accuracyGeometry")||
null)},this);I(this.da,L("position"),function(b){this.ie(b)},this);e=U(c);I(e,L("center"),this.g,this);I(e,L("resolution"),this.g,this);I(e,L("rotation"),this.g,this);d(this.da)}sa("ngeo.MobileGeolocationController",Ir);Ir.$inject=["$scope","$element","ngeoDecorateGeolocation","ngeoFeatureOverlayMgr"];
Ir.prototype.Uf=function(){if(this.da.get("tracking")){var b=this.da.get("position");if(void 0===b)Jr(this),this.u.$emit(Er,null);else{var c=Zl(U(this.f));b[0]===c[0]&&b[1]===c[1]?Jr(this):(Jr(this),Kr(this))}}else Kr(this)};Ir.prototype.toggleTracking=Ir.prototype.Uf;function Kr(b){b.b.ia(b.c);b.b.ia(b.fb);b.a=!0;Gr(b.da,!0)}function Jr(b){b.b.clear();b.a=!1;Gr(b.da,!1)}
Ir.prototype.ie=function(){var b=this.da.get("position"),c=new Ci(b);Yh(this.c,c);this.a&&(this.i=!0,cm(U(this.f),b),void 0!==this.j&&fm(U(this.f),this.j),this.i=!1)};Ir.prototype.g=function(){this.a&&!this.i&&(this.a=!1)};A.controller("NgeoMobileGeolocationController",Ir);ta.constant("ngeoQueryOptions",{limit:20});function Lr(b,c){Dr.call(this,{srid:21781,mapViewConfig:{center:[632464,185457],Fa:3,zoom:3}},b,c)}y(Lr,Dr);sa("app.MobileController",Lr);Lr.$inject=["$scope","$injector"];ta.controller("MobileController",Lr);function Mr(b,c){var d=c.exportgpxkml;return function(c,f,g){f=$("<input>").attr({type:"hidden",name:"format",value:f});g=$("<input>").attr({type:"hidden",name:"name",value:g});c=$("<input>").attr({type:"hidden",name:"doc",value:c});var h=$("<form>").attr({method:"POST",action:d});h.append(f,g,c);angular.element(b[0].body).append(h);h[0].submit();h.remove()}}Mr.$inject=["$document","gmfServiceUrls"];B.factory("gmfExportFeatures",Mr);var Nr=[4E3,3750,3500,3250,3E3,2750,2500,2250,2E3,1750,1500,1250,1E3,750,650,500,250,100,50,20,10,5,2.5,2,1.5,1,.5];new Sg({extent:[42E4,3E4,9E5,35E4],Ba:Nr,Td:Nr.map(function(b,c){return String(c)})});var Or=[4E3,3750,3500,3250,3E3,2750,2500,2250,2E3,1750,1500,1250,1E3,750,650,500,250,100,50,20,10,5,2.5,2,1.5,1,.5];new Sg({extent:[42E4,3E4,9E5,35E4],Ba:Or,Td:Or.map(function(b,c){return String(c)})});(function(){function b(b){b.put("ngeo/popup.html",'<h4 class="popover-title ngeo-popup-title"> <span>{{title}}</span> <button type=button class=close ng-click="open = false"> &times;</button> </h4> <div class=popover-content ng-bind-html=content></div> ');b.put("gmf/layertree.html",'<span ng-if=::!layertreeCtrl.isRoot id=node-{{::layertreeCtrl.uid}} ng-class="[layertreeCtrl.node.children ? \'group\' : \'leaf\', \'depth-\' + layertreeCtrl.depth, gmfLayertreeCtrl.getResolutionStyle(layertreeCtrl.node), gmfLayertreeCtrl.getNoSourceStyle(layertreeCtrl), gmfLayertreeCtrl.getNodeState(layertreeCtrl)]"> <a href ng-click=::gmfLayertreeCtrl.toggleActive(layertreeCtrl)> <span class=layerIcon> <img ng-src={{::gmfLayertreeCtrl.getLegendIconURL(layertreeCtrl)}}> </span> <span class=state></span> <span class=name>{{layertreeCtrl.node.name | translate}}</span> </a> <span class=rightButtons> <span class=metadata ng-if=::layertreeCtrl.node.metadata.metadataUrl> <span ng-if="::gmfLayertreeCtrl.openLinksInNewWindow === true"> <a title="More informations" href={{::layertreeCtrl.node.metadata.metadataUrl}} target=blank_></a> </span> <span ng-if="::gmfLayertreeCtrl.openLinksInNewWindow !== true"> <a title="More informations" href ng-click=gmfLayertreeCtrl.displayMetadata(layertreeCtrl)></a> </span> </span> <span class=zoom title="Zoom to a visible level" ng-click=::gmfLayertreeCtrl.zoomToResolution(layertreeCtrl.node)></span> <span class=legendButton ng-if="::(gmfLayertreeCtrl.getLegendURL(layertreeCtrl) && layertreeCtrl.node.metadata.legend == \'true\')"> <a title="Show/hide legend" data-toggle=collapse href=#node-{{::layertreeCtrl.uid}}-legend></a> </span> </span> <span class=legend> <div id=node-{{::layertreeCtrl.uid}}-legend class=collapse ng-class="::[layertreeCtrl.node.metadata.isLegendExpanded == \'true\' ? \'in\' : \'\']"> <a data-toggle=collapse href=#node-{{::layertreeCtrl.uid}}-legend> <img ng-src={{gmfLayertreeCtrl.getLegendURL(layertreeCtrl)}}> </a> </div> </span> </span> <ul ng-if=::layertreeCtrl.node.children> <li class=treenode ng-repeat="node in layertreeCtrl.node.children" ngeo-layertree=node ngeo-layertree-notroot ngeo-layertree-map=layertreeCtrl.map ngeo-layertree-nodelayerexpr=layertreeCtrl.nodelayerExpr ngeo-layertree-listenersexpr=layertreeCtrl.listenersExpr> </li> </ul> ');
b.put("ngeo/scaleselector.html",'<div ng-class="::{\'dropdown\': true, \'dropup\': scaleselectorCtrl.options.dropup}"> <button type=button class="btn btn-primary" data-toggle=dropdown> <span ng-bind-html=scaleselectorCtrl.currentScale></span>&nbsp;<span class=caret></span> </button> <ul class=dropdown-menu role=menu> <li ng-repeat="zoomLevel in ::scaleselectorCtrl.zoomLevels"> <a href ng-click=scaleselectorCtrl.changeZoom(zoomLevel) ng-bind-html=scaleselectorCtrl.getScale(zoomLevel)> </a> </li> </ul> </div> ');
b.put("gmf/mobilemeasurelength.html",'<a class="btn btn-default" ng-if="ctrl.drawing && (!ctrl.valid)" ng-click=ctrl.addPoint()> <span class="fa fa-check"></span> {{\'Set as starting point\' | translate}} </a> <a class="btn btn-default" ng-if=ctrl.dirty ng-click=ctrl.addPoint()> <span class="fa fa-plus"></span> {{\'Add new point\' | translate}} </a> <a class="btn btn-default" ng-if="ctrl.drawing && ctrl.valid && !ctrl.dirty" ng-click=ctrl.finish()> <span class="fa fa-check"></span> {{\'Terminate\' | translate}} </a> <a class="btn btn-default" ng-if=ctrl.valid ng-click=ctrl.clear()> <span class="fa fa-repeat"></span> {{\'Clear\' | translate}} </a> <a class="btn btn-default" ng-if=ctrl.active ng-click=ctrl.deactivate()> <span class="fa fa-times"></span> {{\'Close\' | translate}} </a> ');
b.put("gmf/mobilebackgroundlayerselector.html",'<ul class=gmf-mobile-backgroundlayerselector> <li ng-repeat="layer in ::ctrl.bgLayers" ng-click=ctrl.setLayer(layer)> <div class=gmf-check> <span class=gmf-icon ng-class="{\'gmf-icon-check\': ctrl.bgLayer == layer}"> </span> </div> <div class=gmf-text>{{layer.get("label") | translate}}</div> <img class=gmf-thumb ng-src="{{::layer.get(\'metadata\')[\'thumbnail\']}}"> <div class=gmf-eol></div> </li> </ul> ');b.put("gmf/mobilemeasurepoint.html",'<a class="btn btn-default" ng-if=ctrl.active ng-click=ctrl.deactivate()> <span class="fa fa-times"></span> {{\'Close\' | translate}} </a> ');
b.put("gmf/search.html",'<div class=gmf-search> <input type=text placeholder="{{\'Search\u2026\' | translate}}" class=form-control ng-model=ctrl.input_value ngeo-search=ctrl.options ngeo-search-datasets=ctrl.datasets ngeo-search-listeners=ctrl.listeners> <span class="clear-button ng-hide" ng-hide="!ctrl.clearButton || ctrl.input_value == \'\'" ng-click=ctrl.onClearButton()></span> </div> ');b.put("gmf/authentication.html","<div ng-if=authCtrl.gmfUser.username> <div class=form-group> <span>{{'Logged in as' | translate}}</span> <strong>{{ ::authCtrl.gmfUser.username }}</strong>. </div> <form name=logoutForm role=form ng-submit=authCtrl.logout() ng-controller=GmfAuthenticationController ng-class=\"{'has-error': authCtrl.error}\" ng-if=!authCtrl.changingPassword> <div class=form-group> <input type=submit class=\"form-control btn btn-primary\" value=\"{{'Logout' | translate}}\"> </div> <span ng-show=authCtrl.error class=help-block>{{ authCtrl.error }}</span> <div class=form-group> <input type=button class=\"form-control btn btn-default\" value=\"{{'Change password' | translate}}\" ng-click=\"authCtrl.changingPassword = true\"> </div> </form> <form name=changePasswordForm role=form ng-submit=authCtrl.changePassword() ng-controller=GmfAuthenticationController ng-class=\"{'has-error': authCtrl.error}\" ng-if=authCtrl.changingPassword> <div class=form-group> <input type=password class=form-control name=oldpassword ng-model=authCtrl.oldPwdVal required=required placeholder=\"{{'Old password' | translate}}\"> </div> <div class=form-group> <input type=password class=form-control name=newpassword ng-model=authCtrl.newPwdVal required=required placeholder=\"{{'New password' | translate}}\"> </div> <div class=form-group> <input type=password class=form-control name=newpasswordconfirm ng-model=authCtrl.newPwdConfVal required=required placeholder=\"{{'Confirm new password' | translate}}\"> </div> <div class=form-group> <input type=submit class=\"form-control btn btn-primary\" value=\"{{'Change password' | translate}}\"> </div> <div class=form-group> <span ng-show=authCtrl.error class=help-block>{{ authCtrl.error }}</span> <input type=button class=\"form-control btn btn-default\" value=\"{{'Cancel' | translate}}\" ng-click=authCtrl.changePasswordReset()> </div> </form> <ngeo-modal ng-model=authCtrl.changePasswordModalShown> <div class=modal-header> <button type=button class=close data-dismiss=modal aria-label=\"{{'Close' | translate}}\"> <span aria-hidden=true>&times;</span> </button> <h4 class=modal-title> {{'Password Changed' | translate}} </h4> </div> <div class=modal-body> {{'Your password has succesfully been changed.' | translate}} </div> <div class=modal-footer> <button type=button class=\"btn btn-default\" data-dismiss=modal>{{'OK' | translate}}</button> </div> </ngeo-modal> </div> <div ng-if=!authCtrl.gmfUser.username> <form name=loginForm role=form ng-submit=authCtrl.login() ng-controller=GmfAuthenticationController ng-class=\"{'has-error': authCtrl.error}\"> <div class=form-group> <input type=text class=form-control name=login ng-model=authCtrl.loginVal required=required placeholder=\"{{'Username' | translate}}\"> </div> <div class=form-group> <input type=password class=form-control name=password ng-model=authCtrl.pwdVal required=required placeholder=\"{{'Password' | translate}}\"> </div> <div class=form-group> <input type=submit class=\"form-control btn btn-primary\" value=\"{{'Connect' | translate}}\"> </div> <span ng-show=authCtrl.error class=help-block>{{ authCtrl.error }}</span> <div class=form-group> <a ng-click=authCtrl.resetPassword() href>{{'Password forgotten?' | translate}}</a> </div> </form> <ngeo-modal ng-model=authCtrl.resetPasswordModalShown> <div class=modal-header> <button type=button class=close data-dismiss=modal aria-label=\"{{'Close' | translate}}\"> <span aria-hidden=true>&times;</span> </button> <h4 class=modal-title> {{'Password Forgotten?' | translate}} </h4> </div> <div class=modal-body> {{ ::authCtrl.translate( 'A new password has just been sent to you by e-mail.') }} </div> <div class=modal-footer> <button type=button class=\"btn btn-default\" data-dismiss=modal>{{'OK' | translate}}</button> </div> </ngeo-modal> </div> ");
b.put("gmf/themeselector.html","<ul class=gmf-theme-selector> <li ng-repeat=\"theme in tsCtrl.themes\" ng-click=tsCtrl.switchTheme(theme)> <div class=gmf-check> <span class=gmf-icon ng-class=\"{'gmf-icon-check': tsCtrl.currentTheme['name'] == theme.name}\"> </span> </div> <div class=gmf-text>{{theme.name | translate}}</div> <img class=gmf-thumb ng-src={{::theme.icon}}> <div class=gmf-eol></div> </li> </ul> ");b.put("ngeo/layertree.html",'<span ng-if=::!layertreeCtrl.isRoot>{{::layertreeCtrl.node.name}}</span> <input type=checkbox ng-if="::layertreeCtrl.node && !layertreeCtrl.node.children" ng-model=layertreeCtrl.getSetActive ng-model-options="{getterSetter: true}"> <ul ng-if=::layertreeCtrl.node.children> <li ng-repeat="node in ::layertreeCtrl.node.children" ngeo-layertree=::node ngeo-layertree-notroot ngeo-layertree-map=layertreeCtrl.map ngeo-layertree-nodelayerexpr=layertreeCtrl.nodelayerExpr ngeo-layertree-listenersexpr=layertreeCtrl.listenersExpr> </li> </ul> ');
b.put("gmf/mobiledisplayqueries.html",'<div class=mobiledisplayqueries ng-show=ctrl.open ng-swipe-disable-mouse ng-swipe-left=ctrl.next() ng-swipe-right=ctrl.previous()> <button class=collapse-button type=button ng-init="ctrl.collapse = true" ng-click="ctrl.collapse = !ctrl.collapse" ng-class="[ctrl.collapse ? \'up\' : \'down\']"></button> <div class=displayqueries-container> <button type=button class=close ng-click=ctrl.close()></button> <div class=animation-container ng-class="[ctrl.collapse ? \'\' : \'detailed\', ctrl.isNext ? \'next\' : \'previous\']"> <div ng-animate-swap=ctrl.animate class=slide-animation> <div class=header> <p class=title>{{ctrl.source.label | translate}}</p> <p class=subtitle>{{ctrl.getFeatureValues()[ctrl.source.identifierAttributeField]}}</p> </div> <div class=details> <table> <tr ng-repeat="(key, value) in ctrl.getFeatureValues()" ng-if="value.length && key !== \'boundedBy\'"> <td class=key>{{key | translate}}</td> <td class=value>{{value}}</td> </tr> </table> </div> </div> </div> <div class=navigate> <button type=button class=previous ng-show="ctrl.getResultLength() - 1" ng-click=ctrl.previous()></button> <span>{{ctrl.currentResult + 1}}</span> <span>/</span> <span>{{ctrl.getResultLength()}}</span> <button type=button class=next ng-show="ctrl.getResultLength() - 1" ng-click=ctrl.next()></button> </div> </div> </div> ')}
b.$inject=["$templateCache"];B.run(b)})();var Pr=[null,"http://www.topografix.com/GPX/1/0","http://www.topografix.com/GPX/1/1"];function Qr(b,c,d){b.push(parseFloat(c.getAttribute("lon")),parseFloat(c.getAttribute("lat")));"ele"in d?(b.push(d.ele),delete d.ele):b.push(0);"time"in d?(b.push(d.time),delete d.time):b.push(0);return b}function Rr(b,c){var d=c[c.length-1],e=b.getAttribute("href");null!==e&&(d.link=e);Jd(Sr,b,c)}function Tr(b,c){c[c.length-1].extensionsNode_=b}
P(Pr,{rte:Bd(function(b,c){var d=c[0],e=Q({flatCoordinates:[]},Ur,b,c);if(e){var f=e.flatCoordinates;delete e.flatCoordinates;var g=new ui(null);g.K("XYZM",f);di(g,!1,d);d=new Xh(g);d.ka(e);return d}}),trk:Bd(function(b,c){var d=c[0],e=Q({flatCoordinates:[],ends:[]},Vr,b,c);if(e){var f=e.flatCoordinates;delete e.flatCoordinates;var g=e.ends;delete e.ends;var h=new yi(null);h.K("XYZM",f,g);di(h,!1,d);d=new Xh(h);d.ka(e);return d}}),wpt:Bd(function(b,c){var d=c[0],e=Q({},Wr,b,c);if(e){var f=Qr([],b,
e),f=new Ci(f,"XYZM");di(f,!1,d);d=new Xh(f);d.ka(e);return d}})});
var Sr=P(Pr,{text:N(S,"linkText"),type:N(S,"linkType")}),Ur=P(Pr,{name:N(S),cmt:N(S),desc:N(S),src:N(S),link:Rr,number:N(Sd),extensions:Tr,type:N(S),rtept:function(b,c){var d=Q({},Xr,b,c);d&&Qr(c[c.length-1].flatCoordinates,b,d)}}),Xr=P(Pr,{ele:N(Qd),time:N(Pd)}),Vr=P(Pr,{name:N(S),cmt:N(S),desc:N(S),src:N(S),link:Rr,number:N(Sd),type:N(S),extensions:Tr,trkseg:function(b,c){var d=c[c.length-1];Jd(Yr,b,c);d.ends.push(d.flatCoordinates.length)}}),Yr=P(Pr,{trkpt:function(b,c){var d=Q({},Zr,b,c);d&&Qr(c[c.length-
1].flatCoordinates,b,d)}}),Zr=P(Pr,{ele:N(Qd),time:N(Pd)}),Wr=P(Pr,{ele:N(Qd),time:N(Pd),magvar:N(Qd),geoidheight:N(Qd),name:N(S),cmt:N(S),desc:N(S),src:N(S),link:Rr,sym:N(S),type:N(S),fix:N(S),sat:N(Sd),hdop:N(Qd),vdop:N(Qd),pdop:N(Qd),ageofdgpsdata:N(Qd),dgpsid:N(Sd),extensions:Tr});function $r(b,c,d){b.setAttribute("href",c);c=d[d.length-1].properties;Kd({node:b},as,Hd,[c.linkText,c.linkType],d,bs)}
function cs(b,c,d){var e=d[d.length-1],f=e.node.namespaceURI,g=e.properties;zd(b,null,"lat",c[1]);zd(b,null,"lon",c[0]);switch(e.geometryLayout){case "XYZM":0!==c[3]&&(g.time=c[3]);case "XYZ":0!==c[2]&&(g.ele=c[2]);break;case "XYM":0!==c[2]&&(g.time=c[2])}c=ds[f];e=Id(g,c);Kd({node:b,properties:g},es,Hd,e,d,c)}
var bs=["text","type"],as=P(Pr,{text:O(Vd),type:O(Vd)}),fs=P(Pr,"name cmt desc src link number type rtept".split(" ")),gs=P(Pr,{name:O(Vd),cmt:O(Vd),desc:O(Vd),src:O(Vd),link:O($r),number:O(Xd),type:O(Vd),rtept:Ed(O(cs))}),hs=P(Pr,"name cmt desc src link number type trkseg".split(" ")),ks=P(Pr,{name:O(Vd),cmt:O(Vd),desc:O(Vd),src:O(Vd),link:O($r),number:O(Xd),type:O(Vd),trkseg:Ed(O(function(b,c,d){Kd({node:b,geometryLayout:c.layout,properties:{}},is,js,c.ja(),d)}))}),js=Fd("trkpt"),is=P(Pr,{trkpt:O(cs)}),
ds=P(Pr,"ele time magvar geoidheight name cmt desc src link sym type fix sat hdop vdop pdop ageofdgpsdata dgpsid".split(" ")),es=P(Pr,{ele:O(Wd),time:O(function(b,c){var d=new Date(1E3*c),d=d.getUTCFullYear()+"-"+Ga(d.getUTCMonth()+1,2)+"-"+Ga(d.getUTCDate(),2)+"T"+Ga(d.getUTCHours(),2)+":"+Ga(d.getUTCMinutes(),2)+":"+Ga(d.getUTCSeconds(),2)+"Z";b.appendChild(bd.createTextNode(d))}),magvar:O(Wd),geoidheight:O(Wd),name:O(Vd),cmt:O(Vd),desc:O(Vd),src:O(Vd),link:O($r),sym:O(Vd),type:O(Vd),fix:O(Vd),
sat:O(Xd),hdop:O(Wd),vdop:O(Wd),pdop:O(Wd),ageofdgpsdata:O(Wd),dgpsid:O(Xd)});
P(Pr,{rte:O(function(b,c,d){var e=d[0],f=Ua({},c.u);b={node:b,properties:f};if(c=c.J())c=di(c,!0,e),b.geometryLayout=c.layout,f.rtept=c.ja();e=fs[d[d.length-1].node.namespaceURI];f=Id(f,e);Kd(b,gs,Hd,f,d,e)}),trk:O(function(b,c,d){var e=d[0],f=Ua({},c.u);b={node:b,properties:f};if(c=c.J())c=di(c,!0,e),f.trkseg=zi(c);e=hs[d[d.length-1].node.namespaceURI];f=Id(f,e);Kd(b,ks,Hd,f,d,e)}),wpt:O(function(b,c,d){var e=d[0],f=d[d.length-1];f.properties=Ua({},c.u);if(c=c.J())c=di(c,!0,e),f.geometryLayout=c.layout,
cs(b,c.ja(),d)})});function ls(b){b=b||{};this.b=b.font;this.g=b.rotation;this.l=b.scale;this.s=b.text;this.j=b.textAlign;this.u=b.textBaseline;this.a=void 0!==b.fill?b.fill:new Gh({color:"#333"});this.i=void 0!==b.stroke?b.stroke:null;this.f=void 0!==b.offsetX?b.offsetX:0;this.c=void 0!==b.offsetY?b.offsetY:0}ls.prototype.Ha=function(){return this.l};ls.prototype.va=function(){return this.s};var ms=["http://www.google.com/kml/ext/2.2"],Y=[null,"http://earth.google.com/kml/2.0","http://earth.google.com/kml/2.1","http://earth.google.com/kml/2.2","http://www.opengis.net/kml/2.2"],ns=[255,255,255,1],os=new Gh({color:ns}),ps=[20,2],qs=[64,64],rs=new Fl({anchor:ps,jd:"bottom-left",kd:"pixels",ld:"pixels",crossOrigin:"anonymous",rotation:0,scale:.5,size:qs,src:"https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png"}),ss=new Nh({color:ns,width:1}),ts=new ls({font:"bold 16px Helvetica",
fill:os,stroke:new Nh({color:[51,51,51,1],width:2}),scale:.8});new Qh({fill:os,image:rs,text:ts,stroke:ss,zIndex:0});var us={fraction:"fraction",pixels:"pixels"};function vs(b){b=fd(b);if(b=/^\s*#?\s*([0-9A-Fa-f]{8})\s*$/.exec(b))return b=b[1],[parseInt(b.substr(6,2),16),parseInt(b.substr(4,2),16),parseInt(b.substr(2,2),16),parseInt(b.substr(0,2),16)/255]}
function ws(b){b=fd(b);for(var c=[],d=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*,\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s*,\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?))?\s*/i,e;e=d.exec(b);)c.push(parseFloat(e[1]),parseFloat(e[2]),e[3]?parseFloat(e[3]):0),b=b.substr(e[0].length);return""!==b?void 0:c}function xs(b){var c=fd(b);return b.baseURI?wp(b.baseURI,c.trim()).toString():c.trim()}function ys(b){b=Qd(b);if(void 0!==b)return Math.sqrt(b)}function zs(b,c){return Q(null,As,b,c)}
function Bs(b,c){var d=Q({o:[],Xf:[]},Cs,b,c);if(d){var e=d.o,d=d.Xf,f,g;f=0;for(g=Math.min(e.length,d.length);f<g;++f)e[4*f+3]=d[f];d=new ui(null);d.K("XYZM",e);return d}}function Ds(b,c){var d=Q({},Es,b,c),e=Q(null,Fs,b,c);if(e){var f=new ui(null);f.K("XYZ",e);f.ka(d);return f}}function Gs(b,c){var d=Q({},Es,b,c),e=Q(null,Fs,b,c);if(e){var f=new Ji(null);f.K("XYZ",e,[e.length]);f.ka(d);return f}}
function Hs(b,c){var d=Q([],Is,b,c);if(!d)return null;if(0===d.length)return new Op(d);var e=!0,f=d[0].aa(),g,h,k;h=1;for(k=d.length;h<k;++h)if(g=d[h],g.aa()!=f){e=!1;break}if(e){if("Point"==f){g=d[0];e=g.layout;f=g.o;h=1;for(k=d.length;h<k;++h)g=d[h],Tc(f,g.o);g=new Di(null);g.K(e,f);Js(g,d);return g}return"LineString"==f?(g=new yi(null),Bi(g,d),Js(g,d),g):"Polygon"==f?(g=new Mi(null),Qi(g,d),Js(g,d),g):"GeometryCollection"==f?new Op(d):null}return new Op(d)}
function Ks(b,c){var d=Q({},Es,b,c),e=Q(null,Fs,b,c);if(e){var f=new Ci(null);f.K("XYZ",e);f.ka(d);return f}}function Ls(b,c){var d=Q({},Es,b,c),e=Q([null],Ms,b,c);if(e&&e[0]){var f=new Ji(null),g=e[0],h=[g.length],k,l;k=1;for(l=e.length;k<l;++k)Tc(g,e[k]),h.push(g.length);f.K("XYZ",g,h);f.ka(d);return f}}
function Ns(b,c){var d=Q({},Os,b,c);if(!d)return null;var e="fillStyle"in d?d.fillStyle:os,f=d.fill;void 0===f||f||(e=null);var f="imageStyle"in d?d.imageStyle:rs,g="textStyle"in d?d.textStyle:ts,h="strokeStyle"in d?d.strokeStyle:ss,d=d.outline;void 0===d||d||(h=null);return[new Qh({fill:e,image:f,stroke:h,text:g,zIndex:void 0})]}
function Js(b,c){var d=c.length,e=Array(c.length),f=Array(c.length),g,h,k,l;k=l=!1;for(h=0;h<d;++h)g=c[h],e[h]=g.get("extrude"),f[h]=g.get("altitudeMode"),k=k||void 0!==e[h],l=l||f[h];k&&b.set("extrude",e);l&&b.set("altitudeMode",f)}function Ps(b,c){Jd(Qs,b,c)}
var Rs=P(Y,{value:Cd(S)}),Qs=P(Y,{Data:function(b,c){var d=b.getAttribute("name");if(null!==d){var e=Q(void 0,Rs,b,c);e&&(c[c.length-1][d]=e)}},SchemaData:function(b,c){Jd(Ss,b,c)}}),Es=P(Y,{extrude:N(Nd),altitudeMode:N(S)}),As=P(Y,{coordinates:Cd(ws)}),Ms=P(Y,{innerBoundaryIs:function(b,c){var d=Q(void 0,Ts,b,c);d&&c[c.length-1].push(d)},outerBoundaryIs:function(b,c){var d=Q(void 0,Us,b,c);d&&(c[c.length-1][0]=d)}}),Cs=P(Y,{when:function(b,c){var d=c[c.length-1].Xf,e=fd(b);if(e=/^\s*(\d{4})($|-(\d{2})($|-(\d{2})($|T(\d{2}):(\d{2}):(\d{2})(Z|(?:([+\-])(\d{2})(?::(\d{2}))?)))))\s*$/.exec(e)){var f=
Date.UTC(parseInt(e[1],10),e[3]?parseInt(e[3],10)-1:0,e[5]?parseInt(e[5],10):1,e[7]?parseInt(e[7],10):0,e[8]?parseInt(e[8],10):0,e[9]?parseInt(e[9],10):0);if(e[10]&&"Z"!=e[10]){var g="-"==e[11]?-1:1,f=f+60*g*parseInt(e[12],10);e[13]&&(f+=3600*g*parseInt(e[13],10))}d.push(f)}else d.push(0)}},P(ms,{coord:function(b,c){var d=c[c.length-1].o,e=fd(b);(e=/^\s*([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s*$/i.exec(e))?d.push(parseFloat(e[1]),
parseFloat(e[2]),parseFloat(e[3]),0):d.push(0,0,0,0)}})),Fs=P(Y,{coordinates:Cd(ws)}),Vs=P(Y,{href:N(xs)},P(ms,{x:N(Qd),y:N(Qd),w:N(Qd),h:N(Qd)})),Ws=P(Y,{Icon:N(function(b,c){var d=Q({},Vs,b,c);return d?d:null}),heading:N(Qd),hotSpot:N(function(b){var c=b.getAttribute("xunits"),d=b.getAttribute("yunits");return{x:parseFloat(b.getAttribute("x")),qe:us[c],y:parseFloat(b.getAttribute("y")),re:us[d]}}),scale:N(ys)}),Ts=P(Y,{LinearRing:Cd(zs)}),Xs=P(Y,{color:N(vs),scale:N(ys)}),Ys=P(Y,{color:N(vs),width:N(Qd)}),
Is=P(Y,{LineString:Bd(Ds),LinearRing:Bd(Gs),MultiGeometry:Bd(Hs),Point:Bd(Ks),Polygon:Bd(Ls)}),Zs=P(ms,{Track:Bd(Bs)});P(Y,{ExtendedData:Ps,Link:function(b,c){Jd($s,b,c)},address:N(S),description:N(S),name:N(S),open:N(Nd),phoneNumber:N(S),visibility:N(Nd)});var $s=P(Y,{href:N(xs)}),Us=P(Y,{LinearRing:Cd(zs)}),at=P(Y,{Style:N(Ns),key:N(S),styleUrl:N(function(b){var c=fd(b).trim();return b.baseURI?wp(b.baseURI,c).toString():c})});
P(Y,{ExtendedData:Ps,MultiGeometry:N(Hs,"geometry"),LineString:N(Ds,"geometry"),LinearRing:N(Gs,"geometry"),Point:N(Ks,"geometry"),Polygon:N(Ls,"geometry"),Style:N(Ns),StyleMap:function(b,c){var d=Q(void 0,bt,b,c);if(d){var e=c[c.length-1];ea(d)?e.Style=d:"string"===typeof d&&(e.styleUrl=d)}},address:N(S),description:N(S),name:N(S),open:N(Nd),phoneNumber:N(S),styleUrl:N(xs),visibility:N(Nd)},P(ms,{MultiTrack:N(function(b,c){var d=Q([],Zs,b,c);if(d){var e=new yi(null);Bi(e,d);return e}},"geometry"),
Track:N(Bs,"geometry")}));
var ct=P(Y,{color:N(vs),fill:N(Nd),outline:N(Nd)}),Ss=P(Y,{SimpleData:function(b,c){var d=b.getAttribute("name");if(null!==d){var e=S(b);c[c.length-1][d]=e}}}),Os=P(Y,{IconStyle:function(b,c){var d=Q({},Ws,b,c);if(d){var e=c[c.length-1],f="Icon"in d?d.Icon:{},g;g=(g=f.href)?g:"https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png";var h,k,l,n=d.hotSpot;n?(h=[n.x,n.y],k=n.qe,l=n.re):"https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png"===g?(h=ps,l=k="pixels"):/^http:\/\/maps\.(?:google|gstatic)\.com\//.test(g)&&
(h=[.5,0],l=k="fraction");var q,n=f.x,p=f.y;void 0!==n&&void 0!==p&&(q=[n,p]);var r,n=f.w,f=f.h;void 0!==n&&void 0!==f&&(r=[n,f]);var u,f=d.heading;void 0!==f&&(u=f*Math.PI/180);d=d.scale;"https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png"==g&&(r=qs,void 0===d&&(d=.5));h=new Fl({anchor:h,jd:"bottom-left",kd:k,ld:l,crossOrigin:"anonymous",offset:q,pf:"bottom-left",rotation:u,scale:d,size:r,src:g});e.imageStyle=h}},LabelStyle:function(b,c){var d=Q({},Xs,b,c);d&&(c[c.length-1].textStyle=new ls({fill:new Gh({color:"color"in
d?d.color:ns}),scale:d.scale}))},LineStyle:function(b,c){var d=Q({},Ys,b,c);d&&(c[c.length-1].strokeStyle=new Nh({color:"color"in d?d.color:ns,width:"width"in d?d.width:1}))},PolyStyle:function(b,c){var d=Q({},ct,b,c);if(d){var e=c[c.length-1];e.fillStyle=new Gh({color:"color"in d?d.color:ns});var f=d.fill;void 0!==f&&(e.fill=f);d=d.outline;void 0!==d&&(e.outline=d)}}}),bt=P(Y,{Pair:function(b,c){var d=Q({},at,b,c);if(d){var e=d.key;e&&"normal"==e&&((e=d.styleUrl)&&(c[c.length-1]=e),(d=d.Style)&&
(c[c.length-1]=d))}}});function dt(b,c){var d=mh(c),d=[255*(4==d.length?d[3]:1),d[2],d[1],d[0]],e;for(e=0;4>e;++e){var f=parseInt(d[e],10).toString(16);d[e]=1==f.length?"0"+f:f}Vd(b,d.join(""))}function et(b,c,d){Kd({node:b},ft,gt,[c],d)}
function ht(b,c,d){var e={node:b};c.Ya()&&b.setAttribute("id",c.Ya());b=Ua({},c.u);var f=c.i;f&&(f=f.call(c,0))&&(f=ea(f)?f[0]:f,this.a&&(b.Style=f),(f=f.va())&&(b.name=f.va()));f=it[d[d.length-1].node.namespaceURI];b=Id(b,f);Kd(e,jt,Hd,b,d,f);b=d[0];(c=c.J())&&(c=di(c,!0,b));Kd(e,jt,kt,[c],d)}function lt(b,c,d){var e=c.o;b={node:b};b.layout=c.layout;b.stride=c.a;Kd(b,mt,nt,[e],d)}
function ot(b,c,d){var e=c.layout,f=c.o,g=c.c;c=[];var h=0,k,l;k=0;for(l=g.length;k<l;++k){var n=g[k],q=new wi(null);xi(q,e,f.slice(h,n));c.push(q);h=n}e=c.shift();b={node:b};Kd(b,pt,qt,c,d);Kd(b,pt,rt,[e],d)}function st(b,c){Wd(b,c*c)}P(Y,["Document","Placemark"]);P(Y,{Document:O(function(b,c,d){Kd({node:b},tt,ut,c,d,void 0,this)}),Placemark:O(ht)});
var tt=P(Y,{Placemark:O(ht)}),vt={Point:"Point",LineString:"LineString",LinearRing:"LinearRing",Polygon:"Polygon",MultiPoint:"MultiGeometry",MultiLineString:"MultiGeometry",MultiPolygon:"MultiGeometry"},wt=P(Y,["href"],P(ms,["x","y","w","h"])),xt=P(Y,{href:O(Vd)},P(ms,{x:O(Wd),y:O(Wd),w:O(Wd),h:O(Wd)})),yt=P(Y,["scale","heading","Icon","hotSpot"]),At=P(Y,{Icon:O(function(b,c,d){b={node:b};var e=wt[d[d.length-1].node.namespaceURI],f=Id(c,e);Kd(b,xt,Hd,f,d,e);e=wt[ms[0]];f=Id(c,e);Kd(b,xt,zt,f,d,e)}),
heading:O(Wd),hotSpot:O(function(b,c){b.setAttribute("x",c.x);b.setAttribute("y",c.y);b.setAttribute("xunits",c.qe);b.setAttribute("yunits",c.re)}),scale:O(st)}),Bt=P(Y,["color","scale"]),Ct=P(Y,{color:O(dt),scale:O(st)}),Dt=P(Y,["color","width"]),Et=P(Y,{color:O(dt),width:O(Wd)}),ft=P(Y,{LinearRing:O(lt)}),Ft=P(Y,{LineString:O(lt),Point:O(lt),Polygon:O(ot)}),it=P(Y,"name open visibility address phoneNumber description styleUrl Style".split(" ")),jt=P(Y,{MultiGeometry:O(function(b,c,d){b={node:b};
var e=c.aa(),f,g;if("MultiPoint"==e){f=c.o;g=c.layout;c=c.a;var e=[],h,k;h=0;for(k=f.length;h<k;h+=c){var l=new Ci(null);l.K(g,f.slice(h,h+c));e.push(l)}f=e;g=Gt}else if("MultiLineString"==e)f=zi(c),g=Ht;else if("MultiPolygon"==e){f=c.layout;g=c.o;c=c.c;e=[];h=0;var n,q;k=0;for(l=c.length;k<l;++k){var p=c[k].slice(),r=p[p.length-1];if(0!==h)for(n=0,q=p.length;n<q;++n)p[n]-=h;n=new Ji(null);n.K(f,g.slice(h,r),p);e.push(n);h=r}f=e;g=It}Kd(b,Ft,g,f,d)}),LineString:O(lt),LinearRing:O(lt),Point:O(lt),
Polygon:O(ot),Style:O(function(b,c,d){b={node:b};var e={},f=c.c,g=c.b,h=c.g;c=c.va();h instanceof Fl&&(e.IconStyle=h);c&&(e.LabelStyle=c);g&&(e.LineStyle=g);f&&(e.PolyStyle=f);c=Jt[d[d.length-1].node.namespaceURI];e=Id(e,c);Kd(b,Kt,Hd,e,d,c)}),address:O(Vd),description:O(Vd),name:O(Vd),open:O(Ud),phoneNumber:O(Vd),styleUrl:O(Vd),visibility:O(Ud)}),mt=P(Y,{coordinates:O(function(b,c,d){d=d[d.length-1];var e=d.layout;d=d.stride;var f;"XY"==e||"XYM"==e?f=2:("XYZ"==e||"XYZM"==e)&&(f=3);var g,h=c.length,
k="";if(0<h){k+=c[0];for(e=1;e<f;++e)k+=","+c[e];for(g=d;g<h;g+=d)for(k+=" "+c[g],e=1;e<f;++e)k+=","+c[g+e]}Vd(b,k)})}),pt=P(Y,{outerBoundaryIs:O(et),innerBoundaryIs:O(et)}),Lt=P(Y,{color:O(dt)}),Jt=P(Y,["IconStyle","LabelStyle","LineStyle","PolyStyle"]),Kt=P(Y,{IconStyle:O(function(b,c,d){b={node:b};var e={},f=c.ob(),g=c.Jd(),h={href:c.a.l};if(f){h.w=f[0];h.h=f[1];var k=c.Yb(),l=c.Pa();l&&g&&0!==l[0]&&l[1]!==f[1]&&(h.x=l[0],h.y=g[1]-(l[1]+f[1]));k&&0!==k[0]&&k[1]!==f[1]&&(e.hotSpot={x:k[0],qe:"pixels",
y:f[1]-k[1],re:"pixels"})}e.Icon=h;f=c.Ha();1!==f&&(e.scale=f);c=c.s;0!==c&&(e.heading=c);c=yt[d[d.length-1].node.namespaceURI];e=Id(e,c);Kd(b,At,Hd,e,d,c)}),LabelStyle:O(function(b,c,d){b={node:b};var e={},f=c.a;f&&(e.color=f.a);(c=c.Ha())&&1!==c&&(e.scale=c);c=Bt[d[d.length-1].node.namespaceURI];e=Id(e,c);Kd(b,Ct,Hd,e,d,c)}),LineStyle:O(function(b,c,d){b={node:b};var e=Dt[d[d.length-1].node.namespaceURI];c=Id({color:c.a,width:c.b},e);Kd(b,Et,Hd,c,d,e)}),PolyStyle:O(function(b,c,d){Kd({node:b},Lt,
Mt,[c.a],d)})});function zt(b,c,d){return ed(ms[0],"gx:"+d)}function ut(b,c){return ed(c[c.length-1].node.namespaceURI,"Placemark")}function kt(b,c){if(b)return ed(c[c.length-1].node.namespaceURI,vt[b.aa()])}var Mt=Fd("color"),nt=Fd("coordinates"),qt=Fd("innerBoundaryIs"),Gt=Fd("Point"),Ht=Fd("LineString"),gt=Fd("LinearRing"),It=Fd("Polygon"),rt=Fd("outerBoundaryIs");(function(){var b={},c={P:b};(function(d){if("object"===typeof b&&"undefined"!==typeof c)c.P=d();else{var e;"undefined"!==typeof window?e=window:"undefined"!==typeof global?e=global:"undefined"!==typeof self?e=self:e=this;e.hk=d()}})(function(){return function e(b,c,h){function k(n,p){if(!c[n]){if(!b[n]){var r="function"==typeof require&&require;if(!p&&r)return r(n,!0);if(l)return l(n,!0);r=Error("Cannot find module '"+n+"'");throw r.code="MODULE_NOT_FOUND",r;}r=c[n]={P:{}};b[n][0].call(r.P,function(c){var e=
b[n][1][c];return k(e?e:c)},r,r.P,e,b,c,h)}return c[n].P}for(var l="function"==typeof require&&require,n=0;n<h.length;n++)k(h[n]);return k}({1:[function(b,c){function g(b){var c;b&&b.length&&(c=b,b=c.length);b=new Uint8Array(b||0);c&&b.set(c);b.Kf=l.Kf;b.pe=l.pe;b.Gf=l.Gf;b.$f=l.$f;b.ce=l.ce;b.Zf=l.Zf;b.Zd=l.Zd;b.Yf=l.Yf;b.toString=l.toString;b.write=l.write;b.slice=l.slice;b.copy=l.copy;b.sg=!0;return b}function h(b){for(var c=b.length,e=[],f=0,g,h;f<c;f++){g=b.charCodeAt(f);if(55295<g&&57344>g)if(h)if(56320>
g){e.push(239,191,189);h=g;continue}else g=h-55296<<10|g-56320|65536,h=null;else{56319<g||f+1===c?e.push(239,191,189):h=g;continue}else h&&(e.push(239,191,189),h=null);128>g?e.push(g):2048>g?e.push(g>>6|192,g&63|128):65536>g?e.push(g>>12|224,g>>6&63|128,g&63|128):e.push(g>>18|240,g>>12&63|128,g>>6&63|128,g&63|128)}return e}c.P=g;var k=b("ieee754"),l,n,q;l={Kf:function(b){return(this[b]|this[b+1]<<8|this[b+2]<<16)+16777216*this[b+3]},pe:function(b,c){this[c]=b;this[c+1]=b>>>8;this[c+2]=b>>>16;this[c+
3]=b>>>24},Gf:function(b){return(this[b]|this[b+1]<<8|this[b+2]<<16)+(this[b+3]<<24)},ce:function(b){return k.read(this,b,!0,23,4)},Zd:function(b){return k.read(this,b,!0,52,8)},Zf:function(b,c){return k.write(this,b,c,!0,23,4)},Yf:function(b,c){return k.write(this,b,c,!0,52,8)},toString:function(b,c,e){var f=b="";e=Math.min(this.length,e||this.length);for(c=c||0;c<e;c++){var g=this[c];127>=g?(b+=decodeURIComponent(f)+String.fromCharCode(g),f=""):f+="%"+g.toString(16)}return b+=decodeURIComponent(f)},
write:function(b,c){for(var e=b===n?q:h(b),f=0;f<e.length;f++)this[c+f]=e[f]},slice:function(b,c){return this.subarray(b,c)},copy:function(b,c){c=c||0;for(var e=0;e<this.length;e++)b[c+e]=this[e]}};l.$f=l.pe;g.byteLength=function(b){n=b;q=h(b);return q.length};g.isBuffer=function(b){return!(!b||!b.sg)}},{ieee754:3}],2:[function(b,c){(function(g){function h(b){this.Na=k.isBuffer(b)?b:new k(b||0);this.F=0;this.length=this.Na.length}c.P=h;var k=g.Jj||b("./buffer");h.c=0;h.f=1;h.a=2;h.b=5;var l=Math.pow(2,
63);h.prototype={be:function(b,c,e){for(e=e||this.length;this.F<e;){var f=this.ba(),g=this.F;b(f>>3,c,this);this.F===g&&this.ij(f)}return c},Vi:function(){var b=this.Na.ce(this.F);this.F+=4;return b},Ti:function(){var b=this.Na.Zd(this.F);this.F+=8;return b},ba:function(){var b=this.Na,c,e,f,g,h;c=b[this.F++];if(128>c)return c;c=c&127;f=b[this.F++];if(128>f)return c|f<<7;f=(f&127)<<7;g=b[this.F++];if(128>g)return c|f|g<<14;g=(g&127)<<14;h=b[this.F++];if(128>h)return c|f|g|h<<21;e=b[this.F++];c=(c|
f|g|(h&127)<<21)+268435456*(e&127);if(128>e)return c;e=b[this.F++];c+=34359738368*(e&127);if(128>e)return c;e=b[this.F++];c+=4398046511104*(e&127);if(128>e)return c;e=b[this.F++];c+=562949953421312*(e&127);if(128>e)return c;e=b[this.F++];c+=72057594037927936*(e&127);if(128>e)return c;e=b[this.F++];c+=0x7fffffffffffffff*(e&127);if(128>e)return c;throw Error("Expected varint not more than 10 bytes");},aj:function(){var b=this.F,c=this.ba();if(c<l)return c;for(var e=this.F-2;255===this.Na[e];)e--;e<
b&&(e=b);for(var f=c=0;f<e-b+1;f++)var g=~this.Na[b+f]&127,c=c+(4>f?g<<7*f:g*Math.pow(2,7*f));return-c-1},de:function(){var b=this.ba();return 1===b%2?(b+1)/-2:b/2},Ri:function(){return!!this.ba()},ee:function(){var b=this.ba()+this.F,c=this.Na.toString("utf8",this.F,b);this.F=b;return c},ij:function(b){b=b&7;if(b===h.c)for(;127<this.Na[this.F++];);else if(b===h.a)this.F=this.ba()+this.F;else if(b===h.b)this.F+=4;else if(b===h.f)this.F+=8;else throw Error("Unimplemented type: "+b);},finish:function(){this.length=
this.F;this.F=0;return this.Na.slice(0,this.length)}}}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./buffer":1}],3:[function(b,c,g){g.read=function(b,c,e,f,g){var p;p=8*g-f-1;var r=(1<<p)-1,u=r>>1,v=-7;g=e?g-1:0;var z=e?-1:1,x=b[c+g];g+=z;e=x&(1<<-v)-1;x>>=-v;for(v+=p;0<v;e=256*e+b[c+g],g+=z,v-=8);p=e&(1<<-v)-1;e>>=-v;for(v+=f;0<v;p=256*p+b[c+g],g+=z,v-=8);if(0===e)e=1-u;else{if(e===r)return p?NaN:Infinity*(x?-1:1);p+=Math.pow(2,
f);e=e-u}return(x?-1:1)*p*Math.pow(2,e-f)};g.write=function(b,c,e,f,g,p){var r,u=8*p-g-1,v=(1<<u)-1,z=v>>1,x=23===g?Math.pow(2,-24)-Math.pow(2,-77):0;p=f?0:p-1;var C=f?1:-1,H=0>c||0===c&&0>1/c?1:0;c=Math.abs(c);isNaN(c)||Infinity===c?(c=isNaN(c)?1:0,f=v):(f=Math.floor(Math.log(c)/Math.LN2),1>c*(r=Math.pow(2,-f))&&(f--,r*=2),c=1<=f+z?c+x/r:c+x*Math.pow(2,1-z),2<=c*r&&(f++,r/=2),f+z>=v?(c=0,f=v):1<=f+z?(c=(c*r-1)*Math.pow(2,g),f+=z):(c=c*Math.pow(2,z-1)*Math.pow(2,g),f=0));for(;8<=g;b[e+p]=c&255,p+=
C,c/=256,g-=8);f=f<<g|c;for(u+=g;0<u;b[e+p]=f&255,p+=C,f/=256,u-=8);b[e+p-C]|=128*H}},{}]},{},[2])(2)})})();(function(){var b={},c={P:b};(function(d){if("object"===typeof b&&"undefined"!==typeof c)c.P=d();else{var e;"undefined"!==typeof window?e=window:"undefined"!==typeof global?e=global:"undefined"!==typeof self?e=self:e=this;e.lk=d()}})(function(){return function e(b,c,h){function k(n,p){if(!c[n]){if(!b[n]){var r="function"==typeof require&&require;if(!p&&r)return r(n,!0);if(l)return l(n,!0);r=Error("Cannot find module '"+n+"'");throw r.code="MODULE_NOT_FOUND",r;}r=c[n]={P:{}};b[n][0].call(r.P,function(c){var e=
b[n][1][c];return k(e?e:c)},r,r.P,e,b,c,h)}return c[n].P}for(var l="function"==typeof require&&require,n=0;n<h.length;n++)k(h[n]);return k}({1:[function(b,c){c.P.Xj=b("./lib/vectortile.js");c.P.Yj=b("./lib/vectortilefeature.js");c.P.Zj=b("./lib/vectortilelayer.js")},{"./lib/vectortile.js":2,"./lib/vectortilefeature.js":3,"./lib/vectortilelayer.js":4}],2:[function(b,c){function g(b,c,e){3===b&&(b=new h(e,e.ba()+e.F),b.length&&(c[b.name]=b))}var h=b("./vectortilelayer");c.P=function(b,c){this.layers=
b.be(g,{},c)}},{"./vectortilelayer":4}],3:[function(b,c){function g(b,c,e,f,g){this.properties={};this.extent=e;this.type=0;this.Bb=b;this.xe=-1;this.pc=f;this.rc=g;b.be(h,this,c)}function h(b,c,e){if(1==b)c.ak=e.ba();else if(2==b)for(b=e.ba()+e.F;e.F<b;){var f=c.pc[e.ba()],g=c.rc[e.ba()];c.properties[f]=g}else 3==b?c.type=e.ba():4==b&&(c.xe=e.F)}b("point-geometry");c.P=g;g.a=["Unknown","Point","LineString","Polygon"];g.prototype.bbox=function(){var b=this.Bb;b.F=this.xe;for(var c=b.ba()+b.F,e=1,
f=0,g=0,h=0,u=Infinity,v=-Infinity,z=Infinity,x=-Infinity;b.F<c;)if(f||(f=b.ba(),e=f&7,f=f>>3),f--,1===e||2===e)g+=b.de(),h+=b.de(),g<u&&(u=g),g>v&&(v=g),h<z&&(z=h),h>x&&(x=h);else if(7!==e)throw Error("unknown command "+e);return[u,z,v,x]}},{"point-geometry":5}],4:[function(b,c){function g(b,c){this.version=1;this.name=null;this.extent=4096;this.length=0;this.Bb=b;this.pc=[];this.rc=[];this.oc=[];b.be(h,this,c);this.length=this.oc.length}function h(b,c,e){15===b?c.version=e.ba():1===b?c.name=e.ee():
5===b?c.extent=e.ba():2===b?c.oc.push(e.F):3===b?c.pc.push(e.ee()):4===b&&c.rc.push(k(e))}function k(b){for(var c=null,e=b.ba()+b.F;b.F<e;)c=b.ba()>>3,c=1===c?b.ee():2===c?b.Vi():3===c?b.Ti():4===c?b.aj():5===c?b.ba():6===c?b.de():7===c?b.Ri():null;return c}var l=b("./vectortilefeature.js");c.P=g;g.prototype.feature=function(b){if(0>b||b>=this.oc.length)throw Error("feature index out of bounds");this.Bb.F=this.oc[b];b=this.Bb.ba()+this.Bb.F;return new l(this.Bb,b,this.extent,this.pc,this.rc)}},{"./vectortilefeature.js":3}],
5:[function(b,c){function g(b,c){this.x=b;this.y=c}c.P=g;g.prototype={clone:function(){return new g(this.x,this.y)},rotate:function(b){return this.clone().ug(b)},round:function(){return this.clone().vg()},equals:function(b){return this.x===b.x&&this.y===b.y},dist:function(b){return Math.sqrt(this.Lg(b))},Lg:function(b){var c=b.x-this.x;b=b.y-this.y;return c*c+b*b},angle:function(){return Math.atan2(this.y,this.x)},ug:function(b){var c=Math.cos(b);b=Math.sin(b);var e=b*this.x+c*this.y;this.x=c*this.x-
b*this.y;this.y=e;return this},vg:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this}};g.a=function(b){return b instanceof g?b:Array.isArray(b)?new g(b[0],b[1]):b}},{}]},{},[1])(1)})})();function Nt(b,c){c[c.length-1].jc[b.getAttribute("k")]=b.getAttribute("v")}var Ot=[null],Pt=P(Ot,{nd:function(b,c){c[c.length-1].Nb.push(b.getAttribute("ref"))},tag:Nt});
P(Ot,{node:function(b,c){var d=c[0],e=c[c.length-1],f=b.getAttribute("id"),g=[parseFloat(b.getAttribute("lon")),parseFloat(b.getAttribute("lat"))];e.nodes[f]=g;var h=Q({jc:{}},Qt,b,c);Wa(h.jc)||(g=new Ci(g),di(g,!1,d),d=new Xh(g),d.c=f,d.b(),d.ka(h.jc),e.features.push(d))},way:function(b,c){for(var d=c[0],e=b.getAttribute("id"),f=Q({Nb:[],jc:{}},Pt,b,c),g=c[c.length-1],h=[],k=0,l=f.Nb.length;k<l;k++)Tc(h,g.nodes[f.Nb[k]]);f.Nb[0]==f.Nb[f.Nb.length-1]?(k=new Ji(null),k.K("XY",h,[h.length])):(k=new ui(null),
k.K("XY",h));di(k,!1,d);d=new Xh(k);d.c=e;d.b();d.ka(f.jc);g.features.push(d)}});var Qt=P(Ot,{tag:Nt});function Rt(b,c){return Q({},St,b,c)}function Tt(b,c){return Q({},Ut,b,c)}function Vt(b,c){var d=Rt(b,c);if(d){var e=[Td(b.getAttribute("width")),Td(b.getAttribute("height"))];d.size=e;return d}}function Wt(b,c){return Q([],Xt,b,c)}var Yt=[null,"http://www.opengis.net/wms"];P(Yt,{Service:N(function(b,c){return Q({},Zt,b,c)}),Capability:N(function(b,c){return Q({},$t,b,c)})});
var $t=P(Yt,{Request:N(function(b,c){return Q({},au,b,c)}),Exception:N(function(b,c){return Q([],bu,b,c)}),Layer:N(function(b,c){return Q({},cu,b,c)})}),Zt=P(Yt,{Name:N(S),Title:N(S),Abstract:N(S),KeywordList:N(Wt),OnlineResource:N(Vb),ContactInformation:N(function(b,c){return Q({},du,b,c)}),Fees:N(S),AccessConstraints:N(S),LayerLimit:N(Sd),MaxWidth:N(Sd),MaxHeight:N(Sd)}),du=P(Yt,{ContactPersonPrimary:N(function(b,c){return Q({},eu,b,c)}),ContactPosition:N(S),ContactAddress:N(function(b,c){return Q({},
fu,b,c)}),ContactVoiceTelephone:N(S),ContactFacsimileTelephone:N(S),ContactElectronicMailAddress:N(S)}),eu=P(Yt,{ContactPerson:N(S),ContactOrganization:N(S)}),fu=P(Yt,{AddressType:N(S),Address:N(S),City:N(S),StateOrProvince:N(S),PostCode:N(S),Country:N(S)}),bu=P(Yt,{Format:Bd(S)}),cu=P(Yt,{Name:N(S),Title:N(S),Abstract:N(S),KeywordList:N(Wt),CRS:Dd(S),EX_GeographicBoundingBox:N(function(b,c){var d=Q({},gu,b,c);if(d){var e=d.westBoundLongitude,f=d.southBoundLatitude,g=d.eastBoundLongitude,d=d.northBoundLatitude;
return void 0===e||void 0===f||void 0===g||void 0===d?void 0:[e,f,g,d]}}),BoundingBox:Dd(function(b){var c=[Rd(b.getAttribute("minx")),Rd(b.getAttribute("miny")),Rd(b.getAttribute("maxx")),Rd(b.getAttribute("maxy"))],d=[Rd(b.getAttribute("resx")),Rd(b.getAttribute("resy"))];return{crs:b.getAttribute("CRS"),extent:c,res:d}}),Dimension:Dd(function(b){return{name:b.getAttribute("name"),units:b.getAttribute("units"),unitSymbol:b.getAttribute("unitSymbol"),"default":b.getAttribute("default"),multipleValues:Od(b.getAttribute("multipleValues")),
nearestValue:Od(b.getAttribute("nearestValue")),current:Od(b.getAttribute("current")),values:S(b)}}),Attribution:N(function(b,c){return Q({},hu,b,c)}),AuthorityURL:Dd(function(b,c){var d=Rt(b,c);if(d)return d.name=b.getAttribute("name"),d}),Identifier:Dd(S),MetadataURL:Dd(function(b,c){var d=Rt(b,c);if(d)return d.type=b.getAttribute("type"),d}),DataURL:Dd(Rt),FeatureListURL:Dd(Rt),Style:Dd(function(b,c){return Q({},iu,b,c)}),MinScaleDenominator:N(Qd),MaxScaleDenominator:N(Qd),Layer:Dd(function(b,
c){var d=c[c.length-1],e=Q({},cu,b,c);if(e){var f=Od(b.getAttribute("queryable"));void 0===f&&(f=d.queryable);e.queryable=void 0!==f?f:!1;f=Td(b.getAttribute("cascaded"));void 0===f&&(f=d.cascaded);e.cascaded=f;f=Od(b.getAttribute("opaque"));void 0===f&&(f=d.opaque);e.opaque=void 0!==f?f:!1;f=Od(b.getAttribute("noSubsets"));void 0===f&&(f=d.noSubsets);e.noSubsets=void 0!==f?f:!1;(f=Rd(b.getAttribute("fixedWidth")))||(f=d.fixedWidth);e.fixedWidth=f;(f=Rd(b.getAttribute("fixedHeight")))||(f=d.fixedHeight);
e.fixedHeight=f;["Style","CRS","AuthorityURL"].forEach(function(b){b in d&&(e[b]=(e[b]||[]).concat(d[b]))});"EX_GeographicBoundingBox BoundingBox Dimension Attribution MinScaleDenominator MaxScaleDenominator".split(" ").forEach(function(b){b in e||(e[b]=d[b])});return e}})}),hu=P(Yt,{Title:N(S),OnlineResource:N(Vb),LogoURL:N(Vt)}),gu=P(Yt,{westBoundLongitude:N(Qd),eastBoundLongitude:N(Qd),southBoundLatitude:N(Qd),northBoundLatitude:N(Qd)}),au=P(Yt,{GetCapabilities:N(Tt),GetMap:N(Tt),GetFeatureInfo:N(Tt)}),
Ut=P(Yt,{Format:Dd(S),DCPType:Dd(function(b,c){return Q({},ju,b,c)})}),ju=P(Yt,{HTTP:N(function(b,c){return Q({},ku,b,c)})}),ku=P(Yt,{Get:N(Rt),Post:N(Rt)}),iu=P(Yt,{Name:N(S),Title:N(S),Abstract:N(S),LegendURL:Dd(Vt),StyleSheetURL:N(Rt),StyleURL:N(Rt)}),St=P(Yt,{Format:N(S),OnlineResource:N(Vb)}),Xt=P(Yt,{Keyword:Bd(S)});(function(){var b={},c={P:b};(function(d){if("object"===typeof b&&"undefined"!==typeof c)c.P=d();else{var e;"undefined"!==typeof window?e=window:"undefined"!==typeof global?e=global:"undefined"!==typeof self?e=self:e=this;e.ik=d()}})(function(){return function e(b,c,h){function k(n,p){if(!c[n]){if(!b[n]){var r="function"==typeof require&&require;if(!p&&r)return r(n,!0);if(l)return l(n,!0);r=Error("Cannot find module '"+n+"'");throw r.code="MODULE_NOT_FOUND",r;}r=c[n]={P:{}};b[n][0].call(r.P,function(c){var e=
b[n][1][c];return k(e?e:c)},r,r.P,e,b,c,h)}return c[n].P}for(var l="function"==typeof require&&require,n=0;n<h.length;n++)k(h[n]);return k}({1:[function(b,c,g){b=b("./processor");g.Vj=b},{"./processor":2}],2:[function(b,c){function g(b){return function(c){var e=c.buffers,f=c.meta,g=c.width,h=c.height,k=e.length,l=e[0].byteLength,C;if(c.imageOps){l=Array(k);for(C=0;C<k;++C)l[C]=new ImageData(new Uint8ClampedArray(e[C]),g,h);g=b(l,f).data}else{g=new Uint8ClampedArray(l);h=Array(k);c=Array(k);for(C=
0;C<k;++C)h[C]=new Uint8ClampedArray(e[C]),c[C]=[0,0,0,0];for(e=0;e<l;e+=4){for(C=0;C<k;++C){var H=h[C];c[C][0]=H[e];c[C][1]=H[e+1];c[C][2]=H[e+2];c[C][3]=H[e+3]}C=b(c,f);g[e]=C[0];g[e+1]=C[1];g[e+2]=C[2];g[e+3]=C[3]}}return g.buffer}}function h(b,c){var e=Object.keys(b.Th||{}).map(function(c){return"var "+c+" = "+b.Th[c].toString()+";"}).concat(["var __minion__ = ("+g.toString()+")(",b.Di.toString(),");",'self.addEventListener("message", function(__event__) {',"var buffer = __minion__(__event__.data);",
"self.postMessage({buffer: buffer, meta: __event__.data.meta}, [buffer]);","});"]),e=URL.createObjectURL(new Blob(e,{type:"text/javascript"})),e=new Worker(e);e.addEventListener("message",c);return e}function k(b,c){var e=g(b.Di);return{postMessage:function(b){setTimeout(function(){c({data:{buffer:e(b),Ud:b.Ud}})},0)}}}function l(b){this.fd=!!b.gk;var c;0===b.nj?c=0:this.fd?c=1:c=b.nj||1;var e=[];if(c)for(var f=0;f<c;++f)e[f]=h(b,this.Ae.bind(this,f));else e[0]=k(b,this.Ae.bind(this,0));this.sc=e;
this.Be=[];this.qc=0;this.Ab={};this.gd=null}l.prototype.qg=function(){if(0===this.qc&&0<this.Be.length){var b=this.gd=this.Be.shift(),c=b.Lb[0].width,e=b.Lb[0].height,f=b.Lb.map(function(b){return b.data.buffer}),g=this.sc.length;this.qc=g;if(1===g)this.sc[0].postMessage({buffers:f,meta:b.Ud,imageOps:this.fd,width:c,height:e},f);else for(var h=4*Math.ceil(b.Lb[0].data.length/4/g),k=0;k<g;++k){for(var l=k*h,C=[],H=0,E=f.length;H<E;++H)C.push(f[k].slice(l,l+h));this.sc[k].postMessage({buffers:C,meta:b.Ud,
imageOps:this.fd,width:c,height:e},C)}}};l.prototype.Ae=function(b,c){this.$j||(this.Ab[b]=c.data,--this.qc,0===this.qc&&this.tg())};l.prototype.tg=function(){var b=this.gd,c=this.sc.length,e,f;if(1===c)e=new Uint8ClampedArray(this.Ab[0].buffer),f=this.Ab[0].meta;else{var g=b.Lb[0].data.length;e=new Uint8ClampedArray(g);f=Array(g);for(var g=4*Math.ceil(g/4/c),h=0;h<c;++h){var k=h*g;e.set(new Uint8ClampedArray(this.Ab[h].buffer),k);f[h]=this.Ab[h].meta}}this.gd=null;this.Ab={};b.dk(null,new ImageData(e,
b.Lb[0].width,b.Lb[0].height),f);this.qg()};c.P=l},{}]},{},[1])(1)})})();function lu(b){function c(b){b.each(function(b){function f(){var b=d3.mouse(this)[0],b=v.invert(b);c.highlight(b)}function g(){c.Oe()}if(void 0===b)d3.select(this).selectAll("svg").remove();else{E=Math.max(this.clientWidth-e.right-e.left,0);v=d3.scale.linear().range([0,E]);H=Math.max(this.clientHeight-e.top-e.bottom,0);z=d3.scale.linear().range([H,0]);var k=d3.svg.axis().scale(v).orient("bottom"),l=d3.svg.axis().scale(z).orient("left"),q=d3.svg.area().x(function(b){return v(h.dist(b))}).y0(H).y1(function(b){return z(h.z(b))}),
M=d3.svg.line().x(function(b){return v(h.dist(b))}).y(function(b){return z(h.z(b))});u=d3.select(this).selectAll("svg").data([b]);var ja=u.enter().append("svg");void 0!==n&&ja.append("defs").append("style").attr("type","text/css").text(n);ja=ja.append("g");c.Qf([]);ja.style("font","11px Arial");ja.append("path").attr("class","area").style("fill","rgba(222, 222, 222, 0.5)");ja.append("path").attr("class","line").style("stroke","#F00").style("fill","none");ja.insert("g",":first-child").attr("class",
"grid-y");d||(ja.append("g").attr("class","x axis").attr("transform","translate(0,"+H+")"),ja.append("text").attr("class","x label").attr("text-anchor","end").attr("x",E-4).attr("y",H-4),ja.append("g").attr("class","y axis"),ja.append("text").attr("class","y label").attr("text-anchor","end").attr("y",6).attr("dy",".75em").attr("transform","rotate(-90)").style("fill","grey").text("elevation (m)"),ja.append("g").attr("class","metas").attr("transform","translate("+(E+3)+", 0)"));ja.append("g").attr("class",
"pois");var Cb=ja.append("g").attr("class","y grid-hover");Cb.append("svg:line").attr("stroke-dasharray","5,5");Cb.append("text");Cb=ja.append("g").attr("class","x grid-hover");Cb.append("svg:line").attr("stroke-dasharray","5,5");Cb.append("text");ja.append("rect").attr("class","overlay").attr("width",E).attr("height",H).style("fill","none").style("pointer-events","all");u.attr("width",E+e.left+e.right).attr("height",H+e.top+e.bottom);C=u.select("g").attr("transform","translate("+e.left+","+e.top+
")");F=d3.extent(b,function(b){return h.dist(b)});v.domain(F);b=d3.extent(b,function(b){return h.z(b)});z.domain(b);void 0!==x?x(v,z,E,H):(ja=.1*(b[1]-b[0]),z.domain([b[0]-ja,b[1]+ja]));C.select(".area").transition().attr("d",q);C.select(".line").transition().attr("d",M);2E3<F[1]?(D=1E3,R="km"):(D=1,R="m");d||(k.tickFormat(function(b){return p.xtick(b/D,R)}),r&&k.tickValues([0,v.domain()[1]]),l.tickFormat(function(b){return p.ytick(b,"m")}),C.select(".x.axis").transition().call(k),C.select(".x.label").text("distance ("+
R+")").style("fill","grey").style("shape-rendering","crispEdges"),10>H/15&&l.ticks(H/15),C.select(".y.axis").transition().call(l));C.select(".grid-y").transition().call(l.tickSize(-E,0).tickFormat("")).selectAll(".tick line").style("stroke","#ccc").style("opacity",.7);C.selectAll(".axis").selectAll("path, line").style("fill","none").style("stroke","#000").style("shape-rendering","crispEdges");C.selectAll(".grid-hover line").style("stroke","#222").style("opacity",.8);C.select(".overlay").on("mouseout",
g).on("mousemove",f)}})}var d=void 0!==b.light?b.light:!1,e=d?{top:0,right:0,bottom:0,left:0}:{top:10,right:20,bottom:30,left:40},f=void 0!==b.hoverCallback?b.hoverCallback:ca,g=void 0!==b.outCallback?b.outCallback:ca,h=b.elevationExtractor,k=d3.bisector(function(b){return h.dist(b)}).left,l=b.poiExtractor,n=b.styleDefs,q=void 0!==b.poiLabelAngle?b.poiLabelAngle:-60,p={xhover:function(b,c){return parseFloat(b.toPrecision(3))+" "+c},yhover:function(b){return Math.round(b)+" m"},xtick:function(b){return b},
ytick:function(b){return b}};void 0!==b.formatter&&fc(p,b.formatter);var r=void 0!==b.lightXAxis?b.lightXAxis:!1,u,v,z,x=b.scaleModifier,C,H,E,D,R,F;c.Oe=function(){C.selectAll(".grid-hover").style("display","none");g.call(null)};c.highlight=function(b){var c=u.datum();b=k(c,b);if(!(b>=c.length)){c=c[b];b=h.z(c);var d=h.dist(c);C.select(".x.grid-hover").style("display","inline").select("line").attr("x1",v(d)).attr("y1",H).attr("x2",v(d)).attr("y2",z(b));C.select(".y.grid-hover").style("display","inline").select("line").attr("x1",
v(0)).attr("y1",z(b)).attr("x2",E).attr("y2",z(b));var e=d>F[1]/2,g=v(d),g=g+(e?-10:10);C.select(".x.grid-hover text").text(p.xhover(d/D,R)).style("text-anchor",e?"end":"start").attr("transform","translate("+g+","+(H-10)+")");C.select(".y.grid-hover text").text(p.yhover(b,"m")).style("text-anchor",e?"end":"start").attr("transform","translate("+g+","+(z(b)-10)+")");f.call(null,c,d/D,R,b,"m")}};c.Qf=function(b){b=void 0!==b?b:[];var c=u.select("g"),e=u.datum();b=c.select(".pois").selectAll(".poi").data(b,
function(b){var c=k(e,Math.round(10*l.dist(b))/10,1);if(c=e[c])c=h.z(c),l.z(b,c);return l.id(b)});c=b.enter().append("g").attr("class","poi");c.append("text").attr("x",d?0:9).attr("dy",".35em").attr("text-anchor",d?"middle":"start");c.append("line").style("shape-rendering","crispEdges");b.style("opacity",0).transition().duration(1E3).delay(100).style("opacity",1);b.selectAll("text").attr("transform",function(b){return d?["translate(",v(l.dist(b)),",",z(l.z(b))-10,")"].join(""):["translate(",v(l.dist(b)),
",",z(l.z(b))-20,") rotate(",q,")"].join("")}).text(function(b){return l.sort(b)+(d?"":" - "+l.title(b))});b.selectAll("line").style("stroke","grey").attr("x1",function(b){return v(l.dist(b))}).attr("y1",function(){return z(z.domain()[0])}).attr("x2",function(b){return v(l.dist(b))}).attr("y2",function(b){return z(l.z(b))});b.exit().remove()};return c}sa("ngeo.profile",lu);A.directive("ngeoControl",function(){return{restrict:"A",link:function(b,c,d){var e=b.$eval(d.ngeoControl);b=b.$eval(d.ngeoControlMap);e.A=Ac(c[0]);b.A.push(e)}}});sa("ngeo.DesktopGeolocationEventType",{ERROR:"desktop-geolocation-error"});A.directive("ngeoDesktopGeolocation",function(){return{restrict:"A",scope:{getDesktopMapFn:"&ngeoDesktopGeolocationMap",getDesktopGeolocationOptionsFn:"&ngeoDesktopGeolocationOptions"},controller:"NgeoDesktopGeolocationController",controllerAs:"ctrl"}});
function mu(b,c,d,e){c.on("click",this.toggle.bind(this));this.c=c=b.getDesktopMapFn();var f=b.getDesktopGeolocationOptionsFn()||{};this.i=b;this.b=Mj(e);this.da=new Hr({projection:U(c).X()});this.da.on("error",function(c){nu(this);b.$emit("desktop-geolocation-error",c)},this);this.f=new Xh;f.positionFeatureStyle&&$h(this.f,f.positionFeatureStyle);this.fb=new Xh;f.accuracyFeatureStyle&&$h(this.fb,f.accuracyFeatureStyle);this.g=f.zoom;this.a=!1;I(this.da,L("accuracyGeometry"),function(){Yh(this.fb,
this.da.get("accuracyGeometry")||null)},this);I(this.da,L("position"),function(b){this.ie(b)},this);d(this.da)}sa("ngeo.DesktopGeolocationController",mu);mu.$inject=["$scope","$element","ngeoDecorateGeolocation","ngeoFeatureOverlayMgr"];mu.prototype.toggle=function(){this.a?nu(this):(this.b.ia(this.f),this.b.ia(this.fb),Gr(this.da,!0),this.a=!0)};mu.prototype.toggle=mu.prototype.toggle;function nu(b){b.b.clear();b.a=!1}
mu.prototype.ie=function(){var b=this.da.get("position");if(void 0===b)nu(this),this.i.$emit("desktop-geolocation-error",null);else{var c=new Ci(b);Yh(this.f,c);cm(U(this.c),b);void 0!==this.g&&fm(U(this.c),this.g);Gr(this.da,!1)}};A.controller("NgeoDesktopGeolocationController",mu);function ou(b){return{restrict:"A",scope:{fileContent:"=ngeoFilereader",supported:"=?ngeoFilereaderSupported"},link:function(c,d){var e="FileReader"in b;(c.supported=e)&&d.bind("change",function(d){var e=new b.FileReader;e.onload=function(b){c.$apply(function(){c.fileContent=b.target.result})};e.readAsText(d.target.files[0])})}}}ou.$inject=["$window"];A.directive("ngeoFilereader",ou);A.directive("ngeoProfile",function(){return{restrict:"A",link:function(b,c,d){function e(){void 0!==h&&(g.datum(k).call(h),void 0!==k&&h.Qf(l))}var f=d.ngeoProfileOptions,g=d3.select(c[0]),h,k,l;b.$watchCollection(f,function(c){c=dc(c);if(void 0!==c){if(void 0!==c.hoverCallback){var d=c.hoverCallback;c.hoverCallback=function(){d.apply(null,arguments);b.$applyAsync()}}if(void 0!==c.outCallback){var f=c.outCallback;c.outCallback=function(){f();b.$applyAsync()}}h=lu(c);e()}});b.$watch(d.ngeoProfile,
function(b){k=b;e()});b.$watch(d.ngeoProfilePois,function(b){l=b;e()});b.$watch(d.ngeoProfileHighlight,function(b){void 0!==b&&(0<b?h.highlight(b):h.Oe())})}}});A.directive("ngeoRecenter",function(){return{restrict:"A",link:function(b,c,d){function e(c){var d=c.attr("ngeo-extent");if(void 0!==d){var e=Sm(f);bm(U(f),b.$eval(d),e)}c=c.attr("ngeo-zoom");void 0!==c&&fm(U(f),b.$eval(c))}var f=b.$eval(d.ngeoRecenterMap);c.on("click",function(b){e(angular.element(b.target))});c.on("change",function(b){e(angular.element(b.target.options[b.target.selectedIndex]))})}}});A.value("ngeoScaleselectorTemplateUrl",function(b,c){var d=c.ngeoScaleselectorTemplateurl;return void 0!==d?d:"ngeo/scaleselector.html"});function pu(b){return{restrict:"A",scope:!0,controller:"NgeoScaleselectorController",templateUrl:b}}pu.$inject=["ngeoScaleselectorTemplateUrl"];A.directive("ngeoScaleselector",pu);
function qu(b,c,d){this.scales=b.$eval(d.ngeoScaleselector);c=Object.keys(this.scales).map(Number);c.sort();this.zoomLevels=c;this.a=b.$eval(d.ngeoScaleselectorMap);d=b.$eval(d.ngeoScaleselectorOptions);void 0===d?d={dropup:!1}:void 0===d.dropup&&(d.dropup=!1);this.options=d;this.c=b;this.b=null;this.currentScale=void 0;null!==U(this.a)&&(d=am(U(this.a)),void 0!==d&&(this.currentScale=this.Ha(d)));I(this.a,L("view"),this.g,this);ru(this);b.scaleselectorCtrl=this}
sa("ngeo.ScaleselectorController",qu);qu.$inject=["$scope","$element","$attrs"];qu.prototype.Ha=function(b){return this.scales[b.toString()]};qu.prototype.getScale=qu.prototype.Ha;qu.prototype.Eg=function(b){fm(U(this.a),b)};qu.prototype.changeZoom=qu.prototype.Eg;qu.prototype.f=function(){var b=U(this.a),c=this.scales[am(b).toString()];this.c.$applyAsync(function(){this.currentScale=c}.bind(this))};qu.prototype.g=function(){ru(this)};
function ru(b){null!==b.b&&G(b.b);var c=U(b.a);b.b=I(c,L("resolution"),b.f,b)}A.controller("NgeoScaleselectorController",qu);function su(b){db.call(this);this.b=b;this.a={}}y(su,db);var tu=[];su.prototype.Aa=function(b,c,d,e){ea(c)||(c&&(tu[0]=c.toString()),c=tu);for(var f=0;f<c.length;f++){var g=So(b,c[f],d||this.handleEvent,e||!1,this.b||this);if(!g)break;this.a[g.key]=g}return this};
su.prototype.Qb=function(b,c,d,e,f){if(ea(c))for(var g=0;g<c.length;g++)this.Qb(b,c[g],d,e,f);else d=d||this.handleEvent,f=f||this.b||this,d=To(d),e=!!e,c=b&&b[Go]?Oo(b.g,String(c),d,e,f):b?(b=Uo(b))?Oo(b,c,d,e,f):null:null,c&&(Zo(c),delete this.a[c.key]);return this};function uu(b){$b(b.a,function(b,d){this.a.hasOwnProperty(d)&&Zo(b)},b);b.a={}}su.prototype.L=function(){su.U.L.call(this);uu(this)};su.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented");};function vu(){db.call(this);this.g=new Ko(this);this.V=this;this.N=null}y(vu,db);vu.prototype[Go]=!0;m=vu.prototype;m.removeEventListener=function(b,c,d,e){Yo(this,b,c,d,e)};
m.B=function(b){var c,d=this.N;if(d)for(c=[];d;d=d.N)c.push(d);var d=this.V,e=b.type||b;if(ga(b))b=new Do(b,d);else if(b instanceof Do)b.target=b.target||d;else{var f=b;b=new Do(e,d);fc(b,f)}var f=!0,g;if(c)for(var h=c.length-1;!b.f&&0<=h;h--)g=b.a=c[h],f=wu(g,e,!0,b)&&f;b.f||(g=b.a=d,f=wu(g,e,!0,b)&&f,b.f||(f=wu(g,e,!1,b)&&f));if(c)for(h=0;!b.f&&h<c.length;h++)g=b.a=c[h],f=wu(g,e,!1,b)&&f;return f};
m.L=function(){vu.U.L.call(this);if(this.g){var b=this.g,c=0,d;for(d in b.listeners){for(var e=b.listeners[d],f=0;f<e.length;f++)++c,Jo(e[f]);delete b.listeners[d];b.a--}}this.N=null};m.Aa=function(b,c,d,e){return Lo(this.g,String(b),c,d,e)};m.Qb=function(b,c,d,e){return this.g.remove(String(b),c,d,e)};
function wu(b,c,d,e){c=b.g.listeners[String(c)];if(!c)return!0;c=c.concat();for(var f=!0,g=0;g<c.length;++g){var h=c[g];if(h&&!h.Ob&&h.wc==d){var k=h.listener,l=h.Jc||h.src;h.hb&&No(b.g,h);f=!1!==k.call(l,e)&&f}}return f&&0!=e.Of};function xu(b,c,d){vu.call(this);this.target=b;this.handle=c||b;this.l=d||new Rj(NaN,NaN,NaN,NaN);this.i=zc(b);this.a=new su(this);gb(this,qa(hb,this.a));this.c=this.f=this.v=this.s=this.screenY=this.screenX=this.clientY=this.clientX=0;this.b=!1;this.j=0;So(this.handle,["touchstart","mousedown"],this.ke,!1,this)}y(xu,vu);var yu=t.document&&t.document.documentElement&&!!t.document.documentElement.setCapture;m=xu.prototype;
m.L=function(){xu.U.L.call(this);Yo(this.handle,["touchstart","mousedown"],this.ke,!1,this);uu(this.a);yu&&this.i.releaseCapture();this.handle=this.target=null};
m.ke=function(b){var c="mousedown"==b.type;if(this.b||c&&(!(Ao?0==b.b.button:"click"==b.type||b.b.button&Fo[0])||kc&&lc&&b.c))this.B("earlycancel");else{if(0==this.j)if(this.B(new zu("start",this,b.clientX,b.clientY)))this.b=!0,b.preventDefault();else return;else b.preventDefault();var c=this.i,d=c.documentElement,e=!yu;this.a.Aa(c,["touchmove","mousemove"],this.th,e);this.a.Aa(c,["touchend","mouseup"],this.zc,e);yu?(d.setCapture(!1),this.a.Aa(d,"losecapture",this.zc)):this.a.Aa(c?c.parentWindow||
c.defaultView:window,"blur",this.zc);this.A&&this.a.Aa(this.A,"scroll",this.Ci,e);this.clientX=this.s=b.clientX;this.clientY=this.v=b.clientY;this.screenX=b.screenX;this.screenY=b.screenY;this.f=this.target.offsetLeft;this.c=this.target.offsetTop;this.u=Nc(xc(this.i))}};m.zc=function(b){uu(this.a);yu&&this.i.releaseCapture();this.b?(this.b=!1,this.B(new zu("end",this,b.clientX,b.clientY,0,Au(this,this.f),Bu(this,this.c)))):this.B("earlycancel")};
m.th=function(b){var c=1*(b.clientX-this.clientX),d=b.clientY-this.clientY;this.clientX=b.clientX;this.clientY=b.clientY;this.screenX=b.screenX;this.screenY=b.screenY;if(!this.b){var e=this.s-this.clientX,f=this.v-this.clientY;if(e*e+f*f>this.j)if(this.B(new zu("start",this,b.clientX,b.clientY)))this.b=!0;else{this.Z||this.zc(b);return}}d=Cu(this,c,d);c=d.x;d=d.y;this.b&&this.B(new zu("beforedrag",this,b.clientX,b.clientY,0,c,d))&&(Du(this,b,c,d),b.preventDefault())};
function Cu(b,c,d){var e=Nc(xc(b.i));c+=e.x-b.u.x;d+=e.y-b.u.y;b.u=e;b.f+=c;b.c+=d;return new vc(Au(b,b.f),Bu(b,b.c))}m.Ci=function(b){var c=Cu(this,0,0);b.clientX=this.clientX;b.clientY=this.clientY;Du(this,b,c.x,c.y)};function Du(b,c,d,e){b.target.style.left=d+"px";b.target.style.top=e+"px";b.B(new zu("drag",b,c.clientX,c.clientY,0,d,e))}function Au(b,c){var d=b.l,e=isNaN(d.left)?null:d.left,d=isNaN(d.width)?0:d.width;return Math.min(null!=e?e+d:Infinity,Math.max(null!=e?e:-Infinity,c))}
function Bu(b,c){var d=b.l,e=isNaN(d.top)?null:d.top,d=isNaN(d.height)?0:d.height;return Math.min(null!=e?e+d:Infinity,Math.max(null!=e?e:-Infinity,c))}function zu(b,c,d,e,f,g,h){Do.call(this,b);this.clientX=d;this.clientY=e;this.left=ba(g)?g:c.f;this.top=ba(h)?h:c.c}y(zu,Do);function Eu(){vu.call(this);this.f=[];this.i=[];this.s={};this.j=new su(this);this.I=!1}y(Eu,vu);function Fu(b,c){c.b=0;c.a=void 0;b.f.push(c)}function Gu(b,c){b.Ve=c}function Hu(b){if(!b.I){for(var c=0,d=b.f.length;c<d;c++)for(var e=Kc(b.f[c]),f=0,g=e.length;f<g;++f){var h=b,k=e[f],l=h.Ve(k),n=w(l);h.s[n]=k;h.C&&(h.j.Aa(k,"mouseover",h.gh),h.j.Aa(k,"mouseout",h.fh));h.A&&(h.j.Aa(l,"mouseover",h.eh),h.j.Aa(l,"mouseout",h.dh));h.i.push(k);h.j.Aa(l,["mousedown","touchstart"],h.zh)}b.I=!0}}m=Eu.prototype;
m.L=function(){this.j.Db();for(var b=0,c=this.f.length;b<c;b++){var d=this.f[b];d.b=void 0;d.a=void 0}this.f.length=0;this.i.length=0;this.s=null;Iu(this);Eu.U.L.call(this)};function Ju(b,c){for(var d=0,e=b.f.length;d<e;d++){var f=b.f[d];f.Eb=Zj(f)}d=0;for(e=b.i.length;d<e;d++)f=b.i[d],f!=c&&(f.Eb=Zj(f))}
m.zh=function(b){var c=w(b.a);this.a=this.s[c];a:{for(var c=this.a,d=c.cloneNode(!0),e=c.getElementsByTagName("TEXTAREA"),f=d.getElementsByTagName("TEXTAREA"),g=0;g<e.length;g++)f[g].value=e[g].value;switch(c.tagName){case "TR":c=Fc("TABLE",null,Fc("TBODY",null,d));break a;case "TD":case "TH":c=Fc("TABLE",null,Fc("TBODY",null,Fc("TR",null,d)));break a;case "TEXTAREA":d.value=c.value;default:c=d}}this.b=c;this.D&&wk(this.b,this.D||[]);this.b.style.margin="0";this.b.style.position="absolute";this.b.style.visibility=
"hidden";zc(this.a).body.appendChild(this.b);var d=Vj(this.a),c=this.b,e=d,h,d=Vj(c);e instanceof vc&&(h=e.y,e=e.x);f=c.offsetLeft+(e-d.x);f instanceof vc?(e=f.x,h=f.y):(e=f,h=c.offsetTop+(Number(h)-d.y));c.style.left=Wj(e);c.style.top=Wj(h);this.c=new xu(this.b);this.c.j=Math.pow(0,2);So(this.c,"start",this.ih,!1,this);So(this.c,"end",this.bh,!1,this);So(this.c,"earlycancel",this.rd,!1,this);this.c.ke(b)};
m.ih=function(b){this.B(new Ku("beforedragstart",0,0,this.a))?(this.v=this.a.parentNode,this.O=Lc(this.a),this.l=this.v,this.u?wk(this.a,this.u||[]):this.a.style.visibility="hidden",b=Xj(this.b),this.b.c=b.width/2,this.b.f=b.height/2,this.b.style.visibility="",this.a.style.display="none",Ju(this,this.a),this.a.style.display="",So(this.c,"drag",this.hh,!1,this),this.B(new Ku("dragstart",0,0,this.a))):(b.preventDefault(),this.rd())};
m.hh=function(){var b=Vj(this.b),b=new vc(b.x+this.b.c,b.y+this.b.f),c;a:{c=null;if("none"!=this.a.style.display){c=this.a.parentNode;var d=Zj(c);if(Lu(b,d))break a}for(var d=0,e=this.f.length;d<e;d++){var f=this.f[d];if(f!=c&&Lu(b,f.Eb)){c=f;break a}}c=null}var g;if(c){if(null==c)throw Error("getHoverNextItem_ called with null hoverList.");var h,k,d=!1,e=void 0;switch(c.b){case 0:g=b.y;h=Mu;k=Nu;break;case 4:d=!0;case 2:g=b.x;h=Ou;k=Nu;break;case 5:d=!0;case 3:g=b.x,h=Pu,k=Qu}for(var f=null,l,n=
Kc(c),q=0,p=n.length;q<p;q++){var r=n[q];if(r!=this.a){var u=h(r.Eb);if(d){var v=Ru(r,b);ba(e)||(e=v);k(g,u)&&(void 0==l||v<e||v==e&&(k(u,l)||u==l))&&(f=r,l=u);v<e&&(e=v)}else k(g,u)&&(void 0==l||k(u,l))&&(f=r,l=u)}}g=null!==f&&Ru(f,b)>e?null:f}else g=null;if(!this.B(new Ku("beforedragmove",0,0,this.a,0,0,0,c,g)))return!1;if(c)this.a.parentNode==c&&Lc(this.a)==g||c.insertBefore(this.a,g),this.a.style.display="",c.a&&vk(c,c.a);else for(this.a.style.display="none",h=0,k=this.f.length;h<k;h++)l=this.f[h],
l.a&&xk(l,l.a);c!=this.l&&(this.l=c,Ju(this,this.a));this.B(new Ku("dragmove",0,0,this.a,0,0,0,c,g));return!1};m.rd=function(){Iu(this);this.c=this.b=this.O=this.v=this.l=this.a=null;for(var b=0,c=this.f.length;b<c;b++)this.f[b].Eb=null;b=0;for(c=this.i.length;b<c;b++)this.i[b].Eb=null};m.bh=function(){if(!this.B(new Ku("beforedragend",0,0,this.a)))return!1;Iu(this);this.B(new Ku("dragend",0,0,this.a));this.rd();return!0};
function Iu(b){hb(b.c);b.b&&Jc(b.b);b.a&&"none"==b.a.style.display&&(b.v.insertBefore(b.a,b.O),b.a.style.display="");b.u&&b.a?yk(b.a,b.u||[]):b.a&&(b.a.style.visibility="");for(var c=0,d=b.f.length;c<d;c++){var e=b.f[c];e.a&&xk(e,e.a)}}m.Ve=function(b){return b};m.gh=function(b){wk(b.a,this.C||[])};m.fh=function(b){yk(b.a,this.C||[])};m.eh=function(b){wk(b.a,this.A||[])};m.dh=function(b){yk(b.a,this.A||[])};function Lu(b,c){return b.x>c.left&&b.x<c.left+c.width&&b.y>c.top&&b.y<c.top+c.height}
function Ru(b,c){var d=b.Eb;return Math.abs(c.y-(d.top+(d.height-1)/2))}function Mu(b){return b.top+b.height-1}function Ou(b){return b.left+b.width-1}function Pu(b){return b.left||0}function Nu(b,c){return b<c}function Qu(b,c){return b>c}function Ku(b,c,d,e,f,g,h,k,l){Do.call(this,b);this.Hg=e;this.Jh=k;this.Kh=l}y(Ku,Do);function Su(){return{restrict:"A",link:function(b,c,d){function e(){for(var d=c.children(),e=0;e<d.length;++e)angular.element(d[e]).data("idx",e);null!==h&&h.Db();h=new Eu;Fu(h,c[0]);Gu(h,function(b){return Bc(g.handleClassName,b)});void 0!==g.draggerClassName&&(h.D=va(g.draggerClassName).split(" "));var n=-1,q=null;So(h,"dragstart",function(){n=-1;q=null});So(h,"dragmove",function(b){var c=b.Kh;n=null===c?-1:angular.element(c).data("idx");q=b.Jh});So(h,"dragend",function(c){var d=angular.element(c.Hg).data("idx");
-1!=n?n!=d&&(n>d&&n--,b.$apply(function(){f.splice(n,0,f.splice(d,1)[0])})):null!==q&&b.$apply(function(){f.push(f.splice(d,1)[0])})});Hu(h)}var f=b.$eval(d.ngeoSortable),g=function(b){void 0===b?b={handleClassName:"handle"}:void 0===b.handleClassName&&(b.handleClassName="handle");return b}(b.$eval(d.ngeoSortableOptions)),h=null;b.$watchCollection(function(){return f},function(){e()})}}}Su.$inject=["$timeout"];A.directive("ngeoSortable",Su);function Tu(b){Gm.call(this,{$a:Uu,handleEvent:Vu,ab:Wu});this.s=null;this.v=void 0!==b.source?b.source:null;this.j=!1;this.c=this.a=null;this.l=new rj({source:new Cj({mc:!1,wrapX:!1}),style:void 0!==b.style?b.style:ar()});I(this,L("active"),this.C,this)}y(Tu,Gm);sa("ngeo.interaction.DrawAzimut",Tu);function Uu(b){this.s=b.pixel;return!0}
function Wu(b){var c=this.s,d=b.pixel,e=c[0]-d[0],c=c[1]-d[1],d=!0;4>=e*e+c*c&&(Xu(this,b),this.j?(b=Yu(this),null!==this.v&&this.v.ia(b),this.B(new Sq("drawend",b))):(e=b.coordinate,this.j=!0,b=new ui([e.slice(),e.slice()]),e=new Qq(e,0),b=new Op([b,e]),this.a=new Xh,Yh(this.a,b),Zu(this),this.B(new Sq("drawstart",this.a))),d=!1);return d}
function Vu(b){var c;c=b.map;if(Mc(document,c.a)&&"none"!=c.a.style.display){var d=Sm(c);c=!d||0>=d[0]||0>=d[1]?!1:(c=U(c))&&dm(c)?!0:!1}else c=!1;if(!c)return!0;c=!0;b.type===rl?c=Xu(this,b):b.type===ll&&(c=!1);return Hm.call(this,b)&&c}
function Xu(b,c){if(b.j){var d=c.coordinate,e;e=b.a.J().a;var f=e[0],g,h;g=f.ja();b.c.J().Y(d);h=g[g.length-1];h[0]=d[0];h[1]=d[1];f.Y(g);d=e[1];e=f.o;g=f.a;h=e[0];var k=e[1],l=0,n;for(n=0+g;n<f.o.length;n+=g){var q=e[n],p=e[n+1],l=l+Math.sqrt((q-h)*(q-h)+(p-k)*(p-k));h=q;k=p}d.o[d.a]=d.o[0]+l;d.b();Zu(b)}else f=c.coordinate.slice(),null===b.c?(b.c=new Xh(new Ci(f)),Zu(b)):b.c.J().Y(f);return!0}function Zu(b){var c=[];null!==b.a&&c.push(b.a);null!==b.c&&c.push(b.c);b=b.l.S();b.clear(!0);uj(b,c)}
function Yu(b){b.j=!1;var c=b.a;null!==c&&(b.a=null,b.c=null,b.l.S().clear(!0));return c}Tu.prototype.sb=eh;Tu.prototype.C=function(){var b=this.g,c=this.getActive();null!==b&&c||Yu(this);this.l.setMap(c?b:null)};Tu.prototype.setMap=function(b){Tu.U.setMap.call(this,b);this.C()};"function"==typeof proj4&&(proj4.defs("EPSG:2056","+proj=somerc +lat_0=46.95240555555556 +lon_0=7.439583333333333 +k_0=1 +x_0=2600000 +y_0=1200000 +ellps=bessel +towgs84=674.374,15.056,405.346,0,0,0,0 +units=m +no_defs"),Ue(Oe("EPSG:2056"),[242E4,103E4,29E5,135E4]));A.value("ngeoDecorateLayer",function(b){Object.defineProperty(b,"visible",{configurable:!0,get:function(){return jf(b)},set:function(c){b.Ta(c)}});Object.defineProperty(b,"opacity",{configurable:!0,get:function(){return Math.round(100*b.get("opacity"))/100+""},set:function(c){b.set("opacity",+c)}})});function $u(b,c){this.b=b;this.a=c}$u.prototype.cancel=function(b,c){return this.a["delete"](this.b+"/cancel/"+b,void 0!==c?c:{})};function av(b){return function(c){return new $u(c,b)}}av.$inject=["$http"];A.factory("ngeoCreatePrint",av);A.service("ngeoPrintUtils",function(){});A.value("ngeoSyncArrays",function(b,c,d,e,f){var g=e.$watchCollection(function(){return b},function(){var e,g,h;if(d)for(e=b.length-1,h=0;0<=e;--e)f(b[e])&&(c[h++]=b[e]);else for(e=0,g=b.length,h=0;e<g;++e)f(b[e])&&(c[h++]=b[e]);c.length=h}),h=e.$watchCollection(function(){return c},function(){var e,g,h;if(d)for(e=0,g=b.length,h=c.length-1;e<g;++e)f(b[e])&&(b[e]=c[h--]);else for(e=0,g=b.length,h=0;e<g;++e)f(b[e])&&(b[e]=c[h++])});return function(){g();h()}});}).call(window);
//# sourceMappingURL=desktop.js.map
